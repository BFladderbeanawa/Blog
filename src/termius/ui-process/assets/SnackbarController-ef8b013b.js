import{v7 as q,v8 as G,hk as Y,bQ as I,v9 as Q,hi as J,r as f,bg as k,h9 as x,bn as i,qS as Z,bl as v,bW as _,bs as C,d3 as ee,br as $,va as oe,bh as N,d8 as te,aD as T,vb as ne,vc as se,bD as ae,vd as re,bF as ie,dl as ce,rR as U,bH as V,bq as b,ve as z,iX as le,hd as de,hz as O,vf as ue,bi as E,ud as he,vg as R,eB as pe,p7 as B,u6 as ve,vh as fe,b_ as ge,fX as me,fY as xe,vi as be,vj as Ce,f_ as ye,bc as ke,hN as Se,cy as we,vk as Ae,eA as P,ez as Ee,h$ as Ne,ic as Te,r$ as Me,f0 as De,vl as Ie,vm as $e,i0 as Re}from"./reconnectSaga-e33541d6.js";function Le(o,n){return o.classList?!!n&&o.classList.contains(n):(" "+(o.className.baseVal||o.className)+" ").indexOf(" "+n+" ")!==-1}function ze(o,n){o.classList?o.classList.add(n):Le(o,n)||(typeof o.className=="string"?o.className=o.className+" "+n:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+n))}function H(o,n){return o.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Be(o,n){o.classList?o.classList.remove(n):typeof o.className=="string"?o.className=H(o.className,n):o.setAttribute("class",H(o.className&&o.className.baseVal||"",n))}var Pe=function(n,r){return n&&r&&r.split(" ").forEach(function(e){return ze(n,e)})},L=function(n,r){return n&&r&&r.split(" ").forEach(function(e){return Be(n,e)})},F=function(o){q(n,o);function n(){for(var e,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return e=o.call.apply(o,[this].concat(c))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,s){var l=e.resolveArguments(a,s),h=l[0],t=l[1];e.removeClasses(h,"exit"),e.addClass(h,t?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,s)},e.onEntering=function(a,s){var l=e.resolveArguments(a,s),h=l[0],t=l[1],p=t?"appear":"enter";e.addClass(h,p,"active"),e.props.onEntering&&e.props.onEntering(a,s)},e.onEntered=function(a,s){var l=e.resolveArguments(a,s),h=l[0],t=l[1],p=t?"appear":"enter";e.removeClasses(h,p),e.addClass(h,p,"done"),e.props.onEntered&&e.props.onEntered(a,s)},e.onExit=function(a){var s=e.resolveArguments(a),l=s[0];e.removeClasses(l,"appear"),e.removeClasses(l,"enter"),e.addClass(l,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var s=e.resolveArguments(a),l=s[0];e.addClass(l,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var s=e.resolveArguments(a),l=s[0];e.removeClasses(l,"exit"),e.addClass(l,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,s){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,s]},e.getClassNames=function(a){var s=e.props.classNames,l=typeof s=="string",h=l&&s?s+"-":"",t=l?""+h+a:s[a],p=l?t+"-active":s[a+"Active"],g=l?t+"-done":s[a+"Done"];return{baseClassName:t,activeClassName:p,doneClassName:g}},e}var r=n.prototype;return r.addClass=function(u,c,d){var a=this.getClassNames(c)[d+"ClassName"],s=this.getClassNames("enter"),l=s.doneClassName;c==="appear"&&d==="done"&&l&&(a+=" "+l),d==="active"&&u&&G(u),a&&(this.appliedClasses[c][d]=a,Pe(u,a))},r.removeClasses=function(u,c){var d=this.appliedClasses[c],a=d.base,s=d.active,l=d.done;this.appliedClasses[c]={},a&&L(u,a),s&&L(u,s),l&&L(u,l)},r.render=function(){var u=this.props;u.classNames;var c=Y(u,["classNames"]);return I.createElement(Q,J({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(I.Component);F.defaultProps={classNames:""};F.propTypes={};const Fe=F;function We(o){return o.snackbar}function j(o){const[n,r]=f.useState(new Date);return f.useEffect(()=>{const e=setInterval(()=>{r(new Date)},o);return()=>{clearInterval(e)}},[o]),n}const He=o=>{const{delay:n,onTimerEnd:r}=o,[e,u]=f.useState(n);return f.useEffect(()=>{let c;const d=()=>(clearInterval(c),r(),0);return c=setInterval(()=>{u(s=>s<=1?d():s-1)},1e3),()=>{c&&clearTimeout(c)}},[e]),e};function _e(o){const{colorMode:n}=o,{classes:r}=Ue(),e={main:r.notificationMain,adaptive:r.notificationAdaptive};return{error:r.notificationAlert,regular:e[n]}}const Ue=k()({notificationMain:{"--notification-text-color":"var(--white)","--notification-text-color-hover":"var(--white-a50)","--notification-border-color":"var(--light-grey-a15)","--notification-background-color":"var(--dark-grey-3)","--notification-button-background-color":"var(--white)","--notification-button-text-color":"var(--dark-grey-3)","--notification-button-text-color-hover":"var(--notification-button-text-color)","--notification-button-background-color-hover":"var(--white-a75)","--hotkey-text-color":"var(--dark-grey-1)","--hotkey-background-color":"var(--dark-grey-7)"},notificationAlert:{"--notification-text-color":"var(--white)","--notification-text-color-hover":"var(--white-a50)","--notification-border-color":"var(--light-grey-a15)","--notification-background-color":"var(--red)","--notification-button-background-color":"var(--white)","--notification-button-text-color":"var(--red)","--notification-button-text-color-hover":"var(--notification-button-text-color)","--notification-button-background-color-hover":"var(--white-a75)","--hotkey-text-color":"var(--dark-grey-1)","--hotkey-background-color":"var(--dark-grey-7)"},notificationAdaptive:{"--notification-text-color":x.uiColor,"--notification-text-color-hover":x.foregroundColor,"--notification-border-color":"transparent","--notification-background-color":x.uiColorA20,"--notification-button-background-color":x.uiColorA10,"--notification-button-text-color":x.uiColor,"--notification-button-text-color-hover":x.foregroundColor,"--notification-button-background-color-hover":x.uiColorA10,"--hotkey-text-color":x.uiColor,"--hotkey-background-color":x.uiColorA25}}),S=f.forwardRef((o,n)=>{const{className:r,children:e,actions:u,type:c="regular",timer:d=5e3,handlers:a,onClose:s,onClickAway:l=s,onTimerEnd:h=s,colorMode:t="main"}=o,{classes:p}=Ve(),y=_e({colorMode:t})[c];return He({delay:Math.round(d/1e3),onTimerEnd:h}),i(Z,{onClickAway:l,mouseEvent:"onPointerDown",children:v("div",{ref:n,tabIndex:-1,role:"presentation",className:_("termius-dark-theme",p.container,r,y),children:[v("div",{children:[i("div",{className:p.message,children:i(C,{variant:"body2",fontSize:12,children:e})}),u&&i(ee,{children:u.map((w,m)=>i($,{size:"small",className:p.button,onClick:a==null?void 0:a[m],disableHover:!0,children:i(C,{variant:"mediumBody1",fontSize:14,children:w})},`${w}-${m}`))})]}),i("button",{"data-testid":"notification-close",type:"button",className:p.close,onClick:s,children:i(oe,{})})]})})}),Ve=k()({container:{position:"relative",width:302,borderRadius:10,border:"1px solid var(--notification-border-color)",background:"var(--notification-background-color)",color:"var(--notification-text-color)",padding:"9px",boxShadow:"0px 15px 30px 0px rgba(0, 0, 0, 0.15)",backdropFilter:"blur(50px)",marginTop:5},message:{marginRight:"15px",wordWrap:"break-word"},button:{padding:"5px 10px",background:"var(--notification-button-background-color)",color:"var(--notification-button-text-color)",borderRadius:"6px",width:"100%",marginTop:10,textTransform:"capitalize","&:hover":{"--notification-button-text-color":"var(--notification-button-text-color-hover)","--notification-button-background-color":"var(--notification-button-background-color-hover)"}},close:{color:"var(--notification-text-color)",position:"absolute",width:"12px",height:"12px",right:"8px",top:"11px",border:"none",backgroundColor:"transparent",display:"flex",zIndex:2,"& svg":{height:"12px",width:"12px"},"&:hover":{"--notification-text-color":"var(--notification-text-color-hover)"}}});function Oe({title:o,message:n,...r}){const{classes:e}=je();return i(S,{...r,children:v("div",{className:e.content,children:[i("div",{className:e.title,children:o}),i("div",{className:e.message,children:n})]})})}const je=k()({content:{display:"flex",flexDirection:"column"},title:{fontSize:"14px"},message:{fontSize:"10px"}});function Ke({association:o,...n}){const r=N(),e=()=>{r(ne(o)),r(se({onScreen:"SFTP"})),n.onClose()},u=te.basename(o.appPath);return v(S,{...n,handlers:[e,n.onClose],onClickAway:T,children:["Always use ",i("strong",{children:u})," to open"," ",v("strong",{children:[".",o.type]})," files?"]})}function Xe({message:o,...n}){return i(S,{...n,children:o})}function K(o,n){ae(2,arguments);var r=ie(n);return re(o,r*1e3)}function qe(o){return o<33?"red":o<66?"yellow":"green"}const X=({countdown:o,progress:n})=>{const{classes:r}=Ge();return v("div",{className:r.root,children:[i(C,{className:r.text,align:"center",fontSize:20,children:o}),i(ce,{className:_(r.progress,r[qe(n)]),thickness:3,size:34,variant:"determinate",value:n})]})},Ge=k()({root:{position:"relative",display:"flex",width:"34px",height:"34px"},text:{lineHeight:"34px",width:"34px",margin:"auto",color:"var(--white)"},red:{color:"var(--red)","& svg":{color:"var(--red)"}},yellow:{color:"var(--yellow)","& svg":{color:"var(--yellow)"}},green:{color:"var(--green)","& svg":{color:"var(--green)"}},progress:{transform:"scale(-1, 1)",position:"absolute"}});function Ye(o){const{message:n,createdAt:r,id:e,target:u,timer:c}=o,[d]=f.useState(+new Date),{classes:a}=Qe(),s=N(),l=()=>{s(z().processed({id:e})),o.onClose()},h=()=>{s(z().canceled({id:e})),o.onClose()},t=U(+r+c-d,1,c),p=Math.round(t/1e3),g=j(t/100),y=K(r,p),m=Math.max(V(y,g),0)/t;return i(S,{...o,colorMode:"main",onClose:l,children:v(b,{direction:"row",children:[i(X,{countdown:Math.ceil(p*m),progress:m*100}),v("div",{className:a.content,children:[v(C,{display:"inline",color:"inherit",lineHeight:1,fontSize:12,children:[n," ",u]}),i($,{size:"small",className:a.button,onClick:h,children:i(C,{variant:"mediumBody1",fontSize:14,children:"Undo"})})]})]})})}const Qe=k()({content:{marginLeft:"10px",width:"100%"},button:{textTransform:"none",marginTop:"10px",backgroundColor:"var(--dark-grey-6)"}});function Je({id:o,createdAt:n,timer:r,onClose:e,currentWindowFocused:u}){const c=N(),[d,a]=f.useState(!1),s=O(ue),l=u&&d;f.useEffect(()=>{d||a(s)},[s,d]);const{length:h}=E(he),t=f.useRef(null);f.useEffect(()=>{h<1&&(c(R.canceled({id:o})),e())},[c,o,e,h]);const p=()=>{c(R.canceled({id:o})),e()},g=A=>{c(R.processed({id:o,data:A})),e()},y=()=>{g({connectionOrigin:"Reconnect Button"})},w=()=>{g({connectionOrigin:"Reconnect Hotkey"})},m=()=>{c(B({closingMethod:"Esc",hintLevel:"Warn",hintMessage:"Disconnect"})),p()},W=()=>{c(B({closingMethod:"Button",hintLevel:"Warn",hintMessage:"Disconnect"})),p()},M=()=>{c(z().canceled({id:o})),c(ve()),e()};return f.useEffect(()=>{var D;const A=document.activeElement;return u&&d&&((D=t.current)==null||D.focus()),()=>{d&&(A==null||A.focus())}},[u,d]),i(pe.GlobalHotKeys,{keyMap:{onEsc:"escape",onEnter:"enter"},handlers:{onEsc:m,onEnter:w},children:i(Ze,{ref:t,createdAt:n,timer:r,onTimerEnd:e,onCloseButtonClick:W,onReconnectButtonClick:y,onCloseDisconnectedButtonClick:M,reconnectableTerminalCount:h,visible:l})})}const Ze=f.forwardRef(({createdAt:o,timer:n,onCloseButtonClick:r,onCloseDisconnectedButtonClick:e,onReconnectButtonClick:u,onTimerEnd:c,reconnectableTerminalCount:d,visible:a,...s},l)=>{const{classes:h,cx:t}=eo(),[p]=f.useState(Date.now()),g=U(o.valueOf()+n-p,1,n),y=Math.round(g/1e3),w=j(g/100),m=K(o,y),M=Math.max(V(m,w),0)/g,A=d===1?"1 session is disconnected":`${d} sessions are disconnected`,D=d===1?"Close terminal":"Close terminals";return i(S,{...s,ref:l,timer:n,onClose:r,onClickAway:T,className:t({[h.invisible]:!a,[h.visible]:a}),onTimerEnd:c,colorMode:"main",children:i(b,{gap:"10px",children:v(b,{direction:"row",gap:"10px",children:[i(X,{countdown:Math.ceil(y*M),progress:M*100}),v(b,{gap:"10px",children:[v(C,{variant:"body2",fontSize:12,children:[A,". ",i("br",{})," Initiating reconnection..."]}),v(b,{direction:"row",gap:"10px",children:[i($,{size:"small","aria-label":"Force reconnect terminals",color:"accent",variant:"contained",className:h.reconnectButton,onClick:u,children:i(C,{variant:"mediumBody1",fontSize:14,children:v(b,{direction:"row",gap:"5px",alignItems:"center",children:["Reconnect",i(le,{width:14,height:14})]})})}),i($,{size:"small","aria-label":"Close all disconnected terminals",variant:"contained",className:h.closeTerminalButton,onClick:e,children:i(C,{variant:"mediumBody1",fontSize:14,children:i(b,{direction:"row",gap:"5px",alignItems:"center",children:D})})})]})]})]})})})}),eo=k()({reconnectButton:{textTransform:"none"},closeTerminalButton:{textTransform:"none",backgroundColor:"var(--dark-grey-6)"},invisible:{opacity:0,visibility:"hidden",overflow:"hidden",width:0,height:0},visible:{visibility:"visible",animation:`${de} 0.3s forwards`}});function oo(o,n){if(!n)return null;switch(o){case"unauthorized":case"starter":return{title:`You have ${Math.floor(ke(n))}mb of logs stored locally`,description:"Manage log storage in settings"};default:return null}}function to({userType:o,...n}){const r=N(),e=E(l=>l.history.sessionLogsStorageSize),[u]=E(fe),c={promotionLocation:"Vault Tab",promotionType:"High-Volume Unsynced Logs",trialDaysLeft:u,sideMenuTeamTrialPromoType:void 0};ge(()=>{r(me(c))});const d=()=>{r(xe({...c,dismissForever:void 0})),r(be()),n.onClose()},a=()=>{n.onClose(),r(Ce("/logs")),r(ye(c))};if(!e)return null;const s=oo(o,e);return v(S,{...n,onClose:d,handlers:[a],onClickAway:T,actions:["Manage logs"],children:[v("strong",{children:[s==null?void 0:s.title,i("br",{})]}),s==null?void 0:s.description]})}function no({before:o,shortcut:n,after:r,shortcutsScheme:e,...u}){var s;const{classes:c}=so(),d=(s=e==null?void 0:e.shortcuts.find(l=>l.type===n))==null?void 0:s.shortcut,a=i(b,{direction:"row",gap:"3px",margin:"0 5px",children:d==null?void 0:d.split("+").map(l=>i("div",{className:c.shortcut,children:i(C,{variant:"mediumBody1",fontSize:11,lineHeight:"18px",children:Se(l)})},l))});return i(S,{...u,children:v(b,{direction:"row",children:[o,a,r]})})}const so=k()({shortcut:{color:"var(--hotkey-text-color)",background:"var(--hotkey-background-color)",borderRadius:3,textAlign:"center",fontFamily:"Lucida Grande, CircularXX, sans-serif",padding:"0 3px",minWidth:"18px"}});function ao({message:o,...n}){const r=N(),e=we(),u=()=>{n.onClose(),r(Ae({windowId:P()})),r(B({hintMessage:"Inactive Pro Features",hintLevel:"Info",closingMethod:void 0}))};return i(S,{...n,onClose:u,handlers:[()=>{Ee(e,{dialog:"ProFeatures",target:P(),props:{purchaseOpen:!0,from:"Connection Flow"}}).catch(T),u()}],onClickAway:T,children:o})}const co=I.memo(()=>{const o=N(),n=E(We),r=E(Ne),{classes:e}=ro(),u=Te(n,({createdAt:t})=>t),c=t=>{o($e(t))},d=E(Me),a=O(Re),s=P(),l=d===s,h=a==="terminal"?"adaptive":"main";return i(De,{in:l,children:i("div",{className:e.root,children:i(Ie,{children:u.map(t=>i(Fe,{timeout:300,classNames:{enter:e.enter,enterActive:e.enterActive,exit:e.exit,exitActive:e.exitActive},children:v(I.Fragment,{children:[t.variant==="alert"&&i(Oe,{title:t.title,message:t.message,onClose:()=>c(t.id),colorMode:h}),t.variant==="process"&&i(Ye,{id:t.id,message:t.message,target:t.target,onClose:()=>c(t.id),createdAt:t.createdAt,timer:t.timer}),t.variant==="reconnect"&&i(Je,{id:t.id,onClose:()=>c(t.id),createdAt:t.createdAt,timer:t.timer,currentWindowFocused:l}),t.variant==="message"&&i(Xe,{message:t.message,type:t.type,onClose:()=>c(t.id),actions:t.actions,timer:t.timer,colorMode:h}),t.variant==="shortcut"&&i(no,{before:t.before,shortcut:t.shortcut,after:t.after,type:t.type,onClose:()=>c(t.id),actions:t.actions,timer:t.timer,colorMode:h,shortcutsScheme:r}),t.variant==="fileTypeAssociation"&&i(Ke,{association:t.association,type:t.type,onClose:()=>c(t.id),actions:t.actions,timer:t.timer,colorMode:h}),t.variant==="proFeatures"&&l&&i(ao,{message:t.message,type:t.type,onClose:()=>c(t.id),actions:t.actions,timer:t.timer,colorMode:h}),t.variant==="sessionLogsUnsynced"&&s===t.windowId&&i(to,{type:"regular",onClose:()=>c(t.id),colorMode:h,timer:t.timer,userType:t.userType})]})},t.id))})})})}),ro=k()({root:{zIndex:1302,position:"fixed",marginLeft:"20px",bottom:"20px"},enter:{opacity:0},enterActive:{opacity:1,transition:"opacity 300ms ease-in"},exit:{opacity:1},exitActive:{opacity:0,transition:"opacity 300ms ease-in"}});export{co as SnackbarController};
//# sourceMappingURL=SnackbarController-ef8b013b.js.map
