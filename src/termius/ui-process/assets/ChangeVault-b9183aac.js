import{bg as g,bn as e,bl as o,bs as u,ce as x,dl as D,a7 as O,vB as j,f7 as Z,eJ as U,d_ as W,lf as $,lX as G,kL as Y,et as J,b8 as q,aN as X,bC as Q,dN as ee,m1 as te,f$ as ne,fn as oe,vn as re,vC as ae,r as s,br as h,d3 as E,ds as R,vD as L,cH as ie,bW as se,jm as le,vE as N,bq as I,ku as K,vF as H,bp as V,vG as ce,vH as M,bh as B,bi as z,vI as de,vJ as pe,vK as me,vL as ue,b2 as he,vM as ge,vN as ve,vO as f}from"./reconnectSaga-e33541d6.js";import{p as k,k as ye}from"./PortForwardingRulePresenter-4942c31a.js";import{R as xe,a as _,b as Ce}from"./RadioOptionsList-4f548194.js";const be=t=>{const{classes:n}=fe();return e("div",{className:n.root,children:e("div",{className:n.body,children:t.children})})},fe=g()({root:{width:"720px",height:"540px","@media (max-height: 540px)":{height:"440px"},position:"absolute",overflow:"hidden",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"var(--light-grey-7)",borderRadius:"20px","--content-background":"var(--white)","--text-color":"var(--dark-grey-1)","--transition-duration":"250ms","--transition-function":"cubic-bezier(0.4, 0, 0.2, 1)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-3)","--content-background":"var(--dark-grey-4)","--text-color":"var(--white)"},color:"var(--text-color)","@media (max-height: 460px) and (max-width:730px)":{borderRadius:0}},body:{position:"relative",zIndex:1,height:"100%",overflow:"hidden"}}),we=()=>{const{classes:t}=ke();return e("div",{className:t.root,children:o("div",{className:t.body,children:[e(u,{fontSize:24,bold:!0,children:"Processing"}),e(x,{top:20,children:e(u,{variant:"body1",children:"We need a few moments..."})}),o("div",{className:t.spinner,children:[e(D,{size:205,value:100,className:t.progressDefault,thickness:2,variant:"determinate"}),e(D,{size:205,value:80,className:t.progress,thickness:2,variant:"indeterminate"})]})]})})},ke=g()({root:{padding:"40px","@media (max-height: 540px)":{paddingTop:"20px"}},body:{width:523,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",margin:"auto"},progress:{position:"absolute",color:"var(--accent)"},progressDefault:{position:"absolute",color:"var(--light-grey-4)",".termius-dark-theme &":{color:"var(--dark-grey-4)"}},spinner:{marginTop:"104px",width:"205px",height:"205px",position:"relative",display:"flex","@media (max-height: 540px)":{marginTop:"52px"}}});function Se(t){switch(O(j.is(t),"non entity passed"),t.entityName){case"host":return new q(t);case"group":return new J(t);case"snippet":return new Y(t);case"snippetsPackage":return new G(t);case"portForwardingRule":return new $(t);case"identity":return new W(t);case"sshKey":return new U(t);case"knownHost":return new Z(t)}throw new X(`Cannot un-marshall ${t.entityName}`)}const Ne={host:Q,group:ee,portForwardingRule:k,snippetsPackage:te,snippet:ne,identity:oe,sshKey:re,knownHost:ye},w=t=>{const n=Se(t),a=Me(n);return{icon:a.icon(n),label:a.label(n),description:a.description(n)}};function Me(t){return Ne[t.entityName]}function _e(t){var l;const n=t.length===1?"singular":"plural",a=((l=t[0])==null?void 0:l.entityName)??"default",d=t.every(r=>r.entityName===a);return ae[d?a:"default"][n]}const P=t=>{const{className:n,children:a}=t,{classes:d,cx:l}=Re();return e("div",{className:l(d.footer,n),children:a})},Re=g()({footer:{"--border-color":"var(--light-grey-5)",".termius-dark-theme &":{"--border-color":"var(--dark-grey-4)"},padding:"18.5px 20px",display:"flex",justifyContent:"space-between",borderTop:"1px solid var(--border-color)"}}),Le=["host","snippet","identity","sshKey"],Ee=t=>{const{backReferences:n,onCopy:a,onMove:d,onCancel:l}=t,{classes:r}=Te(),[c,p]=s.useState({host:!0,snippet:!0,identity:!0,sshKey:!0});return o("div",{className:r.root,children:[o("div",{className:r.body,children:[e(u,{align:"center",fontSize:24,bold:!0,children:"Copy or move dependencies?"}),e(x,{top:20,bottom:20,children:e(u,{align:"center",variant:"body1",children:"There are dependencies which are used in other entities and moving them will break their usage. Move or copy the dependencies below?"})}),e("div",{className:r.container,children:Le.map(m=>{var i;return((i=n[m])==null?void 0:i.length)>0&&e(Pe,{entityName:m,backReferences:n,onCollapse:()=>p({...c,[m]:!c[m]}),collapsed:c[m]},m)})})]}),o(P,{children:[e(h,{color:"regular",variant:"text",onClick:l,children:"Cancel"}),o(E,{children:[e(h,{color:"accent",variant:"text",onClick:d,children:"Move"}),e(h,{color:"accent",size:"medium",type:"button",onClick:a,children:"Copy"})]})]})]})},Pe=t=>{const{backReferences:n,entityName:a,onCollapse:d,collapsed:l}=t,{classes:r}=Fe(),c=n[a];return c.length===0?null:o(s.Fragment,{children:[e(x,{bottom:10,children:e("div",{onClick:d,children:e(R,{className:r.entity,icon:e(L,{className:r.icon,icon:w(c[0]).icon}),title:o(s.Fragment,{children:[c.length," ",_e(c)]}),endAdornment:e(ie,{className:se(r.arrowIcon,{[r.open]:!l})})})})}),e(le,{in:!l,children:c.map(p=>e(x,{left:20,bottom:10,children:e(R,{className:r.entity,icon:e(L,{className:r.icon,icon:w(p).icon}),title:w(p).label,subtitle:e("div",{className:r.entitySubtitle,children:e("span",{className:r.entityDescription,children:w(p).description})})})},`${p.entityName}-${p.local_id}`))})]})},Te=g()({root:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},body:{padding:"40px 120px 0px","@media (max-height: 540px)":{paddingTop:"20px"}},container:{maxHeight:"305px","@media (max-height: 540px)":{maxHeight:"205px"},overflow:"hidden auto",borderRadius:"10px","&::-webkit-scrollbar":{display:"none"}}}),Fe=g()({entity:{color:"var(--text-color)",padding:10,borderRadius:14,gap:10,backgroundColor:"var(--light-grey-6)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-4)"}},entitySubtitle:{display:"flex",alignItems:"center",gap:10,color:"var(--light-grey-2)",".termius-dark-theme &":{color:"var(--light-grey-4)"}},entityDescription:{flex:"1"},icon:{width:43,height:43},arrowIcon:{color:"var(--secondary)",fill:"currentColor",width:10,height:6,marginTop:"2px",marginRight:"15px",transition:"transform 0.2s"},open:{transform:"rotate(180deg)"}}),Ae=t=>{const{portForwardingRules:n,onRemove:a,onMove:d,onCancel:l}=t,{classes:r}=De();return o("div",{className:r.root,children:[o("div",{className:r.body,children:[e(u,{align:"center",fontSize:24,bold:!0,children:"Move or remove port forwarding?"}),e(x,{top:20,bottom:20,children:o(u,{align:"center",variant:"body1",children:["Hosts are used in the following port forwarding rules.",e("br",{}),"Move the rules to the same vault as well?"]})}),e("div",{className:r.container,children:n.map(c=>e(x,{bottom:20,children:e(R,{className:r.entity,icon:e(L,{className:r.icon,icon:k.icon(c)}),title:k.label(c),subtitle:e("div",{className:r.entitySubtitle,children:e("span",{className:r.entityDescription,children:k.description(new $(c))})})})},String(c.local_id)))})]}),o(P,{children:[e(h,{color:"regular",variant:"text",onClick:l,children:"Cancel"}),o(E,{children:[e(h,{color:"accent",variant:"text",onClick:a,children:"Remove"}),e(h,{color:"accent",size:"medium",type:"button",onClick:d,children:"Move"})]})]})]})},De=g()({root:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},body:{padding:"40px 120px 0px","@media (max-height: 540px)":{paddingTop:"20px"}},container:{maxHeight:"305px","@media (max-height: 540px)":{maxHeight:"205px"},overflow:"hidden auto",borderRadius:"10px","&::-webkit-scrollbar":{display:"none"}},entity:{color:"var(--text-color)",padding:10,borderRadius:14,gap:10,backgroundColor:"var(--light-grey-6)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-4)"}},entitySubtitle:{display:"flex",alignItems:"center",gap:10,color:"var(--light-grey-2)",".termius-dark-theme &":{color:"var(--light-grey-4)"}},entityDescription:{flex:"1"},icon:{width:43,height:43,backgroundColor:"var(--dark-blue-solid)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-5)"}}}),Ie={move:"moving to",copy:"copying to",create:"creating at",import:"moving to"},Ke=t=>{const{vault:n,value:a,onChange:d,operation:l,onSubmit:r,onCancel:c,onBack:p=()=>{},multiKeyPromo:m}=t,{classes:i}=He();return o("form",{className:i.root,onSubmit:v=>{v.preventDefault(),r({credentialsMode:a.mode})},children:[o("div",{className:i.body,children:[e(u,{align:"center",fontSize:24,bold:!0,children:"Choose where to store credentials"}),e("div",{className:i.subtitle,children:o(u,{align:"center",variant:"body1",children:["Select how your teammates will access the items"," ",Ie[l],e("br",{}),o(u,{ellipsis:!0,align:"center",className:i.vaultName,children:[N(n),"."]})]})}),o(xe,{"aria-label":"Credentials mode",onChange:v=>{d(v.target.value)},value:a.mode,children:[e(_,{id:"no_credentials_sharing",value:"no_credentials_sharing",label:o(I,{direction:"row",alignItems:"center",gap:"5px",children:[e(u,{variant:"subtitle1",children:N(K,{excludeSuffixForPredefinedVaults:!0})}),e(H,{vault:K,variant:"selectCredentialsDialog"})]}),startAdornment:e(V,{className:i.optionIcon}),classes:{startAdornment:i.optionStartAdornment},children:"Your credentials are not shared. Vault members connect with credentials from their personal vaults."}),e(_,{id:"credentials_sharing",value:"credentials_sharing",label:o(I,{direction:"row",alignItems:"center",gap:"5px",maxWidth:"400px",children:[e(u,{variant:"subtitle1",ellipsis:!0,children:N(n,{excludeSuffixForPredefinedVaults:!0})}),e(H,{vault:n,variant:"selectCredentialsDialog"})]}),startAdornment:e(V,{className:i.optionIcon}),classes:{startAdornment:i.optionStartAdornment},children:n.isDefault?"Your credentials are shared. The entire team can connect with credentials from the Team vault.":"Your credentials are shared. Vault members connect with credentials you move to this vault."}),e(Ce,{},"separator-1"),e(_,{id:"multikey",value:"multikey",label:"MultiKey",startAdornment:e(ce,{className:i.optionIcon}),classes:{startAdornment:i.optionStartAdornment},children:"Vault members connect with personal unextractable passkeys generated on each device."})]})]}),o(P,{className:i.footer,children:[l==="import"?e("div",{}):e(h,{color:"regular",variant:"text",onClick:c,children:"Cancel"}),o(E,{children:[l==="import"&&o(s.Fragment,{children:[e(h,{onClick:p,size:"medium",children:"Back"}),e(h,{color:"accent",size:"medium",type:"submit",children:a.mode==="multikey"&&m?"Learn More":"Done"})]}),l!=="import"&&o(h,{color:"accent",size:"medium",type:"submit",children:[a.mode==="no_credentials_sharing"&&o(s.Fragment,{children:[M(l)," without credentials"]}),a.mode==="credentials_sharing"&&o(s.Fragment,{children:[M(l)," with credentials"]}),a.mode==="multikey"&&(m?"Learn More":o(s.Fragment,{children:[M(l)," and use MultiKey"]}))]})]})]})]})},He=g()({root:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},optionStartAdornment:{margin:"auto"},optionIcon:{width:"16px",height:"16px"},body:{padding:"40px 40px 0px","@media (max-height: 540px)":{paddingTop:"15px",paddingBottom:"15px"}},footer:{"@media (max-height: 540px)":{padding:"8px 20px"}},subtitle:{marginTop:"10px",marginBottom:"30px","@media (max-height: 540px)":{marginTop:"10px",marginBottom:"12px"}},vaultName:{display:"inline-block",lineHeight:"normal",verticalAlign:"text-bottom",maxWidth:"320px","&:before":{content:'" "',whiteSpace:"pre"},"&:after":{content:'" "',whiteSpace:"pre"}}}),Ve=(t,n)=>s.createElement("svg",{width:297,height:133,viewBox:"0 0 297 133",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,...t},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66.2033 0.554688C75.542 0.554688 83.9363 4.02482 89.7316 9.54472C96.8106 3.96058 106.232 0.554688 116.574 0.554688C138.565 0.554688 156.392 15.9536 156.392 34.9491C156.392 35.866 156.35 36.7745 156.268 37.6733C169.935 43.1218 179.419 55.0635 179.419 68.9186C179.419 87.9141 161.592 103.313 139.601 103.313C127.55 103.313 116.749 98.6883 109.447 91.3812C102.48 99.4267 89.8016 103.313 75.3167 103.313C56.8139 103.313 41.2588 96.9718 36.7899 83.7201C36.0463 83.7607 35.2963 83.7812 34.5406 83.7812C15.4644 83.7812 0 70.6637 0 54.4823C0 38.3009 15.4644 25.1833 34.5406 25.1833L34.6783 25.1835C36.1743 11.369 49.7174 0.554688 66.2033 0.554688Z",fill:"url(#paint0_linear_3389_9525)"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M199.156 82.8086C199.156 108.3 178.491 128.965 153 128.965C127.509 128.965 106.844 108.3 106.844 82.8086C106.844 57.3173 127.509 36.6525 153 36.6525C178.491 36.6525 199.156 57.3173 199.156 82.8086ZM203 82.8086C203 110.423 180.614 132.809 153 132.809C125.386 132.809 103 110.423 103 82.8086C103 55.1944 125.386 32.8086 153 32.8086C180.614 32.8086 203 55.1944 203 82.8086ZM146.412 91.1637L169.816 67.7592L173.088 71.0316L148.048 96.0722L146.412 97.6373L144.775 96.0722L133.393 84.6901L136.666 81.4178L146.412 91.1637Z",fill:"#2091F6"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M199.156 82.8086C199.156 108.3 178.491 128.965 153 128.965C127.509 128.965 106.844 108.3 106.844 82.8086C106.844 57.3173 127.509 36.6525 153 36.6525C178.491 36.6525 199.156 57.3173 199.156 82.8086ZM203 82.8086C203 110.423 180.614 132.809 153 132.809C125.386 132.809 103 110.423 103 82.8086C103 55.1944 125.386 32.8086 153 32.8086C180.614 32.8086 203 55.1944 203 82.8086ZM146.412 91.1637L169.816 67.7592L173.088 71.0316L148.048 96.0722L146.412 97.6373L144.775 96.0722L133.393 84.6901L136.666 81.4178L146.412 91.1637Z",fill:"url(#paint1_linear_3389_9525)"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M211.018 45.9121C218.073 45.9121 224.414 48.5334 228.791 52.703C234.139 48.4849 241.255 45.9121 249.068 45.9121C265.679 45.9121 279.146 57.5444 279.146 71.8935C279.146 72.5861 279.115 73.2724 279.053 73.9514C289.377 78.067 296.541 87.0879 296.541 97.5542C296.541 111.903 283.075 123.536 266.463 123.536C257.359 123.536 249.2 120.042 243.685 114.522C238.422 120.6 228.844 123.536 217.902 123.536C203.925 123.536 192.174 118.745 188.799 108.734C188.237 108.765 187.671 108.78 187.1 108.78C172.69 108.78 161.008 98.8714 161.008 86.6481C161.008 74.4248 172.69 64.5158 187.1 64.5158L187.205 64.5159C188.335 54.0809 198.565 45.9121 211.018 45.9121Z",fill:"url(#paint2_linear_3389_9525)"}),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_3389_9525",x1:53.0481,y1:37.2117,x2:53.0481,y2:79.2058,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"currentColor"}),s.createElement("stop",{offset:1,stopColor:"currentColor",stopOpacity:0})),s.createElement("linearGradient",{id:"paint1_linear_3389_9525",x1:103,y1:132.809,x2:188.224,y2:21.4957,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#2091F6"}),s.createElement("stop",{offset:1,stopColor:"#21B568"})),s.createElement("linearGradient",{id:"paint2_linear_3389_9525",x1:201.08,y1:73.6028,x2:201.08,y2:105.325,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"currentColor"}),s.createElement("stop",{offset:1,stopColor:"currentColor",stopOpacity:0})))),$e=s.forwardRef(Ve),Be=s.memo($e),ze=()=>{const{classes:t}=Oe();return o("div",{className:t.root,children:[e(u,{fontSize:24,bold:!0,align:"center",children:"Successfully completed!"}),e(Be,{className:t.successImage})]})},Oe=g()({root:{padding:"40px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:35,fontSize:14,lineHeight:1.3,"@media (max-height: 540px)":{paddingTop:"20px"}},successImage:{marginTop:60,color:"var(--light-grey-5)",".termius-dark-theme &":{color:"var(--dark-grey-4)"}}}),je=({onSubmit:t,wizardID:n})=>{const a=B(),d=z(de),[l,r]=s.useState("no_credentials_sharing"),c=i=>{a(pe({credentialsSharingMode:me[i],wizardID:n})),r(i)},p=i=>{if(l==="multikey"&&d){m();return}t(i.credentialsMode)},m=()=>{a(ue()),he({title:"Learn more about MultiKey",url:"https://termi.us/multikey-buy"})};return{changeCredentialsMode:c,chooseCredentialsMode:p,credentialsMode:l,multiKeyPromo:d}},Ze=({wizardID:t,operation:n="move",closeDialog:a})=>{const d=B(),l=y=>d(f.select_credentials_mode({wizardID:t,windowId:b,payload:y})),{changeCredentialsMode:r,chooseCredentialsMode:c,credentialsMode:p,multiKeyPromo:m}=je({onSubmit:l,wizardID:t}),i=z(y=>ge(y,t)),v=ve(i==null?void 0:i.targetState);if(!i||!v)return null;const S=()=>{d(f.closed({wizardID:t,windowId:b})),a()},T=y=>d(f.resolve_conflicts({wizardID:t,windowId:b,payload:y})),F=y=>d(f.resolve_port_forwarding_conflicts({wizardID:t,windowId:b,payload:y})),{step:C,windowId:b,backReferences:A}=i;return o(be,{children:[C==="select_credentials_mode"&&e(Ke,{vault:v,operation:n,value:{mode:p},onChange:r,onSubmit:c,onCancel:S,multiKeyPromo:m}),C==="resolve_conflicts"&&e(Ee,{vaultName:v.name,backReferences:A,onCopy:()=>T("Copy"),onMove:()=>T("Move"),onCancel:S}),C==="resolve_port_forwarding_conflicts"&&e(Ae,{portForwardingRules:A.portForwarding,onRemove:()=>F("Remove"),onMove:()=>F("Move"),onCancel:S}),C==="process"&&e(we,{}),C==="success"&&e(ze,{})]})},Ye=Ze;export{Ye as default};
//# sourceMappingURL=ChangeVault-b9183aac.js.map
