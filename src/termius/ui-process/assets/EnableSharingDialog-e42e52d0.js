import{bg as E,cy as N,e$ as R,r as D,ee as T,wY as A,bl as l,bQ as I,bs as S,wR as y,bn as e,vH as W,br as P,wS as B,bW as L,vo as M,ce as O,i4 as Y,bh as j,fA as $,wZ as p,aw as q,bi as G,gh as H}from"./reconnectSaga-e33541d6.js";import{t as _}from"./transitionScreenWrapper-09a0d50d.js";import{F as z}from"./PasswordInput-8f4485dc.js";import{F as Q}from"./FullScreenDialogLayout-35fddac2.js";import{M as V}from"./passwordPrompt.react-5b074083.js";import{A as f}from"./AnimationHandler-f780c16f.js";import"./PasswordInput-42a10483.js";const Z=c=>{var m,x;const{onSubmit:a,onSuccess:s,onFail:o,isOwner:d}=c,n=N(),{classes:u}=J(),t=R({mode:"onChange"}),{register:w,handleSubmit:h,formState:i,setError:r}=t,C=D.useCallback(async F=>{a();try{await T(n,A,F.password),s()}catch(k){r("password",{type:"notMatch",message:k}),o()}},[n,a,s,o,r]),{isValid:g,isSubmitting:b}=i;return l(I.Fragment,{children:[l(S,{color:"primary",variant:"h2",children:["Re-enter your ",y]}),d?l(S,{color:"primary",variant:"body2",children:["Now you can share groups with your team to make sure your team is up-to-date with the latest changes in the configuration.",e("br",{}),e("br",{}),"To enable this feature, please enter your Termius"," ",y,".",e("br",{}),e("br",{}),"You can also do it later in settings."]}):l(S,{color:"primary",variant:"body2",children:["Now the team administrator can share groups with your team to make sure your team is up-to-date with the latest changes in the configuration.",e("br",{}),e("br",{}),"To enable access to the shared data, please enter your Termius"," ",y,".",e("br",{}),e("br",{}),"You can also do it later in settings."]}),l("form",{className:u.form,onSubmit:h(C),children:[e(z,{label:`${W(y)}`,autoFocus:!0,error:!!i.errors.password,InputProps:w("password",{required:!0})}),e(P,{fullWidth:!0,color:"accent",type:"submit",disabled:!g||b,progress:b,children:"Enable group sharing"}),!!((x=(m=i.errors)==null?void 0:m.password)!=null&&x.message)&&e(B,{onLeft:!0,children:i.errors.password.message})]})]})},J=E()({form:{flex:1,display:"flex",flexDirection:"column"}}),v=c=>{const{animationProps:a,children:s,title:o,onPostpone:d,isCloseButtonDisabled:n,actions:u}=c,{classes:t}=K();return e(f,{animationProps:a,isContainer:!0,children:e("div",{className:L(t.root,"termius-dark-theme"),children:e(Q,{top:e(f,{order:1,animationProps:a,children:e(S,{color:"primary",align:"center",variant:"h2",children:o})}),left:e(f,{order:2,animationProps:a,children:e("div",{className:t.imageContainer,children:e(V,{})})}),right:e(f,{order:2,animationProps:a,children:e("div",{className:t.cardContainer,children:l("div",{children:[e(M,{className:t.card,dark:!0,children:s}),u||e(O,{top:20,children:e(P,{onClick:d,disabled:n,className:t.button,children:"Do it later"})})]})})})})})})},K=E()({root:{height:"100%",width:"100%",padding:"40px",paddingBottom:"0",backgroundColor:"var(--dark-grey-1)"},imageContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center","@media only screen and (max-width: 900px)":{display:"none"}},cardContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},card:{width:"440px",maxWidth:"100%"},button:{width:"207px"}});v.defaultProps={isCloseButtonDisabled:!1,actions:null};const U=c=>{const{mounted:a,opacity:s,translate:o,opacityContainer:d,onTransitionEndContainer:n,contentRef:u,containerRef:t,isAnimationInProgress:w,closeDialog:h}=c,i={mounted:a,opacity:s,translate:o,opacityContainer:d,onTransitionEndContainer:n,contentRef:u,containerRef:t,isAnimationInProgress:w},r=j(),[C,g]=D.useState(!1);$(()=>{r(p.shown())});const b=D.useCallback(()=>{r(p.postponed()),q.setDeprecatedEnableSharingDialogWasShown(),h()},[h,r]),m=G(H);return e(v,{animationProps:i,onPostpone:b,title:m?"Enable Shared Groups":"Enable Access to Shared Groups",isCloseButtonDisabled:C,children:e(Z,{onSuccess:()=>{r(p.succeeded()),h()},onSubmit:()=>{g(!0),r(p.submitted())},onFail:()=>{r(p.caughtError()),g(!1)},isOwner:!!m})})},ne=Y(_(U));export{ne as default};
//# sourceMappingURL=EnableSharingDialog-e42e52d0.js.map
