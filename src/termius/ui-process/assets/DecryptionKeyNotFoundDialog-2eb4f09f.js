import{bl as u,vo as W,bn as t,bs as M,r as e,bg as G,bW as $,bh as A,cy as P,e$ as q,ee as S,wP as j,wQ as K,ez as Y,aD as z,vH as V,wR as f,ce as T,wS as Q,br as N,i4 as X,bi as Z,eh as J,ga as ee,wT as te,wU as re,wV as ae,wW as B,bQ as L,dn as I,wX as oe}from"./reconnectSaga-e33541d6.js";import{F as ne}from"./FullScreenDialogLayout-35fddac2.js";import{A as R}from"./AnimationHandler-f780c16f.js";import{r as D}from"./AlertDialog-7dd4d593.js";import{r as ie}from"./InputDialog-d2455e55.js";import{t as le}from"./transitionScreenWrapper-09a0d50d.js";import{u as se}from"./mailto-866ebc24.js";import{F as ce}from"./PasswordInput-8f4485dc.js";import{r as de}from"./OTPTokenDialog-9e2d091d.js";import"./device-cbcdfeff.js";import"./PasswordInput-42a10483.js";import"./OTPToken-edbf83c6.js";const O=o=>{const{className:r,children:s,title:c}=o;return u(W,{className:r,padding:25,dark:!0,children:[t(M,{gutterBottom:!0,variant:"h2",color:"error",children:c}),t(M,{color:"primary",variant:"body2",children:s})]})};O.defaultProps={className:""};const me=(o,r)=>e.createElement("svg",{width:392,height:306,viewBox:"0 0 392 306",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,...o},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.4068 86.3729C87.1851 86.3729 96.8736 90.8979 103.562 98.0957C111.732 90.8141 122.606 86.3729 134.542 86.3729C159.923 86.3729 180.497 106.452 180.497 131.22C180.497 132.416 180.449 133.601 180.355 134.773C196.128 141.877 207.073 157.448 207.073 175.514C207.073 200.283 186.499 220.362 161.119 220.362C147.21 220.362 134.744 214.331 126.317 204.804C118.276 215.295 103.644 220.362 86.9266 220.362C65.5713 220.362 47.6182 212.093 42.4612 194.813C41.6027 194.866 40.7368 194.893 39.8644 194.893C17.8479 194.893 0 177.788 0 156.689C0 135.59 17.8479 118.486 39.8644 118.486L40.0228 118.486C41.7498 100.474 57.3801 86.3729 76.4068 86.3729Z",fill:"url(#paint0_linear)"}),e.createElement("g",{filter:"url(#filter0_f)"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M172.746 189.356H287.301V200.438H172.746V189.356Z",fill:"#1B3554"})),e.createElement("path",{opacity:.341882,fillRule:"evenodd",clipRule:"evenodd",d:"M225.345 304.52C305.154 304.52 369.853 239.821 369.853 160.011C369.853 80.2015 305.154 15.5028 225.345 15.5028C145.535 15.5028 80.8362 80.2015 80.8362 160.011C80.8362 239.821 145.535 304.52 225.345 304.52Z",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"1 12"}),e.createElement("g",{filter:"url(#filter1_d)"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M152.814 111.305C152.814 108.544 155.052 106.305 157.814 106.305H293.983C296.744 106.305 298.983 108.544 298.983 111.305V207.61C298.983 210.372 296.744 212.61 293.983 212.61H157.814C155.052 212.61 152.814 210.372 152.814 207.61V111.305Z",fill:"white"})),e.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:152,y:106,width:147,height:107},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M152.814 111.305C152.814 108.544 155.052 106.305 157.814 106.305H293.983C296.744 106.305 298.983 108.544 298.983 111.305V207.61C298.983 210.372 296.744 212.61 293.983 212.61H157.814C155.052 212.61 152.814 210.372 152.814 207.61V111.305Z",fill:"white"})),e.createElement("g",{mask:"url(#mask0)"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M160.928 119.005C160.928 118.452 161.376 118.005 161.928 118.005H290.132C290.684 118.005 291.132 118.452 291.132 119.005V199.457C291.132 200.009 290.684 200.457 290.132 200.457H161.928C161.376 200.457 160.928 200.009 160.928 199.457V119.005Z",fill:"#141729"})),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M370.139 148.817C381.916 148.817 391.464 139.3 391.464 127.561C391.464 115.822 381.916 106.305 370.139 106.305C358.361 106.305 348.814 115.822 348.814 127.561C348.814 139.3 358.361 148.817 370.139 148.817Z",fill:"#F25E61"}),e.createElement("path",{d:"M372.698 118.58L371.823 130.755H369.023L368.148 118.58H372.698ZM368.248 134.405C368.248 133.805 368.456 133.297 368.873 132.88C369.289 132.447 369.798 132.23 370.398 132.23C370.998 132.23 371.506 132.447 371.923 132.88C372.356 133.297 372.573 133.805 372.573 134.405C372.573 134.988 372.356 135.497 371.923 135.93C371.506 136.347 370.998 136.555 370.398 136.555C369.798 136.555 369.289 136.347 368.873 135.93C368.456 135.497 368.248 134.988 368.248 134.405Z",fill:"white"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M295.661 305.627C305.446 305.627 313.379 297.943 313.379 288.463C313.379 278.984 305.446 271.299 295.661 271.299C285.876 271.299 277.943 278.984 277.943 288.463C277.943 297.943 285.876 305.627 295.661 305.627Z",fill:"#F25E61"}),e.createElement("path",{d:"M297.494 281.119L296.794 290.859H294.554L293.854 281.119H297.494ZM293.934 293.779C293.934 293.299 294.1 292.893 294.434 292.559C294.767 292.213 295.174 292.039 295.654 292.039C296.134 292.039 296.54 292.213 296.874 292.559C297.22 292.893 297.394 293.299 297.394 293.779C297.394 294.246 297.22 294.653 296.874 294.999C296.54 295.333 296.134 295.499 295.654 295.499C295.174 295.499 294.767 295.333 294.434 294.999C294.1 294.653 293.934 294.246 293.934 293.779Z",fill:"white"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M183.531 52.4055C198.05 52.4055 209.82 40.6741 209.82 26.2028C209.82 11.7314 198.05 0 183.531 0C169.013 0 157.243 11.7314 157.243 26.2028C157.243 40.6741 169.013 52.4055 183.531 52.4055Z",fill:"#F25E61"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.4485 246.09C110.246 246.09 122.242 234.133 122.242 219.384C122.242 204.635 110.246 192.678 95.4485 192.678C80.6511 192.678 68.6554 204.635 68.6554 219.384C68.6554 234.133 80.6511 246.09 95.4485 246.09Z",fill:"#F25E61"}),e.createElement("path",{d:"M97.9807 209.408L96.9307 224.018H93.5707L92.5207 209.408H97.9807ZM92.6407 228.398C92.6407 227.678 92.8907 227.068 93.3907 226.568C93.8907 226.048 94.5007 225.788 95.2207 225.788C95.9407 225.788 96.5507 226.048 97.0507 226.568C97.5707 227.068 97.8307 227.678 97.8307 228.398C97.8307 229.098 97.5707 229.708 97.0507 230.228C96.5507 230.728 95.9407 230.978 95.2207 230.978C94.5007 230.978 93.8907 230.728 93.3907 230.228C92.8907 229.708 92.6407 229.098 92.6407 228.398Z",fill:"white"}),e.createElement("path",{d:"M173.396 135.701V134.539H168.692V131.333H173.242V130.171H168.692V127.091H173.396V125.929H167.334V135.701H173.396ZM175.56 135.701H181.622V134.623H178.892V131.683C178.892 130.619 179.592 129.751 180.936 129.751H182.336V128.477H181.384C179.886 128.477 179.242 129.373 178.976 130.339H178.892V128.477H175.56V129.555H177.59V134.623H175.56V135.701ZM183.955 135.701H190.017V134.623H187.287V131.683C187.287 130.619 187.987 129.751 189.331 129.751H190.731V128.477H189.779C188.281 128.477 187.637 129.373 187.371 130.339H187.287V128.477H183.955V129.555H185.985V134.623H183.955V135.701ZM195.485 135.869C197.557 135.869 198.831 134.399 198.831 132.089C198.831 129.779 197.557 128.309 195.485 128.309C193.413 128.309 192.139 129.779 192.139 132.089C192.139 134.399 193.413 135.869 195.485 135.869ZM195.485 134.791C194.295 134.791 193.525 134.077 193.525 132.621V131.557C193.525 130.101 194.295 129.387 195.485 129.387C196.675 129.387 197.445 130.101 197.445 131.557V132.621C197.445 134.077 196.675 134.791 195.485 134.791ZM200.744 135.701H206.806V134.623H204.076V131.683C204.076 130.619 204.776 129.751 206.12 129.751H207.52V128.477H206.568C205.07 128.477 204.426 129.373 204.16 130.339H204.076V128.477H200.744V129.555H202.774V134.623H200.744V135.701Z",fill:"#F25E61"}),e.createElement("path",{d:"M186.015 15.73L184.965 30.34H181.605L180.555 15.73H186.015ZM180.675 34.72C180.675 34 180.925 33.39 181.425 32.89C181.925 32.37 182.535 32.11 183.255 32.11C183.975 32.11 184.585 32.37 185.085 32.89C185.605 33.39 185.865 34 185.865 34.72C185.865 35.42 185.605 36.03 185.085 36.55C184.585 37.05 183.975 37.3 183.255 37.3C182.535 37.3 181.925 37.05 181.425 36.55C180.925 36.03 180.675 35.42 180.675 34.72Z",fill:"white"}),e.createElement("rect",{opacity:.8,x:214.825,y:122.915,width:6.64407,height:14.3955,rx:2,fill:"#F25E61"}),e.createElement("defs",null,e.createElement("filter",{id:"filter0_f",x:143.573,y:160.183,width:172.9,height:69.4271,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},e.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e.createElement("feGaussianBlur",{stdDeviation:14.5862,result:"effect1_foregroundBlur"})),e.createElement("filter",{id:"filter1_d",x:142.814,y:92.3051,width:166.169,height:126.305,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},e.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e.createElement("feOffset",{dy:-4}),e.createElement("feGaussianBlur",{stdDeviation:5}),e.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.191214 0 0 0 0 0.288182 0 0 0 0 0.613202 0 0 0 0.154552 0"}),e.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),e.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),e.createElement("linearGradient",{id:"paint0_linear",x1:61.2246,y1:134.171,x2:61.2246,y2:188.928,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#5A5E73"}),e.createElement("stop",{offset:1,stopColor:"#5A5E73",stopOpacity:.13})))),ue=e.forwardRef(me),pe=e.memo(ue),he=o=>{const{className:r,children:s,title:c,actions:p,animationProps:a}=o,{classes:n}=fe();return t(R,{animationProps:a,isContainer:!0,children:t("div",{className:$({[n.root]:!0,"termius-dark-theme":!0}),children:t(ne,{className:r,top:t(R,{order:1,animationProps:a,children:t(M,{color:"primary",align:"center",variant:"h2",children:"Something went wrong"})}),left:t(R,{order:2,animationProps:a,children:t("div",{className:n.imageContainer,children:t(pe,{})})}),right:t(R,{order:2,animationProps:a,children:u("div",{className:n.cardContainer,children:[t(O,{className:n.card,title:c,children:s}),p&&t("div",{className:n.actions,children:p})]})})})})})},Ce={root:{height:"100%",width:"100%",padding:"40px",paddingBottom:"0",backgroundColor:"var(--dark-grey-1)","& ul li":{listStyle:"inside"}},imageContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center","@media only screen and (max-width: 900px)":{display:"none"}},cardContainer:{marginBottom:"21px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},card:{width:"440px",maxWidth:"100%"},actions:{position:"absolute",top:"100%",marginTop:"20px",width:"100%"}},fe=G()(Ce),U=o=>{var b,h;const{email:r,onResolutionStarted:s,onSubmit:c}=o,p=A(),a=P(),n=q({mode:"onChange"}),{register:x,handleSubmit:y,formState:g,setError:i}=n,E=e.useCallback(async(l,m)=>{if(r)try{await S(a,j,{username:r,password:l,authyToken:m,authMethod:"Email"})}catch(C){if(m)throw C;if(C.status===487&&!m)p(K()),await de({submitCallback:w=>E(l,w)});else{const w=C.message;throw i("password",{type:"notMatch",message:w}),w}if(C.status===490)throw Y(a,{dialog:"BlockAccess",target:"all-windows",props:{}}).catch(z),C}},[a,r,i,p]),k=e.useCallback(async l=>{await s(),await E(l.password),c()},[E,s,c]),{isValid:H,isSubmitting:d}=g;return u("form",{onSubmit:y(k),children:[t(ce,{fullWidth:!0,label:V(f),error:!!g.errors.password,autoFocus:!0,InputProps:x("password",{required:!0})}),!!((h=(b=g.errors)==null?void 0:b.password)!=null&&h.message)&&t(T,{bottom:20,children:t(Q,{onLeft:!0,children:g.errors.password.message})}),t(N,{fullWidth:!0,disabled:!H||d,progress:d,type:"submit",color:"error",children:"Delete local data and re-sync"})]})};U.defaultProps={email:""};const ye=o=>{const{mounted:r,opacity:s,translate:c,opacityContainer:p,onTransitionEndContainer:a,contentRef:n,containerRef:x,closeDialog:y,isAnimationInProgress:g}=o,i=A(),E={mounted:r,opacity:s,translate:c,opacityContainer:p,onTransitionEndContainer:a,contentRef:n,containerRef:x,isAnimationInProgress:g},k=Z(J),H=Z(ee),d=P(),b=se(),h=e.useCallback(()=>S(d,te),[d]),l=e.useCallback(()=>{i(re({criticalErrorType:"DecryptionKeyNotFoundError"}))},[i]),m=e.useCallback(()=>S(d,ae),[d]),C=e.useCallback(async()=>{l(),await h(),await m()},[l,h,m]),w=e.useCallback(async()=>{l(),await h(),await m(),i(B(!1)),y()},[h,l,m,y,i]),_=e.useCallback(async()=>{i(B(!0)),y()},[y,i]),F=async()=>{try{const v=await ie({title:`Reset ${f}`,value:H,titleButton:"Reset",dark:!0,text:"email"});await S(d,oe,v),await D({title:"Success",text:"Your reset link has been sent to your email",dark:!0})}catch(v){if(v.status===400)try{await D({type:"error",title:`${V(f)} reset failed`,text:"Account with specified email is not registered",dark:!0}),await F()}catch{}else v.status&&await D({type:"error",title:`${V(f)} reset failed`,text:`${V(f)} reset failed with status ${v.status}`,dark:!0})}};return u(he,{animationProps:E,title:u(L.Fragment,{children:["Oops ",t("span",{role:"img",children:"ü§∑‚Äç‚ôÄÔ∏è"})]}),actions:u(I,{onClick:F,children:["Forgot ",f,"?"]}),children:[k?`Looks like termius decryption key is missing from system keychain.
        Local copy of user data can not be decrypted.`:"Termius decryption key can not be found in the system keychain. User data can not be decrypted.",t("br",{}),t("br",{}),"To prevent this from happening again:",t("br",{}),t("br",{}),u("ul",{children:[t("li",{children:"Do not remove Termius keys from the system keychain"}),t("li",{children:"If you haven't removed the key, check your system for viruses and other malicious software"}),t("li",{children:"Make sure no one else has access to the system keychain"}),t("li",{children:"If you have changed the default keychain recently, you may try transferring Termius key from the old keychain to the new one."})]}),"Contact us if you have any questions"," ",t(I,{underline:!0,onClick:b,children:"support.termius.com"}),k&&u(L.Fragment,{children:[t("br",{}),t("br",{}),"Please re-enter your Termius ",f," to re-sync your data from our servers:",t(U,{onSubmit:_,onResolutionStarted:C,email:H})]}),!k&&t(T,{top:30,children:t(N,{onClick:w,fullWidth:!0,color:"error",children:"Delete local data and start over"})})]})},ge=le(ye),Ze=X(ge);export{Ze as default};
//# sourceMappingURL=DecryptionKeyNotFoundDialog-2eb4f09f.js.map
