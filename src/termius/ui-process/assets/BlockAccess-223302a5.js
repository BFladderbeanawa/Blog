var M=Object.defineProperty;var U=(o,r,n)=>r in o?M(o,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[r]=n;var f=(o,r,n)=>(U(o,typeof r!="symbol"?r+"":r,n),n);import{gE as D,r as e,bg as g,cf as u,bn as t,bQ as E,bl as c,cy as O,ee as P,gq as W,ce as h,br as C,v2 as L,bW as x,cg as A,cc as N,i4 as Z,vy as _,vz as T,vA as F,ie as G,bf as I,ad as H}from"./reconnectSaga-e33541d6.js";import{t as V}from"./transitionScreenWrapper-09a0d50d.js";import{w as b}from"./watchAction-bfeb4c26.js";const $=D("DOWNLOAD_PROGRESS"),z=D("UPDATE_DOWNLOADED"),Y=(o,r)=>e.createElement("svg",{width:372,height:294,viewBox:"0 0 372 294",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,...o},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M276.987 0C284.824 0 291.869 3.29033 296.733 8.52417C302.674 3.22942 310.58 0 319.26 0C337.715 0 352.675 14.6002 352.675 32.6104C352.675 33.4798 352.64 34.3413 352.572 35.1936C364.041 40.3596 372 51.6818 372 64.8182C372 82.8284 357.039 97.4286 338.584 97.4286C328.471 97.4286 319.407 93.0439 313.279 86.1161C307.432 93.7441 296.792 97.4286 284.636 97.4286C269.108 97.4286 256.054 91.4161 252.304 78.8511C251.68 78.8896 251.05 78.9091 250.416 78.9091C234.407 78.9091 221.429 66.4719 221.429 51.1299C221.429 35.7878 234.407 23.3506 250.416 23.3506L250.531 23.3509C251.787 10.2532 263.152 0 276.987 0Z",fill:"url(#paint0_linear)"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.8337 83.7403C54.5814 83.7403 60.6468 86.5731 64.8341 91.0793C69.9489 86.5207 76.7562 83.7403 84.229 83.7403C100.118 83.7403 112.999 96.3105 112.999 111.817C112.999 112.565 112.969 113.307 112.91 114.041C122.784 118.488 129.636 128.236 129.636 139.546C129.636 155.052 116.756 167.623 100.867 167.623C92.1594 167.623 84.3555 163.848 79.0798 157.883C74.0457 164.45 64.8852 167.623 54.4195 167.623C41.0503 167.623 29.8109 162.446 26.5824 151.628C26.045 151.661 25.5029 151.678 24.9567 151.678C11.1735 151.678 0 140.97 0 127.761C0 114.552 11.1735 103.844 24.9567 103.844L25.0559 103.844C26.1371 92.5679 35.9223 83.7403 47.8337 83.7403Z",fill:"url(#paint1_linear)"}),e.createElement("path",{d:"M94 205C94 207.761 96.2386 210 99 210H273C275.761 210 278 207.761 278 205V196H94V205Z",fill:"#5A5E73"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M159.464 145.504C157.512 147.457 157.512 150.623 159.464 152.575L185.627 178.738L185.667 178.698L185.707 178.738L211.87 152.575C213.823 150.623 213.823 147.457 211.87 145.504L211.163 144.797C209.21 142.845 206.045 142.845 204.092 144.797L185.667 163.222L167.243 144.797C165.29 142.845 162.124 142.845 160.172 144.797L159.464 145.504Z",fill:"#5A5E73"}),e.createElement("g",{filter:"url(#filter0_d)"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M267 144C267 141.239 269.239 139 272 139H273C275.761 139 278 141.239 278 144V196H267V144ZM274.59 169.674C274.59 170.969 273.562 172.018 272.295 172.018C271.027 172.018 270 170.969 270 169.674C270 168.38 271.027 167.33 272.295 167.33C273.562 167.33 274.59 168.38 274.59 169.674ZM272.476 147.818C273.743 147.818 274.771 146.768 274.771 145.474C274.771 144.179 273.743 143.13 272.476 143.13C271.209 143.13 270.181 144.179 270.181 145.474C270.181 146.768 271.209 147.818 272.476 147.818ZM274.59 181.395C274.59 182.689 273.562 183.739 272.295 183.739C271.027 183.739 270 182.689 270 181.395C270 180.1 271.027 179.051 272.295 179.051C273.562 179.051 274.59 180.1 274.59 181.395ZM272.295 160.298C273.562 160.298 274.59 159.249 274.59 157.954C274.59 156.66 273.562 155.61 272.295 155.61C271.027 155.61 270 156.66 270 157.954C270 159.249 271.027 160.298 272.295 160.298ZM274.59 193.115C274.59 194.409 273.562 195.459 272.295 195.459C271.027 195.459 270 194.409 270 193.115C270 191.82 271.027 190.771 272.295 190.771C273.562 190.771 274.59 191.82 274.59 193.115Z",fill:"#5A5E73"})),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M181 84H192V164H181V84Z",fill:"#5A5E73"}),e.createElement("g",{filter:"url(#filter1_d)"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94 144C94 141.239 96.2386 139 99 139H100C102.761 139 105 141.239 105 144V196H94V144ZM101.59 169.674C101.59 170.969 100.562 172.018 99.2948 172.018C98.0274 172.018 97 170.969 97 169.674C97 168.38 98.0274 167.33 99.2948 167.33C100.562 167.33 101.59 168.38 101.59 169.674ZM99.476 147.818C100.743 147.818 101.771 146.768 101.771 145.474C101.771 144.179 100.743 143.13 99.476 143.13C98.2086 143.13 97.1812 144.179 97.1812 145.474C97.1812 146.768 98.2086 147.818 99.476 147.818ZM101.59 181.395C101.59 182.689 100.562 183.739 99.2948 183.739C98.0274 183.739 97 182.689 97 181.395C97 180.1 98.0274 179.051 99.2948 179.051C100.562 179.051 101.59 180.1 101.59 181.395ZM99.2948 160.298C100.562 160.298 101.59 159.249 101.59 157.954C101.59 156.66 100.562 155.61 99.2948 155.61C98.0274 155.61 97 156.66 97 157.954C97 159.249 98.0274 160.298 99.2948 160.298ZM101.59 193.115C101.59 194.409 100.562 195.459 99.2948 195.459C98.0274 195.459 97 194.409 97 193.115C97 191.82 98.0274 190.771 99.2948 190.771C100.562 190.771 101.59 191.82 101.59 193.115Z",fill:"#5A5E73"})),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M274.571 196.468C282.409 196.468 289.454 199.758 294.317 204.992C300.258 199.697 308.165 196.468 316.844 196.468C335.299 196.468 350.26 211.068 350.26 229.078C350.26 229.947 350.225 230.809 350.156 231.661C361.625 236.827 369.584 248.149 369.584 261.286C369.584 279.296 354.624 293.896 336.169 293.896C326.055 293.896 316.991 289.511 310.863 282.584C305.016 290.212 294.377 293.896 282.221 293.896C266.692 293.896 253.638 287.884 249.888 275.319C249.264 275.357 248.634 275.377 248 275.377C231.991 275.377 219.013 262.939 219.013 247.597C219.013 232.255 231.991 219.818 248 219.818L248.115 219.818C249.371 206.721 260.736 196.468 274.571 196.468Z",fill:"url(#paint2_linear)"}),e.createElement("defs",null,e.createElement("filter",{id:"filter0_d",x:257,y:125,width:31,height:77,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},e.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e.createElement("feOffset",{dy:-4}),e.createElement("feGaussianBlur",{stdDeviation:5}),e.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.191214 0 0 0 0 0.288182 0 0 0 0 0.613202 0 0 0 0.154552 0"}),e.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),e.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),e.createElement("filter",{id:"filter1_d",x:84,y:125,width:31,height:77,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},e.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e.createElement("feOffset",{dy:-4}),e.createElement("feGaussianBlur",{stdDeviation:5}),e.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.191214 0 0 0 0 0.288182 0 0 0 0 0.613202 0 0 0 0.154552 0"}),e.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),e.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),e.createElement("linearGradient",{id:"paint0_linear",x1:265.947,y1:34.7557,x2:265.947,y2:74.5717,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#282B3D"}),e.createElement("stop",{offset:1,stopColor:"#282B3D",stopOpacity:.158486})),e.createElement("linearGradient",{id:"paint1_linear",x1:38.3291,y1:113.664,x2:38.3291,y2:147.944,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#282B3D"}),e.createElement("stop",{offset:1,stopColor:"#282B3D",stopOpacity:.158486})),e.createElement("linearGradient",{id:"paint2_linear",x1:263.532,y1:231.223,x2:263.532,y2:271.039,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#282B3D"}),e.createElement("stop",{offset:1,stopColor:"#282B3D",stopOpacity:.158486})))),j=e.forwardRef(Y),q=e.memo(j),K=({logout:o,safe:r})=>{const{classes:n}=Q();return o?r?t(E.Fragment,{children:"All of your data is safely backed up and encrypted. You will be able to access it once you update the app."}):c(E.Fragment,{children:["Some of your data",t("span",{className:n.warning,children:" has not been synced "}),"and will be lost if you log out. You will be able to access it once you update the app."]}):null},Q=g()({warning:{color:u.colors.error.light,fontWeight:700}});function J({onSubmit:o,onClose:r,submitText:n,logout:l,onOk:s}){const[p,d]=e.useState(!1),i=O(),{classes:m}=X(),w=e.useCallback(async()=>{d(!0),await P(i,W,{keepSepKeys:!1}),s()},[s,i]);return c("div",{className:m.footer,children:[n&&o&&t(h,{bottom:15,children:t(C,{fullWidth:!0,color:"accent",onClick:o,children:n})}),l?t(C,{fullWidth:!0,onClick:w,disabled:p,progress:p,children:"Log out"}):t(C,{fullWidth:!0,onClick:r,children:"Dismiss"})]})}const X=g()({footer:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"380px",margin:"auto"}}),y=o=>{const{title:r,updateProgressComponent:n,children:l,opacity:s,opacityContainer:p,onTransitionEndContainer:d,onTransitionEndContent:i,contentRef:m,containerRef:w,mounted:R,translate:B,...S}=o,{classes:a}=ee();return c("div",{className:x({"termius-dark-theme":!0,[a.container]:!0,[a.transitionContainer]:!0,[a[p?"opacityOn":"opacityOff"]]:!0}),onTransitionEnd:d,ref:w,children:[c("div",{className:x({[a.contentContainer]:!0,[a.transition]:!0,[a[s?"opacityOn":"opacityOff"]]:!0}),onTransitionEnd:i,ref:m,children:[t("div",{className:a.title,children:r}),t(h,{top:24,bottom:8,children:c("div",{className:a.content,style:{width:o.contentWidth||400},children:["It looks like you are using an outdated app.",t("br",{}),t("br",{}),l,t(K,{...S})]})}),t(q,{className:a.backgroundImage}),n&&c("div",{className:a.progressContainer,children:[t("div",{className:a.progressTitle,children:"Progress:"}),t(h,{top:15,bottom:20,children:n})]})]}),t("div",{className:x({[a.footer]:!0,[a[R?"transition":"transitionElement"]]:!0,[a[s?"opacityOn":"opacityOff"]]:!0,[a[B?"translateYOff":"translateYOn"]]:!0}),onTransitionEnd:i,ref:m,children:t(J,{...S})})]})},ee=g()({container:{width:"100%",height:"100%",display:"flex",position:"relative",backgroundColor:u.colors.primary.darker,flexDirection:"column",overflow:"hidden"},contentContainer:{flexGrow:1,padding:"50px 0 0",display:"flex",flexDirection:"column",alignItems:"center"},title:{fontSize:24,fontWeight:700,lineHeight:"30px",width:"100%",color:u.colors.white.a100,textAlign:"center"},content:{color:u.colors.white.a54,fontSize:14,lineHeight:"18px",textAlign:"center"},footer:{padding:"30px 0",width:"100%",backgroundColor:u.colors.primary.dark,flexShrink:0},backgroundImage:{maxHeight:300},progressContainer:{width:380},progressTitle:{color:u.colors.white.a54,fontSize:14,lineHeight:"18px"},...L}),te=o=>c(y,{...o,children:["Please manually update the app or contact support@termius.com if you don't know how to do that.",t("br",{}),t("br",{})]}),oe=({commands:o,onCopyCommand:r})=>{const{classes:n}=ne();return c("div",{className:n==null?void 0:n.container,children:[t("div",{className:n==null?void 0:n.commands,children:o.map(l=>t("div",{children:l},l))}),t(C,{className:n==null?void 0:n.copy,size:"small",onClick:()=>r(o),children:"COPY"})]})},ne=g()({container:{backgroundColor:"var(--dark-grey-2)",width:"100%",display:"flex",alignItems:"center",textAlign:"left",padding:"9px",borderRadius:"6px"},commands:{margin:"0 11px",flexGrow:1,fontFamily:"monospace",whiteSpace:"nowrap",color:"var(--light-grey-2)"},copy:{color:"var(--white)"}}),v=o=>c(y,{...o,children:["Please close the app and update it using following command:",t(h,{top:24,bottom:24,children:t(oe,{commands:o.updateCommands,onCopyCommand:o.onCopyCommand})})]}),k=o=>c(y,{...o,children:["Please update it via ",o.storeName,".",t("br",{}),t("br",{})]});class re extends E.Component{constructor(){super(...arguments);f(this,"state",{percent:0});f(this,"listeners",[]);f(this,"_handleProgressEvents",n=>{this.setState({percent:n.percent})})}componentDidMount(){this.listeners=[this.props.onDownloadProgress(this._handleProgressEvents)]}componentWillUnmount(){for(const n of this.listeners)n()}render(){const n=A.getClasses(this.props);return t(N,{classes:{barColorPrimary:n.barColorPrimary},color:"primary",variant:"determinate",value:this.state.percent})}}const ae=A(re,{barColorPrimary:{backgroundColor:u.colors.success.medium}},{name:"UpdateProgress"}),ie=o=>c(y,{...o,children:["Please wait for the update to complete or manually download fresh version from the website.",t("br",{}),t("br",{})]});function le({installSource:o,openAppStore:r,openWindowsStore:n,openWebsite:l,onDownloadProgress:s,onCopyCommand:p,linuxExecutable:d,...i}){switch(o){case"App Store":return t(k,{...i,title:"Update the app",storeName:"App Store",onSubmit:r,submitText:"Open app store"});case"Windows Store":return t(k,{...i,title:"Update the app",storeName:"Windows Store",onSubmit:n,submitText:"Open windows store"});case"Website":return t(ie,{...i,title:"Installing update",onSubmit:l,submitText:"Download from website",updateProgressComponent:t(ae,{onDownloadProgress:s})});case"Debian Package":return t(v,{...i,title:"Update the app",updateCommands:["sudo apt-get update",`sudo apt-get install ${d}`],onCopyCommand:p});case"Snapcraft":return t(v,{...i,title:"Update the app",updateCommands:[`sudo snap refresh ${d}`],onCopyCommand:p});case"Custom Linux Distribution":default:return t(te,{...i,title:"Update the app"})}}const se=()=>{H.send("update-restart")},ce=({logout:o=!1,hasUnsyncedEntities:r=!1,...n})=>{const l=O();return t(le,{...n,installSource:_,openAppStore:T,openWindowsStore:F,openWebsite:G,onDownloadProgress:s=>{const p=[b(l,$,({payload:d})=>s(d)),b(l,z,se)];return()=>{for(const d of p)d()}},onCopyCommand:s=>{I.writeText(s.join(" ; "))},logout:o,safe:!r,linuxExecutable:"termius-app"})},fe=Z(V(ce));export{fe as default};
//# sourceMappingURL=BlockAccess-223302a5.js.map
