import{bg as b,bn as e,bW as T,bl as l,b2 as Ue,bV as J,z8 as te,ln as se,bs as S,cy as le,bh as O,r as i,e$ as xe,z9 as Ze,ee as ce,wX as ve,fM as Ge,jm as B,y5 as be,ca as Ee,eW as de,br as R,za as ke,dn as V,wR as F,ce as H,zb as ft,zc as $e,at as wt,xI as Le,zd as ie,ze as St,zf as yt,vH as ue,xJ as Ie,zg as Te,zh as xt,zi as je,zj as vt,zk as bt,zl as Et,zm as qe,zn as we,zo as Se,zp as me,yk as Ye,yl as Ke,zq as kt,zr as Lt,ez as It,aD as Tt,zs as Ft,bq as ee,dB as Mt,dC as ge,y4 as Rt,zt as _t,fA as K,zu as Pt,fy as Xe,bQ as A,f1 as oe,y1 as ne,bz as Nt,zv as At,zw as Wt,zx as Ne,zy as Vt,y3 as zt,bi as Bt,zz as Dt,zA as Ht,zB as Ae,zC as ye,dl as Ot,xd as W,zD as Je,mD as Qe,zE as et,yj as Ut,zF as Zt,c0 as re,zG as Ce,b_ as Gt,zH as $t,zI as jt,zJ as qt,zK as Q}from"./reconnectSaga-e33541d6.js";import{O as Yt}from"./OTPToken-edbf83c6.js";import{r as Fe}from"./InputDialog-d2455e55.js";import{r as Y}from"./AlertDialog-7dd4d593.js";import{B as Kt}from"./Button-6ec360d1.js";import{P as Xt}from"./PasswordInput-42a10483.js";import{G as he,O as Jt}from"./OtpLogin-b63eb22b.js";function We({className:o,children:t,onClick:n}){const{classes:a}=Qt();return e("span",{className:T(o,a.link),onClick:n,children:t})}const Qt=b()({link:{"&:hover":{color:"var(--accent)"}}});function eo({className:o,useLineBreak:t=!0}){const{classes:n}=no();return l("div",{className:T(o,n.reCaptchaPolicy),children:["This site is protected by reCAPTCHA and the Google"," ",t&&e("br",{}),e(We,{onClick:oo,children:"Privacy Policy"})," and"," ",e(We,{onClick:to,children:"Terms of Service"})," apply."]})}const to=()=>Ue({title:"Terms of Service",url:"https://policies.google.com/terms"}),oo=()=>Ue({title:"Privacy Policy",url:"https://policies.google.com/privacy"}),no=b()({reCaptchaPolicy:{color:"var(--secondary)",fontSize:"7px",lineHeight:"9px",textAlign:"center"}});function pe(o){const{classes:t,cx:n}=io();return l("div",{className:n(t.root,{[t.proFeaturesSignup]:o.authorizationType==="signup-only",[t.reLoginRoot]:o.authorizationType==="re-login"}),children:[e("div",{className:n(t.authorizationFormContainer,{[t.proFeaturesContainer]:o.authorizationType==="signup-only",[t.loginOtpContainer]:o.authorizationType==="login-otp-token",[t.widerAuthorizationFormContainer]:o.authorizationType!=="signup"&&o.authorizationType!=="login",[t.reLoginContainer]:o.authorizationType==="re-login",[t.inheritBackground]:o.defaultAuthorizationType==="re-login"}),children:o.children}),o.showRecaptchaPolicy&&e(J,{mt:"10px",children:e(eo,{})})]})}const io=b()((o,t)=>({root:{"--container-background":"var(--card-b)","--form-background":"var(--card-c)",".termius-dark-theme &":{"--form-background":"var(--card-a)"},display:"flex",flexDirection:"column",alignItems:"center",height:"100%",overflow:"hidden",minWidth:"320px"},proFeaturesSignup:{borderLeft:"1px solid var(--card-b)"},reLoginRoot:{width:"100%",height:"100%",overflow:"hidden auto",display:"flex",flexDirection:"column","&::-webkit-scrollbar":{width:"0"}},authorizationFormContainer:{backgroundColor:"var(--container-background)",borderRadius:"10px",overflow:"hidden",width:"320px"},widerAuthorizationFormContainer:{width:"100%",maxWidth:"440px"},loginOtpContainer:{background:"var(--foreground)"},inheritBackground:{backgroundColor:"inherit"},proFeaturesContainer:{borderRadius:"inherit",height:"100%"},reLoginContainer:{width:"auto",padding:10}}));function ao(o){const{defaultAuthorizationType:t}=o,{state:n,actions:a}=te(),{classes:s}=ro();return l(pe,{authorizationType:"login-otp-token",defaultAuthorizationType:t,showRecaptchaPolicy:n.showRecaptchaPolicy,children:[t==="re-login"&&e(se,{className:s.backButton,onClick:a.onBack}),l("div",{className:s.otpTokenFormContainer,children:[e(J,{mb:"20px",children:e(S,{variant:"h2",color:"primary",align:"center",children:"Enter verification code"})}),e(Yt,{submitCallback:a.submitOTPToken})]})]})}const ro=b()((o,t)=>({otpTokenFormContainer:{padding:20,backgroundColor:"var(--form-background)"},backButton:{position:"absolute",marginTop:-70,marginLeft:-20}}));function tt(o){const{initialEmail:t,initialPassword:n,resetSsoListener:a,loginCallback:s,isRememberPassword:r,setIsRememberPassword:d,onSignInWithEnterpriseSso:h,onLogout:u}=o,{classes:m}=so(),g=le(),C=O(),[f,y]=i.useState(),[c,p]=i.useState(!!t),{register:w,handleSubmit:x,formState:v,watch:_}=xe({defaultValues:{email:t,password:n}}),k=_("password"),L=i.useCallback(async M=>{const{email:P,password:$}=M;try{await s({username:P,password:$,rememberPassword:r})}catch(j){y({status:j.status,message:j.message}),C(Ze({errorMessage:j.message,onScreen:"Log In"}))}},[C,r,s]),E=i.useCallback(async M=>{if(!c){p(!0);return}a(),await L(M)},[L,a,c]),N=i.useCallback(async()=>{try{h(t)}catch(M){y(M)}},[t,h]),z=i.useCallback(M=>d(M.target.checked),[d]),I=i.useCallback(async()=>{try{const M=await Fe({title:"Reset password",value:t,titleButton:"Reset",dark:!0,text:"Email"});await ce(g,ve,M),await Y({title:"Success",text:"Your reset link has been sent to your email",dark:!0})}catch(M){if(M.status===400)try{await Y({type:"error",title:"Password reset failed",text:"Account with specified email is not registered",dark:!0}),await I()}catch{}else M.status&&await Y({type:"error",title:"Password reset failed",text:`Password reset failed with status ${M.status}`,dark:!0})}},[t,g]),D=i.useCallback(()=>{y(void 0),p(!1)},[]),U=i.useCallback(()=>{p(!0)},[]),G=!(t&&k)||v.isSubmitting;return l(i.Fragment,{children:[c&&e(se,{className:m.backButton,onClick:D}),l("form",{className:m.form,onSubmit:x(E),children:[e(S,{variant:"h2",color:"primary",children:"Log In"}),e(S,{variant:"body1",color:"primary",children:"Your session has expired. Please log in to continue using Termius."}),e(Ge,{label:"Email",InputProps:w("email"),error:!!v.errors.email,fullWidth:!0,disableWrapper:!0,outlined:!0,disabled:!0}),e(B,{className:T({[m.withoutMargin]:!c}),in:c,children:e(be,{label:"Password",InputProps:w("password",{required:!0}),error:!!v.errors.password,autoFocus:!0,fullWidth:!0,disableWrapper:!0,outlined:!0})}),e(B,{className:T({[m.withoutMargin]:!c}),in:c,children:e(Ee,{fullWidth:!0,checked:r,onChange:z,label:e(S,{color:"inherit",children:"Remember me"})})}),f&&e(de,{message:f.message,status:f.status}),e(B,{className:T({[m.withoutMargin]:c}),in:!c,children:e(R,{progress:v.isSubmitting,disabled:v.isSubmitting,type:"button",size:"medium",fullWidth:!0,color:"accent",onClick:U,children:"Continue with email"})}),e(B,{className:T({[m.withoutMargin]:!c}),in:c,children:e(R,{progress:v.isSubmitting,disabled:G,type:"submit",size:"medium",fullWidth:!0,color:"accent",children:"Continue"})}),e(B,{className:T({[m.withoutMargin]:c}),in:!c,children:e(ke,{onClick:N})}),e(B,{className:T({[m.withoutMargin]:!c}),in:c,children:e(V,{disabled:v.isSubmitting,onClick:I,className:m.forgotPassword,children:"Forgot password?"})}),e(R,{type:"button",size:"medium",fullWidth:!0,color:"regular",onClick:u,children:"Log out"})]})]})}const so=b()((o,t,n)=>({withoutMargin:{},form:{color:"var(--dark-grey-3)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column","&& > * + *":{marginTop:20,[`&.${n.withoutMargin}`]:{marginTop:"auto"}}},forgotPassword:{alignSelf:"center",color:"var(--accent)",height:"14px",marginBottom:2,width:"100%"},backButton:{position:"absolute",marginTop:-70,marginLeft:-30}}));tt.defaultProps={initialEmail:"",initialPassword:""};function lo(o){const{initialEmail:t,defaultAuthorizationType:n}=o,{state:a,actions:s}=te();return e(pe,{authorizationType:"re-login",defaultAuthorizationType:n,showRecaptchaPolicy:a.showRecaptchaPolicy,children:e(tt,{initialEmail:t,initialPassword:a.initialPassword,resetSsoListener:s.resetSsoListener,loginCallback:s.handleSignIn,isRememberPassword:a.isRememberPassword,setIsRememberPassword:s.setIsRememberPassword,onSignInWithEnterpriseSso:s.signInWithEnterpriseSso,onLogout:s.handleSignOut})})}const co=(o,t)=>i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 11H5V20C5 21.1046 5.89545 22 7 22H17C18.1046 22 19 21.1046 19 20V11ZM13.4285 15.4286C13.4285 15.9573 13.1413 16.419 12.7143 16.666V18.2857C12.7143 18.6802 12.3945 19 12 19C11.6055 19 11.2857 18.6802 11.2857 18.2857V16.666C10.8587 16.419 10.5714 15.9573 10.5714 15.4286C10.5714 14.6396 11.211 14 12 14C12.7889 14 13.4285 14.6396 13.4285 15.4286Z",fill:"currentColor"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V9H15V7C15 5.34315 13.6569 4 12 4C10.3431 4 9 5.34315 9 7V9H7V7Z",fill:"currentColor"})),uo=i.forwardRef(co),mo=i.memo(uo),ot=({textSizeVariant:o,isFixedSize:t=!0,componentStylesType:n="medium"})=>{const{classes:a,cx:s}=po(),r=o??ho(n);return l("div",{className:s(a.passwordDescription,{[a.fixedSize]:t,[a.small]:n==="small"}),children:[e(S,{variant:"body2",lineHeight:"normal",className:a.passwordDescriptionIcon,bold:!0,children:"XSalsa20"}),e(mo,{style:{flex:"1 0 22px",marginTop:4}}),l(S,{variant:r,color:"secondary",children:["Resetting the ",F," erases all your vaults. Save it in a safe place."]})]})};function ho(o){switch(o){case"small":return"body2";case"medium":return"body1";default:return"body1"}}const po=b()({passwordDescription:{position:"relative",margin:"0 auto",display:"flex",justifyContent:"space-between",gap:"10px",borderRadius:10,border:"1px solid var(--light-grey-4)",background:"var(--light-grey-6)",".termius-dark-theme &":{background:"var(--card-b)",borderColor:"var(--card-c)"},width:"100%",height:"initial",padding:15},fixedSize:{width:"350px",height:"72px"},small:{padding:10},passwordDescriptionIcon:{position:"absolute",color:"var(--white)",top:"-10px",left:"50%",transform:"translateX(-50%)",height:"19px",padding:"2px 10px",borderRadius:"6px",background:"var(--dark-grey-1)",".termius-dark-theme &":{background:"var(--dark-grey-6)"}}});function go({onOpenLoginForm:o}){const{classes:t}=Co();return l(S,{className:t.root,fontSize:12,color:"error",children:["An account with this email already exists. Want to"," ",e(V,{className:t.loginButton,onClick:o,children:"Log in"})," ","instead?"]})}const Co=b()({root:{marginTop:"15px !important"},loginButton:{display:"inline",fontWeight:700,fontSize:"inherit",color:"var(--accent)",".termius-dark-theme &":{color:"white"}}});function fe({formError:o,condition:t=!0}){return e(B,{in:o!=null&&t,children:e(H,{top:20,children:e(de,{message:(o==null?void 0:o.message)??"",status:fo(o)})})})}function fo(o){return ft(o)?o.status:void 0}function Ve(){const{classes:o}=wo();return l("div",{className:o.orSeparator,children:[e("div",{className:o.line}),e(S,{variant:"body1",color:"main",children:"or"}),e("div",{className:o.line})]})}const wo=b()({orSeparator:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) max-content minmax(0, 1fr)",alignItems:"center",gap:10},line:{height:1,background:"var(--light-grey-5)",".termius-dark-theme &":{background:"var(--dark-grey-6)"}}});function So({first:o,second:t,flag:n}){const{classes:a}=yo();return l("div",{className:a.root,children:[e("div",{className:T(a.fadeContainer,{[a.fadeAnimation]:n}),children:o}),e("div",{className:T(a.fadeContainer,{[a.fadeAnimation]:!n}),children:t}),e("div",{className:T(a.collapseContainer,{[a.collapseDownStart]:!n,[a.collapseDownFinish]:n}),children:o}),e("div",{className:T(a.collapseContainer,{[a.collapseUpStart]:n,[a.collapseUpFinish]:!n}),children:t})]})}const yo=b()({root:{margin:"20px -5px -5px 0px",overflow:"hidden",position:"relative",padding:"0 5px 5px 0"},collapseContainer:{maxHeight:0,opacity:0},collapseUpStart:{maxHeight:0,opacity:0,transition:"max-height .3s ease-in-out, opacity .01s"},collapseUpFinish:{maxHeight:500,opacity:1,transition:"max-height .3s ease-in-out, opacity .01s 0.5s"},collapseDownStart:{maxHeight:0,opacity:0,transition:"max-height 0.1s ease-in-out, opacity .01s"},collapseDownFinish:{maxHeight:500,opacity:1,transition:"max-height 0.3s ease-in-out, opacity .01s 0.4s"},fadeContainer:{opacity:0,position:"absolute",inset:0,marginRight:"5px",transition:"opacity 0.3s 0.1s"},fadeAnimation:{opacity:1,transition:"opacity 0.3s"}});function nt(o){const{onSwitchToLoginForm:t,onSignInWithSso:n,onSignedUp:a,onFormUpdated:s,onSignInWithEnterpriseSso:r,loginCallback:d,isReLogin:h,isSignUp:u}=o,{classes:m}=xo(),g=le(),C=i.useRef(null),[f,y]=i.useState(!0),[c,p]=$e({onSignedUp:a,loginCallback:d,onSignInWithEnterpriseSso:r,onSignInWithSso:n}),w=c.context.email,x=c.context.password,v=!wt(w),{isPasswordValidForSignUp:_,...k}=Le(x,{email:w});i.useEffect(()=>{p("CLEAR_ERROR")},[u,p]);const L=i.useCallback(async P=>{var $;if(P.preventDefault(),u){const j=await(($=C.current)==null?void 0:$.getToken());p("CHANGE_CAPTCHA",{data:j}),p("SIGN_UP")}else ie(c)?p({type:"LOG_IN_WITH_EMAIL",data:{rememberPassword:f,reLogIn:h}}):p("LOG_IN")},[p,c,u,f,h]);i.useEffect(()=>{s(w,x)},[w,s,x]);const E=i.useCallback(P=>y(P.target.checked),[]),N=i.useCallback(async()=>{try{const P=await Fe({title:"Reset password",value:w,titleButton:"Reset",dark:!0,text:"Email"});await ce(g,ve,P),await Y({title:"Success",text:"Your reset link has been sent to your email",dark:!0})}catch(P){if(P.status===400)try{await Y({type:"error",title:"Password reset failed",text:"Account with specified email is not registered",dark:!0}),await N()}catch{}else P.status&&await Y({type:"error",title:"Password reset failed",text:`Password reset failed with status ${P.status}`,dark:!0})}},[w,g]),z=i.useCallback(()=>{p("SIGN_IN_WITH_SSO",{data:"apple"})},[p]),I=i.useCallback(()=>{p("SIGN_IN_WITH_SSO",{data:"google"})},[p]),D=i.useCallback(()=>{p("SIGN_IN_WITH_ESSO")},[p]),{error:U}=c.context,G=St(U),M=U!=null&&!G?U:void 0;return e(i.Fragment,{children:l("form",{className:m.form,onSubmit:L,children:[e(Ge,{autoFocus:!0,name:"email",label:"Email",value:w,onChange:P=>{p("CHANGE_EMAIL",{data:P.target.value})},fullWidth:!0,disableWrapper:!0,outlined:!0}),e(B,{in:G&&u,children:e(H,{top:20,children:e(go,{onOpenLoginForm:t})})}),e(fe,{formError:M,condition:!u&&!ie(c)}),l(B,{in:yt(c,u),children:[e(H,{top:20,children:e(be,{name:"password",label:ue(F),value:x,onChange:P=>{p("CHANGE_PASSWORD",{data:P.target.value})},fullWidth:!0,disableWrapper:!0,outlined:!0})}),e(So,{first:l(i.Fragment,{children:[e(Ee,{fullWidth:!0,checked:f,onChange:E,label:e(S,{color:"inherit",children:"Remember me"})}),e(fe,{formError:M})]}),second:l(i.Fragment,{children:[e(Ie,{...k}),e(fe,{formError:M}),e(H,{top:20,children:e(ot,{textSizeVariant:"body2",isFixedSize:!1,componentStylesType:"small"})})]}),flag:!u})]}),l(H,{top:20,children:[u&&e(R,{progress:Te(c),disabled:!xt(c,_),type:"submit",size:"medium",fullWidth:!0,color:"accent",children:"Sign up with email"}),!u&&ie(c)&&e(R,{progress:je(c),disabled:!vt(c),type:"submit",size:"medium",fullWidth:!0,color:"accent",children:"Continue with email"}),!u&&!ie(c)&&e(R,{progress:bt(c),disabled:!Et(c),type:"submit",size:"medium",fullWidth:!0,color:"accent",children:v?"Continue":"Continue with email"})]}),e(B,{in:v&&!u,children:e(H,{top:20,children:e(V,{disabled:qe(c),onClick:N,className:m.forgotPassword,children:"Forgot password?"})})}),u&&l(B,{in:!v,children:[e(H,{top:20,children:e(Ve,{})}),e(H,{top:20,children:l("div",{className:m.loginSsoButtonsLayout,children:[e(we,{prefix:"Sign up with ",onClick:z}),e(Se,{prefix:"Sign up with ",onClick:I})]})})]}),!u&&l(B,{in:!v,children:[e(H,{top:20,children:e(Ve,{})}),e(H,{top:20,children:l("div",{className:m.loginSsoButtonsLayout,children:[e(we,{prefix:"Continue with ",onClick:z}),e(Se,{prefix:"Continue with ",onClick:I}),e(ke,{onClick:D})]})})]}),e(me,{apiRef:C})]})})}const xo=b()({form:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},forgotPassword:{alignSelf:"center",color:"var(--accent)",height:"14px",marginBottom:2,width:"100%"},loginSsoButtonsLayout:{display:"grid",gap:10}});nt.defaultProps={initialEmail:"",initialPassword:""};function ze(o){const{isActive:t,...n}=o,{classes:a}=vo();return e(Kt,{className:T(a.button,{[a.activeButton]:t}),disableRipple:!0,...n})}const vo=b()((o,t,n)=>({button:{"--text-color":"var(--dark-grey-1)","--active-background":"white",".termius-dark-theme &":{"--text-color":"white","--active-background":"var(--dark-grey-3)"},width:"50%",height:"48px",borderRadius:"0",borderTopRightRadius:"10px",borderTopLeftRadius:"10px",color:"var(--text-color)",fontSize:"14px",fontWeight:700,textTransform:"none","&:hover":{background:"inherit"},[`&.${n.activeButton}`]:{background:"var(--active-background)"}},activeButton:{}}));function bo(){const{classes:o}=Eo();return e("div",{className:o.root,children:l(S,{variant:"body2",children:["By signing up, you agree to the Termius ",e("br",{}),e(V,{className:o.learnMore,onClick:Ye,color:"accent",children:"Terms of Service"})," ","and"," ",e(V,{className:o.learnMore,onClick:Ke,color:"accent",children:"Privacy Policy"})]})})}const Eo=b()({root:{display:"flex",justifyContent:"center",textAlign:"center",color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--dark-grey-7)"},flex:1,marginBottom:"20px",alignItems:"end"},learnMore:{textDecoration:"underline",fontSize:"inherit",lineHeight:"inherit",textTransform:"initial",fontWeight:700,display:"inline",padding:0,verticalAlign:"initial"}});function ko(o){const{defaultAuthorizationType:t,isReLogin:n,initialEmail:a}=o,{state:s,actions:r}=te(),{classes:d}=Lo();return l(pe,{authorizationType:s.authorizationType,defaultAuthorizationType:t,showRecaptchaPolicy:s.showRecaptchaPolicy,children:[s.showTabs&&l("div",{className:d.header,children:[e(ze,{isActive:s.authorizationType==="signup",onClick:r.openSignUp,children:"Sign up"}),e(ze,{isActive:s.authorizationType==="login",onClick:r.openSignIn,children:"Log in"})]}),l("div",{className:T(d.authorizationForm,{[d.proFeaturesAuthForm]:s.authorizationType==="signup-only"}),children:[e(nt,{initialEmail:a,initialPassword:s.initialPassword,onSignedUp:r.handleSignUp,onSwitchToLoginForm:r.openSignIn,onSignInWithSso:r.signInWithSso,resetSsoListener:r.resetSsoListener,onFormUpdated:r.updateForm,loginCallback:r.handleSignIn,onSignInWithEnterpriseSso:r.signInWithEnterpriseSso,isReLogin:n,isSignUp:s.authorizationType==="signup"||s.authorizationType==="signup-only"}),s.showSignUpPolicy&&e(J,{mt:"20px",children:e(bo,{})})]})]})}const Lo=b()((o,t)=>({authorizationForm:{backgroundColor:"var(--form-background)",padding:"20px",display:"flex",flexDirection:"column",height:"100%"},proFeaturesAuthForm:{padding:"35px",maxHeight:"323px",overflow:"hidden auto","&::-webkit-scrollbar":{width:"0"}},header:{display:"flex",flexDirection:"row"}})),Be=""+new URL("DataEncryption@1x-2f98e785.webp",import.meta.url).href,Io=""+new URL("DataEncryption@2x-6cb3fc29.webp",import.meta.url).href,To=(o,t)=>i.createElement("svg",{width:24,height:23,viewBox:"0 0 24 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8305 9.32069C14.7657 11.643 12.2472 12.8385 9.84885 12.323L9.40833 13.2838L10.3241 15.7503L7.85753 16.6661L8.77331 19.1327L5.07344 20.5064L4.15766 18.0398L7.36438 11.0458C5.68973 9.52031 5.11156 7.03145 6.10618 4.86214C7.33737 2.17685 10.5123 0.99808 13.1976 2.22927C15.8829 3.46047 17.0616 6.6354 15.8305 9.32069ZM12.8358 6.9243C12.4611 7.74156 11.4948 8.10032 10.6775 7.7256C9.86028 7.35089 9.50152 6.38461 9.87623 5.56735C10.2509 4.75009 11.2172 4.39133 12.0345 4.76604C12.8517 5.14075 13.2105 6.10704 12.8358 6.9243Z",fill:"currentColor"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5269 12.6153C15.6766 11.9642 16.6394 10.9583 17.2321 9.66549C18.4587 6.99039 17.7204 3.9161 15.6202 2.06614C17.6991 2.00664 19.711 3.16996 20.635 5.17861C21.7027 7.49954 20.9685 10.189 19.0146 11.6723L19.4564 12.6325L21.9241 13.5451L21.0115 16.0129L23.4792 16.9255L22.1103 20.6271L19.6425 19.7145L16.4269 12.7246C15.7849 12.8035 15.1416 12.7634 14.5269 12.6153Z",fill:"currentColor"})),Fo=i.forwardRef(To),Mo=i.memo(Fo);function De({icon:o,title:t,children:n}){const{classes:a}=Ro();return l("div",{className:a.root,children:[e("div",{className:a.iconContainer,children:o}),l("div",{children:[e(S,{className:a.title,color:"primary",fontSize:14,bold:!0,children:t}),n]})]})}const Ro=b()({root:{display:"flex"},iconContainer:{width:"40px",marginRight:"17px"},title:{marginTop:0,marginBottom:10}}),_o=(o,t)=>i.createElement("svg",{width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7443 1.5C13.3628 0.833334 12.409 0.833333 12.0274 1.5L2.58472 18C2.20319 18.6667 2.6801 19.5 3.44315 19.5H22.3286C23.0916 19.5 23.5685 18.6667 23.187 18L13.7443 1.5ZM11.8948 7.49194H14.0596L13.6433 13.3359H12.3111L11.8948 7.49194ZM12.9653 16.1199C12.3944 16.1199 11.9424 15.6519 11.9424 15.0879C11.9424 14.5119 12.3944 14.0439 12.9653 14.0439C13.5362 14.0439 14.0001 14.5119 14.0001 15.0879C14.0001 15.6519 13.5362 16.1199 12.9653 16.1199Z",fill:"currentColor"})),Po=i.forwardRef(_o),No=i.memo(Po);function Ao({onContinue:o}){const{classes:t}=Wo();return l("div",{className:t.form,children:[e(S,{variant:"h2",color:"primary",children:"Setting your data encryption"}),e(De,{icon:e(Mo,{className:t.svg}),title:`Create a strong ${F}`,children:l(S,{variant:"body2",children:["Your account data security depends on the strength of your"," ",F,"."," ",ue(F),"s that are too short, too simple, or consist of dictionary words are easily guessed."]})}),e(De,{icon:e(No,{className:t.svg}),title:`Save your ${F} somewhere safe`,children:l(S,{variant:"body2",children:["Due to our advanced end-to-end encryption, we cannot access your"," ",F,". If you lose it, we are unable to restore your account data."," ",e(V,{color:"var(--accent)",onClick:kt,children:"Learn more."})]})}),l(R,{color:"accent",onClick:o,children:["Set the ",F]})]})}const Wo=b()({form:{display:"flex",flexDirection:"column",padding:"20px",backgroundColor:"var(--white)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-3)"},"&& > * + *":{marginTop:"20px"}},svg:{color:"var(--text-primary)"}});function it({email:o,isReLogin:t,firebaseToken:n,displayEncryptionPasswordInfo:a,loginCallback:s,accessToken:r,isRememberPassword:d,setIsRememberPassword:h}){const{classes:u}=Vo(),[m,g]=i.useState(),C=le(),f=O(),y=i.useCallback(E=>h(E.target.checked),[h]),{register:c,handleSubmit:p,watch:w,formState:x}=xe({}),v=w("password"),_=i.useCallback(async({password:E},N)=>{try{await s({accessToken:r,username:o,firebaseToken:n,password:E,rememberPassword:d,authyToken:N,isReLogin:t}),g(void 0)}catch(z){const I=Lt(z.message,/((username\/password)|password)/,F);g({status:z.status,message:I}),f(Ze({errorMessage:I,onScreen:"Enter Passphrase"}))}},[s,r,o,n,d,t,f]),k=i.useCallback(async E=>{await _(E)},[_]),L=i.useCallback(async()=>{try{const E=await Fe({title:`Reset ${F}`,value:o,titleButton:"Reset",dark:!0,text:"Email"});await ce(C,ve,E),await Y({title:"Success",text:"Your reset link has been sent to your email",dark:!0})}catch(E){g({status:E.status,message:"Something went wrong"}),E.status===490&&It(C,{dialog:"BlockAccess",target:"all-windows",props:{}}).catch(Tt)}},[C,o]);return l("form",{className:u.form,onSubmit:p(k),children:[l(S,{variant:"h2",color:"primary",children:["Enter data ",F]}),e(be,{label:`Data ${F}`,InputProps:c("password",{required:!0}),error:!!x.errors.password,autoFocus:!0,fullWidth:!0,disableWrapper:!0,outlined:!0}),a&&l(S,{variant:"body1",color:"primary",children:["Your data ",F," is your Termius password"]}),e(Ee,{fullWidth:!0,checked:d,onChange:y,label:e(S,{color:"inherit",children:"Remember me"})}),m&&e(de,{message:m.message,status:m.status}),e(R,{type:"submit",color:"accent",disabled:x.isSubmitting||!v,progress:x.isSubmitting,fullWidth:!0,children:"Continue"}),l(V,{color:"var(--accent)",onClick:L,children:["Forgot ",F,"?"]})]})}const Vo=b()({form:{display:"flex",flexDirection:"column",padding:"20px",backgroundColor:"var(--white)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-3)"},"&& > * + *":{marginTop:"20px"}}});it.defaultProps={initialPassword:""};function at({email:o,firebaseToken:t,onSignedUp:n,authMethod:a}){const{classes:s}=zo(),[r,d]=i.useState(),h=le(),{register:u,handleSubmit:m,watch:g,formState:C}=xe({defaultValues:{password:""}}),f=g("password"),{isPasswordValidForSignUp:y,...c}=Le(f),p=i.useCallback(async w=>{const{password:x}=w;try{await ce(h,Ft,{firebaseToken:t,password:x,email:o,rememberPassword:!0,authMethod:a}),n(o),d(void 0)}catch(v){d(v)}},[a,o,t,n,h]);return l("form",{className:s.form,onSubmit:m(p),children:[e(S,{variant:"h2",color:"primary",children:"Setting your data encryption"}),e(Xt,{label:`Set data ${F}`,InputProps:u("password",{required:!0}),error:!!C.errors.password,fullWidth:!0}),e(Ie,{sso:!0,...c}),r&&e(de,{message:r.message,status:r.status}),e(R,{type:"submit",color:"accent",disabled:C.isSubmitting||!f||!y,progress:C.isSubmitting,children:"Done"})]})}const zo=b()({form:{display:"flex",flexDirection:"column",padding:"20px",backgroundColor:"var(--white)",".termius-dark-theme &":{backgroundColor:"var(--dark-grey-3)"},"&& > * + *":{marginTop:"20px"}}});at.defaultProps={initialPassword:""};function Bo(o){const{defaultAuthorizationType:t,displaySsoImage:n,isReLogin:a}=o,{state:s,actions:r}=te(),{classes:d}=Do(),{email:h="",firebaseToken:u=""}=s.ssoData??{};return l(pe,{authorizationType:s.authorizationType,defaultAuthorizationType:t,showRecaptchaPolicy:s.showRecaptchaPolicy,children:[t==="re-login"&&e(se,{className:d.backButton,onClick:r.onBack}),l(ee,{className:d.ssoContainer,children:[n&&e("img",{className:d.ssoImage,src:Be,srcSet:`${Be} 1x, ${Io} 2x`,alt:""}),l(Mt,{children:[e(ge,{when:s.authorizationType==="sso-info",children:e(Ao,{onContinue:r.openSetPassphrase})}),e(ge,{when:s.authorizationType==="sso-signup",children:e(at,{email:h,firebaseToken:u,onSignedUp:r.handleSignUp,authMethod:s.authMethod})}),e(ge,{when:s.authorizationType==="sso-link"||s.authorizationType==="sso-login",children:e(it,{email:h,firebaseToken:u,displayEncryptionPasswordInfo:s.authorizationType==="sso-link",isReLogin:a,loginCallback:r.handleSignIn,accessToken:s.accessToken,isRememberPassword:s.isRememberPassword,setIsRememberPassword:r.setIsRememberPassword})})]})]})]})}const Do=b()((o,t)=>({ssoContainer:{backgroundColor:"var(--form-background)"},ssoImage:{marginTop:20,alignSelf:"center"},backButton:{position:"absolute",marginTop:-70,marginLeft:-20}})),Ho=(o,t)=>i.createElement("svg",{width:65,height:64,viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 15.0398C0 8.85425 5.01441 3.83984 11.2 3.83984H48.96C55.1456 3.83984 60.16 8.85426 60.16 15.0398V16.96C62.4575 16.96 64.32 18.8225 64.32 21.12C64.32 23.4175 62.4575 25.28 60.16 25.28V33.92C62.4575 33.92 64.32 35.7825 64.32 38.08C64.32 40.3775 62.4575 42.24 60.16 42.24V44.1598C60.16 50.0221 55.6561 54.8324 49.9198 55.3193L49.92 55.36C49.92 58.1877 47.6277 60.48 44.8 60.48C41.9723 60.48 39.68 58.1877 39.68 55.36V55.3598H20.48V55.36C20.48 58.1877 18.1877 60.48 15.36 60.48C12.5323 60.48 10.24 58.1877 10.24 55.36L10.2402 55.3193C4.50389 54.8324 0 50.0221 0 44.1598V15.0398ZM37.12 43.84C44.8962 43.84 51.2 37.5362 51.2 29.76C51.2 21.9838 44.8962 15.68 37.12 15.68C29.3438 15.68 23.04 21.9838 23.04 29.76C23.04 37.5362 29.3438 43.84 37.12 43.84ZM9.28 22.72C9.28 21.4829 10.2829 20.48 11.52 20.48C12.7571 20.48 13.76 21.4829 13.76 22.72V36.8C13.76 38.0371 12.7571 39.04 11.52 39.04C10.2829 39.04 9.28 38.0371 9.28 36.8V22.72ZM37.12 39.04C42.2452 39.04 46.4 34.8852 46.4 29.76C46.4 24.6348 42.2452 20.48 37.12 20.48C31.9948 20.48 27.84 24.6348 27.84 29.76C27.84 34.8852 31.9948 39.04 37.12 39.04Z",fill:"url(#paint0_linear_45_21043)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_45_21043",x1:-36316e-11,y1:3.19621,x2:67.6791,y2:7.54371,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})))),Oo=i.forwardRef(Ho),X=i.memo(Oo),Uo=o=>{const{state:t,send:n,isReLogin:a,ssoData:s}=o,{classes:r}=Zo(),d=O(),[h,u]=i.useState(!1),m=!t.matches("loggingInWithEmail")&&!t.matches("loggedInWithEmail")&&!t.matches("welcomeFlow.loggingWithSso"),{ssoEmail:g,firebaseToken:C,accessToken:f,isSsoLogin:y}=s,{error:c,email:p,password:w,ssoData:x}=t.context,v=!!(x!=null&&x.accessToken),_=Rt(c),k=_t(c),L=k||h;K(()=>{u(!1),s.isSsoLogin||d(Pt({authMethod:"Email"})),y&&n("GO_TO_LOG_IN_PASSWORD_SCREEN")}),i.useEffect(()=>{g&&p!==g&&n("CHANGE_EMAIL",{data:g}),Xe(s,x)||n("CHANGE_SSO_DATA",{data:s})},[p,n,s,x,g]);const E=async D=>{if(D.preventDefault(),y){n({type:"LOG_IN_WITH_SSO",data:{username:g,accessToken:f,firebaseToken:C,isReLogin:a}});return}n({type:"LOG_IN_WITH_EMAIL",data:{rememberPassword:!0,reLogIn:a}})},N=()=>{k&&u(!0),d(Wt()),n("FORGOT_PASSWORD")},z=l(A.Fragment,{children:[e(B,{in:!0,children:e("div",{className:r.passwordInputSection,children:e(oe,{autoFocus:!0,className:r.passwordInput,name:"password",type:"password",label:ue(F),value:w,onChange:D=>{n("CHANGE_PASSWORD",{data:D.target.value}),_&&n("CLEAR_ERROR")},error:_,alertIcons:!1})})}),l("div",{className:r.actionsSection,children:[e(ne,{className:r.errorWrapper,errorMessage:c==null?void 0:c.message,enter:!!c}),e(R,{type:"submit",progress:je(t),disabled:!w,className:r.button,color:"accent",children:"Continue"}),e(V,{disabled:!m,onClick:N,className:T(r.forgotPassword,{[r.forgotPasswordNonActive]:!m}),children:"Forgot password?"})]})]}),I=l("div",{className:r.loginErrorWrapper,children:[l("div",{className:r.loginErrorContent,children:[e(Nt,{size:28,icon:e(At,{})}),e(S,{variant:"body1",align:"center",color:"secondary",children:c==null?void 0:c.message})]}),e(V,{disabled:qe(t),onClick:N,className:r.forgotPassword,children:"Forgot password?"})]});return l("form",{className:r.form,onSubmit:E,children:[e(X,{className:r.vaultIcon}),e("div",{className:T(r.textContent,{[r.essoWrapper]:v}),children:l(S,{variant:"h2",align:"center",color:"main",children:["Enter your ",F," ",v?"":"for"]})}),!v&&e(he,{className:r.emailWrapper,text:y?g:p}),L?I:z]})},Zo=b()({form:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},vaultIcon:{alignSelf:"center",marginBottom:"20px","@media (max-height: 465px)":{display:"none"}},textContent:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"10px"},essoWrapper:{marginBottom:"20px"},emailWrapper:{marginBottom:"30px"},passwordInputSection:{width:"300px",margin:"0 auto"},passwordInput:{width:"100%"},button:{cursor:"pointer"},forgotPassword:{alignSelf:"center",height:"14px",marginBottom:2,width:"100%",fontWeight:500,"&:hover":{color:"var(--accent) !important"}},forgotPasswordNonActive:{color:"var(--secondary)","&:hover":{color:"var(--secondary) !important"}},actionsSection:{display:"flex",flexDirection:"column",gap:"21px",width:"300px",margin:"0 auto"},loginErrorWrapper:{display:"flex",flexDirection:"column",gap:"20px"},loginErrorContent:{width:"300px",height:"94px",padding:"10px 20px",background:"var(--background)",margin:"0 auto",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"},errorWrapper:{margin:"5px 0 0 5px"}}),Go=o=>{const{state:t,send:n,ssoData:a,sendAnalytics:s}=o,{classes:r}=$o(),d=O(),h=i.useRef(null),{ssoEmail:u,firebaseToken:m,provider:g,isSsoSignUp:C}=a,{error:f,email:y,password:c,ssoData:p,showRecaptcha:w}=t.context;K(()=>{s(),C?(d(Ne({authMethod:a.provider==="google"?"Google Auth":"Apple Auth"})),n("GO_TO_SIGN_UP_PASSWORD_SCREEN")):d(Ne({authMethod:"Email"}))}),i.useEffect(()=>{u&&y!==u&&n("CHANGE_EMAIL",{data:u}),Xe(a,p)||n("CHANGE_SSO_DATA",{data:a})},[y,n,a,p,u]);const[x,v]=i.useState(!1),{isPasswordValidForSignUp:_,...k}=Le(c,{email:y}),L=i.useCallback(()=>g==="google"?"Google Auth":g==="apple"?"Apple Auth":"Email",[g]),E=async I=>{I.preventDefault(),N()},N=i.useCallback(async I=>{if(v(!0),C){n({type:"SIGN_UP_WITH_SSO",data:{email:u,firebaseToken:m,authMethod:L()}});return}if(I){if(!h.current)return;const D=await h.current.getToken();n("CHANGE_CAPTCHA",{data:D})}n("SIGN_UP")},[m,L,C,n,u]);i.useEffect(()=>{w&&N(!0)},[w,N]),i.useEffect(()=>{f&&v(!1)},[f,t]);const{title:z=`Set an ${F} for your vault`}=o;return l("form",{className:r.form,onSubmit:E,children:[e(X,{className:r.vaultIcon}),e("div",{className:r.textContent,children:e(S,{variant:"h2",align:"center",color:"main",children:z})}),e(B,{in:!0,children:l(H,{top:5,children:[e(H,{bottom:20,children:e(ot,{})}),l("div",{className:r.passwordInputSection,children:[e(oe,{autoFocus:!0,className:r.passwordInput,name:"password",type:"password",label:ue(F),value:c,onChange:I=>{n("CHANGE_PASSWORD",{data:I.target.value})}}),e(ne,{className:r.errorWrapper,errorMessage:f==null?void 0:f.message,enter:!!f}),e(Ie,{...k,hasLabel:!1,className:r.passwordClassname})]})]})}),e(R,{className:r.signUpButton,progress:Te(t)||x,disabled:!Vt(t,_)&&!x,type:"submit",size:"medium",fullWidth:!0,color:"accent",children:"Continue"}),w&&!C&&e(me,{apiRef:h})]})},$o=b()({form:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},vaultIcon:{alignSelf:"center",marginBottom:"20px","@media (max-height: 500px)":{display:"none"}},textContent:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"30px"},passwordInputSection:{width:"350px",margin:"0 auto"},passwordInput:{width:"100%"},passwordClassname:{marginTop:"10px",width:"350px","& span":{height:"3px"}},signUpButton:{width:"350px",margin:"0 auto",marginTop:"20px"},errorWrapper:{margin:"5px 0 0 5px"}}),jo=(o,t)=>i.createElement("svg",{width:64,height:64,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.8113 12H15.1887C11.2497 12 8.0566 15.134 8.0566 19V43C8.0566 46.866 11.2497 50 15.1887 50H48.8113C52.7503 50 55.9434 46.866 55.9434 43V19C55.9434 15.134 52.7503 12 48.8113 12ZM15.1887 9C9.56163 9 5 13.4772 5 19V43C5 48.1282 8.933 52.3548 14 52.9327V53C14 55.2091 15.7909 57 18 57C20.2091 57 22 55.2091 22 53H42C42 55.2091 43.7909 57 46 57C48.2091 57 50 55.2091 50 53V52.9327C55.067 52.3548 59 48.1282 59 43V19C59 13.4772 54.4384 9 48.8113 9H15.1887ZM16 23C14.8954 23 14 23.8954 14 25V37C14 38.1046 14.8954 39 16 39C17.1046 39 18 38.1046 18 37V25C18 23.8954 17.1046 23 16 23ZM38 21.5C32.7533 21.5 28.5 25.7533 28.5 31C28.5 36.2467 32.7533 40.5 38 40.5C43.2467 40.5 47.5 36.2467 47.5 31C47.5 25.7533 43.2467 21.5 38 21.5ZM25.5 31C25.5 24.0964 31.0964 18.5 38 18.5C44.9036 18.5 50.5 24.0964 50.5 31C50.5 37.9036 44.9036 43.5 38 43.5C31.0964 43.5 25.5 37.9036 25.5 31ZM31 31C31 27.134 34.134 24 38 24C39.3615 24 40.6349 24.3897 41.7115 25.064C42.1795 25.3572 42.3213 25.9743 42.0281 26.4423C41.7349 26.9104 41.1179 27.0521 40.6498 26.7589C39.8822 26.2781 38.9751 26 38 26C35.2386 26 33 28.2386 33 31V31.5556C33 32.1078 32.5523 32.5556 32 32.5556C31.4477 32.5556 31 32.1078 31 31.5556V31ZM43.9888 27.376C43.7025 26.9038 43.0875 26.7531 42.6152 27.0395C42.143 27.3259 41.9924 27.9408 42.2787 28.4131C42.7362 29.1674 42.9998 30.0521 42.9998 31.0014C42.9998 31.6758 42.8668 32.3166 42.6266 32.901C42.4166 33.4118 42.6604 33.9961 43.1712 34.2061C43.682 34.4161 44.2663 34.1723 44.4763 33.6615C44.814 32.84 44.9998 31.9411 44.9998 31.0014C44.9998 29.6762 44.6306 28.4341 43.9888 27.376ZM38 27C35.7909 27 34 28.7909 34 31V36.1852C34 36.7375 34.4477 37.1852 35 37.1852C35.5523 37.1852 36 36.7375 36 36.1852V31C36 29.8954 36.8954 29 38 29C39.1046 29 40 29.8954 40 31C40 31.5523 40.4477 32 41 32C41.5523 32 42 31.5523 42 31C42 28.7909 40.2091 27 38 27ZM42 34C42 33.4477 41.5523 33 41 33C40.4477 33 40 33.4477 40 34V36.185C40 36.7373 40.4477 37.185 41 37.185C41.5523 37.185 42 36.7373 42 36.185V34ZM38 30.5C38.5523 30.5 39 30.9477 39 31.5V36.9998C39 37.5521 38.5523 37.9998 38 37.9998C37.4477 37.9998 37 37.5521 37 36.9998V31.5C37 30.9477 37.4477 30.5 38 30.5Z",fill:"url(#paint0_linear_5175_113737)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_5175_113737",x1:5,y1:8.45455,x2:61.8245,y2:12.0707,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})))),qo=i.forwardRef(jo),Yo=i.memo(qo),Me=o=>{const{title:t,description:n,email:a,hasDescription:s=!0,noMarginBottom:r=!1,icon:d=e(Yo,{})}=o,{classes:h}=Ko();return l("div",{className:h.contentWrapper,children:[e("div",{className:h.icon,children:d}),l("div",{className:T(h.textContent,{[h.noMarginBottom]:r}),children:[e(S,{variant:"h2",align:"center",color:"main",highlighter:!0,children:t}),s&&e(S,{variant:"body1",align:"center",color:"secondary",children:n}),a&&e(ee,{className:h.emailContent,children:e(he,{text:a})})]})]})},Ko=b()({contentWrapper:{margin:"0 auto",display:"flex",flexDirection:"column"},icon:{alignSelf:"center",width:"64px",height:"64px",display:"flex",alignItems:"center",marginBottom:"20px","@media (max-height: 530px)":{display:"none"}},textContent:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"30px"},emailContent:{width:"300px",justifyContent:"flex-start",margin:"10px auto 0px auto"},noMarginBottom:{marginBottom:0}}),He=o=>{const{send:t,state:n,title:a,description:s}=o,{classes:r}=Xo(),d=O(),h=n.matches("welcomeFlow.signUpEmail"),u=i.useRef(null),{isSignUpFlow:m,email:g,error:C,showRecaptcha:f}=n.context,y=zt(C),c=Bt(Dt),p=i.useCallback(async x=>{if(x){if(!u.current)return;const v=await u.current.getToken();t("CHANGE_CAPTCHA",{data:v})}t(m?"CHECK_IF_EMAIL_AVAILABLE":"LOG_IN")},[m,t]),w=async x=>{x.preventDefault(),p(f)};return K(()=>{n.matches("idle.unknown")||d(Ht({authMethod:"Email"}))}),i.useEffect(()=>{f&&p(!0)},[f,p]),i.useEffect(()=>{t("CHANGE_SIGN_UP_EMAIL_VERIFICATION_EXPERIMENT",{data:c==="email_verification"})},[c,t]),l("form",{className:T(r.form,{[r.widerForm]:m}),onSubmit:w,children:[e(Me,{title:a,description:s,hasDescription:!0,hasWiderTextContainer:m,icon:o.icon}),l("div",{className:r.emailSection,children:[e(oe,{autoFocus:!0,name:"email",label:"Email",value:g,onChange:x=>{t("CHANGE_EMAIL",{data:x.target.value}),y&&t("CLEAR_ERROR")},fullWidth:!0,error:!!C,alertIcons:!1}),e(ne,{className:r.errorWrapper,errorMessage:C==null?void 0:C.message,enter:!!C}),h?e(R,{className:r.signUpButton,type:"submit",progress:Ae(n)||ye(n),disabled:!g,color:"accent",onClick:w,children:"Continue"}):e(R,{className:r.logInButton,progress:Ae(n)||ye(n),disabled:!g,type:"submit",size:"medium",fullWidth:!0,color:"accent",children:"Continue"})]}),f&&e(me,{apiRef:u})]})},Xo=b()({form:{margin:"0 auto",color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},emailSection:{display:"flex",flexDirection:"column",width:"300px",justifyContent:"flex-start",margin:"0 auto"},signUpButton:{width:"300px",margin:"0 auto",marginTop:"20px"},logInButton:{marginTop:"20px"},widerForm:{width:"100%"},errorWrapper:{margin:"5px 0 0 5px"}}),Jo=(o,t)=>i.createElement("svg",{width:64,height:44,viewBox:"0 0 64 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M-2.27539 0.696005L30.9095 25.32C31.5651 25.7902 32.4334 25.7902 33.089 25.32L66.2739 0.696006C65.9347 0.379878 62.5768 0.1875 62.0847 0.1875H1.91377C1.42163 0.1875 -1.93623 0.379877 -2.27539 0.696005ZM63.9992 9.20135L37.1367 28.4682C34.0459 30.685 29.9525 30.685 26.8618 28.4682L-0.000763655 9.20135V41.8404C-0.000763655 42.9358 0.856401 43.8239 1.91377 43.8239H62.0847C63.1421 43.8239 63.9992 42.9358 63.9992 41.8404V9.20135Z",fill:"url(#paint0_linear_3309_33612)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_3309_33612",x1:-2.27539,y1:-.308363,x2:69.584,y2:6.07721,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})))),Qo=i.forwardRef(Jo),q=i.memo(Qo),en=o=>{const{state:t,send:n}=o,{classes:a}=tn(),[s,r]=i.useState(!0),[d,h]=i.useState("loading"),{email:u}=t.context;K(()=>{const g=setTimeout(()=>{r(!1),h("success")},5e3);return()=>{clearTimeout(g)}}),i.useEffect(()=>{t.matches("welcomeFlow.logInPassword")&&(r(!0),h("loading"),setTimeout(()=>{r(!1),h("success")},5e3))},[t]);const m=l("div",{className:a.buttonWrapper,children:[e(S,{lineHeight:0,color:"inherit",children:"I have verified this device"}),d==="loading"&&e(Ot,{className:a.spinner,size:13,classes:{colorPrimary:a.progressColor}})]});return l("div",{className:a.root,children:[l(W,{in:t.matches("welcomeFlow.logInPassword"),children:[e(q,{className:a.icon}),l("div",{className:a.textContent,children:[e(S,{variant:"h2",align:"center",color:"main",children:"Open your email for verification"}),e(S,{variant:"body1",align:"center",color:"secondary",children:"For extra security, we sent you a verification email to"}),e(he,{className:a.emailWrapper,text:u})]}),e(R,{progress:t.matches("loggingInWithEmail"),disabled:s||t.matches("loggingInWithEmail"),size:"medium",color:"accent",className:T(a.button,{[a.disabled]:s}),onClick:()=>{n({type:"LOG_IN_WITH_EMAIL_EMAIL_VALIDATION",data:{rememberPassword:!0,reLogIn:!1}})},children:m}),l(S,{className:a.contactLinkWrapper,variant:"body2",color:"secondary",children:["Didn't get email?"," ",e(V,{className:a.contactLink,onClick:Je,color:"accent",children:"Contact us"})]})]}),e(W,{in:t.matches("loggingInWithEmail")||t.matches("loggedInWithEmail"),children:e(Qe,{className:a.progressCircle,size:205,thickness:2})})]})},tn=b()({root:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},icon:{alignSelf:"center",marginBottom:"20px","@media (max-height: 465px)":{display:"none"}},textContent:{display:"flex",flexDirection:"column",gap:"10px"},spinner:{marginRight:"10.5px",color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--white)"}},contactLinkWrapper:{textAlign:"center",marginTop:"20px"},contactLink:{fontSize:"inherit",lineHeight:"inherit",textTransform:"initial",fontWeight:"bold",display:"inline",padding:0,verticalAlign:"initial"},progressColor:{color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--white)"}},button:{width:"300px",height:"35px",margin:"0 auto",cursor:"pointer"},disabled:{".termius-dark-theme &":{background:"var(--card-b)",color:"var(--text-common)"}},buttonWrapper:{display:"flex",gap:"10.5px",alignItems:"center"},emailWrapper:{marginBottom:"30px"},progressCircle:{margin:"109px auto 0",color:"var(--accent)","@media (max-height: 540px)":{margin:"40px auto 0"}}}),on=o=>{const{state:t,send:n,isReLogin:a}=o,{error:s,otpToken:r}=t.context;return e(Jt,{onInputChange:u=>{u.preventDefault(),n("CHANGE_OTP_TOKEN",{data:u.target.value}),s&&n("CLEAR_ERROR")},onSubmit:()=>{n({type:"LOG_IN_WITH_OTP",data:{rememberPassword:!0,reLogIn:a}})},otpToken:r,error:s,title:"Enter verification code",description:"Enter the verification code from your 2FA provider.",inProgressButton:t.matches("otpFlow.loginOtpRequest")||t.matches("otpFlow.loginOtpSuccess")})},nn=(o,t)=>i.createElement("svg",{width:64,height:64,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.8113 12H15.1887C11.2497 12 8.0566 15.134 8.0566 19V43C8.0566 46.866 11.2497 50 15.1887 50H48.8113C52.7503 50 55.9434 46.866 55.9434 43V19C55.9434 15.134 52.7503 12 48.8113 12ZM15.1887 9C9.56163 9 5 13.4772 5 19V43C5 48.1282 8.933 52.3548 14 52.9327V53C14 55.2091 15.7909 57 18 57C20.2091 57 22 55.2091 22 53H42C42 55.2091 43.7909 57 46 57C48.2091 57 50 55.2091 50 53V52.9327C55.067 52.3548 59 48.1282 59 43V19C59 13.4772 54.4384 9 48.8113 9H15.1887ZM16 23C14.8954 23 14 23.8954 14 25V37C14 38.1046 14.8954 39 16 39C17.1046 39 18 38.1046 18 37V25C18 23.8954 17.1046 23 16 23ZM38 21.5C32.7533 21.5 28.5 25.7533 28.5 31C28.5 36.2467 32.7533 40.5 38 40.5C43.2467 40.5 47.5 36.2467 47.5 31C47.5 25.7533 43.2467 21.5 38 21.5ZM25.5 31C25.5 24.0964 31.0964 18.5 38 18.5C44.9036 18.5 50.5 24.0964 50.5 31C50.5 37.9036 44.9036 43.5 38 43.5C31.0964 43.5 25.5 37.9036 25.5 31ZM31 31C31 27.134 34.134 24 38 24C39.3615 24 40.6349 24.3897 41.7115 25.064C42.1795 25.3572 42.3213 25.9743 42.0281 26.4423C41.7349 26.9104 41.1179 27.0521 40.6498 26.7589C39.8822 26.2781 38.9751 26 38 26C35.2386 26 33 28.2386 33 31V31.5556C33 32.1078 32.5523 32.5556 32 32.5556C31.4477 32.5556 31 32.1078 31 31.5556V31ZM43.9888 27.376C43.7025 26.9038 43.0875 26.7531 42.6152 27.0395C42.143 27.3259 41.9924 27.9408 42.2787 28.4131C42.7362 29.1674 42.9998 30.0521 42.9998 31.0014C42.9998 31.6758 42.8668 32.3166 42.6266 32.901C42.4166 33.4118 42.6604 33.9961 43.1712 34.2061C43.682 34.4161 44.2663 34.1723 44.4763 33.6615C44.814 32.84 44.9998 31.9411 44.9998 31.0014C44.9998 29.6762 44.6306 28.4341 43.9888 27.376ZM38 27C35.7909 27 34 28.7909 34 31V36.1852C34 36.7375 34.4477 37.1852 35 37.1852C35.5523 37.1852 36 36.7375 36 36.1852V31C36 29.8954 36.8954 29 38 29C39.1046 29 40 29.8954 40 31C40 31.5523 40.4477 32 41 32C41.5523 32 42 31.5523 42 31C42 28.7909 40.2091 27 38 27ZM42 34C42 33.4477 41.5523 33 41 33C40.4477 33 40 33.4477 40 34V36.185C40 36.7373 40.4477 37.185 41 37.185C41.5523 37.185 42 36.7373 42 36.185V34ZM38 30.5C38.5523 30.5 39 30.9477 39 31.5V36.9998C39 37.5521 38.5523 37.9998 38 37.9998C37.4477 37.9998 37 37.5521 37 36.9998V31.5C37 30.9477 37.4477 30.5 38 30.5Z",fill:"#F25E61"})),an=i.forwardRef(nn),rn=i.memo(an),sn=o=>{const{state:t,send:n}=o,{classes:a}=ln(),[s,r]=i.useState(t.context.email),[d,h]=i.useState(!1),{email:u,error:m}=t.context;return i.useEffect(()=>{(t.matches("welcomeFlow.resetPasswordSuccess")||m)&&h(!1)},[m,n,t]),l("div",{className:a.root,children:[l(W,{in:t.matches("welcomeFlow.forgotPassword")||t.matches("resettingPassword"),children:[e(rn,{className:a.icon}),l("div",{className:a.textContent,children:[l(S,{variant:"h2",align:"center",color:"main",children:["Reset ",F]}),l(S,{variant:"body1",align:"center",color:"secondary",children:["The password reset will"," ",e(S,{variant:"body1",color:"error",display:"inline",children:"permanently delete"})," ","all your Vaults and associated information."]})]}),e("div",{className:a.emailSection,children:e(oe,{autoFocus:!0,name:"email",label:"Email",value:s,onChange:g=>{n("CLEAR_ERROR"),r(g.target.value)},fullWidth:!0})}),e("div",{className:a.error,children:e(ne,{className:a.errorWrapper,errorMessage:m==null?void 0:m.message,enter:!!m})}),e(R,{progress:t.matches("resettingPassword")||d,disabled:t.matches("resettingPassword")||d||!s,size:"medium",color:"accent",className:a.button,onClick:()=>{h(!0),setTimeout(()=>{n({type:"FORGOT_PASSWORD",data:{resetPasswordValue:s}})},1e3)},children:"Get instructions"})]}),l(W,{in:t.matches("welcomeFlow.resetPasswordSuccess"),children:[e(q,{className:a.icon}),l("div",{className:T(a.textContent,a.successScreen),children:[e(S,{variant:"h2",align:"center",color:"main",children:"Look for an email in your inbox"}),e(S,{variant:"body1",align:"center",color:"secondary",children:"An email with instructions has been sent to"}),e(he,{text:u})]}),e(R,{size:"medium",color:"accent",className:a.button,onClick:()=>{n("BACK")},children:"Go to Log in"})]})]})},ln=b()({root:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"white"},display:"flex",flexDirection:"column"},icon:{alignSelf:"center",marginBottom:"20px","@media (max-height: 465px)":{display:"none"}},textContent:{display:"flex",width:"325px",flexDirection:"column",gap:"10px",margin:"0 auto",marginBottom:"30px"},successScreen:{width:"346px",marginBottom:"10px"},button:{width:"300px",height:"35px",margin:"0 auto",marginTop:"20px",cursor:"pointer"},error:{margin:"0 auto",width:"300px",marginTop:"5px"},errorWrapper:{margin:"0 auto"},emailSection:{display:"flex",flexDirection:"column",alignItems:"center",width:"296px",justifyContent:"flex-start",margin:"0 auto"}}),cn=(o,t)=>o&&t.matches("welcomeFlow.signUpStart"),dn=(o,t)=>!o&&t.matches("welcomeFlow.logInStart"),un=(o,t)=>o&&(t.matches("welcomeFlow.signUpEmail")||t.matches("queryingWhetherUserEsso")||t.matches("queryWhetherEmailAvailable")||t.matches("sendEmailVerificationCode")||t.matches("idle.unknown")||t.matches("welcomeFlow.checkingEmailError")),mn=o=>o.matches("welcomeFlow.signUpEmailVerification")||o.matches("queryWhetherEmailVerificationCodeIsValid")||o.matches("resendEmailVerificationCode"),hn=(o,t)=>o.matches("welcomeFlow.signUpPassword")||o.matches("welcomeFlow.signingWithSso")||o.matches("signedUp")||t||Te(o),pn=(o,t)=>!o&&(t.matches("welcomeFlow.logInEmail")||t.matches("queryingWhetherUserEsso")||t.matches("queryWhetherEmailAvailable")||t.matches("idle.unknown")||t.matches("sendEmailVerificationCode")||t.matches("welcomeFlow.checkingEmailError")),gn=(o,t,n,a)=>!n&&!a&&(o.matches("welcomeFlow.logInPassword")||o.matches("loggingInWithEmail")||o.matches("welcomeFlow.loggingWithSso")||o.matches("loggedInWithEmail")||(o.matches("idle.signingInWithSso")||o.matches("idle.signingInWithEsso"))&&t),Cn=(o,t)=>t&&(o.matches("otpFlow.otpToken")||o.matches("otpFlow.loginOtpRequest")||o.matches("otpFlow.loginOtpSuccess")),fn=(o,t)=>(t.matches("idle.signingInWithSso")||t.matches("idle.signingInWithEsso"))&&o,wn=(o,t,n)=>(o.matches("idle.signingInWithSso")||o.matches("idle.signingInWithEsso"))&&!t&&!n,Sn=(o,t)=>t.matches("idle.signingInWithSso")&&o,yn=o=>o.matches("welcomeFlow.forgotPassword")||o.matches("resettingPassword")||o.matches("welcomeFlow.resetPasswordSuccess"),xn=o=>!o.matches("signedUp")&&!o.matches("loggedInWithEmail")&&!o.matches("loggedInWithSso")&&!o.matches("signingUp")&&!o.matches("welcomeFlow.loggingWithSso")&&!o.matches("welcomeFlow.signingWithSso")&&!o.matches("loggingInWithEmail")&&!o.matches("otpFlow.loginOtpRequest")&&!o.matches("otpFlow.loginOtpSuccess"),vn=o=>{const{ssoProvider:t}=o,{classes:n}=En();return t==null?null:l("div",{className:n.root,children:[e(Qe,{className:n.progressCircle,size:66,thickness:2}),e(S,{variant:"h2",align:"center",color:"main",children:bn[t]})]})},bn={google:"Continue with Google",apple:"Continue with Apple",enterprise:"Continue with Enterprise SSO"},En=b()({root:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",bottom:"40px"},progressCircle:{color:"var(--accent)",marginBottom:"20px"}}),Oe=o=>{const{send:t,state:n,title:a,description:s,isSignUp:r,funnelID:d="",hasWiderTextContainer:h=!1,showLoginButton:u=!0,actionDescription:m,actionButtonText:g,createAccountScreenType:C="Welcome Screen",flowVariant:f}=o,{classes:y}=kn(),c=O();K(()=>{n.context.isSignUpFlow?c(Ut({createAccountScreenType:C,upgradeToProFunnelID:d})):c(et({loginType:"login"}))});const p=n.matches("welcomeFlow.logInStart")||n.matches("welcomeFlow.logInEmail")||n.matches("idle.signingInWithSso")&&!r,w=i.useCallback(()=>{t("SIGN_IN_WITH_SSO",{data:"apple"})},[t]),x=i.useCallback(()=>{t("SIGN_IN_WITH_SSO",{data:"google"})},[t]),v=i.useCallback(()=>{t("SIGN_IN_WITH_ESSO")},[t]),k=["backUpAndSync","shareAndInvite"].includes(f??"")?"20px":"75px";return l("div",{className:y.root,children:[e(Me,{title:a,description:s,hasWiderTextContainer:h,hasDescription:!0,icon:o.icon}),l("div",{className:y.signupSsoButtonsLayout,children:[p&&e(ke,{disableHover:!0,className:y.ssoButton,onClick:v,isWhiteIconInDarkMode:!0}),e(Se,{disableHover:!0,className:y.ssoButton,prefix:"Continue with ",onClick:x}),e(we,{disableHover:!0,className:y.ssoButton,prefix:"Continue with ",onClick:w,isWhiteIconInDarkMode:!0}),e(R,{variant:"text",type:"submit",size:"medium",fullWidth:!0,color:"regular",onClick:()=>{if(r){t("GO_TO_SIGN_UP_EMAIL_SCREEN");return}t("GO_TO_LOG_IN_EMAIL_SCREEN")},children:"Continue with email"})]}),r&&e(ee,{direction:"row",alignItems:"end",justifyContent:"center",flex:1,marginTop:k,children:e(S,{variant:"body1",color:"secondary",children:u&&l(A.Fragment,{children:["Already using Termius?"," ",e(V,{onClick:()=>t("GO_TO_LOG_IN_START_SCREEN"),color:"accent",className:y.logInButton,children:"Log in"})]})})}),e(Ln,{actionDescription:m,actionButtonText:g,state:n,send:t,isSignUp:r,flowVariant:f})]})},kn=b()({root:{height:"100%","@media (max-height: 460px)":{position:"relative",top:"-15px"}},logInButton:{fontSize:14,fontWeight:500},signupSsoButtonsLayout:{display:"flex",width:"300px",margin:"0 auto",flexDirection:"column",gap:10},ssoButton:{borderRadius:"6px",border:"1px solid var(--light-grey-3)",background:"var(--foreground)",color:"var(--main)",".termius-dark-theme &":{borderColor:"var(--white)"},"&:hover":{background:"var(--light-grey-transparent)",border:"none",".termius-dark-theme &":{background:"var(--dark-grey-transparent)",border:"none"}}}}),Ln=({state:o,send:t,isSignUp:n,actionDescription:a="Don't have Termius vault yet?",actionButtonText:s="Set up your vault",flowVariant:r})=>{const{classes:d}=In();return n&&o.matches("welcomeFlow.signUpPassword")||o.matches("welcomeFlow.logInPassword")||o.matches("welcomeFlow.logInEmail")?null:n?e(ee,{marginTop:"12.5px",direction:"row",justifyContent:"center",width:"100%",bgcolor:"var(--foreground)",children:e("div",{className:d.signupPolicy,children:e("div",{className:d.termiusPolicy,children:l(S,{variant:"body2",color:"secondary",children:["By continuing, you agree to the"," ",e(V,{className:d.learnMore,onClick:Ye,color:"accent",children:"Terms of Service"})," ","and"," ",e(V,{className:d.learnMore,onClick:Ke,color:"accent",children:"Privacy Policy"})]})})})}):e(ee,{marginTop:r==="backUpAndSync"?"25px":"75px",direction:"row",justifyContent:"center",width:"100%",bgcolor:"var(--foreground)",children:e("div",{className:d.loginFooter,children:l(S,{variant:"body1",color:"secondary",align:"center",children:[a," ",e(S,{display:"inline",children:e(V,{onClick:()=>t("GO_TO_SIGN_UP_START_SCREEN"),color:"accent",children:s})})]})})})},In=b()({signupPolicy:{borderTop:"1px solid var(--card-b)",background:"var(--foreground)",width:"300px",display:"flex",justifyContent:"center",".termius-dark-theme &":{borderColor:"var(--card-c)"}},termiusPolicy:{width:"250px",marginTop:"5px",display:"flex",justifyContent:"center",textAlign:"center",color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--dark-grey-7)"}},loginFooter:{width:"300px"},learnMore:{fontSize:"inherit",lineHeight:"inherit",textTransform:"initial",fontWeight:"bold",display:"inline",padding:0,verticalAlign:"initial"}}),Tn=(o,t)=>i.createElement("svg",{width:62,height:64,viewBox:"0 0 62 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...o},i.createElement("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M50.4639 0.708685C50.8606 -0.236228 52.3516 -0.236228 52.7482 0.708685C53.5716 2.67198 54.74 5.08462 55.908 6.24112C57.0833 7.40472 59.4235 8.56837 61.3047 9.38458C62.2318 9.78683 62.2318 11.2134 61.3047 11.6156C59.4235 12.4317 57.0833 13.5953 55.908 14.7589C54.74 15.9154 53.5716 18.328 52.7482 20.2913C52.3516 21.2362 50.8606 21.2362 50.4639 20.2913C49.6406 18.328 48.4722 15.9154 47.3042 14.7589C46.1358 13.6024 43.6988 12.446 41.7156 11.6306C40.7615 11.2382 40.7615 9.762 41.7156 9.36951C43.6988 8.5541 46.1358 7.39757 47.3042 6.24112C48.4722 5.08462 49.6406 2.67198 50.4639 0.708685ZM27.0827 10.8326C27.5093 9.72247 29.2026 9.72247 29.6292 10.8326C31.4332 15.528 34.9014 23.6934 38.3697 27.1164C41.847 30.5485 49.7038 33.9805 54.18 35.7571C55.273 36.191 55.273 37.8094 54.18 38.2433C49.7033 40.0199 41.847 43.4519 38.3697 46.8835C34.9014 50.3066 31.4332 58.4724 29.6292 63.1676C29.2026 64.2775 27.5093 64.2775 27.0827 63.1676C25.2787 58.4724 21.8104 50.3066 18.3422 46.8835C14.8739 43.4603 6.60066 40.0377 1.84336 38.2571C0.718562 37.8361 0.718562 36.1648 1.84331 35.7438C6.60061 33.9627 14.8739 30.5396 18.3422 27.1164C21.8104 23.6934 25.2787 15.528 27.0827 10.8326ZM8.97285 6.83654C8.45545 5.72115 6.63913 5.72115 6.12172 6.83654C5.53425 8.10284 4.82599 9.3881 4.11773 10.0919C3.40948 10.7957 2.11606 11.4996 0.841788 12.0834C-0.28063 12.5976 -0.280579 14.4025 0.84184 14.9167C2.11612 15.5004 3.40948 16.2043 4.11773 16.9081C4.82599 17.6119 5.53425 18.8972 6.12172 20.1635C6.63913 21.2788 8.45545 21.2788 8.97285 20.1635C9.56027 18.8972 10.2686 17.6119 10.9768 16.9081C11.6945 16.1949 12.957 15.4817 14.1826 14.8935C15.2725 14.3703 15.2725 12.6298 14.1826 12.1066C12.9571 11.5183 11.6945 10.8052 10.9768 10.0919C10.2686 9.3881 9.56027 8.10284 8.97285 6.83654Z",fill:"url(#paint0_linear_704_15058)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_704_15058",x1:-350061e-12,y1:-.727266,x2:65.311,y2:2.85172,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})))),Fn=i.forwardRef(Tn),Mn=i.memo(Fn),Rn=(o,t)=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:64,height:64,viewBox:"0 0 64 64",fill:"none",ref:t,...o},i.createElement("path",{d:"M50.1637 36.4553C53.7205 36.4553 56.7663 33.277 56.7663 29.1619C56.7663 25.1398 53.7165 22.0801 50.1637 22.0801C46.5922 22.0801 43.5338 25.1772 43.5421 29.1993C43.5421 33.277 46.5879 36.4553 50.1637 36.4553ZM39.2291 51.7029H61.0753C62.879 51.7029 64.0036 50.8477 64.0036 49.3939C64.0036 45.1627 58.6544 39.3563 50.1637 39.3563C41.6354 39.3563 36.3008 45.1627 36.3008 49.3939C36.3008 50.8477 37.4067 51.7029 39.2291 51.7029Z",fill:"url(#paint0_linear_2761_21747)"}),i.createElement("mask",{id:"path-2-inside-1_2761_21747",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 15.4472C0 11.9663 2.8218 9.14453 6.30266 9.14453H47.6859C51.1668 9.14453 53.9886 11.9663 53.9886 15.4472V20.1211C52.7946 19.5358 51.4652 19.209 50.058 19.209C44.719 19.209 40.5147 23.9131 40.5243 29.5491C40.5252 32.5914 41.7373 35.4125 43.7097 37.3578C41.6339 38.0927 39.8213 39.1652 38.3255 40.4399C35.5527 42.8029 33.5898 46.1364 33.5898 49.5145C33.5898 50.258 33.7231 50.9857 33.9917 51.6588H6.30266C2.8218 51.6588 0 48.837 0 45.3562V15.4472ZM53.9886 40.0647V40.0737C52.7716 39.7671 51.4534 39.5948 50.0449 39.5948C47.69 39.5948 45.5895 40.0721 43.7923 40.8518C45.0071 40.3234 46.3607 39.9331 47.838 39.7352C48.5499 39.6398 49.2904 39.5891 50.058 39.5891C50.823 39.5891 51.5613 39.6399 52.2712 39.7355C52.8638 39.8152 53.4366 39.9262 53.9886 40.0647ZM53.9886 24.0219C52.8972 23.0664 51.5222 22.506 50.058 22.506C49.2473 22.506 48.4642 22.6781 47.7412 22.9937C48.4605 22.6817 49.2391 22.5117 50.0449 22.5117C51.515 22.5117 52.8951 23.0766 53.9886 24.0391V24.0219ZM53.9886 35.1462V35.1523C53.4789 35.6133 52.9073 35.9859 52.2934 36.252C52.9076 35.984 53.4792 35.6093 53.9886 35.1462ZM15.2397 37.3569C13.1645 38.8793 11.5718 35.5244 13.454 34.1993L19.2695 30.0832L13.454 25.9954C11.5477 24.6421 13.1645 21.3154 15.2397 22.8378L22.1894 27.9124C23.4924 28.871 23.5648 31.2673 22.1894 32.2822L15.2397 37.3569ZM25.1816 39.133C24.3129 39.133 23.6372 38.3154 23.6372 37.3287C23.6372 36.3137 24.3129 35.4962 25.1816 35.4962H34.3754C35.2441 35.4962 35.9198 36.3137 35.9198 37.3287C35.9198 38.3154 35.2441 39.133 34.3754 39.133H25.1816Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 15.4472C0 11.9663 2.8218 9.14453 6.30266 9.14453H47.6859C51.1668 9.14453 53.9886 11.9663 53.9886 15.4472V20.1211C52.7946 19.5358 51.4652 19.209 50.058 19.209C44.719 19.209 40.5147 23.9131 40.5243 29.5491C40.5252 32.5914 41.7373 35.4125 43.7097 37.3578C41.6339 38.0927 39.8213 39.1652 38.3255 40.4399C35.5527 42.8029 33.5898 46.1364 33.5898 49.5145C33.5898 50.258 33.7231 50.9857 33.9917 51.6588H6.30266C2.8218 51.6588 0 48.837 0 45.3562V15.4472ZM53.9886 40.0647V40.0737C52.7716 39.7671 51.4534 39.5948 50.0449 39.5948C47.69 39.5948 45.5895 40.0721 43.7923 40.8518C45.0071 40.3234 46.3607 39.9331 47.838 39.7352C48.5499 39.6398 49.2904 39.5891 50.058 39.5891C50.823 39.5891 51.5613 39.6399 52.2712 39.7355C52.8638 39.8152 53.4366 39.9262 53.9886 40.0647ZM53.9886 24.0219C52.8972 23.0664 51.5222 22.506 50.058 22.506C49.2473 22.506 48.4642 22.6781 47.7412 22.9937C48.4605 22.6817 49.2391 22.5117 50.0449 22.5117C51.515 22.5117 52.8951 23.0766 53.9886 24.0391V24.0219ZM53.9886 35.1462V35.1523C53.4789 35.6133 52.9073 35.9859 52.2934 36.252C52.9076 35.984 53.4792 35.6093 53.9886 35.1462ZM15.2397 37.3569C13.1645 38.8793 11.5718 35.5244 13.454 34.1993L19.2695 30.0832L13.454 25.9954C11.5477 24.6421 13.1645 21.3154 15.2397 22.8378L22.1894 27.9124C23.4924 28.871 23.5648 31.2673 22.1894 32.2822L15.2397 37.3569ZM25.1816 39.133C24.3129 39.133 23.6372 38.3154 23.6372 37.3287C23.6372 36.3137 24.3129 35.4962 25.1816 35.4962H34.3754C35.2441 35.4962 35.9198 36.3137 35.9198 37.3287C35.9198 38.3154 35.2441 39.133 34.3754 39.133H25.1816Z",fill:"url(#paint1_linear_2761_21747)"}),i.createElement("path",{d:"M53.9886 20.1211L52.6015 22.9507L57.1399 25.1754V20.1211H53.9886ZM40.5243 29.5491L43.6756 29.5481L43.6756 29.5437L40.5243 29.5491ZM43.7097 37.3578L44.7614 40.3284L49.5063 38.6485L45.9225 35.114L43.7097 37.3578ZM38.3255 40.4399L40.3695 42.8384H40.3695L38.3255 40.4399ZM33.9917 51.6588V54.8101H38.6423L36.9186 50.4908L33.9917 51.6588ZM53.9886 40.0737L53.2186 43.1295L57.1399 44.1176V40.0737H53.9886ZM53.9886 40.0647H57.1399V37.6067L54.7559 37.0082L53.9886 40.0647ZM43.7923 40.8518L42.5352 37.9621L45.0466 43.7428L43.7923 40.8518ZM47.838 39.7352L47.4195 36.6118L47.838 39.7352ZM52.2712 39.7355L51.8508 42.8586H51.8508L52.2712 39.7355ZM53.9886 24.0219H57.1399V22.5924L56.0644 21.6508L53.9886 24.0219ZM47.7412 22.9937L46.4806 20.1055L48.995 25.8848L47.7412 22.9937ZM53.9886 24.0391L51.9064 26.4046L57.1399 31.0111V24.0391H53.9886ZM53.9886 35.1523L56.1025 37.4895L57.1399 36.5512V35.1523H53.9886ZM53.9886 35.1462H57.1399V28.0211L51.8684 32.8147L53.9886 35.1462ZM52.2934 36.252L51.0329 33.3637L53.5468 39.1433L52.2934 36.252ZM13.454 34.1993L15.2681 36.7762L15.2746 36.7716L13.454 34.1993ZM15.2397 37.3569L13.3813 34.8118L13.3757 34.8159L15.2397 37.3569ZM19.2695 30.0832L21.0901 32.6555L24.7369 30.0744L21.0818 27.5051L19.2695 30.0832ZM13.454 25.9954L11.6299 28.5651L11.6358 28.5693L11.6418 28.5735L13.454 25.9954ZM15.2397 22.8378L13.3757 25.3788L13.3813 25.3829L15.2397 22.8378ZM22.1894 27.9124L24.0567 25.3739L24.0477 25.3674L22.1894 27.9124ZM22.1894 32.2822L24.0477 34.8273L24.0541 34.8227L24.0604 34.818L22.1894 32.2822ZM6.30266 5.9932C1.08136 5.9932 -3.15133 10.2259 -3.15133 15.4472H3.15133C3.15133 13.7068 4.56223 12.2959 6.30266 12.2959V5.9932ZM47.6859 5.9932H6.30266V12.2959H47.6859V5.9932ZM57.1399 15.4472C57.1399 10.2259 52.9072 5.9932 47.6859 5.9932V12.2959C49.4263 12.2959 50.8372 13.7068 50.8372 15.4472H57.1399ZM57.1399 20.1211V15.4472H50.8372V20.1211H57.1399ZM50.058 22.3603C50.9697 22.3603 51.8259 22.5705 52.6015 22.9507L55.3756 17.2914C53.7632 16.501 51.9607 16.0577 50.058 16.0577V22.3603ZM43.6756 29.5437C43.6685 25.3798 46.7202 22.3603 50.058 22.3603V16.0577C42.7178 16.0577 37.3609 22.4463 37.373 29.5544L43.6756 29.5437ZM45.9225 35.114C44.5635 33.7737 43.6763 31.7659 43.6756 29.5481L37.373 29.55C37.3741 33.4168 38.9112 37.0514 41.4969 39.6015L45.9225 35.114ZM40.3695 42.8384C41.574 41.8119 43.0507 40.9341 44.7614 40.3284L42.658 34.3871C40.2171 35.2513 38.0686 36.5184 36.2815 38.0414L40.3695 42.8384ZM36.7412 49.5145C36.7412 47.329 38.0644 44.8028 40.3695 42.8384L36.2815 38.0414C33.0411 40.8029 30.4385 44.9438 30.4385 49.5145H36.7412ZM36.9186 50.4908C36.8071 50.2114 36.7412 49.8825 36.7412 49.5145H30.4385C30.4385 50.6336 30.6391 51.7601 31.0648 52.8268L36.9186 50.4908ZM6.30266 54.8101H33.9917V48.5075H6.30266V54.8101ZM-3.15133 45.3562C-3.15133 50.5775 1.08138 54.8101 6.30266 54.8101V48.5075C4.56222 48.5075 3.15133 47.0966 3.15133 45.3562H-3.15133ZM-3.15133 15.4472V45.3562H3.15133V15.4472H-3.15133ZM57.1399 40.0737V40.0647H50.8372V40.0737H57.1399ZM50.0449 42.7461C51.195 42.7461 52.2545 42.8866 53.2186 43.1295L54.7586 37.0179C53.2887 36.6475 51.7118 36.4434 50.0449 36.4434V42.7461ZM45.0466 43.7428C46.4481 43.1347 48.1218 42.7461 50.0449 42.7461V36.4434C47.2583 36.4434 44.7308 37.0095 42.538 37.9609L45.0466 43.7428ZM47.4195 36.6118C45.6515 36.8486 44.0157 37.318 42.5352 37.9621L45.0495 43.7416C45.9984 43.3287 47.0699 43.0176 48.2565 42.8586L47.4195 36.6118ZM50.058 36.4377C49.1514 36.4377 48.271 36.4977 47.4195 36.6118L48.2565 42.8586C48.8287 42.7819 49.4295 42.7404 50.058 42.7404V36.4377ZM52.6916 36.6123C51.8416 36.4979 50.9628 36.4377 50.058 36.4377V42.7404C50.6832 42.7404 51.281 42.7819 51.8508 42.8586L52.6916 36.6123ZM54.7559 37.0082C54.0897 36.841 53.4011 36.7078 52.6916 36.6123L51.8508 42.8586C52.3265 42.9226 52.7835 43.0113 53.2213 43.1212L54.7559 37.0082ZM56.0644 21.6508C54.4448 20.2329 52.3452 19.3547 50.058 19.3547V25.6573C50.6993 25.6573 51.3497 25.9 51.9128 26.3929L56.0644 21.6508ZM50.058 19.3547C48.7968 19.3547 47.5856 19.6231 46.4806 20.1055L49.0019 25.8818C49.3427 25.7331 49.6978 25.6573 50.058 25.6573V19.3547ZM48.995 25.8848C49.3339 25.7379 49.6868 25.663 50.0449 25.663V19.3604C48.7913 19.3604 47.5871 19.6256 46.4874 20.1025L48.995 25.8848ZM50.0449 25.663C50.6886 25.663 51.3418 25.9076 51.9064 26.4046L56.0707 21.6736C54.4484 20.2456 52.3413 19.3604 50.0449 19.3604V25.663ZM57.1399 24.0391V24.0219H50.8372V24.0391H57.1399ZM57.1399 35.1523V35.1462H50.8372V35.1523H57.1399ZM53.5468 39.1433C54.4906 38.7342 55.3503 38.1698 56.1025 37.4895L51.8747 32.8152C51.6075 33.0569 51.3239 33.2376 51.04 33.3607L53.5468 39.1433ZM51.8684 32.8147C51.6011 33.0577 51.3173 33.2396 51.0329 33.3637L53.5538 39.1403C54.4978 38.7283 55.3573 38.161 56.1087 37.4776L51.8684 32.8147ZM11.64 31.6225C9.11474 33.4002 9.09653 36.4291 10.0655 38.297C10.5745 39.2783 11.5128 40.298 12.931 40.7153C14.4532 41.1631 15.9448 40.7479 17.1037 39.8978L13.3757 34.8159C13.4969 34.727 14.0113 34.4633 14.71 34.6689C15.3047 34.8439 15.5734 35.2275 15.6602 35.3948C15.7521 35.572 15.7923 35.773 15.7519 36.0056C15.7024 36.2901 15.5304 36.5915 15.2681 36.7762L11.64 31.6225ZM17.449 27.511L11.6335 31.6271L15.2746 36.7716L21.0901 32.6555L17.449 27.511ZM11.6418 28.5735L17.4573 32.6614L21.0818 27.5051L15.2663 23.4172L11.6418 28.5735ZM17.1037 20.2969C15.9471 19.4484 14.4623 19.0341 12.9462 19.47C11.5289 19.8776 10.5809 20.8875 10.0633 21.874C9.06894 23.7689 9.12192 26.7847 11.6299 28.5651L15.2782 23.4256C15.5179 23.5958 15.69 23.8828 15.7407 24.1715C15.7824 24.4084 15.7413 24.6176 15.6443 24.8025C15.5519 24.9785 15.2781 25.3576 14.688 25.5272C13.9991 25.7253 13.4947 25.466 13.3757 25.3787L17.1037 20.2969ZM24.0477 25.3674L17.0981 20.2928L13.3813 25.3829L20.331 30.4575L24.0477 25.3674ZM24.0604 34.818C25.7502 33.5711 26.3621 31.6429 26.3449 30.0425C26.328 28.461 25.6908 26.576 24.0567 25.3739L20.322 30.4509C20.1501 30.3245 20.0792 30.1957 20.0577 30.1478C20.0374 30.1026 20.0425 30.0925 20.0427 30.1099C20.0428 30.1269 20.0378 30.1073 20.063 30.0494C20.0914 29.9841 20.1654 29.8594 20.3183 29.7465L24.0604 34.818ZM17.0981 39.9019L24.0477 34.8273L20.331 29.7372L13.3813 34.8118L17.0981 39.9019ZM20.4859 37.3287C20.4859 39.544 22.1013 42.2843 25.1816 42.2843V35.9817C25.7934 35.9817 26.2492 36.2817 26.4886 36.5645C26.7168 36.834 26.7885 37.114 26.7885 37.3287H20.4859ZM25.1816 32.3448C22.0728 32.3448 20.4859 35.119 20.4859 37.3287H26.7885C26.7885 37.5093 26.7293 37.7809 26.4993 38.0555C26.2571 38.3446 25.7961 38.6475 25.1816 38.6475V32.3448ZM34.3754 32.3448H25.1816V38.6475H34.3754V32.3448ZM39.0711 37.3287C39.0711 35.119 37.4842 32.3448 34.3754 32.3448V38.6475C33.7608 38.6475 33.2998 38.3446 33.0576 38.0555C32.8276 37.7809 32.7684 37.5093 32.7684 37.3287H39.0711ZM34.3754 42.2843C37.4557 42.2843 39.0711 39.544 39.0711 37.3287H32.7684C32.7684 37.114 32.8401 36.834 33.0683 36.5645C33.3078 36.2817 33.7636 35.9817 34.3754 35.9817V42.2843ZM25.1816 42.2843H34.3754V35.9817H25.1816V42.2843Z",fill:"url(#paint2_linear_2761_21747)",mask:"url(#path-2-inside-1_2761_21747)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_2761_21747",x1:36.3008,y1:21.7435,x2:65.489,y2:23.2875,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})),i.createElement("linearGradient",{id:"paint1_linear_2761_21747",x1:-304827e-12,y1:8.66142,x2:56.7497,y2:12.738,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})),i.createElement("linearGradient",{id:"paint2_linear_2761_21747",x1:-304827e-12,y1:8.66142,x2:56.7497,y2:12.738,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#2091F6"}),i.createElement("stop",{offset:1,stopColor:"#21B568"})))),_n=i.forwardRef(Rn),Pn=i.memo(_n),Z={vaults:{signup:{title:"Set up your vault",description:l(A.Fragment,{children:["Back up your connections and credentials in an encrypted cloud ",e("br",{}),"vault and access them on all your devices"]})},login:{title:"Unlock your vault",description:l(A.Fragment,{children:["Log in to Termius to unlock your encrypted ",e("br",{}),"cloud vault"]})}},aiPower:{signup:{title:"Enable AI in Termius",description:l(A.Fragment,{children:["Generate Snippets and convert text to shell commands in the terminal"," ",e("br",{}),"with AI. 1000 prompts per month free for users with an account"]})},login:{title:"Enable AI in Termius",description:l(A.Fragment,{children:["Generate Snippets and convert text to shell commands in the terminal"," ",e("br",{}),"with AI. 1000 prompts per month free for users with an account"]})}},terminalSharing:{signup:{title:l(A.Fragment,{children:["Enable ",e("mark",{children:"Multiplayer"})," in Termius"]}),description:"Share a terminal session with your teammates to troubleshoot together"},login:{title:l(A.Fragment,{children:["Enable ",e("mark",{children:"Multiplayer"})," in Termius"]}),description:"Share a terminal session with your teammates to troubleshoot together"}},backUpAndSync:{signup:{title:l(A.Fragment,{children:["Create account",e("br",{}),"to set up your encrypted cloud vault"]}),description:l(A.Fragment,{children:["Backup, sync all you data in an encrypted cloud vault and access it from ",e("br",{}),"your mobile and desktop"]})},login:{title:"Unlock your vault",description:l(A.Fragment,{children:["Log in to Termius to unlock your encrypted ",e("br",{}),"cloud vault"]})}},shareAndInvite:{signup:{title:l(A.Fragment,{children:["Create account",e("br",{}),"to set up your team vault"]}),description:l(A.Fragment,{children:["Backup, sync all you data in an encrypted cloud vault and access it from ",e("br",{}),"your mobile and desktop"]})},login:{title:"Unlock your vault",description:l(A.Fragment,{children:["Log in to Termius to unlock your encrypted ",e("br",{}),"cloud vault"]})}}},ae={vaults:{startScreen:e(X,{}),emailScreen:e(X,{})},aiPower:{startScreen:e(Mn,{}),emailScreen:e(q,{})},terminalSharing:{startScreen:e(Pn,{}),emailScreen:e(q,{})},backUpAndSync:{startScreen:e(X,{}),emailScreen:e(q,{})},shareAndInvite:{startScreen:e(X,{}),emailScreen:e(q,{})}},Nn=2,An=o=>{const{send:t,state:n}=o,{classes:a}=Wn(),{error:s,email:r,emailVerificationCode:d,emailVerificationRequestDelay:h,emailVerificationRequestReplays:u,emailVerificationRequestTimestamp:m,showRecaptcha:g}=n.context,C=O(),f=i.useRef(null),{remainTime:y}=Zt({since:m,timer:h}),c=i.useCallback(async L=>{if(L){if(!f.current)return;const E=await f.current.getToken();t("CHANGE_CAPTCHA",{data:E})}t("RESEND_EMAIL_VERIFICATION_CODE"),C(re("resendVerificationCodeButtonPressed"))},[C,t]),p=async L=>{L.preventDefault(),t("CHECK_IF_EMAIL_VERIFICATION_CODE_IS_VALID"),C(re("verificationCodeSubmitted"))},w=L=>{t("CHANGE_EMAIL_VERIFICATION_CODE",{data:L.target.value})},x=!y&&m&&u||Ce(s),v=!x&&y>0,_=u>Nn||Ce(s),k=!!s&&!Ce(s);return Gt(()=>{n.matches("idle.unknown")||C(re("verifyYourEmailScreenOpened"))}),i.useEffect(()=>{g&&c(!0)},[g,c]),l("form",{className:a.form,onSubmit:p,children:[e(Me,{title:"Verify your email",description:l(A.Fragment,{children:["A verification code has been sent to your inbox.",e("br",{}),"Enter it below to verify your email address."]}),hasDescription:!0,hasWiderTextContainer:!0,icon:e(q,{}),email:r}),l(J,{className:a.verificationCodeSection,children:[e(oe,{autoFocus:!0,name:"verificationCode",placeholder:"Verification code",value:d,onChange:w,fullWidth:!0,error:k,alertIcons:!1}),e(ne,{className:a.errorWrapper,errorMessage:s==null?void 0:s.message,enter:k}),e(R,{className:a.signUpButton,type:"submit",progress:$t(n),disabled:!d,color:"accent",onClick:p,children:"Continue"}),v&&e(J,{className:a.resendTimer,children:l(S,{variant:"body1",color:"secondary",children:["Resend in ",Math.round(y/1e3)," seconds"]})}),x&&e(R,{size:"medium",variant:"text",progress:ye(n),onClick:()=>c(g),className:a.resendButton,children:"Resend"}),_&&l(J,{textAlign:"center",marginTop:"50px",fontSize:"12px",children:["Didnt get the code?"," ",e(V,{className:a.contactLink,onClick:Je,color:"accent",children:"Contact support"}),"."]})]}),g&&e(me,{apiRef:f})]})},Wn=b()({form:{width:"100%",margin:"0 auto",color:"var(--main)",display:"flex",flexDirection:"column"},verificationCodeSection:{display:"flex",flexDirection:"column",width:"300px",justifyContent:"flex-start",margin:"0 auto"},signUpButton:{width:"300px",margin:"20px auto 0 auto"},resendTimer:{display:"flex",textAlign:"center",height:"36px",marginTop:"10px",alignItems:"center",justifyContent:"center"},resendButton:{marginTop:"10px"},contactLink:{fontSize:"inherit",lineHeight:"inherit",textTransform:"initial",display:"inline",padding:0,verticalAlign:"initial"},errorWrapper:{color:"var(--red)",marginTop:"5px"}});function Vn({children:o,showBack:t,showBackButtonLabel:n,backButtonLabel:a,handleBackButtonClick:s}){const{classes:r}=zn();return l("div",{className:r.root,children:[t&&e(se,{className:r.backButton,onClick:s,hasLabel:n,children:e(S,{variant:"body1",color:"secondary",className:r.backButtonTitle,children:a})}),o]})}const zn=b()((o,t,n)=>({root:{width:"100%"},backButton:{position:"absolute",height:"18px",zIndex:5,left:"15px",top:"15px",color:"var(--secondary)",fontWeight:500,cursor:"pointer !important","@media (max-height: 580px)":{top:"30px"},"&:hover":{color:"var(--light-grey-3)",".termius-dark-theme &":{color:"var(--dark-grey-6)"}},[`&:hover .${n.backButtonTitle}`]:{color:"var(--light-grey-3)",".termius-dark-theme &":{color:"var(--dark-grey-6)"}}},backButtonTitle:{}}));function Bn(o){const{isSignUpStartScreen:t,onSignInWithEnterpriseSso:n,loginCallback:a,onSignedUp:s,onSignInWithSso:r}=o,[d,h]=$e({onSignedUp:s,loginCallback:a,onSignInWithEnterpriseSso:n,onSignInWithSso:r,isWelcomeFlow:!0,isSignUpStartScreen:t,isSignUpFlow:t});return e(Dn,{...o,state:d,send:h})}function Dn(o){const{state:t,send:n,onFormUpdated:a,isReLogin:s,isSignUpStartScreen:r,resetSsoData:d,authorizationType:h,funnelID:u,ssoData:m,showLoginButton:g,actionDescription:C,actionButtonText:f,backButtonLabel:y="About vault",flowVariant:c="vaults",createAccountScreenType:p,teamWizardEntryType:w}=o,x=O(),{isSsoSignUp:v,isSsoLogin:_}=m,{isSignUpFlow:k,password:L,email:E,error:N}=t.context,z=h==="login-otp-token"&&!t.matches("otpFlow.loginOtpRequest")&&!t.matches("otpFlow.loginOtpSuccess");K(()=>{n("START_WELCOME_FLOW")}),i.useEffect(()=>{z&&n("GO_TO_OTP_SCREEN")},[n,z,t]),i.useEffect(()=>{n("CLEAR_ERROR")},[r,n]),i.useEffect(()=>{a(E,L)},[E,a,L]);const I=jt(N),D=cn(k,t),U=Sn(v,t),G=dn(k,t),M=un(k,t),P=mn(t),$=hn(t,U),j=pn(k,t),Re=h==="login-otp-token",rt=gn(t,_,I,Re),st=Cn(t,Re),lt=wn(t,v,_),ct=yn(t),dt=xn(t),ut=D||G,mt=fn(_,t),_e=U||mt,ht=D&&!_e,pt=G&&!_e,gt=()=>{var Pe;if(t.matches("welcomeFlow.logInStart")||t.matches("welcomeFlow.signUpStart")){(Pe=o.onBackButtonClick)==null||Pe.call(o);return}if(t.matches("welcomeFlow.logInPassword")&&I){n("CLEAR_ERROR");return}m&&d(),n("BACK")},Ct=()=>{c==="shareAndInvite"&&w&&u&&x(re("createTeamWizardViewOpened",{createTeamWizardStep:"Set Password",openedFrom:w,teamTrialFunnelID:u,trial:"yes"}))};return l(Vn,{showBack:dt,handleBackButtonClick:gt,showBackButtonLabel:ut,backButtonLabel:y,children:[e(W,{in:ht,justifyContent:"center",top:40,children:e(Oe,{send:n,state:t,title:Z[c].signup.title,description:Z[c].signup.description,isSignUp:!!k,funnelID:u,showLoginButton:g,icon:ae[c].startScreen,actionDescription:C,actionButtonText:f,createAccountScreenType:p,flowVariant:c})}),e(W,{in:pt,justifyContent:"center",top:40,children:e(Oe,{send:n,state:t,title:Z[c].login.title,description:Z[c].login.description,isSignUp:!!k,funnelID:u,hasWiderTextContainer:!0,showLoginButton:g,icon:ae[c].startScreen,actionDescription:C,actionButtonText:f,createAccountScreenType:p,flowVariant:c})}),e(W,{in:lt,justifyContent:"center",top:40,children:e(vn,{ssoProvider:t.context.ssoProvider})}),e(W,{in:M,justifyContent:"normal",top:40,children:e(He,{state:t,send:n,title:Z[c].signup.title,description:Z[c].signup.description,icon:ae[c].emailScreen})}),e(W,{in:P,justifyContent:"normal",top:40,children:e(An,{state:t,send:n})}),e(W,{in:I,justifyContent:"normal",top:40,children:e(en,{state:t,send:n})}),e(W,{in:j,justifyContent:"normal",top:40,children:e(He,{state:t,send:n,title:Z[c].login.title,description:Z[c].login.description,icon:ae[c].emailScreen})}),e(W,{in:$,justifyContent:"normal",top:40,children:e(Go,{title:o.signUpPasswordTitle,send:n,state:t,ssoData:m,sendAnalytics:Ct})}),e(W,{in:rt,justifyContent:"normal",top:40,children:e(Uo,{state:t,send:n,isReLogin:s,ssoData:m})}),e(W,{in:ct,justifyContent:"normal",top:40,children:e(sn,{send:n,state:t})}),e(W,{in:st,justifyContent:"normal",top:40,children:e(on,{state:t,send:n,isReLogin:s})})]})}function Hn(o){var r,d,h;const{defaultAuthorizationType:t,...n}=o,{state:a,actions:s}=te();return e(Bn,{onSignedUp:s.handleSignUp,onSignInWithSso:s.signInWithSso,resetSsoData:s.resetSsoData,onFormUpdated:s.updateForm,loginCallback:s.handleSignIn,onSignInWithEnterpriseSso:s.signInWithEnterpriseSso,isSignUpStartScreen:o.defaultAuthorizationType==="signup-welcome",ssoData:{ssoEmail:((r=a.ssoData)==null?void 0:r.email)??"",firebaseToken:((d=a.ssoData)==null?void 0:d.firebaseToken)??"",accessToken:a.accessToken,isSsoLogin:["sso-login","sso-link"].includes(a.authorizationType),isSsoSignUp:a.authorizationType==="sso-signup",provider:(h=a.ssoData)==null?void 0:h.provider},authorizationType:a.authorizationType,...n})}function On(o){const{defaultAuthorizationType:t="signup",isReLogin:n=!1,onSignedUp:a=()=>{},onLoggedIn:s=()=>{},initialEmail:r="",displaySsoImage:d=!0,onSsoDisplayed:h=()=>{},from:u,upgradeToProFunnelID:m,welcomeFlowFunnelID:g,showLoginButton:C,flowVariant:f,createAccountScreenType:y,teamWizardEntryType:c}=o,p=O(),w=qt({from:u,upgradeToProFunnelID:m,isReLogin:n,initialEmail:r,defaultAuthorizationType:t,onSignedUp:a,onLoggedIn:s,onSsoDisplayed:h});switch(K(()=>{w.state.currentScreen!=="welcome-flow"&&p(et({loginType:n?"token expired":"login"}))}),w.state.currentScreen){case"default":return e(Q,{value:w,children:e(ko,{isReLogin:n,initialEmail:r,defaultAuthorizationType:t})});case"welcome-flow":return e(Q,{value:w,children:e(Hn,{flowVariant:f,onBackButtonClick:o.onBackButtonClick,showLoginButton:C,isReLogin:n,defaultAuthorizationType:t,funnelID:g,backButtonLabel:o.backButtonLabel,actionButtonText:o.actionButtonText,actionDescription:o.actionDescription,signUpPasswordTitle:o.signUpPasswordTitle,createAccountScreenType:y,teamWizardEntryType:c})});case"sso":return e(Q,{value:w,children:e(Bo,{defaultAuthorizationType:t,displaySsoImage:d,isReLogin:n})});case"otp-token":return e(Q,{value:w,children:e(ao,{defaultAuthorizationType:t})});case"re-login":return e(Q,{value:w,children:e(lo,{defaultAuthorizationType:t,initialEmail:r})});default:return null}}const Kn=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"}));export{On as A,X as M,eo as R,Yo as a,Kn as b};
//# sourceMappingURL=AuthorizationForm-e3585f38.js.map
