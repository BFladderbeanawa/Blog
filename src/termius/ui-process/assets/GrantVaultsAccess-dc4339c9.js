import{r as c,bg as k,bl as l,bq as m,bn as n,bz as V,bp as Ne,bs as y,x4 as X,bh as P,jm as Re,br as O,cF as ue,cH as Pe,c0 as w,d3 as Ve,dB as D,dC as _,dl as De,qf as Oe,vV as W,bi as M,cv as Q,x5 as me,dn as Fe,x6 as pe,x7 as Le,bQ as H,bV as We,x8 as Be,gm as Ue,x9 as Ge,lk as je,b1 as he,os as ze,qS as $e,xa as qe,cW as He,v1 as Ze,bR as Qe,bS as Je,bT as Ke,ga as Ye,xb as ge,cL as Xe,xc as et,wJ as tt,xd as B,xe as nt,us as ee,xf as fe,aV as rt,xg as G,nk as be,i_ as st,cy as at,xh as ve,i6 as ot,qa as it,c4 as ct,uu as lt,xi as dt,xj as ut,xk as mt,qn as pt,ee as se,xl as ht,xm as gt,dL as ft,co as L,p2 as bt,xn as vt,xo as yt}from"./reconnectSaga-e33541d6.js";import{u as xt}from"./fadeIn-42e8fead.js";import{M as wt}from"./External Link.react-a980ba5b.js";import{U as ye}from"./UserListItem-85567f7e.js";import{r as ae}from"./removeElementByIndex-6c99a5b8.js";import{S as Ct}from"./SelectMemberRole-56b5fb05.js";import{L as St}from"./ListItem-391d485c.js";import"./Divider-e92035bb.js";var xe={exports:{}},Mt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Et=Mt,It=Et;function we(){}function Ce(){}Ce.resetWarningCache=we;var _t=function(){function t(a,s,o,p,i,u){if(u!==It){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Ce,resetWarningCache:we};return r.PropTypes=r,r};xe.exports=_t();var At=xe.exports;const Tt=(t,e)=>c.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},c.createElement("g",{clipPath:"url(#clip0_282_36826)"},c.createElement("path",{d:"M7.33816 13.9957C11.1054 13.9957 14.2156 10.8261 14.2156 6.99785C14.2156 3.16399 11.0999 0 7.33271 0C3.57212 0 0.461914 3.16399 0.461914 6.99785C0.461914 10.8261 3.57758 13.9957 7.33816 13.9957ZM7.33816 12.6172C4.27401 12.6172 1.82189 10.1162 1.82189 6.99785C1.82189 3.87951 4.26856 1.37848 7.33271 1.37848C10.3968 1.37848 12.8611 3.87951 12.8611 6.99785C12.8611 10.1162 10.4023 12.6172 7.33816 12.6172Z",fill:"#798C94"}),c.createElement("path",{d:"M7.33819 10.4156C7.67902 10.4156 7.92728 10.1739 7.92728 9.83189V6.62998L7.86688 5.23158L8.47997 6.00497L9.22236 6.79109C9.31848 6.90056 9.45986 6.96449 9.62189 6.96449C9.93313 6.96449 10.1678 6.72943 10.1678 6.42309C10.1678 6.25888 10.1121 6.1284 10.0052 6.01594L7.81119 3.74904C7.66798 3.59959 7.5206 3.52765 7.33819 3.52765C7.16244 3.52765 7.02052 3.59404 6.87181 3.74904L4.67119 6.01594C4.56548 6.1284 4.52075 6.25888 4.52075 6.42309C4.52075 6.72943 4.74988 6.96449 5.06115 6.96449C5.21891 6.96449 5.3603 6.89501 5.46069 6.79109L6.20972 5.99887L6.8107 5.23836L6.74906 6.62998V9.83189C6.74906 10.1739 7.00401 10.4156 7.33819 10.4156Z",fill:"#798C94"})),c.createElement("defs",null,c.createElement("clipPath",{id:"clip0_282_36826"},c.createElement("rect",{width:14,height:14,fill:"white",transform:"translate(0.461914)"})))),kt=c.forwardRef(Tt),Nt=c.memo(kt),K=t=>{const{name:e,membersCount:r,memberRole:a}=t,{classes:s}=Rt();return l(m,{padding:"10px 20px 10px 10px",direction:"row",alignItems:"center",justifyContent:"space-between",borderRadius:"15px",color:"var(--light-grey-3)",className:s.root,children:[l(m,{direction:"row",gap:"10px",children:[l(m,{direction:"row",gap:"5px",alignItems:"center",children:[n(V,{size:24,icon:n(Ne,{})}),n(y,{variant:"body1",children:e})]}),l(m,{direction:"row",gap:"5px",alignItems:"center",children:[n(V,{size:16,icon:n(X,{})}),n(y,{variant:"body1",children:r})]})]}),n(y,{variant:"body1",children:a})]})},Rt=k()({root:{background:"var(--card-b)",color:"var(--light-grey-3)",".termius-dark-theme &":{background:"var(--dark-grey-1)",color:"var(--dark-grey-6)"}}}),Pt=t=>{const{onUpgradeClick:e,state:r}=t,{businessFunnelID:a,currentGrantStep:s,totalGrantSteps:o}=r.context,{classes:p}=Se(),i=P(),[u,h]=c.useState(!1),b=v=>{if(v){i(w("promotionDismissed",{promotionLocation:"Grant Access",promotionType:"Business Vaults",trialDaysLeft:void 0,sideMenuTeamTrialPromoType:void 0,dismissForever:void 0}));return}i(w("newVaultButtonPressed",{newVaultSource:"Grant Permissions Screen",eventTeamRole:"Owner"})),i(w("promotionShown",{promotionType:"Business Vaults",promotionLocation:"Grant Access",sideMenuTeamTrialPromoType:void 0,trialDaysLeft:void 0})),i(w("businessFunnelStarted",{businessFunnelID:a,businessFunnelOpenedFrom:"Grant Access",memberPosition:s,teamJoinedMembers:o})),i(w("hitMultipleVaultsPromotionPage",{eventTeamRole:"Owner"}))};return l(m,{bgcolor:"var(--background)",borderRadius:"15px",marginTop:"10px",children:[n(Vt,{name:"Add shared vaults to give different members access to different data",isPromoOpened:u,onClick:()=>{h(v=>(b(v),!v))}}),n(Re,{in:u,children:l(m,{position:"relative",children:[l(m,{direction:"row",gap:"10px",alignItems:"center",borderRadius:"15px",width:"493px",className:p.promoOverlay,children:[n(y,{variant:"body1",children:"Your current plan supports only one Team vault. Upgrade to Business plan to create shared vaults."}),n(O,{color:"accent",variant:"text",rightIcon:n(wt,{width:14,height:14}),className:p.upgradeNowButton,onClick:e,children:n(y,{variant:"subtitle2",children:"Upgrade now"})})]}),l(m,{padding:"10px 15px 15px 15px",gap:"10px",bgcolor:"var(--background)",borderRadius:"0px 0px 15px 15px",className:p.blurredSection,children:[n(K,{name:"Production",membersCount:"2",memberRole:"no access"}),n(K,{name:"Staging",membersCount:"4",memberRole:"can view"}),n(K,{name:"Dev",membersCount:"5",memberRole:"can view"})]})]})})]})},Vt=({name:t,onClick:e,isPromoOpened:r})=>{const{classes:a,cx:s}=Se();return l(m,{direction:"row",alignItems:"center",justifyContent:"space-between",padding:"10px 15px 10px 10px",borderRadius:r?"15px 15px 0px 0px":"15px",className:a.addVaultPromo,onClick:e,children:[l(m,{direction:"row",alignItems:"center",gap:"5px",color:"var(--main)",children:[n(V,{size:24,icon:n(ue,{width:14,height:14})}),n(y,{variant:"subtitle2",color:"main",children:t}),n(V,{size:24,icon:n(Nt,{})})]}),n(Pe,{width:14,height:14,className:s(a.chevron,{[a.chevronOpened]:r})})]})},Se=k()({promoOverlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1,padding:"15px 20px",background:"var(--foreground)"},upgradeNowButton:{height:"24px",padding:"0px 10px",cursor:"pointer !important"},blurredSection:{filter:"blur(0.8px)"},addVaultPromo:{cursor:"pointer","&:hover":{background:"var(--light-grey-transparent-10)",".termius-dark-theme &":{background:"var(--black-a15)"}}},chevron:{color:"var(--secondary)",transition:"transform 0.2s"},chevronOpened:{transform:"rotate(180deg)"}}),Dt=(t,e)=>c.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},c.createElement("path",{d:"M1.99058 10.7634C1.68476 10.7634 1.44321 10.6881 1.26593 10.5374C1.08864 10.3867 1 10.1895 1 9.94571C1 9.62216 1.12632 9.31634 1.37895 9.02825C1.63158 8.73573 1.89751 8.45208 2.17673 8.17729C2.31856 8.03102 2.42936 7.84266 2.50914 7.61219C2.58892 7.38172 2.64654 7.13352 2.68199 6.86759C2.72188 6.59723 2.75291 6.3313 2.77507 6.06981C2.79723 5.28532 2.8903 4.58283 3.05429 3.96233C3.22271 3.34183 3.47756 2.82105 3.81884 2.4C4.16011 1.97895 4.60554 1.66648 5.15512 1.4626C5.27922 1.05485 5.50083 0.709141 5.81994 0.425485C6.13906 0.141828 6.5313 0 6.99668 0C7.46205 0 7.85429 0.141828 8.17341 0.425485C8.49695 0.709141 8.72078 1.05485 8.84488 1.4626C9.39446 1.66648 9.83767 1.97895 10.1745 2.4C10.5158 2.82105 10.7684 3.34183 10.9324 3.96233C11.1008 4.58283 11.1983 5.28532 11.2249 6.06981C11.2427 6.3313 11.2715 6.59723 11.3114 6.86759C11.3512 7.13352 11.4111 7.38172 11.4909 7.61219C11.5706 7.84266 11.6814 8.03102 11.8233 8.17729C12.1025 8.45208 12.3684 8.73573 12.6211 9.02825C12.8737 9.31634 13 9.62216 13 9.94571C13 10.1895 12.9114 10.3867 12.7341 10.5374C12.5568 10.6881 12.313 10.7634 12.0028 10.7634H1.99058ZM6.99668 13.3163C6.63767 13.3163 6.31413 13.2366 6.02604 13.077C5.73795 12.9219 5.50748 12.7158 5.33463 12.4587C5.16177 12.2061 5.06205 11.9291 5.03546 11.6277H8.96454C8.93795 11.9291 8.83823 12.2061 8.66537 12.4587C8.49252 12.7158 8.26205 12.9219 7.97396 13.077C7.68587 13.2366 7.36011 13.3163 6.99668 13.3163Z",fill:"currentColor"})),Ot=c.forwardRef(Dt),Ft=c.memo(Ot),te=t=>{const{className:e,secondarySlot:r,primarySlot:a}=t,{classes:s,cx:o}=Lt();return l(Ve,{className:o(s.buttons,e),children:[r,a]})},Lt=k()({buttons:{width:"100%",minHeight:"74px",height:"74px",justifyContent:"space-between",borderTop:"1px solid var(--card-b)",padding:"0 20px",".termius-dark-theme &":{borderColor:"var(--card-c)"}}});function Z(t){const{classes:e}=ne(),{disabled:r,onClick:a,customLeftIcon:s=n(Ft,{className:e.bellIcon})}=t;return n(O,{leftIcon:s,className:e.button,color:"regular",variant:"text",disabled:r,onClick:a,children:"Do it later"})}const Wt=t=>{const{classes:e}=ne(),{variant:r,onClick:a,customDefaultText:s}=t,o=r!=="default",p=o?l(D,{children:[n(_,{when:r==="loading",children:n(De,{className:e.icon,size:13,classes:{colorPrimary:e.progressColor}})}),n(_,{when:r==="success",children:n(Oe,{className:e.checkedIcon})})]}):null;return n(O,{disabled:o,color:o?"regular":"accent",className:e.button,rightIcon:p,size:"medium",onClick:a,children:l(D,{children:[n(_,{when:r==="default",children:s||"Confirm"}),n(_,{when:r==="loading",children:"Confirming"}),n(_,{when:r==="success",children:"Confirmed"})]})})};function Bt({variant:t,disabled:e,onClick:r}){const{classes:a}=ne();return n(O,{className:a.button,color:"error",variant:"contained",disabled:e,onClick:r,children:l(D,{children:[n(_,{when:t==="default",children:"Decline request"}),n(_,{when:t==="loading",children:"Declining request"}),n(_,{when:t==="success",children:"Declined request"})]})})}const ne=k()({button:{height:"34px",cursor:"pointer",borderRadius:"10px"},icon:{color:"var(--secondary)"},progressColor:{color:"var(--secondary)"},checkedIcon:{width:"13px"},bellIcon:{".termius-dark-theme &":{color:"var(--white)"}}});var Me={};Object.defineProperty(Me,"__esModule",{value:!0});var Y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},oe=function(){function t(e,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),Ee=c,j=Ie(Ee),Ut=At,S=Ie(Ut);function Ie(t){return t&&t.__esModule?t:{default:t}}function Gt(t,e){var r={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ie={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},qt=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Ht=function(e){return qt.forEach(function(r){return delete e[r]}),e},ce=function(e,r){r.style.fontSize=e.fontSize,r.style.fontFamily=e.fontFamily,r.style.fontWeight=e.fontWeight,r.style.fontStyle=e.fontStyle,r.style.letterSpacing=e.letterSpacing,r.style.textTransform=e.textTransform},_e=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,le=function(){return _e?"_"+Math.random().toString(36).substr(2,12):void 0},re=function(t){$t(e,t),oe(e,null,[{key:"getDerivedStateFromProps",value:function(a,s){var o=a.id;return o!==s.prevId?{inputId:o||le(),prevId:o}:null}}]);function e(r){jt(this,e);var a=zt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return a.inputRef=function(s){a.input=s,typeof a.props.inputRef=="function"&&a.props.inputRef(s)},a.placeHolderSizerRef=function(s){a.placeHolderSizer=s},a.sizerRef=function(s){a.sizer=s},a.state={inputWidth:r.minWidth,inputId:r.id||le(),prevId:r.id},a}return oe(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(a,s){s.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var a=this.input&&window.getComputedStyle(this.input);a&&(ce(a,this.sizer),this.placeHolderSizer&&ce(a,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var a=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?a=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:a=this.sizer.scrollWidth+2;var s=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;a+=s,a<this.props.minWidth&&(a=this.props.minWidth),a!==this.state.inputWidth&&this.setState({inputWidth:a})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var a=this.props.injectStyles;return _e&&a?j.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var a=[this.props.defaultValue,this.props.value,""].reduce(function(i,u){return i??u}),s=Y({},this.props.style);s.display||(s.display="inline-block");var o=Y({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),p=Gt(this.props,[]);return Ht(p),p.className=this.props.inputClassName,p.id=this.state.inputId,p.style=o,j.default.createElement("div",{className:this.props.className,style:s},this.renderStyles(),j.default.createElement("input",Y({},p,{ref:this.inputRef})),j.default.createElement("div",{ref:this.sizerRef,style:ie},a),this.props.placeholder?j.default.createElement("div",{ref:this.placeHolderSizerRef,style:ie},this.props.placeholder):null)}}]),e}(Ee.Component);re.propTypes={className:S.default.string,defaultValue:S.default.any,extraWidth:S.default.oneOfType([S.default.number,S.default.string]),id:S.default.string,injectStyles:S.default.bool,inputClassName:S.default.string,inputRef:S.default.func,inputStyle:S.default.object,minWidth:S.default.oneOfType([S.default.number,S.default.string]),onAutosize:S.default.func,onChange:S.default.func,placeholder:S.default.string,placeholderIsMinWidth:S.default.bool,style:S.default.object,value:S.default.any};re.defaultProps={minWidth:1,injectStyles:!0};var Zt=Me.default=re;const Qt=Zt;function Jt(t){const{inputWrapperClassName:e,inputClassName:r,className:a,placeholderColor:s="var(--light-grey-3)",endAdornment:o,...p}=t,{classes:i,cx:u}=Kt({placeholderColor:s});return l("span",{className:u(i.rootWrapper,a),children:[n(Qt,{className:u(i.inputWrapper,e),inputClassName:u(i.input,r),...p}),o&&n("span",{className:i.endAdornment,children:o})]})}const Kt=k()((t,{placeholderColor:e})=>({rootWrapper:{maxWidth:"100%",display:"inline-flex",flexWrap:"nowrap",overflow:"hidden",font:"inherit",borderBottom:`1px solid ${e}`},endAdornment:{},inputWrapper:{maxWidth:"100%","& > *":{font:"inherit"}},input:{maxWidth:"100%",padding:"0",border:"none","&::placeholder":{color:e||void 0,opacity:"1"},"&:focus":{outline:"none"}}})),Ae=t=>{const{variant:e="default",onChange:r,value:a,renderLabel:s,removeMemberEl:o,noAccessOptionEnabled:p}=t,i=e==="disabled",{classes:u}=Yt();return e==="skeleton"?n(W,{variant:"rectangular",width:"80px",height:"18px",animation:"wave",className:u.customSkeletonElement}):n(Ct,{value:a,onChange:r,disabled:i,renderLabel:s,additionalSelectElement:o,noAccessOptionEnabled:p,mainColor:"var(--main)"})},Yt=k()({customSkeletonElement:{background:"var(--black-a05)",borderRadius:"5px",".termius-dark-theme &":{background:"var(--dark-grey-3)"}}}),Xt=({vault:t,state:e,send:r,variant:a})=>{const{classes:s}=en(),{updateVaultRequests:o,currentMember:p,newVaultRequests:i}=e.context,u=P(),h=t.isDefault,b=M(Q),f=tn(o,t),v=()=>{var C;if(h)return p.role;const g=(C=o==null?void 0:o.find(x=>(x==null?void 0:x.id)===t.id))==null?void 0:C.role;return g||"no access"},N=()=>{var C;if(h)return p.role==="Editor"?"can edit":"can view";const g=(C=o==null?void 0:o.find(x=>(x==null?void 0:x.id)===t.id))==null?void 0:C.role;return g?g==="Editor"?"can edit":"can view":"no access"},I=M(me).find(g=>g===t.id),A=g=>{if(u(w("vaultPermissionsChanged",{permissionPickerLocation:"Grant Permissions Screen",vaultPermissions:Te(g),teamMemberID:p.email,vaultID:t.id,hasVaultDataAccess:I?"no":"yes"})),h){r("UPDATE_DEFAULT_VAULT_ROLE",{data:g});return}if(g==="no access"){r("UPDATE_CUSTOM_VAULT_MEMBERS_REQUESTS",{data:o==null?void 0:o.filter(x=>x.id!==t.id)});return}if(!(o!=null&&o.find(x=>x.id===t.id))){r("UPDATE_CUSTOM_VAULT_MEMBERS_REQUESTS",{data:[...o,{id:t.id,role:g}]});return}r("UPDATE_CUSTOM_VAULT_MEMBERS_REQUESTS",{data:o.map(x=>x.id===t.id?{...x,role:g}:x)})},d=h&&l(m,{gap:"5px",children:[n(m,{direction:"row",alignItems:"center",justifyContent:"space-between",padding:"0px 10px",children:n(y,{variant:"body1",color:"secondary",className:s.teamVaultNoAccessLabel,children:"no access"})}),n("div",{className:s.teamVaultRemoveLabel,children:l(y,{variant:"body2",color:"secondary",children:[n(y,{variant:"body2",display:"inline",children:n(Fe,{color:"accent",onClick:()=>{r("UPDATE_NEW_VAULT_REQUESTS",{data:[...i,{name:"",role:"Editor"}]})},children:"Add new vault"})})," ","to set granular permissions"]})})]});return l(m,{component:"li",alignItems:"flex-start",justifyContent:"space-between",className:s.entityItem,role:"button",tabIndex:-1,children:[l(m,{direction:"row",justifyContent:"space-between",width:"100%",children:[l(m,{direction:"row",gap:"10px",className:s.leftPart,children:[l(m,{direction:"row",gap:"5px",alignItems:"center",children:[n(V,{size:24,icon:n(pe,{width:14,height:14})}),n(y,{title:t.name,variant:"subtitle2",color:"primary",ellipsis:!0,className:s.vaultTitle,children:t.name})]}),l("div",{className:s.userCount,children:[h?n(Le,{className:s.teamIcon}):n(X,{className:s.teamIcon}),!h&&n(y,{variant:"body2",color:"secondary",children:f})]})]}),n("section",{className:s.rightPart,children:n(Ae,{variant:a,value:v(),renderLabel:N,removeMemberEl:b?d:null,noAccessOptionEnabled:!h,onChange:A})})]}),h&&l(H.Fragment,{children:[n(We,{margin:"10px 0px",height:"1px",width:"100%",className:s.dividerLine}),l(y,{variant:"body1",color:"secondary",children:[n("b",{children:"Everyone"})," in the team can access this vault"]})]})]},t.id)},en=k()({entityItem:{background:"var(--background)",borderRadius:"15px",padding:"10px 15px 10px 15px"},leftPart:{display:"flex",alignItems:"center",overflow:"hidden"},vaultTitle:{minWidth:0,flex:1,maxWidth:"450px"},rightPart:{display:"flex",alignItems:"center",flexShrink:0,position:"relative"},userCount:{display:"flex",justifyContent:"center",alignItems:"center",gap:"2px",color:"var(--secondary)",opacity:1,textWrap:"nowrap",transition:"all 0.2s ease-in-out","&:hover":{color:"var(--main)"}},teamVaultNoAccessLabel:{color:"var(--light-grey-3)",".termius-dark-theme &":{color:"var(--dark-grey-6)"}},teamVaultRemoveLabel:{height:"46px",padding:"5px 10px",background:"var(--background)",borderRadius:"10px"},teamIcon:{color:"var(--secondary)",transition:"all 0.2s ease"},dividerLine:{background:"var(--light-grey-4)",".termius-dark-theme &":{background:"var(--dark-grey-3)"}}}),Te=t=>{switch(t){case"Member":return"Can view";case"Editor":return"Can edit";case"no access":return"No access";default:return"No access"}},tn=(t,e)=>{const r=M(i=>Be(i,e.id)),a=M(me),s=t.some(i=>i.id===e.id),o=a.some(i=>i===e.id);return r.length+(s?1:0)-(o?1:0)},nn=t=>{const{state:e,send:r,vault:a,index:s,variant:o,teamVaults:p}=t,{classes:i,cx:u}=sn(),h=P(),{newVaultRequests:b,currentMember:f}=e.context,v=a.name,N=a.role,[I,A]=c.useState(!1),d=Ue(v),g=c.useRef(null),C=!I&&v!=="",x=p.some(E=>v===E.name),J=an(s,a.name,b),U=x||J,z=E=>{const{name:q,role:T,vaultIndex:R}=E,F=[...b];F[R]={name:q,...je(!!T,{role:T})},r("UPDATE_NEW_VAULT_REQUESTS",{data:F})},$=E=>{var R;if(E.preventDefault(),E.key==="Enter"&&((R=g==null?void 0:g.current)==null||R.blur()),E.key!=="Backspace"||v!=="")return;if(!(d!=null&&d.length)&&v===""){r("UPDATE_NEW_VAULT_REQUESTS",{data:ae(b,s)});return}if((d==null?void 0:d.length)&&v===""){z({name:"",role:N,vaultIndex:s});return}r("UPDATE_NEW_VAULT_REQUESTS",{data:ae(b,s)})};return l(m,{component:"li",direction:"row",alignItems:"center",justifyContent:"space-between",gap:"10px",className:u(i.promoVaultItem,{[i.activeItem]:I,[i.errorItem]:U}),tabIndex:0,children:[l(m,{direction:"row",alignItems:"center",gap:"10px",overflow:"hidden",children:[l(m,{direction:"row",gap:"5px",alignItems:"center",children:[n(m,{flexShrink:"0",children:n(V,{size:24,icon:n(pe,{width:14,height:14})})}),n(Jt,{value:v,inputRef:E=>{g.current=E},placeholder:"Enter vault name, e.g. Production...",placeholderColor:"var(--secondary)",onChange:E=>{z({name:E.target.value,role:b[s].role,vaultIndex:s})},onKeyUp:$,inputClassName:u(i.input,{[i.inputIncreasedWidth]:I}),className:i.inputWrapper,onFocus:()=>A(!0),onBlur:()=>A(!1),autoFocus:v===""})]}),C&&l("div",{className:i.userCount,children:[n(X,{}),n(y,{variant:"body2",color:"secondary",children:b[s].role?2:1})]})]}),l(D,{children:[n(_,{when:U,children:l(m,{direction:"row",alignItems:"center",gap:"5px",whiteSpace:"nowrap",children:[n(Ge,{className:i.errorIcon}),n(y,{variant:"body1",color:"error",children:"This name is already in use"})]})}),n(_,{when:!U,children:n(m,{whiteSpace:"nowrap",children:n(Ae,{value:b[s].role||"no access",renderLabel:()=>rn(b[s].role),onChange:E=>{z({name:v,role:E!=="no access"?E:void 0,vaultIndex:s}),h(w("vaultPermissionsChanged",{permissionPickerLocation:"Grant Permissions Screen",vaultPermissions:Te(E),teamMemberID:f.email,vaultID:null,hasVaultDataAccess:"yes"}))},variant:o,noAccessOptionEnabled:!0})})})]})]})},rn=t=>{switch(t){case"Editor":return"can edit";case"Member":return"can view";default:return"no access"}},sn=k()({promoVaultItem:{width:"640px",margin:"0 auto",height:"44px",padding:"10px 15px",background:"var(--background)",borderRadius:"15px",border:"1px solid transparent"},inputWrapper:{borderBottom:"none"},input:{fontWeight:500,textOverflow:"ellipsis",height:"21px",padding:"2px 0px",background:"none","&::before":{borderBottom:"none"},"&::placeholder":{fontWeight:450}},inputIncreasedWidth:{maxWidth:"490px"},activeItem:{border:"1px solid var(--light-grey-3)",".termius-dark-theme &":{borderColor:"var(--dark-grey-5)"}},errorItem:{border:"1px solid var(--red)"},errorIcon:{width:"18px",color:"var(--red)"},userCount:{display:"flex",justifyContent:"center",alignItems:"center",gap:"2px",color:"var(--secondary)",opacity:1,textWrap:"nowrap",transition:"all 0.2s ease-in-out"}}),an=(t,e,r)=>{if(r.filter(s=>s.name===e).length===1||!e)return!1;for(let s=0;s<r.length;s+=1)if(r[s].name===e)return s!==t;return!1};function on(t){const{sourceTeamMember:e,targetTeamMemberWithoutAccess:r,allMembers:a,teamVaults:s}=t,o=new Map(s.map(i=>[i.id,i])),p=s.find(i=>i.isDefault);return a.filter(i=>i.userId===e.userId).map(i=>{const u=o.get(i.vaultId),h=u===p;if(u!=null)return i.role!=="Owner"?{vaultId:i.vaultId,isDefault:h,role:i.role}:h?{vaultId:i.vaultId,isDefault:!0,role:r.defaultTeamVaultRole}:void 0}).filter(he)}const cn=(t,e)=>c.createElement("svg",{width:11,height:7,viewBox:"0 0 11 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1299 2.22503C10.1299 2.22503 5.46322 6.77925 5.46322 6.77925C5.12988 7.10455 4.79655 6.77925 4.79655 6.77925L0.129883 2.22503C0.129883 2.22503 0.129883 0.923828 1.46322 0.923828L5.12988 4.82744C5.12988 4.82744 8.65192 1.0778 8.79224 0.928413C10.1299 0.923828 10.1299 2.22503 10.1299 2.22503Z",fill:"currentColor"})),ln=c.forwardRef(cn),dn=c.memo(ln),un=t=>{var A;const{onTriggerClick:e,variant:r,onCopy:a,sources:s}=t,{classes:o,cx:p}=ke(),i=P(),u=r==="disabled",h=c.useRef(null),[b,f]=c.useState(!1),[v,N]=c.useState(""),I=(d,g)=>{g&&(i(w("vaultPermissionCopied",{isSearched:v.length?"yes":"no",teamMemberID:g.email})),a(g),f(!1))};return c.useEffect(()=>{b&&N("")},[b]),l(H.Fragment,{children:[n(O,{ref:h,onClick:()=>{e(),f(!0)},disabled:u,variant:"text",color:"regular",disableHover:!0,disableRipple:!0,className:o.button,rightIcon:n(dn,{className:p(o.chevron,{[o.chevronOpened]:b})}),children:"Copy permissions from"}),n(ze,{open:b,anchorEl:h.current,container:(A=h.current)==null?void 0:A.parentElement,onClose:()=>{},onKeyDown:d=>{d.stopPropagation(),d.key==="Escape"&&f(!1)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:-5,horizontal:"right"},slotProps:{paper:{style:{borderRadius:"15px",boxShadow:"0px 15px 30px 0px var(--black-a15)"}}},children:n(H.Fragment,{children:n($e,{onClickAway:()=>f(!1),children:n(m,{className:o.popoverWrapper,children:n(mn,{search:v,setShowPopup:f,autocompleteProps:{open:b,inputValue:v,getOptionLabel:d=>d.email,options:s,onChange:I,onInputChange:(d,g,C)=>{C==="input"&&N(g)}}})})})})})]})},mn=({search:t,setShowPopup:e,autocompleteProps:r})=>{const{classes:a}=ke(),{getRootProps:s,getInputProps:o,getListboxProps:p,getOptionProps:i,groupedOptions:u,popupOpen:h}=qe(r),b=o();return h?l(H.Fragment,{children:[n("div",{...s(),children:n(He,{inputProps:{autoFocus:!0,...b},className:a.search,search:t,iconClassName:a.searchIcon,inputClassName:a.searchInput,placeholder:"Search members",onChange:()=>{},onKeyDown:f=>{f.key==="Escape"&&(f.stopPropagation(),e(!1))}})}),n(m,{overflow:"hidden",children:n(Ze,{...p(),className:a.teamMembersList,children:u.length>0?u.map((f,v)=>n(St,{className:a.teamMember,...i({option:f,index:v}),children:l(m,{direction:"row",alignItems:"center",gap:"10px",children:[n(Qe,{avatar:f.avatar,color:Je(f.email,f.userId??0),letter:Ke({email:f.email}),className:a.avatar}),n(y,{variant:"body1",ellipsis:!0,className:a.memberEmail,children:f.email})]})})):n(y,{variant:"body1",color:"secondary",align:"center",children:"No members found"})})})]}):null},ke=k()({button:{padding:"0px 5px",borderRadius:"8px",height:"auto","&:hover":{background:"var(--background)"}},avatar:{minWidth:"24px",height:"24px",borderRadius:"6px"},popoverWrapper:{width:"248px",height:"auto",maxHeight:"210px",padding:"5px",background:"var(--foreground)",borderRadius:"15px",border:"1px solid var(--hover-light)"},memberEmail:{maxWidth:"190px"},teamMembersList:{display:"flex",flexDirection:"column",gap:"5px",padding:0,marginTop:"10px","&::-webkit-scrollbar":{display:"none"},overflow:"hidden overlay"},teamMember:{display:"flex",width:"238px",height:"34px",padding:"5px",borderRadius:"10px",justifyContent:"space-between","&.Mui-focusVisible":{background:"var(--background)"},"&:hover":{background:"var(--background)"}},chevron:{transition:"transform 0.2s"},chevronOpened:{transform:"rotate(180deg)"},search:{width:"100%",padding:"7px 10px",maxHeight:"28px",borderRadius:"10px",background:"var(--background)",border:"1px solid var(--card-b)",color:"var(--secondary)",".termius-dark-theme &":{borderColor:"var(--card-c)",background:"var(--card-b)"}},searchIcon:{width:13,height:13},searchInput:{fontSize:"12px",lineHeight:"18px","&::placeholder":{color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--dark-grey-7)"}}}}),pn=()=>{const{classes:t,cx:e}=hn(),r=n(W,{variant:"rectangular",width:"640px",height:"44px",animation:"wave",className:e(t.customSkeletonElement,t.mainSkeletonItem)});return l(m,{width:"100%",height:"100%",padding:"40px",overflow:"auto",className:t.root,children:[l(m,{direction:"row",justifyContent:"flex-start",alignItems:"center",marginBottom:"20px",gap:"10px",children:[n(W,{variant:"rectangular",width:"40px",height:"40px",animation:"wave",className:t.customSkeletonElement}),n(W,{variant:"rectangular",width:"200px",height:"20px",animation:"wave",className:t.customSkeletonElement})]}),l(m,{direction:"row",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",children:[n(W,{variant:"rectangular",width:"165px",height:"20px",animation:"wave",className:t.customSkeletonElement}),n(W,{variant:"rectangular",width:"146px",height:"20px",animation:"wave",className:t.customSkeletonElement})]}),l(m,{gap:"10px",children:[r,r,r,r,r]})]})},hn=k()({root:{"&::-webkit-scrollbar":{display:"none"}},customSkeletonElement:{background:"var(--background)",borderRadius:"5px"},mainSkeletonItem:{borderRadius:"15px"}}),gn=t=>{const{onClose:e,state:r,send:a,isEnterprisePlan:s}=t,{classes:o,cx:p}=bn(),i=P(),{currentMember:u,newVaultRequests:h,currentGrantStep:b,totalGrantSteps:f,businessFunnelID:v}=r.context,N=M(Ye),I=M(Q),A=M(ge).map(T=>T.id!=null?{id:T.id,name:T.name,isDefault:T.isDefault}:void 0).filter(he),d=M(Xe),g=M(et),C=M(tt),{current:x}=c.useRef(A),{current:J}=c.useRef(d),{current:U}=c.useRef(g),$="calc(100% - 74px)",E=f>1?n(y,{variant:"subtitle2",color:"secondary",children:`${b} of ${f} members`}):null,q=h.length||x.length>1?"Add vaults":"Add shared vaults to give different members access to different data";return l(m,{width:"100%",height:"100%",minHeight:"540px",alignItems:"flex-start",justifyContent:"end",children:[n(B,{in:r.matches("transitionToNextMember"),justifyContent:"space-between",maxHeight:$,children:n(pn,{})}),n(B,{in:r.matches("mainFlow")||r.matches("grantingAccess")||r.matches("rejectingMember")||r.matches("copyingPermissionsFromOtherMember"),justifyContent:"space-between",maxHeight:$,children:l(m,{width:"100%",height:"100%",padding:"40px 40px 0px 40px",component:"ul",className:p({[o.mainPartBusinessPromo]:!I}),overflow:"hidden scroll",gap:"15px",children:[n(ye,{user:u,disabled:!0,className:o.topUserName}),l(m,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[l(m,{direction:"row",justifyContent:"flex-start",alignItems:"center",gap:"10px",children:[n(y,{variant:"subtitle1",children:"Manage vault permissions"}),s&&f>1&&n(y,{variant:"subtitle1",color:"secondary",children:`${b} of ${f}`})]}),n(m,{direction:"row",justifyContent:"space-between",alignItems:"center",children:x.length>1?n(un,{onTriggerClick:()=>{i(w("copyMemberPermissionsButtonPressed",{teamJoinedMembers:f,memberPosition:b,teamMemberID:u.email}))},onCopy:T=>{const R=on({sourceTeamMember:T,targetTeamMemberWithoutAccess:{userId:u.user_id,defaultTeamVaultRole:u.role},teamVaults:x,allMembers:J.map(F=>({vaultId:F.vault_id,role:F.role,userId:F.user_id}))});a("COPY_DATA_FROM_OTHER_MEMBER",{data:R})},variant:r.hasTag("pending")?"disabled":"default",sources:U}):null})]}),l("ul",{className:p(o.vaults,{[o.vaultsNoGap]:!I}),children:[x.map(T=>n(Xt,{vault:T,state:r,send:a,variant:vn(r)},T.id)),h.map((T,R)=>n(nn,{state:r,send:a,vault:T,teamVaults:x,index:R,variant:r.hasTag("pending")?"disabled":"default"},R)),I?n(m,{component:"li",direction:"row",alignItems:"center",width:"100%",minHeight:"44px",padding:"10px 15px",gap:"10px",className:o.promoVaultItem,onClick:()=>{wn(r,i),a("UPDATE_NEW_VAULT_REQUESTS",{data:[...h,{name:"",role:"Editor"}]})},children:l(m,{direction:"row",gap:"5px",alignItems:"center",children:[n(V,{size:24,icon:n(ue,{})}),n(y,{variant:"subtitle2",children:q})]})}):n(Pt,{state:r,onUpgradeClick:()=>{i(w("upgradeButtonPressed",{highlighted:"yes",upgradeButtonLocation:"Grant Permissions",businessFunnelID:v??""})),nt("TEAM_BUSINESS",C==null?void 0:C.period,N)}})]})]})}),n(m,{className:o.footer,children:n(fn,{state:r,send:a,onClose:e,membersCounter:E,isEnterprisePlan:s})})]})},fn=t=>{const{onClose:e,state:r,send:a,membersCounter:s,isEnterprisePlan:o=!1}=t,p=P(),{currentMember:i}=r.context,u=M(ee),h=()=>{a("CONFIRM_ACTION")},b=()=>{p(w("notificationSnoozed",{bellNotificationAction:"Confirm Access",teamMemberID:i.email,snoozedFromScreen:"Grant Vault Permissions"})),p(fe(u)),e()},f=()=>{a("REJECT_MEMBER_ACCESS")};return n(te,{primarySlot:l(m,{direction:"row",gap:"20px",alignItems:"center",children:[l(D,{children:[n(_,{when:o,children:n(Z,{disabled:r.hasTag("pending"),onClick:b,customLeftIcon:null})}),n(_,{when:!o,children:s})]}),n(Wt,{onClick:h,variant:yn(r),customDefaultText:o?"Confirm access":void 0})]}),secondarySlot:l(D,{children:[n(_,{when:o,children:n(Bt,{onClick:f,variant:xn(r)})}),n(_,{when:!o,children:n(Z,{disabled:r.hasTag("pending"),onClick:b})})]})})},bn=k()({mainPartBusinessPromo:{overflow:"auto","@media (max-height: 520px)":{padding:"20px 20px 0px 20px"}},vaults:{minWidth:"640px",listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"10px",overflow:"hidden overlay",paddingBottom:"20px","&::-webkit-scrollbar":{display:"none"}},vaultsNoGap:{gap:"0px"},promoVaultItem:{background:"var(--background)",borderRadius:"15px",cursor:"pointer","&:hover":{backgroundColor:"var(--card-b)"}},footer:{position:"absolute",width:"100%",bottom:0,backgroundColor:"var(--foreground)"},topUserName:{padding:0,minHeight:"40px"}});function vn(t){return t.hasTag("pending")?"disabled":t.matches("copyingPermissionsFromOtherMember")?"skeleton":"default"}function yn(t){return t.matches("grantingAccess")?"loading":t.matches("transitionToNextMember")?"success":"default"}function xn(t){return t.matches("rejectingMember")?"loading":t.matches("transitionToNextMember")?"success":"default"}const wn=(t,e)=>{e(w("newVaultButtonPressed",{newVaultSource:"Grant Permissions Screen",eventTeamRole:"Owner"}));const{newVaultRequests:r,businessFunnelID:a,currentGrantStep:s,totalGrantSteps:o}=t.context;!r.length&&!!a&&e(w("businessFunnelStarted",{businessFunnelID:a,businessFunnelOpenedFrom:"Grant Access",memberPosition:s,teamJoinedMembers:o}))},Cn=t=>{const{firstUserId:e,onCloseDialog:r,delays:a}=t,s=P(),o=at(),p=M(ee),i=M(Q),u=M(ve),h=M(ge),b=M(ot),f=p.find(d=>d.user_id===e)??p[0],v=h.map(d=>d.name),[N,I,A]=it(de,{context:{currentMember:f,totalGrantSteps:p.length,businessFunnelID:i?void 0:ct.v4()},actions:{onDismiss:()=>{r()},onSuccess:()=>{s(lt()),s(dt())},sendIntroScreenAnalytics:()=>{s(w("groupGrantVaultPermissionsScreenOpened",{teamJoinedMembers:p.length}))},sendMainFlowEntryAnalytics:d=>{s(w("grantVaultPermissionsScreenOpened",{teamJoinedMembers:d.totalGrantSteps,memberPosition:d.currentGrantStep,teamMemberID:d.currentMember.email}))},sendSuccessScreenAnalytics:d=>{s(w("vaultPermissionsSuccessScreenOpened",{teamJoinedMembers:d.totalGrantSteps})),s(w("accessGranted",{teamMemberID:d.currentMember.email,numberOfAccessibleVaults:d.updateVaultRequests.length+d.newVaultRequests.length+1}))},sendConfirmButtonPressed:d=>{s(w("confirmAccessButtonPressed",{confirmAccessButtonLocation:"Grant Vault Permissions Screen",teamMemberID:d.currentMember.email}))},sendAnalyticsWhenAccessGranted:d=>{s(w("accessGranted",{teamMemberID:d.currentMember.email,numberOfAccessibleVaults:d.updateVaultRequests.length+d.newVaultRequests.length+1}))},sendDeclineButtonPressed:d=>{s(w("declineAccessButtonPressed",{teamMemberID:d.currentMember.email,numberOfAccessibleVaults:d.updateVaultRequests.length+d.newVaultRequests.length+1}))},setVaultsDataToStore:(d,{data:g})=>{g.ok&&(s(ut({items:g.val.vaults})),s(mt(g.val.participants)))},updateSubmitDataForNextMember:be(d=>{const g=d.nextMembers;if((g==null?void 0:g.length)===0)return d;const C=g[0];return{updateVaultRequests:[],newVaultRequests:[],currentMember:{...C,avatar:pt(b,C.user_id)},currentGrantStep:d.currentGrantStep+1,totalGrantSteps:d.currentGrantStep+g.length}})},services:{grantAccessToMember:async d=>se(o,ht,{memberId:d.currentMember.user_id,defaultVault:{role:d.currentMember.role??"Editor"},newVaults:i?Sn(d.newVaultRequests,v):[],vaults:d.updateVaultRequests.filter(g=>h.some(C=>C.id===g.id))}),rejectMemberAccess:async d=>se(o,gt,{user_id:d.currentMember.user_id})},guards:{skipIntroScreen:()=>e!=null,isSuccessScreenDisplayed:()=>!u},delays:{...de.options.delays,...a}});return c.useEffect(()=>{A.onDone(r)},[r,A]),[N,I,A]},de=rt({id:"grantAccessFlow",initial:"startFlow",predictableActionArguments:!0,preserveActionOrder:!0,schema:{context:{},events:{},services:{}},tsTypes:{},context:{currentMember:{email:"",user_id:0,role:"Editor",avatar:void 0},currentGrantStep:1,totalGrantSteps:1,updateVaultRequests:[],newVaultRequests:[],nextMembers:[]},on:{UPDATE_CUSTOM_VAULT_MEMBERS_REQUESTS:{actions:"updateVaultUpdateRequests"}},states:{startFlow:{always:[{actions:["sendMainFlowEntryAnalytics"],target:"mainFlow",cond:"skipIntroScreen"},{actions:["sendIntroScreenAnalytics"],target:"introScreen"}]},introScreen:{on:{CLOSE_DIALOG:{actions:["onDismiss"]},GO_TO_MAIN_FLOW:{actions:["setCurrentMember","sendMainFlowEntryAnalytics"],target:"mainFlow"}}},mainFlow:{on:{UPDATE_DEFAULT_VAULT_ROLE:{actions:"setDefaultVaultRole"},UPDATE_NEW_VAULT_REQUESTS:{actions:"setNewVaults"},COPY_DATA_FROM_OTHER_MEMBER:{target:"copyingPermissionsFromOtherMember",actions:["persistCopiedPermissions"]},CONFIRM_ACTION:{actions:["sendConfirmButtonPressed"],target:"grantingAccess"},REJECT_MEMBER_ACCESS:{actions:["sendDeclineButtonPressed"],target:"rejectingMember"},CLOSE_DIALOG:{actions:"onDismiss"}}},copyingPermissionsFromOtherMember:{after:{copyingPermissionsFromTimer:{target:"mainFlow"}}},transitionToNextMember:{tags:["pending"],description:"Transition state before processing the next member",entry:["setNextMembers","setVaultsDataToStore","sendMainFlowEntryAnalytics","sendAnalyticsWhenAccessGranted"],after:{transitionToNextMemberTimer:{actions:"updateSubmitDataForNextMember",target:"mainFlow"}}},genericError:{tags:["errorNotification"],on:{CLOSE_DIALOG:{target:"failed"}}},networkErrorWhenGranting:{tags:["errorNotification"],on:{BACK:{target:"mainFlow"},CONFIRM_ACTION:{actions:["sendConfirmButtonPressed"],target:"grantingAccess"}}},networkErrorWhenRejecting:{tags:["errorNotification"],on:{BACK:{target:"mainFlow"},CONFIRM_ACTION:{actions:["sendDeclineButtonPressed"],target:"rejectingMember"}}},grantingAccess:{tags:["pending"],invoke:{src:"grantAccessToMember",onDone:[{cond:"isNetworkErrorResult",target:"networkErrorWhenGranting"},{cond:"isErrorResult",target:"genericError"},{cond:"isThereNextMember",target:"transitionToNextMember"},{cond:"isSuccessScreenDisplayed",target:"successScreen"},{target:"completed"}]}},rejectingMember:{tags:["pending"],invoke:{src:"rejectMemberAccess",onDone:[{cond:"isNetworkErrorResult",target:"networkErrorWhenRejecting"},{cond:"isErrorResult",target:"genericError"},{cond:"isThereNextMember",target:"transitionToNextMember"},{target:"completed"}]}},successScreen:{entry:["sendSuccessScreenAnalytics"],after:{successTransitionTimer:{target:"completed"}}},failed:{type:"final"},completed:{type:"final",entry:["onSuccess"]}}},{guards:{isNetworkErrorResult:(t,{data:e})=>e.err&&e.val.message.startsWith("Network error"),isErrorResult:(t,{data:e})=>e.err,isThereNextMember:(t,{data:e})=>e.ok&&e.val.members_with_pending_grant_access.length>0},actions:{setNextMembers:G({nextMembers:(t,{data:e})=>e.ok?e.val.members_with_pending_grant_access:[]}),setCurrentMember:G({currentMember:(t,{data:e})=>e??t.currentMember}),updateVaultUpdateRequests:G({updateVaultRequests:(t,{data:e})=>e}),setNewVaults:G({newVaultRequests:(t,{data:e})=>e}),setDefaultVaultRole:G({currentMember:(t,{data:e})=>({...t.currentMember,role:e})}),persistCopiedPermissions:be((t,{data:e})=>{const[[r],a]=st(e,s=>s.isDefault);return{updateVaultRequests:a.map(s=>({id:s.vaultId,role:s.role})),currentMember:r!=null?{...t.currentMember,role:r.role}:t.currentMember}})},delays:{copyingPermissionsFromTimer:500,successTransitionTimer:3e3,transitionToNextMemberTimer:1e3}}),Sn=(t,e)=>ft(t.map(r=>({...r,name:r.name.trim()})),r=>r.name).filter(r=>!!r.name&&!e.some(a=>a===r.name)),Mn=(t,e)=>c.createElement("svg",{width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},c.createElement("path",{d:"M45.5039 40.8014L45.2976 40.8799C43.6238 41.511 42.4978 42.6231 41.853 44.0394C39.9955 43.4271 37.8821 43.0701 35.5413 43.0701C24.9617 43.0701 19.0339 50.3345 19.0339 54.2317C19.0339 54.7041 19.2627 54.8857 19.8246 54.8857H41.1661V56.58C41.1661 57.5532 41.2411 58.4416 41.4058 59.2575H20.6048C16.4857 59.2575 14.496 57.8877 14.496 54.9176C14.496 47.9967 22.6887 38.6938 35.5413 38.6938C39.2932 38.6938 42.6485 39.4885 45.5039 40.8014ZM46.0131 23.7229C46.0131 30.3421 41.3274 35.7222 35.5413 35.7222C29.7594 35.7222 25.0737 30.3629 25.0737 23.7644C25.0737 17.2691 29.7965 12 35.5413 12C41.3298 12 46.0131 17.1861 46.0131 23.7229ZM29.409 23.7598C29.409 28.0745 32.2326 31.3503 35.5413 31.3503C38.8783 31.3503 41.6778 28.033 41.6778 23.7229C41.6778 19.4953 38.9047 16.3719 35.5413 16.3719C32.2061 16.3719 29.409 19.5575 29.409 23.7598Z",fill:"url(#paint0_linear_8_14176)"}),c.createElement("path",{d:"M56.436 41.894C57.7009 42.3591 62.098 43.979 63.4282 44.5545C64.9608 45.237 65.5043 46.235 65.5043 47.8666V56.9938C65.5043 61.8385 62.8045 63.7164 56.1272 67.6965C55.3981 68.1339 54.5061 68.067 53.9187 67.6965C47.2544 63.7144 44.5654 61.8385 44.5654 56.9938V47.8666C44.5654 46.235 45.1048 45.2463 46.6373 44.5545C47.9435 43.979 52.3408 42.3961 53.4531 41.9816C54.4677 41.5792 55.504 41.5657 56.436 41.894ZM59.1683 48.8128L53.5186 57.0992L50.743 53.8843C50.4411 53.5303 50.0108 53.2865 49.4651 53.2865C48.5414 53.2865 47.7661 54.0268 47.7661 55.0945C47.7661 55.5425 47.9374 56.0343 48.2351 56.409L52.2646 61.0262C52.5949 61.4514 53.1578 61.6283 53.6053 61.6283C54.1834 61.6283 54.7267 61.3526 55.0244 60.9528L61.9583 50.8579C62.1951 50.5268 62.3149 50.1317 62.3149 49.8169C62.3149 48.7968 61.515 48.0296 60.6046 48.0296C59.9984 48.0296 59.4832 48.3397 59.1683 48.8128Z",fill:"url(#paint1_linear_8_14176)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_8_14176",x1:14.496,y1:11.463,x2:47.7486,y2:12.7175,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#2091F6"}),c.createElement("stop",{offset:1,stopColor:"#21B568"})),c.createElement("linearGradient",{id:"paint1_linear_8_14176",x1:44.5654,y1:41.3632,x2:66.6441,y2:42.3561,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#2091F6"}),c.createElement("stop",{offset:1,stopColor:"#21B568"})))),En=c.forwardRef(Mn),In=c.memo(En),_n=t=>{const{members:e,onClose:r,onContinue:a,onSelectMember:s,variant:o,isEnterprisePlan:p=!1}=t,i=P(),{classes:u}=An(),h=p?`New ${L("member",e.length)} ${L("has",e.length)} requested access`:`New ${L("member",e.length)} ${L("is",e.length)} waiting for access`,b=p?`Please review and confirm vault permissions for your new team ${L("member",e.length)}.`:`The following ${L("member",e.length)} cannot access ${o==="team"?"Team":"shared"} vault until youâ€™ve set their permissions.`,f=()=>{i(w("notificationSnoozed",{bellNotificationAction:"Confirm Access",teamMemberID:null,snoozedFromScreen:"Group Grant Vault Permissions"})),i(fe(e)),r()};return l(m,{width:"100%",height:"100%",alignItems:"center",justifyContent:"space-between",children:[l(m,{padding:"40px 75px 0px 75px",gap:"20px",alignItems:"center",overflow:"hidden scroll",width:"100%",children:[l(m,{gap:"5px",alignItems:"center",children:[n(In,{}),l(m,{gap:"5px",alignItems:"center",children:[n(y,{variant:"h2",color:"main",children:h}),n(y,{variant:"body1",color:"secondary",children:b})]})]}),n(m,{gap:"10px",width:"100%",className:u.membersList,children:e.map(v=>n(ye,{user:v,onClick:()=>s(v),className:u.enterpriseMemberItem},v.user_id))})]}),n(te,{primarySlot:l(m,{direction:"row",gap:"10px",marginLeft:"auto",children:[p&&n(Z,{disabled:!1,onClick:f,customLeftIcon:null}),n(O,{size:"medium",color:"accent",onClick:a,children:"Review permissions"})]}),secondarySlot:!p&&n(Z,{disabled:!1,onClick:f})})]})},An=k()({membersList:{overflow:"auto",paddingBottom:"10px","&::-webkit-scrollbar":{display:"none"}},enterpriseMemberItem:{backgroundColor:"var(--background)",".termius-dark-theme &":{backgroundColor:"var(--card-c)"},"&:hover":{backgroundColor:"var(--card-b)",".termius-dark-theme &":{backgroundColor:"var(--background-entity)"}}}}),Tn=(t,e)=>c.createElement("svg",{width:64,height:65,viewBox:"0 0 64 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,...t},c.createElement("g",{clipPath:"url(#clip0_8_13739)"},c.createElement("path",{d:"M31.4343 64.4803C48.656 64.4803 62.8738 49.9908 62.8738 32.4902C62.8738 14.964 48.6308 0.5 31.4093 0.5C14.2181 0.5 0 14.964 0 32.4902C0 49.9908 14.243 64.4803 31.4343 64.4803ZM31.4343 58.1787C17.4267 58.1787 6.21705 46.7453 6.21705 32.4902C6.21705 18.2349 17.4018 6.80163 31.4093 6.80163C45.4168 6.80163 56.682 18.2349 56.682 32.4902C56.682 46.7453 45.4417 58.1787 31.4343 58.1787Z",fill:"url(#paint0_linear_8_13739)"}),c.createElement("path",{d:"M28.1416 47.2118C29.2335 47.2118 30.1841 46.6607 30.8311 45.6392L44.4424 24.002C44.8266 23.3325 45.1946 22.6121 45.1946 21.9141C45.1946 20.3644 43.846 19.3325 42.4144 19.3325C41.5222 19.3325 40.6958 19.8726 40.0517 20.8933L28.0363 40.5379L22.381 33.198C21.6342 32.2184 20.9154 31.9147 19.9976 31.9147C18.5302 31.9147 17.3477 33.127 17.3477 34.6457C17.3477 35.3938 17.6325 36.0664 18.1352 36.7384L25.3304 45.6614C26.1459 46.7168 27.0388 47.2118 28.1416 47.2118Z",fill:"url(#paint1_linear_8_13739)"})),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_8_13739",x1:-354995e-12,y1:-.227043,x2:66.2258,y2:3.45435,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#2091F6"}),c.createElement("stop",{offset:1,stopColor:"#21B568"})),c.createElement("linearGradient",{id:"paint1_linear_8_13739",x1:17.3477,y1:19.0157,x2:46.6762,y2:20.6728,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#2091F6"}),c.createElement("stop",{offset:1,stopColor:"#21B568"})),c.createElement("clipPath",{id:"clip0_8_13739"},c.createElement("rect",{width:64,height:64,fill:"white",transform:"translate(0 0.5)"})))),kn=c.forwardRef(Tn),Nn=c.memo(kn),Rn=t=>{const{onClose:e}=t,{classes:r}=Pn();return l(m,{width:"100%",height:"100%",alignItems:"center",justifyContent:"space-between",children:[n(m,{padding:"0px 75px 0px 75px",gap:"20px",alignItems:"center",justifyContent:"center",overflow:"hidden scroll",width:"100%",height:"100%",children:l(m,{gap:"20px",alignItems:"center",children:[n(Nn,{}),l(m,{gap:"10px",alignItems:"center",children:[n(y,{variant:"h2",color:"main",children:"Access granted"}),n(y,{variant:"body1",color:"secondary",children:"Your team members can now connect with just one click."})]})]})}),n(te,{className:r.buttons,primarySlot:n(O,{size:"medium",color:"accent",onClick:e,children:"Done"})})]})},Pn=k()({buttons:{justifyContent:"flex-end"}}),jn=c.forwardRef((t,e)=>{const{classes:r}=Vn(),{firstUserId:a,closeDialog:s,...o}=t,p=xt(o),i=M(Q),[u,h]=Cn({onCloseDialog:()=>s(),firstUserId:a}),{currentMember:b}=u.context,f=M(ee),v=M(ve),N=u.matches("introScreen"),I=f.length===0;c.useEffect(()=>{N&&I&&s()},[N,I,s]);const A=u.matches("mainFlow")||u.matches("grantingAccess")||u.matches("rejectingMember")||u.matches("transitionToNextMember")||u.matches("copyingPermissionsFromOtherMember"),d=u.matches("networkErrorWhenGranting")||u.matches("networkErrorWhenRejecting");return n(bt.div,{style:p,ref:e,children:n(m,{className:r.dialog,children:l(m,{alignItems:"stretch",justifyContent:"space-between",gap:"20px",width:"100%",height:"100%",className:r.root,children:[n(B,{in:u.matches("introScreen"),justifyContent:"space-between",children:n(_n,{members:f,onClose:()=>h("CLOSE_DIALOG"),onContinue:()=>h("GO_TO_MAIN_FLOW"),onSelectMember:g=>{h("GO_TO_MAIN_FLOW",{data:g})},variant:i?"business":"team",isEnterprisePlan:v})}),n(B,{in:A,justifyContent:"space-between",children:n(gn,{state:u,send:h,onClose:()=>h("CLOSE_DIALOG"),isEnterprisePlan:v},b.user_id)}),n(B,{in:u.hasTag("errorNotification"),justifyContent:"space-between",children:l(D,{children:[n(_,{when:u.matches("genericError"),children:n(vt,{onClose:()=>h("CLOSE_DIALOG")})}),n(_,{when:d,children:n(yt,{onBack:()=>h("BACK"),onTryAgain:()=>{h("CONFIRM_ACTION")}})})]})}),n(B,{in:u.matches("successScreen"),justifyContent:"space-between",children:n(Rn,{onClose:()=>s()})})]})})})}),Vn=k()({dialog:{overflow:"hidden",width:"720px",height:"540px",borderRadius:"20px",boxShadow:"0px 5px 15px var(--black-a15)",position:"relative","@media (max-height: 520px)":{height:"100vh"},"@media (max-height: 520px) and (max-width:730px)":{borderRadius:"0",width:"100vw"}},root:{backgroundColor:"var(--foreground)",color:"var(--main)",flex:1}});export{jn as default};
//# sourceMappingURL=GrantVaultsAccess-dc4339c9.js.map
