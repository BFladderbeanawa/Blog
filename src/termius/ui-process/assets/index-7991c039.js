import{d9 as $,da as O,db as z,bg as v,bn as e,f0 as F,bl as i,dn as A,bs as u,dl as j,bW as R,cy as k,r as b,ee as x,Ac as H,bq as m,mD as E,ct as W,cH as q,cw as U,aD as V,dR as X,M as Y,rj as G,p2 as J,Ad as K,xL as Q,bi as g,vS as Z,Ae as ee,Af as te,i6 as se,b_ as ae,qn as L,Ag as ne,ut as ie,xS as re,bh as oe,zU as ce,xh as le,fd as de,Ah as ue,Ai as me,zS as pe,zX as he,zY as ge,bf as fe}from"./reconnectSaga-e33541d6.js";import{L as ve}from"./LinkButton-d3533d09.js";import{d as be}from"./Done-c48a7934.js";import{d as xe}from"./ErrorOutline-5b5a7f18.js";import{u as ye}from"./useHandledClick-7a5237b0.js";import{S as T,a as Se}from"./SettingsSection-42987aa6.js";import{S as ke}from"./SettingsTabContent-3aa4d4a9.js";import{F as Ie}from"./FiltersButton-6774f7ad.js";import{U as N}from"./UserListItem-85567f7e.js";import{M as we}from"./crownIcon.react-fea741bd.js";var w={},_e=O;Object.defineProperty(w,"__esModule",{value:!0});var P=w.default=void 0,Ce=_e($()),Le=z,Te=(0,Ce.default)((0,Le.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link");P=w.default=Te;const Ne={exit:500},y=({isVisible:t,children:s})=>{const{classes:n}=Me();return e(F,{in:t,timeout:Ne,children:e("div",{className:n.item,children:s})})},Me=v()({item:{position:"absolute",display:"flex",alignItems:"center",left:0}}),Ae="Copy invitation link",Re="Copy invitation link",Ee="Invitation link copied!",Pe="Something went wrong!";function Be({className:t,onClick:s,status:n}){const{classes:a,cx:r}=De();return i("div",{className:r(a.inviteLink,t),children:[i(y,{isVisible:n==="default",children:[e(P,{className:r(a.link,a.icon)}),e(A,{onClick:s,onContextMenu:s,children:e(u,{color:"inherit",children:Ae})})]}),i(y,{isVisible:n==="success",children:[e(be,{className:a.icon}),e(u,{color:"inherit",children:Ee})]}),i(y,{isVisible:n==="error",children:[e(xe,{className:a.icon}),e(u,{color:"inherit",children:Pe})]}),i(y,{isVisible:n==="loading",children:[e(j,{className:a.icon,size:24,classes:{colorPrimary:a.progressColor}}),e(u,{color:"inherit",children:Re})]})]})}const De=v()({inviteLink:{fontSize:"14px",lineHeight:"14px",textTransform:"initial",padding:0,fontWeight:500,position:"relative",width:"200px",height:"24px",display:"flex",color:"var(--accent)"},link:{transform:"rotate(-60deg)"},icon:{marginRight:"5px",color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--white)"}},progressColor:{color:"var(--light-grey-1)",".termius-dark-theme &":{color:"var(--white)"}}}),$e=({className:t,onClick:s})=>{const{classes:n}=Oe(),{handleClick:a,status:r}=ye({onClick:s});return e(Be,{className:R(t,{[n.success]:r==="success"}),status:r,onClick:a})},Oe=v()({success:{color:"var(--dark-grey-1)",".termius-dark-theme &":{color:"var(--white)"}}});var B=(t=>(t.enabled="Enabled",t.disabled="Disabled",t))(B||{});const S=Object.values(B),M=({isSelected:t,name:s,children:n})=>{const a=k(),[r,p]=b.useState(!1),{classes:o}=ze(),h=b.useCallback(async l=>{p(!0);try{await x(a,H,{[s]:l})}finally{p(!1)}},[a,s]);return i(m,{className:o.securityRowContainer,children:[e(m,{flexDirection:"row",gap:"10px",alignItems:"center",children:n}),r&&e(m,{ml:"auto",children:e(E,{size:15,className:o.spinner})}),e(W,{toggler:l=>i(Ie,{className:o.text,children:[t?"Enabled":"Disabled",e(q,{className:R(o.arrowIcon,{[o.open]:l.isOpen})})]}),children:({closeMenu:l})=>S.map(d=>e(U,{dense:!0,onClick:()=>{h(d===S[0]).catch(V),l()},endAdornment:t&&d===S[0]||!t&&d===S[1]?e(X,{}):void 0,children:d},d))})]})},ze=v()({securityRowContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",marginTop:"15px"},arrowIcon:{width:"15px",height:"6px",paddingLeft:"5px",fill:"var(--filters-header-color)",marginTop:"2px"},open:{transform:"rotate(180deg)",paddingLeft:"0px",paddingRight:"5px"},text:{color:"var(--secondary)",fontWeight:450},spinner:{color:"var(--secondary)"}}),f={active:"Active",pendingAccess:"Pending access",error:"Send failed",resendInvite:"Resend invite",sending:"Sending...",invitationSent:"Invitation sent"},Fe=({id:t})=>{const{classes:s,cx:n}=je(),a=k(),[r,p]=b.useState(f.resendInvite),o=b.useRef(),[h,l]=b.useState(!0);Y(()=>{o.current&&clearTimeout(o.current)});const[d]=G(()=>({from:{opacity:h?1:0},to:{opacity:1},onResolve:()=>{l(!1)},reset:!h}),[r]);return e(A,{onClick:async()=>{p(f.sending);try{await x(a,K,{id:t}),p(f.invitationSent)}catch{p(f.error)}o.current=setTimeout(()=>p(f.resendInvite),2e3)},className:n(s.status,s.resendButton,{[s.resendError]:r===f.error}),color:"accent",disabled:r!==f.resendInvite,children:e(J.div,{style:d,children:r})})},je=v()({status:{display:"flex",flexShrink:0,minWidth:"108px",marginLeft:"auto",paddingLeft:"10px"},resendButton:{lineHeight:1.5,"&:disabled":{color:"var(--accent)"}},resendError:{"&:disabled":{color:"var(--error-medium)"}}}),He=()=>{const{classes:t}=D(),s=k(),[n,a]=b.useState(!1),r=Q(),p=g(Z),o=g(ee),h=g(te),l=g(se),d=h.account.user_id,_=async()=>{try{a(!0),await r(Promise.all([x(s,ne),x(s,ie)])),a(!1)}catch(c){c instanceof re||a(!1)}finally{a(!1)}};ae(()=>{_()});const C=qe({members:p,owner:h.account});return i(m,{children:[i(m,{className:t.listHeader,children:[i(m,{flexDirection:"row",alignItems:"center",gap:"12px",children:[e(u,{variant:"subtitle1",color:"main",children:"Member"}),n&&e(E,{size:15,color:"inherit"})]}),e(u,{variant:"subtitle1",color:"main",className:t.status,children:"Status"})]}),i(m,{component:"ul",className:t.membersList,children:[C.map(c=>e(N,{user:c,avatar:L(l,c.user_id),disabled:!0,inlineIcons:e(We,{member:c,ownerId:d,currentUserId:d}),titleClassName:I(c)?"":t.secondaryText,endAdornment:e(u,{color:I(c)?"primary":"secondary",className:t.status,children:I(c)?"Active":"Pending access"})},c.user_id)),o.length>0&&o.map(c=>e(N,{avatar:L(l,c.user_id),user:c,disabled:!0,className:t.inviteListItem,titleClassName:t.secondaryText,endAdornment:e(Fe,{id:c.id})},c.id))]})]})},We=({member:t,ownerId:s,currentUserId:n})=>{const{classes:a}=D();return i(m,{className:a.inlineBadges,children:[s===t.user_id&&e(m,{className:a.ownerAdditionalSectionWrapper,children:e(we,{})},"owner"),n===t.user_id&&e(m,{className:a.ownerAdditionalSectionWrapper,children:e(u,{fontSize:7,bolder:!0,className:a.ownerAdditionalSectionLabel,display:"inline",children:"YOU"})},"you")]})};function qe({members:t,owner:s}){return[{id:s.user_id??-1,email:s.email??"",full_name:s.full_name,user_id:s.user_id??-1,is_access_granted:!0,latest_activity:"",two_factor_auth:s.two_factor_auth,has_key_pair:!0,role:"Owner"},...t]}function I(t){return"is_access_granted"in t?!!t.is_access_granted:!1}const D=v()({listHeader:{flexDirection:"row",alignItems:"center",padding:"10px 15px",borderRadius:"10px",justifyContent:"space-between",backgroundColor:"var(--card-b)",".termius-dark-theme &":{backgroundColor:"var(--card-c)"}},ownerAdditionalSectionWrapper:{justifyContent:"center",alignItems:"center",width:"25px",height:"15px",background:"var(--gradient-light-main)",borderRadius:"4px",".termius-dark-theme &":{background:"var(--main-gradient-outline)"}},ownerAdditionalSectionLabel:{lineHeight:1,background:"var(--gradient-universal-main)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textFillColor:"transparent"},status:{display:"flex",flexShrink:0,minWidth:"108px",marginLeft:"auto",paddingLeft:"10px"},inlineBadges:{flexDirection:"row",alignItems:"center",marginLeft:"10px",gap:"5px"},membersList:{overflow:"hidden overlay","&::-webkit-scrollbar":{display:"none"}},secondaryText:{color:"var(--secondary)"},inviteListItem:{pointerEvents:"initial"}}),Ue=()=>{const{classes:t}=Ve(),s=oe(),n=k(),a=g(ce),r=g(le),p=g(de),o=g(ue)||!1,h=g(me)||!1,l=async()=>{s(he({inviteLinkLocation:"Team Screen"}));const d=await x(n,ge,{createTeam:!1});fe.writeText(d.url)};return i(ke,{children:[i(T,{className:t.teamContainer,children:[i(m,{flexDirection:"row",justifyContent:"space-between",children:[e(u,{variant:"subtitle1",color:"main",ellipsis:!0,bolder:!0,children:p}),e(ve,{onClick:pe,variant:"text",color:"accent",disableHover:!0,className:t.manageButton,children:"Manage"})]}),e(He,{}),a&&e($e,{className:t.copyLinkButton,onClick:l})]}),!r&&i(T,{children:[e(Se,{children:"Security"}),i(m,{children:[i(M,{isSelected:o,name:"realtime_collaboration",children:[e(u,{color:"main",children:"Multiplayer"}),e(u,{color:"secondary",children:"Beta"})]}),e(M,{isSelected:h,name:"two_factor_auth",children:e(u,{color:"main",children:"Require 2FA for all team members"})})]})]})]})},Ve=v()({teamContainer:{display:"flex",flexDirection:"column",gap:20},copyLinkButton:{color:"--var(--accent)","& svg":{fill:"var(--accent)"}},manageButton:{padding:0,height:"auto","&:hover:not(:focus-visible):not(:disabled)":{color:"var(--accent-light)"},"&:focus-visible":{background:"var(--accent-transparent)"}}}),at=Ue;export{at as default};
//# sourceMappingURL=index-7991c039.js.map
