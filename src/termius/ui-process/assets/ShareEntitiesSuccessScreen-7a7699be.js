import{bg as M,b8 as H,bn as e,r as u,bl as i,cH as te,bW as C,bs as p,cx as j,bQ as D,jm as se,yA as ie,kL as $,lX as W,ev as z,cy as ae,bh as ne,bi as I,d1 as re,d0 as oe,mk as le,lV as ce,yB as he,bp as de,f1 as pe,iu as A,by as F,mm as G,lE as K,d3 as me,br as E,ee as ge,yu as ue,kv as xe,yC as B,c0 as U,nM as be,cs as fe}from"./reconnectSaga-e33541d6.js";import{R as ve,a as V}from"./RadioOptionsList-4f548194.js";import{S as X}from"./ShareCredentialsDetails-684f97ba.js";const T=({items:m,sharedItems:r,setSharedItems:c,listIcon:g,itemIcon:O,title:a,hasSubItems:_,filterWord:l})=>{const{classes:s}=Se(),v=l==null?void 0:l.toLowerCase(),o=v?m.filter(h=>h instanceof H&&h.address.toLowerCase().includes(v)||h.label.toLowerCase().includes(v)):m,w=e("div",{className:s.itemsTitleIcon,children:g}),k=e("div",{children:O}),[x,S]=u.useState(!1);u.useEffect(()=>{l&&o.length!==0&&S(!0)},[l,o.length]);const y=h=>{h.stopPropagation(),r.length===0?L():b()},b=()=>{c([])},L=()=>{c([...m])},f=i("div",{onClick:()=>{S(!x)},className:s.itemsTitle,children:[i("div",{className:s.itemsTitleLeftPart,children:[e(te,{className:C(s.chevron,{[s.chevronOpened]:x})}),w,e(p,{className:s.itemsTitleLabel,variant:"body1",color:"main",children:a})]}),(l==null?void 0:l.length)===0&&i("div",{className:s.itemsTitleRightPart,children:[e(p,{className:s.itemsLength,variant:"body1",color:"secondary",children:r.length}),e(j,{className:s.checkbox,indeterminate:m.length!==r.length&&r.length!==0,checked:r.length===m.length,onClick:y})]})]});return e(D.Fragment,{children:o.length!==0&&i("div",{children:[f,e(se,{in:x,children:e(ie,{react18ConcurrentRendering:!0,style:{width:"280px",height:"100%",background:"var(--background)",borderRadius:"10px"},useWindowScroll:!0,data:o,overscan:900,itemContent:(h,t,P)=>i("li",{style:P,onClick:()=>{r.some(d=>d.local_id===t.local_id)?c(r.filter(d=>d.local_id!==t.local_id)):c([...r,t])},className:C(s.item,{[s.onlyOneItemHover]:o.length===1,[s.firstItemHover]:h===0&&o.length!==1,[s.lastItemHover]:h===o.length-1&&o.length!==1}),children:[i("div",{className:s.itemLeftPart,children:[k,i("div",{className:C(s.labels,{[s.labelsMargin]:_}),children:[i(p,{ellipsis:!0,variant:"body1",color:"main",className:C(s.itemLabel,{[s.itemLabelPadding]:t instanceof H||t instanceof $}),children:[t instanceof H?t.label||t.address:null,t instanceof $?t.label||t.script:null,t instanceof W||t instanceof z?t.label:null]}),_&&i(p,{ellipsis:!0,variant:"body2",color:"secondary",lineHeight:.9,children:[t instanceof z&&`${t.children_hosts.length} host${t.children_hosts.length!==1?"s":""}`,t instanceof W&&`${t.snippets_count} snippet${t.snippets_count!==1?"s":""}`]})]})]}),e(j,{className:s.checkbox,checked:r.some(d=>d.local_id===t.local_id)})]},h),followOutput:"auto"})})]})})},Se=M()({itemsTitleIcon:{marginTop:"4px"},itemsTitle:{boxSizing:"border-box",display:"flex",justifyContent:"space-between",padding:"15px 10px",width:"280px",height:"51px",alignItems:"center",cursor:"pointer"},chevron:{width:"11px",height:"7px",fill:"var(--main)",transition:"transform 0.2s",color:"var(--main)","&:hover":{color:"var(--accent)",".termius-dark-theme &":{color:"var(--accent)"}}},chevronOpened:{transform:"rotate(180deg)"},itemsTitleLabel:{fontWeight:500},itemsTitleLeftPart:{display:"flex",alignItems:"center",gap:"10px"},itemsTitleRightPart:{display:"flex",gap:"10px",alignItems:"center"},item:{boxSizing:"border-box",width:"100%",height:"45px",padding:"0 10px 0 28px",display:"flex",justifyContent:"space-between",alignItems:"center","&:hover":{background:"var(--card-b)",".termius-dark-theme &":{background:"var(--card-c)"}}},itemLabel:{maxWidth:"190px"},itemLabelPadding:{paddingBottom:"3px"},itemLeftPart:{display:"flex",alignItems:"center",gap:"10px"},onlyOneItemHover:{"&:hover":{borderRadius:"10px"}},firstItemHover:{"&:hover":{borderRadius:"10px 10px 0 0"}},lastItemHover:{"&:hover":{borderRadius:"0 0 10px 10px"}},labels:{display:"flex",alignItems:"start",flexDirection:"column",justifyContent:"center"},itemsLength:{paddingBottom:"1px"},labelsMargin:{marginBottom:"5px"},checkbox:{cursor:"pointer"}}),Te=({onClose:m,setContentType:r,variant:c="default",teamTrialFunnelID:g,entryPointForAnalytics:O="Invite People Button"})=>{const{classes:a}=ye(),_=ae(),l=ne(),[s,v]=u.useState(""),[o,w]=u.useState(null),k=[...I(re)].filter(n=>!n.is_shared&&!n.parent_group),x=[...I(oe)].filter(n=>!n.is_shared&&!n.group),S=[...I(le)].filter(n=>!n.is_shared&&!n.package),y=[...I(ce)].filter(n=>!n.is_shared),[b,L]=u.useState(k),[f,h]=u.useState(S),[t,P]=u.useState(x),[d,Y]=u.useState(y),N=b.length+f.length+t.length+d.length,q=async n=>{r("loading");try{await ge(_,ue,{entities:[...b,...t,...y,...f],targetState:{...xe,credentials_mode:n==="credentials_sharing"?"credentials_sharing":"no_credentials_sharing"}}),l(B({numberOfHosts:t.length,numberOfGroups:b.length,numberOfSnippets:f.length,numberOfPackages:d.length,numberOfKnownHosts:void 0,numberOfSshKeys:void 0,numberOfIdentities:void 0})),setTimeout(()=>{r("successSharing")},1e3),g&&l(U("createTeamWizardViewOpened",{createTeamWizardStep:"Success",openedFrom:O,teamTrialFunnelID:g,trial:"yes"}))}catch(R){r("errorSharing"),be(R,"Sharing entities failed")}},Q=n=>{v(n.target.value)},J=he(),Z=n=>{if(!o){w(n);return}w(o!==n?n:n==="credentials_sharing"?"no_credentials_sharing":"credentials_sharing")},ee=()=>{if(c==="teamTrialFlow"){r("successSharing"),g&&l(U("createTeamWizardViewOpened",{createTeamWizardStep:"Success",openedFrom:"Invite People Button",teamTrialFunnelID:g,trial:"yes"})),l(B({numberOfHosts:0,numberOfGroups:0,numberOfSnippets:0,numberOfPackages:0,numberOfIdentities:0,numberOfKnownHosts:0,numberOfSshKeys:0}));return}l(B({numberOfHosts:t.length,numberOfGroups:b.length,numberOfSnippets:f.length,numberOfPackages:d.length,numberOfKnownHosts:void 0,numberOfSshKeys:void 0,numberOfIdentities:void 0})),m()};return e(D.Fragment,{children:i("div",{className:a.shareScreen,children:[i("div",{className:a.sharingPart,children:[e("div",{className:a.descriptionWrapper,children:i("div",{className:a.descriptionBlock,children:[e(p,{variant:"h2",color:"primary",children:"Share data with your team"}),i(p,{variant:"body1",color:"main",children:["Move your data to the",i(p,{className:a.vaultShareText,variant:"body2",bold:!0,display:"inline",children:[e(de,{className:a.vaultShareIcon}),"Team vault"]}),"to share."]}),e("div",{className:a.descriptionBorder}),e(p,{variant:"body2",color:"main",bold:!0,children:"What access is used in your team?"}),i(ve,{className:a.optionsList,"aria-label":"Credentials mode",onChange:(n,R)=>{Z(R)},value:o,children:[e(V,{id:"credentials_sharing",value:"credentials_sharing",label:"Members share one set of credentials",children:e(X,{mode:"credentials_sharing",variant:"shareEntitiesDialog"})},"credentials_sharing"),e(V,{id:"no_credentials_sharing",value:"no_credentials_sharing",label:"Members use their own credentials",children:e(X,{mode:"no_credentials_sharing",variant:"shareEntitiesDialog"})},"no_credentials_sharing")]})]})}),i("div",{onScroll:J,className:a.sharingWrapper,children:[i("div",{className:a.sharingTopPart,children:[e(pe,{className:a.filter,variant:"outlined",fullWidth:!0,label:"Filter",onChange:Q}),e(p,{variant:"body1",color:"main",children:`${N} item${N!==1?"s":""} selected`})]}),i("div",{className:a.sharingItems,children:[!!k.length&&e(T,{title:"Groups",items:k,listIcon:e(A,{}),itemIcon:e(A,{className:a.itemIcon}),sharedItems:b,setSharedItems:L,filterWord:s,hasSubItems:!0}),!!x.length&&e(T,{title:"Hosts",items:x,listIcon:e(F,{}),itemIcon:e(F,{className:a.itemIcon}),sharedItems:t,setSharedItems:P,filterWord:s}),!!y.length&&e(T,{title:"Snippet packages",items:y,listIcon:e(G,{}),itemIcon:e(G,{className:a.itemIcon}),sharedItems:d,setSharedItems:Y,filterWord:s,hasSubItems:!0}),!!S.length&&e(T,{title:"Snippets",items:S,listIcon:e(K,{}),itemIcon:e(K,{className:a.itemIcon}),sharedItems:f,setSharedItems:h,filterWord:s})]})]})]}),i(me,{className:a.bottomButtons,children:[e(E,{color:"regular",variant:"text",onClick:ee,children:"Do it later"}),e("div",{className:a.bottomButtonsRight,children:e(E,{disabled:N===0||!o,onClick:async()=>{N!==0&&o&&await q(o)},color:"accent",children:"Move to Team Vault"})})]})]})})},ye=M()({vaultShareText:{margin:"0 5px"},vaultShareIcon:{verticalAlign:"middle",padding:"4px",width:"20px",height:"20px"},optionsList:{gap:20},shareScreen:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative","@media (max-height: 520px)":{height:"100vh"}},sharingPart:{display:"flex",maxHeight:"466px",justifyContent:"space-between","@media (max-height: 520px)":{height:"85%"},overflow:"auto"},descriptionWrapper:{width:"420px",padding:"20px",height:"466px","@media (max-height: 520px)":{height:"100%"}},descriptionBlock:{boxSizing:"border-box",display:"flex",gap:"20px",padding:"20px 20px 20px 20px",borderRadius:"10px",flexDirection:"column",width:"100%",height:"fit-content",background:"var(--background)","@media (max-height: 480px)":{gap:"4vh"},"@media (max-height: 465px)":{gap:"3.5vh"},"@media (max-height: 450px)":{gap:"3vh"}},descriptionBorder:{width:"340px",height:"1px",backgroundColor:"var(--light-grey-4)",".termius-dark-theme &":{backgroundColor:"var(--card-c)"}},sharingWrapper:{boxSizing:"border-box",width:"300px",alignSelf:"stretch",flexShrink:1,overflow:"hidden",maxHeight:"466px",position:"relative",paddingRight:"10px"},sharingTopPart:{width:"280px",borderBottom:"1px solid var(--card-b)",padding:"40px 15px 10px 0px",position:"sticky",top:0,background:"var(--foreground)",height:"117px",zIndex:5,display:"flex",flexDirection:"column",justifyContent:"space-between"},filter:{width:"280px"},sharingItems:{height:"349px",overflowY:"scroll",overflowX:"hidden","@media (max-height: 520px)":{height:"68%"}},itemIcon:{boxSizing:"border-box",width:"25px",height:"25px",borderRadius:"5px",marginTop:"3px",padding:"5px",backgroundColor:"var(--dark-blue-solid)",color:"white"},bottomButtons:{width:"100%",height:"74px",justifyContent:"space-between",padding:"20px",borderTop:"1px solid var(--card-b)","@media (max-height: 520px)":{height:"15%"}},bottomButtonsRight:{display:"flex",gap:"10px"}}),we=""+new URL("shareEntitiesSuccessDark-bca02137.webp",import.meta.url).href,ke=""+new URL("shareEntitiesSuccessLight-38e79658.webp",import.meta.url).href,Oe=m=>{const{onClose:r}=m,{classes:c}=Ie(),g=I(fe);return e(D.Fragment,{children:i("div",{className:c.root,children:[i("div",{className:c.contentWrapper,children:[e(p,{variant:"h2",color:"main",align:"center",children:"Your team has been configured!"}),e("img",{className:c.image,src:g?we:ke,alt:""})]}),e("div",{className:c.buttonWrapper,children:e(E,{className:c.button,onClick:r,color:"accent",children:"Done"})})]})})},Ie=M()({root:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center","@media (max-height: 520px)":{height:"100vh"}},contentWrapper:{paddingTop:"40px",width:"100%",height:"466px",display:"flex",gap:"55px",flexDirection:"column",alignItems:"center",justifyContent:"center",borderBottom:"1px solid var(--card-b)","@media (max-height: 520px)":{height:"85%"}},buttonWrapper:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"end","@media (max-height: 520px)":{height:"15%"}},button:{margin:"0px 20px 20px 0px",width:"67px","@media (max-height: 520px)":{marginTop:"3.5vh"}},image:{width:"259.52px",height:"261.02px"}});export{Te as S,Oe as a};
//# sourceMappingURL=ShareEntitiesSuccessScreen-7a7699be.js.map
