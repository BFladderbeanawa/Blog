import{r as v,cy as R,bh as W,bi as c,wh as L,cz as A,yv as N,yw as V,xh as M,bn as e,p2 as H,bl as q,bW as G,xd as n,wL as J,yx as K,mD as Q,xx as b,bg as U,ee as y,xy as X,c0 as m,yy as Y,nM as h,yz as w}from"./reconnectSaga-e33541d6.js";import{S as Z,a as _}from"./ShareEntitiesSuccessScreen-7a7699be.js";import{u as $}from"./fadeIn-42e8fead.js";import{I as ee}from"./InviteSuccessScreen-186f81a6.js";import"./RadioOptionsList-4f548194.js";import"./ShareCredentialsDetails-684f97ba.js";const ce=v.forwardRef((C,k)=>{const{closeDialog:l,teamTrialFunnelID:s,entryPointForAnalytics:p="Invite People Button",...E}=C,{classes:d}=te(),g=R(),o=W(),f=c(L),u=c(A),S=c(N),P=c(V),I=c(M),j=$(E),[i,t]=v.useState("invite"),[B,z]=v.useState([{email:"",role:"Editor"}]),D=async a=>{t("loading");try{await Promise.allSettled(a.map(r=>y(g,w,{email:r.email,role:r.role}))),t("successInvites")}catch(r){t("errorInvites"),h(r,"Inviting members to enterprise department failed")}},x=async a=>{if(z(a),I){await D(a);return}if(!u){t("loading");try{await y(g,X,{createTeam:!0,teamName:"My Team",force2fa:!1,invites:a}),o(m("inviteButtonPressed",{numberOfInvitees:a.length})),S?(t("sharing"),s&&o(m("createTeamWizardViewOpened",{createTeamWizardStep:"Shared Data Picker",openedFrom:p,teamTrialFunnelID:s,trial:"yes"})),o(Y())):(t("successInvites"),s&&o(m("createTeamWizardViewOpened",{createTeamWizardStep:"Success",openedFrom:p,teamTrialFunnelID:s,trial:"yes"})))}catch(r){t("errorInvites"),h(r,"Creating team trial and inviting members failed")}}if(f&&u)try{t("loading");for await(const r of a)try{await y(g,w,{email:r.email,role:r.role})}catch(T){if(T.status!==400)throw T}o(m("inviteButtonPressed",{numberOfInvitees:a.length})),t(P||!S?"successInvites":"sharing")}catch(r){t("errorInvites"),h(r,"Invite team members failed")}},F=()=>{try{l()}catch(a){t("error"),h(a,"Skip presenceEffect inviting failed")}},O=f&&u||I;return e(H.div,{style:j,ref:k,children:e("div",{className:d.dialog,children:q("div",{className:G(d.mainWrapper,{[d.invitePadding]:i==="invite"}),children:[e(n,{in:i==="invite",justifyContent:"center",alignItems:"center",children:e(J,{onSendInvites:x,onSendLater:F,leftButtonTitle:"Later",rightButtonTitle:"Continue",additionalRightButton:O?e(K,{}):void 0})}),e(n,{in:i==="loading",justifyContent:"center",alignItems:"center",children:e(Q,{className:d.progressCircle,size:205,thickness:2})}),e(n,{in:i==="successInvites",justifyContent:"center",alignItems:"center",children:e(ee,{onClose:()=>l()})}),e(n,{in:i==="errorInvites",justifyContent:"center",alignItems:"center",children:e(b,{onBack:()=>t("invite"),onRetry:()=>x(B),hasRetryBtn:!0})}),e(n,{in:i==="sharing",justifyContent:"center",alignItems:"center",children:e(Z,{teamTrialFunnelID:s,variant:"teamTrialFlow",onClose:()=>l(),setContentType:t,entryPointForAnalytics:p})}),e(n,{in:i==="successSharing",justifyContent:"center",alignItems:"center",children:e(_,{onClose:()=>l()})}),e(n,{in:i==="errorSharing",justifyContent:"center",alignItems:"center",children:e(b,{onBack:()=>t("sharing")})})]})})})}),te=U()({dialog:{"--text-color":"var(--dark-grey-1)","--close-color":"var(--light-grey-1)","--border-color":"var(--light-grey-5)",".termius-dark-theme &":{"--text-color":"var(--white)","--close-color":"var(--dark-grey-7)","--border-color":"var(--dark-grey-2)"},overflow:"hidden",width:"720px",height:"100%",borderRadius:"20px",boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",position:"relative",display:"flex",flexDirection:"column","@media (max-height: 460px) and (max-width:730px)":{borderRadius:"0"}},mainWrapper:{backgroundColor:"var(--foreground)",color:"var(--text-color)",width:"720px",height:"540px","@media (max-height: 520px)":{height:"100vh"}},invitePadding:{paddingTop:"90px"},progressCircle:{color:"var(--accent)"}});export{ce as default};
//# sourceMappingURL=TeamTrialViaInvites-ccd6ae24.js.map
