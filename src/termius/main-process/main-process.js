"use strict";var iJ=Object.create;var pA=Object.defineProperty;var oJ=Object.getOwnPropertyDescriptor;var sJ=Object.getOwnPropertyNames;var aJ=Object.getPrototypeOf,lJ=Object.prototype.hasOwnProperty;var cJ=(e,t,n)=>t in e?pA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var uJ=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of sJ(t))!lJ.call(e,i)&&i!==n&&pA(e,i,{get:()=>t[i],enumerable:!(r=oJ(t,i))||r.enumerable});return e};var a2=(e,t,n)=>(n=e!=null?iJ(aJ(e)):{},uJ(t||!e||!e.__esModule?pA(n,"default",{value:e,enumerable:!0}):n,e));var T=(e,t,n)=>(cJ(e,typeof t!="symbol"?t+"":t,n),n);const zc=require("events"),J=require("electron"),Ri=require("os"),mt=require("path"),gr=require("util"),oR=require("http"),jx=require("https"),Sr=require("url"),Rn=require("fs"),Yl=require("child_process"),Qx=require("inspector"),Pl=require("stream"),RC=require("zlib"),dJ=require("domain"),fJ=require("async_hooks"),sR=require("net"),gJ=require("tls"),Ns=require("crypto"),ud=require("@termius/libtermius"),qx=require("tty"),aR=require("assert"),hJ=require("constants"),pJ=require("string_decoder");require("fs/promises");var l2=typeof document<"u"?document.currentScript:null;function Hs(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const Fi=Hs(Ri),mJ=Hs(gr),RI=Hs(oR),yJ=Hs(jx),mA=Hs(Sr),IJ=Hs(Yl),eL=Hs(dJ),vJ=Hs(fJ),cg=Hs(sR),c2=Hs(gJ);var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tL={},nL={},lR={};Object.defineProperty(lR,"__esModule",{value:!0});const yA=(e,t)=>`${e.id}-${t}`;class CJ{constructor(){this.nextId=0,this.storage={},this.owners={},this.electronIds=new WeakMap}add(t,n,r){const i=this.saveToStorage(r),o=yA(t,n);let s=this.owners[o];return s||(s=this.owners[o]=new Map,this.registerDeleteListener(t,n)),s.has(i)||(s.set(i,0),this.storage[i].count++),s.set(i,s.get(i)+1),i}get(t){const n=this.storage[t];if(n!=null)return n.object}remove(t,n,r){const i=yA(t,n),o=this.owners[i];if(o&&o.has(r)){const s=o.get(r)-1;s<=0?(o.delete(r),this.dereference(r)):o.set(r,s)}}clear(t,n){const r=yA(t,n),i=this.owners[r];if(i){for(const o of i.keys())this.dereference(o);delete this.owners[r]}}saveToStorage(t){let n=this.electronIds.get(t);return n||(n=++this.nextId,this.storage[n]={count:0,object:t},this.electronIds.set(t,n)),n}dereference(t){const n=this.storage[t];n!=null&&(n.count-=1,n.count===0&&(this.electronIds.delete(n.object),delete this.storage[t]))}registerDeleteListener(t,n){const r=n.split("-")[0],i=(o,s)=>{s&&s.toString()===r&&(t.removeListener("render-view-deleted",i),this.clear(t,n))};t.on("render-view-deleted",i)}}lR.default=new CJ;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.deserialize=_s.serialize=_s.isSerializableObject=_s.isPromise=void 0;const bJ=J;function AJ(e){return e&&e.then&&e.then instanceof Function&&e.constructor&&e.constructor.reject&&e.constructor.reject instanceof Function&&e.constructor.resolve&&e.constructor.resolve instanceof Function}_s.isPromise=AJ;const SJ=[Boolean,Number,String,Date,Error,RegExp,ArrayBuffer];function cR(e){return e===null||ArrayBuffer.isView(e)||SJ.some(t=>e instanceof t)}_s.isSerializableObject=cR;const rL=function(e,t){const r=Object.entries(e).map(([i,o])=>[i,t(o)]);return Object.fromEntries(r)};function _J(e){const t=[],n=e.getScaleFactors();if(n.length===1){const r=n[0],i=e.getSize(r),o=e.toBitmap({scaleFactor:r});t.push({scaleFactor:r,size:i,buffer:o})}else for(const r of n){const i=e.getSize(r),o=e.toDataURL({scaleFactor:r});t.push({scaleFactor:r,size:i,dataURL:o})}return{__ELECTRON_SERIALIZED_NativeImage__:!0,representations:t}}function wJ(e){const t=bJ.nativeImage.createEmpty();if(e.representations.length===1){const{buffer:n,size:r,scaleFactor:i}=e.representations[0],{width:o,height:s}=r;t.addRepresentation({buffer:n,scaleFactor:i,width:o,height:s})}else for(const n of e.representations){const{dataURL:r,size:i,scaleFactor:o}=n,{width:s,height:a}=i;t.addRepresentation({dataURL:r,scaleFactor:o,width:s,height:a})}return t}function G_(e){return e&&e.constructor&&e.constructor.name==="NativeImage"?_J(e):Array.isArray(e)?e.map(G_):cR(e)?e:e instanceof Object?rL(e,G_):e}_s.serialize=G_;function N_(e){return e&&e.__ELECTRON_SERIALIZED_NativeImage__?wJ(e):Array.isArray(e)?e.map(N_):cR(e)?e:e instanceof Object?rL(e,N_):e}_s.deserialize=N_;var GC={};Object.defineProperty(GC,"__esModule",{value:!0});GC.getElectronBinding=void 0;const BJ=e=>process._linkedBinding?process._linkedBinding("electron_common_"+e):process.electronBinding?process.electronBinding(e):null;GC.getElectronBinding=BJ;(function(e){var t=rn&&rn.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=e.enable=e.isRemoteModuleEnabled=void 0;const n=zc,r=t(lR),i=_s,o=J,a=GC.getElectronBinding("v8_util"),l=(()=>{var P,oe;const X=Number((oe=(P=process.versions.electron)===null||P===void 0?void 0:P.split("."))===null||oe===void 0?void 0:oe[0]);return Number.isNaN(X)||X<14})(),c=["length","name","arguments","caller","prototype"],u=new Map,d=new FinalizationRegistry(P=>{const oe=P.id[0]+"~"+P.id[1],X=u.get(oe);if(X!==void 0&&X.deref()===void 0&&(u.delete(oe),!P.webContents.isDestroyed()))try{P.webContents.sendToFrame(P.frameId,"REMOTE_RENDERER_RELEASE_CALLBACK",P.id[0],P.id[1])}catch(M){console.warn(`sendToFrame() failed: ${M}`)}});function g(P){const oe=P[0]+"~"+P[1],X=u.get(oe);if(X!==void 0){const M=X.deref();if(M!==void 0)return M}}function p(P,oe,X,M){const D=new WeakRef(M),ue=P[0]+"~"+P[1];return u.set(ue,D),d.register(M,{id:P,webContents:oe,frameId:X}),M}const m=new WeakMap,v=function(P){let oe=Object.getOwnPropertyNames(P);return typeof P=="function"&&(oe=oe.filter(X=>!c.includes(X))),oe.map(X=>{const M=Object.getOwnPropertyDescriptor(P,X);let D,ue=!1;return M.get===void 0&&typeof P[X]=="function"?D="method":((M.set||M.writable)&&(ue=!0),D="get"),{name:X,enumerable:M.enumerable,writable:ue,type:D}})},y=function(P){const oe=Object.getPrototypeOf(P);return oe===null||oe===Object.prototype?null:{members:v(oe),proto:y(oe)}},I=function(P,oe,X,M=!1){let D;switch(typeof X){case"object":X instanceof Buffer?D="buffer":X&&X.constructor&&X.constructor.name==="NativeImage"?D="nativeimage":Array.isArray(X)?D="array":X instanceof Error?D="error":i.isSerializableObject(X)?D="value":i.isPromise(X)?D="promise":Object.prototype.hasOwnProperty.call(X,"callee")&&X.length!=null?D="array":M&&a.getHiddenValue(X,"simple")?D="value":D="object";break;case"function":D="function";break;default:D="value";break}return D==="array"?{type:D,members:X.map(ue=>I(P,oe,ue,M))}:D==="nativeimage"?{type:D,value:i.serialize(X)}:D==="object"||D==="function"?{type:D,name:X.constructor?X.constructor.name:"",id:r.default.add(P,oe,X),members:v(X),proto:y(X)}:D==="buffer"?{type:D,value:X}:D==="promise"?(X.then(function(){},function(){}),{type:D,then:I(P,oe,function(ue,Re){X.then(ue,Re)})}):D==="error"?{type:D,value:X,members:Object.keys(X).map(ue=>({name:ue,value:I(P,oe,X[ue])}))}:{type:"value",value:X}},b=function(P){const oe=new Error(P);throw oe.code="EBADRPC",oe.errno=-72,oe},A=(P,oe)=>{let M=`Attempting to call a function in a renderer window that has been closed or released.
Function provided here: ${m.get(oe)}`;if(P instanceof n.EventEmitter){const D=P.eventNames().filter(ue=>P.listeners(ue).includes(oe));D.length>0&&(M+=`
Remote event names: ${D.join(", ")}`,D.forEach(ue=>{P.removeListener(ue,oe)}))}console.warn(M)},N=(P,oe)=>new Proxy(Object,{get(X,M,D){return M==="name"?oe:Reflect.get(X,M,D)}}),L=function(P,oe,X,M){const D=function(ue){switch(ue.type){case"nativeimage":return i.deserialize(ue.value);case"value":return ue.value;case"remote-object":return r.default.get(ue.id);case"array":return L(P,oe,X,ue.value);case"buffer":return Buffer.from(ue.value.buffer,ue.value.byteOffset,ue.value.byteLength);case"promise":return Promise.resolve({then:D(ue.then)});case"object":{const Re=ue.name!=="Object"?Object.create({constructor:N(Object,ue.name)}):{};for(const{name:Oe,value:pe}of ue.members)Re[Oe]=D(pe);return Re}case"function-with-return-value":{const Re=D(ue.value);return function(){return Re}}case"function":{const Re=[X,ue.id],Oe=g(Re);if(Oe!==void 0)return Oe;const pe=function(...re){let q=!1;if(!P.isDestroyed())try{q=P.sendToFrame(oe,"REMOTE_RENDERER_CALLBACK",X,ue.id,I(P,X,re))!==!1}catch(Be){console.warn(`sendToFrame() failed: ${Be}`)}q||A(this,pe)};return m.set(pe,ue.location),Object.defineProperty(pe,"length",{value:ue.length}),p(Re,P,oe,pe),pe}default:throw new TypeError(`Unknown type: ${ue.type}`)}};return M.map(D)},G=function(P){const oe=P.getLastWebPreferences()||{};return oe.enableRemoteModule!=null?!!oe.enableRemoteModule:!1},W=new WeakMap,j=function(P){return l&&!W.has(P)&&W.set(P,G(P)),W.get(P)};e.isRemoteModuleEnabled=j;function O(P){W.set(P,!0)}e.enable=O;const Ce=function(P,oe){o.ipcMain.on(P,(X,M,...D)=>{let ue;if(!e.isRemoteModuleEnabled(X.sender)){X.returnValue={type:"exception",value:I(X.sender,M,new Error('@electron/remote is disabled for this WebContents. Call require("@electron/remote/main").enable(webContents) to enable it.'))};return}try{ue=oe(X,M,...D)}catch(Re){ue={type:"exception",value:I(X.sender,M,Re)}}ue!==void 0&&(X.returnValue=ue)})},Ue=function(P,oe,...X){const M={sender:P,returnValue:void 0,defaultPrevented:!1};return o.app.emit(oe,M,P,...X),P.emit(oe,M,...X),M},$e=function(P,oe,X){X&&console.warn(`WebContents (${P.id}): ${oe}`,X)};let ze=!1;function Ee(){if(ze)throw new Error("@electron/remote has already been initialized");ze=!0,Ce("REMOTE_BROWSER_WRONG_CONTEXT_ERROR",function(P,oe,X,M){const ue=g([X,M]);ue!==void 0&&A(P.sender,ue)}),Ce("REMOTE_BROWSER_REQUIRE",function(P,oe,X,M){$e(P.sender,`remote.require('${X}')`,M);const D=Ue(P.sender,"remote-require",X);if(D.returnValue===void 0){if(D.defaultPrevented)throw new Error(`Blocked remote.require('${X}')`);D.returnValue=process.mainModule.require(X)}return I(P.sender,oe,D.returnValue)}),Ce("REMOTE_BROWSER_GET_BUILTIN",function(P,oe,X,M){$e(P.sender,`remote.getBuiltin('${X}')`,M);const D=Ue(P.sender,"remote-get-builtin",X);if(D.returnValue===void 0){if(D.defaultPrevented)throw new Error(`Blocked remote.getBuiltin('${X}')`);D.returnValue=J[X]}return I(P.sender,oe,D.returnValue)}),Ce("REMOTE_BROWSER_GET_GLOBAL",function(P,oe,X,M){$e(P.sender,`remote.getGlobal('${X}')`,M);const D=Ue(P.sender,"remote-get-global",X);if(D.returnValue===void 0){if(D.defaultPrevented)throw new Error(`Blocked remote.getGlobal('${X}')`);D.returnValue=rn[X]}return I(P.sender,oe,D.returnValue)}),Ce("REMOTE_BROWSER_GET_CURRENT_WINDOW",function(P,oe,X){$e(P.sender,"remote.getCurrentWindow()",X);const M=Ue(P.sender,"remote-get-current-window");if(M.returnValue===void 0){if(M.defaultPrevented)throw new Error("Blocked remote.getCurrentWindow()");M.returnValue=P.sender.getOwnerBrowserWindow()}return I(P.sender,oe,M.returnValue)}),Ce("REMOTE_BROWSER_GET_CURRENT_WEB_CONTENTS",function(P,oe,X){$e(P.sender,"remote.getCurrentWebContents()",X);const M=Ue(P.sender,"remote-get-current-web-contents");if(M.returnValue===void 0){if(M.defaultPrevented)throw new Error("Blocked remote.getCurrentWebContents()");M.returnValue=P.sender}return I(P.sender,oe,M.returnValue)}),Ce("REMOTE_BROWSER_CONSTRUCTOR",function(P,oe,X,M){M=L(P.sender,P.frameId,oe,M);const D=r.default.get(X);return D==null&&b(`Cannot call constructor on missing remote object ${X}`),I(P.sender,oe,new D(...M))}),Ce("REMOTE_BROWSER_FUNCTION_CALL",function(P,oe,X,M){M=L(P.sender,P.frameId,oe,M);const D=r.default.get(X);D==null&&b(`Cannot call function on missing remote object ${X}`);try{return I(P.sender,oe,D(...M),!0)}catch(ue){const Re=new Error(`Could not call remote function '${D.name||"anonymous"}'. Check that the function signature is correct. Underlying error: ${ue}
`+(ue instanceof Error?`Underlying stack: ${ue.stack}
`:""));throw Re.cause=ue,Re}}),Ce("REMOTE_BROWSER_MEMBER_CONSTRUCTOR",function(P,oe,X,M,D){D=L(P.sender,P.frameId,oe,D);const ue=r.default.get(X);return ue==null&&b(`Cannot call constructor '${M}' on missing remote object ${X}`),I(P.sender,oe,new ue[M](...D))}),Ce("REMOTE_BROWSER_MEMBER_CALL",function(P,oe,X,M,D){D=L(P.sender,P.frameId,oe,D);const ue=r.default.get(X);ue==null&&b(`Cannot call method '${M}' on missing remote object ${X}`);try{return I(P.sender,oe,ue[M](...D),!0)}catch(Re){const Oe=new Error(`Could not call remote method '${M}'. Check that the method signature is correct. Underlying error: ${Re}`+(Re instanceof Error?`Underlying stack: ${Re.stack}
`:""));throw Oe.cause=Re,Oe}}),Ce("REMOTE_BROWSER_MEMBER_SET",function(P,oe,X,M,D){D=L(P.sender,P.frameId,oe,D);const ue=r.default.get(X);return ue==null&&b(`Cannot set property '${M}' on missing remote object ${X}`),ue[M]=D[0],null}),Ce("REMOTE_BROWSER_MEMBER_GET",function(P,oe,X,M){const D=r.default.get(X);return D==null&&b(`Cannot get property '${M}' on missing remote object ${X}`),I(P.sender,oe,D[M])}),Ce("REMOTE_BROWSER_DEREFERENCE",function(P,oe,X){r.default.remove(P.sender,oe,X)}),Ce("REMOTE_BROWSER_CONTEXT_RELEASE",(P,oe)=>(r.default.clear(P.sender,oe),null))}e.initialize=Ee})(nL);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.initialize=void 0;var t=nL;Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}}),Object.defineProperty(e,"enable",{enumerable:!0,get:function(){return t.enable}})})(tL);var uR=tL,Z_={exports:{}};(function(e,t){t=e.exports=ut;var n;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?n=function(){var V=Array.prototype.slice.call(arguments,0);V.unshift("SEMVER"),console.log.apply(console,V)}:n=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=r-6,a=t.re=[],l=t.safeRe=[],c=t.src=[],u=0,d="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",r],[d,s]];function p(V){for(var K=0;K<g.length;K++){var ge=g[K][0],We=g[K][1];V=V.split(ge+"*").join(ge+"{0,"+We+"}").split(ge+"+").join(ge+"{1,"+We+"}")}return V}var m=u++;c[m]="0|[1-9]\\d*";var v=u++;c[v]="\\d+";var y=u++;c[y]="\\d*[a-zA-Z-]"+d+"*";var I=u++;c[I]="("+c[m]+")\\.("+c[m]+")\\.("+c[m]+")";var b=u++;c[b]="("+c[v]+")\\.("+c[v]+")\\.("+c[v]+")";var A=u++;c[A]="(?:"+c[m]+"|"+c[y]+")";var N=u++;c[N]="(?:"+c[v]+"|"+c[y]+")";var L=u++;c[L]="(?:-("+c[A]+"(?:\\."+c[A]+")*))";var G=u++;c[G]="(?:-?("+c[N]+"(?:\\."+c[N]+")*))";var W=u++;c[W]=d+"+";var j=u++;c[j]="(?:\\+("+c[W]+"(?:\\."+c[W]+")*))";var O=u++,Ce="v?"+c[I]+c[L]+"?"+c[j]+"?";c[O]="^"+Ce+"$";var Ue="[v=\\s]*"+c[b]+c[G]+"?"+c[j]+"?",$e=u++;c[$e]="^"+Ue+"$";var ze=u++;c[ze]="((?:<|>)?=?)";var Ee=u++;c[Ee]=c[v]+"|x|X|\\*";var P=u++;c[P]=c[m]+"|x|X|\\*";var oe=u++;c[oe]="[v=\\s]*("+c[P]+")(?:\\.("+c[P]+")(?:\\.("+c[P]+")(?:"+c[L]+")?"+c[j]+"?)?)?";var X=u++;c[X]="[v=\\s]*("+c[Ee]+")(?:\\.("+c[Ee]+")(?:\\.("+c[Ee]+")(?:"+c[G]+")?"+c[j]+"?)?)?";var M=u++;c[M]="^"+c[ze]+"\\s*"+c[oe]+"$";var D=u++;c[D]="^"+c[ze]+"\\s*"+c[X]+"$";var ue=u++;c[ue]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var Re=u++;c[Re]="(?:~>?)";var Oe=u++;c[Oe]="(\\s*)"+c[Re]+"\\s+",a[Oe]=new RegExp(c[Oe],"g"),l[Oe]=new RegExp(p(c[Oe]),"g");var pe="$1~",re=u++;c[re]="^"+c[Re]+c[oe]+"$";var q=u++;c[q]="^"+c[Re]+c[X]+"$";var Be=u++;c[Be]="(?:\\^)";var B=u++;c[B]="(\\s*)"+c[Be]+"\\s+",a[B]=new RegExp(c[B],"g"),l[B]=new RegExp(p(c[B]),"g");var w="$1^",F=u++;c[F]="^"+c[Be]+c[oe]+"$";var Y=u++;c[Y]="^"+c[Be]+c[X]+"$";var Se=u++;c[Se]="^"+c[ze]+"\\s*("+Ue+")$|^$";var Ge=u++;c[Ge]="^"+c[ze]+"\\s*("+Ce+")$|^$";var ke=u++;c[ke]="(\\s*)"+c[ze]+"\\s*("+Ue+"|"+c[oe]+")",a[ke]=new RegExp(c[ke],"g"),l[ke]=new RegExp(p(c[ke]),"g");var dt="$1$2$3",ot=u++;c[ot]="^\\s*("+c[oe]+")\\s+-\\s+("+c[oe]+")\\s*$";var bt=u++;c[bt]="^\\s*("+c[X]+")\\s+-\\s+("+c[X]+")\\s*$";var Wt=u++;c[Wt]="(<|>)?=?\\s*\\*";for(var pt=0;pt<u;pt++)n(pt,c[pt]),a[pt]||(a[pt]=new RegExp(c[pt]),l[pt]=new RegExp(p(c[pt])));t.parse=Et;function Et(V,K){if((!K||typeof K!="object")&&(K={loose:!!K,includePrerelease:!1}),V instanceof ut)return V;if(typeof V!="string"||V.length>r)return null;var ge=K.loose?l[$e]:l[O];if(!ge.test(V))return null;try{return new ut(V,K)}catch{return null}}t.valid=On;function On(V,K){var ge=Et(V,K);return ge?ge.version:null}t.clean=Qt;function Qt(V,K){var ge=Et(V.trim().replace(/^[=v]+/,""),K);return ge?ge.version:null}t.SemVer=ut;function ut(V,K){if((!K||typeof K!="object")&&(K={loose:!!K,includePrerelease:!1}),V instanceof ut){if(V.loose===K.loose)return V;V=V.version}else if(typeof V!="string")throw new TypeError("Invalid Version: "+V);if(V.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof ut))return new ut(V,K);n("SemVer",V,K),this.options=K,this.loose=!!K.loose;var ge=V.trim().match(K.loose?l[$e]:l[O]);if(!ge)throw new TypeError("Invalid Version: "+V);if(this.raw=V,this.major=+ge[1],this.minor=+ge[2],this.patch=+ge[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");ge[4]?this.prerelease=ge[4].split(".").map(function(We){if(/^[0-9]+$/.test(We)){var Le=+We;if(Le>=0&&Le<i)return Le}return We}):this.prerelease=[],this.build=ge[5]?ge[5].split("."):[],this.format()}ut.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ut.prototype.toString=function(){return this.version},ut.prototype.compare=function(V){return n("SemVer.compare",this.version,this.options,V),V instanceof ut||(V=new ut(V,this.options)),this.compareMain(V)||this.comparePre(V)},ut.prototype.compareMain=function(V){return V instanceof ut||(V=new ut(V,this.options)),we(this.major,V.major)||we(this.minor,V.minor)||we(this.patch,V.patch)},ut.prototype.comparePre=function(V){if(V instanceof ut||(V=new ut(V,this.options)),this.prerelease.length&&!V.prerelease.length)return-1;if(!this.prerelease.length&&V.prerelease.length)return 1;if(!this.prerelease.length&&!V.prerelease.length)return 0;var K=0;do{var ge=this.prerelease[K],We=V.prerelease[K];if(n("prerelease compare",K,ge,We),ge===void 0&&We===void 0)return 0;if(We===void 0)return 1;if(ge===void 0)return-1;if(ge===We)continue;return we(ge,We)}while(++K)},ut.prototype.inc=function(V,K){switch(V){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",K);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",K);break;case"prepatch":this.prerelease.length=0,this.inc("patch",K),this.inc("pre",K);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",K),this.inc("pre",K);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ge=this.prerelease.length;--ge>=0;)typeof this.prerelease[ge]=="number"&&(this.prerelease[ge]++,ge=-2);ge===-1&&this.prerelease.push(0)}K&&(this.prerelease[0]===K?isNaN(this.prerelease[1])&&(this.prerelease=[K,0]):this.prerelease=[K,0]);break;default:throw new Error("invalid increment argument: "+V)}return this.format(),this.raw=this.version,this},t.inc=St;function St(V,K,ge,We){typeof ge=="string"&&(We=ge,ge=void 0);try{return new ut(V,ge).inc(K,We).version}catch{return null}}t.diff=se;function se(V,K){if(ts(V,K))return null;var ge=Et(V),We=Et(K),Le="";if(ge.prerelease.length||We.prerelease.length){Le="pre";var tt="prerelease"}for(var at in ge)if((at==="major"||at==="minor"||at==="patch")&&ge[at]!==We[at])return Le+at;return tt}t.compareIdentifiers=we;var fe=/^[0-9]+$/;function we(V,K){var ge=fe.test(V),We=fe.test(K);return ge&&We&&(V=+V,K=+K),V===K?0:ge&&!We?-1:We&&!ge?1:V<K?-1:1}t.rcompareIdentifiers=Te;function Te(V,K){return we(K,V)}t.major=qe;function qe(V,K){return new ut(V,K).major}t.minor=Jt;function Jt(V,K){return new ut(V,K).minor}t.patch=ct;function ct(V,K){return new ut(V,K).patch}t.compare=xe;function xe(V,K,ge){return new ut(V,ge).compare(new ut(K,ge))}t.compareLoose=Ye;function Ye(V,K){return xe(V,K,!0)}t.rcompare=Gt;function Gt(V,K,ge){return xe(K,V,ge)}t.sort=ft;function ft(V,K){return V.sort(function(ge,We){return t.compare(ge,We,K)})}t.rsort=Je;function Je(V,K){return V.sort(function(ge,We){return t.rcompare(ge,We,K)})}t.gt=Hn;function Hn(V,K,ge){return xe(V,K,ge)>0}t.lt=Kr;function Kr(V,K,ge){return xe(V,K,ge)<0}t.eq=ts;function ts(V,K,ge){return xe(V,K,ge)===0}t.neq=De;function De(V,K,ge){return xe(V,K,ge)!==0}t.gte=ns;function ns(V,K,ge){return xe(V,K,ge)>=0}t.lte=Wa;function Wa(V,K,ge){return xe(V,K,ge)<=0}t.cmp=rs;function rs(V,K,ge,We){switch(K){case"===":return typeof V=="object"&&(V=V.version),typeof ge=="object"&&(ge=ge.version),V===ge;case"!==":return typeof V=="object"&&(V=V.version),typeof ge=="object"&&(ge=ge.version),V!==ge;case"":case"=":case"==":return ts(V,ge,We);case"!=":return De(V,ge,We);case">":return Hn(V,ge,We);case">=":return ns(V,ge,We);case"<":return Kr(V,ge,We);case"<=":return Wa(V,ge,We);default:throw new TypeError("Invalid operator: "+K)}}t.Comparator=Jn;function Jn(V,K){if((!K||typeof K!="object")&&(K={loose:!!K,includePrerelease:!1}),V instanceof Jn){if(V.loose===!!K.loose)return V;V=V.value}if(!(this instanceof Jn))return new Jn(V,K);V=V.trim().split(/\s+/).join(" "),n("comparator",V,K),this.options=K,this.loose=!!K.loose,this.parse(V),this.semver===Mr?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}var Mr={};Jn.prototype.parse=function(V){var K=this.options.loose?l[Se]:l[Ge],ge=V.match(K);if(!ge)throw new TypeError("Invalid comparator: "+V);this.operator=ge[1],this.operator==="="&&(this.operator=""),ge[2]?this.semver=new ut(ge[2],this.options.loose):this.semver=Mr},Jn.prototype.toString=function(){return this.value},Jn.prototype.test=function(V){return n("Comparator.test",V,this.options.loose),this.semver===Mr?!0:(typeof V=="string"&&(V=new ut(V,this.options)),rs(V,this.operator,this.semver,this.options))},Jn.prototype.intersects=function(V,K){if(!(V instanceof Jn))throw new TypeError("a Comparator is required");(!K||typeof K!="object")&&(K={loose:!!K,includePrerelease:!1});var ge;if(this.operator==="")return ge=new dn(V.value,K),$r(this.value,ge,K);if(V.operator==="")return ge=new dn(this.value,K),$r(V.semver,ge,K);var We=(this.operator===">="||this.operator===">")&&(V.operator===">="||V.operator===">"),Le=(this.operator==="<="||this.operator==="<")&&(V.operator==="<="||V.operator==="<"),tt=this.semver.version===V.semver.version,at=(this.operator===">="||this.operator==="<=")&&(V.operator===">="||V.operator==="<="),Nt=rs(this.semver,"<",V.semver,K)&&(this.operator===">="||this.operator===">")&&(V.operator==="<="||V.operator==="<"),_t=rs(this.semver,">",V.semver,K)&&(this.operator==="<="||this.operator==="<")&&(V.operator===">="||V.operator===">");return We||Le||tt&&at||Nt||_t},t.Range=dn;function dn(V,K){if((!K||typeof K!="object")&&(K={loose:!!K,includePrerelease:!1}),V instanceof dn)return V.loose===!!K.loose&&V.includePrerelease===!!K.includePrerelease?V:new dn(V.raw,K);if(V instanceof Jn)return new dn(V.value,K);if(!(this instanceof dn))return new dn(V,K);if(this.options=K,this.loose=!!K.loose,this.includePrerelease=!!K.includePrerelease,this.raw=V.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(ge){return this.parseRange(ge.trim())},this).filter(function(ge){return ge.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}dn.prototype.format=function(){return this.range=this.set.map(function(V){return V.join(" ").trim()}).join("||").trim(),this.range},dn.prototype.toString=function(){return this.range},dn.prototype.parseRange=function(V){var K=this.options.loose,ge=K?l[bt]:l[ot];V=V.replace(ge,pi),n("hyphen replace",V),V=V.replace(l[ke],dt),n("comparator trim",V,l[ke]),V=V.replace(l[Oe],pe),V=V.replace(l[B],w);var We=K?l[Se]:l[Ge],Le=V.split(" ").map(function(tt){return $i(tt,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Le=Le.filter(function(tt){return!!tt.match(We)})),Le=Le.map(function(tt){return new Jn(tt,this.options)},this),Le},dn.prototype.intersects=function(V,K){if(!(V instanceof dn))throw new TypeError("a Range is required");return this.set.some(function(ge){return ge.every(function(We){return V.set.some(function(Le){return Le.every(function(tt){return We.intersects(tt,K)})})})})},t.toComparators=Jl;function Jl(V,K){return new dn(V,K).set.map(function(ge){return ge.map(function(We){return We.value}).join(" ").trim().split(" ")})}function $i(V,K){return n("comp",V,K),V=hn(V,K),n("caret",V),V=jl(V,K),n("tildes",V),V=qf(V,K),n("xrange",V),V=is(V,K),n("stars",V),V}function gn(V){return!V||V.toLowerCase()==="x"||V==="*"}function jl(V,K){return V.trim().split(/\s+/).map(function(ge){return ka(ge,K)}).join(" ")}function ka(V,K){var ge=K.loose?l[q]:l[re];return V.replace(ge,function(We,Le,tt,at,Nt){n("tilde",V,We,Le,tt,at,Nt);var _t;return gn(Le)?_t="":gn(tt)?_t=">="+Le+".0.0 <"+(+Le+1)+".0.0":gn(at)?_t=">="+Le+"."+tt+".0 <"+Le+"."+(+tt+1)+".0":Nt?(n("replaceTilde pr",Nt),_t=">="+Le+"."+tt+"."+at+"-"+Nt+" <"+Le+"."+(+tt+1)+".0"):_t=">="+Le+"."+tt+"."+at+" <"+Le+"."+(+tt+1)+".0",n("tilde return",_t),_t})}function hn(V,K){return V.trim().split(/\s+/).map(function(ge){return kn(ge,K)}).join(" ")}function kn(V,K){n("caret",V,K);var ge=K.loose?l[Y]:l[F];return V.replace(ge,function(We,Le,tt,at,Nt){n("caret",V,We,Le,tt,at,Nt);var _t;return gn(Le)?_t="":gn(tt)?_t=">="+Le+".0.0 <"+(+Le+1)+".0.0":gn(at)?Le==="0"?_t=">="+Le+"."+tt+".0 <"+Le+"."+(+tt+1)+".0":_t=">="+Le+"."+tt+".0 <"+(+Le+1)+".0.0":Nt?(n("replaceCaret pr",Nt),Le==="0"?tt==="0"?_t=">="+Le+"."+tt+"."+at+"-"+Nt+" <"+Le+"."+tt+"."+(+at+1):_t=">="+Le+"."+tt+"."+at+"-"+Nt+" <"+Le+"."+(+tt+1)+".0":_t=">="+Le+"."+tt+"."+at+"-"+Nt+" <"+(+Le+1)+".0.0"):(n("no pr"),Le==="0"?tt==="0"?_t=">="+Le+"."+tt+"."+at+" <"+Le+"."+tt+"."+(+at+1):_t=">="+Le+"."+tt+"."+at+" <"+Le+"."+(+tt+1)+".0":_t=">="+Le+"."+tt+"."+at+" <"+(+Le+1)+".0.0"),n("caret return",_t),_t})}function qf(V,K){return n("replaceXRanges",V,K),V.split(/\s+/).map(function(ge){return Ds(ge,K)}).join(" ")}function Ds(V,K){V=V.trim();var ge=K.loose?l[D]:l[M];return V.replace(ge,function(We,Le,tt,at,Nt,_t){n("xRange",V,We,Le,tt,at,Nt,_t);var mr=gn(tt),zr=mr||gn(at),wt=zr||gn(Nt),sr=wt;return Le==="="&&sr&&(Le=""),mr?Le===">"||Le==="<"?We="<0.0.0":We="*":Le&&sr?(zr&&(at=0),Nt=0,Le===">"?(Le=">=",zr?(tt=+tt+1,at=0,Nt=0):(at=+at+1,Nt=0)):Le==="<="&&(Le="<",zr?tt=+tt+1:at=+at+1),We=Le+tt+"."+at+"."+Nt):zr?We=">="+tt+".0.0 <"+(+tt+1)+".0.0":wt&&(We=">="+tt+"."+at+".0 <"+tt+"."+(+at+1)+".0"),n("xRange return",We),We})}function is(V,K){return n("replaceStars",V,K),V.trim().replace(l[Wt],"")}function pi(V,K,ge,We,Le,tt,at,Nt,_t,mr,zr,wt,sr){return gn(ge)?K="":gn(We)?K=">="+ge+".0.0":gn(Le)?K=">="+ge+"."+We+".0":K=">="+K,gn(_t)?Nt="":gn(mr)?Nt="<"+(+_t+1)+".0.0":gn(zr)?Nt="<"+_t+"."+(+mr+1)+".0":wt?Nt="<="+_t+"."+mr+"."+zr+"-"+wt:Nt="<="+Nt,(K+" "+Nt).trim()}dn.prototype.test=function(V){if(!V)return!1;typeof V=="string"&&(V=new ut(V,this.options));for(var K=0;K<this.set.length;K++)if(eg(this.set[K],V,this.options))return!0;return!1};function eg(V,K,ge){for(var We=0;We<V.length;We++)if(!V[We].test(K))return!1;if(K.prerelease.length&&!ge.includePrerelease){for(We=0;We<V.length;We++)if(n(V[We].semver),V[We].semver!==Mr&&V[We].semver.prerelease.length>0){var Le=V[We].semver;if(Le.major===K.major&&Le.minor===K.minor&&Le.patch===K.patch)return!0}return!1}return!0}t.satisfies=$r;function $r(V,K,ge){try{K=new dn(K,ge)}catch{return!1}return K.test(V)}t.maxSatisfying=os;function os(V,K,ge){var We=null,Le=null;try{var tt=new dn(K,ge)}catch{return null}return V.forEach(function(at){tt.test(at)&&(!We||Le.compare(at)===-1)&&(We=at,Le=new ut(We,ge))}),We}t.minSatisfying=zi;function zi(V,K,ge){var We=null,Le=null;try{var tt=new dn(K,ge)}catch{return null}return V.forEach(function(at){tt.test(at)&&(!We||Le.compare(at)===1)&&(We=at,Le=new ut(We,ge))}),We}t.minVersion=Va;function Va(V,K){V=new dn(V,K);var ge=new ut("0.0.0");if(V.test(ge)||(ge=new ut("0.0.0-0"),V.test(ge)))return ge;ge=null;for(var We=0;We<V.set.length;++We){var Le=V.set[We];Le.forEach(function(tt){var at=new ut(tt.semver.version);switch(tt.operator){case">":at.prerelease.length===0?at.patch++:at.prerelease.push(0),at.raw=at.format();case"":case">=":(!ge||Hn(ge,at))&&(ge=at);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+tt.operator)}})}return ge&&V.test(ge)?ge:null}t.validRange=Ni;function Ni(V,K){try{return new dn(V,K).range||"*"}catch{return null}}t.ltr=Ji;function Ji(V,K,ge){return Zi(V,K,"<",ge)}t.gtr=Iu;function Iu(V,K,ge){return Zi(V,K,">",ge)}t.outside=Zi;function Zi(V,K,ge,We){V=new ut(V,We),K=new dn(K,We);var Le,tt,at,Nt,_t;switch(ge){case">":Le=Hn,tt=Wa,at=Kr,Nt=">",_t=">=";break;case"<":Le=Kr,tt=ns,at=Hn,Nt="<",_t="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($r(V,K,We))return!1;for(var mr=0;mr<K.set.length;++mr){var zr=K.set[mr],wt=null,sr=null;if(zr.forEach(function(Ti){Ti.semver===Mr&&(Ti=new Jn(">=0.0.0")),wt=wt||Ti,sr=sr||Ti,Le(Ti.semver,wt.semver,We)?wt=Ti:at(Ti.semver,sr.semver,We)&&(sr=Ti)}),wt.operator===Nt||wt.operator===_t||(!sr.operator||sr.operator===Nt)&&tt(V,sr.semver))return!1;if(sr.operator===_t&&at(V,sr.semver))return!1}return!0}t.prerelease=vu;function vu(V,K){var ge=Et(V,K);return ge&&ge.prerelease.length?ge.prerelease:null}t.intersects=Ql;function Ql(V,K,ge){return V=new dn(V,ge),K=new dn(K,ge),V.intersects(K)}t.coerce=nn;function nn(V){if(V instanceof ut)return V;if(typeof V!="string")return null;var K=V.match(l[ue]);return K==null?null:Et(K[1]+"."+(K[2]||"0")+"."+(K[3]||"0"))}})(Z_,Z_.exports);var T_=Z_.exports;const EJ=parseInt(process.env.ELECTRON_IS_DEV,10)===1,RJ="ELECTRON_IS_DEV"in process.env;var GJ=RJ?EJ:process.defaultApp||/node_modules[\\/]electron[\\/]/.test(process.execPath);const iL=T_,IA=iL.gt,vA=iL.lt,NC=Ri.release,oL=GJ;function $n(){}$n.prototype.renderer=function(){return process.type==="renderer"};$n.prototype.main=function(){return process.type==="browser"};$n.prototype.osx=$n.prototype.macOS=function(){return process.platform==="darwin"};$n.prototype.windows=function(){return process.platform==="win32"};$n.prototype.linux=function(){return process.platform==="linux"};$n.prototype.x86=function(){return process.arch==="ia32"};$n.prototype.x64=function(){return process.arch==="x64"};$n.prototype.production=function(){return!oL};$n.prototype.dev=function(){return oL};$n.prototype.sandbox=function(){return"APP_SANDBOX_CONTAINER_ID"in process.env};$n.prototype.mas=function(){return process.mas===!0};$n.prototype.windowsStore=function(){return process.windowsStore===!0};$n.prototype.all=function(){const e=new Array(arguments.length);for(var t=0;t<e.length;t++)e[t]=arguments[t];if(e.length){for(t=0;t<e.length;t++)if(!e[t]())return!1;return!0}};$n.prototype.none=function(){const e=new Array(arguments.length);for(var t=0;t<e.length;t++)e[t]=arguments[t];if(e.length){for(t=0;t<e.length;t++)if(e[t]())return!1;return!0}};$n.prototype.one=function(){const e=new Array(arguments.length);for(var t=0;t<e.length;t++)e[t]=arguments[t];if(e.length){for(t=0;t<e.length;t++)if(e[t]())return!0;return!1}};$n.prototype.release=function(e){if(this.osx())return e===dR();if(this.windows()){e=e.split(".");const t=NC().split(".");return e.length===2?`${t[0]}.${t[1]}`==`${e[0]}.${e[1]}`:`${t[0]}.${t[1]}.${t[2]}`==`${e[0]}.${e[1]}.${e[2]}`}else return null};$n.prototype.gtRelease=function(e){if(this.osx())return IA(e,dR());if(this.windows()){e=e.split(".");const t=NC().split(".");return e.length===2?IA(`${e[0]}.${e[1]}.0`,`${t[0]}.${t[1]}.0`):IA(`${e[0]}.${e[1]}.${e[2]}`,`${t[0]}.${t[1]}.${t[2]}`)}else return null};$n.prototype.ltRelease=function(e){if(this.osx())return vA(e,dR());if(this.windows()){e=e.split(".");const t=NC().split(".");return e.length===2?vA(`${e[0]}.${e[1]}.0`,`${t[0]}.${t[1]}.0`):vA(`${e[0]}.${e[1]}.${e[2]}`,`${t[0]}.${t[1]}.${t[2]}`)}else return null};function dR(){const e=NC().split(".");return`10.${e[0]-4}.${e[1]}`}var NJ=new $n;const vt=Ht(NJ);function xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zs(e){return!!e&&!!e[kt]}function co(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===LJ}(e)||Array.isArray(e)||!!e[k_]||!!(!((t=e.constructor)===null||t===void 0)&&t[k_])||fR(e)||gR(e))}function ZJ(e){return Zs(e)||xi(23,e),e[kt].t}function Sl(e,t,n){n===void 0&&(n=!1),yf(e)===0?(n?Object.keys:fd)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function yf(e){var t=e[kt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fR(e)?2:gR(e)?3:0}function dd(e,t){return yf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function TJ(e,t){return yf(e)===2?e.get(t):e[t]}function sL(e,t,n){var r=yf(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function aL(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fR(e){return FJ&&e instanceof Map}function gR(e){return xJ&&e instanceof Set}function ar(e){return e.o||e.t}function hR(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uL(e);delete t[kt];for(var n=fd(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pR(e,t){return t===void 0&&(t=!1),mR(e)||Zs(e)||!co(e)||(yf(e)>1&&(e.set=e.add=e.clear=e.delete=WJ),Object.freeze(e),t&&Sl(e,function(n,r){return pR(r,!0)},!0)),e}function WJ(){xi(2)}function mR(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ws(e){var t=V_[e];return t||xi(18,e),t}function lL(e,t){V_[e]||(V_[e]=t)}function Zh(){return Wh}function CA(e,t){t&&(ws("Patches"),e.u=[],e.s=[],e.v=t)}function GI(e){W_(e),e.p.forEach(kJ),e.p=null}function W_(e){e===Wh&&(Wh=e.l)}function u2(e){return Wh={p:[],l:Wh,h:e,m:!0,_:0}}function kJ(e){var t=e[kt];t.i===0||t.i===1?t.j():t.g=!0}function bA(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||ws("ES5").S(t,e,r),r?(n[kt].P&&(GI(t),xi(4)),co(e)&&(e=NI(t,e),t.l||ZI(t,e)),t.u&&ws("Patches").M(n[kt].t,e,t.u,t.s)):e=NI(t,n,[]),GI(t),t.u&&t.v(t.u,t.s),e!==cL?e:void 0}function NI(e,t,n){if(mR(t))return t;var r=t[kt];if(!r)return Sl(t,function(a,l){return d2(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return ZI(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hR(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),Sl(o,function(a,l){return d2(e,r,i,a,l,n,s)}),ZI(e,i,!1),n&&e.u&&ws("Patches").N(r,n,e.u,e.s)}return r.o}function d2(e,t,n,r,i,o,s){if(Zs(i)){var a=NI(e,i,o&&t&&t.i!==3&&!dd(t.R,r)?o.concat(r):void 0);if(sL(n,r,a),!Zs(a))return;e.m=!1}else s&&n.add(i);if(co(i)&&!mR(i)){if(!e.h.D&&e._<1)return;NI(e,i),t&&t.A.l||ZI(e,i)}}function ZI(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pR(t,n)}function AA(e,t){var n=e[kt];return(n?ar(n):e)[t]}function f2(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ii(e){e.P||(e.P=!0,e.l&&Ii(e.l))}function SA(e){e.o||(e.o=hR(e.t))}function Th(e,t,n){var r=fR(t)?ws("MapSet").F(t,n):gR(t)?ws("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Zh(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,c=kh;s&&(l=[a],c=Ug);var u=Proxy.revocable(l,c),d=u.revoke,g=u.proxy;return a.k=g,a.j=d,g}(t,n):ws("ES5").J(t,n);return(n?n.A:Zh()).p.push(r),r}function VJ(e){return Zs(e)||xi(22,e),function t(n){if(!co(n))return n;var r,i=n[kt],o=yf(n);if(i){if(!i.P&&(i.i<4||!ws("ES5").K(i)))return i.t;i.I=!0,r=g2(n,o),i.I=!1}else r=g2(n,o);return Sl(r,function(s,a){i&&TJ(i.t,s)===a||sL(r,s,t(a))}),o===3?new Set(r):r}(e)}function g2(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hR(e)}function OJ(){function e(o,s){var a=i[o];return a?a.enumerable=s:i[o]=a={configurable:!0,enumerable:s,get:function(){var l=this[kt];return kh.get(l,o)},set:function(l){var c=this[kt];kh.set(c,o,l)}},a}function t(o){for(var s=o.length-1;s>=0;s--){var a=o[s][kt];if(!a.P)switch(a.i){case 5:r(a)&&Ii(a);break;case 4:n(a)&&Ii(a)}}}function n(o){for(var s=o.t,a=o.k,l=fd(a),c=l.length-1;c>=0;c--){var u=l[c];if(u!==kt){var d=s[u];if(d===void 0&&!dd(s,u))return!0;var g=a[u],p=g&&g[kt];if(p?p.t!==d:!aL(g,d))return!0}}var m=!!s[kt];return l.length!==fd(s).length+(m?0:1)}function r(o){var s=o.k;if(s.length!==o.t.length)return!0;var a=Object.getOwnPropertyDescriptor(s,s.length-1);if(a&&!a.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}var i={};lL("ES5",{J:function(o,s){var a=Array.isArray(o),l=function(u,d){if(u){for(var g=Array(d.length),p=0;p<d.length;p++)Object.defineProperty(g,""+p,e(p,!0));return g}var m=uL(d);delete m[kt];for(var v=fd(m),y=0;y<v.length;y++){var I=v[y];m[I]=e(I,u||!!m[I].enumerable)}return Object.create(Object.getPrototypeOf(d),m)}(a,o),c={i:a?5:4,A:s?s.A:Zh(),P:!1,I:!1,R:{},l:s,t:o,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,kt,{value:c,writable:!0}),l},S:function(o,s,a){a?Zs(s)&&s[kt].A===o&&t(o.p):(o.u&&function l(c){if(c&&typeof c=="object"){var u=c[kt];if(u){var d=u.t,g=u.k,p=u.R,m=u.i;if(m===4)Sl(g,function(A){A!==kt&&(d[A]!==void 0||dd(d,A)?p[A]||l(g[A]):(p[A]=!0,Ii(u)))}),Sl(d,function(A){g[A]!==void 0||dd(g,A)||(p[A]=!1,Ii(u))});else if(m===5){if(r(u)&&(Ii(u),p.length=!0),g.length<d.length)for(var v=g.length;v<d.length;v++)p[v]=!1;else for(var y=d.length;y<g.length;y++)p[y]=!0;for(var I=Math.min(g.length,d.length),b=0;b<I;b++)g.hasOwnProperty(b)||(p[b]=!0),p[b]===void 0&&l(g[b])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}function HJ(){function e(a,l){function c(){this.constructor=a}i(a,l),a.prototype=(c.prototype=l.prototype,new c)}function t(a){a.o||(a.R=new Map,a.o=new Map(a.t))}function n(a){a.o||(a.o=new Set,a.t.forEach(function(l){if(co(l)){var c=Th(a.A.h,l,a);a.p.set(l,c),a.o.add(c)}else a.o.add(l)}))}function r(a){a.g&&xi(3,JSON.stringify(ar(a)))}var i=function(a,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])})(a,l)},o=function(){function a(c,u){return this[kt]={i:2,l:u,A:u?u.A:Zh(),P:!1,I:!1,o:void 0,R:void 0,t:c,k:this,C:!1,g:!1},this}e(a,Map);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return ar(this[kt]).size}}),l.has=function(c){return ar(this[kt]).has(c)},l.set=function(c,u){var d=this[kt];return r(d),ar(d).has(c)&&ar(d).get(c)===u||(t(d),Ii(d),d.R.set(c,!0),d.o.set(c,u),d.R.set(c,!0)),this},l.delete=function(c){if(!this.has(c))return!1;var u=this[kt];return r(u),t(u),Ii(u),u.t.has(c)?u.R.set(c,!1):u.R.delete(c),u.o.delete(c),!0},l.clear=function(){var c=this[kt];r(c),ar(c).size&&(t(c),Ii(c),c.R=new Map,Sl(c.t,function(u){c.R.set(u,!1)}),c.o.clear())},l.forEach=function(c,u){var d=this;ar(this[kt]).forEach(function(g,p){c.call(u,d.get(p),p,d)})},l.get=function(c){var u=this[kt];r(u);var d=ar(u).get(c);if(u.I||!co(d)||d!==u.t.get(c))return d;var g=Th(u.A.h,d,u);return t(u),u.o.set(c,g),g},l.keys=function(){return ar(this[kt]).keys()},l.values=function(){var c,u=this,d=this.keys();return(c={})[Um]=function(){return u.values()},c.next=function(){var g=d.next();return g.done?g:{done:!1,value:u.get(g.value)}},c},l.entries=function(){var c,u=this,d=this.keys();return(c={})[Um]=function(){return u.entries()},c.next=function(){var g=d.next();if(g.done)return g;var p=u.get(g.value);return{done:!1,value:[g.value,p]}},c},l[Um]=function(){return this.entries()},a}(),s=function(){function a(c,u){return this[kt]={i:3,l:u,A:u?u.A:Zh(),P:!1,I:!1,o:void 0,t:c,k:this,p:new Map,g:!1,C:!1},this}e(a,Set);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return ar(this[kt]).size}}),l.has=function(c){var u=this[kt];return r(u),u.o?!!u.o.has(c)||!(!u.p.has(c)||!u.o.has(u.p.get(c))):u.t.has(c)},l.add=function(c){var u=this[kt];return r(u),this.has(c)||(n(u),Ii(u),u.o.add(c)),this},l.delete=function(c){if(!this.has(c))return!1;var u=this[kt];return r(u),n(u),Ii(u),u.o.delete(c)||!!u.p.has(c)&&u.o.delete(u.p.get(c))},l.clear=function(){var c=this[kt];r(c),ar(c).size&&(n(c),Ii(c),c.o.clear())},l.values=function(){var c=this[kt];return r(c),n(c),c.o.values()},l.entries=function(){var c=this[kt];return r(c),n(c),c.o.entries()},l.keys=function(){return this.values()},l[Um]=function(){return this.values()},l.forEach=function(c,u){for(var d=this.values(),g=d.next();!g.done;)c.call(u,g.value,g.value,this),g=d.next()},a}();lL("MapSet",{F:function(a,l){return new o(a,l)},T:function(a,l){return new s(a,l)}})}var h2,Wh,yR=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",FJ=typeof Map<"u",xJ=typeof Set<"u",p2=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",cL=yR?Symbol.for("immer-nothing"):((h2={})["immer-nothing"]=!0,h2),k_=yR?Symbol.for("immer-draftable"):"__$immer_draftable",kt=yR?Symbol.for("immer-state"):"__$immer_state",Um=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",LJ=""+Object.prototype.constructor,fd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uL=Object.getOwnPropertyDescriptors||function(e){var t={};return fd(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},V_={},kh={get:function(e,t){if(t===kt)return e;var n=ar(e);if(!dd(n,t))return function(i,o,s){var a,l=f2(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!co(r)?r:r===AA(e.t,t)?(SA(e),e.o[t]=Th(e.A.h,r,e)):r},has:function(e,t){return t in ar(e)},ownKeys:function(e){return Reflect.ownKeys(ar(e))},set:function(e,t,n){var r=f2(ar(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=AA(ar(e),t),o=i==null?void 0:i[kt];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(aL(n,i)&&(n!==void 0||dd(e.t,t)))return!0;SA(e),Ii(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return AA(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,SA(e),Ii(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ar(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xi(12)}},Ug={};Sl(kh,function(e,t){Ug[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ug.deleteProperty=function(e,t){return Ug.set.call(this,e,t,void 0)},Ug.set=function(e,t,n){return kh.set.call(this,e[0],t,n,e[0])};var YJ=function(){function e(n){var r=this;this.O=p2,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(v){var y=this;v===void 0&&(v=a);for(var I=arguments.length,b=Array(I>1?I-1:0),A=1;A<I;A++)b[A-1]=arguments[A];return l.produce(v,function(N){var L;return(L=o).call.apply(L,[y,N].concat(b))})}}var c;if(typeof o!="function"&&xi(6),s!==void 0&&typeof s!="function"&&xi(7),co(i)){var u=u2(r),d=Th(r,i,void 0),g=!0;try{c=o(d),g=!1}finally{g?GI(u):W_(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return CA(u,s),bA(v,u)},function(v){throw GI(u),v}):(CA(u,s),bA(c,u))}if(!i||typeof i!="object"){if((c=o(i))===void 0&&(c=i),c===cL&&(c=void 0),r.D&&pR(c,!0),s){var p=[],m=[];ws("Patches").M(i,c,p,m),s(p,m)}return c}xi(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(c){for(var u=arguments.length,d=Array(u>1?u-1:0),g=1;g<u;g++)d[g-1]=arguments[g];return r.produceWithPatches(c,function(p){return i.apply(void 0,[p].concat(d))})};var s,a,l=r.produce(i,o,function(c,u){s=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){co(n)||xi(8),Zs(n)&&(n=VJ(n));var r=u2(this),i=Th(this,n,void 0);return i[kt].C=!0,W_(r),i},t.finishDraft=function(n,r){var i=n&&n[kt],o=i.A;return CA(o,r),bA(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!p2&&xi(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=ws("Patches").$;return Zs(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Pi=new YJ,dL=Pi.produce;Pi.produceWithPatches.bind(Pi);Pi.setAutoFreeze.bind(Pi);Pi.setUseProxies.bind(Pi);Pi.applyPatches.bind(Pi);Pi.createDraft.bind(Pi);Pi.finishDraft.bind(Pi);const sl=dL,fL=Object.prototype.toString;function IR(e){switch(fL.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Tc(e,Error)}}function If(e,t){return fL.call(e)===`[object ${t}]`}function vR(e){return If(e,"ErrorEvent")}function m2(e){return If(e,"DOMError")}function PJ(e){return If(e,"DOMException")}function ko(e){return If(e,"String")}function ZC(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function CR(e){return e===null||ZC(e)||typeof e!="object"&&typeof e!="function"}function _l(e){return If(e,"Object")}function TC(e){return typeof Event<"u"&&Tc(e,Event)}function XJ(e){return typeof Element<"u"&&Tc(e,Element)}function gL(e){return If(e,"RegExp")}function Fs(e){return!!(e&&e.then&&typeof e.then=="function")}function UJ(e){return _l(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function hL(e){return typeof e=="number"&&e!==e}function Tc(e,t){try{return e instanceof t}catch{return!1}}function pL(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function gd(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function _A(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let o=Math.min(i+140,r);return o>r-5&&(o=r),o===r&&(i=Math.max(o-140,0)),n=n.slice(i,o),i>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function y2(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{pL(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function DJ(e,t,n=!1){return ko(e)?gL(t)?t.test(e):ko(t)?n?e===t:e.includes(t):!1:!1}function Jc(e,t=[],n=!1){return t.some(r=>DJ(e,r,n))}function mL(e,t,n=250,r,i,o,s){if(!o.exception||!o.exception.values||!s||!Tc(s.originalException,Error))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=KJ(O_(e,t,i,s.originalException,r,o.exception.values,a,0),n))}function O_(e,t,n,r,i,o,s,a){if(o.length>=n+1)return o;let l=[...o];if(Tc(r[i],Error)){I2(s,a);const c=e(t,r[i]),u=l.length;v2(c,i,u,a),l=O_(e,t,n,r[i],i,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(Tc(c,Error)){I2(s,a);const d=e(t,c),g=l.length;v2(d,`errors[${u}]`,g,a),l=O_(e,t,n,c,i,[d,...l],d,g)}}),l}function I2(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function v2(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function KJ(e,t){return e.map(n=>(n.value&&(n.value=gd(n.value,t)),n))}function Dm(e){return e&&e.Math==Math?e:void 0}const $t=typeof globalThis=="object"&&Dm(globalThis)||typeof window=="object"&&Dm(window)||typeof self=="object"&&Dm(self)||typeof global=="object"&&Dm(global)||function(){return this}()||{};function bR(){return $t}function yL(e,t,n){const r=n||$t,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const AR=bR(),MJ=80;function IL(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let o=0,s=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||MJ;for(;n&&o++<r&&(c=$J(n,u),!(c==="html"||o>1&&s+i.length*l+c.length>=d));)i.push(c),s+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function $J(e,t){const n=e,r=[];let i,o,s,a,l;if(!n||!n.tagName)return"";if(AR.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(c&&c.length)c.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&ko(i))for(o=i.split(/\s+/),l=0;l<o.length;l++)r.push(`.${o[l]}`);const u=["aria-label","type","name","title","alt"];for(l=0;l<u.length;l++)s=u[l],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function zJ(){try{return AR.document.location.href}catch{return""}}function JJ(e){if(!AR.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const vf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jJ="Sentry Logger ",H_=["debug","info","warn","error","log","assert","trace"],TI={};function wl(e){if(!("console"in $t))return e();const t=$t.console,n={},r=Object.keys(TI);r.forEach(i=>{const o=TI[i];n[i]=t[i],t[i]=o});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function QJ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return vf?H_.forEach(n=>{t[n]=(...r)=>{e&&wl(()=>{$t.console[n](`${jJ}[${n}]:`,...r)})}}):H_.forEach(n=>{t[n]=()=>{}}),t}const he=QJ(),qJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ej(e){return e==="http"||e==="https"}function WC(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${s}`}function tj(e){const t=qJ.exec(e);if(!t){wl(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",o,s="",a]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return vL({host:o,pass:i,path:l,projectId:c,port:s,protocol:n,publicKey:r})}function vL(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function nj(e){if(!vf)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(he.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?ej(r)?t&&isNaN(parseInt(t,10))?(he.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(he.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(he.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function CL(e){const t=typeof e=="string"?tj(e):vL(e);if(!(!t||!nj(t)))return t}class ni extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function on(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&bL(i,r),e[t]=i}function Bl(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{vf&&he.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function bL(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Bl(e,"__sentry_original__",t)}catch{}}function SR(e){return e.__sentry_original__}function rj(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function AL(e){if(IR(e))return{message:e.message,name:e.name,stack:e.stack,...b2(e)};if(TC(e)){const t={type:e.type,target:C2(e.target),currentTarget:C2(e.currentTarget),...b2(e)};return typeof CustomEvent<"u"&&Tc(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function C2(e){try{return XJ(e)?IL(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function b2(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function SL(e,t=40){const n=Object.keys(AL(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return gd(n[0],t);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:gd(i,t)}return""}function Pn(e){return F_(e,new Map)}function F_(e,t){if(ij(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=F_(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(F_(i,t))}),r}return e}function ij(e){if(!_l(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}function _L(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&e!==void 0&&!e.includes("node_modules/")}function oj(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{const i=r.match(n);if(i){let o,s,a,l,c;if(i[1]){a=i[1];let g=a.lastIndexOf(".");if(a[g-1]==="."&&g--,g>0){o=a.slice(0,g),s=a.slice(g+1);const p=o.indexOf(".Module");p>0&&(a=a.slice(p+1),o=o.slice(0,p))}l=void 0}s&&(l=o,c=s),s==="<anonymous>"&&(c=void 0,a=void 0),a===void 0&&(c=c||"<anonymous>",a=l?`${l}.${c}`:c);let u=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2];const d=i[5]==="native";return u&&u.match(/\/[A-Z]:/)&&(u=u.slice(1)),!u&&i[5]&&!d&&(u=i[5]),{filename:u,module:e?e(u):void 0,function:a,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:_L(u,d)}}if(r.match(t))return{filename:r}}}const wL=50,A2=/\(error: (.*)\)/,S2=/captureMessage|captureException/;function _R(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],o=n.split(`
`);for(let s=r;s<o.length;s++){const a=o[s];if(a.length>1024)continue;const l=A2.test(a)?a.replace(A2,"$1"):a;if(!l.match(/\S*Error: /)){for(const c of t){const u=c(l);if(u){i.push(u);break}}if(i.length>=wL)break}}return BL(i)}}function sj(e){return Array.isArray(e)?_R(...e):e}function BL(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),S2.test(t[t.length-1].function||"")&&(t.pop(),S2.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,wL).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const wA="<anonymous>";function El(e){try{return!e||typeof e!="function"?wA:e.name||wA}catch{return wA}}function EL(e){return[90,oj(e)]}const Qy={},_2={};function jc(e,t){Qy[e]=Qy[e]||[],Qy[e].push(t)}function Qc(e,t){_2[e]||(t(),_2[e]=!0)}function Vo(e,t){const n=e&&Qy[e];if(n)for(const r of n)try{r(t)}catch(i){vf&&he.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${El(r)}
Error:`,i)}}function RL(e){const t="console";jc(t,e),Qc(t,aj)}function aj(){"console"in $t&&H_.forEach(function(e){e in $t.console&&on($t.console,e,function(t){return TI[e]=t,function(...n){Vo("console",{args:n,level:e});const i=TI[e];i&&i.apply($t.console,n)}})})}function ln(){const e=$t,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function GL(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Ma(e){const{message:t,event_id:n}=e;if(t)return t;const r=GL(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function WI(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function Vh(e,t){const n=GL(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const o={...i&&i.data,...t.data};n.mechanism.data=o}}const lj=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function NL(e){const t=e.match(lj)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}function cj(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,i=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-n),i).map(o=>_A(o,0)),t.context_line=_A(e[Math.min(r-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,r),i+1+n).map(o=>_A(o,0))}function w2(e){if(e&&e.__sentry_captured__)return!0;try{Bl(e,"__sentry_captured__",!0)}catch{}return!1}function kI(e){return Array.isArray(e)?e:[e]}const Hu=$t,uj=1e3;let B2,x_,L_;function dj(e){const t="dom";jc(t,e),Qc(t,fj)}function fj(){if(!Hu.document)return;const e=Vo.bind(null,"dom"),t=E2(e,!0);Hu.document.addEventListener("click",t,!1),Hu.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Hu[n]&&Hu[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(on(r,"addEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[o]=c[o]||{refCount:0};if(!u.handler){const d=E2(e);u.handler=d,i.call(this,o,d,a)}u.refCount++}catch{}return i.call(this,o,s,a)}}),on(r,"removeEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[o];u&&(u.refCount--,u.refCount<=0&&(i.call(this,o,u.handler,a),u.handler=void 0,delete c[o]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,s,a)}}))})}function gj(e){if(e.type!==x_)return!1;try{if(!e.target||e.target._sentryId!==L_)return!1}catch{}return!0}function hj(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function E2(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=pj(n);if(hj(n.type,r))return;Bl(n,"_sentryCaptured",!0),r&&!r._sentryId&&Bl(r,"_sentryId",ln());const i=n.type==="keypress"?"input":n.type;gj(n)||(e({event:n,name:i,global:t}),x_=n.type,L_=r?r._sentryId:void 0),clearTimeout(B2),B2=Hu.setTimeout(()=>{L_=void 0,x_=void 0},uj)}}function pj(e){try{return e.target}catch{return null}}const Y_=bR();function mj(){if(!("fetch"in Y_))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function R2(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function yj(){if(typeof EdgeRuntime=="string")return!0;if(!mj())return!1;if(R2(Y_.fetch))return!0;let e=!1;const t=Y_.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=R2(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){vf&&he.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Ij(e){const t="fetch";jc(t,e),Qc(t,vj)}function vj(){yj()&&on($t,"fetch",function(e){return function(...t){const{method:n,url:r}=Cj(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Vo("fetch",{...i}),e.apply($t,t).then(o=>{const s={...i,endTimestamp:Date.now(),response:o};return Vo("fetch",s),o},o=>{const s={...i,endTimestamp:Date.now(),error:o};throw Vo("fetch",s),o})}})}function P_(e,t){return!!e&&typeof e=="object"&&!!e[t]}function G2(e){return typeof e=="string"?e:e?P_(e,"url")?e.url:e.toString?e.toString():"":""}function Cj(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:G2(n),method:P_(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:G2(t),method:P_(t,"method")?String(t.method).toUpperCase():"GET"}}let Km=null;function ZL(e){const t="error";jc(t,e),Qc(t,bj)}function bj(){Km=$t.onerror,$t.onerror=function(e,t,n,r,i){return Vo("error",{column:r,error:i,line:n,msg:e,url:t}),Km&&!Km.__SENTRY_LOADER__?Km.apply(this,arguments):!1},$t.onerror.__SENTRY_INSTRUMENTED__=!0}let Mm=null;function TL(e){const t="unhandledrejection";jc(t,e),Qc(t,Aj)}function Aj(){Mm=$t.onunhandledrejection,$t.onunhandledrejection=function(e){return Vo("unhandledrejection",e),Mm&&!Mm.__SENTRY_LOADER__?Mm.apply(this,arguments):!0},$t.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const $m=bR();function Sj(){const e=$m.chrome,t=e&&e.app&&e.app.runtime,n="history"in $m&&!!$m.history.pushState&&!!$m.history.replaceState;return!t&&n}const ug=$t;let zm;function _j(e){const t="history";jc(t,e),Qc(t,wj)}function wj(){if(!Sj())return;const e=ug.onpopstate;ug.onpopstate=function(...n){const r=ug.location.href,i=zm;if(zm=r,Vo("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const o=zm,s=String(i);zm=s,Vo("history",{from:o,to:s})}return n.apply(this,r)}}on(ug.history,"pushState",t),on(ug.history,"replaceState",t)}const Bj=$t,Dg="__sentry_xhr_v3__";function Ej(e){const t="xhr";jc(t,e),Qc(t,Rj)}function Rj(){if(!Bj.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;on(e,"open",function(t){return function(...n){const r=Date.now(),i=ko(n[0])?n[0].toUpperCase():void 0,o=Gj(n[1]);if(!i||!o)return t.apply(this,n);this[Dg]={method:i,url:o,request_headers:{}},i==="POST"&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const a=this[Dg];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const l={args:[i,o],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Vo("xhr",l)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?on(this,"onreadystatechange",function(a){return function(...l){return s(),a.apply(this,l)}}):this.addEventListener("readystatechange",s),on(this,"setRequestHeader",function(a){return function(...l){const[c,u]=l,d=this[Dg];return d&&ko(c)&&ko(u)&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,l)}}),t.apply(this,n)}}),on(e,"send",function(t){return function(...n){const r=this[Dg];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Vo("xhr",i),t.apply(this,n)}})}function Gj(e){if(ko(e))return e;try{return e.toString()}catch{}}function qy(e,t){return e.require(t)}function Wd(e){let t;try{t=qy(module,e)}catch{}try{const{cwd:n}=qy(module,"process");t=qy(module,`${n()}/node_modules/${e}`)}catch{}return t}function Nj(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let o=0;o<t.length;o++)if(t[o]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let o=0;o<t.length;o++)if(t[o]===i){t.splice(o,1);break}}return[n,r]}function ea(e,t=100,n=1/0){try{return X_("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function wR(e,t=3,n=100*1024){const r=ea(e,t);return kj(r)>n?wR(e,t-1,n):r}function X_(e,t,n=1/0,r=1/0,i=Nj()){const[o,s]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!hL(t))return t;const a=Zj(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const p=c.toJSON();return X_("",p,l-1,r,i)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const g=AL(t);for(const p in g){if(!Object.prototype.hasOwnProperty.call(g,p))continue;if(d>=r){u[p]="[MaxProperties ~]";break}const m=g[p];u[p]=X_(p,m,l-1,r,i),d++}return s(t),u}function Zj(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(pL(t))return"[VueViewModel]";if(UJ(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${El(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Tj(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Tj(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Wj(e){return~-encodeURI(e).split(/%..|./).length}function kj(e){return Wj(JSON.stringify(e))}function na(e,t){const n=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let r=e;try{r=decodeURI(e)}catch{}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}const Vj=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function WL(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Vj.exec(t);return n?n.slice(1):[]}function Oj(e){const t=WL(e),n=t[0];let r=t[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}function kL(e,t){let n=WL(e)[2];return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var Js;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Js||(Js={}));function kd(e){return new no(t=>{t(e)})}function VL(e){return new no((t,n)=>{n(e)})}class no{constructor(t){no.prototype.__init.call(this),no.prototype.__init2.call(this),no.prototype.__init3.call(this),no.prototype.__init4.call(this),this._state=Js.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new no((r,i)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(s){i(s)}},o=>{if(!n)i(o);else try{r(n(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new no((n,r)=>{let i,o;return this.then(s=>{o=!1,i=s,t&&t()},s=>{o=!0,i=s,t&&t()}).then(()=>{if(o){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Js.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Js.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Js.PENDING){if(Fs(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Js.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Js.RESOLVED&&n[1](this._value),this._state===Js.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Hj(e){const t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]}function i(s){if(!n())return VL(new ni("Not adding Promise because buffer limit was reached."));const a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(s){return new no((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{kd(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:i,drain:o}}function Fj(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(r===-1)break;let i=e.indexOf(";",n);if(i===-1)i=e.length;else if(i<r){n=e.lastIndexOf(";",r-1)+1;continue}const o=e.slice(n,r).trim();if(t[o]===void 0){let s=e.slice(r+1,i).trim();s.charCodeAt(0)===34&&(s=s.slice(1,-1));try{t[o]=s.indexOf("%")!==-1?decodeURIComponent(s):s}catch{t[o]=s}}n=i+1}return t}function eI(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function VI(e){return e.split(/[\?#]/,1)[0]}function OI(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function xj(e){const{protocol:t,host:n,path:r}=e,i=n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${t?`${t}://`:""}${i}${r}`}const Lj={ip:!1,request:!0,transaction:!0,user:!0},Yj=["cookies","data","headers","method","query_string","url"],Pj=["id","username","email"];function HI(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=VI(e.originalUrl||e.url||""));let o="";return t.method&&n&&(o+=n),t.method&&t.path&&(o+=" "),t.path&&r&&(o+=r),[o,i]}function Xj(e,t){switch(t){case"path":return HI(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";case"methodPath":default:{const n=e._reconstructedRoute?e._reconstructedRoute:void 0;return HI(e,{path:!0,method:!0,customRoute:n})[0]}}}function Uj(e,t){const n={};return(Array.isArray(t)?t:Pj).forEach(i=>{e&&i in e&&(n[i]=e[i])}),n}function N2(e,t){const{include:n=Yj,deps:r}=t||{},i={},o=e.headers||{},s=e.method,a=o.host||e.hostname||e.host||"<no host>",l=e.protocol==="https"||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",u=c.startsWith(l)?c:`${l}://${a}${c}`;return n.forEach(d=>{switch(d){case"headers":{i.headers=o,n.includes("cookies")||delete i.headers.cookie;break}case"method":{i.method=s;break}case"url":{i.url=u;break}case"cookies":{i.cookies=e.cookies||o.cookie&&Fj(o.cookie)||{};break}case"query_string":{i.query_string=Kj(e,r);break}case"data":{if(s==="GET"||s==="HEAD")break;e.body!==void 0&&(i.data=ko(e.body)?e.body:JSON.stringify(ea(e.body)));break}default:({}).hasOwnProperty.call(e,d)&&(i[d]=e[d])}}),i}function Dj(e,t,n){const r={...Lj,...n&&n.include};if(r.request){const i=Array.isArray(r.request)?N2(t,{include:r.request,deps:n&&n.deps}):N2(t,{deps:n&&n.deps});e.request={...e.request,...i}}if(r.user){const i=t.user&&_l(t.user)?Uj(t.user,r.user):{};Object.keys(i).length&&(e.user={...e.user,...i})}if(r.ip){const i=t.ip||t.socket&&t.socket.remoteAddress;i&&(e.user={...e.user,ip_address:i})}return r.transaction&&!e.transaction&&(e.transaction=Xj(t,r.transaction)),e}function Kj(e,t){let n=e.originalUrl||e.url||"";if(n){n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||typeof URL<"u"&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch{return}}}const Mj=["fatal","error","warning","log","info","debug"];function OL(e){return e==="warn"?"warning":Mj.includes(e)?e:"log"}const HL=1e3;function kC(){return Date.now()/HL}function $j(){const{performance:e}=$t;if(!e||!e.now)return kC;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/HL}const da=$j();(()=>{const{performance:e}=$t;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,s=e.timing&&e.timing.navigationStart,l=typeof s=="number"?Math.abs(s+n-r):t,c=l<t;return o||c?i<=l?e.timeOrigin:s:r})();const FL="sentry-",zj=/^sentry-/,Jj=8192;function xL(e){if(!ko(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,i)=>{const o=Z2(i);for(const s of Object.keys(o))r[s]=o[s];return r},{});else{if(!e)return;t=Z2(e)}const n=Object.entries(t).reduce((r,[i,o])=>{if(i.match(zj)){const s=i.slice(FL.length);r[s]=o}return r},{});if(Object.keys(n).length>0)return n}function VC(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${FL}${r}`]=i),n),{});return jj(t)}function Z2(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function jj(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=i===0?o:`${t},${o}`;return s.length>Jj?(vf&&he.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}const Qj=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function BR(e){if(!e)return;const t=e.match(Qj);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function qj(e,t){const n=BR(e),r=xL(t),{traceId:i,parentSpanId:o,parentSampled:s}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:i||ln(),parentSpanId:o||ln().substring(16),spanId:ln().substring(16),sampled:s,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:i||ln(),spanId:ln().substring(16)}}}function e4(e,t){const n=BR(e),r=xL(t),{traceId:i,parentSpanId:o,parentSampled:s}=n||{};return n?{traceId:i||ln(),parentSpanId:o||ln().substring(16),spanId:ln().substring(16),sampled:s,dsc:r||{}}:{traceId:i||ln(),spanId:ln().substring(16)}}function OC(e=ln(),t=ln().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Cf(e,t=[]){return[e,t]}function U_(e,t){const[n,r]=e;return[n,[...r,t]]}function Oh(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function D_(e,t){return(t||new TextEncoder).encode(e)}function LL(e,t){const[n,r]=e;let i=JSON.stringify(n);function o(s){typeof i=="string"?i=typeof s=="string"?i+s:[D_(i,t),s]:i.push(typeof s=="string"?D_(s,t):s)}for(const s of r){const[a,l]=s;if(o(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)o(l);else{let c;try{c=JSON.stringify(l)}catch{c=JSON.stringify(ea(l))}o(c)}}return typeof i=="string"?i:t4(i)}function t4(e){const t=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function n4(e,t,n){let r=typeof e=="string"?t.encode(e):e;function i(l){const c=r.subarray(0,l);return r=r.subarray(l+1),c}function o(){let l=r.indexOf(10);return l<0&&(l=r.length),JSON.parse(n.decode(i(l)))}const s=o(),a=[];for(;r.length;){const l=o(),c=typeof l.length=="number"?l.length:void 0;a.push([l,c?i(c):o()])}return[s,a]}function r4(e,t){const n=typeof e.data=="string"?D_(e.data,t):e.data;return[Pn({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const i4={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function T2(e){return i4[e]}function YL(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function o4(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:WC(r)},...i&&{trace:Pn({...i})}}}const s4=60*1e3;function a4(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?s4:r-t}function l4(e,t){return e[t]||e.all||0}function c4(e,t,n=Date.now()){return l4(e,t)>n}function u4(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(o)for(const a of o.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),g=(isNaN(d)?60:d)*1e3;if(!c)i.all=r+g;else for(const p of c.split(";"))p==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[p]=r+g):i[p]=r+g}else s?i.all=r+a4(s,r):t===429&&(i.all=r+60*1e3);return i}function PL(e,t){return e(t.stack||"",1)}function XL(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=PL(e,t);return r.length&&(n.stacktrace={frames:r}),n}function d4(e){if("name"in e&&typeof e.name=="string"){let t=`'${e.name}' captured as exception`;return"message"in e&&typeof e.message=="string"&&(t+=` with message '${e.message}'`),t}else return"message"in e&&typeof e.message=="string"?e.message:`Object captured as exception with keys: ${SL(e)}`}function f4(e,t,n,r){const i=typeof e=="function"?e().getClient():e;let o=n;const a=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"};let l;if(!IR(n)){if(_l(n)){const u=i&&i.getOptions().normalizeDepth;l={__serialized__:wR(n,u)};const d=d4(n);o=r&&r.syntheticException||new Error(d),o.message=d}else o=r&&r.syntheticException||new Error(n),o.message=n;a.synthetic=!0}const c={exception:{values:[XL(t,o)]}};return l&&(c.extra=l),WI(c,void 0,void 0),Vh(c,a),{...c,event_id:r&&r.event_id}}function g4(e,t,n="info",r,i){const o={event_id:r&&r.event_id,level:n};if(i&&r&&r.syntheticException){const s=PL(e,r.syntheticException);s.length&&(o.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(ZC(t)){const{__sentry_template_string__:s,__sentry_template_values__:a}=t;return o.logentry={message:s,params:a},o}return o.message=t,o}function h4(e,t,n,r){const i=e();let o=!1,s=!0;return setInterval(()=>{const a=i.getTimeMs();o===!1&&a>t+n&&(o=!0,s&&r()),a<t+n&&(o=!1)},20),{poll:()=>{i.reset()},enabled:a=>{s=a}}}function p4(e,t,n){const r=t?t.replace(/^file:\/\//,""):void 0,i=e.location.columnNumber?e.location.columnNumber+1:void 0,o=e.location.lineNumber?e.location.lineNumber+1:void 0;return Pn({filename:r,module:n(r),function:e.functionName||"?",colno:i,lineno:o,in_app:r?_L(r):void 0})}class fa{constructor(t){this._maxSize=t,this._cache=new Map}get size(){return this._cache.size}get(t){const n=this._cache.get(t);if(n!==void 0)return this._cache.delete(t),this._cache.set(t,n),n}set(t,n){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(t,n)}remove(t){const n=this._cache.get(t);return n&&this._cache.delete(t),n}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const t=[];return this._cache.forEach(n=>t.push(n)),t}}function Vd(e,t){return e??t()}function He(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=o(n)):(i==="call"||i==="optionalCall")&&(n=o((...s)=>n.call(t,...s)),t=void 0)}return n}function W2(e){const t=He(e);return t??!0}const It=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,HC="production";function ER(){return yL("globalEventProcessors",()=>[])}function UL(e){ER().push(e)}function FI(e,t,n,r=0){return new no((i,o)=>{const s=e[r];if(t===null||typeof s!="function")i(t);else{const a=s({...t},n);It&&s.id&&a===null&&he.log(`Event processor "${s.id}" dropped event`),Fs(a)?a.then(l=>FI(e,l,n,r+1).then(i)).then(null,o):FI(e,a,n,r+1).then(i).then(null,o)}})}function RR(e){const t=da(),n={sid:ln(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>m4(n)};return e&&Ts(n,e),n}function Ts(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||da(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ln()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function DL(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Ts(e,n)}function m4(e){return Pn({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const y4=0,KL=1;function FC(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:o,status:s,tags:a,origin:l}=xr(e);return Pn({data:r,op:i,parent_span_id:o,span_id:t,status:s,tags:a,trace_id:n,origin:l})}function Fp(e){const{traceId:t,spanId:n}=e.spanContext(),r=NR(e);return OC(t,n,r)}function GR(e){return typeof e=="number"?k2(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?k2(e.getTime()):da()}function k2(e){return e>9999999999?e/1e3:e}function xr(e){return I4(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function I4(e){return typeof e.getSpanJSON=="function"}function NR(e){const{traceFlags:t}=e.spanContext();return!!(t&KL)}function v4(e,t,n,r,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||ln(),timestamp:t.timestamp||kC()},c=n.integrations||e.integrations.map(y=>y.name);C4(l,e),S4(l,c),t.type===void 0&&b4(l,e.stackParser);const u=w4(r,n.captureContext);n.mechanism&&Vh(l,n.mechanism);const d=i&&i.getEventProcessors?i.getEventProcessors():[],g=TR().getScopeData();if(o){const y=o.getScopeData();xI(g,y)}if(u){const y=u.getScopeData();xI(g,y)}const p=[...n.attachments||[],...g.attachments];p.length&&(n.attachments=p),LC(l,g);const m=[...d,...ER(),...g.eventProcessors];return FI(m,l,n).then(y=>(y&&A4(y),typeof s=="number"&&s>0?_4(y,s,a):y))}function C4(e,t){const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:HC),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=gd(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=gd(s.value,o));const a=e.request;a&&a.url&&(a.url=gd(a.url,o))}const V2=new WeakMap;function b4(e,t){const n=$t._sentryDebugIds;if(!n)return;let r;const i=V2.get(t);i?r=i:(r=new Map,V2.set(t,r));const o=Object.keys(n).reduce((s,a)=>{let l;const c=r.get(a);c?l=c:(l=t(a),r.set(a,l));for(let u=l.length-1;u>=0;u--){const d=l[u];if(d.filename){s[d.filename]=n[a];break}}return s},{});try{e.exception.values.forEach(s=>{s.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=o[a.filename])})})}catch{}}function A4(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function S4(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function _4(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:ea(i.data,t,n)}}))},...e.user&&{user:ea(e.user,t,n)},...e.contexts&&{contexts:ea(e.contexts,t,n)},...e.extra&&{extra:ea(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=ea(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>{const o=xr(i).data;return o&&(i.data=ea(o,t,n)),i})),r}function w4(e,t){if(!t)return e;const n=e?e.clone():new Oo;return n.update(t),n}function B4(e){if(e)return E4(e)?{captureContext:e}:G4(e)?{captureContext:e}:e}function E4(e){return e instanceof Oo||typeof e=="function"}const R4=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function G4(e){return Object.keys(e).some(t=>R4.includes(t))}function xp(e,t){return mn().captureException(e,B4(t))}function K_(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return mn().captureMessage(e,n,r)}function bf(e,t){return mn().captureEvent(e,t)}function ML(e){mn().configureScope(e)}function wr(e,t){mn().addBreadcrumb(e,t)}function N4(e,t){mn().setContext(e,t)}function Z4(e){mn().setExtras(e)}function T4(e,t){mn().setExtra(e,t)}function W4(e){mn().setTags(e)}function k4(e,t){mn().setTag(e,t)}function V4(e){mn().setUser(e)}function Lp(...e){const t=mn();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function $L(e,t){return mn().startTransaction({...e},t)}function M_(e,t){const n=cn(),r=Tt();if(!r)It&&he.warn("Cannot capture check-in. No client defined.");else if(!r.captureCheckIn)It&&he.warn("Cannot capture check-in. Client does not support sending check-ins.");else return r.captureCheckIn(e,t,n);return ln()}function O4(e,t,n){const r=M_({monitorSlug:e,status:"in_progress"},n),i=da();function o(a){M_({monitorSlug:e,status:a,checkInId:r,duration:da()-i})}let s;try{s=t()}catch(a){throw o("error"),a}return Fs(s)?Promise.resolve(s).then(()=>{o("ok")},()=>{o("error")}):o("ok"),s}async function zL(e){const t=Tt();return t?t.flush(e):(It&&he.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function H4(e){const t=Tt();return t?t.close(e):(It&&he.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function F4(){return mn().lastEventId()}function Tt(){return mn().getClient()}function cn(){return mn().getScope()}function JL(e){const t=Tt(),n=xs(),r=cn(),{release:i,environment:o=HC}=t&&t.getOptions()||{},{userAgent:s}=$t.navigator||{},a=RR({release:i,environment:o,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),l=n.getSession();return l&&l.status==="ok"&&Ts(l,{status:"exited"}),xC(),n.setSession(a),r.setSession(a),a}function xC(){const e=xs(),t=cn(),n=t.getSession()||e.getSession();n&&DL(n),jL(),e.setSession(),t.setSession()}function jL(){const e=xs(),t=cn(),n=Tt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function ZR(e=!1){if(e){xC();return}jL()}function Hh(e){return e.transaction}function Af(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=n&&n.getUser()||{},s=Pn({environment:r.environment||HC,release:r.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function Rl(e){const t=Tt();if(!t)return{};const n=Af(xr(e).trace_id||"",t,cn()),r=Hh(e);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:s}=r.metadata;o!=null&&(n.sample_rate=`${o}`);const a=xr(r);return s&&s!=="url"&&(n.transaction=a.description),n.sampled=String(NR(r)),t.emit&&t.emit("createDsc",n),n}function LC(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;x4(e,t),r&&P4(e,r),X4(e,n),L4(e,i),Y4(e,o)}function xI(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:g,transactionName:p,span:m}=t;dg(e,"extra",n),dg(e,"tags",r),dg(e,"user",i),dg(e,"contexts",o),dg(e,"sdkProcessingMetadata",a),s&&(e.level=s),p&&(e.transactionName=p),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...g}}function dg(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function x4(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,transactionName:a}=t,l=Pn(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Pn(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Pn(i);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Pn(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&(e.transaction=a)}function L4(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Y4(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function P4(e,t){e.contexts={trace:FC(t),...e.contexts};const n=Hh(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Rl(t),...e.sdkProcessingMetadata};const r=xr(n).description;r&&(e.tags={transaction:r,...e.tags})}}function X4(e,t){e.fingerprint=e.fingerprint?kI(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const U4=100;let BA;class Oo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=O2()}static clone(t){return t?t.clone():new Oo}clone(){const t=new Oo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ts(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof Oo){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(_l(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=O2(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:U4;if(r<=0)return this;const i={timestamp:kC(),...t},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>r?o.slice(-r):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:o,_user:s,_level:a,_fingerprint:l,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:d,_transactionName:g,_span:p}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:o,user:s,level:a,fingerprint:l||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:d,transactionName:g,span:p}}applyToEvent(t,n={},r=[]){LC(t,this.getScopeData());const i=[...r,...ER(),...this._eventProcessors];return FI(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:ln();if(!this._client)return he.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:ln();if(!this._client)return he.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:ln();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(he.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function TR(){return BA||(BA=new Oo),BA}function O2(){return{traceId:ln(),spanId:ln().substring(16)}}const Fh="7.110.0",WR=parseFloat(Fh),D4=100;class YC{constructor(t,n,r,i=WR){this._version=i;let o;n?o=n:(o=new Oo,o.setClient(t));let s;r?s=r:(s=new Oo,s.setClient(t)),this._stack=[{scope:o}],t&&this.bindClient(t),this._isolationScope=s}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(i){throw this.popScope(),i}return Fs(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:ln(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...n,event_id:r}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:ln(),o=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:ln();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=D4}=i.getOptions&&i.getOptions()||{};if(s<=0)return;const l={timestamp:kC(),...t},c=o?wl(()=>o(l,n)):l;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,s))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=$_(this);try{t(this)}finally{$_(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return It&&he.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return It&&!r&&(this.getClient()?he.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):he.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&DL(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:o=HC}=r&&r.getOptions()||{},{userAgent:s}=$t.navigator||{},a=RR({release:i,environment:o,user:n.getUser(),...s&&{userAgent:s},...t}),l=n.getSession&&n.getSession();return l&&l.status==="ok"&&Ts(l,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const i=Xl().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);It&&he.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Xl(){return $t.__SENTRY__=$t.__SENTRY__||{extensions:{},hub:void 0},$t}function $_(e){const t=Xl(),n=ga(t);return XC(t,e),n}function mn(){const e=Xl();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return QL(e)}function xs(){return mn().getIsolationScope()}function QL(e=Xl()){return(!eY(e)||ga(e).isOlderThan(WR))&&XC(e,new YC),ga(e)}function kR(e,t=QL()){if(!eY(e)||ga(e).isOlderThan(WR)){const n=t.getClient(),r=t.getScope(),i=t.getIsolationScope();XC(e,new YC(n,r.clone(),i.clone()))}}function qL(e){const t=Xl();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function PC(e,t={}){const n=Xl();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function eY(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function ga(e){return yL("hub",()=>new YC,e)}function XC(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Od(e){return(e||mn()).getScope().getTransaction()}const K4=BR;let H2=!1;function M4(){H2||(H2=!0,ZL(z_),TL(z_))}function z_(){const e=Od();if(e){const t="internal_error";It&&he.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}z_.tag="sentry_tracingErrorCallback";var F2;(function(e){const t="ok";e.Ok=t;const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const i="permission_denied";e.PermissionDenied=i;const o="not_found";e.NotFound=o;const s="resource_exhausted";e.ResourceExhausted=s;const a="invalid_argument";e.InvalidArgument=a;const l="unimplemented";e.Unimplemented=l;const c="unavailable";e.Unavailable=c;const u="internal_error";e.InternalError=u;const d="unknown_error";e.UnknownError=d;const g="cancelled";e.Cancelled=g;const p="already_exists";e.AlreadyExists=p;const m="failed_precondition";e.FailedPrecondition=m;const v="aborted";e.Aborted=v;const y="out_of_range";e.OutOfRange=y;const I="data_loss";e.DataLoss=I})(F2||(F2={}));function tY(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}const $4=tY;function xh(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=tY(t);n!=="unknown_error"&&e.setStatus(n)}function VR(e,t,n=()=>{}){let r;try{r=e()}catch(i){throw t(i),n(),i}return z4(r,t,n)}function z4(e,t,n){return Fs(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Yp(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Tt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function J4(e,t,n=()=>{},r=()=>{}){const i=mn(),o=cn(),s=o.getSpan(),a=DC(e),l=UC(i,{parentSpan:s,spanContext:a,forceTransaction:!1,scope:o});return o.setSpan(l),VR(()=>t(l),c=>{l&&l.setStatus("internal_error"),n(c,l)},()=>{l&&l.end(),o.setSpan(s),r()})}function OR(e,t){const n=DC(e);return PC(()=>Lp(e.scope,r=>{const i=mn(),o=r.getSpan(),a=e.onlyIfParent&&!o?void 0:UC(i,{parentSpan:o,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return VR(()=>t(a),()=>{if(a){const{status:l}=xr(a);(!l||l==="ok")&&a.setStatus("internal_error")}},()=>a&&a.end())}))}const j4=OR;function Q4(e,t){const n=DC(e);return PC(()=>Lp(e.scope,r=>{const i=mn(),o=r.getSpan(),a=e.onlyIfParent&&!o?void 0:UC(i,{parentSpan:o,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function l(){a&&a.end()}return VR(()=>t(a,l),()=>{if(a&&a.isRecording()){const{status:c}=xr(a);(!c||c==="ok")&&a.setStatus("internal_error")}})}))}function q4(e){if(!Yp())return;const t=DC(e),n=mn(),r=e.scope?e.scope.getSpan():Pp();if(e.onlyIfParent&&!r)return;const s=(e.scope||cn()).clone();return UC(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:s})}function Pp(){return cn().getSpan()}const nY=({sentryTrace:e,baggage:t},n)=>{const r=cn(),{traceparentData:i,dynamicSamplingContext:o,propagationContext:s}=qj(e,t);r.setPropagationContext(s),It&&i&&he.log(`[Tracing] Continuing trace ${i.traceId}.`);const a={...i,metadata:Pn({dynamicSamplingContext:o})};return n?PC(()=>n(a)):a};function UC(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:i}){if(!Yp())return;const o=xs();let s;if(t&&!r)s=t.startChild(n);else if(t){const a=Rl(t),{traceId:l,spanId:c}=t.spanContext(),u=NR(t);s=e.startTransaction({traceId:l,parentSpanId:c,parentSampled:u,...n,metadata:{dynamicSamplingContext:a,...n.metadata}})}else{const{traceId:a,dsc:l,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...i.getPropagationContext()};s=e.startTransaction({traceId:a,parentSpanId:c,parentSampled:u,...n,metadata:{dynamicSamplingContext:l,...n.metadata}})}return i.setSpan(s),e8(s,i,o),s}function DC(e){if(e.startTime){const t={...e};return t.startTimestamp=GR(e.startTime),delete t.startTime,t}return e}const rY="_sentryScope",iY="_sentryIsolationScope";function e8(e,t,n){e&&(Bl(e,iY,n),Bl(e,rY,t))}function t8(e){return{scope:e[rY],isolationScope:e[iY]}}let th;function oY(e){return th?th.get(e):void 0}function sY(e){const t=oY(e);if(!t)return;const n={};for(const[,[r,i]]of t)n[r]||(n[r]=[]),n[r].push(Pn(i));return n}function aY(e,t,n,r,i,o){const s=Pp();if(s){const a=oY(s)||new Map,l=`${e}:${t}@${r}`,c=a.get(o);if(c){const[,u]=c;a.set(o,[l,{min:Math.min(u.min,n),max:Math.max(u.max,n),count:u.count+=1,sum:u.sum+=n,tags:u.tags}])}else a.set(o,[l,{min:n,max:n,count:1,sum:n,tags:i}]);th||(th=new WeakMap),th.set(s,a)}}const nh="sentry.source",Pu="sentry.sample_rate",Jm="sentry.op",Kg="sentry.origin",n8="profile_id";class r8{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class HR{constructor(t={}){this._traceId=t.traceId||ln(),this._spanId=t.spanId||ln().substring(16),this._startTime=t.startTimestamp||da(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[Kg]:t.origin||"manual",[Jm]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),t.exclusiveTime!==void 0&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[Jm]}set op(t){this.setAttribute(Jm,t)}get origin(){return this._attributes[Kg]}set origin(t){this.setAttribute(Kg,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?KL:y4}}startChild(t){const n=new HR({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Hh(this);if(n.transaction=r,It&&r){const i=t&&t.op||"< unknown op >",o=xr(n).description||"< unknown name >",s=r.spanContext().spanId,a=`[Tracing] Starting '${i}' span on transaction '${o}' (${s}).`;he.log(a),this._logMessage=a}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return xh(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=Hh(this);if(It&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&he.log(r.replace("Starting","Finishing"))}this._endTime=GR(t)}toTraceparent(){return Fp(this)}toContext(){return Pn({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return FC(this)}getSpanJSON(){return Pn({data:this._getData(),description:this._name,op:this._attributes[Jm],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Kg],_metrics_summary:sY(this),profile_id:this._attributes[n8],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...t,...n}:r?t:n}}class i8 extends HR{constructor(t,n){super(t),this._contexts={},this._hub=n||mn(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[nh]&&{source:this._attributes[nh]},...this._attributes[Pu]&&{sampleRate:this._attributes[Pu]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(nh,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new r8(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=GR(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return Pn({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Rl(this)}setHub(t){this._hub=t}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(It&&he.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){It&&he.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(u=>u!==this&&xr(u).timestamp):[];if(this._trimEnd&&r.length>0){const u=r.map(d=>xr(d).timestamp).filter(Boolean);this._endTime=u.reduce((d,g)=>d>g?d:g)}const{scope:i,isolationScope:o}=t8(this),{metadata:s}=this,{source:a}=s,l={contexts:{...this._contexts,trace:FC(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...s,capturedSpanScope:i,capturedSpanIsolationScope:o,...Pn({dynamicSamplingContext:Rl(this)})},_metrics_summary:sY(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(It&&he.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),l.measurements=this._measurements),It&&he.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),l}}function o8(e,t,n){if(!Yp(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(Pu,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(Pu,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(Pu,Number(r))):(r=1,e.setAttribute(Pu,r)),s8(r)?r?(e.sampled=Math.random()<r,e.sampled?(It&&he.log(`[Tracing] starting ${e.op} transaction - ${xr(e).description}`),e):(It&&he.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(It&&he.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(It&&he.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function s8(e){return hL(e)||!(typeof e=="number"||typeof e=="boolean")?(It&&he.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(It&&he.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function a8(){const t=this.getScope().getSpan();return t?{"sentry-trace":Fp(t)}:{}}function l8(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",o=e.instrumenter||"sentry";i!==o&&(It&&he.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let s=new i8(e,this);return s=o8(s,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),s.isRecording()&&s.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",s),s}function c8(){const e=Xl();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=l8),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=a8),M4())}function u8(e,t,n){const r=Od();r&&r.setMeasurement(e,t,n)}function d8(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function f8(e,t,n,r){const i=YL(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:WC(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Cf(o,[s])}function g8(e,t,n,r){const i=YL(n),o=e.type&&e.type!=="replay_event"?e.type:"event";d8(e,n&&n.sdk);const s=o4(e,i,r,t);return delete e.sdkProcessingMetadata,Cf(s,[[{type:o},e]])}class h8{constructor(t,n){this._client=t,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=n}flush(){const t=this.getSessionAggregates();t.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(t))}getSessionAggregates(){const t=Object.keys(this._pendingAggregates).map(r=>this._pendingAggregates[parseInt(r)]),n={attrs:this._sessionAttrs,aggregates:t};return Pn(n)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const t=cn(),n=t.getRequestSession();n&&n.status&&(this._incrementSessionStatusCount(n.status,new Date),t.setRequestSession(void 0))}_incrementSessionStatusCount(t,n){const r=new Date(n).setSeconds(0,0);this._pendingAggregates[r]=this._pendingAggregates[r]||{};const i=this._pendingAggregates[r];switch(i.started||(i.started=new Date(r).toISOString()),t){case"errored":return i.errored=(i.errored||0)+1,i.errored;case"ok":return i.exited=(i.exited||0)+1,i.exited;default:return i.crashed=(i.crashed||0)+1,i.crashed}}}const p8="7";function m8(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function y8(e){return`${m8(e)}${e.projectId}/envelope/`}function I8(e,t){return rj({sentry_key:e.publicKey,sentry_version:p8,...t&&{sentry_client:`${t.name}/${t.version}`}})}function v8(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${y8(e)}?${I8(e,r)}`}const x2=[];function C8(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function b8(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=kI(n(t)):r=t;const i=C8(r),o=_8(i,s=>s.name==="Debug");if(o!==-1){const[s]=i.splice(o,1);i.push(s)}return i}function A8(e,t){const n={};return t.forEach(r=>{r&&lY(e,r,n)}),n}function L2(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function lY(e,t,n){if(n[t.name]){It&&he.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,x2.indexOf(t.name)===-1&&(t.setupOnce(UL,mn),x2.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,o)=>r(i,o,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((o,s)=>r(o,s,e),{id:t.name});e.addEventProcessor(i)}It&&he.log(`Integration installed: ${t.name}`)}function S8(e){const t=Tt();if(!t||!t.addIntegration){It&&he.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function _8(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function zt(e,t){return Object.assign(function(...r){return t(...r)},{id:e})}function cY(e,t,n,r){const i=Object.entries(Pn(r)).sort((o,s)=>o[0].localeCompare(s[0]));return`${e}${t}${n}${i}`}function w8(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t>>>0}function B8(e){let t="";for(const n of e){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([o,s])=>`${o}:${s}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function uY(e){return e.replace(/[^\w]+/gi,"_")}function dY(e){return e.replace(/[^\w\-.]+/gi,"_")}function E8(e){return e.replace(/[^\w\-./]+/gi,"")}const R8=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function G8(e){for(const[t,n]of R8)if(e===t)return n;return e}function N8(e){return[...e].reduce((t,n)=>t+G8(n),"")}function fY(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=E8(n);t[r]=N8(String(e[n]))}return t}function Z8(e,t,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(i.dsn=WC(t));const o=T8(e);return Cf(i,[o])}function T8(e){const t=B8(e);return[{type:"statsd",length:t.length},t]}const Y2="Not capturing exception because it's already been captured.";class W8{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=CL(t.dsn):It&&he.warn("No DSN provided, client will not send events."),this._dsn){const n=v8(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(w2(t)){It&&he.log(Y2);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(o=>this._captureEvent(o,n,r)).then(o=>{i=o})),i}captureMessage(t,n,r,i){let o=r&&r.event_id;const s=ZC(t)?t:String(t),a=CR(t)?this.eventFromMessage(s,n,r):this.eventFromException(t,r);return this._process(a.then(l=>this._captureEvent(l,r,i)).then(l=>{o=l})),o}captureEvent(t,n,r){if(n&&n.originalException&&w2(n.originalException)){It&&he.log(Y2);return}let i=n&&n.event_id;const s=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,s||r).then(a=>{i=a})),i}captureSession(t){typeof t.release!="string"?It&&he.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Ts(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):kd(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return It&&he.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];lY(this,t,this._integrations),n||L2(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=g8(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=U_(r,r4(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const n=f8(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=`${t}:${n}`;It&&he.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){It&&he.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=Z8(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=A8(this,t),L2(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,i=!1;const o=n.exception&&n.exception.values;if(o){i=!0;for(const l of o){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const s=t.status==="ok";(s&&t.errors===0||s&&r)&&(Ts(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new no(n=>{let r=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,t&&r>=t&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=xs()){const o=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",t,n),v4(o,t,n,r,this,i).then(a=>{if(a===null)return a;const l={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:g,dsc:p}=l;a.contexts={trace:{trace_id:u,span_id:d,parent_span_id:g},...a.contexts};const m=p||Af(u,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(It){const o=i;o.logLevel==="log"?he.log(o.message):he.warn(o)}})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:o}=i,s=hY(t),a=gY(t),l=t.type||"error",c=`before send for type \`${l}\``;if(a&&typeof o=="number"&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",t),VL(new ni(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u=l==="replay_event"?"replay":l,g=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,g).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",u,t),new ni("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const v=V8(i,p,n);return k8(v,c)}).then(p=>{if(p===null)throw this.recordDroppedEvent("before_send",u,t),new ni(`${c} returned \`null\`, will not send event.`,"log");const m=r&&r.getSession();!s&&m&&this._updateSessionFromEvent(m,p);const v=p.transaction_info;if(s&&v&&p.transaction!==t.transaction){const y="custom";p.transaction_info={...v,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof ni?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new ni(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{It&&he.error("Error while sending event:",n)});It&&he.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}}function k8(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Fs(e))return e.then(r=>{if(!_l(r)&&r!==null)throw new ni(n);return r},r=>{throw new ni(`${t} rejected with ${r}`)});if(!_l(e)&&e!==null)throw new ni(n);return e}function V8(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return gY(t)&&r?r(t,n):hY(t)&&i?i(t,n):t}function gY(e){return e.type===void 0}function hY(e){return e.type==="transaction"}function O8(e){const t=Tt();!t||!t.addEventProcessor||t.addEventProcessor(e)}function H8(e,t,n,r,i){const o={sent_at:new Date().toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&i&&(o.dsn=WC(i)),t&&(o.trace=Pn(t));const s=F8(e);return Cf(o,[s])}function F8(e){return[{type:"check_in"},e]}const pY="c",mY="g",KC="s",yY="d",x8=5e3,EA=1e4,L8=1e4;class Y8{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}class P8{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class X8{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}class U8{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?w8(t):t).join(":")}}const IY={[pY]:Y8,[mY]:P8,[yY]:X8,[KC]:U8};let D8=class{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),EA),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*EA/1e3),this._forceFlush=!1}add(t,n,r,i="none",o={},s=da()){const a=Math.floor(s),l=dY(n),c=fY(o),u=uY(i),d=cY(t,l,u,c);let g=this._buckets.get(d);const p=g&&t===KC?g.metric.weight:0;g?(g.metric.add(r),g.timestamp<a&&(g.timestamp=a)):(g={metric:new IY[t](r),timestamp:a,metricType:t,name:l,unit:u,tags:c},this._buckets.set(d,g));const m=typeof r=="string"?g.metric.weight-p:r;aY(t,l,m,u,o,d),this._bucketsTotalWeight+=g.metric.weight,this._bucketsTotalWeight>=L8&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(da())-EA/1e3-this._flushShift,n=new Map;for(const[r,i]of this._buckets)i.timestamp<=t&&(n.set(r,i),this._bucketsTotalWeight-=i.metric.weight);for(const[r]of n)this._buckets.delete(r);this._captureMetrics(n)}_captureMetrics(t){if(t.size>0&&this._client.captureAggregateMetrics){const n=Array.from(t).map(([,r])=>r);this._client.captureAggregateMetrics(n)}}};class K8 extends W8{constructor(t){c8(),super(t),t._experiments&&t._experiments.metricsAggregator&&(this.metricsAggregator=new D8(this))}eventFromException(t,n){return kd(f4(Tt(),this._options.stackParser,t,n))}eventFromMessage(t,n="info",r){return kd(g4(this._options.stackParser,t,n,r,this._options.attachStacktrace))}captureException(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r){const i=r.getRequestSession();i&&i.status==="ok"&&(i.status="errored")}return super.captureException(t,n,r)}captureEvent(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r&&(t.type||"exception")==="exception"&&t.exception&&t.exception.values&&t.exception.values.length>0){const s=r.getRequestSession();s&&s.status==="ok"&&(s.status="errored")}return super.captureEvent(t,n,r)}close(t){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(t)}initSessionFlusher(){const{release:t,environment:n}=this._options;t?this._sessionFlusher=new h8(this,{release:t,environment:n}):It&&he.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(t,n,r){const i="checkInId"in t&&t.checkInId?t.checkInId:ln();if(!this._isEnabled())return It&&he.warn("SDK not enabled, will not capture checkin."),i;const o=this.getOptions(),{release:s,environment:a,tunnel:l}=o,c={check_in_id:i,monitor_slug:t.monitorSlug,status:t.status,release:s,environment:a};"duration"in t&&(c.duration=t.duration),n&&(c.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone});const[u,d]=this._getTraceInfoFromScope(r);d&&(c.contexts={trace:d});const g=H8(c,u,this.getSdkMetadata(),l,this.getDsn());return It&&he.info("Sending checkin:",t.monitorSlug,t.status),this._sendEnvelope(g),i}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():It&&he.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(t,n,r,i){return this._options.platform&&(t.platform=t.platform||this._options.platform),this._options.runtime&&(t.contexts={...t.contexts,runtime:(t.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(t.server_name=t.server_name||this._options.serverName),super._prepareEvent(t,n,r,i)}_getTraceInfoFromScope(t){if(!t)return[void 0,void 0];const n=t.getSpan();if(n)return[Hh(n)?Rl(n):void 0,FC(n)];const{traceId:r,spanId:i,parentSpanId:o,dsc:s}=t.getPropagationContext(),a={trace_id:r,span_id:i,parent_span_id:o};return s?[s,a]:[Af(r,this,t),a]}}function M8(e,t){t.debug===!0&&(It?he.enable():wl(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),cn().update(t.initialScope);const r=new e(t);$8(r),z8(r)}function $8(e){const n=mn().getStackTop();n.client=e,n.scope.setClient(e)}function z8(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const J8=30;function Lh(e,t,n=Hj(e.bufferSize||J8)){let r={};const i=s=>n.drain(s);function o(s){const a=[];if(Oh(s,(d,g)=>{const p=T2(g);if(c4(r,p)){const m=P2(d,g);e.recordDroppedEvent("ratelimit_backoff",p,m)}else a.push(d)}),a.length===0)return kd();const l=Cf(s[0],a),c=d=>{Oh(l,(g,p)=>{const m=P2(g,p);e.recordDroppedEvent(d,T2(p),m)})},u=()=>t({body:LL(l,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&It&&he.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=u4(r,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof ni)return It&&he.error("Skipped sending event because buffer is full."),c("queue_overflow"),kd();throw d})}return o.__sentry__baseTransport__=!0,{send:o,flush:i}}function P2(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function tI(e,t){const n=t&&q8(t)?t.getClient():t,r=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return Q8(e,r)||j8(e,i)}function j8(e,t){return t?X2(e)===X2(t):!1}function Q8(e,t){return t?e.includes(t.host):!1}function X2(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function q8(e){return e.getClient!==void 0}function eQ(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}function tQ(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Fh})),version:Fh}),e._metadata=i}const RA={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},vY="RequestData",nQ=(e={})=>{const t=Dj,n={...RA,...e,include:{method:!0,...RA.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...RA.include.user,...(e.include||{}).user}}};return{name:vY,setupOnce(){},processEvent(r,i,o){const{transactionNamingScheme:s}=n,{sdkProcessingMetadata:a={}}=r,l=a.request;if(!l)return r;const c=a.requestDataOptionsFromExpressHandler||a.requestDataOptionsFromGCPWrapper||iQ(n),u=t(r,l,c);if(r.type==="transaction"||s==="handler")return u;const g=l._sentryTransaction;if(g){const p=xr(g).description||"",m=oQ(o)==="sentry.javascript.nextjs"?p.startsWith("/api"):s!=="path",[v]=HI(l,{path:!0,method:m,customRoute:p});u.transaction=v}return u}}},FR=nQ,rQ=zt(vY,FR);function iQ(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...i}}=e,o=[];for(const[a,l]of Object.entries(i))l&&o.push(a);let s;if(r===void 0)s=!0;else if(typeof r=="boolean")s=r;else{const a=[];for(const[l,c]of Object.entries(r))c&&a.push(l);s=a}return{include:{ip:n,user:s,request:o.length!==0?o:void 0,transaction:t}}}function oQ(e){try{return e.getOptions()._metadata.sdk.name}catch{return}}const sQ=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],aQ=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],CY="InboundFilters",lQ=(e={})=>({name:CY,setupOnce(){},processEvent(t,n,r){const i=r.getOptions(),o=uQ(e,i);return dQ(t,o)?null:t}}),xR=lQ,cQ=zt(CY,xR);function uQ(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:sQ],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:aQ],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function dQ(e,t){return t.ignoreInternal&&yQ(e)?(It&&he.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ma(e)}`),!0):fQ(e,t.ignoreErrors)?(It&&he.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ma(e)}`),!0):gQ(e,t.ignoreTransactions)?(It&&he.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ma(e)}`),!0):hQ(e,t.denyUrls)?(It&&he.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ma(e)}.
Url: ${LI(e)}`),!0):pQ(e,t.allowUrls)?!1:(It&&he.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ma(e)}.
Url: ${LI(e)}`),!0)}function fQ(e,t){return e.type||!t||!t.length?!1:mQ(e).some(n=>Jc(n,t))}function gQ(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Jc(n,t):!1}function hQ(e,t){if(!t||!t.length)return!1;const n=LI(e);return n?Jc(n,t):!1}function pQ(e,t){if(!t||!t.length)return!0;const n=LI(e);return n?Jc(n,t):!0}function mQ(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),It&&t.length===0&&he.error(`Could not extract message for event ${Ma(e)}`),t}function yQ(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function IQ(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function LI(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?IQ(t):null}catch{return It&&he.error(`Cannot extract url for event ${Ma(e)}`),null}}let U2;const bY="FunctionToString",D2=new WeakMap,vQ=()=>({name:bY,setupOnce(){U2=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=SR(this),n=D2.has(Tt())&&t!==void 0?t:this;return U2.apply(n,e)}}catch{}},setup(e){D2.set(e,!0)}}),LR=vQ,CQ=zt(bY,LR),bQ="cause",AQ=5,AY="LinkedErrors",SQ=(e={})=>{const t=e.limit||AQ,n=e.key||bQ;return{name:AY,setupOnce(){},preprocessEvent(r,i,o){const s=o.getOptions();mL(XL,s.stackParser,s.maxValueLength,n,t,r,i)}}},YR=SQ,_Q=zt(AY,YR),wQ=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:CQ,InboundFilters:cQ,LinkedErrors:_Q},Symbol.toStringTag,{value:"Module"}));class BQ{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),x8)}add(t,n,r,i="none",o={},s=da()){const a=Math.floor(s),l=dY(n),c=fY(o),u=uY(i),d=cY(t,l,u,c);let g=this._buckets.get(d);const p=g&&t===KC?g.metric.weight:0;g?(g.metric.add(r),g.timestamp<a&&(g.timestamp=a)):(g={metric:new IY[t](r),timestamp:a,metricType:t,name:l,unit:u,tags:c},this._buckets.set(d,g));const m=typeof r=="string"?g.metric.weight-p:r;aY(t,l,m,u,o,d)}flush(){if(this._buckets.size!==0){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map(([,n])=>n);this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const SY="MetricsAggregator",EQ=()=>({name:SY,setupOnce(){},setup(e){e.metricsAggregator=new BQ(e)}}),_Y=EQ,RQ=zt(SY,_Y);function MC(e,t,n,r={}){const i=Tt(),o=cn();if(i){if(!i.metricsAggregator){It&&he.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs");return}const{unit:s,tags:a,timestamp:l}=r,{release:c,environment:u}=i.getOptions(),d=o.getTransaction(),g={};c&&(g.release=c),u&&(g.environment=u),d&&(g.transaction=xr(d).description||""),It&&he.log(`Adding value of ${n} to ${e} metric ${t}`),i.metricsAggregator.add(e,t,n,s,{...g,...a},l)}}function GQ(e,t=1,n){MC(pY,e,t,n)}function NQ(e,t,n){MC(yY,e,t,n)}function ZQ(e,t,n){MC(KC,e,t,n)}function TQ(e,t,n){MC(mY,e,t,n)}const WQ={increment:GQ,distribution:NQ,set:ZQ,gauge:TQ,MetricsAggregator:RQ,metricsAggregatorIntegration:_Y},wY=wQ,nr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function qc(e){const t=He([e,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]);return(He([t,"optionalAccess",r=>r.instrumenter])||"sentry")!=="sentry"}class $C{static __initStatic(){this.id="Express"}constructor(t={}){this.name=$C.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,n){if(!this._router){nr&&he.error("ExpressIntegration is missing an Express instance");return}if(qc(n)){nr&&he.log("Express Integration is skipped because of instrumenter configuration.");return}OQ(this._router,this._methods),HQ(this._router)}}$C.__initStatic();function K2(e,t){const n=e.length;switch(n){case 2:return function(r,i){const o=i.__sentry_transaction;if(o){const s=o.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});i.once("finish",()=>{s.end()})}return e.call(this,r,i)};case 3:return function(r,i,o){const s=i.__sentry_transaction,a=He([s,"optionalAccess",l=>l.startChild,"call",l=>l({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,i,function(...l){He([a,"optionalAccess",c=>c.end,"call",c=>c()]),o.call(this,...l)})};case 4:return function(r,i,o,s){const a=o.__sentry_transaction,l=He([a,"optionalAccess",c=>c.startChild,"call",c=>c({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,i,o,function(...c){He([l,"optionalAccess",u=>u.end,"call",u=>u()]),s.call(this,...c)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function kQ(e,t){return e.map(n=>typeof n=="function"?K2(n,t):Array.isArray(n)?n.map(r=>typeof r=="function"?K2(r,t):r):n)}function VQ(e,t){const n=e[t];return e[t]=function(...r){return n.call(this,...kQ(r,t))},e}function OQ(e,t=[]){t.forEach(n=>VQ(e,n))}function HQ(e){const t="settings"in e;t&&e._router===void 0&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n){nr&&he.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),nr&&he.debug("Routing instrumentation is currently only supported in Express 4.");return}const r=Object.getPrototypeOf(n),i=r.process_params;r.process_params=function(s,a,l,c,u){l._reconstructedRoute||(l._reconstructedRoute="");const{layerRoutePath:d,isRegex:g,isArray:p,numExtraSegments:m}=xQ(s);(d||g||p)&&(l._hasParameters=!0);let v;d?v=d:v=PQ(l.originalUrl,l._reconstructedRoute,s.path)||"";const y=v.split("/").filter(A=>A.length>0&&(g||p||!A.includes("*"))).join("/");y&&y.length>0&&(l._reconstructedRoute+=`/${y}${g?"/":""}`);const I=OI(VI(l.originalUrl||""))+m,b=OI(l._reconstructedRoute);if(I===b){l._hasParameters||l._reconstructedRoute!==l.originalUrl&&(l._reconstructedRoute=l.originalUrl?VI(l.originalUrl):l.originalUrl);const A=c.__sentry_transaction,N=A&&xr(A).data||{};if(A&&N[nh]!=="custom"){const L=l._reconstructedRoute||"/",[G,W]=HI(l,{path:!0,method:!0,customRoute:L});A.updateName(G),A.setAttribute(nh,W)}}return i.call(this,s,a,l,c,u)}}const FQ=(e,t,n)=>{if(!e||!t||!n||Object.keys(n).length===0||!He([n,"access",c=>c[0],"optionalAccess",c=>c.offset]))return;const r=n.sort((c,u)=>c.offset-u.offset),o=new RegExp(t,`${t.flags}d`).exec(e);if(!o||!o.indices)return;const[,...s]=o.indices;if(s.length!==r.length)return;let a=e,l=0;return s.forEach((c,u)=>{if(c){const[d,g]=c,p=a.substring(0,d-l),m=`:${r[u].name}`,v=a.substring(g-l);a=p+m+v,l=l+(g-d-m.length)}}),a};function xQ(e){let t=He([e,"access",s=>s.route,"optionalAccess",s=>s.path]);const n=gL(t),r=Array.isArray(t);if(!t){const[s]=$t.process.versions.node.split(".").map(Number);s>=16&&(t=FQ(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const i=r?Math.max(LQ(t)-OI(e.path||""),0):0;return{layerRoutePath:YQ(r,t),isRegex:n,isArray:r,numExtraSegments:i}}function LQ(e){return e.reduce((t,n)=>t+OI(n.toString()),0)}function YQ(e,t){return e?t.map(n=>n.toString()).join(","):t&&t.toString()}function PQ(e,t,n){const r=VI(e||""),i=He([r,"optionalAccess",l=>l.split,"call",l=>l("/"),"access",l=>l.filter,"call",l=>l(c=>!!c)]);let o=0;const s=He([t,"optionalAccess",l=>l.split,"call",l=>l("/"),"access",l=>l.filter,"call",l=>l(c=>!!c),"access",l=>l.length])||0;return He([n,"optionalAccess",l=>l.split,"call",l=>l("/"),"access",l=>l.filter,"call",l=>l(c=>He([i,"optionalAccess",u=>u[s+o]])===c?(o+=1,!0):!1),"access",l=>l.join,"call",l=>l("/")])}class zC{static __initStatic(){this.id="Postgres"}constructor(t={}){this.name=zC.id,this._usePgNative=!!t.usePgNative,this._module=t.module}loadDependency(){return this._module=this._module||Wd("pg")}setupOnce(t,n){if(qc(n)){nr&&he.log("Postgres Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){nr&&he.error("Postgres Integration was unable to require `pg` package.");return}const i=this._usePgNative?He([r,"access",o=>o.native,"optionalAccess",o=>o.Client]):r.Client;if(!i){nr&&he.error("Postgres Integration was unable to access 'pg-native' bindings.");return}on(i.prototype,"query",function(o){return function(s,a,l){const u=n().getScope().getSpan(),d={"db.system":"postgresql"};try{this.database&&(d["db.name"]=this.database),this.host&&(d["server.address"]=this.host),this.port&&(d["server.port"]=this.port),this.user&&(d["db.user"]=this.user)}catch{}const g=He([u,"optionalAccess",m=>m.startChild,"call",m=>m({description:typeof s=="string"?s:s.text,op:"db",origin:"auto.db.postgres",data:d})]);if(typeof l=="function")return o.call(this,s,a,function(m,v){He([g,"optionalAccess",y=>y.end,"call",y=>y()]),l(m,v)});if(typeof a=="function")return o.call(this,s,function(m,v){He([g,"optionalAccess",y=>y.end,"call",y=>y()]),a(m,v)});const p=typeof a<"u"?o.call(this,s,a):o.call(this,s);return Fs(p)?p.then(m=>(He([g,"optionalAccess",v=>v.end,"call",v=>v()]),m)):(He([g,"optionalAccess",m=>m.end,"call",m=>m()]),p)}})}}zC.__initStatic();class JC{static __initStatic(){this.id="Mysql"}constructor(){this.name=JC.id}loadDependency(){return this._module=this._module||Wd("mysql/lib/Connection.js")}setupOnce(t,n){if(qc(n)){nr&&he.log("Mysql Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){nr&&he.error("Mysql Integration was unable to require `mysql` package.");return}let i;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply(a,l,c){return i||(i=l.config),a.apply(l,c)}})}catch{nr&&he.error("Mysql Integration was unable to instrument `mysql` config.")}function o(){return i?{"server.address":i.host,"server.port":i.port,"db.user":i.user}:{}}function s(a){if(!a)return;const l=o();Object.keys(l).forEach(c=>{a.setAttribute(c,l[c])}),a.end()}on(r,"createQuery",function(a){return function(l,c,u){const g=n().getScope().getSpan(),p=He([g,"optionalAccess",v=>v.startChild,"call",v=>v({description:typeof l=="string"?l:l.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof u=="function")return a.call(this,l,c,function(v,y,I){s(p),u(v,y,I)});if(typeof c=="function")return a.call(this,l,function(v,y,I){s(p),c(v,y,I)});const m=a.call(this,l,c);return m.on("end",()=>{s(p)}),m}})}}JC.__initStatic();const XQ=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],UQ={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function DQ(e){return e&&typeof e=="object"&&e.once&&typeof e.once=="function"}class jC{static __initStatic(){this.id="Mongo"}constructor(t={}){this.name=jC.id,this._operations=Array.isArray(t.operations)?t.operations:XQ,this._describeOperations="describeOperations"in t?t.describeOperations:!0,this._useMongoose=!!t.useMongoose}loadDependency(){const t=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Wd(t)}setupOnce(t,n){if(qc(n)){nr&&he.log("Mongo Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){const i=this._useMongoose?"mongoose":"mongodb";nr&&he.error(`Mongo Integration was unable to require \`${i}\` package.`);return}this._instrumentOperations(r.Collection,this._operations,n)}_instrumentOperations(t,n,r){n.forEach(i=>this._patchOperation(t,i,r))}_patchOperation(t,n,r){if(!(n in t.prototype))return;const i=this._getSpanContextFromOperationArguments.bind(this);on(t.prototype,n,function(o){return function(...s){const a=s[s.length-1],l=r(),c=l.getScope(),u=l.getClient(),d=c.getSpan(),g=He([u,"optionalAccess",m=>m.getOptions,"call",m=>m(),"access",m=>m.sendDefaultPii]);if(typeof a!="function"||n==="mapReduce"&&s.length===2){const m=He([d,"optionalAccess",y=>y.startChild,"call",y=>y(i(this,n,s,g))]),v=o.call(this,...s);if(Fs(v))return v.then(y=>(He([m,"optionalAccess",I=>I.end,"call",I=>I()]),y));if(DQ(v)){const y=v;try{y.once("close",()=>{He([m,"optionalAccess",I=>I.end,"call",I=>I()])})}catch{He([m,"optionalAccess",b=>b.end,"call",b=>b()])}return y}else return He([m,"optionalAccess",y=>y.end,"call",y=>y()]),v}const p=He([d,"optionalAccess",m=>m.startChild,"call",m=>m(i(this,n,s.slice(0,-1)))]);return o.call(this,...s.slice(0,-1),function(m,v){He([p,"optionalAccess",y=>y.end,"call",y=>y()]),a(m,v)})}})}_getSpanContextFromOperationArguments(t,n,r,i=!1){const o={"db.system":"mongodb","db.name":t.dbName,"db.operation":n,"db.mongodb.collection":t.collectionName},s={op:"db",origin:"auto.db.mongo",description:n,data:o},a=UQ[n],l=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!a||!l||!i)return s;try{if(n==="mapReduce"){const[c,u]=r;o[a[0]]=typeof c=="string"?c:c.name||"<anonymous>",o[a[1]]=typeof u=="string"?u:u.name||"<anonymous>"}else for(let c=0;c<a.length;c++)o[`db.mongodb.${a[c]}`]=JSON.stringify(r[c])}catch{}return s}}jC.__initStatic();function KQ(e){return!!e&&!!e.$use}class QC{static __initStatic(){this.id="Prisma"}constructor(t={}){if(this.name=QC.id,KQ(t.client)&&!t.client._sentryInstrumented){Bl(t.client,"_sentryInstrumented",!0);const n={};try{const r=t.client._engineConfig;if(r){const{activeProvider:i,clientVersion:o}=r;i&&(n["db.system"]=i),o&&(n["db.prisma.version"]=o)}}catch{}t.client.$use((r,i)=>{if(qc(mn))return i(r);const o=r.action,s=r.model;return OR({name:s?`${s} ${o}`:o,onlyIfParent:!0,op:"db.prisma",attributes:{[Kg]:"auto.db.prisma"},data:{...n,"db.operation":o}},()=>i(r))})}else nr&&he.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",t.client)}setupOnce(){}}QC.__initStatic();class qC{static __initStatic(){this.id="GraphQL"}constructor(){this.name=qC.id}loadDependency(){return this._module=this._module||Wd("graphql/execution/execute.js")}setupOnce(t,n){if(qc(n)){nr&&he.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){nr&&he.error("GraphQL Integration was unable to require graphql/execution package.");return}on(r,"execute",function(i){return function(...o){const s=n().getScope(),a=s.getSpan(),l=He([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);He([s,"optionalAccess",u=>u.setSpan,"call",u=>u(l)]);const c=i.call(this,...o);return Fs(c)?c.then(u=>(He([l,"optionalAccess",d=>d.end,"call",d=>d()]),He([s,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),u)):(He([l,"optionalAccess",u=>u.end,"call",u=>u()]),He([s,"optionalAccess",u=>u.setSpan,"call",u=>u(a)]),c)}})}}qC.__initStatic();class eb{static __initStatic(){this.id="Apollo"}constructor(t={useNestjs:!1}){this.name=eb.id,this._useNest=!!t.useNestjs}loadDependency(){return this._useNest?this._module=this._module||Wd("@nestjs/graphql"):this._module=this._module||Wd("apollo-server-core"),this._module}setupOnce(t,n){if(qc(n)){nr&&he.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const r=this.loadDependency();if(!r){nr&&he.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}on(r.GraphQLFactory.prototype,"mergeWithSchema",function(i){return function(...o){return on(this.resolversExplorerService,"explore",function(s){return function(){const a=kI(s.call(this));return M2(a,n)}}),i.call(this,...o)}})}else{const r=this.loadDependency();if(!r){nr&&he.error("Apollo Integration was unable to require apollo-server-core package.");return}on(r.ApolloServerBase.prototype,"constructSchema",function(i){return function(){if(!this.config.resolvers)return nr&&(this.config.schema?(he.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),he.warn()):this.config.modules&&he.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),he.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),i.call(this);const o=kI(this.config.resolvers);return this.config.resolvers=M2(o,n),i.call(this)}})}}}eb.__initStatic();function M2(e,t){return e.map(n=>(Object.keys(n).forEach(r=>{Object.keys(n[r]).forEach(i=>{typeof n[r][i]=="function"&&MQ(n,r,i,t)})}),n))}function MQ(e,t,n,r){on(e[t],n,function(i){return function(...o){const a=r().getScope().getSpan(),l=He([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),c=i.call(this,...o);return Fs(c)?c.then(u=>(He([l,"optionalAccess",d=>d.end,"call",d=>d()]),u)):(He([l,"optionalAccess",u=>u.end,"call",u=>u()]),c)}})}const Vr=$t;let J_=0;function BY(){return J_>0}function $Q(){J_++,setTimeout(()=>{J_--})}function Hd(e,t={},n){if(typeof e!="function")return e;try{const i=e.__sentry_wrapped__;if(i)return i;if(SR(e))return e}catch{return e}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const o=i.map(s=>Hd(s,t));return e.apply(this,o)}catch(o){throw $Q(),Lp(s=>{s.addEventProcessor(a=>(t.mechanism&&(WI(a,void 0,void 0),Vh(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),xp(o)}),o}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}bL(r,e),Bl(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const PR=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function EY(e,t){const n=XR(e,t),r={type:t&&t.name,value:QQ(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function zQ(e,t,n,r){const i=Tt(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:TC(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:qQ(t,{isUnhandledRejection:r})}]},extra:{__serialized__:wR(t,o)}};if(n){const a=XR(e,n);a.length&&(s.exception.values[0].stacktrace={frames:a})}return s}function GA(e,t){return{exception:{values:[EY(e,t)]}}}function XR(e,t){const n=t.stacktrace||t.stack||"",r=jQ(t);try{return e(n,r)}catch{}return[]}const JQ=/Minified React error #\d+;/i;function jQ(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(JQ.test(e.message))return 1}return 0}function QQ(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function RY(e,t,n,r,i){let o;if(vR(t)&&t.error)return GA(e,t.error);if(m2(t)||PJ(t)){const s=t;if("stack"in t)o=GA(e,t);else{const a=s.name||(m2(s)?"DOMError":"DOMException"),l=s.message?`${a}: ${s.message}`:a;o=$2(e,l,n,r),WI(o,l)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return IR(t)?GA(e,t):_l(t)||TC(t)?(o=zQ(e,t,n,i),Vh(o,{synthetic:!0}),o):(o=$2(e,t,n,r),WI(o,`${t}`,void 0),Vh(o,{synthetic:!0}),o)}function $2(e,t,n,r){const i={};if(r&&n){const o=XR(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(ZC(t)){const{__sentry_template_string__:o,__sentry_template_values__:s}=t;return i.logentry={message:o,params:s},i}return i.message=t,i}function qQ(e,{isUnhandledRejection:t}){const n=SL(e),r=t?"promise rejection":"exception";return vR(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:TC(e)?`Event \`${e7(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function e7(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}const jm=1024,GY="Breadcrumbs",t7=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:GY,setupOnce(){},setup(n){t.console&&RL(s7(n)),t.dom&&dj(o7(n,t.dom)),t.xhr&&Ej(a7(n)),t.fetch&&Ij(l7(n)),t.history&&_j(c7(n)),t.sentry&&n.on&&n.on("beforeSendEvent",i7(n))}}},n7=t7,r7=zt(GY,n7);function i7(e){return function(n){Tt()===e&&wr({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ma(n)},{event:n})}}function o7(e,t){return function(r){if(Tt()!==e)return;let i,o,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>jm&&(PR&&he.warn(`\`dom.maxStringLength\` cannot exceed ${jm}, but a value of ${a} was configured. Sentry will use ${jm} instead.`),a=jm),typeof s=="string"&&(s=[s]);try{const c=r.event,u=u7(c)?c.target:c;i=IL(u,{keyAttrs:s,maxStringLength:a}),o=JJ(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};o&&(l.data={"ui.component_name":o}),wr(l,{event:r.event,name:r.name,global:r.global})}}function s7(e){return function(n){if(Tt()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:OL(n.level),message:y2(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${y2(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;wr(r,{input:n.args,level:n.level})}}function a7(e){return function(n){if(Tt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,o=n.xhr[Dg];if(!r||!i||!o)return;const{method:s,url:a,status_code:l,body:c}=o,u={method:s,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i};wr({category:"xhr",data:u,type:"http"},d)}}function l7(e){return function(n){if(Tt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const o=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};wr({category:"fetch",data:o,level:"error",type:"http"},s)}else{const o=n.response,s={...n.fetchData,status_code:o&&o.status},a={input:n.args,response:o,startTimestamp:r,endTimestamp:i};wr({category:"fetch",data:s,type:"http"},a)}}}function c7(e){return function(n){if(Tt()!==e)return;let r=n.from,i=n.to;const o=eI(Vr.location.href);let s=r?eI(r):void 0;const a=eI(i);(!s||!s.path)&&(s=o),o.protocol===a.protocol&&o.host===a.host&&(i=a.relative),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),wr({category:"navigation",data:{from:r,to:i}})}}function u7(e){return!!e&&!!e.target}const NY="Dedupe",d7=()=>{let e;return{name:NY,setupOnce(){},processEvent(t){if(t.type)return t;try{if(h7(t,e))return PR&&he.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},f7=d7,g7=zt(NY,f7);function h7(e,t){return t?!!(p7(e,t)||m7(e,t)):!1}function p7(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!TY(e,t)||!ZY(e,t))}function m7(e,t){const n=z2(t),r=z2(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!TY(e,t)||!ZY(e,t))}function ZY(e,t){let n=J2(e),r=J2(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function TY(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function z2(e){return e.exception&&e.exception.values&&e.exception.values[0]}function J2(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const WY="GlobalHandlers",y7=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:WY,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(C7(n),j2("onerror")),t.onunhandledrejection&&(b7(n),j2("onunhandledrejection"))}}},I7=y7,v7=zt(WY,I7);function C7(e){ZL(t=>{const{stackParser:n,attachStacktrace:r}=VY();if(Tt()!==e||BY())return;const{msg:i,url:o,line:s,column:a,error:l}=t,c=l===void 0&&ko(i)?_7(i,o,s,a):kY(RY(n,l||i,void 0,r,!1),o,s,a);c.level="error",bf(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function b7(e){TL(t=>{const{stackParser:n,attachStacktrace:r}=VY();if(Tt()!==e||BY())return;const i=A7(t),o=CR(i)?S7(i):RY(n,i,void 0,r,!0);o.level="error",bf(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function A7(e){if(CR(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function S7(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function _7(e,t,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=vR(e)?e.message:e,s="Error";const a=o.match(i);return a&&(s=a[1],o=a[2]),kY({exception:{values:[{type:s,value:o}]}},t,n,r)}function kY(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=ko(t)&&t.length>0?t:zJ();return l.length===0&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),e}function j2(e){PR&&he.log(`Global Handler attached: ${e}`)}function VY(){const e=Tt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const OY="HttpContext",w7=()=>({name:OY,setupOnce(){},preprocessEvent(e){if(!Vr.navigator&&!Vr.location&&!Vr.document)return;const t=e.request&&e.request.url||Vr.location&&Vr.location.href,{referrer:n}=Vr.document||{},{userAgent:r}=Vr.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),B7=w7,E7=zt(OY,B7),R7="cause",G7=5,HY="LinkedErrors",N7=(e={})=>{const t=e.limit||G7,n=e.key||R7;return{name:HY,setupOnce(){},preprocessEvent(r,i,o){const s=o.getOptions();mL(EY,s.stackParser,s.maxValueLength,n,t,r,i)}}},Z7=N7,T7=zt(HY,Z7),W7=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],FY="TryCatch",k7=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:FY,setupOnce(){t.setTimeout&&on(Vr,"setTimeout",Q2),t.setInterval&&on(Vr,"setInterval",Q2),t.requestAnimationFrame&&on(Vr,"requestAnimationFrame",H7),t.XMLHttpRequest&&"XMLHttpRequest"in Vr&&on(XMLHttpRequest.prototype,"send",F7);const n=t.eventTarget;n&&(Array.isArray(n)?n:W7).forEach(x7)}}},V7=k7,O7=zt(FY,V7);function Q2(e){return function(...t){const n=t[0];return t[0]=Hd(n,{mechanism:{data:{function:El(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function H7(e){return function(t){return e.apply(this,[Hd(t,{mechanism:{data:{function:"requestAnimationFrame",handler:El(e)},handled:!1,type:"instrument"}})])}}function F7(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&on(n,i,function(o){const s={mechanism:{data:{function:i,handler:El(o)},handled:!1,type:"instrument"}},a=SR(o);return a&&(s.mechanism.data.handler=El(a)),Hd(o,s)})}),e.apply(this,t)}}function x7(e){const t=Vr,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(on(n,"addEventListener",function(r){return function(i,o,s){try{typeof o.handleEvent=="function"&&(o.handleEvent=Hd(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:El(o),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Hd(o,{mechanism:{data:{function:"addEventListener",handler:El(o),target:e},handled:!1,type:"instrument"}}),s])}}),on(n,"removeEventListener",function(r){return function(i,o,s){const a=o;try{const l=a&&a.__sentry_wrapped__;l&&r.call(this,i,l,s)}catch{}return r.call(this,i,a,s)}}))}const L7=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:r7,Dedupe:g7,GlobalHandlers:v7,HttpContext:E7,LinkedErrors:T7,TryCatch:O7},Symbol.toStringTag,{value:"Module"}));let xY={};Vr.Sentry&&Vr.Sentry.Integrations&&(xY=Vr.Sentry.Integrations);const q2={...xY,...wY,...L7};class LY extends K8{constructor(t){tQ(t,"node"),t.transportOptions={textEncoder:new gr.TextEncoder,...t.transportOptions};const n={...t,platform:"node",runtime:{name:"node",version:global.process.version},serverName:t.serverName||global.process.env.SENTRY_NAME||Fi.hostname()};super(n)}}const ds=Symbol("AgentBaseInternalState");class Y7 extends RI.Agent{constructor(t){super(t),this[ds]={}}isSecureEndpoint(t){if(t){if(typeof t.secureEndpoint=="boolean")return t.secureEndpoint;if(typeof t.protocol=="string")return t.protocol==="https:"}const{stack:n}=new Error;return typeof n!="string"?!1:n.split(`
`).some(r=>r.indexOf("(https.js:")!==-1||r.indexOf("node:https:")!==-1)}createSocket(t,n,r){const i={...n,secureEndpoint:this.isSecureEndpoint(n)};Promise.resolve().then(()=>this.connect(t,i)).then(o=>{if(o instanceof RI.Agent)return o.addRequest(t,i);this[ds].currentSocket=o,super.createSocket(t,n,r)},r)}createConnection(){const t=this[ds].currentSocket;if(this[ds].currentSocket=void 0,!t)throw new Error("No socket was returned in the `connect()` function");return t}get defaultPort(){return Vd(this[ds].defaultPort,()=>this.protocol==="https:"?443:80)}set defaultPort(t){this[ds]&&(this[ds].defaultPort=t)}get protocol(){return Vd(this[ds].protocol,()=>this.isSecureEndpoint()?"https:":"http:")}set protocol(t){this[ds]&&(this[ds].protocol=t)}}function Qm(...e){he.log("[https-proxy-agent:parse-proxy-response]",...e)}function P7(e){return new Promise((t,n)=>{let r=0;const i=[];function o(){const u=e.read();u?c(u):e.once("readable",o)}function s(){e.removeListener("end",a),e.removeListener("error",l),e.removeListener("readable",o)}function a(){s(),Qm("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function l(u){s(),Qm("onerror %o",u),n(u)}function c(u){i.push(u),r+=u.length;const d=Buffer.concat(i,r),g=d.indexOf(`\r
\r
`);if(g===-1){Qm("have not received end of HTTP headers yet..."),o();return}const p=d.slice(0,g).toString("ascii").split(`\r
`),m=p.shift();if(!m)return e.destroy(),n(new Error("No header received from proxy CONNECT response"));const v=m.split(" "),y=+v[1],I=v.slice(2).join(" "),b={};for(const A of p){if(!A)continue;const N=A.indexOf(":");if(N===-1)return e.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${A}"`));const L=A.slice(0,N).toLowerCase(),G=A.slice(N+1).trimStart(),W=b[L];typeof W=="string"?b[L]=[W,G]:Array.isArray(W)?W.push(G):b[L]=G}Qm("got proxy server response: %o %o",m,b),s(),t({connect:{statusCode:y,statusText:I,headers:b},buffered:d})}e.on("error",l),e.on("end",a),o()})}function fg(...e){he.log("[https-proxy-agent]",...e)}class YY extends Y7{static __initStatic(){this.protocols=["http","https"]}constructor(t,n){super(n),this.options={},this.proxy=typeof t=="string"?new Sr.URL(t):t,this.proxyHeaders=Vd(He([n,"optionalAccess",o=>o.headers]),()=>({})),fg("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...n?eT(n,"headers"):null,host:r,port:i}}async connect(t,n){const{proxy:r}=this;if(!n.host)throw new TypeError('No "host" provided');let i;if(r.protocol==="https:"){fg("Creating `tls.Socket`: %o",this.connectOpts);const g=this.connectOpts.servername||this.connectOpts.host;i=c2.connect({...this.connectOpts,servername:g&&cg.isIP(g)?void 0:g})}else fg("Creating `net.Socket`: %o",this.connectOpts),i=cg.connect(this.connectOpts);const o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},s=cg.isIPv6(n.host)?`[${n.host}]`:n.host;let a=`CONNECT ${s}:${n.port} HTTP/1.1\r
`;if(r.username||r.password){const g=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(g).toString("base64")}`}o.Host=`${s}:${n.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const g of Object.keys(o))a+=`${g}: ${o[g]}\r
`;const l=P7(i);i.write(`${a}\r
`);const{connect:c,buffered:u}=await l;if(t.emit("proxyConnect",c),this.emit("proxyConnect",c,t),c.statusCode===200){if(t.once("socket",X7),n.secureEndpoint){fg("Upgrading socket connection to TLS");const g=n.servername||n.host;return c2.connect({...eT(n,"host","path","port"),socket:i,servername:cg.isIP(g)?void 0:g})}return i}i.destroy();const d=new cg.Socket({writable:!1});return d.readable=!0,t.once("socket",g=>{fg("Replaying proxy buffer for failed request"),g.push(u),g.push(null)}),d}}YY.__initStatic();function X7(e){e.resume()}function eT(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}const U7=1024*32;function D7(e){return new Pl.Readable({read(){this.push(e),this.push(null)}})}function K7(e){let t;try{t=new Sr.URL(e.url)}catch{return wl(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),Lh(e,()=>Promise.resolve({}))}const n=t.protocol==="https:",r=M7(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?yJ:RI,o=e.keepAlive===void 0?!1:e.keepAlive,s=r?new YY(r):new i.Agent({keepAlive:o,maxSockets:30,timeout:2e3}),a=$7(e,Vd(e.httpModule,()=>i),s);return Lh(e,a)}function M7(e,t){const{no_proxy:n}=process.env;if(!(n&&n.split(",").some(i=>e.host.endsWith(i)||e.hostname.endsWith(i))))return t}function $7(e,t,n){const{hostname:r,pathname:i,port:o,protocol:s,search:a}=new Sr.URL(e.url);return function(c){return new Promise((u,d)=>{let g=D7(c.body);const p={...e.headers};c.body.length>U7&&(p["content-encoding"]="gzip",g=g.pipe(RC.createGzip()));const m=t.request({method:"POST",agent:n,headers:p,hostname:r,path:`${i}${a}`,port:o,protocol:s,ca:e.caCerts},v=>{v.on("data",()=>{}),v.on("end",()=>{}),v.setEncoding("utf8");const y=Vd(v.headers["retry-after"],()=>null),I=Vd(v.headers["x-sentry-rate-limits"],()=>null);u({statusCode:v.statusCode,headers:{"retry-after":y,"x-sentry-rate-limits":Array.isArray(I)?I[0]:I}})});m.on("error",d),g.pipe(m)})}}const al=NL(process.versions.node);function PY(){return eL.active}function z7(){const e=PY();if(e)return kR(e),ga(e)}function J7(e){const t={};return kR(t,e),ga(t)}function j7(e,t){const n=PY();if(n&&He([t,"optionalAccess",s=>s.reuseExisting]))return e();const r=eL.create(),i=n?ga(n):void 0,o=J7(i);return XC(r,o),r.bind(()=>e())()}function Q7(){qL({getCurrentHub:z7,runWithAsyncContext:j7})}let qm;function q7(){qm||(qm=new vJ.AsyncLocalStorage);function e(){return qm.getStore()}function t(r){const i={};return kR(i,r),ga(i)}function n(r,i){const o=e();if(o&&He([i,"optionalAccess",a=>a.reuseExisting]))return r();const s=t(o);return qm.run(s,()=>r())}qL({getCurrentHub:e,runWithAsyncContext:n})}function e6(){al.major>=14?q7():Q7()}const XY="Console",t6=()=>({name:XY,setupOnce(){},setup(e){RL(({args:t,level:n})=>{Tt()===e&&wr({category:"console",level:OL(n),message:mJ.format.apply(void 0,t)},{input:[...t],level:n})})}}),UY=t6,n6=zt(XY,UY),r6=gr.promisify(Rn.readFile),i6=gr.promisify(Rn.readdir),DY="Context",o6=(e={})=>{let t;const n={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...e};async function r(o){t===void 0&&(t=i());const s=a6(await t);return o.contexts={...o.contexts,app:{...s.app,...He([o,"access",a=>a.contexts,"optionalAccess",a=>a.app])},os:{...s.os,...He([o,"access",a=>a.contexts,"optionalAccess",a=>a.os])},device:{...s.device,...He([o,"access",a=>a.contexts,"optionalAccess",a=>a.device])},culture:{...s.culture,...He([o,"access",a=>a.contexts,"optionalAccess",a=>a.culture])},cloud_resource:{...s.cloud_resource,...He([o,"access",a=>a.contexts,"optionalAccess",a=>a.cloud_resource])}},o}async function i(){const o={};if(n.os&&(o.os=await l6()),n.app&&(o.app=u6()),n.device&&(o.device=d6(n.device)),n.culture){const s=c6();s&&(o.culture=s)}return n.cloudResource&&(o.cloud_resource=y6()),o}return{name:DY,setupOnce(){},processEvent(o){return r(o)}}},KY=o6,s6=zt(DY,KY);function a6(e){return He([e,"optionalAccess",t=>t.app,"optionalAccess",t=>t.app_memory])&&(e.app.app_memory=process.memoryUsage().rss),He([e,"optionalAccess",t=>t.device,"optionalAccess",t=>t.free_memory])&&(e.device.free_memory=Fi.freemem()),e}async function l6(){const e=Fi.platform();switch(e){case"darwin":return p6();case"linux":return m6();default:return{name:f6[e]||e,version:Fi.release()}}}function c6(){try{if(typeof process.versions.icu!="string")return;const e=new Date(9e8);if(new Intl.DateTimeFormat("es",{month:"long"}).format(e)==="enero"){const n=Intl.DateTimeFormat().resolvedOptions();return{locale:n.locale,timezone:n.timeZone}}}catch{}}function u6(){const e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString(),app_memory:e}}function d6(e){const t={};let n;try{n=Fi.uptime&&Fi.uptime()}catch{}if(typeof n=="number"&&(t.boot_time=new Date(Date.now()-n*1e3).toISOString()),t.arch=Fi.arch(),(e===!0||e.memory)&&(t.memory_size=Fi.totalmem(),t.free_memory=Fi.freemem()),e===!0||e.cpu){const r=Fi.cpus();if(r&&r.length){const i=r[0];t.processor_count=r.length,t.cpu_description=i.model,t.processor_frequency=i.speed}}return t}const f6={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},g6=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],h6={alpine:e=>e,arch:e=>ys(/distrib_release=(.*)/,e),centos:e=>ys(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>ys(/release (..)/,e),mint:e=>ys(/distrib_release=(.*)/,e),red:e=>ys(/release ([^ ]+)/,e),suse:e=>ys(/VERSION = (.*)\n/,e),ubuntu:e=>ys(/distrib_release=(.*)/,e)};function ys(e,t){const n=e.exec(t);return n?n[1]:void 0}async function p6(){const e={kernel_version:Fi.release(),name:"Mac OS X",version:`10.${Number(Fi.release().split(".")[0])-4}`};try{const t=await new Promise((n,r)=>{Yl.execFile("/usr/bin/sw_vers",(i,o)=>{if(i){r(i);return}n(o)})});e.name=ys(/^ProductName:\s+(.*)$/m,t),e.version=ys(/^ProductVersion:\s+(.*)$/m,t),e.build=ys(/^BuildVersion:\s+(.*)$/m,t)}catch{}return e}function tT(e){return e.split(" ")[0].toLowerCase()}async function m6(){const e={kernel_version:Fi.release(),name:"Linux"};try{const t=await i6("/etc"),n=g6.find(a=>t.includes(a.name));if(!n)return e;const r=mt.join("/etc",n.name),i=(await r6(r,{encoding:"utf-8"})).toLowerCase(),{distros:o}=n;e.name=o.find(a=>i.indexOf(tT(a))>=0)||o[0];const s=tT(e.name);e.version=h6[s](i)}catch{}return e}function y6(){return process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0}const YI=new fa(100),I6=7,MY="ContextLines";function v6(e){return new Promise((t,n)=>{Rn.readFile(e,"utf8",(r,i)=>{r?n(r):t(i)})})}const C6=(e={})=>{const t=e.frameContextLines!==void 0?e.frameContextLines:I6;return{name:MY,setupOnce(){},processEvent(n){return A6(n,t)}}},$Y=C6,b6=zt(MY,$Y);async function A6(e,t){const n={},r=[];if(t>0&&He([e,"access",i=>i.exception,"optionalAccess",i=>i.values])){for(const i of e.exception.values)if(He([i,"access",o=>o.stacktrace,"optionalAccess",o=>o.frames]))for(let o=i.stacktrace.frames.length-1;o>=0;o--){const s=i.stacktrace.frames[o];s.filename&&!n[s.filename]&&!YI.get(s.filename)&&(r.push(_6(s.filename)),n[s.filename]=1)}}if(r.length>0&&await Promise.all(r),t>0&&He([e,"access",i=>i.exception,"optionalAccess",i=>i.values]))for(const i of e.exception.values)i.stacktrace&&i.stacktrace.frames&&await S6(i.stacktrace.frames,t);return e}function S6(e,t){for(const n of e)if(n.filename&&n.context_line===void 0){const r=YI.get(n.filename);if(r)try{cj(r,n,t)}catch{}}}async function _6(e){const t=YI.get(e);if(t===null)return null;if(t!==void 0)return t;let n=null;try{n=(await v6(e)).split(`
`)}catch{}return YI.set(e,n),n}const Sc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function w6(e){const{protocol:t,hostname:n,port:r}=JY(e),i=e.path?e.path:"/";return`${t}//${n}${r}${i}`}function zY(e){const{protocol:t,hostname:n,port:r}=JY(e),i=e.pathname||"/",o=e.auth?B6(e.auth):"";return`${t}//${o}${n}${r}${i}`}function B6(e){const[t,n]=e.split(":");return`${t?"[Filtered]":""}:${n?"[Filtered]":""}@`}function nT(e,t,n){if(!e)return e;let[r,i]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=He([n,"optionalAccess",o=>o.agent,"optionalAccess",o=>o.protocol]),i=zY(t)),He([i,"optionalAccess",o=>o.startsWith,"call",o=>o("///")])&&(i=i.slice(2)),`${r} ${i}`}function rT(e){const t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function E6(e,t){let n,r;if(typeof t[t.length-1]=="function"&&(n=t.pop()),typeof t[0]=="string")r=rT(new Sr.URL(t[0]));else if(t[0]instanceof Sr.URL)r=rT(t[0]);else{r=t[0];try{const i=new Sr.URL(r.path||"",`${r.protocol||"http:"}//${r.hostname}`);r={pathname:i.pathname,search:i.search,hash:i.hash,...r}}catch{}}return t.length===2&&(r={...r,...t[1]}),r.protocol===void 0&&(al.major>8?r.protocol=He([He([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])||He([r.agent,"optionalAccess",i=>i.protocol])||He([r._defaultAgent,"optionalAccess",i=>i.protocol]):r.protocol=He([r.agent,"optionalAccess",i=>i.protocol])||He([r._defaultAgent,"optionalAccess",i=>i.protocol])||He([He([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])),n?[r,n]:[r]}function JY(e){const t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||e.port===80||e.port===443||/^(.*):(\d+)$/.test(n)?"":`:${e.port}`;return{protocol:t,hostname:n,port:r}}const R6=(e={})=>{const{breadcrumbs:t,tracing:n,shouldCreateSpanForRequest:r}=e,i={breadcrumbs:t,tracing:n===!1?!1:Pn({enableIfHasTracingEnabled:n===!0?void 0:!0,shouldCreateSpanForRequest:r})};return new Wc(i)},G6=R6;class Wc{static __initStatic(){this.id="Http"}__init(){this.name=Wc.id}constructor(t={}){Wc.prototype.__init.call(this),this._breadcrumbs=typeof t.breadcrumbs>"u"?!0:t.breadcrumbs,this._tracing=t.tracing?t.tracing===!0?{}:t.tracing:void 0}setupOnce(t,n){const r=He([n,"call",c=>c(),"access",c=>c.getClient,"call",c=>c(),"optionalAccess",c=>c.getOptions,"call",c=>c()]),i=W6(this._tracing,r);if(!this._breadcrumbs&&!i)return;if(r&&r.instrumenter!=="sentry"){Sc&&he.log("HTTP Integration is skipped because of instrumenter configuration.");return}const o=k6(i,this._tracing,r),s=He([r,"optionalAccess",c=>c.tracePropagationTargets])||He([this,"access",c=>c._tracing,"optionalAccess",c=>c.tracePropagationTargets]),a=oR,l=iT(a,this._breadcrumbs,o,s);if(on(a,"get",l),on(a,"request",l),al.major>8){const c=jx,u=iT(c,this._breadcrumbs,o,s);on(c,"get",u),on(c,"request",u)}}}Wc.__initStatic();function iT(e,t,n,r){const i=new fa(100),o=new fa(100),s=c=>{if(n===void 0)return!0;const u=i.get(c);if(u!==void 0)return u;const d=n(c);return i.set(c,d),d},a=c=>{if(r===void 0)return!0;const u=o.get(c);if(u!==void 0)return u;const d=Jc(c,r);return o.set(c,d),d};function l(c,u,d,g){mn().getIntegration(Wc)&&wr({category:"http",data:{status_code:g&&g.statusCode,...u},type:"http"},{event:c,request:d,response:g})}return function(u){return function(...g){const p=E6(e,g),m=p[0],v=w6(m),y=zY(m),I=Tt();if(tI(y,I))return u.apply(e,p);const b=cn(),A=xs(),N=Pp(),L=Z6(y,m),G=s(v)?He([N,"optionalAccess",W=>W.startChild,"call",W=>W({op:"http.client",origin:"auto.http.node.http",description:`${L["http.method"]} ${L.url}`,data:L})]):void 0;if(I&&a(v)){const{traceId:W,spanId:j,sampled:O,dsc:Ce}={...A.getPropagationContext(),...b.getPropagationContext()},Ue=G?Fp(G):OC(W,j,O),$e=VC(Ce||(G?Rl(G):Af(W,I,b)));N6(m,y,Ue,$e)}else Sc&&he.log(`[Tracing] Not adding sentry-trace header to outgoing request (${y}) due to mismatching tracePropagationTargets option.`);return u.apply(e,p).once("response",function(W){const j=this;t&&l("response",L,j,W),G&&(W.statusCode&&xh(G,W.statusCode),G.updateName(nT(xr(G).description||"",m,j)||""),G.end())}).once("error",function(){const W=this;t&&l("error",L,W),G&&(xh(G,500),G.updateName(nT(xr(G).description||"",m,W)||""),G.end())})}}}function N6(e,t,n,r){(e.headers||{})["sentry-trace"]||(Sc&&he.log(`[Tracing] Adding sentry-trace header ${n} to outgoing request to "${t}": `),e.headers={...e.headers,"sentry-trace":n,...r&&r.length>0&&{baggage:T6(e,r)}})}function Z6(e,t){const n=t.method||"GET",r={url:e,"http.method":n};return t.hash&&(r["http.fragment"]=t.hash.substring(1)),t.search&&(r["http.query"]=t.search.substring(1)),r}function T6(e,t){if(!e.headers||!e.headers.baggage)return t;if(t){if(Array.isArray(e.headers.baggage))return[...e.headers.baggage,t]}else return e.headers.baggage;return[e.headers.baggage,t]}function W6(e,t){return e===void 0?!1:e.enableIfHasTracingEnabled?Yp(t):!0}function k6(e,t,n){return e?He([t,"optionalAccess",i=>i.shouldCreateSpanForRequest])||He([n,"optionalAccess",i=>i.shouldCreateSpanForRequest]):()=>!1}function V6(e,t,n){let r=0,i=5,o=0;return setInterval(()=>{o===0?r>e&&(i*=2,n(i),i>86400&&(i=86400),o=i):(o-=1,o===0&&t()),r=0},1e3).unref(),()=>{r+=1}}function oT(e){return e!==void 0&&(e.length===0||e==="?"||e==="<anonymous>")}function O6(e,t){return e===t||oT(e)&&oT(t)}function jY(e){if(e!==void 0)return e.slice(-10).reduce((t,n)=>`${t},${n.function},${n.lineno},${n.colno}`,"")}function H6(e,t){if(t!==void 0)return jY(e(t,1))}function QY(e){let t=[],n=!1;function r(s){t=[],!n&&(n=!0,e(s))}t.push(r);function i(s){t.push(s)}function o(s){const a=t.pop()||r;try{a(s)}catch{r(s)}}return{add:i,next:o}}class F6{constructor(){const{Session:t}=Qx;this._session=new t}configureAndConnect(t,n){this._session.connect(),this._session.on("Debugger.paused",r=>{t(r,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:n?"all":"uncaught"})}setPauseOnExceptions(t){this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}getLocalVariables(t,n){this._getProperties(t,r=>{const{add:i,next:o}=QY(n);for(const s of r)if(He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&He([s,"optionalAccess",a=>a.value,"access",a=>a.className])==="Array"){const a=s.value.objectId;i(l=>this._unrollArray(a,s.name,l,o))}else if(He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.className])==="Object"){const a=s.value.objectId;i(l=>this._unrollObject(a,s.name,l,o))}else(He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])!=null||He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.description])!=null)&&i(a=>this._unrollOther(s,a,o));o({})})}_getProperties(t,n){this._session.post("Runtime.getProperties",{objectId:t,ownProperties:!0},(r,i)=>{n(r?[]:i.result)})}_unrollArray(t,n,r,i){this._getProperties(t,o=>{r[n]=o.filter(s=>s.name!=="length"&&!isNaN(parseInt(s.name,10))).sort((s,a)=>parseInt(s.name,10)-parseInt(a.name,10)).map(s=>He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])),i(r)})}_unrollObject(t,n,r,i){this._getProperties(t,o=>{r[n]=o.map(s=>[s.name,He([s,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])]).reduce((s,[a,l])=>(s[a]=l,s),{}),i(r)})}_unrollOther(t,n,r){He([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.value])!=null?n[t.name]=t.value.value:He([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.description])!=null&&He([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.type])!=="function"&&(n[t.name]=`<${t.value.description}>`),r(n)}}function x6(){try{return new F6}catch{return}}const qY="LocalVariables",L6=(e={},t=x6())=>{const n=new fa(20);let r,i=!1;function o(l,{params:{reason:c,data:u,callFrames:d}},g){if(c!=="exception"&&c!=="promiseRejection"){g();return}He([r,"optionalCall",y=>y()]);const p=H6(l,He([u,"optionalAccess",y=>y.description]));if(p==null){g();return}const{add:m,next:v}=QY(y=>{n.set(p,y),g()});for(let y=0;y<Math.min(d.length,5);y++){const{scopeChain:I,functionName:b,this:A}=d[y],N=I.find(G=>G.type==="local"),L=A.className==="global"||!A.className?b:`${A.className}.${b}`;if(He([N,"optionalAccess",G=>G.object,"access",G=>G.objectId])===void 0)m(G=>{G[y]={function:L},v(G)});else{const G=N.object.objectId;m(W=>He([t,"optionalAccess",j=>j.getLocalVariables,"call",j=>j(G,O=>{W[y]={function:L,vars:O},v(W)})]))}}v([])}function s(l){const c=jY(He([l,"optionalAccess",g=>g.stacktrace,"optionalAccess",g=>g.frames]));if(c===void 0)return;const u=n.remove(c);if(u===void 0)return;const d=(He([l,"access",g=>g.stacktrace,"optionalAccess",g=>g.frames])||[]).filter(g=>g.function!=="new Promise");for(let g=0;g<d.length;g++){const p=d.length-g-1;if(!d[p]||!u[g])break;u[g].vars===void 0||d[p].in_app===!1||!O6(d[p].function,u[g].function)||(d[p].vars=u[g].vars)}}function a(l){for(const c of He([l,"optionalAccess",u=>u.exception,"optionalAccess",u=>u.values])||[])s(c);return l}return{name:qY,setupOnce(){const l=Tt(),c=He([l,"optionalAccess",u=>u.getOptions,"call",u=>u()]);if(t&&He([c,"optionalAccess",u=>u.includeLocalVariables])){if(al.major<18){he.log("The `LocalVariables` integration is only supported on Node >= v18.");return}const d=e.captureAllExceptions!==!1;if(t.configureAndConnect((g,p)=>o(c.stackParser,g,p),d),d){const g=e.maxExceptionsPerSecond||50;r=V6(g,()=>{he.log("Local variables rate-limit lifted."),He([t,"optionalAccess",p=>p.setPauseOnExceptions,"call",p=>p(!0)])},p=>{he.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${p} seconds.`),He([t,"optionalAccess",m=>m.setPauseOnExceptions,"call",m=>m(!1)])})}i=!0}},processEvent(l){return i?a(l):l},_getCachedFramesCount(){return n.size},_getFirstCachedFrame(){return n.values()[0]}}},eP=L6,Y6=zt(qY,eP),P6=Y6,X6=eP;let NA;const tP="Modules";function U6(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}function D6(){const e=require.main&&require.main.paths||[],t=U6(),n={},r={};return t.forEach(i=>{let o=i;const s=()=>{const a=o;if(o=mt.dirname(a),!o||a===o||r[a])return;if(e.indexOf(o)<0)return s();const l=mt.join(a,"package.json");if(r[a]=!0,!Rn.existsSync(l))return s();try{const c=JSON.parse(Rn.readFileSync(l,"utf8"));n[c.name]=c.version}catch{}};s()}),n}function K6(){return NA||(NA=D6()),NA}const M6=()=>({name:tP,setupOnce(){},processEvent(e){return e.modules={...e.modules,...K6()},e}}),nP=M6,$6=zt(tP,nP),z6=2e3;function j_(e){wl(()=>{console.error(e)});const t=Tt();t===void 0&&(Sc&&he.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));const n=t.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||z6;t.close(r).then(i=>{i||Sc&&he.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)},i=>{Sc&&he.error(i)})}const rP="OnUncaughtException",J6=(e={})=>{const t={exitEvenIfOtherHandlersAreRegistered:!0,...e};return{name:rP,setupOnce(){},setup(n){global.process.on("uncaughtException",Q6(n,t))}}},iP=J6,j6=zt(rP,iP);function Q6(e,t){let r=!1,i=!1,o=!1,s;const a=e.getOptions();return Object.assign(l=>{let c=j_;t.onFatalError?c=t.onFatalError:a.onFatalError&&(c=a.onFatalError);const d=global.process.listeners("uncaughtException").reduce((p,m)=>m.name==="domainUncaughtExceptionClear"||m.tag&&m.tag==="sentry_tracingErrorCallback"||m._errorHandler?p:p+1,0)===0,g=t.exitEvenIfOtherHandlersAreRegistered||d;r?g&&(o?(Sc&&he.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),j_(l)):i||(i=!0,setTimeout(()=>{o||(o=!0,c(s,l))},2e3))):(s=l,r=!0,Tt()===e&&xp(l,{originalException:l,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}}),!o&&g&&(o=!0,c(l)))},{_errorHandler:!0})}const oP="OnUnhandledRejection",q6=(e={})=>{const t=e.mode||"warn";return{name:oP,setupOnce(){},setup(n){global.process.on("unhandledRejection",tq(n,{mode:t}))}}},sP=q6,eq=zt(oP,sP);function tq(e,t){return function(r,i){Tt()===e&&(xp(r,{originalException:i,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),nq(r,t))}}function nq(e,t){const n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";t.mode==="warn"?wl(()=>{console.warn(n),console.error(e&&e.stack?e.stack:e)}):t.mode==="strict"&&(wl(()=>{console.warn(n)}),j_(e))}const aP="Spotlight",rq=(e={})=>{const t={sidecarUrl:e.sidecarUrl||"http://localhost:8969/stream"};return{name:aP,setupOnce(){},setup(n){typeof process=="object"&&process.env&&he.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?"),oq(n,t)}}},lP=rq,iq=zt(aP,lP);function oq(e,t){const n=sq(t.sidecarUrl);if(!n)return;let r=0;if(typeof e.on!="function"){he.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}e.on("beforeEnvelope",i=>{if(r>3){he.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}const o=LL(i),a=aq()({method:"POST",path:n.pathname,hostname:n.hostname,port:n.port,headers:{"Content-Type":"application/x-sentry-envelope"}},l=>{l.on("data",()=>{}),l.on("end",()=>{}),l.setEncoding("utf8")});a.on("error",()=>{r++,he.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),a.write(o),a.end()})}function sq(e){try{return new Sr.URL(`${e}`)}catch{he.warn(`[Spotlight] Invalid sidecar URL: ${e}`);return}}function aq(){const{request:e}=RI;return lq(e)?e.__sentry_original__:e}function lq(e){return"__sentry_original__"in e}var rh;(function(e){const t="undici:request:create";e.RequestCreate=t;const n="undici:request:headers";e.RequestEnd=n;const r="undici:request:error";e.RequestError=r})(rh||(rh={}));const cq=e=>new yi(e),uq=cq;class yi{static __initStatic(){this.id="Undici"}__init(){this.name=yi.id}__init2(){this._createSpanUrlMap=new fa(100)}__init3(){this._headersUrlMap=new fa(100)}constructor(t={}){yi.prototype.__init.call(this),yi.prototype.__init2.call(this),yi.prototype.__init3.call(this),yi.prototype.__init4.call(this),yi.prototype.__init5.call(this),yi.prototype.__init6.call(this),this._options={breadcrumbs:t.breadcrumbs===void 0?!0:t.breadcrumbs,tracing:t.tracing,shouldCreateSpanForRequest:t.shouldCreateSpanForRequest}}setupOnce(t){if(al.major<16)return;let n;try{n=require("diagnostics_channel")}catch{}!n||!n.subscribe||(n.subscribe(rh.RequestCreate,this._onRequestCreate),n.subscribe(rh.RequestEnd,this._onRequestEnd),n.subscribe(rh.RequestError,this._onRequestError))}_shouldCreateSpan(t){if(this._options.tracing===!1||this._options.tracing===void 0&&!Yp())return!1;if(this._options.shouldCreateSpanForRequest===void 0)return!0;const n=this._createSpanUrlMap.get(t);if(n!==void 0)return n;const r=this._options.shouldCreateSpanForRequest(t);return this._createSpanUrlMap.set(t,r),r}__init4(){this._onRequestCreate=t=>{if(!He([Tt,"call",d=>d(),"optionalAccess",d=>d.getIntegration,"call",d=>d(yi)]))return;const{request:n}=t,r=n.origin?n.origin.toString()+n.path:n.path,i=Tt();if(!i||tI(r,i)||n.__sentry_span__!==void 0)return;const o=i.getOptions(),s=cn(),a=xs(),l=Pp(),c=this._shouldCreateSpan(r)?fq(l,n,r):void 0;if(c&&(n.__sentry_span__=c),(d=>{if(o.tracePropagationTargets===void 0)return!0;const g=this._headersUrlMap.get(d);if(g!==void 0)return g;const p=Jc(d,o.tracePropagationTargets);return this._headersUrlMap.set(d,p),p})(r)){const{traceId:d,spanId:g,sampled:p,dsc:m}={...a.getPropagationContext(),...s.getPropagationContext()},v=c?Fp(c):OC(d,g,p),y=VC(m||(c?Rl(c):Af(d,i,s)));dq(n,v,y)}}}__init5(){this._onRequestEnd=t=>{if(!He([Tt,"call",s=>s(),"optionalAccess",s=>s.getIntegration,"call",s=>s(yi)]))return;const{request:n,response:r}=t,i=n.origin?n.origin.toString()+n.path:n.path;if(tI(i,Tt()))return;const o=n.__sentry_span__;o&&(xh(o,r.statusCode),o.end()),this._options.breadcrumbs&&wr({category:"http",data:{method:n.method,status_code:r.statusCode,url:i},type:"http"},{event:"response",request:n,response:r})}}__init6(){this._onRequestError=t=>{if(!He([Tt,"call",o=>o(),"optionalAccess",o=>o.getIntegration,"call",o=>o(yi)]))return;const{request:n}=t,r=n.origin?n.origin.toString()+n.path:n.path;if(tI(r,Tt()))return;const i=n.__sentry_span__;i&&(i.setStatus("internal_error"),i.end()),this._options.breadcrumbs&&wr({category:"http",data:{method:n.method,url:r},level:"error",type:"http"},{event:"error",request:n})}}}yi.__initStatic();function dq(e,t,n){let r;Array.isArray(e.headers)?r=e.headers.some(i=>i==="sentry-trace"):r=e.headers.split(`\r
`).some(o=>o.startsWith("sentry-trace:")),!r&&(e.addHeader("sentry-trace",t),n&&e.addHeader("baggage",n))}function fq(e,t,n){const r=eI(n),i=t.method||"GET",o={"http.method":i};return r.search&&(o["http.query"]=r.search),r.hash&&(o["http.fragment"]=r.hash),He([e,"optionalAccess",s=>s.startChild,"call",s=>s({op:"http.client",origin:"auto.http.node.undici",description:`${i} ${xj(r)}`,data:o})])}function sT(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function tb(e=process.argv[1]?Oj(process.argv[1]):process.cwd(),t=mt.sep==="\\"){const n=t?sT(e):e;return r=>{if(!r)return;const i=t?sT(r):r;let{dir:o,base:s,ext:a}=mt.posix.parse(i);(a===".js"||a===".mjs"||a===".cjs")&&(s=s.slice(0,a.length*-1)),o||(o=".");const l=o.lastIndexOf("/node_modules");if(l>-1)return`${o.slice(l+14).replace(/\//g,".")}:${s}`;if(o.startsWith(n)){let c=o.slice(n.length+1).replace(/\//g,".");return c&&(c+=":"),c+=s,c}return s}}const cP=[xR(),LR(),YR(),FR(),UY(),G6(),uq(),iP(),sP(),$Y(),X6(),KY(),nP()];function gq(e){const t=Xl(),n=He([t,"access",r=>r.__SENTRY__,"optionalAccess",r=>r.integrations])||[];return[...cP,...n]}function hq(e={}){e6(),e.defaultIntegrations===void 0&&(e.defaultIntegrations=gq()),e.dsn===void 0&&(e.dsn="https://55af16af94074b88844cd7e16f535fa5@o76327.ingest.sentry.io/193727");const t=process.env.SENTRY_TRACES_SAMPLE_RATE;if(e.tracesSampleRate===void 0&&t){const r=parseFloat(t);isFinite(r)&&(e.tracesSampleRate=r)}if(e.release===void 0){const r=pq();r!==void 0?e.release=r:e.autoSessionTracking=!1}e.environment===void 0&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),e.autoSessionTracking===void 0&&e.dsn!==void 0&&(e.autoSessionTracking=!0),e.instrumenter===void 0&&(e.instrumenter="sentry");const n={...e,stackParser:sj(e.stackParser||mq),integrations:b8(e),transport:e.transport||K7};if(M8(e.clientClass||LY,n),e.autoSessionTracking&&yq(),Iq(),e.spotlight){const r=Tt();if(r&&r.addIntegration){const i=r.getOptions().integrations;for(const o of i)r.addIntegration(o);r.addIntegration(lP({sidecarUrl:typeof e.spotlight=="string"?e.spotlight:void 0}))}}}function pq(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:$t.SENTRY_RELEASE&&$t.SENTRY_RELEASE.id?$t.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||process.env.CF_PAGES_COMMIT_SHA||e}const mq=_R(EL(tb()));function yq(){JL(),process.on("beforeExit",()=>{const e=xs().getSession();e&&!["exited","crashed"].includes(e.status)&&xC()})}function Iq(){const e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){const t=process.env.SENTRY_TRACE,n=process.env.SENTRY_BAGGAGE,r=e4(t,n);cn().setPropagationContext(r)}}/*! @sentry/node 7.110.0 (9a52d91) | https://github.com/getsentry/sentry-javascript */const vq="aW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gJ2luc3BlY3Rvcic7CmltcG9ydCB7IHdvcmtlckRhdGEsIHBhcmVudFBvcnQgfSBmcm9tICd3b3JrZXJfdGhyZWFkcyc7CmltcG9ydCB7IHBvc2l4LCBzZXAgfSBmcm9tICdwYXRoJzsKaW1wb3J0ICogYXMgaHR0cCBmcm9tICdodHRwJzsKaW1wb3J0ICogYXMgaHR0cHMgZnJvbSAnaHR0cHMnOwppbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7CmltcG9ydCB7IFVSTCB9IGZyb20gJ3VybCc7CmltcG9ydCB7IGNyZWF0ZUd6aXAgfSBmcm9tICd6bGliJzsKaW1wb3J0ICogYXMgbmV0IGZyb20gJ25ldCc7CmltcG9ydCAqIGFzIHRscyBmcm9tICd0bHMnOwoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZApjb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIG9uZSBvZiBhIGZldyBFcnJvciBvciBFcnJvci1saWtlCiAqIHtAbGluayBpc0Vycm9yfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRXJyb3Iod2F0KSB7CiAgc3dpdGNoIChvYmplY3RUb1N0cmluZy5jYWxsKHdhdCkpIHsKICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzoKICAgIGNhc2UgJ1tvYmplY3QgRXhjZXB0aW9uXSc6CiAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOgogICAgICByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBpc0luc3RhbmNlT2Yod2F0LCBFcnJvcik7CiAgfQp9Ci8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gYnVpbHQtaW4gY2xhc3MuCiAqCiAqIEBwYXJhbSB3YXQgVGhlIHZhbHVlIHRvIGJlIGNoZWNrZWQKICogQHBhcmFtIGNsYXNzTmFtZQogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0J1aWx0aW4od2F0LCBjbGFzc05hbWUpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh3YXQpID09PSBgW29iamVjdCAke2NsYXNzTmFtZX1dYDsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIHN0cmluZwogKiB7QGxpbmsgaXNTdHJpbmd9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNTdHJpbmcod2F0KSB7CiAgcmV0dXJuIGlzQnVpbHRpbih3YXQsICdTdHJpbmcnKTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBvYmplY3QgbGl0ZXJhbCwgb3IgYSBjbGFzcyBpbnN0YW5jZS4KICoge0BsaW5rIGlzUGxhaW5PYmplY3R9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh3YXQpIHsKICByZXR1cm4gaXNCdWlsdGluKHdhdCwgJ09iamVjdCcpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIEV2ZW50IGluc3RhbmNlCiAqIHtAbGluayBpc0V2ZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRXZlbnQod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiBFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHdhdCwgRXZlbnQpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIEVsZW1lbnQgaW5zdGFuY2UKICoge0BsaW5rIGlzRWxlbWVudH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0VsZW1lbnQod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2Yod2F0LCBFbGVtZW50KTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlIGhhcyBhIHRoZW4gZnVuY3Rpb24uCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKi8KZnVuY3Rpb24gaXNUaGVuYWJsZSh3YXQpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzCiAgcmV0dXJuIEJvb2xlYW4od2F0ICYmIHdhdC50aGVuICYmIHR5cGVvZiB3YXQudGhlbiA9PT0gJ2Z1bmN0aW9uJyk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYSBTeW50aGV0aWNFdmVudAogKiB7QGxpbmsgaXNTeW50aGV0aWNFdmVudH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KHdhdCkgewogIHJldHVybiBpc1BsYWluT2JqZWN0KHdhdCkgJiYgJ25hdGl2ZUV2ZW50JyBpbiB3YXQgJiYgJ3ByZXZlbnREZWZhdWx0JyBpbiB3YXQgJiYgJ3N0b3BQcm9wYWdhdGlvbicgaW4gd2F0Owp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUgaXMgTmFOCiAqIHtAbGluayBpc05hTn0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc05hTiQxKHdhdCkgewogIHJldHVybiB0eXBlb2Ygd2F0ID09PSAnbnVtYmVyJyAmJiB3YXQgIT09IHdhdDsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBpbnN0YW5jZSBvZiBwcm92aWRlZCBjb25zdHJ1Y3Rvci4KICoge0BsaW5rIGlzSW5zdGFuY2VPZn0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcGFyYW0gYmFzZSBBIGNvbnN0cnVjdG9yIHRvIGJlIHVzZWQgaW4gYSBjaGVjay4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNJbnN0YW5jZU9mKHdhdCwgYmFzZSkgewogIHRyeSB7CiAgICByZXR1cm4gd2F0IGluc3RhbmNlb2YgYmFzZTsKICB9IGNhdGNoIChfZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIFZ1ZSBWaWV3TW9kZWwuCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1Z1ZVZpZXdNb2RlbCh3YXQpIHsKICAvLyBOb3QgdXNpbmcgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyBiZWNhdXNlIGluIFZ1ZSAzIGl0IHdvdWxkIHJlYWQgdGhlIGluc3RhbmNlJ3MgU3ltYm9sKFN5bWJvbC50b1N0cmluZ1RhZykgcHJvcGVydHkuCiAgcmV0dXJuICEhKHR5cGVvZiB3YXQgPT09ICdvYmplY3QnICYmIHdhdCAhPT0gbnVsbCAmJiAoKHdhdCApLl9faXNWdWUgfHwgKHdhdCApLl9pc1Z1ZSkpOwp9CgovKiogSW50ZXJuYWwgZ2xvYmFsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIFNlbnRyeSBleHRlbnNpb25zICAqLwoKLy8gVGhlIGNvZGUgYmVsb3cgZm9yICdpc0dsb2JhbE9iaicgYW5kICdHTE9CQUxfT0JKJyB3YXMgY29waWVkIGZyb20gY29yZS1qcyBiZWZvcmUgbW9kaWZpY2F0aW9uCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2Jsb2IvMWI5NDRkZjU1MjgyY2RjOTljOTBkYjVmNDllYjBiNmVkYTJjYzBhMy9wYWNrYWdlcy9jb3JlLWpzL2ludGVybmFscy9nbG9iYWwuanMKLy8gY29yZS1qcyBoYXMgdGhlIGZvbGxvd2luZyBsaWNlbmNlOgovLwovLyBDb3B5cmlnaHQgKGMpIDIwMTQtMjAyMiBEZW5pcyBQdXNoa2FyZXYKLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQovLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAovLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgovLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTgovLyBUSEUgU09GVFdBUkUuCgovKiogUmV0dXJucyAnb2JqJyBpZiBpdCdzIHRoZSBnbG9iYWwgb2JqZWN0LCBvdGhlcndpc2UgcmV0dXJucyB1bmRlZmluZWQgKi8KZnVuY3Rpb24gaXNHbG9iYWxPYmoob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouTWF0aCA9PSBNYXRoID8gb2JqIDogdW5kZWZpbmVkOwp9CgovKiogR2V0J3MgdGhlIGdsb2JhbCBvYmplY3QgZm9yIHRoZSBjdXJyZW50IEphdmFTY3JpcHQgcnVudGltZSAqLwpjb25zdCBHTE9CQUxfT0JKID0KICAodHlwZW9mIGdsb2JhbFRoaXMgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooZ2xvYmFsVGhpcykpIHx8CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscwogICh0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKHdpbmRvdykpIHx8CiAgKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKHNlbGYpKSB8fAogICh0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGlzR2xvYmFsT2JqKGdsb2JhbCkpIHx8CiAgKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzOwogIH0pKCkgfHwKICB7fTsKCi8qKgogKiBAZGVwcmVjYXRlZCBVc2UgR0xPQkFMX09CSiBpbnN0ZWFkIG9yIFdJTkRPVyBmcm9tIEBzZW50cnkvYnJvd3Nlci4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjgKICovCmZ1bmN0aW9uIGdldEdsb2JhbE9iamVjdCgpIHsKICByZXR1cm4gR0xPQkFMX09CSiA7Cn0KCi8qKgogKiBSZXR1cm5zIGEgZ2xvYmFsIHNpbmdsZXRvbiBjb250YWluZWQgaW4gdGhlIGdsb2JhbCBgX19TRU5UUllfX2Agb2JqZWN0LgogKgogKiBJZiB0aGUgc2luZ2xldG9uIGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBpbiBgX19TRU5UUllfX2AsIGl0IHdpbGwgYmUgY3JlYXRlZCB1c2luZyB0aGUgZ2l2ZW4gZmFjdG9yeQogKiBmdW5jdGlvbiBhbmQgYWRkZWQgdG8gdGhlIGBfX1NFTlRSWV9fYCBvYmplY3QuCiAqCiAqIEBwYXJhbSBuYW1lIG5hbWUgb2YgdGhlIGdsb2JhbCBzaW5nbGV0b24gb24gX19TRU5UUllfXwogKiBAcGFyYW0gY3JlYXRvciBjcmVhdG9yIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBzaW5nbGV0b24gaWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0IG9uIGBfX1NFTlRSWV9fYAogKiBAcGFyYW0gb2JqIChPcHRpb25hbCkgVGhlIGdsb2JhbCBvYmplY3Qgb24gd2hpY2ggdG8gbG9vayBmb3IgYF9fU0VOVFJZX19gLCBpZiBub3QgYEdMT0JBTF9PQkpgJ3MgcmV0dXJuIHZhbHVlCiAqIEByZXR1cm5zIHRoZSBzaW5nbGV0b24KICovCmZ1bmN0aW9uIGdldEdsb2JhbFNpbmdsZXRvbihuYW1lLCBjcmVhdG9yLCBvYmopIHsKICBjb25zdCBnYmwgPSAob2JqIHx8IEdMT0JBTF9PQkopIDsKICBjb25zdCBfX1NFTlRSWV9fID0gKGdibC5fX1NFTlRSWV9fID0gZ2JsLl9fU0VOVFJZX18gfHwge30pOwogIGNvbnN0IHNpbmdsZXRvbiA9IF9fU0VOVFJZX19bbmFtZV0gfHwgKF9fU0VOVFJZX19bbmFtZV0gPSBjcmVhdG9yKCkpOwogIHJldHVybiBzaW5nbGV0b247Cn0KCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpjb25zdCBXSU5ET1cgPSBnZXRHbG9iYWxPYmplY3QoKTsKCmNvbnN0IERFRkFVTFRfTUFYX1NUUklOR19MRU5HVEggPSA4MDsKCi8qKgogKiBHaXZlbiBhIGNoaWxkIERPTSBlbGVtZW50LCByZXR1cm5zIGEgcXVlcnktc2VsZWN0b3Igc3RhdGVtZW50IGRlc2NyaWJpbmcgdGhhdAogKiBhbmQgaXRzIGFuY2VzdG9ycwogKiBlLmcuIFtIVE1MRWxlbWVudF0gPT4gYm9keSA+IGRpdiA+IGlucHV0I2Zvby5idG5bbmFtZT1iYXpdCiAqIEByZXR1cm5zIGdlbmVyYXRlZCBET00gcGF0aAogKi8KZnVuY3Rpb24gaHRtbFRyZWVBc1N0cmluZygKICBlbGVtLAogIG9wdGlvbnMgPSB7fSwKKSB7CiAgaWYgKCFlbGVtKSB7CiAgICByZXR1cm4gJzx1bmtub3duPic7CiAgfQoKICAvLyB0cnkvY2F0Y2ggYm90aDoKICAvLyAtIGFjY2Vzc2luZyBldmVudC50YXJnZXQgKHNlZSBnZXRzZW50cnkvcmF2ZW4tanMjODM4LCAjNzY4KQogIC8vIC0gYGh0bWxUcmVlQXNTdHJpbmdgIGJlY2F1c2UgaXQncyBjb21wbGV4LCBhbmQganVzdCBhY2Nlc3NpbmcgdGhlIERPTSBpbmNvcnJlY3RseQogIC8vIC0gY2FuIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBzb21lIGNpcmN1bXN0YW5jZXMuCiAgdHJ5IHsKICAgIGxldCBjdXJyZW50RWxlbSA9IGVsZW0gOwogICAgY29uc3QgTUFYX1RSQVZFUlNFX0hFSUdIVCA9IDU7CiAgICBjb25zdCBvdXQgPSBbXTsKICAgIGxldCBoZWlnaHQgPSAwOwogICAgbGV0IGxlbiA9IDA7CiAgICBjb25zdCBzZXBhcmF0b3IgPSAnID4gJzsKICAgIGNvbnN0IHNlcExlbmd0aCA9IHNlcGFyYXRvci5sZW5ndGg7CiAgICBsZXQgbmV4dFN0cjsKICAgIGNvbnN0IGtleUF0dHJzID0gQXJyYXkuaXNBcnJheShvcHRpb25zKSA/IG9wdGlvbnMgOiBvcHRpb25zLmtleUF0dHJzOwogICAgY29uc3QgbWF4U3RyaW5nTGVuZ3RoID0gKCFBcnJheS5pc0FycmF5KG9wdGlvbnMpICYmIG9wdGlvbnMubWF4U3RyaW5nTGVuZ3RoKSB8fCBERUZBVUxUX01BWF9TVFJJTkdfTEVOR1RIOwoKICAgIHdoaWxlIChjdXJyZW50RWxlbSAmJiBoZWlnaHQrKyA8IE1BWF9UUkFWRVJTRV9IRUlHSFQpIHsKICAgICAgbmV4dFN0ciA9IF9odG1sRWxlbWVudEFzU3RyaW5nKGN1cnJlbnRFbGVtLCBrZXlBdHRycyk7CiAgICAgIC8vIGJhaWwgb3V0IGlmCiAgICAgIC8vIC0gbmV4dFN0ciBpcyB0aGUgJ2h0bWwnIGVsZW1lbnQKICAgICAgLy8gLSB0aGUgbGVuZ3RoIG9mIHRoZSBzdHJpbmcgdGhhdCB3b3VsZCBiZSBjcmVhdGVkIGV4Y2VlZHMgbWF4U3RyaW5nTGVuZ3RoCiAgICAgIC8vICAgKGlnbm9yZSB0aGlzIGxpbWl0IGlmIHdlIGFyZSBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uKQogICAgICBpZiAobmV4dFN0ciA9PT0gJ2h0bWwnIHx8IChoZWlnaHQgPiAxICYmIGxlbiArIG91dC5sZW5ndGggKiBzZXBMZW5ndGggKyBuZXh0U3RyLmxlbmd0aCA+PSBtYXhTdHJpbmdMZW5ndGgpKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIG91dC5wdXNoKG5leHRTdHIpOwoKICAgICAgbGVuICs9IG5leHRTdHIubGVuZ3RoOwogICAgICBjdXJyZW50RWxlbSA9IGN1cnJlbnRFbGVtLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIG91dC5yZXZlcnNlKCkuam9pbihzZXBhcmF0b3IpOwogIH0gY2F0Y2ggKF9vTykgewogICAgcmV0dXJuICc8dW5rbm93bj4nOwogIH0KfQoKLyoqCiAqIFJldHVybnMgYSBzaW1wbGUsIHF1ZXJ5LXNlbGVjdG9yIHJlcHJlc2VudGF0aW9uIG9mIGEgRE9NIGVsZW1lbnQKICogZS5nLiBbSFRNTEVsZW1lbnRdID0+IGlucHV0I2Zvby5idG5bbmFtZT1iYXpdCiAqIEByZXR1cm5zIGdlbmVyYXRlZCBET00gcGF0aAogKi8KZnVuY3Rpb24gX2h0bWxFbGVtZW50QXNTdHJpbmcoZWwsIGtleUF0dHJzKSB7CiAgY29uc3QgZWxlbSA9IGVsCgo7CgogIGNvbnN0IG91dCA9IFtdOwogIGxldCBjbGFzc05hbWU7CiAgbGV0IGNsYXNzZXM7CiAgbGV0IGtleTsKICBsZXQgYXR0cjsKICBsZXQgaTsKCiAgaWYgKCFlbGVtIHx8ICFlbGVtLnRhZ05hbWUpIHsKICAgIHJldHVybiAnJzsKICB9CgogIC8vIEB0cy1leHBlY3QtZXJyb3IgV0lORE9XIGhhcyBIVE1MRWxlbWVudAogIGlmIChXSU5ET1cuSFRNTEVsZW1lbnQpIHsKICAgIC8vIElmIHVzaW5nIHRoZSBjb21wb25lbnQgbmFtZSBhbm5vdGF0aW9uIHBsdWdpbiwgdGhpcyB2YWx1ZSBtYXkgYmUgYXZhaWxhYmxlIG9uIHRoZSBET00gbm9kZQogICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBlbGVtLmRhdGFzZXQgJiYgZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXSkgewogICAgICByZXR1cm4gZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXTsKICAgIH0KICB9CgogIG91dC5wdXNoKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKTsKCiAgLy8gUGFpcnMgb2YgYXR0cmlidXRlIGtleXMgZGVmaW5lZCBpbiBgc2VyaWFsaXplQXR0cmlidXRlYCBhbmQgdGhlaXIgdmFsdWVzIG9uIGVsZW1lbnQuCiAgY29uc3Qga2V5QXR0clBhaXJzID0KICAgIGtleUF0dHJzICYmIGtleUF0dHJzLmxlbmd0aAogICAgICA/IGtleUF0dHJzLmZpbHRlcihrZXlBdHRyID0+IGVsZW0uZ2V0QXR0cmlidXRlKGtleUF0dHIpKS5tYXAoa2V5QXR0ciA9PiBba2V5QXR0ciwgZWxlbS5nZXRBdHRyaWJ1dGUoa2V5QXR0cildKQogICAgICA6IG51bGw7CgogIGlmIChrZXlBdHRyUGFpcnMgJiYga2V5QXR0clBhaXJzLmxlbmd0aCkgewogICAga2V5QXR0clBhaXJzLmZvckVhY2goa2V5QXR0clBhaXIgPT4gewogICAgICBvdXQucHVzaChgWyR7a2V5QXR0clBhaXJbMF19PSIke2tleUF0dHJQYWlyWzFdfSJdYCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKGVsZW0uaWQpIHsKICAgICAgb3V0LnB1c2goYCMke2VsZW0uaWR9YCk7CiAgICB9CgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWU7CiAgICBpZiAoY2xhc3NOYW1lICYmIGlzU3RyaW5nKGNsYXNzTmFtZSkpIHsKICAgICAgY2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgvXHMrLyk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgb3V0LnB1c2goYC4ke2NsYXNzZXNbaV19YCk7CiAgICAgIH0KICAgIH0KICB9CiAgY29uc3QgYWxsb3dlZEF0dHJzID0gWydhcmlhLWxhYmVsJywgJ3R5cGUnLCAnbmFtZScsICd0aXRsZScsICdhbHQnXTsKICBmb3IgKGkgPSAwOyBpIDwgYWxsb3dlZEF0dHJzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBhbGxvd2VkQXR0cnNbaV07CiAgICBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoa2V5KTsKICAgIGlmIChhdHRyKSB7CiAgICAgIG91dC5wdXNoKGBbJHtrZXl9PSIke2F0dHJ9Il1gKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dC5qb2luKCcnKTsKfQoKLyoqCiAqIFRoaXMgc2VydmVzIGFzIGEgYnVpbGQgdGltZSBmbGFnIHRoYXQgd2lsbCBiZSB0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBmYWxzZSBpbiBub24tZGVidWcgYnVpbGRzIG9yIGlmIHVzZXJzIHJlcGxhY2UgYF9fU0VOVFJZX0RFQlVHX19gIGluIHRoZWlyIGdlbmVyYXRlZCBjb2RlLgogKgogKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuCiAqLwpjb25zdCBERUJVR19CVUlMRCQxID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCi8qKiBQcmVmaXggZm9yIGxvZ2dpbmcgc3RyaW5ncyAqLwpjb25zdCBQUkVGSVggPSAnU2VudHJ5IExvZ2dlciAnOwoKY29uc3QgQ09OU09MRV9MRVZFTFMgPSBbCiAgJ2RlYnVnJywKICAnaW5mbycsCiAgJ3dhcm4nLAogICdlcnJvcicsCiAgJ2xvZycsCiAgJ2Fzc2VydCcsCiAgJ3RyYWNlJywKXSA7CgovKiogVGhpcyBtYXkgYmUgbXV0YXRlZCBieSB0aGUgY29uc29sZSBpbnN0cnVtZW50YXRpb24uICovCmNvbnN0IG9yaWdpbmFsQ29uc29sZU1ldGhvZHMKCiA9IHt9OwoKLyoqIEpTRG9jICovCgovKioKICogVGVtcG9yYXJpbHkgZGlzYWJsZSBzZW50cnkgY29uc29sZSBpbnN0cnVtZW50YXRpb25zLgogKgogKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIHJ1biBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBgY29uc29sZWAgbWVzc2FnZXMKICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrCiAqLwpmdW5jdGlvbiBjb25zb2xlU2FuZGJveChjYWxsYmFjaykgewogIGlmICghKCdjb25zb2xlJyBpbiBHTE9CQUxfT0JKKSkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfQoKICBjb25zdCBjb25zb2xlID0gR0xPQkFMX09CSi5jb25zb2xlIDsKICBjb25zdCB3cmFwcGVkRnVuY3MgPSB7fTsKCiAgY29uc3Qgd3JhcHBlZExldmVscyA9IE9iamVjdC5rZXlzKG9yaWdpbmFsQ29uc29sZU1ldGhvZHMpIDsKCiAgLy8gUmVzdG9yZSBhbGwgd3JhcHBlZCBjb25zb2xlIG1ldGhvZHMKICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kc1tsZXZlbF0gOwogICAgd3JhcHBlZEZ1bmNzW2xldmVsXSA9IGNvbnNvbGVbbGV2ZWxdIDsKICAgIGNvbnNvbGVbbGV2ZWxdID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kOwogIH0pOwoKICB0cnkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfSBmaW5hbGx5IHsKICAgIC8vIFJldmVydCByZXN0b3JhdGlvbiB0byB3cmFwcGVkIHN0YXRlCiAgICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgICBjb25zb2xlW2xldmVsXSA9IHdyYXBwZWRGdW5jc1tsZXZlbF0gOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBtYWtlTG9nZ2VyKCkgewogIGxldCBlbmFibGVkID0gZmFsc2U7CiAgY29uc3QgbG9nZ2VyID0gewogICAgZW5hYmxlOiAoKSA9PiB7CiAgICAgIGVuYWJsZWQgPSB0cnVlOwogICAgfSwKICAgIGRpc2FibGU6ICgpID0+IHsKICAgICAgZW5hYmxlZCA9IGZhbHNlOwogICAgfSwKICAgIGlzRW5hYmxlZDogKCkgPT4gZW5hYmxlZCwKICB9OwoKICBpZiAoREVCVUdfQlVJTEQkMSkgewogICAgQ09OU09MRV9MRVZFTFMuZm9yRWFjaChuYW1lID0+IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgbG9nZ2VyW25hbWVdID0gKC4uLmFyZ3MpID0+IHsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgY29uc29sZVNhbmRib3goKCkgPT4gewogICAgICAgICAgICBHTE9CQUxfT0JKLmNvbnNvbGVbbmFtZV0oYCR7UFJFRklYfVske25hbWV9XTpgLCAuLi5hcmdzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBDT05TT0xFX0xFVkVMUy5mb3JFYWNoKG5hbWUgPT4gewogICAgICBsb2dnZXJbbmFtZV0gPSAoKSA9PiB1bmRlZmluZWQ7CiAgICB9KTsKICB9CgogIHJldHVybiBsb2dnZXIgOwp9Cgpjb25zdCBsb2dnZXIgPSBtYWtlTG9nZ2VyKCk7CgovKioKICogUmVuZGVycyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHNuLgogKgogKiBCeSBkZWZhdWx0LCB0aGlzIHdpbGwgcmVuZGVyIHRoZSBwdWJsaWMgcmVwcmVzZW50YXRpb24gd2l0aG91dCB0aGUgcGFzc3dvcmQKICogY29tcG9uZW50LiBUbyBnZXQgdGhlIGRlcHJlY2F0ZWQgcHJpdmF0ZSByZXByZXNlbnRhdGlvbiwgc2V0IGB3aXRoUGFzc3dvcmRgCiAqIHRvIHRydWUuCiAqCiAqIEBwYXJhbSB3aXRoUGFzc3dvcmQgV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3N3b3JkIHdpbGwgYmUgaW5jbHVkZWQuCiAqLwpmdW5jdGlvbiBkc25Ub1N0cmluZyhkc24sIHdpdGhQYXNzd29yZCA9IGZhbHNlKSB7CiAgY29uc3QgeyBob3N0LCBwYXRoLCBwYXNzLCBwb3J0LCBwcm9qZWN0SWQsIHByb3RvY29sLCBwdWJsaWNLZXkgfSA9IGRzbjsKICByZXR1cm4gKAogICAgYCR7cHJvdG9jb2x9Oi8vJHtwdWJsaWNLZXl9JHt3aXRoUGFzc3dvcmQgJiYgcGFzcyA/IGA6JHtwYXNzfWAgOiAnJ31gICsKICAgIGBAJHtob3N0fSR7cG9ydCA/IGA6JHtwb3J0fWAgOiAnJ30vJHtwYXRoID8gYCR7cGF0aH0vYCA6IHBhdGh9JHtwcm9qZWN0SWR9YAogICk7Cn0KCi8qKiBBbiBlcnJvciBlbWl0dGVkIGJ5IFNlbnRyeSBTREtzIGFuZCByZWxhdGVkIHV0aWxpdGllcy4gKi8KY2xhc3MgU2VudHJ5RXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgLyoqIERpc3BsYXkgbmFtZSBvZiB0aGlzIGVycm9yIGluc3RhbmNlLiAqLwoKICAgY29uc3RydWN0b3IoIG1lc3NhZ2UsIGxvZ0xldmVsID0gJ3dhcm4nKSB7CiAgICBzdXBlcihtZXNzYWdlKTt0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgdGhpcy5uYW1lID0gbmV3LnRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTsKICAgIC8vIFRoaXMgc2V0cyB0aGUgcHJvdG90eXBlIHRvIGJlIGBFcnJvcmAsIG5vdCBgU2VudHJ5RXJyb3JgLiBJdCdzIHVuY2xlYXIgd2h5IHdlIGRvIHRoaXMsIGJ1dCBjb21tZW50aW5nIHRoaXMgbGluZQogICAgLy8gb3V0IGNhdXNlcyB2YXJpb3VzIChzZWVtaW5nbHkgdG90YWxseSB1bnJlbGF0ZWQpIHBsYXl3cmlnaHQgdGVzdHMgY29uc2lzdGVudGx5IHRpbWUgb3V0LiBGWUksIHRoaXMgbWFrZXMKICAgIC8vIGluc3RhbmNlcyBvZiBgU2VudHJ5RXJyb3JgIGZhaWwgYG9iaiBpbnN0YW5jZW9mIFNlbnRyeUVycm9yYCBjaGVja3MuCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOwogICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsOwogIH0KfQoKLyoqCiAqIEVuY29kZXMgZ2l2ZW4gb2JqZWN0IGludG8gdXJsLWZyaWVuZGx5IGZvcm1hdAogKgogKiBAcGFyYW0gb2JqZWN0IEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNlcmlhbGl6YWJsZSB2YWx1ZXMKICogQHJldHVybnMgc3RyaW5nIEVuY29kZWQKICovCmZ1bmN0aW9uIHVybEVuY29kZShvYmplY3QpIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KQogICAgLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9iamVjdFtrZXldKX1gKQogICAgLmpvaW4oJyYnKTsKfQoKLyoqCiAqIFRyYW5zZm9ybXMgYW55IGBFcnJvcmAgb3IgYEV2ZW50YCBpbnRvIGEgcGxhaW4gb2JqZWN0IHdpdGggYWxsIG9mIHRoZWlyIGVudW1lcmFibGUgcHJvcGVydGllcywgYW5kIHNvbWUgb2YgdGhlaXIKICogbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBhdHRhY2hlZC4KICoKICogQHBhcmFtIHZhbHVlIEluaXRpYWwgc291cmNlIHRoYXQgd2UgaGF2ZSB0byB0cmFuc2Zvcm0gaW4gb3JkZXIgZm9yIGl0IHRvIGJlIHVzYWJsZSBieSB0aGUgc2VyaWFsaXplcgogKiBAcmV0dXJucyBBbiBFdmVudCBvciBFcnJvciB0dXJuZWQgaW50byBhbiBvYmplY3QgLSBvciB0aGUgdmFsdWUgYXJndXJtZW50IGl0c2VsZiwgd2hlbiB2YWx1ZSBpcyBuZWl0aGVyIGFuIEV2ZW50IG5vcgogKiAgYW4gRXJyb3IuCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9QbGFpbk9iamVjdCgKICB2YWx1ZSwKKQoKIHsKICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsCiAgICAgIG5hbWU6IHZhbHVlLm5hbWUsCiAgICAgIHN0YWNrOiB2YWx1ZS5zdGFjaywKICAgICAgLi4uZ2V0T3duUHJvcGVydGllcyh2YWx1ZSksCiAgICB9OwogIH0gZWxzZSBpZiAoaXNFdmVudCh2YWx1ZSkpIHsKICAgIGNvbnN0IG5ld09iagoKID0gewogICAgICB0eXBlOiB2YWx1ZS50eXBlLAogICAgICB0YXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLnRhcmdldCksCiAgICAgIGN1cnJlbnRUYXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLmN1cnJlbnRUYXJnZXQpLAogICAgICAuLi5nZXRPd25Qcm9wZXJ0aWVzKHZhbHVlKSwKICAgIH07CgogICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHZhbHVlLCBDdXN0b21FdmVudCkpIHsKICAgICAgbmV3T2JqLmRldGFpbCA9IHZhbHVlLmRldGFpbDsKICAgIH0KCiAgICByZXR1cm4gbmV3T2JqOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9CgovKiogQ3JlYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGFyZ2V0IG9mIGFuIGBFdmVudGAgb2JqZWN0ICovCmZ1bmN0aW9uIHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHRhcmdldCkgewogIHRyeSB7CiAgICByZXR1cm4gaXNFbGVtZW50KHRhcmdldCkgPyBodG1sVHJlZUFzU3RyaW5nKHRhcmdldCkgOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0KTsKICB9IGNhdGNoIChfb08pIHsKICAgIHJldHVybiAnPHVua25vd24+JzsKICB9Cn0KCi8qKiBGaWx0ZXJzIG91dCBhbGwgYnV0IGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzICovCmZ1bmN0aW9uIGdldE93blByb3BlcnRpZXMob2JqKSB7CiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkgewogICAgY29uc3QgZXh0cmFjdGVkUHJvcHMgPSB7fTsKICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqKSB7CiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wZXJ0eSkpIHsKICAgICAgICBleHRyYWN0ZWRQcm9wc1twcm9wZXJ0eV0gPSAob2JqIClbcHJvcGVydHldOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZXh0cmFjdGVkUHJvcHM7CiAgfSBlbHNlIHsKICAgIHJldHVybiB7fTsKICB9Cn0KCi8qKgogKiBHaXZlbiBhbnkgb2JqZWN0LCByZXR1cm4gYSBuZXcgb2JqZWN0IGhhdmluZyByZW1vdmVkIGFsbCBmaWVsZHMgd2hvc2UgdmFsdWUgd2FzIGB1bmRlZmluZWRgLgogKiBXb3JrcyByZWN1cnNpdmVseSBvbiBvYmplY3RzIGFuZCBhcnJheXMuCiAqCiAqIEF0dGVudGlvbjogVGhpcyBmdW5jdGlvbiBrZWVwcyBjaXJjdWxhciByZWZlcmVuY2VzIGluIHRoZSByZXR1cm5lZCBvYmplY3QuCiAqLwpmdW5jdGlvbiBkcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlKSB7CiAgLy8gVGhpcyBtYXAga2VlcHMgdHJhY2sgb2Ygd2hhdCBhbHJlYWR5IHZpc2l0ZWQgbm9kZXMgbWFwIHRvLgogIC8vIE91ciBTZXQgLSBiYXNlZCBtZW1vQnVpbGRlciBkb2Vzbid0IHdvcmsgaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gdGhlIG91dHB1dCBvYmplY3QgdG8gaGF2ZSB0aGUgc2FtZSBjaXJjdWxhcgogIC8vIHJlZmVyZW5jZXMgYXMgdGhlIGlucHV0IG9iamVjdC4KICBjb25zdCBtZW1vaXphdGlvbk1hcCA9IG5ldyBNYXAoKTsKCiAgLy8gVGhpcyBmdW5jdGlvbiBqdXN0IHByb3hpZXMgYF9kcm9wVW5kZWZpbmVkS2V5c2AgdG8ga2VlcCB0aGUgYG1lbW9CdWlsZGVyYCBvdXQgb2YgdGhpcyBmdW5jdGlvbidzIEFQSQogIHJldHVybiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApOwp9CgpmdW5jdGlvbiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApIHsKICBpZiAoaXNQb2pvKGlucHV0VmFsdWUpKSB7CiAgICAvLyBJZiB0aGlzIG5vZGUgaGFzIGFscmVhZHkgYmVlbiB2aXNpdGVkIGR1ZSB0byBhIGNpcmN1bGFyIHJlZmVyZW5jZSwgcmV0dXJuIHRoZSBvYmplY3QgaXQgd2FzIG1hcHBlZCB0byBpbiB0aGUgbmV3IG9iamVjdAogICAgY29uc3QgbWVtb1ZhbCA9IG1lbW9pemF0aW9uTWFwLmdldChpbnB1dFZhbHVlKTsKICAgIGlmIChtZW1vVmFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIG1lbW9WYWwgOwogICAgfQoKICAgIGNvbnN0IHJldHVyblZhbHVlID0ge307CiAgICAvLyBTdG9yZSB0aGUgbWFwcGluZyBvZiB0aGlzIHZhbHVlIGluIGNhc2Ugd2UgdmlzaXQgaXQgYWdhaW4sIGluIGNhc2Ugb2YgY2lyY3VsYXIgZGF0YQogICAgbWVtb2l6YXRpb25NYXAuc2V0KGlucHV0VmFsdWUsIHJldHVyblZhbHVlKTsKCiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhpbnB1dFZhbHVlKSkgewogICAgICBpZiAodHlwZW9mIGlucHV0VmFsdWVba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm5WYWx1ZVtrZXldID0gX2Ryb3BVbmRlZmluZWRLZXlzKGlucHV0VmFsdWVba2V5XSwgbWVtb2l6YXRpb25NYXApOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJldHVyblZhbHVlIDsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KGlucHV0VmFsdWUpKSB7CiAgICAvLyBJZiB0aGlzIG5vZGUgaGFzIGFscmVhZHkgYmVlbiB2aXNpdGVkIGR1ZSB0byBhIGNpcmN1bGFyIHJlZmVyZW5jZSwgcmV0dXJuIHRoZSBhcnJheSBpdCB3YXMgbWFwcGVkIHRvIGluIHRoZSBuZXcgb2JqZWN0CiAgICBjb25zdCBtZW1vVmFsID0gbWVtb2l6YXRpb25NYXAuZ2V0KGlucHV0VmFsdWUpOwogICAgaWYgKG1lbW9WYWwgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gbWVtb1ZhbCA7CiAgICB9CgogICAgY29uc3QgcmV0dXJuVmFsdWUgPSBbXTsKICAgIC8vIFN0b3JlIHRoZSBtYXBwaW5nIG9mIHRoaXMgdmFsdWUgaW4gY2FzZSB3ZSB2aXNpdCBpdCBhZ2FpbiwgaW4gY2FzZSBvZiBjaXJjdWxhciBkYXRhCiAgICBtZW1vaXphdGlvbk1hcC5zZXQoaW5wdXRWYWx1ZSwgcmV0dXJuVmFsdWUpOwoKICAgIGlucHV0VmFsdWUuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICByZXR1cm5WYWx1ZS5wdXNoKF9kcm9wVW5kZWZpbmVkS2V5cyhpdGVtLCBtZW1vaXphdGlvbk1hcCkpOwogICAgfSk7CgogICAgcmV0dXJuIHJldHVyblZhbHVlIDsKICB9CgogIHJldHVybiBpbnB1dFZhbHVlOwp9CgpmdW5jdGlvbiBpc1Bvam8oaW5wdXQpIHsKICBpZiAoIWlzUGxhaW5PYmplY3QoaW5wdXQpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB0cnkgewogICAgY29uc3QgbmFtZSA9IChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpICkuY29uc3RydWN0b3IubmFtZTsKICAgIHJldHVybiAhbmFtZSB8fCBuYW1lID09PSAnT2JqZWN0JzsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBEb2VzIHRoaXMgZmlsZW5hbWUgbG9vayBsaWtlIGl0J3MgcGFydCBvZiB0aGUgYXBwIGNvZGU/CiAqLwpmdW5jdGlvbiBmaWxlbmFtZUlzSW5BcHAoZmlsZW5hbWUsIGlzTmF0aXZlID0gZmFsc2UpIHsKICBjb25zdCBpc0ludGVybmFsID0KICAgIGlzTmF0aXZlIHx8CiAgICAoZmlsZW5hbWUgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgaXQncyBhbiBhYnNvbHV0ZSBsaW51eCBwYXRoCiAgICAgICFmaWxlbmFtZS5zdGFydHNXaXRoKCcvJykgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgaXQncyBhbiBhYnNvbHV0ZSB3aW5kb3dzIHBhdGgKICAgICAgIWZpbGVuYW1lLm1hdGNoKC9eW0EtWl06LykgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgdGhlIHBhdGggaXMgc3RhcnRpbmcgd2l0aCBhIGRvdAogICAgICAhZmlsZW5hbWUuc3RhcnRzV2l0aCgnLicpICYmCiAgICAgIC8vIEl0J3Mgbm90IGludGVybmFsIGlmIHRoZSBmcmFtZSBoYXMgYSBwcm90b2NvbC4gSW4gbm9kZSwgdGhpcyBpcyB1c3VhbGx5IHRoZSBjYXNlIGlmIHRoZSBmaWxlIGdvdCBwcmUtcHJvY2Vzc2VkIHdpdGggYSBidW5kbGVyIGxpa2Ugd2VicGFjawogICAgICAhZmlsZW5hbWUubWF0Y2goL15bYS16QS1aXShbYS16QS1aMC05LlwtK10pKjpcL1wvLykpOyAvLyBTY2hlbWEgZnJvbTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM2NDE3ODIKCiAgLy8gaW5fYXBwIGlzIGFsbCB0aGF0J3Mgbm90IGFuIGludGVybmFsIE5vZGUgZnVuY3Rpb24gb3IgYSBtb2R1bGUgd2l0aGluIG5vZGVfbW9kdWxlcwogIC8vIG5vdGUgdGhhdCBpc05hdGl2ZSBhcHBlYXJzIHRvIHJldHVybiB0cnVlIGV2ZW4gZm9yIG5vZGUgY29yZSBsaWJyYXJpZXMKICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9yYXZlbi1ub2RlL2lzc3Vlcy8xNzYKCiAgcmV0dXJuICFpc0ludGVybmFsICYmIGZpbGVuYW1lICE9PSB1bmRlZmluZWQgJiYgIWZpbGVuYW1lLmluY2x1ZGVzKCdub2RlX21vZHVsZXMvJyk7Cn0KCmNvbnN0IFNUQUNLVFJBQ0VfRlJBTUVfTElNSVQgPSA1MDsKY29uc3QgU1RSSVBfRlJBTUVfUkVHRVhQID0gL2NhcHR1cmVNZXNzYWdlfGNhcHR1cmVFeGNlcHRpb24vOwoKLyoqCiAqIFJlbW92ZXMgU2VudHJ5IGZyYW1lcyBmcm9tIHRoZSB0b3AgYW5kIGJvdHRvbSBvZiB0aGUgc3RhY2sgaWYgcHJlc2VudCBhbmQgZW5mb3JjZXMgYSBsaW1pdCBvZiBtYXggbnVtYmVyIG9mIGZyYW1lcy4KICogQXNzdW1lcyBzdGFjayBpbnB1dCBpcyBvcmRlcmVkIGZyb20gdG9wIHRvIGJvdHRvbSBhbmQgcmV0dXJucyB0aGUgcmV2ZXJzZSByZXByZXNlbnRhdGlvbiBzbyBjYWxsIHNpdGUgb2YgdGhlCiAqIGZ1bmN0aW9uIHRoYXQgY2F1c2VkIHRoZSBjcmFzaCBpcyB0aGUgbGFzdCBmcmFtZSBpbiB0aGUgYXJyYXkuCiAqIEBoaWRkZW4KICovCmZ1bmN0aW9uIHN0cmlwU2VudHJ5RnJhbWVzQW5kUmV2ZXJzZShzdGFjaykgewogIGlmICghc3RhY2subGVuZ3RoKSB7CiAgICByZXR1cm4gW107CiAgfQoKICBjb25zdCBsb2NhbFN0YWNrID0gQXJyYXkuZnJvbShzdGFjayk7CgogIC8vIElmIHN0YWNrIHN0YXJ0cyB3aXRoIG9uZSBvZiBvdXIgQVBJIGNhbGxzLCByZW1vdmUgaXQgKHN0YXJ0cywgbWVhbmluZyBpdCdzIHRoZSB0b3Agb2YgdGhlIHN0YWNrIC0gYWthIGxhc3QgY2FsbCkKICBpZiAoL3NlbnRyeVdyYXBwZWQvLnRlc3QobG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZ1bmN0aW9uIHx8ICcnKSkgewogICAgbG9jYWxTdGFjay5wb3AoKTsKICB9CgogIC8vIFJldmVyc2luZyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBwcm9jZWR1cmUgYWxsb3dzIHVzIHRvIGp1c3QgcG9wIHRoZSB2YWx1ZXMgb2ZmIHRoZSBzdGFjawogIGxvY2FsU3RhY2sucmV2ZXJzZSgpOwoKICAvLyBJZiBzdGFjayBlbmRzIHdpdGggb25lIG9mIG91ciBpbnRlcm5hbCBBUEkgY2FsbHMsIHJlbW92ZSBpdCAoZW5kcywgbWVhbmluZyBpdCdzIHRoZSBib3R0b20gb2YgdGhlIHN0YWNrIC0gYWthIHRvcC1tb3N0IGNhbGwpCiAgaWYgKFNUUklQX0ZSQU1FX1JFR0VYUC50ZXN0KGxvY2FsU3RhY2tbbG9jYWxTdGFjay5sZW5ndGggLSAxXS5mdW5jdGlvbiB8fCAnJykpIHsKICAgIGxvY2FsU3RhY2sucG9wKCk7CgogICAgLy8gV2hlbiB1c2luZyBzeW50aGV0aWMgZXZlbnRzLCB3ZSB3aWxsIGhhdmUgYSAyIGxldmVscyBkZWVwIHN0YWNrLCBhcyBgbmV3IEVycm9yKCdTZW50cnkgc3ludGhldGljRXhjZXB0aW9uJylgCiAgICAvLyBpcyBwcm9kdWNlZCB3aXRoaW4gdGhlIGh1YiBpdHNlbGYsIG1ha2luZyBpdDoKICAgIC8vCiAgICAvLyAgIFNlbnRyeS5jYXB0dXJlRXhjZXB0aW9uKCkKICAgIC8vICAgZ2V0Q3VycmVudEh1YigpLmNhcHR1cmVFeGNlcHRpb24oKQogICAgLy8KICAgIC8vIGluc3RlYWQgb2YganVzdCB0aGUgdG9wIGBTZW50cnlgIGNhbGwgaXRzZWxmLgogICAgLy8gVGhpcyBmb3JjZXMgdXMgdG8gcG9zc2libHkgc3RyaXAgYW4gYWRkaXRpb25hbCBmcmFtZSBpbiB0aGUgZXhhY3Qgc2FtZSB3YXMgYXMgYWJvdmUuCiAgICBpZiAoU1RSSVBfRlJBTUVfUkVHRVhQLnRlc3QobG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZ1bmN0aW9uIHx8ICcnKSkgewogICAgICBsb2NhbFN0YWNrLnBvcCgpOwogICAgfQogIH0KCiAgcmV0dXJuIGxvY2FsU3RhY2suc2xpY2UoMCwgU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCkubWFwKGZyYW1lID0+ICh7CiAgICAuLi5mcmFtZSwKICAgIGZpbGVuYW1lOiBmcmFtZS5maWxlbmFtZSB8fCBsb2NhbFN0YWNrW2xvY2FsU3RhY2subGVuZ3RoIC0gMV0uZmlsZW5hbWUsCiAgICBmdW5jdGlvbjogZnJhbWUuZnVuY3Rpb24gfHwgJz8nLAogIH0pKTsKfQoKY29uc3QgZGVmYXVsdEZ1bmN0aW9uTmFtZSA9ICc8YW5vbnltb3VzPic7CgovKioKICogU2FmZWx5IGV4dHJhY3QgZnVuY3Rpb24gbmFtZSBmcm9tIGl0c2VsZgogKi8KZnVuY3Rpb24gZ2V0RnVuY3Rpb25OYW1lKGZuKSB7CiAgdHJ5IHsKICAgIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lOwogICAgfQogICAgcmV0dXJuIGZuLm5hbWUgfHwgZGVmYXVsdEZ1bmN0aW9uTmFtZTsKICB9IGNhdGNoIChlKSB7CiAgICAvLyBKdXN0IGFjY2Vzc2luZyBjdXN0b20gcHJvcHMgaW4gc29tZSBTZWxlbml1bSBlbnZpcm9ubWVudHMKICAgIC8vIGNhbiBjYXVzZSBhICJQZXJtaXNzaW9uIGRlbmllZCIgZXhjZXB0aW9uIChzZWUgcmF2ZW4tanMjNDk1KS4KICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lOwogIH0KfQoKLyoqCiAqIFVVSUQ0IGdlbmVyYXRvcgogKgogKiBAcmV0dXJucyBzdHJpbmcgR2VuZXJhdGVkIFVVSUQ0LgogKi8KZnVuY3Rpb24gdXVpZDQoKSB7CiAgY29uc3QgZ2JsID0gR0xPQkFMX09CSiA7CiAgY29uc3QgY3J5cHRvID0gZ2JsLmNyeXB0byB8fCBnYmwubXNDcnlwdG87CgogIGxldCBnZXRSYW5kb21CeXRlID0gKCkgPT4gTWF0aC5yYW5kb20oKSAqIDE2OwogIHRyeSB7CiAgICBpZiAoY3J5cHRvICYmIGNyeXB0by5yYW5kb21VVUlEKSB7CiAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpOwogICAgfQogICAgaWYgKGNyeXB0byAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAgIGdldFJhbmRvbUJ5dGUgPSAoKSA9PiB7CiAgICAgICAgLy8gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyBtaWdodCByZXR1cm4gdW5kZWZpbmVkIGluc3RlYWQgb2YgdGhlIHR5cGVkIGFycmF5CiAgICAgICAgLy8gaW4gb2xkIENocm9taXVtIHZlcnNpb25zIChlLmcuIDIzLjAuMTIzNS4wICgxNTE0MjIpKQogICAgICAgIC8vIEhvd2V2ZXIsIGB0eXBlZEFycmF5YCBpcyBzdGlsbCBmaWxsZWQgaW4tcGxhY2UuCiAgICAgICAgLy8gQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3J5cHRvL2dldFJhbmRvbVZhbHVlcyN0eXBlZGFycmF5CiAgICAgICAgY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KDEpOwogICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXModHlwZWRBcnJheSk7CiAgICAgICAgcmV0dXJuIHR5cGVkQXJyYXlbMF07CiAgICAgIH07CiAgICB9CiAgfSBjYXRjaCAoXykgewogICAgLy8gc29tZSBydW50aW1lcyBjYW4gY3Jhc2ggaW52b2tpbmcgY3J5cHRvCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy84OTM1CiAgfQoKICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjExNzUyMyMyMTE3NTIzCiAgLy8gQ29uY2F0ZW5hdGluZyB0aGUgZm9sbG93aW5nIG51bWJlcnMgYXMgc3RyaW5ncyByZXN1bHRzIGluICcxMDAwMDAwMDEwMDA0MDAwODAwMDEwMDAwMDAwMDAwMCcKICByZXR1cm4gKChbMWU3XSApICsgMWUzICsgNGUzICsgOGUzICsgMWUxMSkucmVwbGFjZSgvWzAxOF0vZywgYyA9PgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2UKICAgICgoYyApIF4gKChnZXRSYW5kb21CeXRlKCkgJiAxNSkgPj4gKChjICkgLyA0KSkpLnRvU3RyaW5nKDE2KSwKICApOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGlucHV0IGlzIGFscmVhZHkgYW4gYXJyYXksIGFuZCBpZiBpdCBpc24ndCwgd3JhcHMgaXQgaW4gb25lLgogKgogKiBAcGFyYW0gbWF5YmVBcnJheSBJbnB1dCB0byB0dXJuIGludG8gYW4gYXJyYXksIGlmIG5lY2Vzc2FyeQogKiBAcmV0dXJucyBUaGUgaW5wdXQsIGlmIGFscmVhZHkgYW4gYXJyYXksIG9yIGFuIGFycmF5IHdpdGggdGhlIGlucHV0IGFzIHRoZSBvbmx5IGVsZW1lbnQsIGlmIG5vdAogKi8KZnVuY3Rpb24gYXJyYXlpZnkobWF5YmVBcnJheSkgewogIHJldHVybiBBcnJheS5pc0FycmF5KG1heWJlQXJyYXkpID8gbWF5YmVBcnJheSA6IFttYXliZUFycmF5XTsKfQoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzICovCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi8KCi8qKgogKiBIZWxwZXIgdG8gZGVjeWNsZSBqc29uIG9iamVjdHMKICovCmZ1bmN0aW9uIG1lbW9CdWlsZGVyKCkgewogIGNvbnN0IGhhc1dlYWtTZXQgPSB0eXBlb2YgV2Vha1NldCA9PT0gJ2Z1bmN0aW9uJzsKICBjb25zdCBpbm5lciA9IGhhc1dlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogW107CiAgZnVuY3Rpb24gbWVtb2l6ZShvYmopIHsKICAgIGlmIChoYXNXZWFrU2V0KSB7CiAgICAgIGlmIChpbm5lci5oYXMob2JqKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlubmVyLmFkZChvYmopOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2YKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5uZXIubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgdmFsdWUgPSBpbm5lcltpXTsKICAgICAgaWYgKHZhbHVlID09PSBvYmopIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgaW5uZXIucHVzaChvYmopOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gdW5tZW1vaXplKG9iaikgewogICAgaWYgKGhhc1dlYWtTZXQpIHsKICAgICAgaW5uZXIuZGVsZXRlKG9iaik7CiAgICB9IGVsc2UgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlubmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGlubmVyW2ldID09PSBvYmopIHsKICAgICAgICAgIGlubmVyLnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICByZXR1cm4gW21lbW9pemUsIHVubWVtb2l6ZV07Cn0KCi8qKgogKiBSZWN1cnNpdmVseSBub3JtYWxpemVzIHRoZSBnaXZlbiBvYmplY3QuCiAqCiAqIC0gQ3JlYXRlcyBhIGNvcHkgdG8gcHJldmVudCBvcmlnaW5hbCBpbnB1dCBtdXRhdGlvbgogKiAtIFNraXBzIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMKICogLSBXaGVuIHN0cmluZ2lmeWluZywgY2FsbHMgYHRvSlNPTmAgaWYgaW1wbGVtZW50ZWQKICogLSBSZW1vdmVzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICogLSBUcmFuc2xhdGVzIG5vbi1zZXJpYWxpemFibGUgdmFsdWVzIChgdW5kZWZpbmVkYC9gTmFOYC9mdW5jdGlvbnMpIHRvIHNlcmlhbGl6YWJsZSBmb3JtYXQKICogLSBUcmFuc2xhdGVzIGtub3duIGdsb2JhbCBvYmplY3RzL2NsYXNzZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb25zCiAqIC0gVGFrZXMgY2FyZSBvZiBgRXJyb3JgIG9iamVjdCBzZXJpYWxpemF0aW9uCiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgZGVwdGggb2YgZmluYWwgb3V0cHV0CiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgbnVtYmVyIG9mIHByb3BlcnRpZXMvZWxlbWVudHMgaW5jbHVkZWQgaW4gYW55IHNpbmdsZSBvYmplY3QvYXJyYXkKICoKICogQHBhcmFtIGlucHV0IFRoZSBvYmplY3QgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGRlcHRoIFRoZSBtYXggZGVwdGggdG8gd2hpY2ggdG8gbm9ybWFsaXplIHRoZSBvYmplY3QuIChBbnl0aGluZyBkZWVwZXIgc3RyaW5naWZpZWQgd2hvbGUuKQogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBUaGUgbWF4IG51bWJlciBvZiBlbGVtZW50cyBvciBwcm9wZXJ0aWVzIHRvIGJlIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgYXJyYXkgb3IKICogb2JqZWN0IGluIHRoZSBub3JtYWxsaXplZCBvdXRwdXQuCiAqIEByZXR1cm5zIEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBvYmplY3QsIG9yIGAiKipub24tc2VyaWFsaXphYmxlKioiYCBpZiBhbnkgZXJyb3JzIGFyZSB0aHJvd24gZHVyaW5nIG5vcm1hbGl6YXRpb24uCiAqLwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQpmdW5jdGlvbiBub3JtYWxpemUoaW5wdXQsIGRlcHRoID0gMTAwLCBtYXhQcm9wZXJ0aWVzID0gK0luZmluaXR5KSB7CiAgdHJ5IHsKICAgIC8vIHNpbmNlIHdlJ3JlIGF0IHRoZSBvdXRlcm1vc3QgbGV2ZWwsIHdlIGRvbid0IHByb3ZpZGUgYSBrZXkKICAgIHJldHVybiB2aXNpdCgnJywgaW5wdXQsIGRlcHRoLCBtYXhQcm9wZXJ0aWVzKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJldHVybiB7IEVSUk9SOiBgKipub24tc2VyaWFsaXphYmxlKiogKCR7ZXJyfSlgIH07CiAgfQp9CgovKioKICogVmlzaXRzIGEgbm9kZSB0byBwZXJmb3JtIG5vcm1hbGl6YXRpb24gb24gaXQKICoKICogQHBhcmFtIGtleSBUaGUga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIG5vZGUKICogQHBhcmFtIHZhbHVlIFRoZSBub2RlIHRvIGJlIHZpc2l0ZWQKICogQHBhcmFtIGRlcHRoIE9wdGlvbmFsIG51bWJlciBpbmRpY2F0aW5nIHRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aAogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBPcHRpb25hbCBtYXhpbXVtIG51bWJlciBvZiBwcm9wZXJ0aWVzL2VsZW1lbnRzIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgb2JqZWN0L2FycmF5CiAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIE1lbW8gY2xhc3MgaGFuZGxpbmcgZGVjeWNsaW5nCiAqLwpmdW5jdGlvbiB2aXNpdCgKICBrZXksCiAgdmFsdWUsCiAgZGVwdGggPSArSW5maW5pdHksCiAgbWF4UHJvcGVydGllcyA9ICtJbmZpbml0eSwKICBtZW1vID0gbWVtb0J1aWxkZXIoKSwKKSB7CiAgY29uc3QgW21lbW9pemUsIHVubWVtb2l6ZV0gPSBtZW1vOwoKICAvLyBHZXQgdGhlIHNpbXBsZSBjYXNlcyBvdXQgb2YgdGhlIHdheSBmaXJzdAogIGlmICgKICAgIHZhbHVlID09IG51bGwgfHwgLy8gdGhpcyBtYXRjaGVzIG51bGwgYW5kIHVuZGVmaW5lZCAtPiBlcWVxIG5vdCBlcWVxZXEKICAgIChbJ251bWJlcicsICdib29sZWFuJywgJ3N0cmluZyddLmluY2x1ZGVzKHR5cGVvZiB2YWx1ZSkgJiYgIWlzTmFOJDEodmFsdWUpKQogICkgewogICAgcmV0dXJuIHZhbHVlIDsKICB9CgogIGNvbnN0IHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5VmFsdWUoa2V5LCB2YWx1ZSk7CgogIC8vIEFueXRoaW5nIHdlIGNvdWxkIHBvdGVudGlhbGx5IGRpZyBpbnRvIG1vcmUgKG9iamVjdHMgb3IgYXJyYXlzKSB3aWxsIGhhdmUgY29tZSBiYWNrIGFzIGAiW29iamVjdCBYWFhYXSJgLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSB3aWxsIGhhdmUgYWxyZWFkeSBiZWVuIHNlcmlhbGl6ZWQsIHNvIGlmIHdlIGRvbid0IHNlZSB0aGF0IHBhdHRlcm4sIHdlJ3JlIGRvbmUuCiAgaWYgKCFzdHJpbmdpZmllZC5zdGFydHNXaXRoKCdbb2JqZWN0ICcpKSB7CiAgICByZXR1cm4gc3RyaW5naWZpZWQ7CiAgfQoKICAvLyBGcm9tIGhlcmUgb24sIHdlIGNhbiBhc3NlcnQgdGhhdCBgdmFsdWVgIGlzIGVpdGhlciBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuCgogIC8vIERvIG5vdCBub3JtYWxpemUgb2JqZWN0cyB0aGF0IHdlIGtub3cgaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gQXMgYSBnZW5lcmFsIHJ1bGUsIHRoZQogIC8vICJfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyIgcHJvcGVydHkgc2hvdWxkIG9ubHkgYmUgdXNlZCBzcGFyaW5nbHkgYW5kIG9ubHkgc2hvdWxkIG9ubHkgYmUgc2V0IG9uIG9iamVjdHMgdGhhdAogIC8vIGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuCiAgaWYgKCh2YWx1ZSApWydfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyddKSB7CiAgICByZXR1cm4gdmFsdWUgOwogIH0KCiAgLy8gV2UgY2FuIHNldCBgX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fYCBvbiBhbiBvYmplY3QgdG8gZW5zdXJlIHRoYXQgZnJvbSB0aGVyZQogIC8vIFdlIGtlZXAgYSBjZXJ0YWluIGFtb3VudCBvZiBkZXB0aC4KICAvLyBUaGlzIHNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSwgZS5nLiB3ZSB1c2UgaXQgZm9yIHRoZSByZWR1eCBpbnRlZ3JhdGlvbiB0byBlbnN1cmUgd2UgZ2V0IGEgY2VydGFpbiBhbW91bnQgb2Ygc3RhdGUuCiAgY29uc3QgcmVtYWluaW5nRGVwdGggPQogICAgdHlwZW9mICh2YWx1ZSApWydfX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18nXSA9PT0gJ251bWJlcicKICAgICAgPyAoKHZhbHVlIClbJ19fc2VudHJ5X292ZXJyaWRlX25vcm1hbGl6YXRpb25fZGVwdGhfXyddICkKICAgICAgOiBkZXB0aDsKCiAgLy8gV2UncmUgYWxzbyBkb25lIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIG1heCBkZXB0aAogIGlmIChyZW1haW5pbmdEZXB0aCA9PT0gMCkgewogICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IGBzZXJpYWxpemVkYCBpcyBhIHN0cmluZyBvZiB0aGUgZm9ybSBgIltvYmplY3QgWFhYWF0iYC4gQ2xlYW4gaXQgdXAgc28gaXQncyBqdXN0IGAiW1hYWFhdImAuCiAgICByZXR1cm4gc3RyaW5naWZpZWQucmVwbGFjZSgnb2JqZWN0ICcsICcnKTsKICB9CgogIC8vIElmIHdlJ3ZlIGFscmVhZHkgdmlzaXRlZCB0aGlzIGJyYW5jaCwgYmFpbCBvdXQsIGFzIGl0J3MgY2lyY3VsYXIgcmVmZXJlbmNlLiBJZiBub3QsIG5vdGUgdGhhdCB3ZSdyZSBzZWVpbmcgaXQgbm93LgogIGlmIChtZW1vaXplKHZhbHVlKSkgewogICAgcmV0dXJuICdbQ2lyY3VsYXIgfl0nOwogIH0KCiAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIGB0b0pTT05gIG1ldGhvZCwgd2UgY2FsbCBpdCB0byBleHRyYWN0IG1vcmUgaW5mb3JtYXRpb24KICBjb25zdCB2YWx1ZVdpdGhUb0pTT04gPSB2YWx1ZSA7CiAgaWYgKHZhbHVlV2l0aFRvSlNPTiAmJiB0eXBlb2YgdmFsdWVXaXRoVG9KU09OLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykgewogICAgdHJ5IHsKICAgICAgY29uc3QganNvblZhbHVlID0gdmFsdWVXaXRoVG9KU09OLnRvSlNPTigpOwogICAgICAvLyBXZSBuZWVkIHRvIG5vcm1hbGl6ZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGAudG9KU09OKClgIGluIGNhc2UgaXQgaGFzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICAgICAgcmV0dXJuIHZpc2l0KCcnLCBqc29uVmFsdWUsIHJlbWFpbmluZ0RlcHRoIC0gMSwgbWF4UHJvcGVydGllcywgbWVtbyk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgLy8gcGFzcyAoVGhlIGJ1aWx0LWluIGB0b0pTT05gIGZhaWxlZCwgYnV0IHdlIGNhbiBzdGlsbCB0cnkgdG8gZG8gaXQgb3Vyc2VsdmVzKQogICAgfQogIH0KCiAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IHdlIGVpdGhlciBoYXZlIGFuIG9iamVjdCBvciBhbiBhcnJheSwgd2UgaGF2ZW4ndCBzZWVuIGl0IGJlZm9yZSwgYW5kIHdlJ3JlIGdvaW5nIHRvIHJlY3Vyc2UKICAvLyBiZWNhdXNlIHdlIGhhdmVuJ3QgeWV0IHJlYWNoZWQgdGhlIG1heCBkZXB0aC4gQ3JlYXRlIGFuIGFjY3VtdWxhdG9yIHRvIGhvbGQgdGhlIHJlc3VsdHMgb2YgdmlzaXRpbmcgZWFjaAogIC8vIHByb3BlcnR5L2VudHJ5LCBhbmQga2VlcCB0cmFjayBvZiB0aGUgbnVtYmVyIG9mIGl0ZW1zIHdlIGFkZCB0byBpdC4KICBjb25zdCBub3JtYWxpemVkID0gKEFycmF5LmlzQXJyYXkodmFsdWUpID8gW10gOiB7fSkgOwogIGxldCBudW1BZGRlZCA9IDA7CgogIC8vIEJlZm9yZSB3ZSBiZWdpbiwgY29udmVydGBFcnJvcmAgYW5kYEV2ZW50YCBpbnN0YW5jZXMgaW50byBwbGFpbiBvYmplY3RzLCBzaW5jZSBzb21lIG9mIGVhY2ggb2YgdGhlaXIgcmVsZXZhbnQKICAvLyBwcm9wZXJ0aWVzIGFyZSBub24tZW51bWVyYWJsZSBhbmQgb3RoZXJ3aXNlIHdvdWxkIGdldCBtaXNzZWQuCiAgY29uc3QgdmlzaXRhYmxlID0gY29udmVydFRvUGxhaW5PYmplY3QodmFsdWUgKTsKCiAgZm9yIChjb25zdCB2aXNpdEtleSBpbiB2aXNpdGFibGUpIHsKICAgIC8vIEF2b2lkIGl0ZXJhdGluZyBvdmVyIGZpZWxkcyBpbiB0aGUgcHJvdG90eXBlIGlmIHRoZXkndmUgc29tZWhvdyBiZWVuIGV4cG9zZWQgdG8gZW51bWVyYXRpb24uCiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2aXNpdGFibGUsIHZpc2l0S2V5KSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAobnVtQWRkZWQgPj0gbWF4UHJvcGVydGllcykgewogICAgICBub3JtYWxpemVkW3Zpc2l0S2V5XSA9ICdbTWF4UHJvcGVydGllcyB+XSc7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIFJlY3Vyc2l2ZWx5IHZpc2l0IGFsbCB0aGUgY2hpbGQgbm9kZXMKICAgIGNvbnN0IHZpc2l0VmFsdWUgPSB2aXNpdGFibGVbdmlzaXRLZXldOwogICAgbm9ybWFsaXplZFt2aXNpdEtleV0gPSB2aXNpdCh2aXNpdEtleSwgdmlzaXRWYWx1ZSwgcmVtYWluaW5nRGVwdGggLSAxLCBtYXhQcm9wZXJ0aWVzLCBtZW1vKTsKCiAgICBudW1BZGRlZCsrOwogIH0KCiAgLy8gT25jZSB3ZSd2ZSB2aXNpdGVkIGFsbCB0aGUgYnJhbmNoZXMsIHJlbW92ZSB0aGUgcGFyZW50IGZyb20gbWVtbyBzdG9yYWdlCiAgdW5tZW1vaXplKHZhbHVlKTsKCiAgLy8gUmV0dXJuIGFjY3VtdWxhdGVkIHZhbHVlcwogIHJldHVybiBub3JtYWxpemVkOwp9CgovKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovCi8qKgogKiBTdHJpbmdpZnkgdGhlIGdpdmVuIHZhbHVlLiBIYW5kbGVzIHZhcmlvdXMga25vd24gc3BlY2lhbCB2YWx1ZXMgYW5kIHR5cGVzLgogKgogKiBOb3QgbWVhbnQgdG8gYmUgdXNlZCBvbiBzaW1wbGUgcHJpbWl0aXZlcyB3aGljaCBhbHJlYWR5IGhhdmUgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24sIGFzIGl0IHdpbGwsIGZvciBleGFtcGxlLCB0dXJuCiAqIHRoZSBudW1iZXIgMTIzMSBpbnRvICJbT2JqZWN0IE51bWJlcl0iLCBub3Igb24gYG51bGxgLCBhcyBpdCB3aWxsIHRocm93LgogKgogKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0cmluZ2lmeQogKiBAcmV0dXJucyBBIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB2YWx1ZQogKi8KZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWUoCiAga2V5LAogIC8vIHRoaXMgdHlwZSBpcyBhIHRpbnkgYml0IG9mIGEgY2hlYXQsIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBoYW5kbGUgTmFOICh3aGljaCBpcyB0ZWNobmljYWxseSBhIG51bWJlciksIGJ1dCBmb3IKICAvLyBvdXIgaW50ZXJuYWwgdXNlLCBpdCdsbCBkbwogIHZhbHVlLAopIHsKICB0cnkgewogICAgaWYgKGtleSA9PT0gJ2RvbWFpbicgJiYgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAodmFsdWUgKS5fZXZlbnRzKSB7CiAgICAgIHJldHVybiAnW0RvbWFpbl0nOwogICAgfQoKICAgIGlmIChrZXkgPT09ICdkb21haW5FbWl0dGVyJykgewogICAgICByZXR1cm4gJ1tEb21haW5FbWl0dGVyXSc7CiAgICB9CgogICAgLy8gSXQncyBzYWZlIHRvIHVzZSBgZ2xvYmFsYCwgYHdpbmRvd2AsIGFuZCBgZG9jdW1lbnRgIGhlcmUgaW4gdGhpcyBtYW5uZXIsIGFzIHdlIGFyZSBhc3NlcnRpbmcgdXNpbmcgYHR5cGVvZmAgZmlyc3QKICAgIC8vIHdoaWNoIHdvbid0IHRocm93IGlmIHRoZXkgYXJlIG5vdCBwcmVzZW50LgoKICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZ2xvYmFsKSB7CiAgICAgIHJldHVybiAnW0dsb2JhbF0nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gd2luZG93KSB7CiAgICAgIHJldHVybiAnW1dpbmRvd10nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlID09PSBkb2N1bWVudCkgewogICAgICByZXR1cm4gJ1tEb2N1bWVudF0nOwogICAgfQoKICAgIGlmIChpc1Z1ZVZpZXdNb2RlbCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuICdbVnVlVmlld01vZGVsXSc7CiAgICB9CgogICAgLy8gUmVhY3QncyBTeW50aGV0aWNFdmVudCB0aGluZ3kKICAgIGlmIChpc1N5bnRoZXRpY0V2ZW50KHZhbHVlKSkgewogICAgICByZXR1cm4gJ1tTeW50aGV0aWNFdmVudF0nOwogICAgfQoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlICE9PSB2YWx1ZSkgewogICAgICByZXR1cm4gJ1tOYU5dJzsKICAgIH0KCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBgW0Z1bmN0aW9uOiAke2dldEZ1bmN0aW9uTmFtZSh2YWx1ZSl9XWA7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N5bWJvbCcpIHsKICAgICAgcmV0dXJuIGBbJHtTdHJpbmcodmFsdWUpfV1gOwogICAgfQoKICAgIC8vIHN0cmluZ2lmaWVkIEJpZ0ludHMgYXJlIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20gcmVndWxhciBudW1iZXJzLCBzbyB3ZSBuZWVkIHRvIGxhYmVsIHRoZW0gdG8gYXZvaWQgY29uZnVzaW9uCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYmlnaW50JykgewogICAgICByZXR1cm4gYFtCaWdJbnQ6ICR7U3RyaW5nKHZhbHVlKX1dYDsKICAgIH0KCiAgICAvLyBOb3cgdGhhdCB3ZSd2ZSBrbm9ja2VkIG91dCBhbGwgdGhlIHNwZWNpYWwgY2FzZXMgYW5kIHRoZSBwcmltaXRpdmVzLCBhbGwgd2UgaGF2ZSBsZWZ0IGFyZSBvYmplY3RzLiBTaW1wbHkgY2FzdGluZwogICAgLy8gdGhlbSB0byBzdHJpbmdzIG1lYW5zIHRoYXQgaW5zdGFuY2VzIG9mIGNsYXNzZXMgd2hpY2ggaGF2ZW4ndCBkZWZpbmVkIHRoZWlyIGB0b1N0cmluZ1RhZ2Agd2lsbCBqdXN0IGNvbWUgb3V0IGFzCiAgICAvLyBgIltvYmplY3QgT2JqZWN0XSJgLiBJZiB3ZSBpbnN0ZWFkIGxvb2sgYXQgdGhlIGNvbnN0cnVjdG9yJ3MgbmFtZSAod2hpY2ggaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGNsYXNzKSwKICAgIC8vIHdlIGNhbiBtYWtlIHN1cmUgdGhhdCBvbmx5IHBsYWluIG9iamVjdHMgY29tZSBvdXQgdGhhdCB3YXkuCiAgICBjb25zdCBvYmpOYW1lID0gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKTsKCiAgICAvLyBIYW5kbGUgSFRNTCBFbGVtZW50cwogICAgaWYgKC9eSFRNTChcdyopRWxlbWVudCQvLnRlc3Qob2JqTmFtZSkpIHsKICAgICAgcmV0dXJuIGBbSFRNTEVsZW1lbnQ6ICR7b2JqTmFtZX1dYDsKICAgIH0KCiAgICByZXR1cm4gYFtvYmplY3QgJHtvYmpOYW1lfV1gOwogIH0gY2F0Y2ggKGVycikgewogICAgcmV0dXJuIGAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHtlcnJ9KWA7CiAgfQp9Ci8qIGVzbGludC1lbmFibGUgY29tcGxleGl0eSAqLwoKZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKSB7CiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTsKCiAgcmV0dXJuIHByb3RvdHlwZSA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogJ251bGwgcHJvdG90eXBlJzsKfQoKLyoqCiAqIE5vcm1hbGl6ZXMgVVJMcyBpbiBleGNlcHRpb25zIGFuZCBzdGFja3RyYWNlcyB0byBhIGJhc2UgcGF0aCBzbyBTZW50cnkgY2FuIGZpbmdlcnByaW50CiAqIGFjcm9zcyBwbGF0Zm9ybXMgYW5kIHdvcmtpbmcgZGlyZWN0b3J5LgogKgogKiBAcGFyYW0gdXJsIFRoZSBVUkwgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGJhc2VQYXRoIFRoZSBhcHBsaWNhdGlvbiBiYXNlIHBhdGguCiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIFVSTC4KICovCmZ1bmN0aW9uIG5vcm1hbGl6ZVVybFRvQmFzZSh1cmwsIGJhc2VQYXRoKSB7CiAgY29uc3QgZXNjYXBlZEJhc2UgPSBiYXNlUGF0aAogICAgLy8gQmFja3NsYXNoIHRvIGZvcndhcmQKICAgIC5yZXBsYWNlKC9cXC9nLCAnLycpCiAgICAvLyBFc2NhcGUgUmVnRXhwIHNwZWNpYWwgY2hhcmFjdGVycwogICAgLnJlcGxhY2UoL1t8XFx7fSgpW1xdXiQrKj8uXS9nLCAnXFwkJicpOwoKICBsZXQgbmV3VXJsID0gdXJsOwogIHRyeSB7CiAgICBuZXdVcmwgPSBkZWNvZGVVUkkodXJsKTsKICB9IGNhdGNoIChfT28pIHsKICAgIC8vIFNvbWV0aW1lIHRoaXMgYnJlYWtzCiAgfQogIHJldHVybiAoCiAgICBuZXdVcmwKICAgICAgLnJlcGxhY2UoL1xcL2csICcvJykKICAgICAgLnJlcGxhY2UoL3dlYnBhY2s6XC8/L2csICcnKSAvLyBSZW1vdmUgaW50ZXJtZWRpYXRlIGJhc2UgcGF0aAogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHNlbnRyeS1pbnRlcm5hbC9zZGsvbm8tcmVnZXhwLWNvbnN0cnVjdG9yCiAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoYChmaWxlOi8vKT8vKiR7ZXNjYXBlZEJhc2V9LypgLCAnaWcnKSwgJ2FwcDovLy8nKQogICk7Cn0KCi8vIFNsaWdodGx5IG1vZGlmaWVkIChubyBJRTggc3VwcG9ydCwgRVM2KSBhbmQgdHJhbnNjcmliZWQgdG8gVHlwZVNjcmlwdAoKLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb24KLy8gJ3Jvb3QnIGlzIGp1c3QgYSBzbGFzaCwgb3Igbm90aGluZy4KY29uc3Qgc3BsaXRQYXRoUmUgPSAvXihcUys6XFx8XC8/KShbXHNcU10qPykoKD86XC57MSwyfXxbXi9cXF0rP3wpKFwuW14uL1xcXSp8KSkoPzpbL1xcXSopJC87Ci8qKiBKU0RvYyAqLwpmdW5jdGlvbiBzcGxpdFBhdGgoZmlsZW5hbWUpIHsKICAvLyBUcnVuY2F0ZSBmaWxlcyBuYW1lcyBncmVhdGVyIHRoYW4gMTAyNCBjaGFyYWN0ZXJzIHRvIGF2b2lkIHJlZ2V4IGRvcwogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvcHVsbC84NzM3I2Rpc2N1c3Npb25fcjEyODU3MTkxNzIKICBjb25zdCB0cnVuY2F0ZWQgPSBmaWxlbmFtZS5sZW5ndGggPiAxMDI0ID8gYDx0cnVuY2F0ZWQ+JHtmaWxlbmFtZS5zbGljZSgtMTAyNCl9YCA6IGZpbGVuYW1lOwogIGNvbnN0IHBhcnRzID0gc3BsaXRQYXRoUmUuZXhlYyh0cnVuY2F0ZWQpOwogIHJldHVybiBwYXJ0cyA/IHBhcnRzLnNsaWNlKDEpIDogW107Cn0KCi8qKiBKU0RvYyAqLwpmdW5jdGlvbiBkaXJuYW1lKHBhdGgpIHsKICBjb25zdCByZXN1bHQgPSBzcGxpdFBhdGgocGF0aCk7CiAgY29uc3Qgcm9vdCA9IHJlc3VsdFswXTsKICBsZXQgZGlyID0gcmVzdWx0WzFdOwoKICBpZiAoIXJvb3QgJiYgIWRpcikgewogICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyCiAgICByZXR1cm4gJy4nOwogIH0KCiAgaWYgKGRpcikgewogICAgLy8gSXQgaGFzIGEgZGlybmFtZSwgc3RyaXAgdHJhaWxpbmcgc2xhc2gKICAgIGRpciA9IGRpci5zbGljZSgwLCBkaXIubGVuZ3RoIC0gMSk7CiAgfQoKICByZXR1cm4gcm9vdCArIGRpcjsKfQoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlICovCgovKiogU3luY1Byb21pc2UgaW50ZXJuYWwgc3RhdGVzICovCnZhciBTdGF0ZXM7IChmdW5jdGlvbiAoU3RhdGVzKSB7CiAgLyoqIFBlbmRpbmcgKi8KICBjb25zdCBQRU5ESU5HID0gMDsgU3RhdGVzW1N0YXRlc1siUEVORElORyJdID0gUEVORElOR10gPSAiUEVORElORyI7CiAgLyoqIFJlc29sdmVkIC8gT0sgKi8KICBjb25zdCBSRVNPTFZFRCA9IDE7IFN0YXRlc1tTdGF0ZXNbIlJFU09MVkVEIl0gPSBSRVNPTFZFRF0gPSAiUkVTT0xWRUQiOwogIC8qKiBSZWplY3RlZCAvIEVycm9yICovCiAgY29uc3QgUkVKRUNURUQgPSAyOyBTdGF0ZXNbU3RhdGVzWyJSRUpFQ1RFRCJdID0gUkVKRUNURURdID0gIlJFSkVDVEVEIjsKfSkoU3RhdGVzIHx8IChTdGF0ZXMgPSB7fSkpOwoKLy8gT3ZlcmxvYWRzIHNvIHdlIGNhbiBjYWxsIHJlc29sdmVkU3luY1Byb21pc2Ugd2l0aG91dCBhcmd1bWVudHMgYW5kIGdlbmVyaWMgYXJndW1lbnQKCi8qKgogKiBDcmVhdGVzIGEgcmVzb2x2ZWQgc3luYyBwcm9taXNlLgogKgogKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aAogKiBAcmV0dXJucyB0aGUgcmVzb2x2ZWQgc3luYyBwcm9taXNlCiAqLwpmdW5jdGlvbiByZXNvbHZlZFN5bmNQcm9taXNlKHZhbHVlKSB7CiAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZShyZXNvbHZlID0+IHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0pOwp9CgovKioKICogQ3JlYXRlcyBhIHJlamVjdGVkIHN5bmMgcHJvbWlzZS4KICoKICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byByZWplY3QgdGhlIHByb21pc2Ugd2l0aAogKiBAcmV0dXJucyB0aGUgcmVqZWN0ZWQgc3luYyBwcm9taXNlCiAqLwpmdW5jdGlvbiByZWplY3RlZFN5bmNQcm9taXNlKHJlYXNvbikgewogIHJldHVybiBuZXcgU3luY1Byb21pc2UoKF8sIHJlamVjdCkgPT4gewogICAgcmVqZWN0KHJlYXNvbik7CiAgfSk7Cn0KCi8qKgogKiBUaGVuYWJsZSBjbGFzcyB0aGF0IGJlaGF2ZXMgbGlrZSBhIFByb21pc2UgYW5kIGZvbGxvd3MgaXQncyBpbnRlcmZhY2UKICogYnV0IGlzIG5vdCBhc3luYyBpbnRlcm5hbGx5CiAqLwpjbGFzcyBTeW5jUHJvbWlzZSB7CgogICBjb25zdHJ1Y3RvcigKICAgIGV4ZWN1dG9yLAogICkge1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQuY2FsbCh0aGlzKTtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0Mi5jYWxsKHRoaXMpO1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQzLmNhbGwodGhpcyk7U3luY1Byb21pc2UucHJvdG90eXBlLl9faW5pdDQuY2FsbCh0aGlzKTsKICAgIHRoaXMuX3N0YXRlID0gU3RhdGVzLlBFTkRJTkc7CiAgICB0aGlzLl9oYW5kbGVycyA9IFtdOwoKICAgIHRyeSB7CiAgICAgIGV4ZWN1dG9yKHRoaXMuX3Jlc29sdmUsIHRoaXMuX3JlamVjdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMuX3JlamVjdChlKTsKICAgIH0KICB9CgogIC8qKiBKU0RvYyAqLwogICB0aGVuKAogICAgb25mdWxmaWxsZWQsCiAgICBvbnJlamVjdGVkLAogICkgewogICAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIHRoaXMuX2hhbmRsZXJzLnB1c2goWwogICAgICAgIGZhbHNlLAogICAgICAgIHJlc3VsdCA9PiB7CiAgICAgICAgICBpZiAoIW9uZnVsZmlsbGVkKSB7CiAgICAgICAgICAgIC8vIFRPRE86IMKvXF8o44OEKV8vwq8KICAgICAgICAgICAgLy8gVE9ETzogRklYTUUKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShvbmZ1bGZpbGxlZChyZXN1bHQpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVhc29uID0+IHsKICAgICAgICAgIGlmICghb25yZWplY3RlZCkgewogICAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShvbnJlamVjdGVkKHJlYXNvbikpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgXSk7CiAgICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVycygpOwogICAgfSk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgY2F0Y2goCiAgICBvbnJlamVjdGVkLAogICkgewogICAgcmV0dXJuIHRoaXMudGhlbih2YWwgPT4gdmFsLCBvbnJlamVjdGVkKTsKICB9CgogIC8qKiBKU0RvYyAqLwogICBmaW5hbGx5KG9uZmluYWxseSkgewogICAgcmV0dXJuIG5ldyBTeW5jUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGxldCB2YWw7CiAgICAgIGxldCBpc1JlamVjdGVkOwoKICAgICAgcmV0dXJuIHRoaXMudGhlbigKICAgICAgICB2YWx1ZSA9PiB7CiAgICAgICAgICBpc1JlamVjdGVkID0gZmFsc2U7CiAgICAgICAgICB2YWwgPSB2YWx1ZTsKICAgICAgICAgIGlmIChvbmZpbmFsbHkpIHsKICAgICAgICAgICAgb25maW5hbGx5KCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZWFzb24gPT4gewogICAgICAgICAgaXNSZWplY3RlZCA9IHRydWU7CiAgICAgICAgICB2YWwgPSByZWFzb247CiAgICAgICAgICBpZiAob25maW5hbGx5KSB7CiAgICAgICAgICAgIG9uZmluYWxseSgpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICkudGhlbigoKSA9PiB7CiAgICAgICAgaWYgKGlzUmVqZWN0ZWQpIHsKICAgICAgICAgIHJlamVjdCh2YWwpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZSh2YWwgKTsKICAgICAgfSk7CiAgICB9KTsKICB9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0KCkge3RoaXMuX3Jlc29sdmUgPSAodmFsdWUpID0+IHsKICAgIHRoaXMuX3NldFJlc3VsdChTdGF0ZXMuUkVTT0xWRUQsIHZhbHVlKTsKICB9O30KCiAgLyoqIEpTRG9jICovCiAgICBfX2luaXQyKCkge3RoaXMuX3JlamVjdCA9IChyZWFzb24pID0+IHsKICAgIHRoaXMuX3NldFJlc3VsdChTdGF0ZXMuUkVKRUNURUQsIHJlYXNvbik7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0MygpIHt0aGlzLl9zZXRSZXN1bHQgPSAoc3RhdGUsIHZhbHVlKSA9PiB7CiAgICBpZiAodGhpcy5fc3RhdGUgIT09IFN0YXRlcy5QRU5ESU5HKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoaXNUaGVuYWJsZSh2YWx1ZSkpIHsKICAgICAgdm9pZCAodmFsdWUgKS50aGVuKHRoaXMuX3Jlc29sdmUsIHRoaXMuX3JlamVjdCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlOwogICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTsKCiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMoKTsKICB9O30KCiAgLyoqIEpTRG9jICovCiAgICBfX2luaXQ0KCkge3RoaXMuX2V4ZWN1dGVIYW5kbGVycyA9ICgpID0+IHsKICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlBFTkRJTkcpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGNhY2hlZEhhbmRsZXJzID0gdGhpcy5faGFuZGxlcnMuc2xpY2UoKTsKICAgIHRoaXMuX2hhbmRsZXJzID0gW107CgogICAgY2FjaGVkSGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHsKICAgICAgaWYgKGhhbmRsZXJbMF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlJFU09MVkVEKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlcwogICAgICAgIGhhbmRsZXJbMV0odGhpcy5fdmFsdWUgKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBTdGF0ZXMuUkVKRUNURUQpIHsKICAgICAgICBoYW5kbGVyWzJdKHRoaXMuX3ZhbHVlKTsKICAgICAgfQoKICAgICAgaGFuZGxlclswXSA9IHRydWU7CiAgICB9KTsKICB9O30KfQoKLyoqCiAqIENyZWF0ZXMgYW4gbmV3IFByb21pc2VCdWZmZXIgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBsaW1pdAogKiBAcGFyYW0gbGltaXQgbWF4IG51bWJlciBvZiBwcm9taXNlcyB0aGF0IGNhbiBiZSBzdG9yZWQgaW4gdGhlIGJ1ZmZlcgogKi8KZnVuY3Rpb24gbWFrZVByb21pc2VCdWZmZXIobGltaXQpIHsKICBjb25zdCBidWZmZXIgPSBbXTsKCiAgZnVuY3Rpb24gaXNSZWFkeSgpIHsKICAgIHJldHVybiBsaW1pdCA9PT0gdW5kZWZpbmVkIHx8IGJ1ZmZlci5sZW5ndGggPCBsaW1pdDsKICB9CgogIC8qKgogICAqIFJlbW92ZSBhIHByb21pc2UgZnJvbSB0aGUgcXVldWUuCiAgICoKICAgKiBAcGFyYW0gdGFzayBDYW4gYmUgYW55IFByb21pc2VMaWtlPFQ+CiAgICogQHJldHVybnMgUmVtb3ZlZCBwcm9taXNlLgogICAqLwogIGZ1bmN0aW9uIHJlbW92ZSh0YXNrKSB7CiAgICByZXR1cm4gYnVmZmVyLnNwbGljZShidWZmZXIuaW5kZXhPZih0YXNrKSwgMSlbMF07CiAgfQoKICAvKioKICAgKiBBZGQgYSBwcm9taXNlIChyZXByZXNlbnRpbmcgYW4gaW4tZmxpZ2h0IGFjdGlvbikgdG8gdGhlIHF1ZXVlLCBhbmQgc2V0IGl0IHRvIHJlbW92ZSBpdHNlbGYgb24gZnVsZmlsbG1lbnQuCiAgICoKICAgKiBAcGFyYW0gdGFza1Byb2R1Y2VyIEEgZnVuY3Rpb24gcHJvZHVjaW5nIGFueSBQcm9taXNlTGlrZTxUPjsgSW4gcHJldmlvdXMgdmVyc2lvbnMgdGhpcyB1c2VkIHRvIGJlIGB0YXNrOgogICAqICAgICAgICBQcm9taXNlTGlrZTxUPmAsIGJ1dCB1bmRlciB0aGF0IG1vZGVsLCBQcm9taXNlcyB3ZXJlIGluc3RhbnRseSBjcmVhdGVkIG9uIHRoZSBjYWxsLXNpdGUgYW5kIHRoZWlyIGV4ZWN1dG9yCiAgICogICAgICAgIGZ1bmN0aW9ucyB0aGVyZWZvcmUgcmFuIGltbWVkaWF0ZWx5LiBUaHVzLCBldmVuIGlmIHRoZSBidWZmZXIgd2FzIGZ1bGwsIHRoZSBhY3Rpb24gc3RpbGwgaGFwcGVuZWQuIEJ5CiAgICogICAgICAgIHJlcXVpcmluZyB0aGUgcHJvbWlzZSB0byBiZSB3cmFwcGVkIGluIGEgZnVuY3Rpb24sIHdlIGNhbiBkZWZlciBwcm9taXNlIGNyZWF0aW9uIHVudGlsIGFmdGVyIHRoZSBidWZmZXIKICAgKiAgICAgICAgbGltaXQgY2hlY2suCiAgICogQHJldHVybnMgVGhlIG9yaWdpbmFsIHByb21pc2UuCiAgICovCiAgZnVuY3Rpb24gYWRkKHRhc2tQcm9kdWNlcikgewogICAgaWYgKCFpc1JlYWR5KCkpIHsKICAgICAgcmV0dXJuIHJlamVjdGVkU3luY1Byb21pc2UobmV3IFNlbnRyeUVycm9yKCdOb3QgYWRkaW5nIFByb21pc2UgYmVjYXVzZSBidWZmZXIgbGltaXQgd2FzIHJlYWNoZWQuJykpOwogICAgfQoKICAgIC8vIHN0YXJ0IHRoZSB0YXNrIGFuZCBhZGQgaXRzIHByb21pc2UgdG8gdGhlIHF1ZXVlCiAgICBjb25zdCB0YXNrID0gdGFza1Byb2R1Y2VyKCk7CiAgICBpZiAoYnVmZmVyLmluZGV4T2YodGFzaykgPT09IC0xKSB7CiAgICAgIGJ1ZmZlci5wdXNoKHRhc2spOwogICAgfQogICAgdm9pZCB0YXNrCiAgICAgIC50aGVuKCgpID0+IHJlbW92ZSh0YXNrKSkKICAgICAgLy8gVXNlIGB0aGVuKG51bGwsIHJlamVjdGlvbkhhbmRsZXIpYCByYXRoZXIgdGhhbiBgY2F0Y2gocmVqZWN0aW9uSGFuZGxlcilgIHNvIHRoYXQgd2UgY2FuIHVzZSBgUHJvbWlzZUxpa2VgCiAgICAgIC8vIHJhdGhlciB0aGFuIGBQcm9taXNlYC4gYFByb21pc2VMaWtlYCBkb2Vzbid0IGhhdmUgYSBgLmNhdGNoYCBtZXRob2QsIG1ha2luZyBpdHMgcG9seWZpbGwgc21hbGxlci4gKEVTNSBkaWRuJ3QKICAgICAgLy8gaGF2ZSBwcm9taXNlcywgc28gVFMgaGFzIHRvIHBvbHlmaWxsIHdoZW4gZG93bi1jb21waWxpbmcuKQogICAgICAudGhlbihudWxsLCAoKSA9PgogICAgICAgIHJlbW92ZSh0YXNrKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgICAgIC8vIFdlIGhhdmUgdG8gYWRkIGFub3RoZXIgY2F0Y2ggaGVyZSBiZWNhdXNlIGByZW1vdmUoKWAgc3RhcnRzIGEgbmV3IHByb21pc2UgY2hhaW4uCiAgICAgICAgfSksCiAgICAgICk7CiAgICByZXR1cm4gdGFzazsKICB9CgogIC8qKgogICAqIFdhaXQgZm9yIGFsbCBwcm9taXNlcyBpbiB0aGUgcXVldWUgdG8gcmVzb2x2ZSBvciBmb3IgdGltZW91dCB0byBleHBpcmUsIHdoaWNoZXZlciBjb21lcyBmaXJzdC4KICAgKgogICAqIEBwYXJhbSB0aW1lb3V0IFRoZSB0aW1lLCBpbiBtcywgYWZ0ZXIgd2hpY2ggdG8gcmVzb2x2ZSB0byBgZmFsc2VgIGlmIHRoZSBxdWV1ZSBpcyBzdGlsbCBub24tZW1wdHkuIFBhc3NpbmcgYDBgIChvcgogICAqIG5vdCBwYXNzaW5nIGFueXRoaW5nKSB3aWxsIG1ha2UgdGhlIHByb21pc2Ugd2FpdCBhcyBsb25nIGFzIGl0IHRha2VzIGZvciB0aGUgcXVldWUgdG8gZHJhaW4gYmVmb3JlIHJlc29sdmluZyB0bwogICAqIGB0cnVlYC4KICAgKiBAcmV0dXJucyBBIHByb21pc2Ugd2hpY2ggd2lsbCByZXNvbHZlIHRvIGB0cnVlYCBpZiB0aGUgcXVldWUgaXMgYWxyZWFkeSBlbXB0eSBvciBkcmFpbnMgYmVmb3JlIHRoZSB0aW1lb3V0LCBhbmQKICAgKiBgZmFsc2VgIG90aGVyd2lzZQogICAqLwogIGZ1bmN0aW9uIGRyYWluKHRpbWVvdXQpIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgY291bnRlciA9IGJ1ZmZlci5sZW5ndGg7CgogICAgICBpZiAoIWNvdW50ZXIpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTsKICAgICAgfQoKICAgICAgLy8gd2FpdCBmb3IgYHRpbWVvdXRgIG1zIGFuZCB0aGVuIHJlc29sdmUgdG8gYGZhbHNlYCAoaWYgbm90IGNhbmNlbGxlZCBmaXJzdCkKICAgICAgY29uc3QgY2FwdHVyZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHRpbWVvdXQgJiYgdGltZW91dCA+IDApIHsKICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwgdGltZW91dCk7CgogICAgICAvLyBpZiBhbGwgcHJvbWlzZXMgcmVzb2x2ZSBpbiB0aW1lLCBjYW5jZWwgdGhlIHRpbWVyIGFuZCByZXNvbHZlIHRvIGB0cnVlYAogICAgICBidWZmZXIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB2b2lkIHJlc29sdmVkU3luY1Byb21pc2UoaXRlbSkudGhlbigoKSA9PiB7CiAgICAgICAgICBpZiAoIS0tY291bnRlcikgewogICAgICAgICAgICBjbGVhclRpbWVvdXQoY2FwdHVyZWRTZXRUaW1lb3V0KTsKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9LCByZWplY3QpOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIHsKICAgICQ6IGJ1ZmZlciwKICAgIGFkZCwKICAgIGRyYWluLAogIH07Cn0KCmNvbnN0IE9ORV9TRUNPTkRfSU5fTVMgPSAxMDAwOwoKLyoqCiAqIEEgcGFydGlhbCBkZWZpbml0aW9uIG9mIHRoZSBbUGVyZm9ybWFuY2UgV2ViIEFQSV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BlcmZvcm1hbmNlfQogKiBmb3IgYWNjZXNzaW5nIGEgaGlnaC1yZXNvbHV0aW9uIG1vbm90b25pYyBjbG9jay4KICovCgovKioKICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIHRoZSBEYXRlIEFQSS4KICoKICogVE9ETyh2OCk6IFJldHVybiB0eXBlIHNob3VsZCBiZSByb3VuZGVkLgogKi8KZnVuY3Rpb24gZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpIHsKICByZXR1cm4gRGF0ZS5ub3coKSAvIE9ORV9TRUNPTkRfSU5fTVM7Cn0KCi8qKgogKiBSZXR1cm5zIGEgd3JhcHBlciBhcm91bmQgdGhlIG5hdGl2ZSBQZXJmb3JtYW5jZSBBUEkgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiwgb3IgdW5kZWZpbmVkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdAogKiBzdXBwb3J0IHRoZSBBUEkuCiAqCiAqIFdyYXBwaW5nIHRoZSBuYXRpdmUgQVBJIHdvcmtzIGFyb3VuZCBkaWZmZXJlbmNlcyBpbiBiZWhhdmlvciBmcm9tIGRpZmZlcmVudCBicm93c2Vycy4KICovCmZ1bmN0aW9uIGNyZWF0ZVVuaXhUaW1lc3RhbXBJblNlY29uZHNGdW5jKCkgewogIGNvbnN0IHsgcGVyZm9ybWFuY2UgfSA9IEdMT0JBTF9PQkogOwogIGlmICghcGVyZm9ybWFuY2UgfHwgIXBlcmZvcm1hbmNlLm5vdykgewogICAgcmV0dXJuIGRhdGVUaW1lc3RhbXBJblNlY29uZHM7CiAgfQoKICAvLyBTb21lIGJyb3dzZXIgYW5kIGVudmlyb25tZW50cyBkb24ndCBoYXZlIGEgdGltZU9yaWdpbiwgc28gd2UgZmFsbGJhY2sgdG8KICAvLyB1c2luZyBEYXRlLm5vdygpIHRvIGNvbXB1dGUgdGhlIHN0YXJ0aW5nIHRpbWUuCiAgY29uc3QgYXBwcm94U3RhcnRpbmdUaW1lT3JpZ2luID0gRGF0ZS5ub3coKSAtIHBlcmZvcm1hbmNlLm5vdygpOwogIGNvbnN0IHRpbWVPcmlnaW4gPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luID09IHVuZGVmaW5lZCA/IGFwcHJveFN0YXJ0aW5nVGltZU9yaWdpbiA6IHBlcmZvcm1hbmNlLnRpbWVPcmlnaW47CgogIC8vIHBlcmZvcm1hbmNlLm5vdygpIGlzIGEgbW9ub3RvbmljIGNsb2NrLCB3aGljaCBtZWFucyBpdCBzdGFydHMgYXQgMCB3aGVuIHRoZSBwcm9jZXNzIGJlZ2lucy4gVG8gZ2V0IHRoZSBjdXJyZW50CiAgLy8gd2FsbCBjbG9jayB0aW1lIChhY3R1YWwgVU5JWCB0aW1lc3RhbXApLCB3ZSBuZWVkIHRvIGFkZCB0aGUgc3RhcnRpbmcgdGltZSBvcmlnaW4gYW5kIHRoZSBjdXJyZW50IHRpbWUgZWxhcHNlZC4KICAvLwogIC8vIFRPRE86IFRoaXMgZG9lcyBub3QgYWNjb3VudCBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlIG1vbm90b25pYyBjbG9jayB0aGF0IHBvd2VycyBwZXJmb3JtYW5jZS5ub3coKSBkcmlmdHMgZnJvbSB0aGUKICAvLyB3YWxsIGNsb2NrIHRpbWUsIHdoaWNoIGNhdXNlcyB0aGUgcmV0dXJuZWQgdGltZXN0YW1wIHRvIGJlIGluYWNjdXJhdGUuIFdlIHNob3VsZCBpbnZlc3RpZ2F0ZSBob3cgdG8gZGV0ZWN0IGFuZAogIC8vIGNvcnJlY3QgZm9yIHRoaXMuCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbWRuL2NvbnRlbnQvaXNzdWVzLzQ3MTMKICAvLyBTZWU6IGh0dHBzOi8vZGV2LnRvL25vYW1yL3doZW4tYS1taWxsaXNlY29uZC1pcy1ub3QtYS1taWxsaXNlY29uZC0zaDYKICByZXR1cm4gKCkgPT4gewogICAgcmV0dXJuICh0aW1lT3JpZ2luICsgcGVyZm9ybWFuY2Uubm93KCkpIC8gT05FX1NFQ09ORF9JTl9NUzsKICB9Owp9CgovKioKICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIGVpdGhlciB0aGUgUGVyZm9ybWFuY2Ugb3IgRGF0ZSBBUElzLCBkZXBlbmRpbmcgb24gdGhlCiAqIGF2YWlsYWJpbGl0eSBvZiB0aGUgUGVyZm9ybWFuY2UgQVBJLgogKgogKiBCVUc6IE5vdGUgdGhhdCBiZWNhdXNlIG9mIGhvdyBicm93c2VycyBpbXBsZW1lbnQgdGhlIFBlcmZvcm1hbmNlIEFQSSwgdGhlIGNsb2NrIG1pZ2h0IHN0b3Agd2hlbiB0aGUgY29tcHV0ZXIgaXMKICogYXNsZWVwLiBUaGlzIGNyZWF0ZXMgYSBza2V3IGJldHdlZW4gYGRhdGVUaW1lc3RhbXBJblNlY29uZHNgIGFuZCBgdGltZXN0YW1wSW5TZWNvbmRzYC4gVGhlCiAqIHNrZXcgY2FuIGdyb3cgdG8gYXJiaXRyYXJ5IGFtb3VudHMgbGlrZSBkYXlzLCB3ZWVrcyBvciBtb250aHMuCiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwLgogKi8KY29uc3QgdGltZXN0YW1wSW5TZWNvbmRzID0gY3JlYXRlVW5peFRpbWVzdGFtcEluU2Vjb25kc0Z1bmMoKTsKCi8qKgogKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaC4gVGhpcyB2YWx1ZSBpcyBvbmx5IHVzYWJsZSBpbiBhIGJyb3dzZXIsIGFuZCBvbmx5IHdoZW4gdGhlCiAqIHBlcmZvcm1hbmNlIEFQSSBpcyBhdmFpbGFibGUuCiAqLwooKCkgPT4gewogIC8vIFVuZm9ydHVuYXRlbHkgYnJvd3NlcnMgbWF5IHJlcG9ydCBhbiBpbmFjY3VyYXRlIHRpbWUgb3JpZ2luIGRhdGEsIHRocm91Z2ggZWl0aGVyIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gb3IKICAvLyBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0LCB3aGljaCByZXN1bHRzIGluIHBvb3IgcmVzdWx0cyBpbiBwZXJmb3JtYW5jZSBkYXRhLiBXZSBvbmx5IHRyZWF0IHRpbWUgb3JpZ2luCiAgLy8gZGF0YSBhcyByZWxpYWJsZSBpZiB0aGV5IGFyZSB3aXRoaW4gYSByZWFzb25hYmxlIHRocmVzaG9sZCBvZiB0aGUgY3VycmVudCB0aW1lLgoKICBjb25zdCB7IHBlcmZvcm1hbmNlIH0gPSBHTE9CQUxfT0JKIDsKICBpZiAoIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICBjb25zdCB0aHJlc2hvbGQgPSAzNjAwICogMTAwMDsKICBjb25zdCBwZXJmb3JtYW5jZU5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogIGNvbnN0IGRhdGVOb3cgPSBEYXRlLm5vdygpOwoKICAvLyBpZiB0aW1lT3JpZ2luIGlzbid0IGF2YWlsYWJsZSBzZXQgZGVsdGEgdG8gdGhyZXNob2xkIHNvIGl0IGlzbid0IHVzZWQKICBjb25zdCB0aW1lT3JpZ2luRGVsdGEgPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luCiAgICA/IE1hdGguYWJzKHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZU5vdyAtIGRhdGVOb3cpCiAgICA6IHRocmVzaG9sZDsKICBjb25zdCB0aW1lT3JpZ2luSXNSZWxpYWJsZSA9IHRpbWVPcmlnaW5EZWx0YSA8IHRocmVzaG9sZDsKCiAgLy8gV2hpbGUgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4sIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4KICAvLyBpcyBub3QgYXMgd2lkZWx5IHN1cHBvcnRlZC4gTmFtZWx5LCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIGlzIHVuZGVmaW5lZCBpbiBTYWZhcmkgYXMgb2Ygd3JpdGluZy4KICAvLyBBbHNvIGFzIG9mIHdyaXRpbmcsIHBlcmZvcm1hbmNlLnRpbWluZyBpcyBub3QgYXZhaWxhYmxlIGluIFdlYiBXb3JrZXJzIGluIG1haW5zdHJlYW0gYnJvd3NlcnMsIHNvIGl0IGlzIG5vdCBhbHdheXMKICAvLyBhIHZhbGlkIGZhbGxiYWNrLiBJbiB0aGUgYWJzZW5jZSBvZiBhbiBpbml0aWFsIHRpbWUgcHJvdmlkZWQgYnkgdGhlIGJyb3dzZXIsIGZhbGxiYWNrIHRvIHRoZSBjdXJyZW50IHRpbWUgZnJvbSB0aGUKICAvLyBEYXRlIEFQSS4KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICBjb25zdCBuYXZpZ2F0aW9uU3RhcnQgPSBwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICBjb25zdCBoYXNOYXZpZ2F0aW9uU3RhcnQgPSB0eXBlb2YgbmF2aWdhdGlvblN0YXJ0ID09PSAnbnVtYmVyJzsKICAvLyBpZiBuYXZpZ2F0aW9uU3RhcnQgaXNuJ3QgYXZhaWxhYmxlIHNldCBkZWx0YSB0byB0aHJlc2hvbGQgc28gaXQgaXNuJ3QgdXNlZAogIGNvbnN0IG5hdmlnYXRpb25TdGFydERlbHRhID0gaGFzTmF2aWdhdGlvblN0YXJ0ID8gTWF0aC5hYnMobmF2aWdhdGlvblN0YXJ0ICsgcGVyZm9ybWFuY2VOb3cgLSBkYXRlTm93KSA6IHRocmVzaG9sZDsKICBjb25zdCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlID0gbmF2aWdhdGlvblN0YXJ0RGVsdGEgPCB0aHJlc2hvbGQ7CgogIGlmICh0aW1lT3JpZ2luSXNSZWxpYWJsZSB8fCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlKSB7CiAgICAvLyBVc2UgdGhlIG1vcmUgcmVsaWFibGUgdGltZSBvcmlnaW4KICAgIGlmICh0aW1lT3JpZ2luRGVsdGEgPD0gbmF2aWdhdGlvblN0YXJ0RGVsdGEpIHsKICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW47CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmF2aWdhdGlvblN0YXJ0OwogICAgfQogIH0KICByZXR1cm4gZGF0ZU5vdzsKfSkoKTsKCi8qKgogKiBDcmVhdGVzIGFuIGVudmVsb3BlLgogKiBNYWtlIHN1cmUgdG8gYWx3YXlzIGV4cGxpY2l0bHkgcHJvdmlkZSB0aGUgZ2VuZXJpYyB0byB0aGlzIGZ1bmN0aW9uCiAqIHNvIHRoYXQgdGhlIGVudmVsb3BlIHR5cGVzIHJlc29sdmUgY29ycmVjdGx5LgogKi8KZnVuY3Rpb24gY3JlYXRlRW52ZWxvcGUoaGVhZGVycywgaXRlbXMgPSBbXSkgewogIHJldHVybiBbaGVhZGVycywgaXRlbXNdIDsKfQoKLyoqCiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGxvb3AgdGhyb3VnaCB0aGUgaXRlbXMgYW5kIGl0ZW0gdHlwZXMgb2YgYW4gZW52ZWxvcGUuCiAqIChUaGlzIGZ1bmN0aW9uIHdhcyBtb3N0bHkgY3JlYXRlZCBiZWNhdXNlIHdvcmtpbmcgd2l0aCBlbnZlbG9wZSB0eXBlcyBpcyBwYWluZnVsIGF0IHRoZSBtb21lbnQpCiAqCiAqIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWUsIHRoZSByZXN0IG9mIHRoZSBpdGVtcyB3aWxsIGJlIHNraXBwZWQuCiAqLwpmdW5jdGlvbiBmb3JFYWNoRW52ZWxvcGVJdGVtKAogIGVudmVsb3BlLAogIGNhbGxiYWNrLAopIHsKICBjb25zdCBlbnZlbG9wZUl0ZW1zID0gZW52ZWxvcGVbMV07CgogIGZvciAoY29uc3QgZW52ZWxvcGVJdGVtIG9mIGVudmVsb3BlSXRlbXMpIHsKICAgIGNvbnN0IGVudmVsb3BlSXRlbVR5cGUgPSBlbnZlbG9wZUl0ZW1bMF0udHlwZTsKICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKGVudmVsb3BlSXRlbSwgZW52ZWxvcGVJdGVtVHlwZSk7CgogICAgaWYgKHJlc3VsdCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfQoKLyoqCiAqIEVuY29kZSBhIHN0cmluZyB0byBVVEY4LgogKi8KZnVuY3Rpb24gZW5jb2RlVVRGOChpbnB1dCwgdGV4dEVuY29kZXIpIHsKICBjb25zdCB1dGY4ID0gdGV4dEVuY29kZXIgfHwgbmV3IFRleHRFbmNvZGVyKCk7CiAgcmV0dXJuIHV0ZjguZW5jb2RlKGlucHV0KTsKfQoKLyoqCiAqIFNlcmlhbGl6ZXMgYW4gZW52ZWxvcGUuCiAqLwpmdW5jdGlvbiBzZXJpYWxpemVFbnZlbG9wZShlbnZlbG9wZSwgdGV4dEVuY29kZXIpIHsKICBjb25zdCBbZW52SGVhZGVycywgaXRlbXNdID0gZW52ZWxvcGU7CgogIC8vIEluaXRpYWxseSB3ZSBjb25zdHJ1Y3Qgb3VyIGVudmVsb3BlIGFzIGEgc3RyaW5nIGFuZCBvbmx5IGNvbnZlcnQgdG8gYmluYXJ5IGNodW5rcyBpZiB3ZSBlbmNvdW50ZXIgYmluYXJ5IGRhdGEKICBsZXQgcGFydHMgPSBKU09OLnN0cmluZ2lmeShlbnZIZWFkZXJzKTsKCiAgZnVuY3Rpb24gYXBwZW5kKG5leHQpIHsKICAgIGlmICh0eXBlb2YgcGFydHMgPT09ICdzdHJpbmcnKSB7CiAgICAgIHBhcnRzID0gdHlwZW9mIG5leHQgPT09ICdzdHJpbmcnID8gcGFydHMgKyBuZXh0IDogW2VuY29kZVVURjgocGFydHMsIHRleHRFbmNvZGVyKSwgbmV4dF07CiAgICB9IGVsc2UgewogICAgICBwYXJ0cy5wdXNoKHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJyA/IGVuY29kZVVURjgobmV4dCwgdGV4dEVuY29kZXIpIDogbmV4dCk7CiAgICB9CiAgfQoKICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHsKICAgIGNvbnN0IFtpdGVtSGVhZGVycywgcGF5bG9hZF0gPSBpdGVtOwoKICAgIGFwcGVuZChgXG4ke0pTT04uc3RyaW5naWZ5KGl0ZW1IZWFkZXJzKX1cbmApOwoKICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycgfHwgcGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHsKICAgICAgYXBwZW5kKHBheWxvYWQpOwogICAgfSBlbHNlIHsKICAgICAgbGV0IHN0cmluZ2lmaWVkUGF5bG9hZDsKICAgICAgdHJ5IHsKICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIEluIGNhc2UsIGRlc3BpdGUgYWxsIG91ciBlZmZvcnRzIHRvIGtlZXAgYHBheWxvYWRgIGNpcmN1bGFyLWRlcGVuZGVuY3ktZnJlZSwgYEpTT04uc3RyaW5pZnkoKWAgc3RpbGwKICAgICAgICAvLyBmYWlscywgd2UgdHJ5IGFnYWluIGFmdGVyIG5vcm1hbGl6aW5nIGl0IGFnYWluIHdpdGggaW5maW5pdGUgbm9ybWFsaXphdGlvbiBkZXB0aC4gVGhpcyBvZiBjb3Vyc2UgaGFzIGEKICAgICAgICAvLyBwZXJmb3JtYW5jZSBpbXBhY3QgYnV0IGluIHRoaXMgY2FzZSBhIHBlcmZvcm1hbmNlIGhpdCBpcyBiZXR0ZXIgdGhhbiB0aHJvd2luZy4KICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShub3JtYWxpemUocGF5bG9hZCkpOwogICAgICB9CiAgICAgIGFwcGVuZChzdHJpbmdpZmllZFBheWxvYWQpOwogICAgfQogIH0KCiAgcmV0dXJuIHR5cGVvZiBwYXJ0cyA9PT0gJ3N0cmluZycgPyBwYXJ0cyA6IGNvbmNhdEJ1ZmZlcnMocGFydHMpOwp9CgpmdW5jdGlvbiBjb25jYXRCdWZmZXJzKGJ1ZmZlcnMpIHsKICBjb25zdCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmxlbmd0aCwgMCk7CgogIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsKICBsZXQgb2Zmc2V0ID0gMDsKICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7CiAgICBtZXJnZWQuc2V0KGJ1ZmZlciwgb2Zmc2V0KTsKICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoOwogIH0KCiAgcmV0dXJuIG1lcmdlZDsKfQoKY29uc3QgSVRFTV9UWVBFX1RPX0RBVEFfQ0FURUdPUllfTUFQID0gewogIHNlc3Npb246ICdzZXNzaW9uJywKICBzZXNzaW9uczogJ3Nlc3Npb24nLAogIGF0dGFjaG1lbnQ6ICdhdHRhY2htZW50JywKICB0cmFuc2FjdGlvbjogJ3RyYW5zYWN0aW9uJywKICBldmVudDogJ2Vycm9yJywKICBjbGllbnRfcmVwb3J0OiAnaW50ZXJuYWwnLAogIHVzZXJfcmVwb3J0OiAnZGVmYXVsdCcsCiAgcHJvZmlsZTogJ3Byb2ZpbGUnLAogIHJlcGxheV9ldmVudDogJ3JlcGxheScsCiAgcmVwbGF5X3JlY29yZGluZzogJ3JlcGxheScsCiAgY2hlY2tfaW46ICdtb25pdG9yJywKICBmZWVkYmFjazogJ2ZlZWRiYWNrJywKICBzcGFuOiAnc3BhbicsCiAgc3RhdHNkOiAnbWV0cmljX2J1Y2tldCcsCn07CgovKioKICogTWFwcyB0aGUgdHlwZSBvZiBhbiBlbnZlbG9wZSBpdGVtIHRvIGEgZGF0YSBjYXRlZ29yeS4KICovCmZ1bmN0aW9uIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSB7CiAgcmV0dXJuIElURU1fVFlQRV9UT19EQVRBX0NBVEVHT1JZX01BUFt0eXBlXTsKfQoKLyoqIEV4dHJhY3RzIHRoZSBtaW5pbWFsIFNESyBpbmZvIGZyb20gdGhlIG1ldGFkYXRhIG9yIGFuIGV2ZW50cyAqLwpmdW5jdGlvbiBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKG1ldGFkYXRhT3JFdmVudCkgewogIGlmICghbWV0YWRhdGFPckV2ZW50IHx8ICFtZXRhZGF0YU9yRXZlbnQuc2RrKSB7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IHsgbmFtZSwgdmVyc2lvbiB9ID0gbWV0YWRhdGFPckV2ZW50LnNkazsKICByZXR1cm4geyBuYW1lLCB2ZXJzaW9uIH07Cn0KCi8qKgogKiBDcmVhdGVzIGV2ZW50IGVudmVsb3BlIGhlYWRlcnMsIGJhc2VkIG9uIGV2ZW50LCBzZGsgaW5mbyBhbmQgdHVubmVsCiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gd2FzIGV4dHJhY3RlZCBmcm9tIHRoZSBjb3JlIHBhY2thZ2UgdG8gbWFrZSBpdCBhdmFpbGFibGUgaW4gUmVwbGF5CiAqLwpmdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycygKICBldmVudCwKICBzZGtJbmZvLAogIHR1bm5lbCwKICBkc24sCikgewogIGNvbnN0IGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgPSBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEgJiYgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQ7CiAgcmV0dXJuIHsKICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCAsCiAgICBzZW50X2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAuLi4oc2RrSW5mbyAmJiB7IHNkazogc2RrSW5mbyB9KSwKICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYgeyBkc246IGRzblRvU3RyaW5nKGRzbikgfSksCiAgICAuLi4oZHluYW1pY1NhbXBsaW5nQ29udGV4dCAmJiB7CiAgICAgIHRyYWNlOiBkcm9wVW5kZWZpbmVkS2V5cyh7IC4uLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQgfSksCiAgICB9KSwKICB9Owp9CgovLyBJbnRlbnRpb25hbGx5IGtlZXBpbmcgdGhlIGtleSBicm9hZCwgYXMgd2UgZG9uJ3Qga25vdyBmb3Igc3VyZSB3aGF0IHJhdGUgbGltaXQgaGVhZGVycyBnZXQgcmV0dXJuZWQgZnJvbSBiYWNrZW5kCgpjb25zdCBERUZBVUxUX1JFVFJZX0FGVEVSID0gNjAgKiAxMDAwOyAvLyA2MCBzZWNvbmRzCgovKioKICogRXh0cmFjdHMgUmV0cnktQWZ0ZXIgdmFsdWUgZnJvbSB0aGUgcmVxdWVzdCBoZWFkZXIgb3IgcmV0dXJucyBkZWZhdWx0IHZhbHVlCiAqIEBwYXJhbSBoZWFkZXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mICdSZXRyeS1BZnRlcicgaGVhZGVyCiAqIEBwYXJhbSBub3cgY3VycmVudCB1bml4IHRpbWVzdGFtcAogKgogKi8KZnVuY3Rpb24gcGFyc2VSZXRyeUFmdGVySGVhZGVyKGhlYWRlciwgbm93ID0gRGF0ZS5ub3coKSkgewogIGNvbnN0IGhlYWRlckRlbGF5ID0gcGFyc2VJbnQoYCR7aGVhZGVyfWAsIDEwKTsKICBpZiAoIWlzTmFOKGhlYWRlckRlbGF5KSkgewogICAgcmV0dXJuIGhlYWRlckRlbGF5ICogMTAwMDsKICB9CgogIGNvbnN0IGhlYWRlckRhdGUgPSBEYXRlLnBhcnNlKGAke2hlYWRlcn1gKTsKICBpZiAoIWlzTmFOKGhlYWRlckRhdGUpKSB7CiAgICByZXR1cm4gaGVhZGVyRGF0ZSAtIG5vdzsKICB9CgogIHJldHVybiBERUZBVUxUX1JFVFJZX0FGVEVSOwp9CgovKioKICogR2V0cyB0aGUgdGltZSB0aGF0IHRoZSBnaXZlbiBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBmb3IgcmF0ZSBsaW1pdGluZy4KICogSW4gY2FzZSBubyBjYXRlZ29yeS1zcGVjaWZpYyBsaW1pdCBpcyBzZXQgYnV0IGEgZ2VuZXJhbCByYXRlIGxpbWl0IGFjcm9zcyBhbGwgY2F0ZWdvcmllcyBpcyBhY3RpdmUsCiAqIHRoYXQgdGltZSBpcyByZXR1cm5lZC4KICoKICogQHJldHVybiB0aGUgdGltZSBpbiBtcyB0aGF0IHRoZSBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBvciAwIGlmIHRoZXJlJ3Mgbm8gYWN0aXZlIHJhdGUgbGltaXQuCiAqLwpmdW5jdGlvbiBkaXNhYmxlZFVudGlsKGxpbWl0cywgZGF0YUNhdGVnb3J5KSB7CiAgcmV0dXJuIGxpbWl0c1tkYXRhQ2F0ZWdvcnldIHx8IGxpbWl0cy5hbGwgfHwgMDsKfQoKLyoqCiAqIENoZWNrcyBpZiBhIGNhdGVnb3J5IGlzIHJhdGUgbGltaXRlZAogKi8KZnVuY3Rpb24gaXNSYXRlTGltaXRlZChsaW1pdHMsIGRhdGFDYXRlZ29yeSwgbm93ID0gRGF0ZS5ub3coKSkgewogIHJldHVybiBkaXNhYmxlZFVudGlsKGxpbWl0cywgZGF0YUNhdGVnb3J5KSA+IG5vdzsKfQoKLyoqCiAqIFVwZGF0ZSByYXRlbGltaXRzIGZyb20gaW5jb21pbmcgaGVhZGVycy4KICoKICogQHJldHVybiB0aGUgdXBkYXRlZCBSYXRlTGltaXRzIG9iamVjdC4KICovCmZ1bmN0aW9uIHVwZGF0ZVJhdGVMaW1pdHMoCiAgbGltaXRzLAogIHsgc3RhdHVzQ29kZSwgaGVhZGVycyB9LAogIG5vdyA9IERhdGUubm93KCksCikgewogIGNvbnN0IHVwZGF0ZWRSYXRlTGltaXRzID0gewogICAgLi4ubGltaXRzLAogIH07CgogIC8vICJUaGUgbmFtZSBpcyBjYXNlLWluc2Vuc2l0aXZlLiIKICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSGVhZGVycy9nZXQKICBjb25zdCByYXRlTGltaXRIZWFkZXIgPSBoZWFkZXJzICYmIGhlYWRlcnNbJ3gtc2VudHJ5LXJhdGUtbGltaXRzJ107CiAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IGhlYWRlcnMgJiYgaGVhZGVyc1sncmV0cnktYWZ0ZXInXTsKCiAgaWYgKHJhdGVMaW1pdEhlYWRlcikgewogICAgLyoqCiAgICAgKiByYXRlIGxpbWl0IGhlYWRlcnMgYXJlIG9mIHRoZSBmb3JtCiAgICAgKiAgICAgPGhlYWRlcj4sPGhlYWRlcj4sLi4KICAgICAqIHdoZXJlIGVhY2ggPGhlYWRlcj4gaXMgb2YgdGhlIGZvcm0KICAgICAqICAgICA8cmV0cnlfYWZ0ZXI+OiA8Y2F0ZWdvcmllcz46IDxzY29wZT46IDxyZWFzb25fY29kZT46IDxuYW1lc3BhY2VzPgogICAgICogd2hlcmUKICAgICAqICAgICA8cmV0cnlfYWZ0ZXI+IGlzIGEgZGVsYXkgaW4gc2Vjb25kcwogICAgICogICAgIDxjYXRlZ29yaWVzPiBpcyB0aGUgZXZlbnQgdHlwZShzKSAoZXJyb3IsIHRyYW5zYWN0aW9uLCBldGMpIGJlaW5nIHJhdGUgbGltaXRlZCBhbmQgaXMgb2YgdGhlIGZvcm0KICAgICAqICAgICAgICAgPGNhdGVnb3J5Pjs8Y2F0ZWdvcnk+Oy4uLgogICAgICogICAgIDxzY29wZT4gaXMgd2hhdCdzIGJlaW5nIGxpbWl0ZWQgKG9yZywgcHJvamVjdCwgb3Iga2V5KSAtIGlnbm9yZWQgYnkgU0RLCiAgICAgKiAgICAgPHJlYXNvbl9jb2RlPiBpcyBhbiBhcmJpdHJhcnkgc3RyaW5nIGxpa2UgIm9yZ19xdW90YSIgLSBpZ25vcmVkIGJ5IFNESwogICAgICogICAgIDxuYW1lc3BhY2VzPiBTZW1pY29sb24tc2VwYXJhdGVkIGxpc3Qgb2YgbWV0cmljIG5hbWVzcGFjZSBpZGVudGlmaWVycy4gRGVmaW5lcyB3aGljaCBuYW1lc3BhY2Uocykgd2lsbCBiZSBhZmZlY3RlZC4KICAgICAqICAgICAgICAgT25seSBwcmVzZW50IGlmIHJhdGUgbGltaXQgYXBwbGllcyB0byB0aGUgbWV0cmljX2J1Y2tldCBkYXRhIGNhdGVnb3J5LgogICAgICovCiAgICBmb3IgKGNvbnN0IGxpbWl0IG9mIHJhdGVMaW1pdEhlYWRlci50cmltKCkuc3BsaXQoJywnKSkgewogICAgICBjb25zdCBbcmV0cnlBZnRlciwgY2F0ZWdvcmllcywgLCAsIG5hbWVzcGFjZXNdID0gbGltaXQuc3BsaXQoJzonLCA1KTsKICAgICAgY29uc3QgaGVhZGVyRGVsYXkgPSBwYXJzZUludChyZXRyeUFmdGVyLCAxMCk7CiAgICAgIGNvbnN0IGRlbGF5ID0gKCFpc05hTihoZWFkZXJEZWxheSkgPyBoZWFkZXJEZWxheSA6IDYwKSAqIDEwMDA7IC8vIDYwc2VjIGRlZmF1bHQKICAgICAgaWYgKCFjYXRlZ29yaWVzKSB7CiAgICAgICAgdXBkYXRlZFJhdGVMaW1pdHMuYWxsID0gbm93ICsgZGVsYXk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzLnNwbGl0KCc7JykpIHsKICAgICAgICAgIGlmIChjYXRlZ29yeSA9PT0gJ21ldHJpY19idWNrZXQnKSB7CiAgICAgICAgICAgIC8vIG5hbWVzcGFjZXMgd2lsbCBiZSBwcmVzZW50IHdoZW4gY2F0ZWdvcnkgPT09ICdtZXRyaWNfYnVja2V0JwogICAgICAgICAgICBpZiAoIW5hbWVzcGFjZXMgfHwgbmFtZXNwYWNlcy5zcGxpdCgnOycpLmluY2x1ZGVzKCdjdXN0b20nKSkgewogICAgICAgICAgICAgIHVwZGF0ZWRSYXRlTGltaXRzW2NhdGVnb3J5XSA9IG5vdyArIGRlbGF5OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cGRhdGVkUmF0ZUxpbWl0c1tjYXRlZ29yeV0gPSBub3cgKyBkZWxheTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IGVsc2UgaWYgKHJldHJ5QWZ0ZXJIZWFkZXIpIHsKICAgIHVwZGF0ZWRSYXRlTGltaXRzLmFsbCA9IG5vdyArIHBhcnNlUmV0cnlBZnRlckhlYWRlcihyZXRyeUFmdGVySGVhZGVyLCBub3cpOwogIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDI5KSB7CiAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyA2MCAqIDEwMDA7CiAgfQoKICByZXR1cm4gdXBkYXRlZFJhdGVMaW1pdHM7Cn0KCi8qKgogKiBBIG5vZGUuanMgd2F0Y2hkb2cgdGltZXIKICogQHBhcmFtIHBvbGxJbnRlcnZhbCBUaGUgaW50ZXJ2YWwgdGhhdCB3ZSBleHBlY3QgdG8gZ2V0IHBvbGxlZCBhdAogKiBAcGFyYW0gYW5yVGhyZXNob2xkIFRoZSB0aHJlc2hvbGQgZm9yIHdoZW4gd2UgY29uc2lkZXIgQU5SCiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbCBmb3IgQU5SCiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIGBwb2xsYCBhbmQgYGVuYWJsZWRgIGZ1bmN0aW9ucyB7QGxpbmsgV2F0Y2hkb2dSZXR1cm59CiAqLwpmdW5jdGlvbiB3YXRjaGRvZ1RpbWVyKAogIGNyZWF0ZVRpbWVyLAogIHBvbGxJbnRlcnZhbCwKICBhbnJUaHJlc2hvbGQsCiAgY2FsbGJhY2ssCikgewogIGNvbnN0IHRpbWVyID0gY3JlYXRlVGltZXIoKTsKICBsZXQgdHJpZ2dlcmVkID0gZmFsc2U7CiAgbGV0IGVuYWJsZWQgPSB0cnVlOwoKICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBjb25zdCBkaWZmTXMgPSB0aW1lci5nZXRUaW1lTXMoKTsKCiAgICBpZiAodHJpZ2dlcmVkID09PSBmYWxzZSAmJiBkaWZmTXMgPiBwb2xsSW50ZXJ2YWwgKyBhbnJUaHJlc2hvbGQpIHsKICAgICAgdHJpZ2dlcmVkID0gdHJ1ZTsKICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpZmZNcyA8IHBvbGxJbnRlcnZhbCArIGFuclRocmVzaG9sZCkgewogICAgICB0cmlnZ2VyZWQgPSBmYWxzZTsKICAgIH0KICB9LCAyMCk7CgogIHJldHVybiB7CiAgICBwb2xsOiAoKSA9PiB7CiAgICAgIHRpbWVyLnJlc2V0KCk7CiAgICB9LAogICAgZW5hYmxlZDogKHN0YXRlKSA9PiB7CiAgICAgIGVuYWJsZWQgPSBzdGF0ZTsKICAgIH0sCiAgfTsKfQoKLy8gdHlwZXMgY29waWVkIGZyb20gaW5zcGVjdG9yLmQudHMKCi8qKgogKiBDb252ZXJ0cyBEZWJ1Z2dlci5DYWxsRnJhbWUgdG8gU2VudHJ5IFN0YWNrRnJhbWUKICovCmZ1bmN0aW9uIGNhbGxGcmFtZVRvU3RhY2tGcmFtZSgKICBmcmFtZSwKICB1cmwsCiAgZ2V0TW9kdWxlRnJvbUZpbGVuYW1lLAopIHsKICBjb25zdCBmaWxlbmFtZSA9IHVybCA/IHVybC5yZXBsYWNlKC9eZmlsZTpcL1wvLywgJycpIDogdW5kZWZpbmVkOwoKICAvLyBDYWxsRnJhbWUgcm93L2NvbCBhcmUgMCBiYXNlZCwgd2hlcmVhcyBTdGFja0ZyYW1lIGFyZSAxIGJhc2VkCiAgY29uc3QgY29sbm8gPSBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgKyAxIDogdW5kZWZpbmVkOwogIGNvbnN0IGxpbmVubyA9IGZyYW1lLmxvY2F0aW9uLmxpbmVOdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5saW5lTnVtYmVyICsgMSA6IHVuZGVmaW5lZDsKCiAgcmV0dXJuIGRyb3BVbmRlZmluZWRLZXlzKHsKICAgIGZpbGVuYW1lLAogICAgbW9kdWxlOiBnZXRNb2R1bGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUpLAogICAgZnVuY3Rpb246IGZyYW1lLmZ1bmN0aW9uTmFtZSB8fCAnPycsCiAgICBjb2xubywKICAgIGxpbmVubywKICAgIGluX2FwcDogZmlsZW5hbWUgPyBmaWxlbmFtZUlzSW5BcHAoZmlsZW5hbWUpIDogdW5kZWZpbmVkLAogIH0pOwp9CgovKioKICogVGhpcyBzZXJ2ZXMgYXMgYSBidWlsZCB0aW1lIGZsYWcgdGhhdCB3aWxsIGJlIHRydWUgYnkgZGVmYXVsdCwgYnV0IGZhbHNlIGluIG5vbi1kZWJ1ZyBidWlsZHMgb3IgaWYgdXNlcnMgcmVwbGFjZSBgX19TRU5UUllfREVCVUdfX2AgaW4gdGhlaXIgZ2VuZXJhdGVkIGNvZGUuCiAqCiAqIEFUVEVOVElPTjogVGhpcyBjb25zdGFudCBtdXN0IG5ldmVyIGNyb3NzIHBhY2thZ2UgYm91bmRhcmllcyAoaS5lLiBiZSBleHBvcnRlZCkgdG8gZ3VhcmFudGVlIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRyZWUgc2hha2luZy4KICovCmNvbnN0IERFQlVHX0JVSUxEID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCmNvbnN0IERFRkFVTFRfRU5WSVJPTk1FTlQgPSAncHJvZHVjdGlvbic7CgovKioKICogUmV0dXJucyB0aGUgZ2xvYmFsIGV2ZW50IHByb2Nlc3NvcnMuCiAqIEBkZXByZWNhdGVkIEdsb2JhbCBldmVudCBwcm9jZXNzb3JzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICovCmZ1bmN0aW9uIGdldEdsb2JhbEV2ZW50UHJvY2Vzc29ycygpIHsKICByZXR1cm4gZ2V0R2xvYmFsU2luZ2xldG9uKCdnbG9iYWxFdmVudFByb2Nlc3NvcnMnLCAoKSA9PiBbXSk7Cn0KCi8qKgogKiBQcm9jZXNzIGFuIGFycmF5IG9mIGV2ZW50IHByb2Nlc3NvcnMsIHJldHVybmluZyB0aGUgcHJvY2Vzc2VkIGV2ZW50IChvciBgbnVsbGAgaWYgdGhlIGV2ZW50IHdhcyBkcm9wcGVkKS4KICovCmZ1bmN0aW9uIG5vdGlmeUV2ZW50UHJvY2Vzc29ycygKICBwcm9jZXNzb3JzLAogIGV2ZW50LAogIGhpbnQsCiAgaW5kZXggPSAwLAopIHsKICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IHByb2Nlc3NvciA9IHByb2Nlc3NvcnNbaW5kZXhdOwogICAgaWYgKGV2ZW50ID09PSBudWxsIHx8IHR5cGVvZiBwcm9jZXNzb3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgcmVzb2x2ZShldmVudCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCByZXN1bHQgPSBwcm9jZXNzb3IoeyAuLi5ldmVudCB9LCBoaW50KSA7CgogICAgICBERUJVR19CVUlMRCAmJiBwcm9jZXNzb3IuaWQgJiYgcmVzdWx0ID09PSBudWxsICYmIGxvZ2dlci5sb2coYEV2ZW50IHByb2Nlc3NvciAiJHtwcm9jZXNzb3IuaWR9IiBkcm9wcGVkIGV2ZW50YCk7CgogICAgICBpZiAoaXNUaGVuYWJsZShyZXN1bHQpKSB7CiAgICAgICAgdm9pZCByZXN1bHQKICAgICAgICAgIC50aGVuKGZpbmFsID0+IG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCBmaW5hbCwgaGludCwgaW5kZXggKyAxKS50aGVuKHJlc29sdmUpKQogICAgICAgICAgLnRoZW4obnVsbCwgcmVqZWN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2b2lkIG5vdGlmeUV2ZW50UHJvY2Vzc29ycyhwcm9jZXNzb3JzLCByZXN1bHQsIGhpbnQsIGluZGV4ICsgMSkKICAgICAgICAgIC50aGVuKHJlc29sdmUpCiAgICAgICAgICAudGhlbihudWxsLCByZWplY3QpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCi8qKgogKiBDcmVhdGVzIGEgbmV3IGBTZXNzaW9uYCBvYmplY3QgYnkgc2V0dGluZyBjZXJ0YWluIGRlZmF1bHQgcGFyYW1ldGVycy4gSWYgb3B0aW9uYWwgQHBhcmFtIGNvbnRleHQKICogaXMgcGFzc2VkLCB0aGUgcGFzc2VkIHByb3BlcnRpZXMgYXJlIGFwcGxpZWQgdG8gdGhlIHNlc3Npb24gb2JqZWN0LgogKgogKiBAcGFyYW0gY29udGV4dCAob3B0aW9uYWwpIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBiZSBhcHBsaWVkIHRvIHRoZSByZXR1cm5lZCBzZXNzaW9uIG9iamVjdAogKgogKiBAcmV0dXJucyBhIG5ldyBgU2Vzc2lvbmAgb2JqZWN0CiAqLwpmdW5jdGlvbiBtYWtlU2Vzc2lvbihjb250ZXh0KSB7CiAgLy8gQm90aCB0aW1lc3RhbXAgYW5kIHN0YXJ0ZWQgYXJlIGluIHNlY29uZHMgc2luY2UgdGhlIFVOSVggZXBvY2guCiAgY29uc3Qgc3RhcnRpbmdUaW1lID0gdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGNvbnN0IHNlc3Npb24gPSB7CiAgICBzaWQ6IHV1aWQ0KCksCiAgICBpbml0OiB0cnVlLAogICAgdGltZXN0YW1wOiBzdGFydGluZ1RpbWUsCiAgICBzdGFydGVkOiBzdGFydGluZ1RpbWUsCiAgICBkdXJhdGlvbjogMCwKICAgIHN0YXR1czogJ29rJywKICAgIGVycm9yczogMCwKICAgIGlnbm9yZUR1cmF0aW9uOiBmYWxzZSwKICAgIHRvSlNPTjogKCkgPT4gc2Vzc2lvblRvSlNPTihzZXNzaW9uKSwKICB9OwoKICBpZiAoY29udGV4dCkgewogICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0KTsKICB9CgogIHJldHVybiBzZXNzaW9uOwp9CgovKioKICogVXBkYXRlcyBhIHNlc3Npb24gb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgcGFzc2VkIGluIHRoZSBjb250ZXh0LgogKgogKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBtdXRhdGVzIHRoZSBwYXNzZWQgb2JqZWN0IGFuZCByZXR1cm5zIHZvaWQuCiAqIChIYWQgdG8gZG8gdGhpcyBpbnN0ZWFkIG9mIHJldHVybmluZyBhIG5ldyBhbmQgdXBkYXRlZCBzZXNzaW9uIGJlY2F1c2UgY2xvc2luZyBhbmQgc2VuZGluZyBhIHNlc3Npb24KICogbWFrZXMgYW4gdXBkYXRlIHRvIHRoZSBzZXNzaW9uIGFmdGVyIGl0IHdhcyBwYXNzZWQgdG8gdGhlIHNlbmRpbmcgbG9naWMuCiAqIEBzZWUgQmFzZUNsaWVudC5jYXB0dXJlU2Vzc2lvbiApCiAqCiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBgU2Vzc2lvbmAgdG8gdXBkYXRlCiAqIEBwYXJhbSBjb250ZXh0IHRoZSBgU2Vzc2lvbkNvbnRleHRgIGhvbGRpbmcgdGhlIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgdXBkYXRlZCBpbiBAcGFyYW0gc2Vzc2lvbgogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHkKZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0ID0ge30pIHsKICBpZiAoY29udGV4dC51c2VyKSB7CiAgICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQudXNlci5pcF9hZGRyZXNzKSB7CiAgICAgIHNlc3Npb24uaXBBZGRyZXNzID0gY29udGV4dC51c2VyLmlwX2FkZHJlc3M7CiAgICB9CgogICAgaWYgKCFzZXNzaW9uLmRpZCAmJiAhY29udGV4dC5kaWQpIHsKICAgICAgc2Vzc2lvbi5kaWQgPSBjb250ZXh0LnVzZXIuaWQgfHwgY29udGV4dC51c2VyLmVtYWlsIHx8IGNvbnRleHQudXNlci51c2VybmFtZTsKICAgIH0KICB9CgogIHNlc3Npb24udGltZXN0YW1wID0gY29udGV4dC50aW1lc3RhbXAgfHwgdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGlmIChjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbSkgewogICAgc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20gPSBjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbTsKICB9CgogIGlmIChjb250ZXh0Lmlnbm9yZUR1cmF0aW9uKSB7CiAgICBzZXNzaW9uLmlnbm9yZUR1cmF0aW9uID0gY29udGV4dC5pZ25vcmVEdXJhdGlvbjsKICB9CiAgaWYgKGNvbnRleHQuc2lkKSB7CiAgICAvLyBHb29kIGVub3VnaCB1dWlkIHZhbGlkYXRpb24uIOKAlCBLYW1pbAogICAgc2Vzc2lvbi5zaWQgPSBjb250ZXh0LnNpZC5sZW5ndGggPT09IDMyID8gY29udGV4dC5zaWQgOiB1dWlkNCgpOwogIH0KICBpZiAoY29udGV4dC5pbml0ICE9PSB1bmRlZmluZWQpIHsKICAgIHNlc3Npb24uaW5pdCA9IGNvbnRleHQuaW5pdDsKICB9CiAgaWYgKCFzZXNzaW9uLmRpZCAmJiBjb250ZXh0LmRpZCkgewogICAgc2Vzc2lvbi5kaWQgPSBgJHtjb250ZXh0LmRpZH1gOwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuc3RhcnRlZCA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uc3RhcnRlZCA9IGNvbnRleHQuc3RhcnRlZDsKICB9CiAgaWYgKHNlc3Npb24uaWdub3JlRHVyYXRpb24pIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSB1bmRlZmluZWQ7CiAgfSBlbHNlIGlmICh0eXBlb2YgY29udGV4dC5kdXJhdGlvbiA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSBjb250ZXh0LmR1cmF0aW9uOwogIH0gZWxzZSB7CiAgICBjb25zdCBkdXJhdGlvbiA9IHNlc3Npb24udGltZXN0YW1wIC0gc2Vzc2lvbi5zdGFydGVkOwogICAgc2Vzc2lvbi5kdXJhdGlvbiA9IGR1cmF0aW9uID49IDAgPyBkdXJhdGlvbiA6IDA7CiAgfQogIGlmIChjb250ZXh0LnJlbGVhc2UpIHsKICAgIHNlc3Npb24ucmVsZWFzZSA9IGNvbnRleHQucmVsZWFzZTsKICB9CiAgaWYgKGNvbnRleHQuZW52aXJvbm1lbnQpIHsKICAgIHNlc3Npb24uZW52aXJvbm1lbnQgPSBjb250ZXh0LmVudmlyb25tZW50OwogIH0KICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQuaXBBZGRyZXNzKSB7CiAgICBzZXNzaW9uLmlwQWRkcmVzcyA9IGNvbnRleHQuaXBBZGRyZXNzOwogIH0KICBpZiAoIXNlc3Npb24udXNlckFnZW50ICYmIGNvbnRleHQudXNlckFnZW50KSB7CiAgICBzZXNzaW9uLnVzZXJBZ2VudCA9IGNvbnRleHQudXNlckFnZW50OwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuZXJyb3JzID09PSAnbnVtYmVyJykgewogICAgc2Vzc2lvbi5lcnJvcnMgPSBjb250ZXh0LmVycm9yczsKICB9CiAgaWYgKGNvbnRleHQuc3RhdHVzKSB7CiAgICBzZXNzaW9uLnN0YXR1cyA9IGNvbnRleHQuc3RhdHVzOwogIH0KfQoKLyoqCiAqIENsb3NlcyBhIHNlc3Npb24gYnkgc2V0dGluZyBpdHMgc3RhdHVzIGFuZCB1cGRhdGluZyB0aGUgc2Vzc2lvbiBvYmplY3Qgd2l0aCBpdC4KICogSW50ZXJuYWxseSBjYWxscyBgdXBkYXRlU2Vzc2lvbmAgdG8gdXBkYXRlIHRoZSBwYXNzZWQgc2Vzc2lvbiBvYmplY3QuCiAqCiAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIG11dGF0ZXMgdGhlIHBhc3NlZCBzZXNzaW9uIChAc2VlIHVwZGF0ZVNlc3Npb24gZm9yIGV4cGxhbmF0aW9uKS4KICoKICogQHBhcmFtIHNlc3Npb24gdGhlIGBTZXNzaW9uYCBvYmplY3QgdG8gYmUgY2xvc2VkCiAqIEBwYXJhbSBzdGF0dXMgdGhlIGBTZXNzaW9uU3RhdHVzYCB3aXRoIHdoaWNoIHRoZSBzZXNzaW9uIHdhcyBjbG9zZWQuIElmIHlvdSBkb24ndCBwYXNzIGEgc3RhdHVzLAogKiAgICAgICAgICAgICAgIHRoaXMgZnVuY3Rpb24gd2lsbCBrZWVwIHRoZSBwcmV2aW91c2x5IHNldCBzdGF0dXMsIHVubGVzcyBpdCB3YXMgYCdvaydgIGluIHdoaWNoIGNhc2UKICogICAgICAgICAgICAgICBpdCBpcyBjaGFuZ2VkIHRvIGAnZXhpdGVkJ2AuCiAqLwpmdW5jdGlvbiBjbG9zZVNlc3Npb24oc2Vzc2lvbiwgc3RhdHVzKSB7CiAgbGV0IGNvbnRleHQgPSB7fTsKICBpZiAoc3RhdHVzKSB7CiAgICBjb250ZXh0ID0geyBzdGF0dXMgfTsKICB9IGVsc2UgaWYgKHNlc3Npb24uc3RhdHVzID09PSAnb2snKSB7CiAgICBjb250ZXh0ID0geyBzdGF0dXM6ICdleGl0ZWQnIH07CiAgfQoKICB1cGRhdGVTZXNzaW9uKHNlc3Npb24sIGNvbnRleHQpOwp9CgovKioKICogU2VyaWFsaXplcyBhIHBhc3NlZCBzZXNzaW9uIG9iamVjdCB0byBhIEpTT04gb2JqZWN0IHdpdGggYSBzbGlnaHRseSBkaWZmZXJlbnQgc3RydWN0dXJlLgogKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBTZW50cnkgYmFja2VuZCByZXF1aXJlcyBhIHNsaWdodGx5IGRpZmZlcmVudCBzY2hlbWEgb2YgYSBzZXNzaW9uCiAqIHRoYW4gdGhlIG9uZSB0aGUgSlMgU0RLcyB1c2UgaW50ZXJuYWxseS4KICoKICogQHBhcmFtIHNlc3Npb24gdGhlIHNlc3Npb24gdG8gYmUgY29udmVydGVkCiAqCiAqIEByZXR1cm5zIGEgSlNPTiBvYmplY3Qgb2YgdGhlIHBhc3NlZCBzZXNzaW9uCiAqLwpmdW5jdGlvbiBzZXNzaW9uVG9KU09OKHNlc3Npb24pIHsKICByZXR1cm4gZHJvcFVuZGVmaW5lZEtleXMoewogICAgc2lkOiBgJHtzZXNzaW9uLnNpZH1gLAogICAgaW5pdDogc2Vzc2lvbi5pbml0LAogICAgLy8gTWFrZSBzdXJlIHRoYXQgc2VjIGlzIGNvbnZlcnRlZCB0byBtcyBmb3IgZGF0ZSBjb25zdHJ1Y3RvcgogICAgc3RhcnRlZDogbmV3IERhdGUoc2Vzc2lvbi5zdGFydGVkICogMTAwMCkudG9JU09TdHJpbmcoKSwKICAgIHRpbWVzdGFtcDogbmV3IERhdGUoc2Vzc2lvbi50aW1lc3RhbXAgKiAxMDAwKS50b0lTT1N0cmluZygpLAogICAgc3RhdHVzOiBzZXNzaW9uLnN0YXR1cywKICAgIGVycm9yczogc2Vzc2lvbi5lcnJvcnMsCiAgICBkaWQ6IHR5cGVvZiBzZXNzaW9uLmRpZCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHNlc3Npb24uZGlkID09PSAnc3RyaW5nJyA/IGAke3Nlc3Npb24uZGlkfWAgOiB1bmRlZmluZWQsCiAgICBkdXJhdGlvbjogc2Vzc2lvbi5kdXJhdGlvbiwKICAgIGFibm9ybWFsX21lY2hhbmlzbTogc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20sCiAgICBhdHRyczogewogICAgICByZWxlYXNlOiBzZXNzaW9uLnJlbGVhc2UsCiAgICAgIGVudmlyb25tZW50OiBzZXNzaW9uLmVudmlyb25tZW50LAogICAgICBpcF9hZGRyZXNzOiBzZXNzaW9uLmlwQWRkcmVzcywKICAgICAgdXNlcl9hZ2VudDogc2Vzc2lvbi51c2VyQWdlbnQsCiAgICB9LAogIH0pOwp9Cgpjb25zdCBUUkFDRV9GTEFHX1NBTVBMRUQgPSAweDE7CgovKioKICogQ29udmVydCBhIHNwYW4gdG8gYSB0cmFjZSBjb250ZXh0LCB3aGljaCBjYW4gYmUgc2VudCBhcyB0aGUgYHRyYWNlYCBjb250ZXh0IGluIGFuIGV2ZW50LgogKi8KZnVuY3Rpb24gc3BhblRvVHJhY2VDb250ZXh0KHNwYW4pIHsKICBjb25zdCB7IHNwYW5JZDogc3Bhbl9pZCwgdHJhY2VJZDogdHJhY2VfaWQgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTsKICBjb25zdCB7IGRhdGEsIG9wLCBwYXJlbnRfc3Bhbl9pZCwgc3RhdHVzLCB0YWdzLCBvcmlnaW4gfSA9IHNwYW5Ub0pTT04oc3Bhbik7CgogIHJldHVybiBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBkYXRhLAogICAgb3AsCiAgICBwYXJlbnRfc3Bhbl9pZCwKICAgIHNwYW5faWQsCiAgICBzdGF0dXMsCiAgICB0YWdzLAogICAgdHJhY2VfaWQsCiAgICBvcmlnaW4sCiAgfSk7Cn0KCi8qKgogKiBDb252ZXJ0IGEgc3BhbiB0byBhIEpTT04gcmVwcmVzZW50YXRpb24uCiAqIE5vdGUgdGhhdCBhbGwgZmllbGRzIHJldHVybmVkIGhlcmUgYXJlIG9wdGlvbmFsIGFuZCBuZWVkIHRvIGJlIGd1YXJkZWQgYWdhaW5zdC4KICoKICogTm90ZTogQmVjYXVzZSBvZiB0aGlzLCB3ZSBjdXJyZW50bHkgaGF2ZSBhIGNpcmN1bGFyIHR5cGUgZGVwZW5kZW5jeSAod2hpY2ggd2Ugb3B0ZWQgb3V0IG9mIGluIHBhY2thZ2UuanNvbikuCiAqIFRoaXMgaXMgbm90IGF2b2lkYWJsZSBhcyB3ZSBuZWVkIGBzcGFuVG9KU09OYCBpbiBgc3BhblV0aWxzLnRzYCwgd2hpY2ggaW4gdHVybiBpcyBuZWVkZWQgYnkgYHNwYW4udHNgIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KICogQW5kIGBzcGFuVG9KU09OYCBuZWVkcyB0aGUgU3BhbiBjbGFzcyBmcm9tIGBzcGFuLnRzYCB0byBjaGVjayBoZXJlLgogKiBUT0RPIHY4OiBXaGVuIHdlIHJlbW92ZSB0aGUgZGVwcmVjYXRlZCBzdHVmZiBmcm9tIGBzcGFuLnRzYCwgd2UgY2FuIHJlbW92ZSB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeSBhZ2Fpbi4KICovCmZ1bmN0aW9uIHNwYW5Ub0pTT04oc3BhbikgewogIGlmIChzcGFuSXNTcGFuQ2xhc3Moc3BhbikpIHsKICAgIHJldHVybiBzcGFuLmdldFNwYW5KU09OKCk7CiAgfQoKICAvLyBGYWxsYmFjazogV2UgYWxzbyBjaGVjayBmb3IgYC50b0pTT04oKWAgaGVyZS4uLgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIGlmICh0eXBlb2Ygc3Bhbi50b0pTT04gPT09ICdmdW5jdGlvbicpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgcmV0dXJuIHNwYW4udG9KU09OKCk7CiAgfQoKICByZXR1cm4ge307Cn0KCi8qKgogKiBTYWRseSwgZHVlIHRvIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2hlY2tzIHdlIGNhbm5vdCBhY3R1YWxseSBpbXBvcnQgdGhlIFNwYW4gY2xhc3MgaGVyZSBhbmQgY2hlY2sgZm9yIGluc3RhbmNlb2YuCiAqIDooIFNvIGluc3RlYWQgd2UgYXBwcm94aW1hdGUgdGhpcyBieSBjaGVja2luZyBpZiBpdCBoYXMgdGhlIGBnZXRTcGFuSlNPTmAgbWV0aG9kLgogKi8KZnVuY3Rpb24gc3BhbklzU3BhbkNsYXNzKHNwYW4pIHsKICByZXR1cm4gdHlwZW9mIChzcGFuICkuZ2V0U3BhbkpTT04gPT09ICdmdW5jdGlvbic7Cn0KCi8qKgogKiBSZXR1cm5zIHRydWUgaWYgYSBzcGFuIGlzIHNhbXBsZWQuCiAqIEluIG1vc3QgY2FzZXMsIHlvdSBzaG91bGQganVzdCB1c2UgYHNwYW4uaXNSZWNvcmRpbmcoKWAgaW5zdGVhZC4KICogSG93ZXZlciwgdGhpcyBoYXMgYSBzbGlnaHRseSBkaWZmZXJlbnQgc2VtYW50aWMsIGFzIGl0IGFsc28gcmV0dXJucyBmYWxzZSBpZiB0aGUgc3BhbiBpcyBmaW5pc2hlZC4KICogU28gaW4gdGhlIGNhc2Ugd2hlcmUgdGhpcyBkaXN0aW5jdGlvbiBpcyBpbXBvcnRhbnQsIHVzZSB0aGlzIG1ldGhvZC4KICovCmZ1bmN0aW9uIHNwYW5Jc1NhbXBsZWQoc3BhbikgewogIC8vIFdlIGFsaWduIG91ciB0cmFjZSBmbGFncyB3aXRoIHRoZSBvbmVzIE9wZW5UZWxlbWV0cnkgdXNlCiAgLy8gU28gd2UgYWxzbyBjaGVjayBmb3Igc2FtcGxlZCB0aGUgc2FtZSB3YXkgdGhleSBkby4KICBjb25zdCB7IHRyYWNlRmxhZ3MgfSA9IHNwYW4uc3BhbkNvbnRleHQoKTsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZQogIHJldHVybiBCb29sZWFuKHRyYWNlRmxhZ3MgJiBUUkFDRV9GTEFHX1NBTVBMRUQpOwp9CgovKioKICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIGNsaWVudC4KICovCmZ1bmN0aW9uIGdldENsaWVudCgpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICByZXR1cm4gZ2V0Q3VycmVudEh1YigpLmdldENsaWVudCgpOwp9CgovKioKICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjb3BlLgogKi8KZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIHJldHVybiBnZXRDdXJyZW50SHViKCkuZ2V0U2NvcGUoKTsKfQoKLyoqCiAqIFJldHVybnMgdGhlIHJvb3Qgc3BhbiBvZiBhIGdpdmVuIHNwYW4uCiAqCiAqIEFzIGxvbmcgYXMgd2UgdXNlIGBUcmFuc2FjdGlvbmBzIGludGVybmFsbHksIHRoZSByZXR1cm5lZCByb290IHNwYW4KICogd2lsbCBiZSBhIGBUcmFuc2FjdGlvbmAgYnV0IGJlIGF3YXJlIHRoYXQgdGhpcyBtaWdodCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS4KICoKICogSWYgdGhlIGdpdmVuIHNwYW4gaGFzIG5vIHJvb3Qgc3BhbiBvciB0cmFuc2FjdGlvbiwgYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQuCiAqLwpmdW5jdGlvbiBnZXRSb290U3BhbihzcGFuKSB7CiAgLy8gVE9ETyAodjgpOiBSZW1vdmUgdGhpcyBjaGVjayBhbmQganVzdCByZXR1cm4gc3BhbgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIHJldHVybiBzcGFuLnRyYW5zYWN0aW9uOwp9CgovKioKICogQ3JlYXRlcyBhIGR5bmFtaWMgc2FtcGxpbmcgY29udGV4dCBmcm9tIGEgY2xpZW50LgogKgogKiBEaXNwYXRjaGVzIHRoZSBgY3JlYXRlRHNjYCBsaWZlY3ljbGUgaG9vayBhcyBhIHNpZGUgZWZmZWN0LgogKi8KZnVuY3Rpb24gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQoCiAgdHJhY2VfaWQsCiAgY2xpZW50LAogIHNjb3BlLAopIHsKICBjb25zdCBvcHRpb25zID0gY2xpZW50LmdldE9wdGlvbnMoKTsKCiAgY29uc3QgeyBwdWJsaWNLZXk6IHB1YmxpY19rZXkgfSA9IGNsaWVudC5nZXREc24oKSB8fCB7fTsKICAvLyBUT0RPKHY4KTogUmVtb3ZlIHNlZ21lbnQgZnJvbSBVc2VyCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgY29uc3QgeyBzZWdtZW50OiB1c2VyX3NlZ21lbnQgfSA9IChzY29wZSAmJiBzY29wZS5nZXRVc2VyKCkpIHx8IHt9OwoKICBjb25zdCBkc2MgPSBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBlbnZpcm9ubWVudDogb3B0aW9ucy5lbnZpcm9ubWVudCB8fCBERUZBVUxUX0VOVklST05NRU5ULAogICAgcmVsZWFzZTogb3B0aW9ucy5yZWxlYXNlLAogICAgdXNlcl9zZWdtZW50LAogICAgcHVibGljX2tleSwKICAgIHRyYWNlX2lkLAogIH0pIDsKCiAgY2xpZW50LmVtaXQgJiYgY2xpZW50LmVtaXQoJ2NyZWF0ZURzYycsIGRzYyk7CgogIHJldHVybiBkc2M7Cn0KCi8qKgogKiBBIFNwYW4gd2l0aCBhIGZyb3plbiBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQuCiAqLwoKLyoqCiAqIENyZWF0ZXMgYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQgZnJvbSBhIHNwYW4gKGFuZCBjbGllbnQgYW5kIHNjb3BlKQogKgogKiBAcGFyYW0gc3BhbiB0aGUgc3BhbiBmcm9tIHdoaWNoIGEgZmV3IHZhbHVlcyBsaWtlIHRoZSByb290IHNwYW4gbmFtZSBhbmQgc2FtcGxlIHJhdGUgYXJlIGV4dHJhY3RlZC4KICoKICogQHJldHVybnMgYSBkeW5hbWljIHNhbXBsaW5nIGNvbnRleHQKICovCmZ1bmN0aW9uIGdldER5bmFtaWNTYW1wbGluZ0NvbnRleHRGcm9tU3BhbihzcGFuKSB7CiAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7CiAgaWYgKCFjbGllbnQpIHsKICAgIHJldHVybiB7fTsKICB9CgogIC8vIHBhc3NpbmcgZW1pdD1mYWxzZSBoZXJlIHRvIG9ubHkgZW1pdCBsYXRlciBvbmNlIHRoZSBEU0MgaXMgYWN0dWFsbHkgcG9wdWxhdGVkCiAgY29uc3QgZHNjID0gZ2V0RHluYW1pY1NhbXBsaW5nQ29udGV4dEZyb21DbGllbnQoc3BhblRvSlNPTihzcGFuKS50cmFjZV9pZCB8fCAnJywgY2xpZW50LCBnZXRDdXJyZW50U2NvcGUoKSk7CgogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHY3RnJvemVuRHNjIGFzIGEgVHJhbnNhY3Rpb24gd2lsbCBubyBsb25nZXIgaGF2ZSBfZnJvemVuRHluYW1pY1NhbXBsaW5nQ29udGV4dAogIGNvbnN0IHR4biA9IGdldFJvb3RTcGFuKHNwYW4pIDsKICBpZiAoIXR4bikgewogICAgcmV0dXJuIGRzYzsKICB9CgogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHY3RnJvemVuRHNjIGFzIGEgVHJhbnNhY3Rpb24gd2lsbCBubyBsb25nZXIgaGF2ZSBfZnJvemVuRHluYW1pY1NhbXBsaW5nQ29udGV4dAogIC8vIEZvciBub3cgd2UgbmVlZCB0byBhdm9pZCBicmVha2luZyB1c2VycyB3aG8gZGlyZWN0bHkgY3JlYXRlZCBhIHR4biB3aXRoIGEgRFNDLCB3aGVyZSB0aGlzIGZpZWxkIGlzIHN0aWxsIHNldC4KICAvLyBAc2VlIFRyYW5zYWN0aW9uIGNsYXNzIGNvbnN0cnVjdG9yCiAgY29uc3QgdjdGcm96ZW5Ec2MgPSB0eG4gJiYgdHhuLl9mcm96ZW5EeW5hbWljU2FtcGxpbmdDb250ZXh0OwogIGlmICh2N0Zyb3plbkRzYykgewogICAgcmV0dXJuIHY3RnJvemVuRHNjOwogIH0KCiAgLy8gVE9ETyAodjgpOiBSZXBsYWNlIHR4bi5tZXRhZGF0YSB3aXRoIHR4bi5hdHRyaWJ1dGVzW10KICAvLyBXZSBjYW4ndCBkbyB0aGlzIHlldCBiZWNhdXNlIGF0dHJpYnV0ZXMgYXJlbid0IGFsd2F5cyBzZXQgeWV0LgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogIGNvbnN0IHsgc2FtcGxlUmF0ZTogbWF5YmVTYW1wbGVSYXRlLCBzb3VyY2UgfSA9IHR4bi5tZXRhZGF0YTsKICBpZiAobWF5YmVTYW1wbGVSYXRlICE9IG51bGwpIHsKICAgIGRzYy5zYW1wbGVfcmF0ZSA9IGAke21heWJlU2FtcGxlUmF0ZX1gOwogIH0KCiAgLy8gV2UgZG9uJ3Qgd2FudCB0byBoYXZlIGEgdHJhbnNhY3Rpb24gbmFtZSBpbiB0aGUgRFNDIGlmIHRoZSBzb3VyY2UgaXMgInVybCIgYmVjYXVzZSBVUkxzIG1pZ2h0IGNvbnRhaW4gUElJCiAgY29uc3QganNvblNwYW4gPSBzcGFuVG9KU09OKHR4bik7CgogIC8vIGFmdGVyIEpTT04gY29udmVyc2lvbiwgdHhuLm5hbWUgYmVjb21lcyBqc29uU3Bhbi5kZXNjcmlwdGlvbgogIGlmIChzb3VyY2UgJiYgc291cmNlICE9PSAndXJsJykgewogICAgZHNjLnRyYW5zYWN0aW9uID0ganNvblNwYW4uZGVzY3JpcHRpb247CiAgfQoKICBkc2Muc2FtcGxlZCA9IFN0cmluZyhzcGFuSXNTYW1wbGVkKHR4bikpOwoKICBjbGllbnQuZW1pdCAmJiBjbGllbnQuZW1pdCgnY3JlYXRlRHNjJywgZHNjKTsKCiAgcmV0dXJuIGRzYzsKfQoKLyoqCiAqIEFwcGxpZXMgZGF0YSBmcm9tIHRoZSBzY29wZSB0byB0aGUgZXZlbnQgYW5kIHJ1bnMgYWxsIGV2ZW50IHByb2Nlc3NvcnMgb24gaXQuCiAqLwpmdW5jdGlvbiBhcHBseVNjb3BlRGF0YVRvRXZlbnQoZXZlbnQsIGRhdGEpIHsKICBjb25zdCB7IGZpbmdlcnByaW50LCBzcGFuLCBicmVhZGNydW1icywgc2RrUHJvY2Vzc2luZ01ldGFkYXRhIH0gPSBkYXRhOwoKICAvLyBBcHBseSBnZW5lcmFsIGRhdGEKICBhcHBseURhdGFUb0V2ZW50KGV2ZW50LCBkYXRhKTsKCiAgLy8gV2Ugd2FudCB0byBzZXQgdGhlIHRyYWNlIGNvbnRleHQgZm9yIG5vcm1hbCBldmVudHMgb25seSBpZiB0aGVyZSBpc24ndCBhbHJlYWR5CiAgLy8gYSB0cmFjZSBjb250ZXh0IG9uIHRoZSBldmVudC4gVGhlcmUgaXMgYSBwcm9kdWN0IGZlYXR1cmUgaW4gcGxhY2Ugd2hlcmUgd2UgbGluawogIC8vIGVycm9ycyB3aXRoIHRyYW5zYWN0aW9uIGFuZCBpdCByZWxpZXMgb24gdGhhdC4KICBpZiAoc3BhbikgewogICAgYXBwbHlTcGFuVG9FdmVudChldmVudCwgc3Bhbik7CiAgfQoKICBhcHBseUZpbmdlcnByaW50VG9FdmVudChldmVudCwgZmluZ2VycHJpbnQpOwogIGFwcGx5QnJlYWRjcnVtYnNUb0V2ZW50KGV2ZW50LCBicmVhZGNydW1icyk7CiAgYXBwbHlTZGtNZXRhZGF0YVRvRXZlbnQoZXZlbnQsIHNka1Byb2Nlc3NpbmdNZXRhZGF0YSk7Cn0KCmZ1bmN0aW9uIGFwcGx5RGF0YVRvRXZlbnQoZXZlbnQsIGRhdGEpIHsKICBjb25zdCB7CiAgICBleHRyYSwKICAgIHRhZ3MsCiAgICB1c2VyLAogICAgY29udGV4dHMsCiAgICBsZXZlbCwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdHJhbnNhY3Rpb25OYW1lLAogIH0gPSBkYXRhOwoKICBjb25zdCBjbGVhbmVkRXh0cmEgPSBkcm9wVW5kZWZpbmVkS2V5cyhleHRyYSk7CiAgaWYgKGNsZWFuZWRFeHRyYSAmJiBPYmplY3Qua2V5cyhjbGVhbmVkRXh0cmEpLmxlbmd0aCkgewogICAgZXZlbnQuZXh0cmEgPSB7IC4uLmNsZWFuZWRFeHRyYSwgLi4uZXZlbnQuZXh0cmEgfTsKICB9CgogIGNvbnN0IGNsZWFuZWRUYWdzID0gZHJvcFVuZGVmaW5lZEtleXModGFncyk7CiAgaWYgKGNsZWFuZWRUYWdzICYmIE9iamVjdC5rZXlzKGNsZWFuZWRUYWdzKS5sZW5ndGgpIHsKICAgIGV2ZW50LnRhZ3MgPSB7IC4uLmNsZWFuZWRUYWdzLCAuLi5ldmVudC50YWdzIH07CiAgfQoKICBjb25zdCBjbGVhbmVkVXNlciA9IGRyb3BVbmRlZmluZWRLZXlzKHVzZXIpOwogIGlmIChjbGVhbmVkVXNlciAmJiBPYmplY3Qua2V5cyhjbGVhbmVkVXNlcikubGVuZ3RoKSB7CiAgICBldmVudC51c2VyID0geyAuLi5jbGVhbmVkVXNlciwgLi4uZXZlbnQudXNlciB9OwogIH0KCiAgY29uc3QgY2xlYW5lZENvbnRleHRzID0gZHJvcFVuZGVmaW5lZEtleXMoY29udGV4dHMpOwogIGlmIChjbGVhbmVkQ29udGV4dHMgJiYgT2JqZWN0LmtleXMoY2xlYW5lZENvbnRleHRzKS5sZW5ndGgpIHsKICAgIGV2ZW50LmNvbnRleHRzID0geyAuLi5jbGVhbmVkQ29udGV4dHMsIC4uLmV2ZW50LmNvbnRleHRzIH07CiAgfQoKICBpZiAobGV2ZWwpIHsKICAgIGV2ZW50LmxldmVsID0gbGV2ZWw7CiAgfQoKICBpZiAodHJhbnNhY3Rpb25OYW1lKSB7CiAgICBldmVudC50cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uTmFtZTsKICB9Cn0KCmZ1bmN0aW9uIGFwcGx5QnJlYWRjcnVtYnNUb0V2ZW50KGV2ZW50LCBicmVhZGNydW1icykgewogIGNvbnN0IG1lcmdlZEJyZWFkY3J1bWJzID0gWy4uLihldmVudC5icmVhZGNydW1icyB8fCBbXSksIC4uLmJyZWFkY3J1bWJzXTsKICBldmVudC5icmVhZGNydW1icyA9IG1lcmdlZEJyZWFkY3J1bWJzLmxlbmd0aCA/IG1lcmdlZEJyZWFkY3J1bWJzIDogdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBhcHBseVNka01ldGFkYXRhVG9FdmVudChldmVudCwgc2RrUHJvY2Vzc2luZ01ldGFkYXRhKSB7CiAgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gewogICAgLi4uZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLAogICAgLi4uc2RrUHJvY2Vzc2luZ01ldGFkYXRhLAogIH07Cn0KCmZ1bmN0aW9uIGFwcGx5U3BhblRvRXZlbnQoZXZlbnQsIHNwYW4pIHsKICBldmVudC5jb250ZXh0cyA9IHsgdHJhY2U6IHNwYW5Ub1RyYWNlQ29udGV4dChzcGFuKSwgLi4uZXZlbnQuY29udGV4dHMgfTsKICBjb25zdCByb290U3BhbiA9IGdldFJvb3RTcGFuKHNwYW4pOwogIGlmIChyb290U3BhbikgewogICAgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0gewogICAgICBkeW5hbWljU2FtcGxpbmdDb250ZXh0OiBnZXREeW5hbWljU2FtcGxpbmdDb250ZXh0RnJvbVNwYW4oc3BhbiksCiAgICAgIC4uLmV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YSwKICAgIH07CiAgICBjb25zdCB0cmFuc2FjdGlvbk5hbWUgPSBzcGFuVG9KU09OKHJvb3RTcGFuKS5kZXNjcmlwdGlvbjsKICAgIGlmICh0cmFuc2FjdGlvbk5hbWUpIHsKICAgICAgZXZlbnQudGFncyA9IHsgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uTmFtZSwgLi4uZXZlbnQudGFncyB9OwogICAgfQogIH0KfQoKLyoqCiAqIEFwcGxpZXMgZmluZ2VycHJpbnQgZnJvbSB0aGUgc2NvcGUgdG8gdGhlIGV2ZW50IGlmIHRoZXJlJ3Mgb25lLAogKiB1c2VzIG1lc3NhZ2UgaWYgdGhlcmUncyBvbmUgaW5zdGVhZCBvciBnZXQgcmlkIG9mIGVtcHR5IGZpbmdlcnByaW50CiAqLwpmdW5jdGlvbiBhcHBseUZpbmdlcnByaW50VG9FdmVudChldmVudCwgZmluZ2VycHJpbnQpIHsKICAvLyBNYWtlIHN1cmUgaXQncyBhbiBhcnJheSBmaXJzdCBhbmQgd2UgYWN0dWFsbHkgaGF2ZSBzb21ldGhpbmcgaW4gcGxhY2UKICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50ID8gYXJyYXlpZnkoZXZlbnQuZmluZ2VycHJpbnQpIDogW107CgogIC8vIElmIHdlIGhhdmUgc29tZXRoaW5nIG9uIHRoZSBzY29wZSwgdGhlbiBtZXJnZSBpdCB3aXRoIGV2ZW50CiAgaWYgKGZpbmdlcnByaW50KSB7CiAgICBldmVudC5maW5nZXJwcmludCA9IGV2ZW50LmZpbmdlcnByaW50LmNvbmNhdChmaW5nZXJwcmludCk7CiAgfQoKICAvLyBJZiB3ZSBoYXZlIG5vIGRhdGEgYXQgYWxsLCByZW1vdmUgZW1wdHkgYXJyYXkgZGVmYXVsdAogIGlmIChldmVudC5maW5nZXJwcmludCAmJiAhZXZlbnQuZmluZ2VycHJpbnQubGVuZ3RoKSB7CiAgICBkZWxldGUgZXZlbnQuZmluZ2VycHJpbnQ7CiAgfQp9CgovKioKICogRGVmYXVsdCB2YWx1ZSBmb3IgbWF4aW11bSBudW1iZXIgb2YgYnJlYWRjcnVtYnMgYWRkZWQgdG8gYW4gZXZlbnQuCiAqLwpjb25zdCBERUZBVUxUX01BWF9CUkVBRENSVU1CUyA9IDEwMDsKCi8qKgogKiBIb2xkcyBhZGRpdGlvbmFsIGV2ZW50IGluZm9ybWF0aW9uLiB7QGxpbmsgU2NvcGUuYXBwbHlUb0V2ZW50fSB3aWxsIGJlCiAqIGNhbGxlZCBieSB0aGUgY2xpZW50IGJlZm9yZSBhbiBldmVudCB3aWxsIGJlIHNlbnQuCiAqLwpjbGFzcyBTY29wZSAgewogIC8qKiBGbGFnIGlmIG5vdGlmeWluZyBpcyBoYXBwZW5pbmcuICovCgogIC8qKiBDYWxsYmFjayBmb3IgY2xpZW50IHRvIHJlY2VpdmUgc2NvcGUgY2hhbmdlcy4gKi8KCiAgLyoqIENhbGxiYWNrIGxpc3QgdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciB7QGxpbmsgYXBwbHlUb0V2ZW50fS4gKi8KCiAgLyoqIEFycmF5IG9mIGJyZWFkY3J1bWJzLiAqLwoKICAvKiogVXNlciAqLwoKICAvKiogVGFncyAqLwoKICAvKiogRXh0cmEgKi8KCiAgLyoqIENvbnRleHRzICovCgogIC8qKiBBdHRhY2htZW50cyAqLwoKICAvKiogUHJvcGFnYXRpb24gQ29udGV4dCBmb3IgZGlzdHJpYnV0ZWQgdHJhY2luZyAqLwoKICAvKioKICAgKiBBIHBsYWNlIHRvIHN0YXNoIGRhdGEgd2hpY2ggaXMgbmVlZGVkIGF0IHNvbWUgcG9pbnQgaW4gdGhlIFNESydzIGV2ZW50IHByb2Nlc3NpbmcgcGlwZWxpbmUgYnV0IHdoaWNoIHNob3VsZG4ndCBnZXQKICAgKiBzZW50IHRvIFNlbnRyeQogICAqLwoKICAvKiogRmluZ2VycHJpbnQgKi8KCiAgLyoqIFNldmVyaXR5ICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCgogIC8qKgogICAqIFRyYW5zYWN0aW9uIE5hbWUKICAgKi8KCiAgLyoqIFNwYW4gKi8KCiAgLyoqIFNlc3Npb24gKi8KCiAgLyoqIFJlcXVlc3QgTW9kZSBTZXNzaW9uIFN0YXR1cyAqLwoKICAvKiogVGhlIGNsaWVudCBvbiB0aGlzIHNjb3BlICovCgogIC8vIE5PVEU6IEFueSBmaWVsZCB3aGljaCBnZXRzIGFkZGVkIGhlcmUgc2hvdWxkIGdldCBhZGRlZCBub3Qgb25seSB0byB0aGUgY29uc3RydWN0b3IgYnV0IGFsc28gdG8gdGhlIGBjbG9uZWAgbWV0aG9kLgoKICAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnMgPSBmYWxzZTsKICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzID0gW107CiAgICB0aGlzLl9ldmVudFByb2Nlc3NvcnMgPSBbXTsKICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gW107CiAgICB0aGlzLl9hdHRhY2htZW50cyA9IFtdOwogICAgdGhpcy5fdXNlciA9IHt9OwogICAgdGhpcy5fdGFncyA9IHt9OwogICAgdGhpcy5fZXh0cmEgPSB7fTsKICAgIHRoaXMuX2NvbnRleHRzID0ge307CiAgICB0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEgPSB7fTsKICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IGdlbmVyYXRlUHJvcGFnYXRpb25Db250ZXh0KCk7CiAgfQoKICAvKioKICAgKiBJbmhlcml0IHZhbHVlcyBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzY29wZS5jbG9uZSgpYCBhbmQgYG5ldyBTY29wZSgpYCBpbnN0ZWFkLgogICAqLwogICBzdGF0aWMgY2xvbmUoc2NvcGUpIHsKICAgIHJldHVybiBzY29wZSA/IHNjb3BlLmNsb25lKCkgOiBuZXcgU2NvcGUoKTsKICB9CgogIC8qKgogICAqIENsb25lIHRoaXMgc2NvcGUgaW5zdGFuY2UuCiAgICovCiAgIGNsb25lKCkgewogICAgY29uc3QgbmV3U2NvcGUgPSBuZXcgU2NvcGUoKTsKICAgIG5ld1Njb3BlLl9icmVhZGNydW1icyA9IFsuLi50aGlzLl9icmVhZGNydW1ic107CiAgICBuZXdTY29wZS5fdGFncyA9IHsgLi4udGhpcy5fdGFncyB9OwogICAgbmV3U2NvcGUuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSB9OwogICAgbmV3U2NvcGUuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cyB9OwogICAgbmV3U2NvcGUuX3VzZXIgPSB0aGlzLl91c2VyOwogICAgbmV3U2NvcGUuX2xldmVsID0gdGhpcy5fbGV2ZWw7CiAgICBuZXdTY29wZS5fc3BhbiA9IHRoaXMuX3NwYW47CiAgICBuZXdTY29wZS5fc2Vzc2lvbiA9IHRoaXMuX3Nlc3Npb247CiAgICBuZXdTY29wZS5fdHJhbnNhY3Rpb25OYW1lID0gdGhpcy5fdHJhbnNhY3Rpb25OYW1lOwogICAgbmV3U2NvcGUuX2ZpbmdlcnByaW50ID0gdGhpcy5fZmluZ2VycHJpbnQ7CiAgICBuZXdTY29wZS5fZXZlbnRQcm9jZXNzb3JzID0gWy4uLnRoaXMuX2V2ZW50UHJvY2Vzc29yc107CiAgICBuZXdTY29wZS5fcmVxdWVzdFNlc3Npb24gPSB0aGlzLl9yZXF1ZXN0U2Vzc2lvbjsKICAgIG5ld1Njb3BlLl9hdHRhY2htZW50cyA9IFsuLi50aGlzLl9hdHRhY2htZW50c107CiAgICBuZXdTY29wZS5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhID0geyAuLi50aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEgfTsKICAgIG5ld1Njb3BlLl9wcm9wYWdhdGlvbkNvbnRleHQgPSB7IC4uLnRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCB9OwogICAgbmV3U2NvcGUuX2NsaWVudCA9IHRoaXMuX2NsaWVudDsKCiAgICByZXR1cm4gbmV3U2NvcGU7CiAgfQoKICAvKiogVXBkYXRlIHRoZSBjbGllbnQgb24gdGhlIHNjb3BlLiAqLwogICBzZXRDbGllbnQoY2xpZW50KSB7CiAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIGNsaWVudCBhc3NpZ25lZCB0byB0aGlzIHNjb3BlLgogICAqCiAgICogSXQgaXMgZ2VuZXJhbGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgZ2xvYmFsIGZ1bmN0aW9uIGBTZW50cnkuZ2V0Q2xpZW50KClgIGluc3RlYWQsIHVubGVzcyB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuCiAgICovCiAgIGdldENsaWVudCgpIHsKICAgIHJldHVybiB0aGlzLl9jbGllbnQ7CiAgfQoKICAvKioKICAgKiBBZGQgaW50ZXJuYWwgb24gY2hhbmdlIGxpc3RlbmVyLiBVc2VkIGZvciBzdWIgU0RLcyB0aGF0IG5lZWQgdG8gc3RvcmUgdGhlIHNjb3BlLgogICAqIEBoaWRkZW4KICAgKi8KICAgYWRkU2NvcGVMaXN0ZW5lcihjYWxsYmFjaykgewogICAgdGhpcy5fc2NvcGVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBhZGRFdmVudFByb2Nlc3NvcihjYWxsYmFjaykgewogICAgdGhpcy5fZXZlbnRQcm9jZXNzb3JzLnB1c2goY2FsbGJhY2spOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRVc2VyKHVzZXIpIHsKICAgIC8vIElmIG51bGwgaXMgcGFzc2VkIHdlIHdhbnQgdG8gdW5zZXQgZXZlcnl0aGluZywgYnV0IHN0aWxsIGRlZmluZSBrZXlzLAogICAgLy8gc28gdGhhdCBsYXRlciBkb3duIGluIHRoZSBwaXBlbGluZSBhbnkgZXhpc3RpbmcgdmFsdWVzIGFyZSBjbGVhcmVkLgogICAgdGhpcy5fdXNlciA9IHVzZXIgfHwgewogICAgICBlbWFpbDogdW5kZWZpbmVkLAogICAgICBpZDogdW5kZWZpbmVkLAogICAgICBpcF9hZGRyZXNzOiB1bmRlZmluZWQsCiAgICAgIHNlZ21lbnQ6IHVuZGVmaW5lZCwKICAgICAgdXNlcm5hbWU6IHVuZGVmaW5lZCwKICAgIH07CgogICAgaWYgKHRoaXMuX3Nlc3Npb24pIHsKICAgICAgdXBkYXRlU2Vzc2lvbih0aGlzLl9zZXNzaW9uLCB7IHVzZXIgfSk7CiAgICB9CgogICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0VXNlcigpIHsKICAgIHJldHVybiB0aGlzLl91c2VyOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0UmVxdWVzdFNlc3Npb24oKSB7CiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFNlc3Npb247CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRSZXF1ZXN0U2Vzc2lvbihyZXF1ZXN0U2Vzc2lvbikgewogICAgdGhpcy5fcmVxdWVzdFNlc3Npb24gPSByZXF1ZXN0U2Vzc2lvbjsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgc2V0VGFncyh0YWdzKSB7CiAgICB0aGlzLl90YWdzID0gewogICAgICAuLi50aGlzLl90YWdzLAogICAgICAuLi50YWdzLAogICAgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldFRhZyhrZXksIHZhbHVlKSB7CiAgICB0aGlzLl90YWdzID0geyAuLi50aGlzLl90YWdzLCBba2V5XTogdmFsdWUgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldEV4dHJhcyhleHRyYXMpIHsKICAgIHRoaXMuX2V4dHJhID0gewogICAgICAuLi50aGlzLl9leHRyYSwKICAgICAgLi4uZXh0cmFzLAogICAgfTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldEV4dHJhKGtleSwgZXh0cmEpIHsKICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgW2tleV06IGV4dHJhIH07CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRGaW5nZXJwcmludChmaW5nZXJwcmludCkgewogICAgdGhpcy5fZmluZ2VycHJpbnQgPSBmaW5nZXJwcmludDsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIHNldExldmVsKAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBsZXZlbCwKICApIHsKICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBTZXRzIHRoZSB0cmFuc2FjdGlvbiBuYW1lIG9uIHRoZSBzY29wZSBmb3IgZnV0dXJlIGV2ZW50cy4KICAgKi8KICAgc2V0VHJhbnNhY3Rpb25OYW1lKG5hbWUpIHsKICAgIHRoaXMuX3RyYW5zYWN0aW9uTmFtZSA9IG5hbWU7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRDb250ZXh0KGtleSwgY29udGV4dCkgewogICAgaWYgKGNvbnRleHQgPT09IG51bGwpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZQogICAgICBkZWxldGUgdGhpcy5fY29udGV4dHNba2V5XTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2NvbnRleHRzW2tleV0gPSBjb250ZXh0OwogICAgfQoKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIFNldHMgdGhlIFNwYW4gb24gdGhlIHNjb3BlLgogICAqIEBwYXJhbSBzcGFuIFNwYW4KICAgKiBAZGVwcmVjYXRlZCBJbnN0ZWFkIG9mIHNldHRpbmcgYSBzcGFuIG9uIGEgc2NvcGUsIHVzZSBgc3RhcnRTcGFuKClgL2BzdGFydFNwYW5NYW51YWwoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0U3BhbihzcGFuKSB7CiAgICB0aGlzLl9zcGFuID0gc3BhbjsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGBTcGFuYCBpZiB0aGVyZSBpcyBvbmUuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBnZXRBY3RpdmVTcGFuKClgIGluc3RlYWQuCiAgICovCiAgIGdldFNwYW4oKSB7CiAgICByZXR1cm4gdGhpcy5fc3BhbjsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIGBUcmFuc2FjdGlvbmAgYXR0YWNoZWQgdG8gdGhlIHNjb3BlIChpZiB0aGVyZSBpcyBvbmUpLgogICAqIEBkZXByZWNhdGVkIFlvdSBzaG91bGQgbm90IHJlbHkgb24gdGhlIHRyYW5zYWN0aW9uLCBidXQganVzdCB1c2UgYHN0YXJ0U3BhbigpYCBBUElzIGluc3RlYWQuCiAgICovCiAgIGdldFRyYW5zYWN0aW9uKCkgewogICAgLy8gT2Z0ZW4sIHRoaXMgc3BhbiAoaWYgaXQgZXhpc3RzIGF0IGFsbCkgd2lsbCBiZSBhIHRyYW5zYWN0aW9uLCBidXQgaXQncyBub3QgZ3VhcmFudGVlZCB0byBiZS4gUmVnYXJkbGVzcywgaXQgd2lsbAogICAgLy8gaGF2ZSBhIHBvaW50ZXIgdG8gdGhlIGN1cnJlbnRseS1hY3RpdmUgdHJhbnNhY3Rpb24uCiAgICBjb25zdCBzcGFuID0gdGhpcy5fc3BhbjsKICAgIC8vIENhbm5vdCByZXBsYWNlIHdpdGggZ2V0Um9vdFNwYW4gYmVjYXVzZSBnZXRSb290U3BhbiByZXR1cm5zIGEgc3Bhbiwgbm90IGEgdHJhbnNhY3Rpb24KICAgIC8vIEFsc28sIHRoaXMgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZCBhbnl3YXkuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHJldHVybiBzcGFuICYmIHNwYW4udHJhbnNhY3Rpb247CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRTZXNzaW9uKHNlc3Npb24pIHsKICAgIGlmICghc2Vzc2lvbikgewogICAgICBkZWxldGUgdGhpcy5fc2Vzc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3Nlc3Npb24gPSBzZXNzaW9uOwogICAgfQogICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0U2Vzc2lvbigpIHsKICAgIHJldHVybiB0aGlzLl9zZXNzaW9uOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgdXBkYXRlKGNhcHR1cmVDb250ZXh0KSB7CiAgICBpZiAoIWNhcHR1cmVDb250ZXh0KSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNvbnN0IHNjb3BlVG9NZXJnZSA9IHR5cGVvZiBjYXB0dXJlQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJyA/IGNhcHR1cmVDb250ZXh0KHRoaXMpIDogY2FwdHVyZUNvbnRleHQ7CgogICAgaWYgKHNjb3BlVG9NZXJnZSBpbnN0YW5jZW9mIFNjb3BlKSB7CiAgICAgIGNvbnN0IHNjb3BlRGF0YSA9IHNjb3BlVG9NZXJnZS5nZXRTY29wZURhdGEoKTsKCiAgICAgIHRoaXMuX3RhZ3MgPSB7IC4uLnRoaXMuX3RhZ3MsIC4uLnNjb3BlRGF0YS50YWdzIH07CiAgICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgLi4uc2NvcGVEYXRhLmV4dHJhIH07CiAgICAgIHRoaXMuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cywgLi4uc2NvcGVEYXRhLmNvbnRleHRzIH07CiAgICAgIGlmIChzY29wZURhdGEudXNlciAmJiBPYmplY3Qua2V5cyhzY29wZURhdGEudXNlcikubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5fdXNlciA9IHNjb3BlRGF0YS51c2VyOwogICAgICB9CiAgICAgIGlmIChzY29wZURhdGEubGV2ZWwpIHsKICAgICAgICB0aGlzLl9sZXZlbCA9IHNjb3BlRGF0YS5sZXZlbDsKICAgICAgfQogICAgICBpZiAoc2NvcGVEYXRhLmZpbmdlcnByaW50Lmxlbmd0aCkgewogICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gc2NvcGVEYXRhLmZpbmdlcnByaW50OwogICAgICB9CiAgICAgIGlmIChzY29wZVRvTWVyZ2UuZ2V0UmVxdWVzdFNlc3Npb24oKSkgewogICAgICAgIHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gc2NvcGVUb01lcmdlLmdldFJlcXVlc3RTZXNzaW9uKCk7CiAgICAgIH0KICAgICAgaWYgKHNjb3BlRGF0YS5wcm9wYWdhdGlvbkNvbnRleHQpIHsKICAgICAgICB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHQgPSBzY29wZURhdGEucHJvcGFnYXRpb25Db250ZXh0OwogICAgICB9CiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qoc2NvcGVUb01lcmdlKSkgewogICAgICBjb25zdCBzY29wZUNvbnRleHQgPSBjYXB0dXJlQ29udGV4dCA7CiAgICAgIHRoaXMuX3RhZ3MgPSB7IC4uLnRoaXMuX3RhZ3MsIC4uLnNjb3BlQ29udGV4dC50YWdzIH07CiAgICAgIHRoaXMuX2V4dHJhID0geyAuLi50aGlzLl9leHRyYSwgLi4uc2NvcGVDb250ZXh0LmV4dHJhIH07CiAgICAgIHRoaXMuX2NvbnRleHRzID0geyAuLi50aGlzLl9jb250ZXh0cywgLi4uc2NvcGVDb250ZXh0LmNvbnRleHRzIH07CiAgICAgIGlmIChzY29wZUNvbnRleHQudXNlcikgewogICAgICAgIHRoaXMuX3VzZXIgPSBzY29wZUNvbnRleHQudXNlcjsKICAgICAgfQogICAgICBpZiAoc2NvcGVDb250ZXh0LmxldmVsKSB7CiAgICAgICAgdGhpcy5fbGV2ZWwgPSBzY29wZUNvbnRleHQubGV2ZWw7CiAgICAgIH0KICAgICAgaWYgKHNjb3BlQ29udGV4dC5maW5nZXJwcmludCkgewogICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gc2NvcGVDb250ZXh0LmZpbmdlcnByaW50OwogICAgICB9CiAgICAgIGlmIChzY29wZUNvbnRleHQucmVxdWVzdFNlc3Npb24pIHsKICAgICAgICB0aGlzLl9yZXF1ZXN0U2Vzc2lvbiA9IHNjb3BlQ29udGV4dC5yZXF1ZXN0U2Vzc2lvbjsKICAgICAgfQogICAgICBpZiAoc2NvcGVDb250ZXh0LnByb3BhZ2F0aW9uQ29udGV4dCkgewogICAgICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IHNjb3BlQ29udGV4dC5wcm9wYWdhdGlvbkNvbnRleHQ7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGNsZWFyKCkgewogICAgdGhpcy5fYnJlYWRjcnVtYnMgPSBbXTsKICAgIHRoaXMuX3RhZ3MgPSB7fTsKICAgIHRoaXMuX2V4dHJhID0ge307CiAgICB0aGlzLl91c2VyID0ge307CiAgICB0aGlzLl9jb250ZXh0cyA9IHt9OwogICAgdGhpcy5fbGV2ZWwgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl90cmFuc2FjdGlvbk5hbWUgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9maW5nZXJwcmludCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gdW5kZWZpbmVkOwogICAgdGhpcy5fc3BhbiA9IHVuZGVmaW5lZDsKICAgIHRoaXMuX3Nlc3Npb24gPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwogICAgdGhpcy5fYXR0YWNobWVudHMgPSBbXTsKICAgIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dCA9IGdlbmVyYXRlUHJvcGFnYXRpb25Db250ZXh0KCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGFkZEJyZWFkY3J1bWIoYnJlYWRjcnVtYiwgbWF4QnJlYWRjcnVtYnMpIHsKICAgIGNvbnN0IG1heENydW1icyA9IHR5cGVvZiBtYXhCcmVhZGNydW1icyA9PT0gJ251bWJlcicgPyBtYXhCcmVhZGNydW1icyA6IERFRkFVTFRfTUFYX0JSRUFEQ1JVTUJTOwoKICAgIC8vIE5vIGRhdGEgaGFzIGJlZW4gY2hhbmdlZCwgc28gZG9uJ3Qgbm90aWZ5IHNjb3BlIGxpc3RlbmVycwogICAgaWYgKG1heENydW1icyA8PSAwKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNvbnN0IG1lcmdlZEJyZWFkY3J1bWIgPSB7CiAgICAgIHRpbWVzdGFtcDogZGF0ZVRpbWVzdGFtcEluU2Vjb25kcygpLAogICAgICAuLi5icmVhZGNydW1iLAogICAgfTsKCiAgICBjb25zdCBicmVhZGNydW1icyA9IHRoaXMuX2JyZWFkY3J1bWJzOwogICAgYnJlYWRjcnVtYnMucHVzaChtZXJnZWRCcmVhZGNydW1iKTsKICAgIHRoaXMuX2JyZWFkY3J1bWJzID0gYnJlYWRjcnVtYnMubGVuZ3RoID4gbWF4Q3J1bWJzID8gYnJlYWRjcnVtYnMuc2xpY2UoLW1heENydW1icykgOiBicmVhZGNydW1iczsKCiAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0TGFzdEJyZWFkY3J1bWIoKSB7CiAgICByZXR1cm4gdGhpcy5fYnJlYWRjcnVtYnNbdGhpcy5fYnJlYWRjcnVtYnMubGVuZ3RoIC0gMV07CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBjbGVhckJyZWFkY3J1bWJzKCkgewogICAgdGhpcy5fYnJlYWRjcnVtYnMgPSBbXTsKICAgIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgIGFkZEF0dGFjaG1lbnQoYXR0YWNobWVudCkgewogICAgdGhpcy5fYXR0YWNobWVudHMucHVzaChhdHRhY2htZW50KTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYGdldFNjb3BlRGF0YSgpYCBpbnN0ZWFkLgogICAqLwogICBnZXRBdHRhY2htZW50cygpIHsKICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldFNjb3BlRGF0YSgpOwoKICAgIHJldHVybiBkYXRhLmF0dGFjaG1lbnRzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgY2xlYXJBdHRhY2htZW50cygpIHsKICAgIHRoaXMuX2F0dGFjaG1lbnRzID0gW107CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8qKiBAaW5oZXJpdERvYyAqLwogICBnZXRTY29wZURhdGEoKSB7CiAgICBjb25zdCB7CiAgICAgIF9icmVhZGNydW1icywKICAgICAgX2F0dGFjaG1lbnRzLAogICAgICBfY29udGV4dHMsCiAgICAgIF90YWdzLAogICAgICBfZXh0cmEsCiAgICAgIF91c2VyLAogICAgICBfbGV2ZWwsCiAgICAgIF9maW5nZXJwcmludCwKICAgICAgX2V2ZW50UHJvY2Vzc29ycywKICAgICAgX3Byb3BhZ2F0aW9uQ29udGV4dCwKICAgICAgX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSwKICAgICAgX3RyYW5zYWN0aW9uTmFtZSwKICAgICAgX3NwYW4sCiAgICB9ID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogX2JyZWFkY3J1bWJzLAogICAgICBhdHRhY2htZW50czogX2F0dGFjaG1lbnRzLAogICAgICBjb250ZXh0czogX2NvbnRleHRzLAogICAgICB0YWdzOiBfdGFncywKICAgICAgZXh0cmE6IF9leHRyYSwKICAgICAgdXNlcjogX3VzZXIsCiAgICAgIGxldmVsOiBfbGV2ZWwsCiAgICAgIGZpbmdlcnByaW50OiBfZmluZ2VycHJpbnQgfHwgW10sCiAgICAgIGV2ZW50UHJvY2Vzc29yczogX2V2ZW50UHJvY2Vzc29ycywKICAgICAgcHJvcGFnYXRpb25Db250ZXh0OiBfcHJvcGFnYXRpb25Db250ZXh0LAogICAgICBzZGtQcm9jZXNzaW5nTWV0YWRhdGE6IF9zZGtQcm9jZXNzaW5nTWV0YWRhdGEsCiAgICAgIHRyYW5zYWN0aW9uTmFtZTogX3RyYW5zYWN0aW9uTmFtZSwKICAgICAgc3BhbjogX3NwYW4sCiAgICB9OwogIH0KCiAgLyoqCiAgICogQXBwbGllcyBkYXRhIGZyb20gdGhlIHNjb3BlIHRvIHRoZSBldmVudCBhbmQgcnVucyBhbGwgZXZlbnQgcHJvY2Vzc29ycyBvbiBpdC4KICAgKgogICAqIEBwYXJhbSBldmVudCBFdmVudAogICAqIEBwYXJhbSBoaW50IE9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9yaWdpbmFsIGV4Y2VwdGlvbiwgZm9yIHVzZSBieSB0aGUgZXZlbnQgcHJvY2Vzc29ycy4KICAgKiBAaGlkZGVuCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBhcHBseVNjb3BlRGF0YVRvRXZlbnQoKWAgZGlyZWN0bHkKICAgKi8KICAgYXBwbHlUb0V2ZW50KAogICAgZXZlbnQsCiAgICBoaW50ID0ge30sCiAgICBhZGRpdGlvbmFsRXZlbnRQcm9jZXNzb3JzID0gW10sCiAgKSB7CiAgICBhcHBseVNjb3BlRGF0YVRvRXZlbnQoZXZlbnQsIHRoaXMuZ2V0U2NvcGVEYXRhKCkpOwoKICAgIC8vIFRPRE8gKHY4KTogVXBkYXRlIHRoaXMgb3JkZXIgdG8gYmU6IEdsb2JhbCA+IENsaWVudCA+IFNjb3BlCiAgICBjb25zdCBldmVudFByb2Nlc3NvcnMgPSBbCiAgICAgIC4uLmFkZGl0aW9uYWxFdmVudFByb2Nlc3NvcnMsCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICAuLi5nZXRHbG9iYWxFdmVudFByb2Nlc3NvcnMoKSwKICAgICAgLi4udGhpcy5fZXZlbnRQcm9jZXNzb3JzLAogICAgXTsKCiAgICByZXR1cm4gbm90aWZ5RXZlbnRQcm9jZXNzb3JzKGV2ZW50UHJvY2Vzc29ycywgZXZlbnQsIGhpbnQpOwogIH0KCiAgLyoqCiAgICogQWRkIGRhdGEgd2hpY2ggd2lsbCBiZSBhY2Nlc3NpYmxlIGR1cmluZyBldmVudCBwcm9jZXNzaW5nIGJ1dCB3b24ndCBnZXQgc2VudCB0byBTZW50cnkKICAgKi8KICAgc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKG5ld0RhdGEpIHsKICAgIHRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YSA9IHsgLi4udGhpcy5fc2RrUHJvY2Vzc2luZ01ldGFkYXRhLCAuLi5uZXdEYXRhIH07CgogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwogICBzZXRQcm9wYWdhdGlvbkNvbnRleHQoY29udGV4dCkgewogICAgdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0ID0gY29udGV4dDsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKi8KICAgZ2V0UHJvcGFnYXRpb25Db250ZXh0KCkgewogICAgcmV0dXJuIHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dDsKICB9CgogIC8qKgogICAqIENhcHR1cmUgYW4gZXhjZXB0aW9uIGZvciB0aGlzIHNjb3BlLgogICAqCiAgICogQHBhcmFtIGV4Y2VwdGlvbiBUaGUgZXhjZXB0aW9uIHRvIGNhcHR1cmUuCiAgICogQHBhcmFtIGhpbnQgT3B0aW5hbCBhZGRpdGlvbmFsIGRhdGEgdG8gYXR0YWNoIHRvIHRoZSBTZW50cnkgZXZlbnQuCiAgICogQHJldHVybnMgdGhlIGlkIG9mIHRoZSBjYXB0dXJlZCBTZW50cnkgZXZlbnQuCiAgICovCiAgIGNhcHR1cmVFeGNlcHRpb24oZXhjZXB0aW9uLCBoaW50KSB7CiAgICBjb25zdCBldmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCk7CgogICAgaWYgKCF0aGlzLl9jbGllbnQpIHsKICAgICAgbG9nZ2VyLndhcm4oJ05vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBleGNlcHRpb24hJyk7CiAgICAgIHJldHVybiBldmVudElkOwogICAgfQoKICAgIGNvbnN0IHN5bnRoZXRpY0V4Y2VwdGlvbiA9IG5ldyBFcnJvcignU2VudHJ5IHN5bnRoZXRpY0V4Y2VwdGlvbicpOwoKICAgIHRoaXMuX2NsaWVudC5jYXB0dXJlRXhjZXB0aW9uKAogICAgICBleGNlcHRpb24sCiAgICAgIHsKICAgICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogZXhjZXB0aW9uLAogICAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgICAuLi5oaW50LAogICAgICAgIGV2ZW50X2lkOiBldmVudElkLAogICAgICB9LAogICAgICB0aGlzLAogICAgKTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIENhcHR1cmUgYSBtZXNzYWdlIGZvciB0aGlzIHNjb3BlLgogICAqCiAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gY2FwdHVyZS4KICAgKiBAcGFyYW0gbGV2ZWwgQW4gb3B0aW9uYWwgc2V2ZXJpdHkgbGV2ZWwgdG8gcmVwb3J0IHRoZSBtZXNzYWdlIHdpdGguCiAgICogQHBhcmFtIGhpbnQgT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhIHRvIGF0dGFjaCB0byB0aGUgU2VudHJ5IGV2ZW50LgogICAqIEByZXR1cm5zIHRoZSBpZCBvZiB0aGUgY2FwdHVyZWQgbWVzc2FnZS4KICAgKi8KICAgY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKTsKCiAgICBpZiAoIXRoaXMuX2NsaWVudCkgewogICAgICBsb2dnZXIud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIG1lc3NhZ2UhJyk7CiAgICAgIHJldHVybiBldmVudElkOwogICAgfQoKICAgIGNvbnN0IHN5bnRoZXRpY0V4Y2VwdGlvbiA9IG5ldyBFcnJvcihtZXNzYWdlKTsKCiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZU1lc3NhZ2UoCiAgICAgIG1lc3NhZ2UsCiAgICAgIGxldmVsLAogICAgICB7CiAgICAgICAgb3JpZ2luYWxFeGNlcHRpb246IG1lc3NhZ2UsCiAgICAgICAgc3ludGhldGljRXhjZXB0aW9uLAogICAgICAgIC4uLmhpbnQsCiAgICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICAgIH0sCiAgICAgIHRoaXMsCiAgICApOwoKICAgIHJldHVybiBldmVudElkOwogIH0KCiAgLyoqCiAgICogQ2FwdHVyZXMgYSBtYW51YWxseSBjcmVhdGVkIGV2ZW50IGZvciB0aGlzIHNjb3BlIGFuZCBzZW5kcyBpdCB0byBTZW50cnkuCiAgICoKICAgKiBAcGFyYW0gZXhjZXB0aW9uIFRoZSBldmVudCB0byBjYXB0dXJlLgogICAqIEBwYXJhbSBoaW50IE9wdGlvbmFsIGFkZGl0aW9uYWwgZGF0YSB0byBhdHRhY2ggdG8gdGhlIFNlbnRyeSBldmVudC4KICAgKiBAcmV0dXJucyB0aGUgaWQgb2YgdGhlIGNhcHR1cmVkIGV2ZW50LgogICAqLwogICBjYXB0dXJlRXZlbnQoZXZlbnQsIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKTsKCiAgICBpZiAoIXRoaXMuX2NsaWVudCkgewogICAgICBsb2dnZXIud2FybignTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50IScpOwogICAgICByZXR1cm4gZXZlbnRJZDsKICAgIH0KCiAgICB0aGlzLl9jbGllbnQuY2FwdHVyZUV2ZW50KGV2ZW50LCB7IC4uLmhpbnQsIGV2ZW50X2lkOiBldmVudElkIH0sIHRoaXMpOwoKICAgIHJldHVybiBldmVudElkOwogIH0KCiAgLyoqCiAgICogVGhpcyB3aWxsIGJlIGNhbGxlZCBvbiBldmVyeSBzZXQgY2FsbC4KICAgKi8KICAgX25vdGlmeVNjb3BlTGlzdGVuZXJzKCkgewogICAgLy8gV2UgbmVlZCB0aGlzIGNoZWNrIGZvciB0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnMgdG8gYmUgYWJsZSB0byB3b3JrIG9uIHNjb3BlIGR1cmluZyB1cGRhdGVzCiAgICAvLyBJZiB0aGlzIGNoZWNrIGlzIG5vdCBoZXJlIHdlJ2xsIHByb2R1Y2UgZW5kbGVzcyByZWN1cnNpb24gd2hlbiBzb21ldGhpbmcgaXMgZG9uZSB3aXRoIHRoZSBzY29wZQogICAgLy8gZHVyaW5nIHRoZSBjYWxsYmFjay4KICAgIGlmICghdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzKSB7CiAgICAgIHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9IHRydWU7CiAgICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gewogICAgICAgIGNhbGxiYWNrKHRoaXMpOwogICAgICB9KTsKICAgICAgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzID0gZmFsc2U7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBnZW5lcmF0ZVByb3BhZ2F0aW9uQ29udGV4dCgpIHsKICByZXR1cm4gewogICAgdHJhY2VJZDogdXVpZDQoKSwKICAgIHNwYW5JZDogdXVpZDQoKS5zdWJzdHJpbmcoMTYpLAogIH07Cn0KCmNvbnN0IFNES19WRVJTSU9OID0gJzcuMTEwLjAnOwoKLyoqCiAqIEFQSSBjb21wYXRpYmlsaXR5IHZlcnNpb24gb2YgdGhpcyBodWIuCiAqCiAqIFdBUk5JTkc6IFRoaXMgbnVtYmVyIHNob3VsZCBvbmx5IGJlIGluY3JlYXNlZCB3aGVuIHRoZSBnbG9iYWwgaW50ZXJmYWNlCiAqIGNoYW5nZXMgYW5kIG5ldyBtZXRob2RzIGFyZSBpbnRyb2R1Y2VkLgogKgogKiBAaGlkZGVuCiAqLwpjb25zdCBBUElfVkVSU0lPTiA9IHBhcnNlRmxvYXQoU0RLX1ZFUlNJT04pOwoKLyoqCiAqIERlZmF1bHQgbWF4aW11bSBudW1iZXIgb2YgYnJlYWRjcnVtYnMgYWRkZWQgdG8gYW4gZXZlbnQuIENhbiBiZSBvdmVyd3JpdHRlbgogKiB3aXRoIHtAbGluayBPcHRpb25zLm1heEJyZWFkY3J1bWJzfS4KICovCmNvbnN0IERFRkFVTFRfQlJFQURDUlVNQlMgPSAxMDA7CgovKioKICogQGRlcHJlY2F0ZWQgVGhlIGBIdWJgIGNsYXNzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2ZXJzaW9uIDggb2YgdGhlIFNESyBpbiBmYXZvdXIgb2YgYFNjb3BlYCBhbmQgYENsaWVudGAgb2JqZWN0cy4KICoKICogSWYgeW91IHByZXZpb3VzbHkgdXNlZCB0aGUgYEh1YmAgY2xhc3MgZGlyZWN0bHksIHJlcGxhY2UgaXQgd2l0aCBgU2NvcGVgIGFuZCBgQ2xpZW50YCBvYmplY3RzLiBNb3JlIGluZm9ybWF0aW9uOgogKiAtIFtNdWx0aXBsZSBTZW50cnkgSW5zdGFuY2VzXShodHRwczovL2RvY3Muc2VudHJ5LmlvL3BsYXRmb3Jtcy9qYXZhc2NyaXB0L2Jlc3QtcHJhY3RpY2VzL211bHRpcGxlLXNlbnRyeS1pbnN0YW5jZXMvKQogKiAtIFtCcm93c2VyIEV4dGVuc2lvbnNdKGh0dHBzOi8vZG9jcy5zZW50cnkuaW8vcGxhdGZvcm1zL2phdmFzY3JpcHQvYmVzdC1wcmFjdGljZXMvYnJvd3Nlci1leHRlbnNpb25zLykKICoKICogU29tZSBvZiBvdXIgQVBJcyBhcmUgdHlwZWQgd2l0aCB0aGUgSHViIGNsYXNzIGluc3RlYWQgb2YgdGhlIGludGVyZmFjZSAoZS5nLiBgZ2V0Q3VycmVudEh1YmApLiBNb3N0IG9mIHRoZW0gYXJlIGRlcHJlY2F0ZWQKICogdGhlbXNlbHZlcyBhbmQgd2lsbCBhbHNvIGJlIHJlbW92ZWQgaW4gdmVyc2lvbiA4LiBNb3JlIGluZm9ybWF0aW9uOgogKiAtIFtNaWdyYXRpb24gR3VpZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvYmxvYi9kZXZlbG9wL01JR1JBVElPTi5tZCNkZXByZWNhdGUtaHViKQogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmNsYXNzIEh1YiAgewogIC8qKiBJcyBhIHtAbGluayBMYXllcn1bXSBjb250YWluaW5nIHRoZSBjbGllbnQgYW5kIHNjb3BlICovCgogIC8qKiBDb250YWlucyB0aGUgbGFzdCBldmVudCBpZCBvZiBhIGNhcHR1cmVkIGV2ZW50LiAgKi8KCiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgaHViLCB3aWxsIHB1c2ggb25lIHtAbGluayBMYXllcn0gaW50byB0aGUKICAgKiBpbnRlcm5hbCBzdGFjayBvbiBjcmVhdGlvbi4KICAgKgogICAqIEBwYXJhbSBjbGllbnQgYm91bmQgdG8gdGhlIGh1Yi4KICAgKiBAcGFyYW0gc2NvcGUgYm91bmQgdG8gdGhlIGh1Yi4KICAgKiBAcGFyYW0gdmVyc2lvbiBudW1iZXIsIGhpZ2hlciBudW1iZXIgbWVhbnMgaGlnaGVyIHByaW9yaXR5LgogICAqCiAgICogQGRlcHJlY2F0ZWQgSW5zdGFudGlhdGlvbiBvZiBIdWIgb2JqZWN0cyBpcyBkZXByZWNhdGVkIGFuZCB0aGUgY29uc3RydWN0b3Igd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gOCBvZiB0aGUgU0RLLgogICAqCiAgICogSWYgeW91IGFyZSBjdXJyZW50bHkgdXNpbmcgdGhlIEh1YiBmb3IgbXVsdGktY2xpZW50IHVzZSBsaWtlIHNvOgogICAqCiAgICogYGBgCiAgICogLy8gT0xECiAgICogY29uc3QgaHViID0gbmV3IEh1YigpOwogICAqIGh1Yi5iaW5kQ2xpZW50KGNsaWVudCk7CiAgICogbWFrZU1haW4oaHViKQogICAqIGBgYAogICAqCiAgICogaW5zdGVhZCBpbml0aWFsaXplIHRoZSBjbGllbnQgYXMgZm9sbG93czoKICAgKgogICAqIGBgYAogICAqIC8vIE5FVwogICAqIFNlbnRyeS53aXRoSXNvbGF0aW9uU2NvcGUoKCkgPT4gewogICAqICAgIFNlbnRyeS5zZXRDdXJyZW50Q2xpZW50KGNsaWVudCk7CiAgICogICAgY2xpZW50LmluaXQoKTsKICAgKiB9KTsKICAgKiBgYGAKICAgKgogICAqIElmIHlvdSBhcmUgdXNpbmcgdGhlIEh1YiB0byBjYXB0dXJlIGV2ZW50cyBsaWtlIHNvOgogICAqCiAgICogYGBgCiAgICogLy8gT0xECiAgICogY29uc3QgY2xpZW50ID0gbmV3IENsaWVudCgpOwogICAqIGNvbnN0IGh1YiA9IG5ldyBIdWIoY2xpZW50KTsKICAgKiBodWIuY2FwdHVyZUV4Y2VwdGlvbigpCiAgICogYGBgCiAgICoKICAgKiBpbnN0ZWFkIGNhcHR1cmUgaXNvbGF0ZWQgZXZlbnRzIGFzIGZvbGxvd3M6CiAgICoKICAgKiBgYGAKICAgKiAvLyBORVcKICAgKiBjb25zdCBjbGllbnQgPSBuZXcgQ2xpZW50KCk7CiAgICogY29uc3Qgc2NvcGUgPSBuZXcgU2NvcGUoKTsKICAgKiBzY29wZS5zZXRDbGllbnQoY2xpZW50KTsKICAgKiBzY29wZS5jYXB0dXJlRXhjZXB0aW9uKCk7CiAgICogYGBgCiAgICovCiAgIGNvbnN0cnVjdG9yKAogICAgY2xpZW50LAogICAgc2NvcGUsCiAgICBpc29sYXRpb25TY29wZSwKICAgICAgX3ZlcnNpb24gPSBBUElfVkVSU0lPTiwKICApIHt0aGlzLl92ZXJzaW9uID0gX3ZlcnNpb247CiAgICBsZXQgYXNzaWduZWRTY29wZTsKICAgIGlmICghc2NvcGUpIHsKICAgICAgYXNzaWduZWRTY29wZSA9IG5ldyBTY29wZSgpOwogICAgICBhc3NpZ25lZFNjb3BlLnNldENsaWVudChjbGllbnQpOwogICAgfSBlbHNlIHsKICAgICAgYXNzaWduZWRTY29wZSA9IHNjb3BlOwogICAgfQoKICAgIGxldCBhc3NpZ25lZElzb2xhdGlvblNjb3BlOwogICAgaWYgKCFpc29sYXRpb25TY29wZSkgewogICAgICBhc3NpZ25lZElzb2xhdGlvblNjb3BlID0gbmV3IFNjb3BlKCk7CiAgICAgIGFzc2lnbmVkSXNvbGF0aW9uU2NvcGUuc2V0Q2xpZW50KGNsaWVudCk7CiAgICB9IGVsc2UgewogICAgICBhc3NpZ25lZElzb2xhdGlvblNjb3BlID0gaXNvbGF0aW9uU2NvcGU7CiAgICB9CgogICAgdGhpcy5fc3RhY2sgPSBbeyBzY29wZTogYXNzaWduZWRTY29wZSB9XTsKCiAgICBpZiAoY2xpZW50KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICB0aGlzLmJpbmRDbGllbnQoY2xpZW50KTsKICAgIH0KCiAgICB0aGlzLl9pc29sYXRpb25TY29wZSA9IGFzc2lnbmVkSXNvbGF0aW9uU2NvcGU7CiAgfQoKICAvKioKICAgKiBDaGVja3MgaWYgdGhpcyBodWIncyB2ZXJzaW9uIGlzIG9sZGVyIHRoYW4gdGhlIGdpdmVuIHZlcnNpb24uCiAgICoKICAgKiBAcGFyYW0gdmVyc2lvbiBBIHZlcnNpb24gbnVtYmVyIHRvIGNvbXBhcmUgdG8uCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBnaXZlbiB2ZXJzaW9uIGlzIG5ld2VyOyBvdGhlcndpc2UgZmFsc2UuCiAgICoKICAgKiBAZGVwcmVjYXRlZCBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICAgKi8KICAgaXNPbGRlclRoYW4odmVyc2lvbikgewogICAgcmV0dXJuIHRoaXMuX3ZlcnNpb24gPCB2ZXJzaW9uOwogIH0KCiAgLyoqCiAgICogVGhpcyBiaW5kcyB0aGUgZ2l2ZW4gY2xpZW50IHRvIHRoZSBjdXJyZW50IHNjb3BlLgogICAqIEBwYXJhbSBjbGllbnQgQW4gU0RLIGNsaWVudCAoY2xpZW50KSBpbnN0YW5jZS4KICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgaW5pdEFuZEJpbmQoKWAgZGlyZWN0bHksIG9yIGBzZXRDdXJyZW50Q2xpZW50KClgIGFuZC9vciBgY2xpZW50LmluaXQoKWAgaW5zdGVhZC4KICAgKi8KICAgYmluZENsaWVudChjbGllbnQpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgdG9wID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgdG9wLmNsaWVudCA9IGNsaWVudDsKICAgIHRvcC5zY29wZS5zZXRDbGllbnQoY2xpZW50KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgaWYgKGNsaWVudCAmJiBjbGllbnQuc2V0dXBJbnRlZ3JhdGlvbnMpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIGNsaWVudC5zZXR1cEludGVncmF0aW9ucygpOwogICAgfQogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgd2l0aFNjb3BlYCBpbnN0ZWFkLgogICAqLwogICBwdXNoU2NvcGUoKSB7CiAgICAvLyBXZSB3YW50IHRvIGNsb25lIHRoZSBjb250ZW50IG9mIHByZXYgc2NvcGUKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3Qgc2NvcGUgPSB0aGlzLmdldFNjb3BlKCkuY2xvbmUoKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTdGFjaygpLnB1c2goewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgY2xpZW50OiB0aGlzLmdldENsaWVudCgpLAogICAgICBzY29wZSwKICAgIH0pOwogICAgcmV0dXJuIHNjb3BlOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgd2l0aFNjb3BlYCBpbnN0ZWFkLgogICAqLwogICBwb3BTY29wZSgpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgaWYgKHRoaXMuZ2V0U3RhY2soKS5sZW5ndGggPD0gMSkgcmV0dXJuIGZhbHNlOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gISF0aGlzLmdldFN0YWNrKCkucG9wKCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkud2l0aFNjb3BlKClgIGluc3RlYWQuCiAgICovCiAgIHdpdGhTY29wZShjYWxsYmFjaykgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBzY29wZSA9IHRoaXMucHVzaFNjb3BlKCk7CgogICAgbGV0IG1heWJlUHJvbWlzZVJlc3VsdDsKICAgIHRyeSB7CiAgICAgIG1heWJlUHJvbWlzZVJlc3VsdCA9IGNhbGxiYWNrKHNjb3BlKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIHRoaXMucG9wU2NvcGUoKTsKICAgICAgdGhyb3cgZTsKICAgIH0KCiAgICBpZiAoaXNUaGVuYWJsZShtYXliZVByb21pc2VSZXN1bHQpKSB7CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBpc1RoZW5hYmxlIHJldHVybnMgdGhlIHdyb25nIHR5cGUKICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZVJlc3VsdC50aGVuKAogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgICAgIHRoaXMucG9wU2NvcGUoKTsKICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfSwKICAgICAgICBlID0+IHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICAgICAgdGhpcy5wb3BTY29wZSgpOwogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9LAogICAgICApOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5wb3BTY29wZSgpOwogICAgcmV0dXJuIG1heWJlUHJvbWlzZVJlc3VsdDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5nZXRDbGllbnQoKWAgaW5zdGVhZC4KICAgKi8KICAgZ2V0Q2xpZW50KCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLmNsaWVudCA7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzY29wZSBvZiB0aGUgdG9wIHN0YWNrLgogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuZ2V0Q3VycmVudFNjb3BlKClgIGluc3RlYWQuCiAgICovCiAgIGdldFNjb3BlKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICByZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLnNjb3BlOwogIH0KCiAgLyoqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuZ2V0SXNvbGF0aW9uU2NvcGUoKWAgaW5zdGVhZC4KICAgKi8KICAgZ2V0SXNvbGF0aW9uU2NvcGUoKSB7CiAgICByZXR1cm4gdGhpcy5faXNvbGF0aW9uU2NvcGU7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzY29wZSBzdGFjayBmb3IgZG9tYWlucyBvciB0aGUgcHJvY2Vzcy4KICAgKiBAZGVwcmVjYXRlZCBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4KICAgKi8KICAgZ2V0U3RhY2soKSB7CiAgICByZXR1cm4gdGhpcy5fc3RhY2s7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSB0b3Btb3N0IHNjb3BlIGxheWVyIGluIHRoZSBvcmRlciBkb21haW4gPiBsb2NhbCA+IHByb2Nlc3MuCiAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguCiAgICovCiAgIGdldFN0YWNrVG9wKCkgewogICAgcmV0dXJuIHRoaXMuX3N0YWNrW3RoaXMuX3N0YWNrLmxlbmd0aCAtIDFdOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZUV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQpIHsKICAgIGNvbnN0IGV2ZW50SWQgPSAodGhpcy5fbGFzdEV2ZW50SWQgPSBoaW50ICYmIGhpbnQuZXZlbnRfaWQgPyBoaW50LmV2ZW50X2lkIDogdXVpZDQoKSk7CiAgICBjb25zdCBzeW50aGV0aWNFeGNlcHRpb24gPSBuZXcgRXJyb3IoJ1NlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24nKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLmNhcHR1cmVFeGNlcHRpb24oZXhjZXB0aW9uLCB7CiAgICAgIG9yaWdpbmFsRXhjZXB0aW9uOiBleGNlcHRpb24sCiAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgLi4uaGludCwKICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICB9KTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgIGBTZW50cnkuY2FwdHVyZU1lc3NhZ2UoKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZU1lc3NhZ2UoCiAgICBtZXNzYWdlLAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBsZXZlbCwKICAgIGhpbnQsCiAgKSB7CiAgICBjb25zdCBldmVudElkID0gKHRoaXMuX2xhc3RFdmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCkpOwogICAgY29uc3Qgc3ludGhldGljRXhjZXB0aW9uID0gbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuY2FwdHVyZU1lc3NhZ2UobWVzc2FnZSwgbGV2ZWwsIHsKICAgICAgb3JpZ2luYWxFeGNlcHRpb246IG1lc3NhZ2UsCiAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbiwKICAgICAgLi4uaGludCwKICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsCiAgICB9KTsKCiAgICByZXR1cm4gZXZlbnRJZDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5jYXB0dXJlRXZlbnQoKWAgaW5zdGVhZC4KICAgKi8KICAgY2FwdHVyZUV2ZW50KGV2ZW50LCBoaW50KSB7CiAgICBjb25zdCBldmVudElkID0gaGludCAmJiBoaW50LmV2ZW50X2lkID8gaGludC5ldmVudF9pZCA6IHV1aWQ0KCk7CiAgICBpZiAoIWV2ZW50LnR5cGUpIHsKICAgICAgdGhpcy5fbGFzdEV2ZW50SWQgPSBldmVudElkOwogICAgfQogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuY2FwdHVyZUV2ZW50KGV2ZW50LCB7IC4uLmhpbnQsIGV2ZW50X2lkOiBldmVudElkIH0pOwogICAgcmV0dXJuIGV2ZW50SWQ7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguCiAgICovCiAgIGxhc3RFdmVudElkKCkgewogICAgcmV0dXJuIHRoaXMuX2xhc3RFdmVudElkOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKgogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmFkZEJyZWFkY3J1bWIoKWAgaW5zdGVhZC4KICAgKi8KICAgYWRkQnJlYWRjcnVtYihicmVhZGNydW1iLCBoaW50KSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IHsgc2NvcGUsIGNsaWVudCB9ID0gdGhpcy5nZXRTdGFja1RvcCgpOwoKICAgIGlmICghY2xpZW50KSByZXR1cm47CgogICAgY29uc3QgeyBiZWZvcmVCcmVhZGNydW1iID0gbnVsbCwgbWF4QnJlYWRjcnVtYnMgPSBERUZBVUxUX0JSRUFEQ1JVTUJTIH0gPQogICAgICAoY2xpZW50LmdldE9wdGlvbnMgJiYgY2xpZW50LmdldE9wdGlvbnMoKSkgfHwge307CgogICAgaWYgKG1heEJyZWFkY3J1bWJzIDw9IDApIHJldHVybjsKCiAgICBjb25zdCB0aW1lc3RhbXAgPSBkYXRlVGltZXN0YW1wSW5TZWNvbmRzKCk7CiAgICBjb25zdCBtZXJnZWRCcmVhZGNydW1iID0geyB0aW1lc3RhbXAsIC4uLmJyZWFkY3J1bWIgfTsKICAgIGNvbnN0IGZpbmFsQnJlYWRjcnVtYiA9IGJlZm9yZUJyZWFkY3J1bWIKICAgICAgPyAoY29uc29sZVNhbmRib3goKCkgPT4gYmVmb3JlQnJlYWRjcnVtYihtZXJnZWRCcmVhZGNydW1iLCBoaW50KSkgKQogICAgICA6IG1lcmdlZEJyZWFkY3J1bWI7CgogICAgaWYgKGZpbmFsQnJlYWRjcnVtYiA9PT0gbnVsbCkgcmV0dXJuOwoKICAgIGlmIChjbGllbnQuZW1pdCkgewogICAgICBjbGllbnQuZW1pdCgnYmVmb3JlQWRkQnJlYWRjcnVtYicsIGZpbmFsQnJlYWRjcnVtYiwgaGludCk7CiAgICB9CgogICAgLy8gVE9ETyh2OCk6IEkga25vdyB0aGlzIGNvbW1lbnQgZG9lc24ndCBtYWtlIG11Y2ggc2Vuc2UgYmVjYXVzZSB0aGUgaHViIHdpbGwgYmUgZGVwcmVjYXRlZCBidXQgSSBzdGlsbCB3YW50ZWQgdG8KICAgIC8vIHdyaXRlIGl0IGRvd24uIEluIHRoZW9yeSwgd2Ugd291bGQgaGF2ZSB0byBhZGQgdGhlIGJyZWFkY3J1bWJzIHRvIHRoZSBpc29sYXRpb24gc2NvcGUgaGVyZSwgaG93ZXZlciwgdGhhdCB3b3VsZAogICAgLy8gZHVwbGljYXRlIGFsbCBvZiB0aGUgYnJlYWRjcnVtYnMuIFRoZXJlIHdhcyB0aGUgcG9zc2liaWxpdHkgb2YgYWRkaW5nIGJyZWFkY3J1bWJzIHRvIGJvdGgsIHRoZSBpc29sYXRpb24gc2NvcGUKICAgIC8vIGFuZCB0aGUgbm9ybWFsIHNjb3BlLCBhbmQgZGVkdXBsaWNhdGluZyBpdCBkb3duIHRoZSBsaW5lIGluIHRoZSBldmVudCBwcm9jZXNzaW5nIHBpcGVsaW5lLiBIb3dldmVyLCB0aGF0IHdvdWxkCiAgICAvLyBoYXZlIGJlZW4gdmVyeSBmcmFnaWxlLCBiZWNhdXNlIHRoZSBicmVhZGNydW1iIG9iamVjdHMgd291bGQgaGF2ZSBuZWVkZWQgdG8ga2VlcCB0aGVpciBpZGVudGl0eSBhbGwgdGhyb3VnaG91dAogICAgLy8gdGhlIGV2ZW50IHByb2Nlc3NpbmcgcGlwZWxpbmUuCiAgICAvLyBJbiB0aGUgbmV3IGltcGxlbWVudGF0aW9uLCB0aGUgdG9wIGxldmVsIGBTZW50cnkuYWRkQnJlYWRjcnVtYigpYCBzaG91bGQgT05MWSB3cml0ZSB0byB0aGUgaXNvbGF0aW9uIHNjb3BlLgoKICAgIHNjb3BlLmFkZEJyZWFkY3J1bWIoZmluYWxCcmVhZGNydW1iLCBtYXhCcmVhZGNydW1icyk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldFVzZXIoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0VXNlcih1c2VyKSB7CiAgICAvLyBUT0RPKHY4KTogVGhlIHRvcCBsZXZlbCBgU2VudHJ5LnNldFVzZXIoKWAgZnVuY3Rpb24gc2hvdWxkIHdyaXRlIE9OTFkgdG8gdGhlIGlzb2xhdGlvbiBzY29wZS4KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLnNldFVzZXIodXNlcik7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0SXNvbGF0aW9uU2NvcGUoKS5zZXRVc2VyKHVzZXIpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5zZXRUYWdzKClgIGluc3RlYWQuCiAgICovCiAgIHNldFRhZ3ModGFncykgewogICAgLy8gVE9ETyh2OCk6IFRoZSB0b3AgbGV2ZWwgYFNlbnRyeS5zZXRUYWdzKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRUYWdzKHRhZ3MpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldElzb2xhdGlvblNjb3BlKCkuc2V0VGFncyh0YWdzKTsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBTZW50cnkuc2V0RXh0cmFzKClgIGluc3RlYWQuCiAgICovCiAgIHNldEV4dHJhcyhleHRyYXMpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0RXh0cmFzKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRFeHRyYXMoZXh0cmFzKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRJc29sYXRpb25TY29wZSgpLnNldEV4dHJhcyhleHRyYXMpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgYFNlbnRyeS5zZXRUYWcoKWAgaW5zdGVhZC4KICAgKi8KICAgc2V0VGFnKGtleSwgdmFsdWUpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0VGFnKClgIGZ1bmN0aW9uIHNob3VsZCB3cml0ZSBPTkxZIHRvIHRoZSBpc29sYXRpb24gc2NvcGUuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0U2NvcGUoKS5zZXRUYWcoa2V5LCB2YWx1ZSk7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIHRoaXMuZ2V0SXNvbGF0aW9uU2NvcGUoKS5zZXRUYWcoa2V5LCB2YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldEV4dHJhKClgIGluc3RlYWQuCiAgICovCiAgIHNldEV4dHJhKGtleSwgZXh0cmEpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0RXh0cmEoKWAgZnVuY3Rpb24gc2hvdWxkIHdyaXRlIE9OTFkgdG8gdGhlIGlzb2xhdGlvbiBzY29wZS4KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRTY29wZSgpLnNldEV4dHJhKGtleSwgZXh0cmEpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldElzb2xhdGlvblNjb3BlKCkuc2V0RXh0cmEoa2V5LCBleHRyYSk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LnNldENvbnRleHQoKWAgaW5zdGVhZC4KICAgKi8KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICBzZXRDb250ZXh0KG5hbWUsIGNvbnRleHQpIHsKICAgIC8vIFRPRE8odjgpOiBUaGUgdG9wIGxldmVsIGBTZW50cnkuc2V0Q29udGV4dCgpYCBmdW5jdGlvbiBzaG91bGQgd3JpdGUgT05MWSB0byB0aGUgaXNvbGF0aW9uIHNjb3BlLgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICB0aGlzLmdldFNjb3BlKCkuc2V0Q29udGV4dChuYW1lLCBjb250ZXh0KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5nZXRJc29sYXRpb25TY29wZSgpLnNldENvbnRleHQobmFtZSwgY29udGV4dCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBnZXRTY29wZSgpYCBkaXJlY3RseS4KICAgKi8KICAgY29uZmlndXJlU2NvcGUoY2FsbGJhY2spIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgeyBzY29wZSwgY2xpZW50IH0gPSB0aGlzLmdldFN0YWNrVG9wKCk7CiAgICBpZiAoY2xpZW50KSB7CiAgICAgIGNhbGxiYWNrKHNjb3BlKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgIHJ1bihjYWxsYmFjaykgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBvbGRIdWIgPSBtYWtlTWFpbih0aGlzKTsKICAgIHRyeSB7CiAgICAgIGNhbGxiYWNrKHRoaXMpOwogICAgfSBmaW5hbGx5IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICAgIG1ha2VNYWluKG9sZEh1Yik7CiAgICB9CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSBgU2VudHJ5LmdldENsaWVudCgpLmdldEludGVncmF0aW9uQnlOYW1lKClgIGluc3RlYWQuCiAgICovCiAgIGdldEludGVncmF0aW9uKGludGVncmF0aW9uKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuZ2V0Q2xpZW50KCk7CiAgICBpZiAoIWNsaWVudCkgcmV0dXJuIG51bGw7CiAgICB0cnkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgcmV0dXJuIGNsaWVudC5nZXRJbnRlZ3JhdGlvbihpbnRlZ3JhdGlvbik7CiAgICB9IGNhdGNoIChfb08pIHsKICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYENhbm5vdCByZXRyaWV2ZSBpbnRlZ3JhdGlvbiAke2ludGVncmF0aW9uLmlkfSBmcm9tIHRoZSBjdXJyZW50IEh1YmApOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIC8qKgogICAqIFN0YXJ0cyBhIG5ldyBgVHJhbnNhY3Rpb25gIGFuZCByZXR1cm5zIGl0LiBUaGlzIGlzIHRoZSBlbnRyeSBwb2ludCB0byBtYW51YWwgdHJhY2luZyBpbnN0cnVtZW50YXRpb24uCiAgICoKICAgKiBBIHRyZWUgc3RydWN0dXJlIGNhbiBiZSBidWlsdCBieSBhZGRpbmcgY2hpbGQgc3BhbnMgdG8gdGhlIHRyYW5zYWN0aW9uLCBhbmQgY2hpbGQgc3BhbnMgdG8gb3RoZXIgc3BhbnMuIFRvIHN0YXJ0IGEKICAgKiBuZXcgY2hpbGQgc3BhbiB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIG9yIGFueSBzcGFuLCBjYWxsIHRoZSByZXNwZWN0aXZlIGAuc3RhcnRDaGlsZCgpYCBtZXRob2QuCiAgICoKICAgKiBFdmVyeSBjaGlsZCBzcGFuIG11c3QgYmUgZmluaXNoZWQgYmVmb3JlIHRoZSB0cmFuc2FjdGlvbiBpcyBmaW5pc2hlZCwgb3RoZXJ3aXNlIHRoZSB1bmZpbmlzaGVkIHNwYW5zIGFyZSBkaXNjYXJkZWQuCiAgICoKICAgKiBUaGUgdHJhbnNhY3Rpb24gbXVzdCBiZSBmaW5pc2hlZCB3aXRoIGEgY2FsbCB0byBpdHMgYC5lbmQoKWAgbWV0aG9kLCBhdCB3aGljaCBwb2ludCB0aGUgdHJhbnNhY3Rpb24gd2l0aCBhbGwgaXRzCiAgICogZmluaXNoZWQgY2hpbGQgc3BhbnMgd2lsbCBiZSBzZW50IHRvIFNlbnRyeS4KICAgKgogICAqIEBwYXJhbSBjb250ZXh0IFByb3BlcnRpZXMgb2YgdGhlIG5ldyBgVHJhbnNhY3Rpb25gLgogICAqIEBwYXJhbSBjdXN0b21TYW1wbGluZ0NvbnRleHQgSW5mb3JtYXRpb24gZ2l2ZW4gdG8gdGhlIHRyYW5zYWN0aW9uIHNhbXBsaW5nIGZ1bmN0aW9uIChhbG9uZyB3aXRoIGNvbnRleHQtZGVwZW5kZW50CiAgICogZGVmYXVsdCB2YWx1ZXMpLiBTZWUge0BsaW5rIE9wdGlvbnMudHJhY2VzU2FtcGxlcn0uCiAgICoKICAgKiBAcmV0dXJucyBUaGUgdHJhbnNhY3Rpb24gd2hpY2ggd2FzIGp1c3Qgc3RhcnRlZAogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzdGFydFNwYW4oKWAsIGBzdGFydFNwYW5NYW51YWwoKWAgb3IgYHN0YXJ0SW5hY3RpdmVTcGFuKClgIGluc3RlYWQuCiAgICovCiAgIHN0YXJ0VHJhbnNhY3Rpb24oY29udGV4dCwgY3VzdG9tU2FtcGxpbmdDb250ZXh0KSB7CiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9jYWxsRXh0ZW5zaW9uTWV0aG9kKCdzdGFydFRyYW5zYWN0aW9uJywgY29udGV4dCwgY3VzdG9tU2FtcGxpbmdDb250ZXh0KTsKCiAgICBpZiAoREVCVUdfQlVJTEQgJiYgIXJlc3VsdCkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgICAgY29uc3QgY2xpZW50ID0gdGhpcy5nZXRDbGllbnQoKTsKICAgICAgaWYgKCFjbGllbnQpIHsKICAgICAgICBsb2dnZXIud2FybigKICAgICAgICAgICJUcmFjaW5nIGV4dGVuc2lvbiAnc3RhcnRUcmFuc2FjdGlvbicgaXMgbWlzc2luZy4gWW91IHNob3VsZCAnaW5pdCcgdGhlIFNESyBiZWZvcmUgY2FsbGluZyAnc3RhcnRUcmFuc2FjdGlvbiciLAogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9nZ2VyLndhcm4oYFRyYWNpbmcgZXh0ZW5zaW9uICdzdGFydFRyYW5zYWN0aW9uJyBoYXMgbm90IGJlZW4gYWRkZWQuIENhbGwgJ2FkZFRyYWNpbmdFeHRlbnNpb25zJyBiZWZvcmUgY2FsbGluZyAnaW5pdCc6ClNlbnRyeS5hZGRUcmFjaW5nRXh0ZW5zaW9ucygpOwpTZW50cnkuaW5pdCh7Li4ufSk7CmApOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIC8qKgogICAqIEBpbmhlcml0RG9jCiAgICogQGRlcHJlY2F0ZWQgVXNlIGBzcGFuVG9UcmFjZUhlYWRlcigpYCBpbnN0ZWFkLgogICAqLwogICB0cmFjZUhlYWRlcnMoKSB7CiAgICByZXR1cm4gdGhpcy5fY2FsbEV4dGVuc2lvbk1ldGhvZCgndHJhY2VIZWFkZXJzJyk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqCiAgICogQGRlcHJlY2F0ZWQgVXNlIHRvcCBsZXZlbCBgY2FwdHVyZVNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIGNhcHR1cmVTZXNzaW9uKGVuZFNlc3Npb24gPSBmYWxzZSkgewogICAgLy8gYm90aCBzZW5kIHRoZSB1cGRhdGUgYW5kIHB1bGwgdGhlIHNlc3Npb24gZnJvbSB0aGUgc2NvcGUKICAgIGlmIChlbmRTZXNzaW9uKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgICByZXR1cm4gdGhpcy5lbmRTZXNzaW9uKCk7CiAgICB9CgogICAgLy8gb25seSBzZW5kIHRoZSB1cGRhdGUKICAgIHRoaXMuX3NlbmRTZXNzaW9uVXBkYXRlKCk7CiAgfQoKICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqIEBkZXByZWNhdGVkIFVzZSB0b3AgbGV2ZWwgYGVuZFNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIGVuZFNlc3Npb24oKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgY29uc3Qgc2NvcGUgPSBsYXllci5zY29wZTsKICAgIGNvbnN0IHNlc3Npb24gPSBzY29wZS5nZXRTZXNzaW9uKCk7CiAgICBpZiAoc2Vzc2lvbikgewogICAgICBjbG9zZVNlc3Npb24oc2Vzc2lvbik7CiAgICB9CiAgICB0aGlzLl9zZW5kU2Vzc2lvblVwZGF0ZSgpOwoKICAgIC8vIHRoZSBzZXNzaW9uIGlzIG92ZXI7IHRha2UgaXQgb2ZmIG9mIHRoZSBzY29wZQogICAgc2NvcGUuc2V0U2Vzc2lvbigpOwogIH0KCiAgLyoqCiAgICogQGluaGVyaXREb2MKICAgKiBAZGVwcmVjYXRlZCBVc2UgdG9wIGxldmVsIGBzdGFydFNlc3Npb25gIGluc3RlYWQuCiAgICovCiAgIHN0YXJ0U2Vzc2lvbihjb250ZXh0KSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICAgIGNvbnN0IHsgc2NvcGUsIGNsaWVudCB9ID0gdGhpcy5nZXRTdGFja1RvcCgpOwogICAgY29uc3QgeyByZWxlYXNlLCBlbnZpcm9ubWVudCA9IERFRkFVTFRfRU5WSVJPTk1FTlQgfSA9IChjbGllbnQgJiYgY2xpZW50LmdldE9wdGlvbnMoKSkgfHwge307CgogICAgLy8gV2lsbCBmZXRjaCB1c2VyQWdlbnQgaWYgY2FsbGVkIGZyb20gYnJvd3NlciBzZGsKICAgIGNvbnN0IHsgdXNlckFnZW50IH0gPSBHTE9CQUxfT0JKLm5hdmlnYXRvciB8fCB7fTsKCiAgICBjb25zdCBzZXNzaW9uID0gbWFrZVNlc3Npb24oewogICAgICByZWxlYXNlLAogICAgICBlbnZpcm9ubWVudCwKICAgICAgdXNlcjogc2NvcGUuZ2V0VXNlcigpLAogICAgICAuLi4odXNlckFnZW50ICYmIHsgdXNlckFnZW50IH0pLAogICAgICAuLi5jb250ZXh0LAogICAgfSk7CgogICAgLy8gRW5kIGV4aXN0aW5nIHNlc3Npb24gaWYgdGhlcmUncyBvbmUKICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gc2NvcGUuZ2V0U2Vzc2lvbiAmJiBzY29wZS5nZXRTZXNzaW9uKCk7CiAgICBpZiAoY3VycmVudFNlc3Npb24gJiYgY3VycmVudFNlc3Npb24uc3RhdHVzID09PSAnb2snKSB7CiAgICAgIHVwZGF0ZVNlc3Npb24oY3VycmVudFNlc3Npb24sIHsgc3RhdHVzOiAnZXhpdGVkJyB9KTsKICAgIH0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgdGhpcy5lbmRTZXNzaW9uKCk7CgogICAgLy8gQWZ0ZXJ3YXJkcyB3ZSBzZXQgdGhlIG5ldyBzZXNzaW9uIG9uIHRoZSBzY29wZQogICAgc2NvcGUuc2V0U2Vzc2lvbihzZXNzaW9uKTsKCiAgICByZXR1cm4gc2Vzc2lvbjsKICB9CgogIC8qKgogICAqIFJldHVybnMgaWYgZGVmYXVsdCBQSUkgc2hvdWxkIGJlIHNlbnQgdG8gU2VudHJ5IGFuZCBwcm9wYWdhdGVkIGluIG91cmdvaW5nIHJlcXVlc3RzCiAgICogd2hlbiBUcmFjaW5nIGlzIHVzZWQuCiAgICoKICAgKiBAZGVwcmVjYXRlZCBVc2UgdG9wLWxldmVsIGBnZXRDbGllbnQoKS5nZXRPcHRpb25zKCkuc2VuZERlZmF1bHRQaWlgIGluc3RlYWQuIFRoaXMgZnVuY3Rpb24KICAgKiBvbmx5IHVubmVjZXNzYXJpbHkgaW5jcmVhc2VkIEFQSSBzdXJmYWNlIGJ1dCBvbmx5IHdyYXBwZWQgYWNjZXNzaW5nIHRoZSBvcHRpb24uCiAgICovCiAgIHNob3VsZFNlbmREZWZhdWx0UGlpKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBjb25zdCBjbGllbnQgPSB0aGlzLmdldENsaWVudCgpOwogICAgY29uc3Qgb3B0aW9ucyA9IGNsaWVudCAmJiBjbGllbnQuZ2V0T3B0aW9ucygpOwogICAgcmV0dXJuIEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLnNlbmREZWZhdWx0UGlpKTsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBjdXJyZW50IFNlc3Npb24gb24gdGhlIHNjb3BlCiAgICovCiAgIF9zZW5kU2Vzc2lvblVwZGF0ZSgpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgY29uc3QgeyBzY29wZSwgY2xpZW50IH0gPSB0aGlzLmdldFN0YWNrVG9wKCk7CgogICAgY29uc3Qgc2Vzc2lvbiA9IHNjb3BlLmdldFNlc3Npb24oKTsKICAgIGlmIChzZXNzaW9uICYmIGNsaWVudCAmJiBjbGllbnQuY2FwdHVyZVNlc3Npb24pIHsKICAgICAgY2xpZW50LmNhcHR1cmVTZXNzaW9uKHNlc3Npb24pOwogICAgfQogIH0KCiAgLyoqCiAgICogQ2FsbHMgZ2xvYmFsIGV4dGVuc2lvbiBtZXRob2QgYW5kIGJpbmRpbmcgY3VycmVudCBpbnN0YW5jZSB0byB0aGUgZnVuY3Rpb24gY2FsbAogICAqLwogIC8vIEB0cy1leHBlY3QtZXJyb3IgRnVuY3Rpb24gbGFja3MgZW5kaW5nIHJldHVybiBzdGF0ZW1lbnQgYW5kIHJldHVybiB0eXBlIGRvZXMgbm90IGluY2x1ZGUgJ3VuZGVmaW5lZCcuIHRzKDIzNjYpCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgX2NhbGxFeHRlbnNpb25NZXRob2QobWV0aG9kLCAuLi5hcmdzKSB7CiAgICBjb25zdCBjYXJyaWVyID0gZ2V0TWFpbkNhcnJpZXIoKTsKICAgIGNvbnN0IHNlbnRyeSA9IGNhcnJpZXIuX19TRU5UUllfXzsKICAgIGlmIChzZW50cnkgJiYgc2VudHJ5LmV4dGVuc2lvbnMgJiYgdHlwZW9mIHNlbnRyeS5leHRlbnNpb25zW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIHNlbnRyeS5leHRlbnNpb25zW21ldGhvZF0uYXBwbHkodGhpcywgYXJncyk7CiAgICB9CiAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybihgRXh0ZW5zaW9uIG1ldGhvZCAke21ldGhvZH0gY291bGRuJ3QgYmUgZm91bmQsIGRvaW5nIG5vdGhpbmcuYCk7CiAgfQp9CgovKioKICogUmV0dXJucyB0aGUgZ2xvYmFsIHNoaW0gcmVnaXN0cnkuCiAqCiAqIEZJWE1FOiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JsZW1hdGljLCBiZWNhdXNlIGRlc3BpdGUgYWx3YXlzIHJldHVybmluZyBhIHZhbGlkIENhcnJpZXIsCiAqIGl0IGhhcyBhbiBvcHRpb25hbCBgX19TRU5UUllfX2AgcHJvcGVydHksIHdoaWNoIHRoZW4gaW4gdHVybiByZXF1aXJlcyB1cyB0byBhbHdheXMgcGVyZm9ybSBhbiB1bm5lY2Vzc2FyeSBjaGVjawogKiBhdCB0aGUgY2FsbC1zaXRlLiBXZSBhbHdheXMgYWNjZXNzIHRoZSBjYXJyaWVyIHRocm91Z2ggdGhpcyBmdW5jdGlvbiwgc28gd2UgY2FuIGd1YXJhbnRlZSB0aGF0IGBfX1NFTlRSWV9fYCBpcyB0aGVyZS4KICoqLwpmdW5jdGlvbiBnZXRNYWluQ2FycmllcigpIHsKICBHTE9CQUxfT0JKLl9fU0VOVFJZX18gPSBHTE9CQUxfT0JKLl9fU0VOVFJZX18gfHwgewogICAgZXh0ZW5zaW9uczoge30sCiAgICBodWI6IHVuZGVmaW5lZCwKICB9OwogIHJldHVybiBHTE9CQUxfT0JKOwp9CgovKioKICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgbWFpbiBodWIgd2l0aCB0aGUgcGFzc2VkIG9uZSBvbiB0aGUgZ2xvYmFsIG9iamVjdAogKgogKiBAcmV0dXJucyBUaGUgb2xkIHJlcGxhY2VkIGh1YgogKgogKiBAZGVwcmVjYXRlZCBVc2UgYHNldEN1cnJlbnRDbGllbnQoKWAgaW5zdGVhZC4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBtYWtlTWFpbihodWIpIHsKICBjb25zdCByZWdpc3RyeSA9IGdldE1haW5DYXJyaWVyKCk7CiAgY29uc3Qgb2xkSHViID0gZ2V0SHViRnJvbUNhcnJpZXIocmVnaXN0cnkpOwogIHNldEh1Yk9uQ2FycmllcihyZWdpc3RyeSwgaHViKTsKICByZXR1cm4gb2xkSHViOwp9CgovKioKICogUmV0dXJucyB0aGUgZGVmYXVsdCBodWIgaW5zdGFuY2UuCiAqCiAqIElmIGEgaHViIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBpbiB0aGUgZ2xvYmFsIGNhcnJpZXIgYnV0IHRoaXMgbW9kdWxlCiAqIGNvbnRhaW5zIGEgbW9yZSByZWNlbnQgdmVyc2lvbiwgaXQgcmVwbGFjZXMgdGhlIHJlZ2lzdGVyZWQgdmVyc2lvbi4KICogT3RoZXJ3aXNlLCB0aGUgY3VycmVudGx5IHJlZ2lzdGVyZWQgaHViIHdpbGwgYmUgcmV0dXJuZWQuCiAqCiAqIEBkZXByZWNhdGVkIFVzZSB0aGUgcmVzcGVjdGl2ZSByZXBsYWNlbWVudCBtZXRob2QgZGlyZWN0bHkgaW5zdGVhZC4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBnZXRDdXJyZW50SHViKCkgewogIC8vIEdldCBtYWluIGNhcnJpZXIgKGdsb2JhbCBmb3IgZXZlcnkgZW52aXJvbm1lbnQpCiAgY29uc3QgcmVnaXN0cnkgPSBnZXRNYWluQ2FycmllcigpOwoKICBpZiAocmVnaXN0cnkuX19TRU5UUllfXyAmJiByZWdpc3RyeS5fX1NFTlRSWV9fLmFjcykgewogICAgY29uc3QgaHViID0gcmVnaXN0cnkuX19TRU5UUllfXy5hY3MuZ2V0Q3VycmVudEh1YigpOwoKICAgIGlmIChodWIpIHsKICAgICAgcmV0dXJuIGh1YjsKICAgIH0KICB9CgogIC8vIFJldHVybiBodWIgdGhhdCBsaXZlcyBvbiBhIGdsb2JhbCBvYmplY3QKICByZXR1cm4gZ2V0R2xvYmFsSHViKHJlZ2lzdHJ5KTsKfQoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmZ1bmN0aW9uIGdldEdsb2JhbEh1YihyZWdpc3RyeSA9IGdldE1haW5DYXJyaWVyKCkpIHsKICAvLyBJZiB0aGVyZSdzIG5vIGh1Yiwgb3IgaXRzIGFuIG9sZCBBUEksIGFzc2lnbiBhIG5ldyBvbmUKCiAgaWYgKAogICAgIWhhc0h1Yk9uQ2FycmllcihyZWdpc3RyeSkgfHwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgogICAgZ2V0SHViRnJvbUNhcnJpZXIocmVnaXN0cnkpLmlzT2xkZXJUaGFuKEFQSV9WRVJTSU9OKQogICkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgICBzZXRIdWJPbkNhcnJpZXIocmVnaXN0cnksIG5ldyBIdWIoKSk7CiAgfQoKICAvLyBSZXR1cm4gaHViIHRoYXQgbGl2ZXMgb24gYSBnbG9iYWwgb2JqZWN0CiAgcmV0dXJuIGdldEh1YkZyb21DYXJyaWVyKHJlZ2lzdHJ5KTsKfQoKLyoqCiAqIFRoaXMgd2lsbCB0ZWxsIHdoZXRoZXIgYSBjYXJyaWVyIGhhcyBhIGh1YiBvbiBpdCBvciBub3QKICogQHBhcmFtIGNhcnJpZXIgb2JqZWN0CiAqLwpmdW5jdGlvbiBoYXNIdWJPbkNhcnJpZXIoY2FycmllcikgewogIHJldHVybiAhIShjYXJyaWVyICYmIGNhcnJpZXIuX19TRU5UUllfXyAmJiBjYXJyaWVyLl9fU0VOVFJZX18uaHViKTsKfQoKLyoqCiAqIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcge0BsaW5rIEh1Yn0gYW5kIGFkZCB0byB0aGUgcGFzc2VkIG9iamVjdCBvbgogKiBfX1NFTlRSWV9fLmh1Yi4KICogQHBhcmFtIGNhcnJpZXIgb2JqZWN0CiAqIEBoaWRkZW4KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBnZXRIdWJGcm9tQ2FycmllcihjYXJyaWVyKSB7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgcmV0dXJuIGdldEdsb2JhbFNpbmdsZXRvbignaHViJywgKCkgPT4gbmV3IEh1YigpLCBjYXJyaWVyKTsKfQoKLyoqCiAqIFRoaXMgd2lsbCBzZXQgcGFzc2VkIHtAbGluayBIdWJ9IG9uIHRoZSBwYXNzZWQgb2JqZWN0J3MgX19TRU5UUllfXy5odWIgYXR0cmlidXRlCiAqIEBwYXJhbSBjYXJyaWVyIG9iamVjdAogKiBAcGFyYW0gaHViIEh1YgogKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvbgpmdW5jdGlvbiBzZXRIdWJPbkNhcnJpZXIoY2FycmllciwgaHViKSB7CiAgaWYgKCFjYXJyaWVyKSByZXR1cm4gZmFsc2U7CiAgY29uc3QgX19TRU5UUllfXyA9IChjYXJyaWVyLl9fU0VOVFJZX18gPSBjYXJyaWVyLl9fU0VOVFJZX18gfHwge30pOwogIF9fU0VOVFJZX18uaHViID0gaHViOwogIHJldHVybiB0cnVlOwp9CgovKioKICogQXBwbHkgU2RrSW5mbyAobmFtZSwgdmVyc2lvbiwgcGFja2FnZXMsIGludGVncmF0aW9ucykgdG8gdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQga2V5LgogKiBNZXJnZSB3aXRoIGV4aXN0aW5nIGRhdGEgaWYgYW55LgogKiovCmZ1bmN0aW9uIGVuaGFuY2VFdmVudFdpdGhTZGtJbmZvKGV2ZW50LCBzZGtJbmZvKSB7CiAgaWYgKCFzZGtJbmZvKSB7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQogIGV2ZW50LnNkayA9IGV2ZW50LnNkayB8fCB7fTsKICBldmVudC5zZGsubmFtZSA9IGV2ZW50LnNkay5uYW1lIHx8IHNka0luZm8ubmFtZTsKICBldmVudC5zZGsudmVyc2lvbiA9IGV2ZW50LnNkay52ZXJzaW9uIHx8IHNka0luZm8udmVyc2lvbjsKICBldmVudC5zZGsuaW50ZWdyYXRpb25zID0gWy4uLihldmVudC5zZGsuaW50ZWdyYXRpb25zIHx8IFtdKSwgLi4uKHNka0luZm8uaW50ZWdyYXRpb25zIHx8IFtdKV07CiAgZXZlbnQuc2RrLnBhY2thZ2VzID0gWy4uLihldmVudC5zZGsucGFja2FnZXMgfHwgW10pLCAuLi4oc2RrSW5mby5wYWNrYWdlcyB8fCBbXSldOwogIHJldHVybiBldmVudDsKfQoKLyoqIENyZWF0ZXMgYW4gZW52ZWxvcGUgZnJvbSBhIFNlc3Npb24gKi8KZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbkVudmVsb3BlKAogIHNlc3Npb24sCiAgZHNuLAogIG1ldGFkYXRhLAogIHR1bm5lbCwKKSB7CiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpOwogIGNvbnN0IGVudmVsb3BlSGVhZGVycyA9IHsKICAgIHNlbnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgIC4uLihzZGtJbmZvICYmIHsgc2RrOiBzZGtJbmZvIH0pLAogICAgLi4uKCEhdHVubmVsICYmIGRzbiAmJiB7IGRzbjogZHNuVG9TdHJpbmcoZHNuKSB9KSwKICB9OwoKICBjb25zdCBlbnZlbG9wZUl0ZW0gPQogICAgJ2FnZ3JlZ2F0ZXMnIGluIHNlc3Npb24gPyBbeyB0eXBlOiAnc2Vzc2lvbnMnIH0sIHNlc3Npb25dIDogW3sgdHlwZTogJ3Nlc3Npb24nIH0sIHNlc3Npb24udG9KU09OKCldOwoKICByZXR1cm4gY3JlYXRlRW52ZWxvcGUoZW52ZWxvcGVIZWFkZXJzLCBbZW52ZWxvcGVJdGVtXSk7Cn0KCi8qKgogKiBDcmVhdGUgYW4gRW52ZWxvcGUgZnJvbSBhbiBldmVudC4KICovCmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW52ZWxvcGUoCiAgZXZlbnQsCiAgZHNuLAogIG1ldGFkYXRhLAogIHR1bm5lbCwKKSB7CiAgY29uc3Qgc2RrSW5mbyA9IGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGEpOwoKICAvKgogICAgTm90ZTogRHVlIHRvIFRTLCBldmVudC50eXBlIG1heSBiZSBgcmVwbGF5X2V2ZW50YCwgdGhlb3JldGljYWxseS4KICAgIEluIHByYWN0aWNlLCB3ZSBuZXZlciBjYWxsIGBjcmVhdGVFdmVudEVudmVsb3BlYCB3aXRoIGByZXBsYXlfZXZlbnRgIHR5cGUsCiAgICBhbmQgd2UnZCBoYXZlIHRvIGFkanV0IGEgbG9vb3Qgb2YgdHlwZXMgdG8gbWFrZSB0aGlzIHdvcmsgcHJvcGVybHkuCiAgICBXZSB3YW50IHRvIGF2b2lkIGNhc3RpbmcgdGhpcyBhcm91bmQsIGFzIHRoYXQgY291bGQgbGVhZCB0byBidWdzIChlLmcuIHdoZW4gd2UgYWRkIGFub3RoZXIgdHlwZSkKICAgIFNvIHRoZSBzYWZlIGNob2ljZSBpcyB0byByZWFsbHkgZ3VhcmQgYWdhaW5zdCB0aGUgcmVwbGF5X2V2ZW50IHR5cGUgaGVyZS4KICAqLwogIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50LnR5cGUgJiYgZXZlbnQudHlwZSAhPT0gJ3JlcGxheV9ldmVudCcgPyBldmVudC50eXBlIDogJ2V2ZW50JzsKCiAgZW5oYW5jZUV2ZW50V2l0aFNka0luZm8oZXZlbnQsIG1ldGFkYXRhICYmIG1ldGFkYXRhLnNkayk7CgogIGNvbnN0IGVudmVsb3BlSGVhZGVycyA9IGNyZWF0ZUV2ZW50RW52ZWxvcGVIZWFkZXJzKGV2ZW50LCBzZGtJbmZvLCB0dW5uZWwsIGRzbik7CgogIC8vIFByZXZlbnQgdGhpcyBkYXRhICh3aGljaCwgaWYgaXQgZXhpc3RzLCB3YXMgdXNlZCBpbiBlYXJsaWVyIHN0ZXBzIGluIHRoZSBwcm9jZXNzaW5nIHBpcGVsaW5lKSBmcm9tIGJlaW5nIHNlbnQgdG8KICAvLyBzZW50cnkuIChOb3RlOiBPdXIgdXNlIG9mIHRoaXMgcHJvcGVydHkgY29tZXMgYW5kIGdvZXMgd2l0aCB3aGF0ZXZlciB3ZSBtaWdodCBiZSBkZWJ1Z2dpbmcsIHdoYXRldmVyIGhhY2tzIHdlIG1heQogIC8vIGhhdmUgdGVtcG9yYXJpbHkgYWRkZWQsIGV0Yy4gRXZlbiBpZiB3ZSBkb24ndCBoYXBwZW4gdG8gYmUgdXNpbmcgaXQgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCBsZXQncyBub3QgZ2V0IHJpZAogIC8vIG9mIHRoaXMgYGRlbGV0ZWAsIGxlc3Qgd2UgbWlzcyBwdXR0aW5nIGl0IGJhY2sgaW4gdGhlIG5leHQgdGltZSB0aGUgcHJvcGVydHkgaXMgaW4gdXNlLikKICBkZWxldGUgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhOwoKICBjb25zdCBldmVudEl0ZW0gPSBbeyB0eXBlOiBldmVudFR5cGUgfSwgZXZlbnRdOwogIHJldHVybiBjcmVhdGVFbnZlbG9wZShlbnZlbG9wZUhlYWRlcnMsIFtldmVudEl0ZW1dKTsKfQoKY29uc3QgU0VOVFJZX0FQSV9WRVJTSU9OID0gJzcnOwoKLyoqIFJldHVybnMgdGhlIHByZWZpeCB0byBjb25zdHJ1Y3QgU2VudHJ5IGluZ2VzdGlvbiBBUEkgZW5kcG9pbnRzLiAqLwpmdW5jdGlvbiBnZXRCYXNlQXBpRW5kcG9pbnQoZHNuKSB7CiAgY29uc3QgcHJvdG9jb2wgPSBkc24ucHJvdG9jb2wgPyBgJHtkc24ucHJvdG9jb2x9OmAgOiAnJzsKICBjb25zdCBwb3J0ID0gZHNuLnBvcnQgPyBgOiR7ZHNuLnBvcnR9YCA6ICcnOwogIHJldHVybiBgJHtwcm90b2NvbH0vLyR7ZHNuLmhvc3R9JHtwb3J0fSR7ZHNuLnBhdGggPyBgLyR7ZHNuLnBhdGh9YCA6ICcnfS9hcGkvYDsKfQoKLyoqIFJldHVybnMgdGhlIGluZ2VzdCBBUEkgZW5kcG9pbnQgZm9yIHRhcmdldC4gKi8KZnVuY3Rpb24gX2dldEluZ2VzdEVuZHBvaW50KGRzbikgewogIHJldHVybiBgJHtnZXRCYXNlQXBpRW5kcG9pbnQoZHNuKX0ke2Rzbi5wcm9qZWN0SWR9L2VudmVsb3BlL2A7Cn0KCi8qKiBSZXR1cm5zIGEgVVJMLWVuY29kZWQgc3RyaW5nIHdpdGggYXV0aCBjb25maWcgc3VpdGFibGUgZm9yIGEgcXVlcnkgc3RyaW5nLiAqLwpmdW5jdGlvbiBfZW5jb2RlZEF1dGgoZHNuLCBzZGtJbmZvKSB7CiAgcmV0dXJuIHVybEVuY29kZSh7CiAgICAvLyBXZSBzZW5kIG9ubHkgdGhlIG1pbmltdW0gc2V0IG9mIHJlcXVpcmVkIGluZm9ybWF0aW9uLiBTZWUKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzI1NzIuCiAgICBzZW50cnlfa2V5OiBkc24ucHVibGljS2V5LAogICAgc2VudHJ5X3ZlcnNpb246IFNFTlRSWV9BUElfVkVSU0lPTiwKICAgIC4uLihzZGtJbmZvICYmIHsgc2VudHJ5X2NsaWVudDogYCR7c2RrSW5mby5uYW1lfS8ke3Nka0luZm8udmVyc2lvbn1gIH0pLAogIH0pOwp9CgovKioKICogUmV0dXJucyB0aGUgZW52ZWxvcGUgZW5kcG9pbnQgVVJMIHdpdGggYXV0aCBpbiB0aGUgcXVlcnkgc3RyaW5nLgogKgogKiBTZW5kaW5nIGF1dGggYXMgcGFydCBvZiB0aGUgcXVlcnkgc3RyaW5nIGFuZCBub3QgYXMgY3VzdG9tIEhUVFAgaGVhZGVycyBhdm9pZHMgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdHMuCiAqLwpmdW5jdGlvbiBnZXRFbnZlbG9wZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoKAogIGRzbiwKICAvLyBUT0RPICh2OCk6IFJlbW92ZSBgdHVubmVsT3JPcHRpb25zYCBpbiBmYXZvciBvZiBgb3B0aW9uc2AsIGFuZCB1c2UgdGhlIHN1YnN0aXR1dGUgY29kZSBiZWxvdwogIC8vIG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7fSBhcyBDbGllbnRPcHRpb25zLAogIHR1bm5lbE9yT3B0aW9ucyA9IHt9ICwKKSB7CiAgLy8gVE9ETyAodjgpOiBVc2UgdGhpcyBjb2RlIGluc3RlYWQKICAvLyBjb25zdCB7IHR1bm5lbCwgX21ldGFkYXRhID0ge30gfSA9IG9wdGlvbnM7CiAgLy8gcmV0dXJuIHR1bm5lbCA/IHR1bm5lbCA6IGAke19nZXRJbmdlc3RFbmRwb2ludChkc24pfT8ke19lbmNvZGVkQXV0aChkc24sIF9tZXRhZGF0YS5zZGspfWA7CgogIGNvbnN0IHR1bm5lbCA9IHR5cGVvZiB0dW5uZWxPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gdHVubmVsT3JPcHRpb25zIDogdHVubmVsT3JPcHRpb25zLnR1bm5lbDsKICBjb25zdCBzZGtJbmZvID0KICAgIHR5cGVvZiB0dW5uZWxPck9wdGlvbnMgPT09ICdzdHJpbmcnIHx8ICF0dW5uZWxPck9wdGlvbnMuX21ldGFkYXRhID8gdW5kZWZpbmVkIDogdHVubmVsT3JPcHRpb25zLl9tZXRhZGF0YS5zZGs7CgogIHJldHVybiB0dW5uZWwgPyB0dW5uZWwgOiBgJHtfZ2V0SW5nZXN0RW5kcG9pbnQoZHNuKX0/JHtfZW5jb2RlZEF1dGgoZHNuLCBzZGtJbmZvKX1gOwp9Cgpjb25zdCBERUZBVUxUX1RSQU5TUE9SVF9CVUZGRVJfU0laRSA9IDMwOwoKLyoqCiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBTZW50cnkgYFRyYW5zcG9ydGAKICoKICogQHBhcmFtIG9wdGlvbnMKICogQHBhcmFtIG1ha2VSZXF1ZXN0CiAqLwpmdW5jdGlvbiBjcmVhdGVUcmFuc3BvcnQoCiAgb3B0aW9ucywKICBtYWtlUmVxdWVzdCwKICBidWZmZXIgPSBtYWtlUHJvbWlzZUJ1ZmZlcigKICAgIG9wdGlvbnMuYnVmZmVyU2l6ZSB8fCBERUZBVUxUX1RSQU5TUE9SVF9CVUZGRVJfU0laRSwKICApLAopIHsKICBsZXQgcmF0ZUxpbWl0cyA9IHt9OwogIGNvbnN0IGZsdXNoID0gKHRpbWVvdXQpID0+IGJ1ZmZlci5kcmFpbih0aW1lb3V0KTsKCiAgZnVuY3Rpb24gc2VuZChlbnZlbG9wZSkgewogICAgY29uc3QgZmlsdGVyZWRFbnZlbG9wZUl0ZW1zID0gW107CgogICAgLy8gRHJvcCByYXRlIGxpbWl0ZWQgaXRlbXMgZnJvbSBlbnZlbG9wZQogICAgZm9yRWFjaEVudmVsb3BlSXRlbShlbnZlbG9wZSwgKGl0ZW0sIHR5cGUpID0+IHsKICAgICAgY29uc3QgZGF0YUNhdGVnb3J5ID0gZW52ZWxvcGVJdGVtVHlwZVRvRGF0YUNhdGVnb3J5KHR5cGUpOwogICAgICBpZiAoaXNSYXRlTGltaXRlZChyYXRlTGltaXRzLCBkYXRhQ2F0ZWdvcnkpKSB7CiAgICAgICAgY29uc3QgZXZlbnQgPSBnZXRFdmVudEZvckVudmVsb3BlSXRlbShpdGVtLCB0eXBlKTsKICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudCgncmF0ZWxpbWl0X2JhY2tvZmYnLCBkYXRhQ2F0ZWdvcnksIGV2ZW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWx0ZXJlZEVudmVsb3BlSXRlbXMucHVzaChpdGVtKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gU2tpcCBzZW5kaW5nIGlmIGVudmVsb3BlIGlzIGVtcHR5IGFmdGVyIGZpbHRlcmluZyBvdXQgcmF0ZSBsaW1pdGVkIGV2ZW50cwogICAgaWYgKGZpbHRlcmVkRW52ZWxvcGVJdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2UoKTsKICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgY29uc3QgZmlsdGVyZWRFbnZlbG9wZSA9IGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlWzBdLCBmaWx0ZXJlZEVudmVsb3BlSXRlbXMgKTsKCiAgICAvLyBDcmVhdGVzIGNsaWVudCByZXBvcnQgZm9yIGVhY2ggaXRlbSBpbiBhbiBlbnZlbG9wZQogICAgY29uc3QgcmVjb3JkRW52ZWxvcGVMb3NzID0gKHJlYXNvbikgPT4gewogICAgICBmb3JFYWNoRW52ZWxvcGVJdGVtKGZpbHRlcmVkRW52ZWxvcGUsIChpdGVtLCB0eXBlKSA9PiB7CiAgICAgICAgY29uc3QgZXZlbnQgPSBnZXRFdmVudEZvckVudmVsb3BlSXRlbShpdGVtLCB0eXBlKTsKICAgICAgICBvcHRpb25zLnJlY29yZERyb3BwZWRFdmVudChyZWFzb24sIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSwgZXZlbnQpOwogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgcmVxdWVzdFRhc2sgPSAoKSA9PgogICAgICBtYWtlUmVxdWVzdCh7IGJvZHk6IHNlcmlhbGl6ZUVudmVsb3BlKGZpbHRlcmVkRW52ZWxvcGUsIG9wdGlvbnMudGV4dEVuY29kZXIpIH0pLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byB0aHJvdyBvbiBOT0sgcmVzcG9uc2VzLCBidXQgd2Ugd2FudCB0byBhdCBsZWFzdCBsb2cgdGhlbQogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IHVuZGVmaW5lZCAmJiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXNDb2RlID49IDMwMCkpIHsKICAgICAgICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLndhcm4oYFNlbnRyeSByZXNwb25kZWQgd2l0aCBzdGF0dXMgY29kZSAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9IHRvIHNlbnQgZXZlbnQuYCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmF0ZUxpbWl0cyA9IHVwZGF0ZVJhdGVMaW1pdHMocmF0ZUxpbWl0cywgcmVzcG9uc2UpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgIH0sCiAgICAgICAgZXJyb3IgPT4gewogICAgICAgICAgcmVjb3JkRW52ZWxvcGVMb3NzKCduZXR3b3JrX2Vycm9yJyk7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9LAogICAgICApOwoKICAgIHJldHVybiBidWZmZXIuYWRkKHJlcXVlc3RUYXNrKS50aGVuKAogICAgICByZXN1bHQgPT4gcmVzdWx0LAogICAgICBlcnJvciA9PiB7CiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VudHJ5RXJyb3IpIHsKICAgICAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci5lcnJvcignU2tpcHBlZCBzZW5kaW5nIGV2ZW50IGJlY2F1c2UgYnVmZmVyIGlzIGZ1bGwuJyk7CiAgICAgICAgICByZWNvcmRFbnZlbG9wZUxvc3MoJ3F1ZXVlX292ZXJmbG93Jyk7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICAgIH0sCiAgICApOwogIH0KCiAgLy8gV2UgdXNlIHRoaXMgdG8gaWRlbnRpZmlmeSBpZiB0aGUgdHJhbnNwb3J0IGlzIHRoZSBiYXNlIHRyYW5zcG9ydAogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIHRoaXMgYWdhaW4gYXMgd2UnbGwgbm8gbG9uZ2VyIG5lZWQgaXQKICBzZW5kLl9fc2VudHJ5X19iYXNlVHJhbnNwb3J0X18gPSB0cnVlOwoKICByZXR1cm4gewogICAgc2VuZCwKICAgIGZsdXNoLAogIH07Cn0KCmZ1bmN0aW9uIGdldEV2ZW50Rm9yRW52ZWxvcGVJdGVtKGl0ZW0sIHR5cGUpIHsKICBpZiAodHlwZSAhPT0gJ2V2ZW50JyAmJiB0eXBlICE9PSAndHJhbnNhY3Rpb24nKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaXRlbSkgPyAoaXRlbSApWzFdIDogdW5kZWZpbmVkOwp9CgovKiogbm9ybWFsaXplcyBXaW5kb3dzIHBhdGhzICovCmZ1bmN0aW9uIG5vcm1hbGl6ZVdpbmRvd3NQYXRoKHBhdGgpIHsKICByZXR1cm4gcGF0aAogICAgLnJlcGxhY2UoL15bQS1aXTovLCAnJykgLy8gcmVtb3ZlIFdpbmRvd3Mtc3R5bGUgcHJlZml4CiAgICAucmVwbGFjZSgvXFwvZywgJy8nKTsgLy8gcmVwbGFjZSBhbGwgYFxgIGluc3RhbmNlcyB3aXRoIGAvYAp9CgovKiogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZ2V0cyB0aGUgbW9kdWxlIG5hbWUgZnJvbSBhIGZpbGVuYW1lICovCmZ1bmN0aW9uIGNyZWF0ZUdldE1vZHVsZUZyb21GaWxlbmFtZSgKICBiYXNlUGF0aCA9IHByb2Nlc3MuYXJndlsxXSA/IGRpcm5hbWUocHJvY2Vzcy5hcmd2WzFdKSA6IHByb2Nlc3MuY3dkKCksCiAgaXNXaW5kb3dzID0gc2VwID09PSAnXFwnLAopIHsKICBjb25zdCBub3JtYWxpemVkQmFzZSA9IGlzV2luZG93cyA/IG5vcm1hbGl6ZVdpbmRvd3NQYXRoKGJhc2VQYXRoKSA6IGJhc2VQYXRoOwoKICByZXR1cm4gKGZpbGVuYW1lKSA9PiB7CiAgICBpZiAoIWZpbGVuYW1lKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBub3JtYWxpemVkRmlsZW5hbWUgPSBpc1dpbmRvd3MgPyBub3JtYWxpemVXaW5kb3dzUGF0aChmaWxlbmFtZSkgOiBmaWxlbmFtZTsKCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CiAgICBsZXQgeyBkaXIsIGJhc2U6IGZpbGUsIGV4dCB9ID0gcG9zaXgucGFyc2Uobm9ybWFsaXplZEZpbGVuYW1lKTsKCiAgICBpZiAoZXh0ID09PSAnLmpzJyB8fCBleHQgPT09ICcubWpzJyB8fCBleHQgPT09ICcuY2pzJykgewogICAgICBmaWxlID0gZmlsZS5zbGljZSgwLCBleHQubGVuZ3RoICogLTEpOwogICAgfQoKICAgIGlmICghZGlyKSB7CiAgICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlcgogICAgICBkaXIgPSAnLic7CiAgICB9CgogICAgY29uc3QgbiA9IGRpci5sYXN0SW5kZXhPZignL25vZGVfbW9kdWxlcycpOwogICAgaWYgKG4gPiAtMSkgewogICAgICByZXR1cm4gYCR7ZGlyLnNsaWNlKG4gKyAxNCkucmVwbGFjZSgvXC8vZywgJy4nKX06JHtmaWxlfWA7CiAgICB9CgogICAgLy8gTGV0J3Mgc2VlIGlmIGl0J3MgYSBwYXJ0IG9mIHRoZSBtYWluIG1vZHVsZQogICAgLy8gVG8gYmUgYSBwYXJ0IG9mIG1haW4gbW9kdWxlLCBpdCBoYXMgdG8gc2hhcmUgdGhlIHNhbWUgYmFzZQogICAgaWYgKGRpci5zdGFydHNXaXRoKG5vcm1hbGl6ZWRCYXNlKSkgewogICAgICBsZXQgbW9kdWxlTmFtZSA9IGRpci5zbGljZShub3JtYWxpemVkQmFzZS5sZW5ndGggKyAxKS5yZXBsYWNlKC9cLy9nLCAnLicpOwoKICAgICAgaWYgKG1vZHVsZU5hbWUpIHsKICAgICAgICBtb2R1bGVOYW1lICs9ICc6JzsKICAgICAgfQogICAgICBtb2R1bGVOYW1lICs9IGZpbGU7CgogICAgICByZXR1cm4gbW9kdWxlTmFtZTsKICAgIH0KCiAgICByZXR1cm4gZmlsZTsKICB9Owp9CgpmdW5jdGlvbiBfbnVsbGlzaENvYWxlc2NlJDIobGhzLCByaHNGbikgeyBpZiAobGhzICE9IG51bGwpIHsgcmV0dXJuIGxoczsgfSBlbHNlIHsgcmV0dXJuIHJoc0ZuKCk7IH0gfS8qKgogKiBUaGlzIGNvZGUgd2FzIG9yaWdpbmFsbHkgZm9ya2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL1Rvb1RhbGxOYXRlL3Byb3h5LWFnZW50cy90cmVlL2IxMzMyOTVmZDE2ZjY0NzU1NzhiNmIxNWJkOWI0ZTMzZWNiMGQwYjcKICogV2l0aCB0aGUgZm9sbG93aW5nIGxpY2VuY2U6CiAqCiAqIChUaGUgTUlUIExpY2Vuc2UpCiAqCiAqIENvcHlyaWdodCAoYykgMjAxMyBOYXRoYW4gUmFqbGljaCA8bmF0aGFuQHRvb3RhbGxuYXRlLm5ldD4qCiAqCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwogKiBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKICogJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwogKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0bwogKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8KICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOioKICoKICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuKgogKgogKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwKICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4KICogSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkKICogQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwKICogVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUKICogU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAqLwoKY29uc3QgSU5URVJOQUwgPSBTeW1ib2woJ0FnZW50QmFzZUludGVybmFsU3RhdGUnKTsKCmNsYXNzIEFnZW50IGV4dGVuZHMgaHR0cC5BZ2VudCB7CgogIC8vIFNldCBieSBgaHR0cC5BZ2VudGAgLSBtaXNzaW5nIGZyb20gYEB0eXBlcy9ub2RlYAoKICBjb25zdHJ1Y3RvcihvcHRzKSB7CiAgICBzdXBlcihvcHRzKTsKICAgIHRoaXNbSU5URVJOQUxdID0ge307CiAgfQoKICAvKioKICAgKiBEZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGFuIGBodHRwYCBvciBgaHR0cHNgIHJlcXVlc3QuCiAgICovCiAgaXNTZWN1cmVFbmRwb2ludChvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucykgewogICAgICAvLyBGaXJzdCBjaGVjayB0aGUgYHNlY3VyZUVuZHBvaW50YCBwcm9wZXJ0eSBleHBsaWNpdGx5LCBzaW5jZSB0aGlzCiAgICAgIC8vIG1lYW5zIHRoYXQgYSBwYXJlbnQgYEFnZW50YCBpcyAicGFzc2luZyB0aHJvdWdoIiB0byB0aGlzIGluc3RhbmNlLgogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzCiAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMgKS5zZWN1cmVFbmRwb2ludCA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuc2VjdXJlRW5kcG9pbnQ7CiAgICAgIH0KCiAgICAgIC8vIElmIG5vIGV4cGxpY2l0IGBzZWN1cmVgIGVuZHBvaW50LCBjaGVjayBpZiBgcHJvdG9jb2xgIHByb3BlcnR5IGlzCiAgICAgIC8vIHNldC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgdGhlIGNhc2Ugc2luY2UgdXNpbmcgYSBmdWxsIHN0cmluZyBVUkwKICAgICAgLy8gb3IgYFVSTGAgaW5zdGFuY2Ugc2hvdWxkIGJlIHRoZSBtb3N0IGNvbW1vbiB1c2FnZS4KICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBvcHRpb25zLnByb3RvY29sID09PSAnaHR0cHM6JzsKICAgICAgfQogICAgfQoKICAgIC8vIEZpbmFsbHksIGlmIG5vIGBwcm90b2NvbGAgcHJvcGVydHkgd2FzIHNldCwgdGhlbiBmYWxsIGJhY2sgdG8KICAgIC8vIGNoZWNraW5nIHRoZSBzdGFjayB0cmFjZSBvZiB0aGUgY3VycmVudCBjYWxsIHN0YWNrLCBhbmQgdHJ5IHRvCiAgICAvLyBkZXRlY3QgdGhlICJodHRwcyIgbW9kdWxlLgogICAgY29uc3QgeyBzdGFjayB9ID0gbmV3IEVycm9yKCk7CiAgICBpZiAodHlwZW9mIHN0YWNrICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHN0YWNrLnNwbGl0KCdcbicpLnNvbWUobCA9PiBsLmluZGV4T2YoJyhodHRwcy5qczonKSAhPT0gLTEgfHwgbC5pbmRleE9mKCdub2RlOmh0dHBzOicpICE9PSAtMSk7CiAgfQoKICBjcmVhdGVTb2NrZXQocmVxLCBvcHRpb25zLCBjYikgewogICAgY29uc3QgY29ubmVjdE9wdHMgPSB7CiAgICAgIC4uLm9wdGlvbnMsCiAgICAgIHNlY3VyZUVuZHBvaW50OiB0aGlzLmlzU2VjdXJlRW5kcG9pbnQob3B0aW9ucyksCiAgICB9OwogICAgUHJvbWlzZS5yZXNvbHZlKCkKICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jb25uZWN0KHJlcSwgY29ubmVjdE9wdHMpKQogICAgICAudGhlbihzb2NrZXQgPT4gewogICAgICAgIGlmIChzb2NrZXQgaW5zdGFuY2VvZiBodHRwLkFnZW50KSB7CiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGBhZGRSZXF1ZXN0KClgIGlzbid0IGRlZmluZWQgaW4gYEB0eXBlcy9ub2RlYAogICAgICAgICAgcmV0dXJuIHNvY2tldC5hZGRSZXF1ZXN0KHJlcSwgY29ubmVjdE9wdHMpOwogICAgICAgIH0KICAgICAgICB0aGlzW0lOVEVSTkFMXS5jdXJyZW50U29ja2V0ID0gc29ja2V0OwogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYGNyZWF0ZVNvY2tldCgpYCBpc24ndCBkZWZpbmVkIGluIGBAdHlwZXMvbm9kZWAKICAgICAgICBzdXBlci5jcmVhdGVTb2NrZXQocmVxLCBvcHRpb25zLCBjYik7CiAgICAgIH0sIGNiKTsKICB9CgogIGNyZWF0ZUNvbm5lY3Rpb24oKSB7CiAgICBjb25zdCBzb2NrZXQgPSB0aGlzW0lOVEVSTkFMXS5jdXJyZW50U29ja2V0OwogICAgdGhpc1tJTlRFUk5BTF0uY3VycmVudFNvY2tldCA9IHVuZGVmaW5lZDsKICAgIGlmICghc29ja2V0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc29ja2V0IHdhcyByZXR1cm5lZCBpbiB0aGUgYGNvbm5lY3QoKWAgZnVuY3Rpb24nKTsKICAgIH0KICAgIHJldHVybiBzb2NrZXQ7CiAgfQoKICBnZXQgZGVmYXVsdFBvcnQoKSB7CiAgICByZXR1cm4gX251bGxpc2hDb2FsZXNjZSQyKHRoaXNbSU5URVJOQUxdLmRlZmF1bHRQb3J0LCAoKSA9PiAoICh0aGlzLnByb3RvY29sID09PSAnaHR0cHM6JyA/IDQ0MyA6IDgwKSkpOwogIH0KCiAgc2V0IGRlZmF1bHRQb3J0KHYpIHsKICAgIGlmICh0aGlzW0lOVEVSTkFMXSkgewogICAgICB0aGlzW0lOVEVSTkFMXS5kZWZhdWx0UG9ydCA9IHY7CiAgICB9CiAgfQoKICBnZXQgcHJvdG9jb2woKSB7CiAgICByZXR1cm4gX251bGxpc2hDb2FsZXNjZSQyKHRoaXNbSU5URVJOQUxdLnByb3RvY29sLCAoKSA9PiAoICh0aGlzLmlzU2VjdXJlRW5kcG9pbnQoKSA/ICdodHRwczonIDogJ2h0dHA6JykpKTsKICB9CgogIHNldCBwcm90b2NvbCh2KSB7CiAgICBpZiAodGhpc1tJTlRFUk5BTF0pIHsKICAgICAgdGhpc1tJTlRFUk5BTF0ucHJvdG9jb2wgPSB2OwogICAgfQogIH0KfQoKZnVuY3Rpb24gZGVidWckMSguLi5hcmdzKSB7CiAgbG9nZ2VyLmxvZygnW2h0dHBzLXByb3h5LWFnZW50OnBhcnNlLXByb3h5LXJlc3BvbnNlXScsIC4uLmFyZ3MpOwp9CgpmdW5jdGlvbiBwYXJzZVByb3h5UmVzcG9uc2Uoc29ja2V0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIC8vIHdlIG5lZWQgdG8gYnVmZmVyIGFueSBIVFRQIHRyYWZmaWMgdGhhdCBoYXBwZW5zIHdpdGggdGhlIHByb3h5IGJlZm9yZSB3ZSBnZXQKICAgIC8vIHRoZSBDT05ORUNUIHJlc3BvbnNlLCBzbyB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGFuICIyMDAiCiAgICAvLyByZXNwb25zZSBjb2RlLCB0aGVuIHdlIGNhbiByZS1wbGF5IHRoZSAiZGF0YSIgZXZlbnRzIG9uIHRoZSBzb2NrZXQgb25jZSB0aGUKICAgIC8vIEhUVFAgcGFyc2VyIGlzIGhvb2tlZCB1cC4uLgogICAgbGV0IGJ1ZmZlcnNMZW5ndGggPSAwOwogICAgY29uc3QgYnVmZmVycyA9IFtdOwoKICAgIGZ1bmN0aW9uIHJlYWQoKSB7CiAgICAgIGNvbnN0IGIgPSBzb2NrZXQucmVhZCgpOwogICAgICBpZiAoYikgb25kYXRhKGIpOwogICAgICBlbHNlIHNvY2tldC5vbmNlKCdyZWFkYWJsZScsIHJlYWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwogICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcigncmVhZGFibGUnLCByZWFkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgICAgY2xlYW51cCgpOwogICAgICBkZWJ1ZyQxKCdvbmVuZCcpOwogICAgICByZWplY3QobmV3IEVycm9yKCdQcm94eSBjb25uZWN0aW9uIGVuZGVkIGJlZm9yZSByZWNlaXZpbmcgQ09OTkVDVCByZXNwb25zZScpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmVycm9yKGVycikgewogICAgICBjbGVhbnVwKCk7CiAgICAgIGRlYnVnJDEoJ29uZXJyb3IgJW8nLCBlcnIpOwogICAgICByZWplY3QoZXJyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbmRhdGEoYikgewogICAgICBidWZmZXJzLnB1c2goYik7CiAgICAgIGJ1ZmZlcnNMZW5ndGggKz0gYi5sZW5ndGg7CgogICAgICBjb25zdCBidWZmZXJlZCA9IEJ1ZmZlci5jb25jYXQoYnVmZmVycywgYnVmZmVyc0xlbmd0aCk7CiAgICAgIGNvbnN0IGVuZE9mSGVhZGVycyA9IGJ1ZmZlcmVkLmluZGV4T2YoJ1xyXG5cclxuJyk7CgogICAgICBpZiAoZW5kT2ZIZWFkZXJzID09PSAtMSkgewogICAgICAgIC8vIGtlZXAgYnVmZmVyaW5nCiAgICAgICAgZGVidWckMSgnaGF2ZSBub3QgcmVjZWl2ZWQgZW5kIG9mIEhUVFAgaGVhZGVycyB5ZXQuLi4nKTsKICAgICAgICByZWFkKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBoZWFkZXJQYXJ0cyA9IGJ1ZmZlcmVkLnNsaWNlKDAsIGVuZE9mSGVhZGVycykudG9TdHJpbmcoJ2FzY2lpJykuc3BsaXQoJ1xyXG4nKTsKICAgICAgY29uc3QgZmlyc3RMaW5lID0gaGVhZGVyUGFydHMuc2hpZnQoKTsKICAgICAgaWYgKCFmaXJzdExpbmUpIHsKICAgICAgICBzb2NrZXQuZGVzdHJveSgpOwogICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdObyBoZWFkZXIgcmVjZWl2ZWQgZnJvbSBwcm94eSBDT05ORUNUIHJlc3BvbnNlJykpOwogICAgICB9CiAgICAgIGNvbnN0IGZpcnN0TGluZVBhcnRzID0gZmlyc3RMaW5lLnNwbGl0KCcgJyk7CiAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSArZmlyc3RMaW5lUGFydHNbMV07CiAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBmaXJzdExpbmVQYXJ0cy5zbGljZSgyKS5qb2luKCcgJyk7CiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTsKICAgICAgZm9yIChjb25zdCBoZWFkZXIgb2YgaGVhZGVyUGFydHMpIHsKICAgICAgICBpZiAoIWhlYWRlcikgY29udGludWU7CiAgICAgICAgY29uc3QgZmlyc3RDb2xvbiA9IGhlYWRlci5pbmRleE9mKCc6Jyk7CiAgICAgICAgaWYgKGZpcnN0Q29sb24gPT09IC0xKSB7CiAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpOwogICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgaGVhZGVyIGZyb20gcHJveHkgQ09OTkVDVCByZXNwb25zZTogIiR7aGVhZGVyfSJgKSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGtleSA9IGhlYWRlci5zbGljZSgwLCBmaXJzdENvbG9uKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGNvbnN0IHZhbHVlID0gaGVhZGVyLnNsaWNlKGZpcnN0Q29sb24gKyAxKS50cmltU3RhcnQoKTsKICAgICAgICBjb25zdCBjdXJyZW50ID0gaGVhZGVyc1trZXldOwogICAgICAgIGlmICh0eXBlb2YgY3VycmVudCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGhlYWRlcnNba2V5XSA9IFtjdXJyZW50LCB2YWx1ZV07CiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnQpKSB7CiAgICAgICAgICBjdXJyZW50LnB1c2godmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoZWFkZXJzW2tleV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGVidWckMSgnZ290IHByb3h5IHNlcnZlciByZXNwb25zZTogJW8gJW8nLCBmaXJzdExpbmUsIGhlYWRlcnMpOwogICAgICBjbGVhbnVwKCk7CiAgICAgIHJlc29sdmUoewogICAgICAgIGNvbm5lY3Q6IHsKICAgICAgICAgIHN0YXR1c0NvZGUsCiAgICAgICAgICBzdGF0dXNUZXh0LAogICAgICAgICAgaGVhZGVycywKICAgICAgICB9LAogICAgICAgIGJ1ZmZlcmVkLAogICAgICB9KTsKICAgIH0KCiAgICBzb2NrZXQub24oJ2Vycm9yJywgb25lcnJvcik7CiAgICBzb2NrZXQub24oJ2VuZCcsIG9uZW5kKTsKCiAgICByZWFkKCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIF9udWxsaXNoQ29hbGVzY2UkMShsaHMsIHJoc0ZuKSB7IGlmIChsaHMgIT0gbnVsbCkgeyByZXR1cm4gbGhzOyB9IGVsc2UgeyByZXR1cm4gcmhzRm4oKTsgfSB9IGZ1bmN0aW9uIF9vcHRpb25hbENoYWluJDEob3BzKSB7IGxldCBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyBsZXQgdmFsdWUgPSBvcHNbMF07IGxldCBpID0gMTsgd2hpbGUgKGkgPCBvcHMubGVuZ3RoKSB7IGNvbnN0IG9wID0gb3BzW2ldOyBjb25zdCBmbiA9IG9wc1tpICsgMV07IGkgKz0gMjsgaWYgKChvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpICYmIHZhbHVlID09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBpZiAob3AgPT09ICdhY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnKSB7IGxhc3RBY2Nlc3NMSFMgPSB2YWx1ZTsgdmFsdWUgPSBmbih2YWx1ZSk7IH0gZWxzZSBpZiAob3AgPT09ICdjYWxsJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpIHsgdmFsdWUgPSBmbigoLi4uYXJncykgPT4gdmFsdWUuY2FsbChsYXN0QWNjZXNzTEhTLCAuLi5hcmdzKSk7IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IH0gfSByZXR1cm4gdmFsdWU7IH0KCmZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHsKICBsb2dnZXIubG9nKCdbaHR0cHMtcHJveHktYWdlbnRdJywgLi4uYXJncyk7Cn0KCi8qKgogKiBUaGUgYEh0dHBzUHJveHlBZ2VudGAgaW1wbGVtZW50cyBhbiBIVFRQIEFnZW50IHN1YmNsYXNzIHRoYXQgY29ubmVjdHMgdG8KICogdGhlIHNwZWNpZmllZCAiSFRUUChzKSBwcm94eSBzZXJ2ZXIiIGluIG9yZGVyIHRvIHByb3h5IEhUVFBTIHJlcXVlc3RzLgogKgogKiBPdXRnb2luZyBIVFRQIHJlcXVlc3RzIGFyZSBmaXJzdCB0dW5uZWxlZCB0aHJvdWdoIHRoZSBwcm94eSBzZXJ2ZXIgdXNpbmcgdGhlCiAqIGBDT05ORUNUYCBIVFRQIHJlcXVlc3QgbWV0aG9kIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5IHNlcnZlciwKICogYW5kIHRoZW4gdGhlIHByb3h5IHNlcnZlciBjb25uZWN0cyB0byB0aGUgZGVzdGluYXRpb24gdGFyZ2V0IGFuZCBpc3N1ZXMgdGhlCiAqIEhUVFAgcmVxdWVzdCBmcm9tIHRoZSBwcm94eSBzZXJ2ZXIuCiAqCiAqIGBodHRwczpgIHJlcXVlc3RzIGhhdmUgdGhlaXIgc29ja2V0IGNvbm5lY3Rpb24gdXBncmFkZWQgdG8gVExTIG9uY2UKICogdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5IHNlcnZlciBoYXMgYmVlbiBlc3RhYmxpc2hlZC4KICovCmNsYXNzIEh0dHBzUHJveHlBZ2VudCBleHRlbmRzIEFnZW50IHsKICBzdGF0aWMgX19pbml0U3RhdGljKCkge3RoaXMucHJvdG9jb2xzID0gWydodHRwJywgJ2h0dHBzJ107IH0KCiAgY29uc3RydWN0b3IocHJveHksIG9wdHMpIHsKICAgIHN1cGVyKG9wdHMpOwogICAgdGhpcy5vcHRpb25zID0ge307CiAgICB0aGlzLnByb3h5ID0gdHlwZW9mIHByb3h5ID09PSAnc3RyaW5nJyA/IG5ldyBVUkwocHJveHkpIDogcHJveHk7CiAgICB0aGlzLnByb3h5SGVhZGVycyA9IF9udWxsaXNoQ29hbGVzY2UkMShfb3B0aW9uYWxDaGFpbiQxKFtvcHRzLCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5oZWFkZXJzXSksICgpID0+ICgge30pKTsKICAgIGRlYnVnKCdDcmVhdGluZyBuZXcgSHR0cHNQcm94eUFnZW50IGluc3RhbmNlOiAlbycsIHRoaXMucHJveHkuaHJlZik7CgogICAgLy8gVHJpbSBvZmYgdGhlIGJyYWNrZXRzIGZyb20gSVB2NiBhZGRyZXNzZXMKICAgIGNvbnN0IGhvc3QgPSAodGhpcy5wcm94eS5ob3N0bmFtZSB8fCB0aGlzLnByb3h5Lmhvc3QpLnJlcGxhY2UoL15cW3xcXSQvZywgJycpOwogICAgY29uc3QgcG9ydCA9IHRoaXMucHJveHkucG9ydCA/IHBhcnNlSW50KHRoaXMucHJveHkucG9ydCwgMTApIDogdGhpcy5wcm94eS5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyA0NDMgOiA4MDsKICAgIHRoaXMuY29ubmVjdE9wdHMgPSB7CiAgICAgIC8vIEF0dGVtcHQgdG8gbmVnb3RpYXRlIGh0dHAvMS4xIGZvciBwcm94eSBzZXJ2ZXJzIHRoYXQgc3VwcG9ydCBodHRwLzIKICAgICAgQUxQTlByb3RvY29sczogWydodHRwLzEuMSddLAogICAgICAuLi4ob3B0cyA/IG9taXQob3B0cywgJ2hlYWRlcnMnKSA6IG51bGwpLAogICAgICBob3N0LAogICAgICBwb3J0LAogICAgfTsKICB9CgogIC8qKgogICAqIENhbGxlZCB3aGVuIHRoZSBub2RlLWNvcmUgSFRUUCBjbGllbnQgbGlicmFyeSBpcyBjcmVhdGluZyBhCiAgICogbmV3IEhUVFAgcmVxdWVzdC4KICAgKi8KICBhc3luYyBjb25uZWN0KHJlcSwgb3B0cykgewogICAgY29uc3QgeyBwcm94eSB9ID0gdGhpczsKCiAgICBpZiAoIW9wdHMuaG9zdCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyAiaG9zdCIgcHJvdmlkZWQnKTsKICAgIH0KCiAgICAvLyBDcmVhdGUgYSBzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgcHJveHkgc2VydmVyLgogICAgbGV0IHNvY2tldDsKICAgIGlmIChwcm94eS5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHsKICAgICAgZGVidWcoJ0NyZWF0aW5nIGB0bHMuU29ja2V0YDogJW8nLCB0aGlzLmNvbm5lY3RPcHRzKTsKICAgICAgY29uc3Qgc2VydmVybmFtZSA9IHRoaXMuY29ubmVjdE9wdHMuc2VydmVybmFtZSB8fCB0aGlzLmNvbm5lY3RPcHRzLmhvc3Q7CiAgICAgIHNvY2tldCA9IHRscy5jb25uZWN0KHsKICAgICAgICAuLi50aGlzLmNvbm5lY3RPcHRzLAogICAgICAgIHNlcnZlcm5hbWU6IHNlcnZlcm5hbWUgJiYgbmV0LmlzSVAoc2VydmVybmFtZSkgPyB1bmRlZmluZWQgOiBzZXJ2ZXJuYW1lLAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGRlYnVnKCdDcmVhdGluZyBgbmV0LlNvY2tldGA6ICVvJywgdGhpcy5jb25uZWN0T3B0cyk7CiAgICAgIHNvY2tldCA9IG5ldC5jb25uZWN0KHRoaXMuY29ubmVjdE9wdHMpOwogICAgfQoKICAgIGNvbnN0IGhlYWRlcnMgPQogICAgICB0eXBlb2YgdGhpcy5wcm94eUhlYWRlcnMgPT09ICdmdW5jdGlvbicgPyB0aGlzLnByb3h5SGVhZGVycygpIDogeyAuLi50aGlzLnByb3h5SGVhZGVycyB9OwogICAgY29uc3QgaG9zdCA9IG5ldC5pc0lQdjYob3B0cy5ob3N0KSA/IGBbJHtvcHRzLmhvc3R9XWAgOiBvcHRzLmhvc3Q7CiAgICBsZXQgcGF5bG9hZCA9IGBDT05ORUNUICR7aG9zdH06JHtvcHRzLnBvcnR9IEhUVFAvMS4xXHJcbmA7CgogICAgLy8gSW5qZWN0IHRoZSBgUHJveHktQXV0aG9yaXphdGlvbmAgaGVhZGVyIGlmIG5lY2Vzc2FyeS4KICAgIGlmIChwcm94eS51c2VybmFtZSB8fCBwcm94eS5wYXNzd29yZCkgewogICAgICBjb25zdCBhdXRoID0gYCR7ZGVjb2RlVVJJQ29tcG9uZW50KHByb3h5LnVzZXJuYW1lKX06JHtkZWNvZGVVUklDb21wb25lbnQocHJveHkucGFzc3dvcmQpfWA7CiAgICAgIGhlYWRlcnNbJ1Byb3h5LUF1dGhvcml6YXRpb24nXSA9IGBCYXNpYyAke0J1ZmZlci5mcm9tKGF1dGgpLnRvU3RyaW5nKCdiYXNlNjQnKX1gOwogICAgfQoKICAgIGhlYWRlcnMuSG9zdCA9IGAke2hvc3R9OiR7b3B0cy5wb3J0fWA7CgogICAgaWYgKCFoZWFkZXJzWydQcm94eS1Db25uZWN0aW9uJ10pIHsKICAgICAgaGVhZGVyc1snUHJveHktQ29ubmVjdGlvbiddID0gdGhpcy5rZWVwQWxpdmUgPyAnS2VlcC1BbGl2ZScgOiAnY2xvc2UnOwogICAgfQogICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKGhlYWRlcnMpKSB7CiAgICAgIHBheWxvYWQgKz0gYCR7bmFtZX06ICR7aGVhZGVyc1tuYW1lXX1cclxuYDsKICAgIH0KCiAgICBjb25zdCBwcm94eVJlc3BvbnNlUHJvbWlzZSA9IHBhcnNlUHJveHlSZXNwb25zZShzb2NrZXQpOwoKICAgIHNvY2tldC53cml0ZShgJHtwYXlsb2FkfVxyXG5gKTsKCiAgICBjb25zdCB7IGNvbm5lY3QsIGJ1ZmZlcmVkIH0gPSBhd2FpdCBwcm94eVJlc3BvbnNlUHJvbWlzZTsKICAgIHJlcS5lbWl0KCdwcm94eUNvbm5lY3QnLCBjb25uZWN0KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQKICAgIC8vIEB0cy1pZ25vcmUgTm90IEV2ZW50RW1pdHRlciBpbiBOb2RlIHR5cGVzCiAgICB0aGlzLmVtaXQoJ3Byb3h5Q29ubmVjdCcsIGNvbm5lY3QsIHJlcSk7CgogICAgaWYgKGNvbm5lY3Quc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgIHJlcS5vbmNlKCdzb2NrZXQnLCByZXN1bWUpOwoKICAgICAgaWYgKG9wdHMuc2VjdXJlRW5kcG9pbnQpIHsKICAgICAgICAvLyBUaGUgcHJveHkgaXMgY29ubmVjdGluZyB0byBhIFRMUyBzZXJ2ZXIsIHNvIHVwZ3JhZGUKICAgICAgICAvLyB0aGlzIHNvY2tldCBjb25uZWN0aW9uIHRvIGEgVExTIGNvbm5lY3Rpb24uCiAgICAgICAgZGVidWcoJ1VwZ3JhZGluZyBzb2NrZXQgY29ubmVjdGlvbiB0byBUTFMnKTsKICAgICAgICBjb25zdCBzZXJ2ZXJuYW1lID0gb3B0cy5zZXJ2ZXJuYW1lIHx8IG9wdHMuaG9zdDsKICAgICAgICByZXR1cm4gdGxzLmNvbm5lY3QoewogICAgICAgICAgLi4ub21pdChvcHRzLCAnaG9zdCcsICdwYXRoJywgJ3BvcnQnKSwKICAgICAgICAgIHNvY2tldCwKICAgICAgICAgIHNlcnZlcm5hbWU6IG5ldC5pc0lQKHNlcnZlcm5hbWUpID8gdW5kZWZpbmVkIDogc2VydmVybmFtZSwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNvY2tldDsKICAgIH0KCiAgICAvLyBTb21lIG90aGVyIHN0YXR1cyBjb2RlIHRoYXQncyBub3QgMjAwLi4uIG5lZWQgdG8gcmUtcGxheSB0aGUgSFRUUAogICAgLy8gaGVhZGVyICJkYXRhIiBldmVudHMgb250byB0aGUgc29ja2V0IG9uY2UgdGhlIEhUVFAgbWFjaGluZXJ5IGlzCiAgICAvLyBhdHRhY2hlZCBzbyB0aGF0IHRoZSBub2RlIGNvcmUgYGh0dHBgIGNhbiBwYXJzZSBhbmQgaGFuZGxlIHRoZQogICAgLy8gZXJyb3Igc3RhdHVzIGNvZGUuCgogICAgLy8gQ2xvc2UgdGhlIG9yaWdpbmFsIHNvY2tldCwgYW5kIGEgbmV3ICJmYWtlIiBzb2NrZXQgaXMgcmV0dXJuZWQKICAgIC8vIGluc3RlYWQsIHNvIHRoYXQgdGhlIHByb3h5IGRvZXNuJ3QgZ2V0IHRoZSBIVFRQIHJlcXVlc3QKICAgIC8vIHdyaXR0ZW4gdG8gaXQgKHdoaWNoIG1heSBjb250YWluIGBBdXRob3JpemF0aW9uYCBoZWFkZXJzIG9yIG90aGVyCiAgICAvLyBzZW5zaXRpdmUgZGF0YSkuCiAgICAvLwogICAgLy8gU2VlOiBodHRwczovL2hhY2tlcm9uZS5jb20vcmVwb3J0cy81NDE1MDIKICAgIHNvY2tldC5kZXN0cm95KCk7CgogICAgY29uc3QgZmFrZVNvY2tldCA9IG5ldyBuZXQuU29ja2V0KHsgd3JpdGFibGU6IGZhbHNlIH0pOwogICAgZmFrZVNvY2tldC5yZWFkYWJsZSA9IHRydWU7CgogICAgLy8gTmVlZCB0byB3YWl0IGZvciB0aGUgInNvY2tldCIgZXZlbnQgdG8gcmUtcGxheSB0aGUgImRhdGEiIGV2ZW50cy4KICAgIHJlcS5vbmNlKCdzb2NrZXQnLCAocykgPT4gewogICAgICBkZWJ1ZygnUmVwbGF5aW5nIHByb3h5IGJ1ZmZlciBmb3IgZmFpbGVkIHJlcXVlc3QnKTsKICAgICAgLy8gUmVwbGF5IHRoZSAiYnVmZmVyZWQiIEJ1ZmZlciBvbnRvIHRoZSBmYWtlIGBzb2NrZXRgLCBzaW5jZSBhdAogICAgICAvLyB0aGlzIHBvaW50IHRoZSBIVFRQIG1vZHVsZSBtYWNoaW5lcnkgaGFzIGJlZW4gaG9va2VkIHVwIGZvcgogICAgICAvLyB0aGUgdXNlci4KICAgICAgcy5wdXNoKGJ1ZmZlcmVkKTsKICAgICAgcy5wdXNoKG51bGwpOwogICAgfSk7CgogICAgcmV0dXJuIGZha2VTb2NrZXQ7CiAgfQp9IEh0dHBzUHJveHlBZ2VudC5fX2luaXRTdGF0aWMoKTsKCmZ1bmN0aW9uIHJlc3VtZShzb2NrZXQpIHsKICBzb2NrZXQucmVzdW1lKCk7Cn0KCmZ1bmN0aW9uIG9taXQoCiAgb2JqLAogIC4uLmtleXMKKQoKIHsKICBjb25zdCByZXQgPSB7fQoKOwogIGxldCBrZXk7CiAgZm9yIChrZXkgaW4gb2JqKSB7CiAgICBpZiAoIWtleXMuaW5jbHVkZXMoa2V5KSkgewogICAgICByZXRba2V5XSA9IG9ialtrZXldOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBfbnVsbGlzaENvYWxlc2NlKGxocywgcmhzRm4pIHsgaWYgKGxocyAhPSBudWxsKSB7IHJldHVybiBsaHM7IH0gZWxzZSB7IHJldHVybiByaHNGbigpOyB9IH0KLy8gRXN0aW1hdGVkIG1heGltdW0gc2l6ZSBmb3IgcmVhc29uYWJsZSBzdGFuZGFsb25lIGV2ZW50CmNvbnN0IEdaSVBfVEhSRVNIT0xEID0gMTAyNCAqIDMyOwoKLyoqCiAqIEdldHMgYSBzdHJlYW0gZnJvbSBhIFVpbnQ4QXJyYXkgb3Igc3RyaW5nCiAqIFJlYWRhYmxlLmZyb20gaXMgaWRlYWwgYnV0IHdhcyBhZGRlZCBpbiBub2RlLmpzIHYxMi4zLjAgYW5kIHYxMC4xNy4wCiAqLwpmdW5jdGlvbiBzdHJlYW1Gcm9tQm9keShib2R5KSB7CiAgcmV0dXJuIG5ldyBSZWFkYWJsZSh7CiAgICByZWFkKCkgewogICAgICB0aGlzLnB1c2goYm9keSk7CiAgICAgIHRoaXMucHVzaChudWxsKTsKICAgIH0sCiAgfSk7Cn0KCi8qKgogKiBDcmVhdGVzIGEgVHJhbnNwb3J0IHRoYXQgdXNlcyBuYXRpdmUgdGhlIG5hdGl2ZSAnaHR0cCcgYW5kICdodHRwcycgbW9kdWxlcyB0byBzZW5kIGV2ZW50cyB0byBTZW50cnkuCiAqLwpmdW5jdGlvbiBtYWtlTm9kZVRyYW5zcG9ydChvcHRpb25zKSB7CiAgbGV0IHVybFNlZ21lbnRzOwoKICB0cnkgewogICAgdXJsU2VnbWVudHMgPSBuZXcgVVJMKG9wdGlvbnMudXJsKTsKICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlU2FuZGJveCgoKSA9PiB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgIGNvbnNvbGUud2FybigKICAgICAgICAnW0BzZW50cnkvbm9kZV06IEludmFsaWQgZHNuIG9yIHR1bm5lbCBvcHRpb24sIHdpbGwgbm90IHNlbmQgYW55IGV2ZW50cy4gVGhlIHR1bm5lbCBvcHRpb24gbXVzdCBiZSBhIGZ1bGwgVVJMIHdoZW4gdXNlZC4nLAogICAgICApOwogICAgfSk7CiAgICByZXR1cm4gY3JlYXRlVHJhbnNwb3J0KG9wdGlvbnMsICgpID0+IFByb21pc2UucmVzb2x2ZSh7fSkpOwogIH0KCiAgY29uc3QgaXNIdHRwcyA9IHVybFNlZ21lbnRzLnByb3RvY29sID09PSAnaHR0cHM6JzsKCiAgLy8gUHJveHkgcHJpb3JpdGl6YXRpb246IGh0dHAgPT4gYG9wdGlvbnMucHJveHlgIHwgYHByb2Nlc3MuZW52Lmh0dHBfcHJveHlgCiAgLy8gUHJveHkgcHJpb3JpdGl6YXRpb246IGh0dHBzID0+IGBvcHRpb25zLnByb3h5YCB8IGBwcm9jZXNzLmVudi5odHRwc19wcm94eWAgfCBgcHJvY2Vzcy5lbnYuaHR0cF9wcm94eWAKICBjb25zdCBwcm94eSA9IGFwcGx5Tm9Qcm94eU9wdGlvbigKICAgIHVybFNlZ21lbnRzLAogICAgb3B0aW9ucy5wcm94eSB8fCAoaXNIdHRwcyA/IHByb2Nlc3MuZW52Lmh0dHBzX3Byb3h5IDogdW5kZWZpbmVkKSB8fCBwcm9jZXNzLmVudi5odHRwX3Byb3h5LAogICk7CgogIGNvbnN0IG5hdGl2ZUh0dHBNb2R1bGUgPSBpc0h0dHBzID8gaHR0cHMgOiBodHRwOwogIGNvbnN0IGtlZXBBbGl2ZSA9IG9wdGlvbnMua2VlcEFsaXZlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG9wdGlvbnMua2VlcEFsaXZlOwoKICAvLyBUT0RPKHY3KTogRXZhbHVhdGUgaWYgd2UgY2FuIHNldCBrZWVwQWxpdmUgdG8gdHJ1ZS4gVGhpcyB3b3VsZCBpbnZvbHZlIHRlc3RpbmcgZm9yIG1lbW9yeSBsZWFrcyBpbiBvbGRlciBub2RlCiAgLy8gdmVyc2lvbnMoPj0gOCkgYXMgdGhleSBoYWQgbWVtb3J5IGxlYWtzIHdoZW4gdXNpbmcgaXQ6ICMyNTU1CiAgY29uc3QgYWdlbnQgPSBwcm94eQogICAgPyAobmV3IEh0dHBzUHJveHlBZ2VudChwcm94eSkgKQogICAgOiBuZXcgbmF0aXZlSHR0cE1vZHVsZS5BZ2VudCh7IGtlZXBBbGl2ZSwgbWF4U29ja2V0czogMzAsIHRpbWVvdXQ6IDIwMDAgfSk7CgogIGNvbnN0IHJlcXVlc3RFeGVjdXRvciA9IGNyZWF0ZVJlcXVlc3RFeGVjdXRvcihvcHRpb25zLCBfbnVsbGlzaENvYWxlc2NlKG9wdGlvbnMuaHR0cE1vZHVsZSwgKCkgPT4gKCBuYXRpdmVIdHRwTW9kdWxlKSksIGFnZW50KTsKICByZXR1cm4gY3JlYXRlVHJhbnNwb3J0KG9wdGlvbnMsIHJlcXVlc3RFeGVjdXRvcik7Cn0KCi8qKgogKiBIb25vcnMgdGhlIGBub19wcm94eWAgZW52IHZhcmlhYmxlIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgdG8gYWxsb3cgZm9yIGhvc3RzIGV4Y2x1c2lvbi4KICoKICogQHBhcmFtIHRyYW5zcG9ydFVybCBUaGUgVVJMIHRoZSB0cmFuc3BvcnQgaW50ZW5kcyB0byBzZW5kIGV2ZW50cyB0by4KICogQHBhcmFtIHByb3h5IFRoZSBjbGllbnQgY29uZmlndXJlZCBwcm94eS4KICogQHJldHVybnMgQSBwcm94eSB0aGUgdHJhbnNwb3J0IHNob3VsZCB1c2UuCiAqLwpmdW5jdGlvbiBhcHBseU5vUHJveHlPcHRpb24odHJhbnNwb3J0VXJsU2VnbWVudHMsIHByb3h5KSB7CiAgY29uc3QgeyBub19wcm94eSB9ID0gcHJvY2Vzcy5lbnY7CgogIGNvbnN0IHVybElzRXhlbXB0RnJvbVByb3h5ID0KICAgIG5vX3Byb3h5ICYmCiAgICBub19wcm94eQogICAgICAuc3BsaXQoJywnKQogICAgICAuc29tZSgKICAgICAgICBleGVtcHRpb24gPT4gdHJhbnNwb3J0VXJsU2VnbWVudHMuaG9zdC5lbmRzV2l0aChleGVtcHRpb24pIHx8IHRyYW5zcG9ydFVybFNlZ21lbnRzLmhvc3RuYW1lLmVuZHNXaXRoKGV4ZW1wdGlvbiksCiAgICAgICk7CgogIGlmICh1cmxJc0V4ZW1wdEZyb21Qcm94eSkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9IGVsc2UgewogICAgcmV0dXJuIHByb3h5OwogIH0KfQoKLyoqCiAqIENyZWF0ZXMgYSBSZXF1ZXN0RXhlY3V0b3IgdG8gYmUgdXNlZCB3aXRoIGBjcmVhdGVUcmFuc3BvcnRgLgogKi8KZnVuY3Rpb24gY3JlYXRlUmVxdWVzdEV4ZWN1dG9yKAogIG9wdGlvbnMsCiAgaHR0cE1vZHVsZSwKICBhZ2VudCwKKSB7CiAgY29uc3QgeyBob3N0bmFtZSwgcGF0aG5hbWUsIHBvcnQsIHByb3RvY29sLCBzZWFyY2ggfSA9IG5ldyBVUkwob3B0aW9ucy51cmwpOwogIHJldHVybiBmdW5jdGlvbiBtYWtlUmVxdWVzdChyZXF1ZXN0KSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgYm9keSA9IHN0cmVhbUZyb21Cb2R5KHJlcXVlc3QuYm9keSk7CgogICAgICBjb25zdCBoZWFkZXJzID0geyAuLi5vcHRpb25zLmhlYWRlcnMgfTsKCiAgICAgIGlmIChyZXF1ZXN0LmJvZHkubGVuZ3RoID4gR1pJUF9USFJFU0hPTEQpIHsKICAgICAgICBoZWFkZXJzWydjb250ZW50LWVuY29kaW5nJ10gPSAnZ3ppcCc7CiAgICAgICAgYm9keSA9IGJvZHkucGlwZShjcmVhdGVHemlwKCkpOwogICAgICB9CgogICAgICBjb25zdCByZXEgPSBodHRwTW9kdWxlLnJlcXVlc3QoCiAgICAgICAgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICBhZ2VudCwKICAgICAgICAgIGhlYWRlcnMsCiAgICAgICAgICBob3N0bmFtZSwKICAgICAgICAgIHBhdGg6IGAke3BhdGhuYW1lfSR7c2VhcmNofWAsCiAgICAgICAgICBwb3J0LAogICAgICAgICAgcHJvdG9jb2wsCiAgICAgICAgICBjYTogb3B0aW9ucy5jYUNlcnRzLAogICAgICAgIH0sCiAgICAgICAgcmVzID0+IHsKICAgICAgICAgIHJlcy5vbignZGF0YScsICgpID0+IHsKICAgICAgICAgICAgLy8gRHJhaW4gc29ja2V0CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXMub24oJ2VuZCcsICgpID0+IHsKICAgICAgICAgICAgLy8gRHJhaW4gc29ja2V0CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXMuc2V0RW5jb2RpbmcoJ3V0ZjgnKTsKCiAgICAgICAgICAvLyAiS2V5LXZhbHVlIHBhaXJzIG9mIGhlYWRlciBuYW1lcyBhbmQgdmFsdWVzLiBIZWFkZXIgbmFtZXMgYXJlIGxvd2VyLWNhc2VkLiIKICAgICAgICAgIC8vIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzCiAgICAgICAgICBjb25zdCByZXRyeUFmdGVySGVhZGVyID0gX251bGxpc2hDb2FsZXNjZShyZXMuaGVhZGVyc1sncmV0cnktYWZ0ZXInXSwgKCkgPT4gKCBudWxsKSk7CiAgICAgICAgICBjb25zdCByYXRlTGltaXRzSGVhZGVyID0gX251bGxpc2hDb2FsZXNjZShyZXMuaGVhZGVyc1sneC1zZW50cnktcmF0ZS1saW1pdHMnXSwgKCkgPT4gKCBudWxsKSk7CgogICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ3JldHJ5LWFmdGVyJzogcmV0cnlBZnRlckhlYWRlciwKICAgICAgICAgICAgICAneC1zZW50cnktcmF0ZS1saW1pdHMnOiBBcnJheS5pc0FycmF5KHJhdGVMaW1pdHNIZWFkZXIpID8gcmF0ZUxpbWl0c0hlYWRlclswXSA6IHJhdGVMaW1pdHNIZWFkZXIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICApOwoKICAgICAgcmVxLm9uKCdlcnJvcicsIHJlamVjdCk7CiAgICAgIGJvZHkucGlwZShyZXEpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX29wdGlvbmFsQ2hhaW4ob3BzKSB7IGxldCBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyBsZXQgdmFsdWUgPSBvcHNbMF07IGxldCBpID0gMTsgd2hpbGUgKGkgPCBvcHMubGVuZ3RoKSB7IGNvbnN0IG9wID0gb3BzW2ldOyBjb25zdCBmbiA9IG9wc1tpICsgMV07IGkgKz0gMjsgaWYgKChvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpICYmIHZhbHVlID09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBpZiAob3AgPT09ICdhY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnKSB7IGxhc3RBY2Nlc3NMSFMgPSB2YWx1ZTsgdmFsdWUgPSBmbih2YWx1ZSk7IH0gZWxzZSBpZiAob3AgPT09ICdjYWxsJyB8fCBvcCA9PT0gJ29wdGlvbmFsQ2FsbCcpIHsgdmFsdWUgPSBmbigoLi4uYXJncykgPT4gdmFsdWUuY2FsbChsYXN0QWNjZXNzTEhTLCAuLi5hcmdzKSk7IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IH0gfSByZXR1cm4gdmFsdWU7IH0KY29uc3Qgb3B0aW9ucyA9IHdvcmtlckRhdGE7CmxldCBzZXNzaW9uOwpsZXQgaGFzU2VudEFuckV2ZW50ID0gZmFsc2U7CgpmdW5jdGlvbiBsb2cobXNnKSB7CiAgaWYgKG9wdGlvbnMuZGVidWcpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICBjb25zb2xlLmxvZyhgW0FOUiBXb3JrZXJdICR7bXNnfWApOwogIH0KfQoKY29uc3QgdXJsID0gZ2V0RW52ZWxvcGVFbmRwb2ludFdpdGhVcmxFbmNvZGVkQXV0aChvcHRpb25zLmRzbik7CmNvbnN0IHRyYW5zcG9ydCA9IG1ha2VOb2RlVHJhbnNwb3J0KHsKICB1cmwsCiAgcmVjb3JkRHJvcHBlZEV2ZW50OiAoKSA9PiB7CiAgICAvLwogIH0sCn0pOwoKYXN5bmMgZnVuY3Rpb24gc2VuZEFibm9ybWFsU2Vzc2lvbigpIHsKICAvLyBvZiB3ZSBoYXZlIGFuIGV4aXN0aW5nIHNlc3Npb24gcGFzc2VkIGZyb20gdGhlIG1haW4gdGhyZWFkLCBzZW5kIGl0IGFzIGFibm9ybWFsCiAgaWYgKHNlc3Npb24pIHsKICAgIGxvZygnU2VuZGluZyBhYm5vcm1hbCBzZXNzaW9uJyk7CiAgICB1cGRhdGVTZXNzaW9uKHNlc3Npb24sIHsgc3RhdHVzOiAnYWJub3JtYWwnLCBhYm5vcm1hbF9tZWNoYW5pc206ICdhbnJfZm9yZWdyb3VuZCcgfSk7CgogICAgY29uc3QgZW52ZWxvcGUgPSBjcmVhdGVTZXNzaW9uRW52ZWxvcGUoc2Vzc2lvbiwgb3B0aW9ucy5kc24sIG9wdGlvbnMuc2RrTWV0YWRhdGEpOwogICAgLy8gTG9nIHRoZSBlbnZlbG9wZSBzbyB0byBhaWQgaW4gdGVzdGluZwogICAgbG9nKEpTT04uc3RyaW5naWZ5KGVudmVsb3BlKSk7CgogICAgYXdhaXQgdHJhbnNwb3J0LnNlbmQoZW52ZWxvcGUpOwoKICAgIHRyeSB7CiAgICAgIC8vIE5vdGlmeSB0aGUgbWFpbiBwcm9jZXNzIHRoYXQgdGhlIHNlc3Npb24gaGFzIGVuZGVkIHNvIHRoZSBzZXNzaW9uIGNhbiBiZSBjbGVhcmVkIGZyb20gdGhlIHNjb3BlCiAgICAgIF9vcHRpb25hbENoYWluKFtwYXJlbnRQb3J0LCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5wb3N0TWVzc2FnZSwgJ2NhbGwnLCBfMyA9PiBfMygnc2Vzc2lvbi1lbmRlZCcpXSk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vIGlnbm9yZQogICAgfQogIH0KfQoKbG9nKCdTdGFydGVkJyk7CgpmdW5jdGlvbiBwcmVwYXJlU3RhY2tGcmFtZXMoc3RhY2tGcmFtZXMpIHsKICBpZiAoIXN0YWNrRnJhbWVzKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgLy8gU3RyaXAgU2VudHJ5IGZyYW1lcyBhbmQgcmV2ZXJzZSB0aGUgc3RhY2sgZnJhbWVzIHNvIHRoZXkgYXJlIGluIHRoZSBjb3JyZWN0IG9yZGVyCiAgY29uc3Qgc3RyaXBwZWRGcmFtZXMgPSBzdHJpcFNlbnRyeUZyYW1lc0FuZFJldmVyc2Uoc3RhY2tGcmFtZXMpOwoKICAvLyBJZiB3ZSBoYXZlIGFuIGFwcCByb290IHBhdGgsIHJld3JpdGUgdGhlIGZpbGVuYW1lcyB0byBiZSByZWxhdGl2ZSB0byB0aGUgYXBwIHJvb3QKICBpZiAob3B0aW9ucy5hcHBSb290UGF0aCkgewogICAgZm9yIChjb25zdCBmcmFtZSBvZiBzdHJpcHBlZEZyYW1lcykgewogICAgICBpZiAoIWZyYW1lLmZpbGVuYW1lKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGZyYW1lLmZpbGVuYW1lID0gbm9ybWFsaXplVXJsVG9CYXNlKGZyYW1lLmZpbGVuYW1lLCBvcHRpb25zLmFwcFJvb3RQYXRoKTsKICAgIH0KICB9CgogIHJldHVybiBzdHJpcHBlZEZyYW1lczsKfQoKZnVuY3Rpb24gYXBwbHlTY29wZVRvRXZlbnQoZXZlbnQsIHNjb3BlKSB7CiAgYXBwbHlTY29wZURhdGFUb0V2ZW50KGV2ZW50LCBzY29wZSk7CgogIGlmICghX29wdGlvbmFsQ2hhaW4oW2V2ZW50LCAnYWNjZXNzJywgXzQgPT4gXzQuY29udGV4dHMsICdvcHRpb25hbEFjY2VzcycsIF81ID0+IF81LnRyYWNlXSkpIHsKICAgIGNvbnN0IHsgdHJhY2VJZCwgc3BhbklkLCBwYXJlbnRTcGFuSWQgfSA9IHNjb3BlLnByb3BhZ2F0aW9uQ29udGV4dDsKICAgIGV2ZW50LmNvbnRleHRzID0gewogICAgICB0cmFjZTogewogICAgICAgIHRyYWNlX2lkOiB0cmFjZUlkLAogICAgICAgIHNwYW5faWQ6IHNwYW5JZCwKICAgICAgICBwYXJlbnRfc3Bhbl9pZDogcGFyZW50U3BhbklkLAogICAgICB9LAogICAgICAuLi5ldmVudC5jb250ZXh0cywKICAgIH07CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBzZW5kQW5yRXZlbnQoZnJhbWVzLCBzY29wZSkgewogIGlmIChoYXNTZW50QW5yRXZlbnQpIHsKICAgIHJldHVybjsKICB9CgogIGhhc1NlbnRBbnJFdmVudCA9IHRydWU7CgogIGF3YWl0IHNlbmRBYm5vcm1hbFNlc3Npb24oKTsKCiAgbG9nKCdTZW5kaW5nIGV2ZW50Jyk7CgogIGNvbnN0IGV2ZW50ID0gewogICAgZXZlbnRfaWQ6IHV1aWQ0KCksCiAgICBjb250ZXh0czogb3B0aW9ucy5jb250ZXh0cywKICAgIHJlbGVhc2U6IG9wdGlvbnMucmVsZWFzZSwKICAgIGVudmlyb25tZW50OiBvcHRpb25zLmVudmlyb25tZW50LAogICAgZGlzdDogb3B0aW9ucy5kaXN0LAogICAgcGxhdGZvcm06ICdub2RlJywKICAgIGxldmVsOiAnZXJyb3InLAogICAgZXhjZXB0aW9uOiB7CiAgICAgIHZhbHVlczogWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICdBcHBsaWNhdGlvbk5vdFJlc3BvbmRpbmcnLAogICAgICAgICAgdmFsdWU6IGBBcHBsaWNhdGlvbiBOb3QgUmVzcG9uZGluZyBmb3IgYXQgbGVhc3QgJHtvcHRpb25zLmFuclRocmVzaG9sZH0gbXNgLAogICAgICAgICAgc3RhY2t0cmFjZTogeyBmcmFtZXM6IHByZXBhcmVTdGFja0ZyYW1lcyhmcmFtZXMpIH0sCiAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIFVJIGRvZXNuJ3Qgc2F5ICdDcmFzaGVkIGluJyBmb3IgdGhlIHN0YWNrIHRyYWNlCiAgICAgICAgICBtZWNoYW5pc206IHsgdHlwZTogJ0FOUicgfSwKICAgICAgICB9LAogICAgICBdLAogICAgfSwKICAgIHRhZ3M6IG9wdGlvbnMuc3RhdGljVGFncywKICB9OwoKICBpZiAoc2NvcGUpIHsKICAgIGFwcGx5U2NvcGVUb0V2ZW50KGV2ZW50LCBzY29wZSk7CiAgfQoKICBjb25zdCBlbnZlbG9wZSA9IGNyZWF0ZUV2ZW50RW52ZWxvcGUoZXZlbnQsIG9wdGlvbnMuZHNuLCBvcHRpb25zLnNka01ldGFkYXRhKTsKICAvLyBMb2cgdGhlIGVudmVsb3BlIHRvIGFpZCBpbiB0ZXN0aW5nCiAgbG9nKEpTT04uc3RyaW5naWZ5KGVudmVsb3BlKSk7CgogIGF3YWl0IHRyYW5zcG9ydC5zZW5kKGVudmVsb3BlKTsKICBhd2FpdCB0cmFuc3BvcnQuZmx1c2goMjAwMCk7CgogIC8vIERlbGF5IGZvciA1IHNlY29uZHMgc28gdGhhdCBzdGRpbyBjYW4gZmx1c2ggaW4gdGhlIG1haW4gZXZlbnQgbG9vcCBldmVyIHJlc3RhcnRzLgogIC8vIFRoaXMgaXMgbWFpbmx5IGZvciB0aGUgYmVuZWZpdCBvZiBsb2dnaW5nL2RlYnVnZ2luZyBpc3N1ZXMuCiAgc2V0VGltZW91dCgoKSA9PiB7CiAgICBwcm9jZXNzLmV4aXQoMCk7CiAgfSwgNTAwMCk7Cn0KCmxldCBkZWJ1Z2dlclBhdXNlOwoKaWYgKG9wdGlvbnMuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICBsb2coJ0Nvbm5lY3RpbmcgdG8gZGVidWdnZXInKTsKCiAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCkgOwogIHNlc3Npb24uY29ubmVjdFRvTWFpblRocmVhZCgpOwoKICBsb2coJ0Nvbm5lY3RlZCB0byBkZWJ1Z2dlcicpOwoKICAvLyBDb2xsZWN0IHNjcmlwdElkIC0+IHVybCBtYXAgc28gd2UgY2FuIGxvb2sgdXAgdGhlIGZpbGVuYW1lcyBsYXRlcgogIGNvbnN0IHNjcmlwdHMgPSBuZXcgTWFwKCk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnNjcmlwdFBhcnNlZCcsIGV2ZW50ID0+IHsKICAgIHNjcmlwdHMuc2V0KGV2ZW50LnBhcmFtcy5zY3JpcHRJZCwgZXZlbnQucGFyYW1zLnVybCk7CiAgfSk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnBhdXNlZCcsIGV2ZW50ID0+IHsKICAgIGlmIChldmVudC5wYXJhbXMucmVhc29uICE9PSAnb3RoZXInKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICBsb2coJ0RlYnVnZ2VyIHBhdXNlZCcpOwoKICAgICAgLy8gY29weSB0aGUgZnJhbWVzCiAgICAgIGNvbnN0IGNhbGxGcmFtZXMgPSBbLi4uZXZlbnQucGFyYW1zLmNhbGxGcmFtZXNdOwoKICAgICAgY29uc3QgZ2V0TW9kdWxlTmFtZSA9IG9wdGlvbnMuYXBwUm9vdFBhdGggPyBjcmVhdGVHZXRNb2R1bGVGcm9tRmlsZW5hbWUob3B0aW9ucy5hcHBSb290UGF0aCkgOiAoKSA9PiB1bmRlZmluZWQ7CiAgICAgIGNvbnN0IHN0YWNrRnJhbWVzID0gY2FsbEZyYW1lcy5tYXAoZnJhbWUgPT4KICAgICAgICBjYWxsRnJhbWVUb1N0YWNrRnJhbWUoZnJhbWUsIHNjcmlwdHMuZ2V0KGZyYW1lLmxvY2F0aW9uLnNjcmlwdElkKSwgZ2V0TW9kdWxlTmFtZSksCiAgICAgICk7CgogICAgICAvLyBFdmFsdWF0ZSBhIHNjcmlwdCBpbiB0aGUgY3VycmVudGx5IHBhdXNlZCBjb250ZXh0CiAgICAgIHNlc3Npb24ucG9zdCgKICAgICAgICAnUnVudGltZS5ldmFsdWF0ZScsCiAgICAgICAgewogICAgICAgICAgLy8gR3JhYiB0aGUgdHJhY2UgY29udGV4dCBmcm9tIHRoZSBjdXJyZW50IHNjb3BlCiAgICAgICAgICBleHByZXNzaW9uOiAnZ2xvYmFsLl9fU0VOVFJZX0dFVF9TQ09QRVNfXygpOycsCiAgICAgICAgICAvLyBEb24ndCByZS10cmlnZ2VyIHRoZSBkZWJ1Z2dlciBpZiB0aGlzIGNhdXNlcyBhbiBlcnJvcgogICAgICAgICAgc2lsZW50OiB0cnVlLAogICAgICAgICAgLy8gU2VyaWFsaXplIHRoZSByZXN1bHQgdG8ganNvbiBvdGhlcndpc2Ugb25seSBwcmltaXRpdmVzIGFyZSBzdXBwb3J0ZWQKICAgICAgICAgIHJldHVybkJ5VmFsdWU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICAoZXJyLCBwYXJhbSkgPT4gewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBsb2coYEVycm9yIGV4ZWN1dGluZyBzY3JpcHQ6ICcke2Vyci5tZXNzYWdlfSdgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBzY29wZXMgPSBwYXJhbSAmJiBwYXJhbS5yZXN1bHQgPyAocGFyYW0ucmVzdWx0LnZhbHVlICkgOiB1bmRlZmluZWQ7CgogICAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5yZXN1bWUnKTsKICAgICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwoKICAgICAgICAgIHNlbmRBbnJFdmVudChzdGFja0ZyYW1lcywgc2NvcGVzKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgICAgICAgbG9nKCdTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQuJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICApOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzZXNzaW9uLnBvc3QoJ0RlYnVnZ2VyLnJlc3VtZScpOwogICAgICBzZXNzaW9uLnBvc3QoJ0RlYnVnZ2VyLmRpc2FibGUnKTsKICAgICAgdGhyb3cgZTsKICAgIH0KICB9KTsKCiAgZGVidWdnZXJQYXVzZSA9ICgpID0+IHsKICAgIHRyeSB7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZW5hYmxlJywgKCkgPT4gewogICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIucGF1c2UnKTsKICAgICAgfSk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vCiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gY3JlYXRlSHJUaW1lcigpIHsKICAvLyBUT0RPICh2OCk6IFdlIGNhbiB1c2UgcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCkgYWZ0ZXIgd2UgZHJvcCBub2RlIHY4CiAgbGV0IGxhc3RQb2xsID0gcHJvY2Vzcy5ocnRpbWUoKTsKCiAgcmV0dXJuIHsKICAgIGdldFRpbWVNczogKCkgPT4gewogICAgICBjb25zdCBbc2Vjb25kcywgbmFub1NlY29uZHNdID0gcHJvY2Vzcy5ocnRpbWUobGFzdFBvbGwpOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihzZWNvbmRzICogMWUzICsgbmFub1NlY29uZHMgLyAxZTYpOwogICAgfSwKICAgIHJlc2V0OiAoKSA9PiB7CiAgICAgIGxhc3RQb2xsID0gcHJvY2Vzcy5ocnRpbWUoKTsKICAgIH0sCiAgfTsKfQoKZnVuY3Rpb24gd2F0Y2hkb2dUaW1lb3V0KCkgewogIGxvZygnV2F0Y2hkb2cgdGltZW91dCcpOwoKICBpZiAoZGVidWdnZXJQYXVzZSkgewogICAgbG9nKCdQYXVzaW5nIGRlYnVnZ2VyIHRvIGNhcHR1cmUgc3RhY2sgdHJhY2UnKTsKICAgIGRlYnVnZ2VyUGF1c2UoKTsKICB9IGVsc2UgewogICAgbG9nKCdDYXB0dXJpbmcgZXZlbnQgd2l0aG91dCBhIHN0YWNrIHRyYWNlJyk7CiAgICBzZW5kQW5yRXZlbnQoKS50aGVuKG51bGwsICgpID0+IHsKICAgICAgbG9nKCdTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQgb24gd2F0Y2hkb2cgdGltZW91dC4nKTsKICAgIH0pOwogIH0KfQoKY29uc3QgeyBwb2xsIH0gPSB3YXRjaGRvZ1RpbWVyKGNyZWF0ZUhyVGltZXIsIG9wdGlvbnMucG9sbEludGVydmFsLCBvcHRpb25zLmFuclRocmVzaG9sZCwgd2F0Y2hkb2dUaW1lb3V0KTsKCl9vcHRpb25hbENoYWluKFtwYXJlbnRQb3J0LCAnb3B0aW9uYWxBY2Nlc3MnLCBfNiA9PiBfNi5vbiwgJ2NhbGwnLCBfNyA9PiBfNygnbWVzc2FnZScsIChtc2cpID0+IHsKICBpZiAobXNnLnNlc3Npb24pIHsKICAgIHNlc3Npb24gPSBtYWtlU2Vzc2lvbihtc2cuc2Vzc2lvbik7CiAgfQoKICBwb2xsKCk7Cn0pXSk7",Cq=50,bq=5e3;function ZA(e,...t){he.log(`[ANR] ${e}`,...t)}function Aq(){return $t}function Sq(){const e=TR().getScopeData();return xI(e,xs().getScopeData()),xI(e,cn().getScopeData()),e.attachments=[],e.eventProcessors=[],e}function _q(){return qy(module,"worker_threads")}async function wq(e){let t={message:"ANR"};const n={};for(const r of e.getEventProcessors()){if(t===null)break;t=await r(t,n)}return He([t,"optionalAccess",r=>r.contexts])||{}}const uP="Anr",Bq=(e={})=>{if(al.major<16||al.major===16&&al.minor<17)throw new Error("ANR detection requires Node 16.17.0 or later");let t,n;const r=Aq();return r.__SENTRY_GET_SCOPES__=Sq,{name:uP,setupOnce(){},startWorker:()=>{t||n&&(t=Rq(n,e))},stopWorker:()=>{t&&t.then(i=>{i(),t=void 0})},setup(i){n=i,setImmediate(()=>this.startWorker())}}},dP=Bq,Eq=zt(uP,dP);async function Rq(e,t){const n=e.getDsn();if(!n)return()=>{};const r=await wq(e);W2([r,"access",u=>u.app,"optionalAccess",u=>delete u.app_memory]),W2([r,"access",u=>u.device,"optionalAccess",u=>delete u.free_memory]);const i=e.getOptions(),o=e.getSdkMetadata()||{};o.sdk&&(o.sdk.integrations=i.integrations.map(u=>u.name));const s={debug:he.isEnabled(),dsn:n,environment:i.environment||"production",release:i.release,dist:i.dist,sdkMetadata:o,appRootPath:t.appRootPath,pollInterval:t.pollInterval||Cq,anrThreshold:t.anrThreshold||bq,captureStackTrace:!!t.captureStackTrace,staticTags:t.staticTags||{},contexts:r};if(s.captureStackTrace){const u=Qx;u.url()||u.open(0)}const{Worker:a}=_q(),l=new a(new Sr.URL(`data:application/javascript;base64,${vq}`),{workerData:s});process.on("exit",()=>{l.terminate()});const c=setInterval(()=>{try{const u=cn().getSession(),d=u?{...u,toJSON:void 0}:void 0;l.postMessage({session:d})}catch{}},s.pollInterval);return c.unref(),l.on("message",u=>{u==="session-ended"&&(ZA("ANR event sent from ANR worker. Clearing session in this thread."),cn().setSession(void 0))}),l.once("error",u=>{clearInterval(c),ZA("ANR worker error",u)}),l.once("exit",u=>{clearInterval(c),ZA("ANR worker exit",u)}),l.unref(),()=>{l.terminate(),clearInterval(c)}}function aT(e){return e&&e.statusCode!==void 0}function Gq(e){return e&&e.error!==void 0}function Nq(e){xp(e,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}})}const Zq={name:"SentryHapiErrorPlugin",version:Fh,register:async function(e){e.events.on("request",(n,r)=>{const i=Od();Gq(r)&&Nq(r.error),i&&(i.setStatus("internal_error"),i.end())})}},Tq={name:"SentryHapiTracingPlugin",version:Fh,register:async function(e){const t=e;t.ext("onPreHandler",(n,r)=>{const i=nY({sentryTrace:n.headers["sentry-trace"]||void 0,baggage:n.headers.baggage||void 0},o=>$L({...o,op:"hapi.request",name:n.route.path,description:`${n.route.method} ${n.path}`}));return cn().setSpan(i),r.continue}),t.ext("onPreResponse",(n,r)=>{const i=Od();if(n.response&&aT(n.response)&&i){const o=n.response;o.header("sentry-trace",Fp(i));const s=VC(Rl(i));s&&o.header("baggage",s)}return r.continue}),t.ext("onPostHandler",(n,r)=>{const i=Od();return i&&(n.response&&aT(n.response)&&xh(i,n.response.statusCode),i.end()),r.continue})}},fP="Hapi",Wq=(e={})=>{const t=e.server;return{name:fP,setupOnce(){t&&on(t,"start",n=>async function(){return await this.register(Tq),await this.register(Zq),n.apply(this)})}}},kq=Wq,Vq=zt(fP,kq),Oq=Object.freeze(Object.defineProperty({__proto__:null,Anr:Eq,Console:n6,Context:s6,ContextLines:b6,Hapi:Vq,Http:Wc,LocalVariables:P6,Modules:$6,OnUncaughtException:j6,OnUnhandledRejection:eq,RequestData:rQ,Spotlight:iq,Undici:yi},Symbol.toStringTag,{value:"Module"})),Hq=Object.freeze(Object.defineProperty({__proto__:null,Apollo:eb,Express:$C,GraphQL:qC,Mongo:jC,Mysql:JC,Postgres:zC,Prisma:QC},Symbol.toStringTag,{value:"Module"}));tb();const Fq={...wY,...Oq,...Hq};function Zt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}const Pa="sentry-ipc";var vi;(function(e){e.RENDERER_START="sentry-electron.renderer-start",e.EVENT="sentry-electron.event",e.SCOPE="sentry-electron.scope",e.ENVELOPE="sentry-electron.envelope",e.STATUS="sentry-electron.status",e.ADD_METRIC="sentry-electron.add-metric"})(vi||(vi={}));const lT="sentry-electron-renderer-id",TA=NL(process.versions.electron),Ar={major:TA.major||0,minor:TA.minor||0,patch:TA.patch||0},UR=Ar.major,xq=(()=>{const e=mt.basename(process.execPath).toLowerCase();return process.platform==="win32"?e!=="electron.exe":e!=="electron"})(),nb=(()=>J.app?J.app.isReady()?Promise.resolve():new Promise(e=>{J.app.once("ready",()=>{e()})}):Promise.resolve())();function cT(){return Ar.major>=5}const Q_=["clean-exit","abnormal-exit","killed","crashed","oom","launch-failed","integrity-failure"],Lq=["crashed","oom"];function DR(e,t){Ar.major>=10||Ar.major===9&&Ar.minor>=1||Ar.major===8&&Ar.minor>=4?J.app.on("render-process-gone",(r,i,o)=>{e.includes(o.reason)&&t(i,o)}):KR(r=>{r.on("crashed",(i,o)=>{const s=PI()&&o?"killed":"crashed";e.includes(s)&&t(r,{reason:s})})})}function gP(e,t){Ar.major>=11?J.app.on("child-process-gone",(n,r)=>{e.includes(r.reason)&&t(r)}):J.app.on("gpu-process-crashed",(n,r)=>{const i=r?"killed":"crashed";e.includes(i)&&t({type:"GPU",reason:i})})}function Yq(e){J.app.on("browser-window-created",(t,n)=>{Ar.major>=3?e(n):setImmediate(()=>{n.isDestroyed()||e(n)})})}function KR(e){J.app.on("web-contents-created",(t,n)=>{Ar.major>=3?e(n):setImmediate(()=>{n.isDestroyed()||e(n)})})}function hP(){return process.platform==="darwin"?!1:Ar.major<9}function Pq(){return Ar.major>=16?!0:Ar.major<15?!1:J.app.commandLine.hasSwitch("enable-crashpad")}function PI(){return process.platform==="darwin"||process.platform==="win32"&&Ar.major>=6||process.platform==="linux"&&Pq()}function pP(){return Ar.major>=9?J.app.getPath("crashDumps"):J.crashReporter.getCrashesDirectory()}function Xq(e){return Ar.major<5?new Promise(t=>{e.capturePage(t)}):e.capturePage()}function Uq(){return Ar.major>=25}function Dq(e,t,n){Uq()?e.handle(t,r=>Zt(this,void 0,void 0,function*(){return n({windowId:r.headers.get(lT)||void 0,url:r.url,body:Buffer.from(yield r.arrayBuffer())}),new Response("")})):e.registerStringProtocol(t,(r,i)=>{var o,s;n({windowId:r.headers[lT],url:r.url,body:(s=(o=r.uploadData)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.bytes}),i("")})}let ih;function mP(){if(ih)return;const e=ih=new Map;function t(r,i){const o=e.get(r)||{id:r};o.url=na(i,J.app.getAppPath()),e.set(r,o)}function n(r,i){const o=e.get(r)||{id:r};o.title=i,e.set(r,o)}KR(r=>{const i=r.id;r.on("did-navigate",(o,s)=>t(i,s)),r.on("did-navigate-in-page",(o,s)=>t(i,s)),r.on("page-title-updated",(o,s)=>n(i,s)),r.on("destroyed",()=>{setTimeout(()=>{e.delete(i)},5e3)})})}function yP(e){return ih==null?void 0:ih.get(e)}const Kq={app:e=>!e.startsWith("remote-"),autoUpdater:()=>!0,webContents:e=>["dom-ready","context-menu","load-url","destroyed"].includes(e),browserWindow:e=>["closed","close","unresponsive","responsive","show","blur","focus","hide","maximize","minimize","restore","enter-full-screen","leave-full-screen"].includes(e),screen:()=>!0,powerMonitor:()=>!0,captureWindowTitles:!1};function Mq(e){return Object.keys(e).reduce((t,n)=>{if(n==="captureWindowTitles")t[n]=!!e[n];else{const r=e[n];Array.isArray(r)?t[n]=i=>r.includes(i):(typeof r=="function"||r===!1)&&(t[n]=r)}return t},{})}const IP="ElectronBreadcrumbs",MR=(e={})=>{const t=Object.assign(Object.assign({},Kq),Mq(e));function n(r,i,o,s){const a=r.emit.bind(r);r.emit=(l,...c)=>{var u,d;if(o&&o(l)){const g={category:"electron",message:`${i}.${l}`,timestamp:new Date().getTime()/1e3,type:"ui"};s&&(g.data=Object.assign({},yP(s)),!t.captureWindowTitles&&(!((u=g.data)===null||u===void 0)&&u.title)&&((d=g.data)===null||d===void 0||delete d.title)),wr(g)}return a(l,...c)}}return{name:IP,setupOnce(){},setup(r){const i=r.getOptions();mP(),nb.then(()=>{t.screen&&n(J.screen,"screen",t.screen),t.powerMonitor&&n(J.powerMonitor,"powerMonitor",t.powerMonitor)},()=>{}),t.app&&n(J.app,"app",t.app),t.autoUpdater&&n(J.autoUpdater,"autoUpdater",t.autoUpdater),t.browserWindow&&Yq(o=>{var s;const a=o.webContents.id,l=((s=i==null?void 0:i.getRendererName)===null||s===void 0?void 0:s.call(i,o.webContents))||"window";n(o,l,t.browserWindow,a)}),t.webContents&&KR(o=>{var s;const a=o.id,l=((s=i==null?void 0:i.getRendererName)===null||s===void 0?void 0:s.call(i,o))||"renderer";n(o,l,t.webContents,a)})}}},$q=zt(IP,MR),vP="OnUncaughtException",$R=()=>({name:vP,setupOnce(){},setup(e){const t=e.getOptions();global.process.on("uncaughtException",n=>{const r=cn();r.addEventProcessor(i=>Zt(this,void 0,void 0,function*(){return Object.assign(Object.assign({},i),{level:"fatal"})})),e.captureException(n,{originalException:n,data:{mechanism:{handled:!1,type:"generic"}}},r),e.flush(t.shutdownTimeout||2e3).then(()=>{if(t!=null&&t.onFatalError)t.onFatalError(n);else if(global.process.listenerCount("uncaughtException")<=2){console.error("Uncaught Exception:"),console.error(n);const i=n.stack,s=`Uncaught Exception:
${i!==void 0?i:`${n.name}: ${n.message}`}`;J.dialog.showErrorBox("A JavaScript error occurred in the main process",s)}},()=>{})})}}),zq=zt(vP,$R);function zR(){return mt.join(J.app.getPath("userData"),"sentry")}const CP=gr.promisify(Rn.writeFile),rb=gr.promisify(Rn.readFile),uT=gr.promisify(Rn.mkdir),q_=gr.promisify(Rn.stat),Xp=gr.promisify(Rn.unlink),JR=gr.promisify(Rn.readdir);function bP(e){return Zt(this,void 0,void 0,function*(){const t=mt.resolve(e);try{yield uT(t,511)}catch(n){const r=n;r&&r.code==="ENOENT"&&(yield bP(mt.dirname(t)),yield uT(t,511));try{if(!Rn.statSync(t).isDirectory())throw n}catch{throw n}}})}const dT="4.23.0",Jq="sentry.javascript.electron",jq={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},Qq=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],qq={alpine:e=>e,arch:e=>Is(/distrib_release=(.*)/,e),centos:e=>Is(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>Is(/release (..)/,e),mint:e=>Is(/distrib_release=(.*)/,e),red:e=>Is(/release ([^ ]+)/,e),suse:e=>Is(/VERSION = (.*)\n/,e),ubuntu:e=>Is(/distrib_release=(.*)/,e)};function Is(e,t){const n=e.exec(t);return n?n[1]:void 0}function eee(){return Zt(this,void 0,void 0,function*(){const e={kernel_version:Ri.release(),name:"Mac OS X",version:`10.${Number(Ri.release().split(".")[0])-4}`};try{const t=yield new Promise((n,r)=>{IJ.execFile("/usr/bin/sw_vers",(i,o)=>{if(i){r(i);return}n(o)})});e.name=Is(/^ProductName:\s+(.*)$/m,t),e.version=Is(/^ProductVersion:\s+(.*)$/m,t),e.build=Is(/^BuildVersion:\s+(.*)$/m,t)}catch{}return e})}function fT(e){return e.split(" ")[0].toLowerCase()}function tee(){return Zt(this,void 0,void 0,function*(){const e={kernel_version:Ri.release(),name:"Linux"};try{const t=yield JR("/etc"),n=Qq.find(a=>t.includes(a.name));if(!n)return e;const r=mt.join("/etc",n.name),i=(yield rb(r,{encoding:"utf-8"})).toLowerCase(),{distros:o}=n;e.name=o.find(a=>i.indexOf(fT(a))>=0)||o[0];const s=fT(e.name);e.version=qq[s](i)}catch{}return e})}function nee(){return Zt(this,void 0,void 0,function*(){const e=Ri.platform();switch(e){case"darwin":return eee();case"linux":return tee();default:return{name:jq[e]||e,version:Ri.release()}}})}function AP(){return{name:Jq,packages:[{name:"npm:@sentry/electron",version:dT}],version:dT}}function ree(){const e={app_name:J.app.name||J.app.getName(),app_version:J.app.getVersion(),app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString()};return process.mas&&(e.build_type="app-store"),process.windowsStore&&(e.build_type="windows-store"),e}function iee(){return Zt(this,void 0,void 0,function*(){return{app:ree(),os:yield nee(),browser:{name:"Chrome"},chrome:{name:"Chrome",type:"runtime",version:process.versions.chrome},device:{arch:process.arch,family:"Desktop"},node:{name:"Node",type:"runtime",version:process.versions.node},runtime:{name:"Electron",version:process.versions.electron}}})}function ib(){return`${(J.app.name||J.app.getName()).replace(/\W/g,"-")}@${J.app.getVersion()}`}function ob(){return xq?"production":"development"}function oee(e,t){return Zt(this,void 0,void 0,function*(){return{contexts:yield iee(),environment:t||ob(),release:e||ib(),user:{ip_address:"{{auto}}"},tags:{"event.origin":"electron","event.environment":"javascript","event.process":"browser",event_type:"javascript"}}})}let WA;function oh(e,t){return Zt(this,void 0,void 0,function*(){return WA||(WA=oee(e,t)),WA})}function SP(e,t){var n,r,i,o,s;for(const c of((n=e.exception)===null||n===void 0?void 0:n.values)||[])for(const u of((r=c.stacktrace)===null||r===void 0?void 0:r.frames)||[])u.filename&&(u.filename=na(u.filename,t));for(const c of((i=e.debug_meta)===null||i===void 0?void 0:i.images)||[])c.type==="sourcemap"&&(c.code_file=na(c.code_file,t));e.transaction&&(e.transaction=na(e.transaction,t));const{request:a={}}=e;a.url&&(a.url=na(a.url,t)),!((s=(o=e.contexts)===null||o===void 0?void 0:o.feedback)===null||s===void 0)&&s.url&&typeof e.contexts.feedback.url=="string"&&(e.contexts.feedback.url=na(e.contexts.feedback.url,t)),e.contexts=Object.assign(Object.assign({},e.contexts),{runtime:{name:"Electron",version:process.versions.electron}}),a.headers&&delete a.headers["User-Agent"];const{tags:l={}}=e;return delete l.server_name,delete e.server_name,e}function see(e,t){let n=Cf(e[0]),r=!1;return Oh(e,(i,o)=>{var s;if(o==="replay_event"){r=!0;const[a,l]=i;Array.isArray(l.urls)&&(l.urls=l.urls.map(c=>na(c,t))),!((s=l==null?void 0:l.request)===null||s===void 0)&&s.url&&(l.request.url=na(l.request.url,t)),n=U_(n,[a,l])}else o==="replay_recording"&&(n=U_(n,i))}),r?n:e}function aee(e,t){for(const n of e.profile.frames)n.abs_path&&(n.abs_path=na(n.abs_path,t))}var lee=function(t){return cee(t)&&!uee(t)};function cee(e){return!!e&&typeof e=="object"}function uee(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||gee(e)}var dee=typeof Symbol=="function"&&Symbol.for,fee=dee?Symbol.for("react.element"):60103;function gee(e){return e.$$typeof===fee}function hee(e){return Array.isArray(e)?[]:{}}function Yh(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Fd(hee(e),e,t):e}function pee(e,t,n){return e.concat(t).map(function(r){return Yh(r,n)})}function mee(e,t){if(!t.customMerge)return Fd;var n=t.customMerge(e);return typeof n=="function"?n:Fd}function yee(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function gT(e){return Object.keys(e).concat(yee(e))}function _P(e,t){try{return t in e}catch{return!1}}function Iee(e,t){return _P(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function vee(e,t,n){var r={};return n.isMergeableObject(e)&&gT(e).forEach(function(i){r[i]=Yh(e[i],n)}),gT(t).forEach(function(i){Iee(e,i)||(_P(e,i)&&n.isMergeableObject(t[i])?r[i]=mee(i,n)(e[i],t[i],n):r[i]=Yh(t[i],n))}),r}function Fd(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||pee,n.isMergeableObject=n.isMergeableObject||lee,n.cloneUnlessOtherwiseSpecified=Yh;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):vee(e,t,n):Yh(t,n)}Fd.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return Fd(r,i,n)},{})};var Cee=Fd,bee=Cee;const Aee=Ht(bee);function See(e){for(const t of e.spans||[])delete t.spanRecorder,delete t.transaction}function xd(e,t){See(t);const n=Aee(e,t);return(t.spans||e.spans)&&(n.spans=t.spans||e.spans),Object.assign(Object.assign({},n),{sdk:Object.assign(Object.assign({},e.sdk),t.sdk)})}const wP="MainContext",jR=()=>({name:wP,setupOnce(){},processEvent(e,t,n){return Zt(this,void 0,void 0,function*(){const r=n.getOptions(),i=SP(e,J.app.getAppPath()),o=yield oh(r.release,r.environment);return xd(o,i)})}}),_ee=zt(wP,jR);class BP{constructor(){this._entries=[],this._waiters=[],this._value=1}runExclusive(t){return Zt(this,void 0,void 0,function*(){const n=yield this._acquire();try{return yield t()}finally{n()}})}_acquire(){return new Promise((t,n)=>{this._entries.push({resolve:t,reject:n}),this._dispatch()})}_release(){this._value+=1,this._dispatch()}_dispatch(){var t;for(let n=this._value;n>0;n--){const r=(t=this._entries)===null||t===void 0?void 0:t.shift();r&&(this._value-=n,n=this._value+1,r.resolve(this._newReleaser()))}this._drainUnlockWaiters()}_newReleaser(){let t=!1;return()=>{t||(t=!0,this._release())}}_drainUnlockWaiters(){for(let t=this._value;t>0;t--)this._waiters[t-1]&&(this._waiters.forEach(n=>n()),this._waiters=[])}}const wee=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.*\d{0,10}Z$/;function Bee(e,t){return typeof t=="string"&&wee.test(t)?new Date(t):t}class EP{constructor(t,n,r){this._lock=new BP,this._path=mt.join(t,`${n}.json`),this._initial=r}set(t){return Zt(this,void 0,void 0,function*(){yield this._lock.runExclusive(()=>Zt(this,void 0,void 0,function*(){this._data=t;try{if(t===void 0)try{yield Xp(this._path)}catch{}else yield bP(mt.dirname(this._path)),yield CP(this._path,JSON.stringify(t))}catch(n){he.warn("Failed to write to store",n)}}))})}get(){return Zt(this,void 0,void 0,function*(){return this._lock.runExclusive(()=>Zt(this,void 0,void 0,function*(){if(this._data===void 0)try{this._data=JSON.parse(yield rb(this._path,"utf8"),Bee)}catch{this._data=this._initial}return this._data}))})}update(t){return Zt(this,void 0,void 0,function*(){yield this.set(t(yield this.get()))})}clear(){return Zt(this,void 0,void 0,function*(){yield this.set(this._initial)})}getModifiedDate(){var t;return Zt(this,void 0,void 0,function*(){try{return(t=yield q_(this._path))===null||t===void 0?void 0:t.mtime}catch{return}})}}class RP extends EP{constructor(t,n,r,i=500){super(t,n,r),this._throttleTime=i}set(t){var n;return Zt(this,void 0,void 0,function*(){this._data=t,this._pendingWrite={data:t,timeout:((n=this._pendingWrite)===null||n===void 0?void 0:n.timeout)||setTimeout(()=>this._writePending(),this._throttleTime)}})}_writePending(){if(this._pendingWrite){const t=this._pendingWrite.data;this._pendingWrite=void 0,super.set(t).catch(()=>{})}}}const GP=6e4;let ey,nI;function XI(){return ey||(ey=new EP(zR(),"session",void 0),nI=ey.get()),ey}let kc;function NP(e){const t=JL();e&&ZR(),XI().set(t).catch(()=>{}),kc=setInterval(()=>Zt(this,void 0,void 0,function*(){const n=cn().getSession();n&&n.status==="ok"&&(yield XI().set(n))}),GP)}function ZP(){return Zt(this,void 0,void 0,function*(){kc&&clearInterval(kc);const e=cn().getSession();e?e.status==="ok"?(he.log("Ending session"),xC()):he.log("Session was already ended"):he.log("No session"),yield XI().clear(),yield zL(2e3)})}function Eee(e){return Zt(this,void 0,void 0,function*(){if(!e)return!1;const t=yield XI().getModifiedDate();if(t===void 0)return!1;const n=t.getTime(),r=e.getTime(),i=n+GP,o=n-2e3;return r>o&&r<i})}function TP(e){var t,n;return Zt(this,void 0,void 0,function*(){const r=Tt(),i=yield nI;if(i&&r){if(i.status!=="ok"){nI=void 0;return}const o=e?"crashed":"abnormal";he.log(`Found previous ${o} session`);const s=RR(i);Ts(s,{status:o,errors:(s.errors||0)+1,release:(t=i.attrs)===null||t===void 0?void 0:t.release,environment:(n=i.attrs)===null||n===void 0?void 0:n.environment}),yield r.sendSession(s),nI=void 0}})}function ew(){kc&&clearInterval(kc),he.log("Session Crashed");const e=cn().getSession();if(!e){he.log("No session to update");return}if(e.status==="ok"){he.log("Setting session as crashed");const t=e.errors+1;Ts(e,{status:"crashed",errors:t})}else he.log("Session already ended");ZR()}function Ree(){kc&&clearInterval(kc);const e=cn().getSession();e&&e.status==="ok"&&(he.log("Setting session as abnormal ANR"),Ts(e,{status:"abnormal",abnormal_mechanism:"anr_foreground"}),ZR())}function WP(){J.app.on("before-quit",()=>{J.app.removeListener("will-quit",hT),J.app.on("will-quit",hT)})}const hT=e=>Zt(void 0,void 0,void 0,function*(){if(!e.defaultPrevented){he.log("[Session] Exit Handler"),e.preventDefault();try{yield ZP()}catch(t){he.warn("[Session] Error ending session:",t)}J.app.exit()}}),pT=30,Gee=24*3600*1e3,mT=1e3,Nee=5e3,kP=500,yT=Nee/kP,VP="MDMP";function Zee(e){return new Promise(t=>setTimeout(t,e))}function OP(e,t=n=>n){const n=new BP;return(r,i)=>Zt(this,void 0,void 0,function*(){yield n.runExclusive(()=>Zt(this,void 0,void 0,function*(){for(const o of yield e())try{if(r)continue;he.log("Found minidump",o);let s=yield q_(o);const a=new Date().getTime()-pT*Gee;if(s.mtimeMs<a){he.log(`Ignoring minidump as it is over ${pT} days old`);continue}let l=0;for(;l<=yT;){const c=new Date().getTime()-mT;if(s.mtimeMs<c){const u=yield rb(o),d=t(u);if(d.length<1e4||d.subarray(0,4).toString()!==VP){he.warn("Dropping minidump as it appears invalid.");break}he.log("Sending minidump"),i({attachmentType:"event.minidump",filename:kL(o),data:d});break}he.log(`Waiting. Minidump has been modified in the last ${mT} milliseconds.`),l+=1,yield Zee(kP),s=yield q_(o)}l>=yT&&he.warn("Timed out waiting for minidump to stop being modified")}catch(s){he.error("Failed to load minidump",s)}finally{try{yield Xp(o)}catch{he.warn("Could not delete minidump",o)}}}))})}function HP(e,t=100){return Zt(this,void 0,void 0,function*(){if(t>2e3)return;const n=mt.join(e,"metadata");try{yield Xp(n),he.log("Deleted Crashpad metadata file",n)}catch(r){r.code&&r.code=="EBUSY"&&setTimeout(()=>Zt(this,void 0,void 0,function*(){yield HP(e,t*2)}),t)}})}function Tee(e){return Zt(this,void 0,void 0,function*(){const t=[];for(const n of e)try{const r=yield JR(n);t.push(...r.map(i=>mt.join(n,i)))}catch{}return t})}function Wee(){const e=pP(),t=process.platform==="win32"?"reports":"completed",n=[mt.join(e,t)];return process.platform==="darwin"&&n.push(mt.join(e,"pending")),OP(()=>Zt(this,void 0,void 0,function*(){return yield HP(e).catch(i=>he.error(i)),(yield Tee(n)).filter(i=>i.endsWith(".dmp"))}))}function kee(e){const t=e.lastIndexOf("Content-Type: application/octet-stream");if(t>0){const n=e.indexOf(VP,t),r=e.lastIndexOf("----------------------------");if(n>0&&r>0&&r>n)return e.subarray(n,r)}return e}function Vee(e,t){Promise.all(t.filter(n=>n.endsWith(".txt")&&!n.endsWith("log.txt")).map(n=>Zt(this,void 0,void 0,function*(){const r=mt.join(e,n);try{yield Xp(r)}catch{he.warn("Could not delete",r)}}))).catch(()=>{})}function Oee(){const e=pP();return OP(()=>Zt(this,void 0,void 0,function*(){const t=yield JR(e);return Vee(e,t),t.filter(n=>n.endsWith(".dmp")).map(n=>mt.join(e,n))}),kee)}function Hee(){return PI()?Wee():Oee()}const FP="SentryMinidump",QR=(e={})=>{let t=e.maxMinidumpsPerSession||10,n,r,i;function o(){he.log("Starting Electron crashReporter"),J.crashReporter.start({companyName:"",ignoreSystemCrashHandler:!0,productName:J.app.name||J.app.getName(),submitURL:"https://f.a.k/e",uploadToServer:!1,compress:!0})}function s(u,d){const g=m=>{setImmediate(()=>Zt(this,void 0,void 0,function*(){return n==null?void 0:n.set({scope:m.getScopeData(),event:yield oh(u,d)})}))},p=cn();p&&(p.addScopeListener(g),g(p))}function a(u,d){var g,p,m,v;return Zt(this,void 0,void 0,function*(){const y=d;if(((g=y.tags)===null||g===void 0?void 0:g["event.process"])==="browser"){const A=yield r;A&&(A.scope&&LC(y,A.scope),y.release=((p=A.event)===null||p===void 0?void 0:p.release)||y.release,y.environment=((m=A.event)===null||m===void 0?void 0:m.environment)||y.environment,y.contexts=((v=A.event)===null||v===void 0?void 0:v.contexts)||y.contexts)}if(!y)return!1;t<=0&&he.log("Not sending minidumps because the limit has been reached");const I=u.getOptions().enabled===!1||t<=0;let b=!1;return yield i==null?void 0:i(I,A=>{b=!0,t>0&&(t-=1,bf(y,{attachments:[A]}))}),b})}function l(u,d,g,p){var m;return Zt(this,void 0,void 0,function*(){const{getRendererName:v,release:y,environment:I}=d,b=(v==null?void 0:v(g))||"renderer";he.log(`'${b}' process '${p.reason}'`);const A=xd(yield oh(y,I),{contexts:{electron:{crashed_url:((m=yP(g.id))===null||m===void 0?void 0:m.url)||"unknown",details:p}},level:"fatal",platform:"native",tags:{"event.environment":"native","event.process":b,"exit.reason":p.reason,event_type:"native"}});(yield a(u,A))&&ew()})}function c(u,d,g){return Zt(this,void 0,void 0,function*(){he.log(`${g.type} process has ${g.reason}`);const{release:p,environment:m}=d,v=xd(yield oh(p,m),{contexts:{electron:{details:g}},level:"fatal",platform:"native",tags:{"event.environment":"native","event.process":g.type,"exit.reason":g.reason,event_type:"native"}});(yield a(u,v))&&ew()})}return{name:FP,setupOnce(){},setup(u){if(process.mas)return;o(),n=new RP(zR(),"scope_v3",{scope:new Oo().getScopeData()}),r=n.get(),i=Hee();const d=u.getOptions(),g=(d==null?void 0:d.release)||ib(),p=(d==null?void 0:d.environment)||ob();if(s(g,p),!(d!=null&&d.dsn))throw new ni("Attempted to enable Electron native crash reporter but no DSN was supplied");mP(),DR(Q_,(m,v)=>l(u,d,m,v)),gP(Q_,m=>c(u,d,m)),a(u,{level:"fatal",platform:"native",tags:{"event.environment":"native","event.process":"browser",event_type:"native"}}).then(m=>TP(m)).catch(m=>he.error(m))}}},Fee=zt(FP,QR);function kA(e){return e!==void 0&&Object.keys(e).length>0}function xee(e){const t=cn().getScopeData();return t?Object.assign(Object.assign(Object.assign({release:e.release,environment:e.environment},kA(t.user)&&{user:t.user}),kA(t.tags)&&{tags:t.tags}),kA(t.extra)&&{extra:t.extra}):{}}function Lee(e){let n=Buffer.from(JSON.stringify(e));const r=[];for(;n.length;){let i=n.lastIndexOf(34,20301);i<0&&(i=n.lastIndexOf(32,20300+1)),i<0&&(i=n.indexOf(34,20300)),i<0&&(i=n.indexOf(32,20300)),i<0&&(i=20300),r.push(n.subarray(0,i+1).toString()),n=n.subarray(i+1)}return r.reduce((i,o,s)=>(i[`sentry__${s+1}`]=o,i),{})}function Yee(e){const t=CL(e);if(!t)return;const{host:n,path:r,projectId:i,port:o,protocol:s,publicKey:a}=t;return`${s}://${n}${o!==""?`:${o}`:""}${r!==""?`/${r}`:""}/api/${i}/minidump/?sentry_key=${a}`}const tw="ElectronMinidump",xP=()=>{let e=0,t;function n(s){return Zt(this,void 0,void 0,function*(){const a=xd(yield oh(t),{sdk:AP(),event_id:ln(),level:"fatal",platform:"native",tags:{"event.environment":"native",event_type:"native"}});return LC(a,s),delete a.sdkProcessingMetadata,SP(a,J.app.getAppPath())})}function r(s){e+=1;const a=e;n(s).then(l=>{if(a!==e)return;const c=Lee(l);for(const u of Object.keys(c))J.crashReporter.addExtraParameter(u,c[u])}).catch(l=>he.error(l))}function i(s){const a=Yee(s.dsn||"");if(!a){he.log("Invalid DSN. Cannot start Electron crashReporter");return}const l=PI()?{sentry___initialScope:JSON.stringify(xee(s))}:void 0;he.log("Starting Electron crashReporter"),J.crashReporter.start({companyName:"",ignoreSystemCrashHandler:!0,productName:J.app.name||J.app.getName(),submitURL:a,uploadToServer:!0,compress:!0,globalExtra:l})}function o(){cn().addScopeListener(s=>{const a=s.getScopeData();a.eventProcessors=[],r(a)})}return{name:tw,setupOnce(){},setup(s){var a;if(process.mas)return;if(hP())throw new ni(`The '${tw}' integration is only supported with Electron >= v9`);const l=s.getOptions();if(!(l!=null&&l.dsn))throw new ni("Attempted to enable Electron native crash reporter but no DSN was supplied");t=l.release,i(l),DR(Lq,(c,u)=>{ew()}),PI()&&o(),Eee((a=J.crashReporter.getLastCrashReport())===null||a===void 0?void 0:a.date).then(c=>TP(c),he.error)}}},Pee=zt(tw,xP);var ll;(function(e){e[e.Classic=1]="Classic",e[e.Protocol=2]="Protocol",e[e.Both=3]="Both"})(ll||(ll={}));function Xee(){try{return hP()?require.resolve("../../preload/legacy.js"):require.resolve("../../preload/index.js")}catch{try{const t=Sr.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:l2&&l2.src||new URL("main-process.js",document.baseURI).href);return mt.resolve(t,"..","..","..","..","preload","index.js")}catch{}}}const LP="PreloadInjection",qR=()=>({name:LP,setupOnce(){},setup(e){const t=e.getOptions();t.ipcMode&ll.Classic&&J.app.once("ready",()=>{const n=Xee();if(n&&typeof n=="string"&&mt.isAbsolute(n)&&Rn.existsSync(n))for(const r of t.getSessions()){const i=r.getPreloads();r.setPreloads([n,...i])}else he.log("The preload script could not be injected automatically. This is most likely caused by bundling of the main process")})}}),Uee=zt(LP,qR),YP="MainProcessSession",eG=(e={})=>({name:YP,setupOnce(){},setup(){NP(!!e.sendOnCreate),WP()}}),Dee=zt(YP,eG);function Kee(){for(const e of J.BrowserWindow.getAllWindows())if(!e.isDestroyed()&&e.webContents&&!e.webContents.isDestroyed()&&e.isFocused()&&e.isVisible())return!0;return!1}const PP="BrowserWindowSession",XP=(e={})=>{if(UR<12)throw new Error("BrowserWindowSession requires Electron >= v12");let t={name:"inactive"};function n(){var r;if(Kee())t.name==="inactive"?NP(!0):t.name==="timeout"&&clearTimeout(t.timer),t={name:"active"};else if(t.name==="active"){const o=((r=e.backgroundTimeoutSeconds)!==null&&r!==void 0?r:30)*1e3;t={name:"timeout",timer:setTimeout(()=>{t.name==="timeout"&&(t={name:"inactive"},ZP().catch(()=>{}))},o).unref()}}}return{name:PP,setupOnce(){},setup(){J.app.on("browser-window-created",(r,i)=>{i.on("focus",n),i.on("blur",n),i.on("show",n),i.on("hide",n),i.once("closed",()=>{i.removeListener("focus",n),i.removeListener("blur",n),i.removeListener("show",n),i.removeListener("hide",n)})}),WP()}}},Mee=zt(PP,XP),$ee={cpu:!0,screen:!0,memory:!0,language:!0},UP="AdditionalContext",tG=(e={})=>{const t={},n=Object.assign(Object.assign({},$ee),e);function r(){const i=J.screen.getPrimaryDisplay(),o=Math.floor(i.size.width*i.scaleFactor),s=Math.floor(i.size.height*i.scaleFactor);t.screen_density=i.scaleFactor,t.screen_resolution=`${o}x${s}`}return{name:UP,setupOnce(){},setup(){nb.then(()=>{const{language:i,screen:o}=n;i&&(t.language=J.app.getLocale()),o&&(r(),J.screen.on("display-metrics-changed",()=>{r()}))},()=>{})},processEvent(i){const o=t,{memory:s,cpu:a}=n;if(s){const{total:l,free:c}=process.getSystemMemoryInfo();o.memory_size=l*1024,o.free_memory=c*1024}if(a){const l=Ri.cpus();if(l!=null&&l.length){const c=l[0];o.processor_count=l.length,o.cpu_description=c.model,o.processor_frequency=c.speed,J.app.runningUnderARM64Translation&&(o.machine_arch="arm64")}}return xd(i,{contexts:{device:o}})}}},zee=zt(UP,tG);function Jee(e){const{method:t,options:n}=typeof e=="string"?{method:"GET",options:mA.parse(e)}:{method:(e.method||"GET").toUpperCase(),options:e};let r="url"in n?n.url:void 0;if(!r){const i={};i.protocol=n.protocol||"http:",n.host?i.host=n.host:(n.hostname?i.hostname=n.hostname:i.hostname="localhost",n.port&&(i.port=n.port));const o=mA.parse(n.path||"/");i.pathname=o.pathname,i.search=o.search,i.hash=o.hash,r=mA.format(i)}return{method:t,url:r}}function IT(e,t,n,r){he.log(`[Tracing] Adding sentry-trace header ${n} to outgoing request to "${t}": `),e.setHeader("sentry-trace",n);const i=VC(r);i&&e.setHeader("baggage",i)}function jee(e,t){const n=new fa(100),r=new fa(100),i=(s,a)=>{if(e.tracing===void 0)return!0;if(e.tracing===!1)return!1;const l=`${s}:${a}`,c=n.get(l);if(c!==void 0)return c;const u=e.tracing===!0||e.tracing(s,a);return n.set(l,u),u},o=(s,a)=>{if(e.tracingOrigins===!1)return!1;if(e.tracingOrigins===void 0&&t===void 0||e.tracingOrigins===!0)return!0;const l=`${s}:${a}`,c=r.get(l);if(c!==void 0)return c;if(t){const u=Jc(a,t);return r.set(l,u),u}if(e.tracingOrigins){const u=e.tracingOrigins(s,a);return r.set(l,u),u}return!0};return function(a){return function(c){var u;const{url:d,method:g}=Jee(c),p=a.apply(this,[c]);if(d.match(/sentry_key/)||p.getHeader("x-sentry-auth"))return p;let m;const v=cn();if(v&&i(g,d)){const y=v.getSpan();if(y){if(m=y.startChild({description:`${g} ${d}`,op:"http.client"}),o(g,d)){const I=m.toTraceparent(),b=(u=m==null?void 0:m.transaction)===null||u===void 0?void 0:u.getDynamicSamplingContext();IT(p,d,I,b)}}else if(o(g,d)){const{traceId:I,sampled:b,dsc:A}=v.getPropagationContext(),N=OC(I,void 0,b),L=Tt(),G=A||(L?Af(I,L,v):void 0);IT(p,d,N,G)}}return p.once("response",function(y){e.breadcrumbs!==!1&&vT("response",g,d,this,y),m&&(y.statusCode&&m.setHttpStatus(y.statusCode),m.finish())}).once("error",function(y){e.breadcrumbs!==!1&&vT("error",g,d,this,void 0),m&&(m.setHttpStatus(500),m.finish())})}}}function vT(e,t,n,r,i){wr({type:"http",category:"electron.net",data:{url:n,method:t,status_code:i==null?void 0:i.statusCode}},{event:e,request:r,response:i})}const DP="Net",nG=(e={})=>({name:DP,setupOnce(){},setup(){var t;const n=(t=Tt())===null||t===void 0?void 0:t.getOptions();e.breadcrumbs===!1&&e.tracing===!1||on(J.net,"request",jee(e,n==null?void 0:n.tracePropagationTargets))}}),Qee=zt(DP,nG),CT={breadcrumbs:Q_,events:["abnormal-exit","launch-failed","integrity-failure"]};function ty(e,t){const n=`'${t}' process exited with '${e}'`;switch(e){case"abnormal-exit":case"killed":return{message:n,level:"warning"};case"crashed":case"oom":case"launch-failed":case"integrity-failure":return{message:n,level:"fatal"};default:return{message:n,level:"debug"}}}const KP="ChildProcess",rG=(e={})=>{const{breadcrumbs:t,events:n}=e,r={breadcrumbs:Array.isArray(t)?t:t===!1?[]:CT.breadcrumbs,events:Array.isArray(n)?n:n===!1?[]:CT.events};return{name:KP,setupOnce(){},setup(i){const{breadcrumbs:o,events:s}=r,a=Array.from(new Set([...o,...s]));if(a.length>0){const l=i.getOptions();gP(a,c=>{const{reason:u}=c;if(s.includes(u)){const{message:d,level:g}=ty(c.reason,c.type);K_(d,{level:g,tags:{"event.process":c.type}})}o.includes(u)&&wr(Object.assign(Object.assign({type:"process",category:"child-process"},ty(c.reason,c.type)),{data:c}))}),DR(a,(c,u)=>{var d;const{reason:g}=u,p=((d=l==null?void 0:l.getRendererName)===null||d===void 0?void 0:d.call(l,c))||"renderer";if(s.includes(g)){const{message:m,level:v}=ty(u.reason,p);K_(m,v)}o.includes(g)&&wr(Object.assign(Object.assign({type:"process",category:"child-process"},ty(u.reason,p)),{data:u}))})}}}},qee=zt(KP,rG),MP="Screenshots",iG=()=>({name:MP,setupOnce(){},processEvent(e,t,n){return Zt(this,void 0,void 0,function*(){if(!!!n.getOptions().attachScreenshot)return e;if(!e.transaction&&e.platform!=="native"){let i=1;for(const o of J.BrowserWindow.getAllWindows()){t.attachments||(t.attachments=[]);try{if(!o.isDestroyed()&&o.isVisible()){const s=i===1?"screenshot.png":`screenshot-${i}.png`,a=yield Xq(o);t.attachments.push({filename:s,data:a.toPNG(),contentType:"image/png"}),i+=1}}catch(s){he.error("Error capturing screenshot",s)}}}return e})}}),ete=zt(MP,iG),ny="Document-Policy",VA="js-profiling";let Xu;function $P(e,t){if(!Xu)return;const n=t.event_id;Xu.set(n,t),e&&(e.contexts=Object.assign(Object.assign({},e.contexts),{profile:{profile_id:n}}))}function tte(e={}){if(e[ny]){const t=e[ny];Array.isArray(t)?t.push(VA):e[ny]=[t,VA]}else e[ny]=VA;return{responseHeaders:e}}const zP="RendererProfiling",JP=()=>({name:zP,setupOnce(){},setup(e){var t;const n=e.getOptions();if(n.enableRendererProfiling){if(UR<15)throw new Error("Renderer profiling requires Electron 15+ (Chromium 94+)");Xu=new fa(10),J.app.on("ready",()=>{for(const r of n.getSessions())r.webRequest.onHeadersReceived((i,o)=>{o(tte(i.responseHeaders))})}),(t=e.on)===null||t===void 0||t.call(e,"beforeEnvelope",r=>{let i;if(Oh(r,(s,a)=>{var l,c;if(a==="transaction")for(let u=1;u<s.length;u++){const d=s[u];!((c=(l=d==null?void 0:d.contexts)===null||l===void 0?void 0:l.profile)===null||c===void 0)&&c.profile_id&&(i=d.contexts.profile.profile_id,delete d.contexts.profile)}}),!i)return;const o=Xu==null?void 0:Xu.remove(i);o&&(aee(o,J.app.getAppPath()),o.release=n.release||ib(),o.environment=n.environment||ob(),r[1].push([{type:"profile"},o]))})}}}),nte=zt(zP,JP),nw=(e={})=>{if(UR<22)throw new Error("Main process ANR detection requires Electron v22+");const t=dP(Object.assign(Object.assign({},e),{staticTags:Object.assign({"event.environment":"javascript","event.origin":"electron","event.process":"browser"},e.staticTags),appRootPath:J.app.getAppPath()}));return J.powerMonitor.on("suspend",()=>{t.stopWorker()}),J.powerMonitor.on("resume",()=>{t.startWorker()}),t},jP=zt(nw.name,nw),rte=Object.freeze(Object.defineProperty({__proto__:null,AdditionalContext:zee,Anr:jP,BrowserWindowSession:Mee,ChildProcess:qee,ElectronBreadcrumbs:$q,ElectronMinidump:Pee,MainContext:_ee,MainProcessSession:Dee,Net:Qee,OnUncaughtException:zq,PreloadInjection:Uee,RendererProfiling:nte,Screenshots:ete,SentryMinidump:Fee},Symbol.toStringTag,{value:"Module"})),ite=1024*32;function ote(e){return new Pl.Readable({read(){this.push(e),this.push(null)}})}function ste(e){const{hostname:t,pathname:n,port:r,protocol:i,search:o}=new Sr.URL(e);return{method:"POST",hostname:t,path:`${n}${o}`,port:parseInt(r,10),protocol:i}}function ate(e){return Lh(e,QP(e.url,e.headers||{}))}function QP(e,t){return t["Content-Type"]="application/x-sentry-envelope",function(r){return nb.then(()=>new Promise((i,o)=>{let s=ote(r.body);const a=Object.assign({},t);r.body.length>ite&&(a["content-encoding"]="gzip",s=s.pipe(RC.createGzip()));const l=J.net.request(ste(e));for(const c of Object.keys(a))l.setHeader(c,a[c]);l.on("response",c=>{var u,d;c.on("error",o),c.on("data",()=>{}),c.on("end",()=>{});const g=(u=c.headers["retry-after"])!==null&&u!==void 0?u:void 0,p=(d=c.headers["x-sentry-rate-limits"])!==null&&d!==void 0?d:void 0;i({headers:Pn({"retry-after":Array.isArray(g)?g[0]:g,"x-sentry-rate-limits":Array.isArray(p)?p[0]:p})})}),l.on("error",o),s.pipe(l)}))}}const lte=864e5;class cte{constructor(t,n=30,r=30){this._queuePath=t,this._maxAgeDays=n,this._maxCount=r,this._queue=new RP(this._queuePath,"queue",[])}add(t){return Zt(this,void 0,void 0,function*(){const n=ln();let r=0;yield this._queue.update(i=>{for(i.push({bodyPath:n,date:t.date||new Date});i.length>this._maxCount;){const o=i.shift();o&&this._removeBody(o.bodyPath)}return r=i.length,i});try{yield CP(mt.join(this._queuePath,n),t.body)}catch{}return r})}pop(){return Zt(this,void 0,void 0,function*(){let t,n=0;const r=Date.now()-lte*this._maxAgeDays;if(yield this._queue.update(i=>{for(;t=i.shift();)if("type"in t||t.date.getTime()<r)this._removeBody(t.bodyPath),t=void 0;else{n=i.length;break}return i}),t)try{const i=yield rb(mt.join(this._queuePath,t.bodyPath));return this._removeBody(t.bodyPath),{request:{body:i,date:t.date||new Date},pendingCount:n}}catch(i){he.warn("Filed to read queued request body",i)}})}_removeBody(t){Xp(mt.join(this._queuePath,t)).catch(()=>{})}}const bT=5e3,AT=2e9;function ute(){return!("online"in J.net)||J.net.online===!0}function dte(e){return ute()?"send":"queue"}function fte(e){return!!(e.headers&&"x-sentry-rate-limits"in e.headers)}function qP(e){const t=QP(e.url,e.headers||{}),n=new cte(mt.join(zR(),"queue"),e.maxQueueAgeDays,e.maxQueueCount),r=e.beforeSend||dte;let i=bT,o=-1;function s(u){e.queuedLengthChanged&&u!==o&&(o=u,e.queuedLengthChanged(u))}function a(){n.pop().then(u=>{u?(s(u.pendingCount+1),he.log("Found a request in the queue"),c(u.request).catch(d=>he.error(d))):s(0)}).catch(u=>he.error(u))}function l(u){return Zt(this,void 0,void 0,function*(){return he.log("Queuing request"),s(yield n.add(u)),setTimeout(()=>{a()},i),i*=3,i>AT&&(i=AT),{}})}function c(u){return Zt(this,void 0,void 0,function*(){let d=r(u);if(d instanceof Promise&&(d=yield d),d==="send"){try{const g=yield t(u);if(fte(g))he.log("Rate limited",g.headers);else return he.log("Successfully sent"),i=bT,a(),g}catch(g){he.log("Error sending:",g)}d="queue"}return d=="queue"?l(u):(he.log("Dropping request"),{})})}return a(),Lh(e,c)}function gte(e){var t,n;const r=(t=Tt())===null||t===void 0?void 0:t.getOptions();return(n=r==null?void 0:r.getRendererName)===null||n===void 0?void 0:n.call(r,e)}function ST(e,t,n){Ree();const r=gte(e)||"renderer",i={level:"error",exception:{values:[{type:"ApplicationNotResponding",value:`Application Not Responding for at least ${t} ms`,stacktrace:{frames:n},mechanism:{type:"ANR"}}]},tags:{"event.process":r}};bf(i)}function hte(e,t){e.debugger.attach("1.3");const n=new Map,r=tb(J.app.getAppPath());return e.debugger.on("message",(i,o,s)=>{if(o==="Debugger.scriptParsed"){const a=s;n.set(a.scriptId,a.url)}else if(o==="Debugger.paused"){const a=s;if(a.reason!=="other")return;const l=[...a.callFrames];e.debugger.sendCommand("Debugger.resume").then(null,()=>{});const c=BL(l.map(u=>p4(u,n.get(u.location.scriptId),r)));t(c)}}),e.debugger.sendCommand("Debugger.enable").catch(()=>{}),()=>e.debugger.sendCommand("Debugger.pause")}let ac;function pte(){let e=process.hrtime();return{getTimeMs:()=>{const[t,n]=process.hrtime(e);return Math.floor(t*1e3+n/1e6)},reset:()=>{e=process.hrtime()}}}function eX(){function e(t,...n){he.log(`[Renderer ANR] ${t}`,...n)}return(t,n)=>{ac=ac||new Map;let r=ac.get(n);if(r===void 0){e("Renderer sent first status message",t.config);let i;t.config.captureStackTrace&&(e("Connecting to debugger"),i=hte(n,o=>{e("Event captured with stack frames"),ST(n,t.config.anrThreshold,o)})),r=h4(pte,100,t.config.anrThreshold,()=>Zt(this,void 0,void 0,function*(){e("Watchdog timeout"),i?(e("Pausing debugger to capture stack trace"),i()):(e("Capturing event"),ST(n,t.config.anrThreshold))})),n.once("destroyed",()=>{ac==null||ac.delete(n)}),ac.set(n,r)}r.poll(),t.status!=="alive"&&(e("Renderer visibility changed",t.status),r.enabled(t.status==="visible"))}}function mte(e={}){var t;const n=new jP(e),r=Tt();return(t=n.setup)===null||t===void 0||t.call(n,r),Promise.resolve()}let ei,vs;const _T={scheme:Pa,privileges:{bypassCSP:!0,corsEnabled:!0,supportFetchAPI:!0,secure:!0}};function yte(){ei=ei||new Set,vs=vs||new Map;for(const e of J.webContents.getAllWebContents()){const t=e.id;ei.has(t)||e.isDestroyed()||e.executeJavaScript("window.__SENTRY_RENDERER_ID__").then(n=>{n&&ei&&vs&&(ei.add(t),vs.set(n,t),e.once("destroyed",()=>{ei==null||ei.delete(t),vs==null||vs.delete(n)}))},he.error)}}function tX(e,t,n,r){var i,o,s,a;const l=r&&((i=e==null?void 0:e.getRendererName)===null||i===void 0?void 0:i.call(e,r))||"renderer";t.breadcrumbs=t.breadcrumbs||[],delete t.environment,(o=t.sdk)===null||o===void 0||delete o.name,(s=t.sdk)===null||s===void 0||delete s.version,(a=t.sdk)===null||a===void 0||delete a.packages,bf(xd(t,{tags:{"event.process":l}}),{attachments:n})}function nX(e,t,n){let r;try{r=JSON.parse(t)}catch{he.warn("sentry-electron received an invalid event message");return}tX(e,r,[],n)}function Ite(e){let t;const n=[];let r;return Oh(e,(i,o)=>{if(o==="event"||o==="transaction"||o==="feedback")t=Array.isArray(i)?i[1]:void 0;else if(o==="attachment"){const[s,a]=i;n.push({filename:s.filename,attachmentType:s.attachment_type,contentType:s.content_type,data:a})}else o==="profile"&&(r=i[1])}),t?[t,n,r]:void 0}function rX(e,t,n){var r,i;const o=n4(t,new gr.TextEncoder,new gr.TextDecoder),s=Ite(o);if(s){const[a,l,c]=s;c&&$P(a,c),tX(e,a,l,n)}else{const a=see(o,J.app.getAppPath());(i=(r=Tt())===null||r===void 0?void 0:r.getTransport())===null||i===void 0||i.send(a)}}function iX(e){const t=Tt();t!=null&&t.metricsAggregator?t.metricsAggregator.add(e.metricType,e.name,e.value,e.unit,e.tags,e.timestamp):he.warn("Metric was dropped because the aggregator is not configured in the main process. Enable via '_experiments.metricsAggregator: true' in your init call.")}function OA(e){return e!=null&&Object.keys(e).length>0}function oX(e,t){let n;try{n=JSON.parse(t)}catch{he.warn("sentry-electron received an invalid scope message");return}const r=cn();OA(n.user)&&r.setUser(n.user),OA(n.tags)&&r.setTags(n.tags),OA(n.extra)&&r.setExtras(n.extra);for(const o of n.attachments||[])r.addAttachment(o);const i=n.breadcrumbs.pop();i&&r.addBreadcrumb(i,(e==null?void 0:e.maxBreadcrumbs)||100)}function vte(e){if(J.app.isReady())throw new ni("Sentry SDK should be initialized before the Electron app 'ready' event is fired");J.protocol.registerSchemesAsPrivileged([_T]),J.protocol.registerSchemesAsPrivileged=new Proxy(J.protocol.registerSchemesAsPrivileged,{apply:(n,r,i)=>{n([...i[0],_T])}});const t=eX();nb.then(()=>{for(const n of e.getSessions())Dq(n.protocol,Pa,r=>{const i=()=>{const s=r.windowId?vs==null?void 0:vs.get(r.windowId):void 0;return s?J.webContents.fromId(s):void 0},o=r.body;if(r.url.startsWith(`${Pa}://${vi.RENDERER_START}`))yte();else if(r.url.startsWith(`${Pa}://${vi.EVENT}`)&&o)nX(e,o.toString(),i());else if(r.url.startsWith(`${Pa}://${vi.SCOPE}`)&&o)oX(e,o.toString());else if(r.url.startsWith(`${Pa}://${vi.ENVELOPE}`)&&o)rX(e,o,i());else if(r.url.startsWith(`${Pa}://${vi.ADD_METRIC}`)&&o)iX(JSON.parse(o.toString()));else if(r.url.startsWith(`${Pa}://${vi.STATUS}`)&&o){const s=i();if(s){const a=JSON.parse(o.toString()).status;t(a,s)}}})}).catch(n=>he.error(n))}function Cte(e){J.ipcMain.on(vi.RENDERER_START,({sender:n})=>{const r=n.id;ei=ei||new Set,!ei.has(r)&&(n.isDestroyed()||(ei.add(r),n.once("destroyed",()=>{ei==null||ei.delete(r)})))}),J.ipcMain.on(vi.EVENT,({sender:n},r)=>nX(e,r,n)),J.ipcMain.on(vi.SCOPE,(n,r)=>oX(e,r)),J.ipcMain.on(vi.ENVELOPE,({sender:n},r)=>rX(e,r,n));const t=eX();J.ipcMain.on(vi.STATUS,({sender:n},r)=>t(r,n)),J.ipcMain.on(vi.ADD_METRIC,(n,r)=>iX(r))}function bte(e){if(!cT()&&e.ipcMode===ll.Protocol)throw new ni("IPCMode.Protocol is only supported in Electron >= v5");cT()&&(e.ipcMode&ll.Protocol)>0&&vte(e),(e.ipcMode&ll.Classic)>0&&Cte(e)}const Ate=_R(EL(tb(J.app.getAppPath())));function sX(e){const t=typeof window<"u"?"renderer":"main";if(t!==e)throw new Error(`This code is intended to run in the Electron ${e} process but is currently running in the ${t} process.
This can occur if a bundler picks the wrong entry point.

You can work around this by using a relative import:
import * as Sentry from '@sentry/electron/${t}';`)}sX("main");const aX=[QR(),MR(),nG(),jR(),rG(),$R(),qR(),tG(),iG(),JP(),...cP.filter(e=>e.name!=="OnUncaughtException"&&e.name!=="Context")],Ste={_metadata:{sdk:AP()},ipcMode:ll.Both,getSessions:()=>[J.session.defaultSession]};function lX(e){const t=Object.assign(Ste,e),n=aX;t.release===void 0&&(t.release=ib()),t.environment===void 0&&(t.environment=ob()),t.autoSessionTracking!==!1&&(n.push(eG()),t.autoSessionTracking=!1),t.stackParser===void 0&&(t.stackParser=Ate),wte(n,t),t.dsn&&t.transport===void 0&&(t.transport=qP),bte(t),hq(t)}const _te=[{override:"ElectronMinidump",remove:"SentryMinidump"},{override:"BrowserWindowSession",remove:"MainProcessSession"}];function wte(e,t){if(t.defaultIntegrations===void 0){const n=(r,i)=>{const o=_te.filter(({override:s})=>r.some(a=>a.name===s)).map(({remove:s})=>s);return i.filter(s=>!o.includes(s.name))};if(Array.isArray(t.integrations)){t.defaultIntegrations=n(t.integrations,e);return}else if(typeof t.integrations=="function"){const r=t.integrations;t.integrations=i=>{const o=r(i);return n(o,o)}}t.defaultIntegrations=e}}sX("main");const Bte=Object.assign(Object.assign({},Fq),rte),Ete=Object.freeze(Object.defineProperty({__proto__:null,Hub:YC,get IPCMode(){return ll},Integrations:Bte,NodeClient:LY,Scope:Oo,addBreadcrumb:wr,addEventProcessor:O8,addGlobalEventProcessor:UL,addIntegration:S8,additionalContextIntegration:tG,anrIntegration:nw,browserWindowSessionIntegration:XP,captureCheckIn:M_,captureEvent:bf,captureException:xp,captureMessage:K_,childProcessIntegration:rG,close:H4,configureScope:ML,continueTrace:nY,createTransport:Lh,defaultIntegrations:aX,electronBreadcrumbsIntegration:MR,electronMinidumpIntegration:xP,electronNetIntegration:nG,enableMainProcessAnrDetection:mte,extractTraceparentData:K4,flush:zL,functionToStringIntegration:LR,getActiveSpan:Pp,getActiveTransaction:Od,getClient:Tt,getCurrentHub:mn,getCurrentScope:cn,getGlobalScope:TR,getHubFromCarrier:ga,getIsolationScope:xs,inboundFiltersIntegration:xR,init:lX,lastEventId:F4,linkedErrorsIntegration:YR,mainContextIntegration:jR,mainProcessSessionIntegration:eG,makeElectronOfflineTransport:qP,makeElectronTransport:ate,makeMain:$_,metrics:WQ,onUncaughtExceptionIntegration:$R,parameterize:eQ,preloadInjectionIntegration:qR,rendererProfileFromIpc:$P,requestDataIntegration:FR,runWithAsyncContext:PC,screenshotsIntegration:iG,sentryMinidumpIntegration:QR,setContext:N4,setExtra:T4,setExtras:Z4,setMeasurement:u8,setTag:k4,setTags:W4,setUser:V4,spanStatusfromHttpCode:$4,startActiveSpan:j4,startInactiveSpan:q4,startSpan:OR,startSpanManual:Q4,startTransaction:$L,trace:J4,withMonitor:O4,withScope:Lp},Symbol.toStringTag,{value:"Module"}));function Rte(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const i=e[r];i==="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const Gte=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Nte(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Gte.exec(t);return n?n.slice(1):[]}function wT(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const i=r>=0?e[r]:"/";i&&(t=`${i}/${t}`,n=i.charAt(0)==="/")}return t=Rte(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function BT(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Zte(e,t){e=wT(e).slice(1),t=wT(t).slice(1);const n=BT(e.split("/")),r=BT(t.split("/")),i=Math.min(n.length,r.length);let o=i;for(let a=0;a<i;a++)if(n[a]!==r[a]){o=a;break}let s=[];for(let a=o;a<n.length;a++)s.push("..");return s=s.concat(r.slice(o)),s.join("/")}function Tte(e,t){let n=Nte(e)[2];return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}function Wte(e,t){return Object.assign(function(...r){return t(...r)},{id:e})}function kte(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const cX="RewriteFrames",Vte=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(s=>{if(!s.filename)return s;const a=/^[a-zA-Z]:\\/.test(s.filename)||s.filename.includes("\\")&&!s.filename.includes("/"),l=/^\//.test(s.filename);if(a||l){const c=a?s.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):s.filename,u=t?Zte(t,c):Tte(c);s.filename=`${n}${u}`}return s});function i(s){try{return{...s,exception:{...s.exception,values:s.exception.values.map(a=>({...a,...a.stacktrace&&{stacktrace:o(a.stacktrace)}}))}}}catch{return s}}function o(s){return{...s,frames:s&&s.frames&&s.frames.map(a=>r(a))}}return{name:cX,setupOnce(){},processEvent(s){let a=s;return s.exception&&Array.isArray(s.exception.values)&&(a=i(a)),a}}},uX=Vte;Wte(cX,uX);var dX={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(rn,function(){var n=function(f,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(C[_]=S[_])})(f,h)},r=function(){return(r=Object.assign||function(f){for(var h,C=1,S=arguments.length;C<S;C++)for(var _ in h=arguments[C])Object.prototype.hasOwnProperty.call(h,_)&&(f[_]=h[_]);return f}).apply(this,arguments)};function i(f,h,C){if(C||arguments.length===2)for(var S,_=0,R=h.length;_<R;_++)!S&&_ in h||((S=S||Array.prototype.slice.call(h,0,_))[_]=h[_]);return f.concat(S||Array.prototype.slice.call(h))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:rn,s=Object.keys,a=Array.isArray;function l(f,h){return typeof h!="object"||s(h).forEach(function(C){f[C]=h[C]}),f}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function d(f,h){return u.call(f,h)}function g(f,h){typeof h=="function"&&(h=h(c(f))),(typeof Reflect>"u"?s:Reflect.ownKeys)(h).forEach(function(C){m(f,C,h[C])})}var p=Object.defineProperty;function m(f,h,C,S){p(f,h,l(C&&d(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},S))}function v(f){return{from:function(h){return f.prototype=Object.create(h.prototype),m(f.prototype,"constructor",f),{extend:g.bind(null,f.prototype)}}}}var y=Object.getOwnPropertyDescriptor,I=[].slice;function b(f,h,C){return I.call(f,h,C)}function A(f,h){return h(f)}function N(f){if(!f)throw new Error("Assertion Failed")}function L(f){o.setImmediate?setImmediate(f):setTimeout(f,0)}function G(f,h){if(typeof h=="string"&&d(f,h))return f[h];if(!h)return f;if(typeof h!="string"){for(var C=[],S=0,_=h.length;S<_;++S){var R=G(f,h[S]);C.push(R)}return C}var k=h.indexOf(".");if(k!==-1){var U=f[h.substr(0,k)];return U==null?void 0:G(U,h.substr(k+1))}}function W(f,h,C){if(f&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof h!="string"&&"length"in h){N(typeof C!="string"&&"length"in C);for(var S=0,_=h.length;S<_;++S)W(f,h[S],C[S])}else{var R,k,U=h.indexOf(".");U!==-1?(R=h.substr(0,U),(k=h.substr(U+1))===""?C===void 0?a(f)&&!isNaN(parseInt(R))?f.splice(R,1):delete f[R]:f[R]=C:W(U=!(U=f[R])||!d(f,R)?f[R]={}:U,k,C)):C===void 0?a(f)&&!isNaN(parseInt(h))?f.splice(h,1):delete f[h]:f[h]=C}}function j(f){var h,C={};for(h in f)d(f,h)&&(C[h]=f[h]);return C}var O=[].concat;function Ce(f){return O.apply([],f)}var bo="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ce([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(h){return h+f+"Array"})}))).filter(function(f){return o[f]}),Ue=new Set(bo.map(function(f){return o[f]})),$e=null;function ze(f){return $e=new WeakMap,f=function h(C){if(!C||typeof C!="object")return C;var S=$e.get(C);if(S)return S;if(a(C)){S=[],$e.set(C,S);for(var _=0,R=C.length;_<R;++_)S.push(h(C[_]))}else if(Ue.has(C.constructor))S=C;else{var k,U=c(C);for(k in S=U===Object.prototype?{}:Object.create(U),$e.set(C,S),C)d(C,k)&&(S[k]=h(C[k]))}return S}(f),$e=null,f}var Ee={}.toString;function P(f){return Ee.call(f).slice(8,-1)}var oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",X=typeof oe=="symbol"?function(f){var h;return f!=null&&(h=f[oe])&&h.apply(f)}:function(){return null};function M(f,h){return h=f.indexOf(h),0<=h&&f.splice(h,1),0<=h}var D={};function ue(f){var h,C,S,_;if(arguments.length===1){if(a(f))return f.slice();if(this===D&&typeof f=="string")return[f];if(_=X(f)){for(C=[];!(S=_.next()).done;)C.push(S.value);return C}if(f==null)return[f];if(typeof(h=f.length)!="number")return[f];for(C=new Array(h);h--;)C[h]=f[h];return C}for(h=arguments.length,C=new Array(h);h--;)C[h]=arguments[h];return C}var Re=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},fe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(fe),Oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pe(f,h){this.name=f,this.message=h}function re(f,h){return f+". Errors: "+Object.keys(h).map(function(C){return h[C].toString()}).filter(function(C,S,_){return _.indexOf(C)===S}).join(`
`)}function q(f,h,C,S){this.failures=h,this.failedKeys=S,this.successCount=C,this.message=re(f,h)}function Be(f,h){this.name="BulkError",this.failures=Object.keys(h).map(function(C){return h[C]}),this.failuresByPos=h,this.message=re(f,this.failures)}v(pe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(q).from(pe),v(Be).from(pe);var B=qi.reduce(function(f,h){return f[h]=h+"Error",f},{}),w=pe,F=qi.reduce(function(f,h){var C=h+"Error";function S(_,R){this.name=C,_?typeof _=="string"?(this.message="".concat(_).concat(R?`
 `+R:""),this.inner=R||null):typeof _=="object"&&(this.message="".concat(_.name," ").concat(_.message),this.inner=_):(this.message=Oe[h]||C,this.inner=null)}return v(S).from(w),f[h]=S,f},{});F.Syntax=SyntaxError,F.Type=TypeError,F.Range=RangeError;var Y=fe.reduce(function(f,h){return f[h+"Error"]=F[h],f},{}),Se=qi.reduce(function(f,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(f[h+"Error"]=F[h]),f},{});function Ge(){}function ke(f){return f}function dt(f,h){return f==null||f===ke?h:function(C){return h(f(C))}}function ot(f,h){return function(){f.apply(this,arguments),h.apply(this,arguments)}}function bt(f,h){return f===Ge?h:function(){var C=f.apply(this,arguments);C!==void 0&&(arguments[0]=C);var S=this.onsuccess,_=this.onerror;this.onsuccess=null,this.onerror=null;var R=h.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?ot(S,this.onsuccess):S),_&&(this.onerror=this.onerror?ot(_,this.onerror):_),R!==void 0?R:C}}function Wt(f,h){return f===Ge?h:function(){f.apply(this,arguments);var C=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?ot(C,this.onsuccess):C),S&&(this.onerror=this.onerror?ot(S,this.onerror):S)}}function pt(f,h){return f===Ge?h:function(C){var S=f.apply(this,arguments);l(C,S);var _=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,C=h.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?ot(_,this.onsuccess):_),R&&(this.onerror=this.onerror?ot(R,this.onerror):R),S===void 0?C===void 0?void 0:C:l(S,C)}}function Et(f,h){return f===Ge?h:function(){return h.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function On(f,h){return f===Ge?h:function(){var C=f.apply(this,arguments);if(C&&typeof C.then=="function"){for(var S=this,_=arguments.length,R=new Array(_);_--;)R[_]=arguments[_];return C.then(function(){return h.apply(S,R)})}return h.apply(this,arguments)}}Se.ModifyError=q,Se.DexieError=pe,Se.BulkError=Be;var Qt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ut(f){Qt=f}var St={},se=100,bo=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,c(f),f];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,c(h),f]}(),fe=bo[0],qi=bo[1],bo=bo[2],qi=qi&&qi.then,we=fe&&fe.constructor,Te=!!bo,qe=function(f,h){Hn.push([f,h]),ct&&(queueMicrotask(Jl),ct=!1)},Jt=!0,ct=!0,xe=[],Ye=[],Gt=ke,ft={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ge,pgp:!1,env:{},finalize:Ge},Je=ft,Hn=[],Kr=0,ts=[];function De(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Je;if(typeof f!="function"){if(f!==St)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&rs(this,this._value))}this._state=null,this._value=null,++h.ref,function C(S,_){try{_(function(R){if(S._state===null){if(R===S)throw new TypeError("A promise cannot be resolved with itself.");var k=S._lib&&$i();R&&typeof R.then=="function"?C(S,function(U,ee){R instanceof De?R._then(U,ee):R.then(U,ee)}):(S._state=!0,S._value=R,Jn(S)),k&&gn()}},rs.bind(null,S))}catch(R){rs(S,R)}}(this,f)}var ns={get:function(){var f=Je,h=pi;function C(S,_){var R=this,k=!f.global&&(f!==Je||h!==pi),U=k&&!zi(),ee=new De(function(z,ae){Mr(R,new Wa(vu(S,f,k,U),vu(_,f,k,U),z,ae,f))});return this._consoleTask&&(ee._consoleTask=this._consoleTask),ee}return C.prototype=St,C},set:function(f){m(this,"then",f&&f.prototype===St?ns:{get:function(){return f},set:ns.set})}};function Wa(f,h,C,S,_){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof h=="function"?h:null,this.resolve=C,this.reject=S,this.psd=_}function rs(f,h){var C,S;Ye.push(h),f._state===null&&(C=f._lib&&$i(),h=Gt(h),f._state=!1,f._value=h,S=f,xe.some(function(_){return _._value===S._value})||xe.push(S),Jn(f),C&&gn())}function Jn(f){var h=f._listeners;f._listeners=[];for(var C=0,S=h.length;C<S;++C)Mr(f,h[C]);var _=f._PSD;--_.ref||_.finalize(),Kr===0&&(++Kr,qe(function(){--Kr==0&&jl()},[]))}function Mr(f,h){if(f._state!==null){var C=f._state?h.onFulfilled:h.onRejected;if(C===null)return(f._state?h.resolve:h.reject)(f._value);++h.psd.ref,++Kr,qe(dn,[C,f,h])}else f._listeners.push(h)}function dn(f,h,C){try{var S,_=h._value;!h._state&&Ye.length&&(Ye=[]),S=Qt&&h._consoleTask?h._consoleTask.run(function(){return f(_)}):f(_),h._state||Ye.indexOf(_)!==-1||function(R){for(var k=xe.length;k;)if(xe[--k]._value===R._value)return xe.splice(k,1)}(h),C.resolve(S)}catch(R){C.reject(R)}finally{--Kr==0&&jl(),--C.psd.ref||C.psd.finalize()}}function Jl(){Zi(ft,function(){$i()&&gn()})}function $i(){var f=Jt;return ct=Jt=!1,f}function gn(){var f,h,C;do for(;0<Hn.length;)for(f=Hn,Hn=[],C=f.length,h=0;h<C;++h){var S=f[h];S[0].apply(null,S[1])}while(0<Hn.length);ct=Jt=!0}function jl(){var f=xe;xe=[],f.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var h=ts.slice(0),C=h.length;C;)h[--C]()}function ka(f){return new De(St,!1,f)}function hn(f,h){var C=Je;return function(){var S=$i(),_=Je;try{return Ji(C,!0),f.apply(this,arguments)}catch(R){h&&h(R)}finally{Ji(_,!1),S&&gn()}}}g(De.prototype,{then:ns,_then:function(f,h){Mr(this,new Wa(null,null,f,h,Je))},catch:function(f){if(arguments.length===1)return this.then(null,f);var h=f,C=arguments[1];return typeof h=="function"?this.then(null,function(S){return(S instanceof h?C:ka)(S)}):this.then(null,function(S){return(S&&S.name===h?C:ka)(S)})},finally:function(f){return this.then(function(h){return De.resolve(f()).then(function(){return h})},function(h){return De.resolve(f()).then(function(){return ka(h)})})},timeout:function(f,h){var C=this;return f<1/0?new De(function(S,_){var R=setTimeout(function(){return _(new F.Timeout(h))},f);C.then(S,_).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(De.prototype,Symbol.toStringTag,"Dexie.Promise"),ft.env=Iu(),g(De,{all:function(){var f=ue.apply(null,arguments).map(Va);return new De(function(h,C){f.length===0&&h([]);var S=f.length;f.forEach(function(_,R){return De.resolve(_).then(function(k){f[R]=k,--S||h(f)},C)})})},resolve:function(f){return f instanceof De?f:f&&typeof f.then=="function"?new De(function(h,C){f.then(h,C)}):new De(St,!0,f)},reject:ka,race:function(){var f=ue.apply(null,arguments).map(Va);return new De(function(h,C){f.map(function(S){return De.resolve(S).then(h,C)})})},PSD:{get:function(){return Je},set:function(f){return Je=f}},totalEchoes:{get:function(){return pi}},newPSD:$r,usePSD:Zi,scheduler:{get:function(){return qe},set:function(f){qe=f}},rejectionMapper:{get:function(){return Gt},set:function(f){Gt=f}},follow:function(f,h){return new De(function(C,S){return $r(function(_,R){var k=Je;k.unhandleds=[],k.onunhandled=R,k.finalize=ot(function(){var U,ee=this;U=function(){ee.unhandleds.length===0?_():R(ee.unhandleds[0])},ts.push(function z(){U(),ts.splice(ts.indexOf(z),1)}),++Kr,qe(function(){--Kr==0&&jl()},[])},k.finalize),f()},h,C,S)})}}),we&&(we.allSettled&&m(De,"allSettled",function(){var f=ue.apply(null,arguments).map(Va);return new De(function(h){f.length===0&&h([]);var C=f.length,S=new Array(C);f.forEach(function(_,R){return De.resolve(_).then(function(k){return S[R]={status:"fulfilled",value:k}},function(k){return S[R]={status:"rejected",reason:k}}).then(function(){return--C||h(S)})})})}),we.any&&typeof AggregateError<"u"&&m(De,"any",function(){var f=ue.apply(null,arguments).map(Va);return new De(function(h,C){f.length===0&&C(new AggregateError([]));var S=f.length,_=new Array(S);f.forEach(function(R,k){return De.resolve(R).then(function(U){return h(U)},function(U){_[k]=U,--S||C(new AggregateError(_))})})})}));var kn={awaits:0,echoes:0,id:0},qf=0,Ds=[],is=0,pi=0,eg=0;function $r(f,h,C,S){var _=Je,R=Object.create(_);return R.parent=_,R.ref=0,R.global=!1,R.id=++eg,ft.env,R.env=Te?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},h&&l(R,h),++_.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},S=Zi(R,f,C,S),R.ref===0&&R.finalize(),S}function os(){return kn.id||(kn.id=++qf),++kn.awaits,kn.echoes+=se,kn.id}function zi(){return!!kn.awaits&&(--kn.awaits==0&&(kn.id=0),kn.echoes=kn.awaits*se,!0)}function Va(f){return kn.echoes&&f&&f.constructor===we?(os(),f.then(function(h){return zi(),h},function(h){return zi(),nn(h)})):f}function Ni(){var f=Ds[Ds.length-1];Ds.pop(),Ji(f,!1)}function Ji(f,h){var C,S=Je;(h?!kn.echoes||is++&&f===Je:!is||--is&&f===Je)||queueMicrotask(h?(function(_){++pi,kn.echoes&&--kn.echoes!=0||(kn.echoes=kn.awaits=kn.id=0),Ds.push(Je),Ji(_,!0)}).bind(null,f):Ni),f!==Je&&(Je=f,S===ft&&(ft.env=Iu()),Te&&(C=ft.env.Promise,h=f.env,(S.global||f.global)&&(Object.defineProperty(o,"Promise",h.PromiseProp),C.all=h.all,C.race=h.race,C.resolve=h.resolve,C.reject=h.reject,h.allSettled&&(C.allSettled=h.allSettled),h.any&&(C.any=h.any))))}function Iu(){var f=o.Promise;return Te?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Zi(f,h,C,S,_){var R=Je;try{return Ji(f,!0),h(C,S,_)}finally{Ji(R,!1)}}function vu(f,h,C,S){return typeof f!="function"?f:function(){var _=Je;C&&os(),Ji(h,!0);try{return f.apply(this,arguments)}finally{Ji(_,!1),S&&queueMicrotask(zi)}}}function Ql(f){Promise===we&&kn.echoes===0?is===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+qi).indexOf("[native code]")===-1&&(os=zi=Ge);var nn=De.reject,V=String.fromCharCode(65535),K="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ge="String expected.",We=[],Le="__dbnames",tt="readonly",at="readwrite";function Nt(f,h){return f?h?function(){return f.apply(this,arguments)&&h.apply(this,arguments)}:f:h}var _t={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function mr(f){return typeof f!="string"||/\./.test(f)?function(h){return h}:function(h){return h[f]===void 0&&f in h&&delete(h=ze(h))[f],h}}function zr(){throw F.Type()}function wt(f,h){try{var C=sr(f),S=sr(h);if(C!==S)return C==="Array"?1:S==="Array"?-1:C==="binary"?1:S==="binary"?-1:C==="string"?1:S==="string"?-1:C==="Date"?1:S!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return h<f?1:f<h?-1:0;case"binary":return function(_,R){for(var k=_.length,U=R.length,ee=k<U?k:U,z=0;z<ee;++z)if(_[z]!==R[z])return _[z]<R[z]?-1:1;return k===U?0:k<U?-1:1}(Ti(f),Ti(h));case"Array":return function(_,R){for(var k=_.length,U=R.length,ee=k<U?k:U,z=0;z<ee;++z){var ae=wt(_[z],R[z]);if(ae!==0)return ae}return k===U?0:k<U?-1:1}(f,h)}}catch{}return NaN}function sr(f){var h=typeof f;return h!="object"?h:ArrayBuffer.isView(f)?"binary":(f=P(f),f==="ArrayBuffer"?"binary":f)}function Ti(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var Tm=(sn.prototype._trans=function(f,h,C){var S=this._tx||Je.trans,_=this.name,R=Qt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function k(z,ae,$){if(!$.schema[_])throw new F.NotFound("Table "+_+" not part of transaction");return h($.idbtrans,$)}var U=$i();try{var ee=S&&S.db._novip===this.db._novip?S===Je.trans?S._promise(f,k,C):$r(function(){return S._promise(f,k,C)},{trans:S,transless:Je.transless||Je}):function z(ae,$,le,Q){if(ae.idbdb&&(ae._state.openComplete||Je.letThrough||ae._vip)){var ie=ae._createTransaction($,le,ae._dbSchema);try{ie.create(),ae._state.PR1398_maxLoop=3}catch(ce){return ce.name===B.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return z(ae,$,le,Q)})):nn(ce)}return ie._promise($,function(ce,ne){return $r(function(){return Je.trans=ie,Q(ce,ne,ie)})}).then(function(ce){if($==="readwrite")try{ie.idbtrans.commit()}catch{}return $==="readonly"?ce:ie._completion.then(function(){return ce})})}if(ae._state.openComplete)return nn(new F.DatabaseClosed(ae._state.dbOpenError));if(!ae._state.isBeingOpened){if(!ae._state.autoOpen)return nn(new F.DatabaseClosed);ae.open().catch(Ge)}return ae._state.dbReadyPromise.then(function(){return z(ae,$,le,Q)})}(this.db,f,[this.name],k);return R&&(ee._consoleTask=R,ee=ee.catch(function(z){return console.trace(z),nn(z)})),ee}finally{U&&gn()}},sn.prototype.get=function(f,h){var C=this;return f&&f.constructor===Object?this.where(f).first(h):f==null?nn(new F.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return C.core.get({trans:S,key:f}).then(function(_){return C.hook.reading.fire(_)})}).then(h)},sn.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(a(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var h=s(f);if(h.length===1)return this.where(h[0]).equals(f[h[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(ee){if(ee.compound&&h.every(function(ae){return 0<=ee.keyPath.indexOf(ae)})){for(var z=0;z<h.length;++z)if(h.indexOf(ee.keyPath[z])===-1)return!1;return!0}return!1}).sort(function(ee,z){return ee.keyPath.length-z.keyPath.length})[0];if(C&&this.db._maxKey!==V){var k=C.keyPath.slice(0,h.length);return this.where(k).equals(k.map(function(z){return f[z]}))}!C&&Qt&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var S=this.schema.idxByName,_=this.db._deps.indexedDB;function R(ee,z){return _.cmp(ee,z)===0}var U=h.reduce(function(le,z){var ae=le[0],$=le[1],le=S[z],Q=f[z];return[ae||le,ae||!le?Nt($,le&&le.multi?function(ie){return ie=G(ie,z),a(ie)&&ie.some(function(ce){return R(Q,ce)})}:function(ie){return R(Q,G(ie,z))}):$]},[null,null]),k=U[0],U=U[1];return k?this.where(k.name).equals(f[k.keyPath]).filter(U):C?this.filter(U):this.where(h).equals("")},sn.prototype.filter=function(f){return this.toCollection().and(f)},sn.prototype.count=function(f){return this.toCollection().count(f)},sn.prototype.offset=function(f){return this.toCollection().offset(f)},sn.prototype.limit=function(f){return this.toCollection().limit(f)},sn.prototype.each=function(f){return this.toCollection().each(f)},sn.prototype.toArray=function(f){return this.toCollection().toArray(f)},sn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},sn.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,a(f)?"[".concat(f.join("+"),"]"):f))},sn.prototype.reverse=function(){return this.toCollection().reverse()},sn.prototype.mapToClass=function(f){var h,C=this.db,S=this.name;function _(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof zr&&(function(ee,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ae(){this.constructor=ee}n(ee,z),ee.prototype=z===null?Object.create(z):(ae.prototype=z.prototype,new ae)}(_,h=f),Object.defineProperty(_.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),_.prototype.table=function(){return S},f=_);for(var R=new Set,k=f.prototype;k;k=c(k))Object.getOwnPropertyNames(k).forEach(function(ee){return R.add(ee)});function U(ee){if(!ee)return ee;var z,ae=Object.create(f.prototype);for(z in ee)if(!R.has(z))try{ae[z]=ee[z]}catch{}return ae}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=U,this.hook("reading",U),f},sn.prototype.defineClass=function(){return this.mapToClass(function(f){l(this,f)})},sn.prototype.add=function(f,h){var C=this,S=this.schema.primKey,_=S.auto,R=S.keyPath,k=f;return R&&_&&(k=mr(R)(f)),this._trans("readwrite",function(U){return C.core.mutate({trans:U,type:"add",keys:h!=null?[h]:null,values:[k]})}).then(function(U){return U.numFailures?De.reject(U.failures[0]):U.lastResult}).then(function(U){if(R)try{W(f,R,U)}catch{}return U})},sn.prototype.update=function(f,h){return typeof f!="object"||a(f)?this.where(":id").equals(f).modify(h):(f=G(f,this.schema.primKey.keyPath),f===void 0?nn(new F.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(h))},sn.prototype.put=function(f,h){var C=this,S=this.schema.primKey,_=S.auto,R=S.keyPath,k=f;return R&&_&&(k=mr(R)(f)),this._trans("readwrite",function(U){return C.core.mutate({trans:U,type:"put",values:[k],keys:h!=null?[h]:null})}).then(function(U){return U.numFailures?De.reject(U.failures[0]):U.lastResult}).then(function(U){if(R)try{W(f,R,U)}catch{}return U})},sn.prototype.delete=function(f){var h=this;return this._trans("readwrite",function(C){return h.core.mutate({trans:C,type:"delete",keys:[f]})}).then(function(C){return C.numFailures?De.reject(C.failures[0]):void 0})},sn.prototype.clear=function(){var f=this;return this._trans("readwrite",function(h){return f.core.mutate({trans:h,type:"deleteRange",range:_t})}).then(function(h){return h.numFailures?De.reject(h.failures[0]):void 0})},sn.prototype.bulkGet=function(f){var h=this;return this._trans("readonly",function(C){return h.core.getMany({keys:f,trans:C}).then(function(S){return S.map(function(_){return h.hook.reading.fire(_)})})})},sn.prototype.bulkAdd=function(f,h,C){var S=this,_=Array.isArray(h)?h:void 0,R=(C=C||(_?void 0:h))?C.allKeys:void 0;return this._trans("readwrite",function(k){var z=S.schema.primKey,U=z.auto,z=z.keyPath;if(z&&_)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(_&&_.length!==f.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var ee=f.length,z=z&&U?f.map(mr(z)):f;return S.core.mutate({trans:k,type:"add",keys:_,values:z,wantResults:R}).then(function(ie){var $=ie.numFailures,le=ie.results,Q=ie.lastResult,ie=ie.failures;if($===0)return R?le:Q;throw new Be("".concat(S.name,".bulkAdd(): ").concat($," of ").concat(ee," operations failed"),ie)})})},sn.prototype.bulkPut=function(f,h,C){var S=this,_=Array.isArray(h)?h:void 0,R=(C=C||(_?void 0:h))?C.allKeys:void 0;return this._trans("readwrite",function(k){var z=S.schema.primKey,U=z.auto,z=z.keyPath;if(z&&_)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(_&&_.length!==f.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var ee=f.length,z=z&&U?f.map(mr(z)):f;return S.core.mutate({trans:k,type:"put",keys:_,values:z,wantResults:R}).then(function(ie){var $=ie.numFailures,le=ie.results,Q=ie.lastResult,ie=ie.failures;if($===0)return R?le:Q;throw new Be("".concat(S.name,".bulkPut(): ").concat($," of ").concat(ee," operations failed"),ie)})})},sn.prototype.bulkUpdate=function(f){var h=this,C=this.core,S=f.map(function(k){return k.key}),_=f.map(function(k){return k.changes}),R=[];return this._trans("readwrite",function(k){return C.getMany({trans:k,keys:S,cache:"clone"}).then(function(U){var ee=[],z=[];f.forEach(function($,le){var Q=$.key,ie=$.changes,ce=U[le];if(ce){for(var ne=0,me=Object.keys(ie);ne<me.length;ne++){var ye=me[ne],be=ie[ye];if(ye===h.schema.primKey.keyPath){if(wt(be,Q)!==0)throw new F.Constraint("Cannot update primary key in bulkUpdate()")}else W(ce,ye,be)}R.push(le),ee.push(Q),z.push(ce)}});var ae=ee.length;return C.mutate({trans:k,type:"put",keys:ee,values:z,updates:{keys:S,changeSpecs:_}}).then(function($){var le=$.numFailures,Q=$.failures;if(le===0)return ae;for(var ie=0,ce=Object.keys(Q);ie<ce.length;ie++){var ne,me=ce[ie],ye=R[Number(me)];ye!=null&&(ne=Q[me],delete Q[me],Q[ye]=ne)}throw new Be("".concat(h.name,".bulkUpdate(): ").concat(le," of ").concat(ae," operations failed"),Q)})})})},sn.prototype.bulkDelete=function(f){var h=this,C=f.length;return this._trans("readwrite",function(S){return h.core.mutate({trans:S,type:"delete",keys:f})}).then(function(k){var _=k.numFailures,R=k.lastResult,k=k.failures;if(_===0)return R;throw new Be("".concat(h.name,".bulkDelete(): ").concat(_," of ").concat(C," operations failed"),k)})},sn);function sn(){}function ql(f){function h(k,U){if(U){for(var ee=arguments.length,z=new Array(ee-1);--ee;)z[ee-1]=arguments[ee];return C[k].subscribe.apply(null,z),f}if(typeof k=="string")return C[k]}var C={};h.addEventType=R;for(var S=1,_=arguments.length;S<_;++S)R(arguments[S]);return h;function R(k,U,ee){if(typeof k!="object"){var z;U=U||Et;var ae={subscribers:[],fire:ee=ee||Ge,subscribe:function($){ae.subscribers.indexOf($)===-1&&(ae.subscribers.push($),ae.fire=U(ae.fire,$))},unsubscribe:function($){ae.subscribers=ae.subscribers.filter(function(le){return le!==$}),ae.fire=ae.subscribers.reduce(U,ee)}};return C[k]=h[k]=ae}s(z=k).forEach(function($){var le=z[$];if(a(le))R($,z[$][0],z[$][1]);else{if(le!=="asap")throw new F.InvalidArgument("Invalid event config");var Q=R($,ke,function(){for(var ie=arguments.length,ce=new Array(ie);ie--;)ce[ie]=arguments[ie];Q.subscribers.forEach(function(ne){L(function(){ne.apply(null,ce)})})})}})}}function Co(f,h){return v(h).from({prototype:f}),h}function Ks(f,h){return!(f.filter||f.algorithm||f.or)&&(h?f.justLimit:!f.replayFilter)}function Cu(f,h){f.filter=Nt(f.filter,h)}function tg(f,h,C){var S=f.replayFilter;f.replayFilter=S?function(){return Nt(S(),h())}:h,f.justLimit=C&&!S}function bu(f,h){if(f.isPrimKey)return h.primaryKey;var C=h.getIndexByKeyPath(f.index);if(!C)throw new F.Schema("KeyPath "+f.index+" on object store "+h.name+" is not indexed");return C}function Wm(f,h,C){var S=bu(f,h.schema);return h.openCursor({trans:C,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:S,range:f.range}})}function Au(f,h,C,S){var _=f.replayFilter?Nt(f.filter,f.replayFilter()):f.filter;if(f.or){var R={},k=function(U,ee,z){var ae,$;_&&!_(ee,z,function(le){return ee.stop(le)},function(le){return ee.fail(le)})||(($=""+(ae=ee.primaryKey))=="[object ArrayBuffer]"&&($=""+new Uint8Array(ae)),d(R,$)||(R[$]=!0,h(U,ee,z)))};return Promise.all([f.or._iterate(k,C),ng(Wm(f,S,C),f.algorithm,k,!f.keysOnly&&f.valueMapper)])}return ng(Wm(f,S,C),Nt(f.algorithm,_),h,!f.keysOnly&&f.valueMapper)}function ng(f,h,C,S){var _=hn(S?function(R,k,U){return C(S(R),k,U)}:C);return f.then(function(R){if(R)return R.start(function(){var k=function(){return R.continue()};h&&!h(R,function(U){return k=U},function(U){R.stop(U),k=Ge},function(U){R.fail(U),k=Ge})||_(R.value,R,function(U){return k=U}),k()})})}var bo=Symbol(),rg=(ig.prototype.execute=function(f){var h=(h=this.replacePrefix)===null||h===void 0?void 0:h[0];return h&&typeof f=="string"&&f.startsWith(h)?this.replacePrefix[1]+f.substring(h.length):f},ig);function ig(f){Object.assign(this,f)}var Su=(Lt.prototype._read=function(f,h){var C=this._ctx;return C.error?C.table._trans(null,nn.bind(null,C.error)):C.table._trans("readonly",f).then(h)},Lt.prototype._write=function(f){var h=this._ctx;return h.error?h.table._trans(null,nn.bind(null,h.error)):h.table._trans("readwrite",f,"locked")},Lt.prototype._addAlgorithm=function(f){var h=this._ctx;h.algorithm=Nt(h.algorithm,f)},Lt.prototype._iterate=function(f,h){return Au(this._ctx,f,h,this._ctx.table.core)},Lt.prototype.clone=function(f){var h=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return f&&l(C,f),h._ctx=C,h},Lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Lt.prototype.each=function(f){var h=this._ctx;return this._read(function(C){return Au(h,f,C,h.table.core)})},Lt.prototype.count=function(f){var h=this;return this._read(function(C){var S=h._ctx,_=S.table.core;if(Ks(S,!0))return _.count({trans:C,query:{index:bu(S,_.schema),range:S.range}}).then(function(k){return Math.min(k,S.limit)});var R=0;return Au(S,function(){return++R,!1},C,_).then(function(){return R})}).then(f)},Lt.prototype.sortBy=function(f,h){var C=f.split(".").reverse(),S=C[0],_=C.length-1;function R(ee,z){return z?R(ee[C[z]],z-1):ee[S]}var k=this._ctx.dir==="next"?1:-1;function U(ee,z){return ee=R(ee,_),z=R(z,_),ee<z?-k:z<ee?k:0}return this.toArray(function(ee){return ee.sort(U)}).then(h)},Lt.prototype.toArray=function(f){var h=this;return this._read(function(C){var S=h._ctx;if(S.dir==="next"&&Ks(S,!0)&&0<S.limit){var _=S.valueMapper,R=bu(S,S.table.core.schema);return S.table.core.query({trans:C,limit:S.limit,values:!0,query:{index:R,range:S.range}}).then(function(U){return U=U.result,_?U.map(_):U})}var k=[];return Au(S,function(U){return k.push(U)},C,S.table.core).then(function(){return k})},f)},Lt.prototype.offset=function(f){var h=this._ctx;return f<=0||(h.offset+=f,Ks(h)?tg(h,function(){var C=f;return function(S,_){return C===0||(C===1?--C:_(function(){S.advance(C),C=0}),!1)}}):tg(h,function(){var C=f;return function(){return--C<0}})),this},Lt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),tg(this._ctx,function(){var h=f;return function(C,S,_){return--h<=0&&S(_),0<=h}},!0),this},Lt.prototype.until=function(f,h){return Cu(this._ctx,function(C,S,_){return!f(C.value)||(S(_),h)}),this},Lt.prototype.first=function(f){return this.limit(1).toArray(function(h){return h[0]}).then(f)},Lt.prototype.last=function(f){return this.reverse().first(f)},Lt.prototype.filter=function(f){var h;return Cu(this._ctx,function(C){return f(C.value)}),(h=this._ctx).isMatch=Nt(h.isMatch,f),this},Lt.prototype.and=function(f){return this.filter(f)},Lt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},Lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Lt.prototype.desc=function(){return this.reverse()},Lt.prototype.eachKey=function(f){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(C,S){f(S.key,S)})},Lt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},Lt.prototype.eachPrimaryKey=function(f){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(C,S){f(S.primaryKey,S)})},Lt.prototype.keys=function(f){var h=this._ctx;h.keysOnly=!h.isMatch;var C=[];return this.each(function(S,_){C.push(_.key)}).then(function(){return C}).then(f)},Lt.prototype.primaryKeys=function(f){var h=this._ctx;if(h.dir==="next"&&Ks(h,!0)&&0<h.limit)return this._read(function(S){var _=bu(h,h.table.core.schema);return h.table.core.query({trans:S,values:!1,limit:h.limit,query:{index:_,range:h.range}})}).then(function(S){return S.result}).then(f);h.keysOnly=!h.isMatch;var C=[];return this.each(function(S,_){C.push(_.primaryKey)}).then(function(){return C}).then(f)},Lt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},Lt.prototype.firstKey=function(f){return this.limit(1).keys(function(h){return h[0]}).then(f)},Lt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},Lt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var h={};return Cu(this._ctx,function(_){var S=_.primaryKey.toString(),_=d(h,S);return h[S]=!0,!_}),this},Lt.prototype.modify=function(f){var h=this,C=this._ctx;return this._write(function(S){var _,R,k;k=typeof f=="function"?f:(_=s(f),R=_.length,function(ne){for(var me=!1,ye=0;ye<R;++ye){var be=_[ye],_e=f[be],Ne=G(ne,be);_e instanceof rg?(W(ne,be,_e.execute(Ne)),me=!0):Ne!==_e&&(W(ne,be,_e),me=!0)}return me});function U(ne,be){var ye=be.failures,be=be.numFailures;ie+=ne-be;for(var _e=0,Ne=s(ye);_e<Ne.length;_e++){var je=Ne[_e];Q.push(ye[je])}}var ee=C.table.core,z=ee.schema.primaryKey,ae=z.outbound,$=z.extractKey,le=h.db._options.modifyChunkSize||200,Q=[],ie=0,ce=[];return h.clone().primaryKeys().then(function(ne){function me(ye){var be=Math.min(le,ne.length-ye);return ee.getMany({trans:S,keys:ne.slice(ye,ye+be),cache:"immutable"}).then(function(_e){for(var Ne=[],je=[],Pe=ae?[]:null,Ke=[],Qe=0;Qe<be;++Qe){var et=_e[Qe],At={value:ze(et),primKey:ne[ye+Qe]};k.call(At,At.value,At)!==!1&&(At.value==null?Ke.push(ne[ye+Qe]):ae||wt($(et),$(At.value))===0?(je.push(At.value),ae&&Pe.push(ne[ye+Qe])):(Ke.push(ne[ye+Qe]),Ne.push(At.value)))}var Yt=Ks(C)&&C.limit===1/0&&(typeof f!="function"||f===og)&&{index:C.index,range:C.range};return Promise.resolve(0<Ne.length&&ee.mutate({trans:S,type:"add",values:Ne}).then(function(Ut){for(var Pt in Ut.failures)Ke.splice(parseInt(Pt),1);U(Ne.length,Ut)})).then(function(){return(0<je.length||Yt&&typeof f=="object")&&ee.mutate({trans:S,type:"put",keys:Pe,values:je,criteria:Yt,changeSpec:typeof f!="function"&&f}).then(function(Ut){return U(je.length,Ut)})}).then(function(){return(0<Ke.length||Yt&&f===og)&&ee.mutate({trans:S,type:"delete",keys:Ke,criteria:Yt}).then(function(Ut){return U(Ke.length,Ut)})}).then(function(){return ne.length>ye+be&&me(ye+le)})})}return me(0).then(function(){if(0<Q.length)throw new q("Error modifying one or more objects",Q,ie,ce);return ne.length})})})},Lt.prototype.delete=function(){var f=this._ctx,h=f.range;return Ks(f)&&(f.isPrimKey||h.type===3)?this._write(function(C){var S=f.table.core.schema.primaryKey,_=h;return f.table.core.count({trans:C,query:{index:S,range:_}}).then(function(R){return f.table.core.mutate({trans:C,type:"deleteRange",range:_}).then(function(k){var U=k.failures;if(k.lastResult,k.results,k=k.numFailures,k)throw new q("Could not delete some values",Object.keys(U).map(function(ee){return U[ee]}),R-k);return R-k})})}):this.modify(og)},Lt);function Lt(){}var og=function(f,h){return h.value=null};function eA(f,h){return f<h?-1:f===h?0:1}function ss(f,h){return h<f?-1:f===h?0:1}function Jr(f,h,C){return f=f instanceof ls?new f.Collection(f):f,f._ctx.error=new(C||TypeError)(h),f}function Oa(f){return new f.Collection(f,function(){return km("")}).limit(0)}function _u(f,h,C,S){var _,R,k,U,ee,z,ae,$=C.length;if(!C.every(function(ie){return typeof ie=="string"}))return Jr(f,ge);function le(ie){_=ie==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},R=ie==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},k=ie==="next"?eA:ss;var ce=C.map(function(ne){return{lower:R(ne),upper:_(ne)}}).sort(function(ne,me){return k(ne.lower,me.lower)});U=ce.map(function(ne){return ne.upper}),ee=ce.map(function(ne){return ne.lower}),ae=(z=ie)==="next"?"":S}le("next"),f=new f.Collection(f,function(){return as(U[0],ee[$-1]+S)}),f._ondirectionchange=function(ie){le(ie)};var Q=0;return f._addAlgorithm(function(ie,ce,ne){var me=ie.key;if(typeof me!="string")return!1;var ye=R(me);if(h(ye,ee,Q))return!0;for(var be=null,_e=Q;_e<$;++_e){var Ne=function(je,Pe,Ke,Qe,et,At){for(var Yt=Math.min(je.length,Qe.length),Ut=-1,Pt=0;Pt<Yt;++Pt){var Ao=Pe[Pt];if(Ao!==Qe[Pt])return et(je[Pt],Ke[Pt])<0?je.substr(0,Pt)+Ke[Pt]+Ke.substr(Pt+1):et(je[Pt],Qe[Pt])<0?je.substr(0,Pt)+Qe[Pt]+Ke.substr(Pt+1):0<=Ut?je.substr(0,Ut)+Pe[Ut]+Ke.substr(Ut+1):null;et(je[Pt],Ao)<0&&(Ut=Pt)}return Yt<Qe.length&&At==="next"?je+Ke.substr(je.length):Yt<je.length&&At==="prev"?je.substr(0,Ke.length):Ut<0?null:je.substr(0,Ut)+Qe[Ut]+Ke.substr(Ut+1)}(me,ye,U[_e],ee[_e],k,z);Ne===null&&be===null?Q=_e+1:(be===null||0<k(be,Ne))&&(be=Ne)}return ce(be!==null?function(){ie.continue(be+ae)}:ne),!1}),f}function as(f,h,C,S){return{type:2,lower:f,upper:h,lowerOpen:C,upperOpen:S}}function km(f){return{type:1,lower:f,upper:f}}var ls=(Object.defineProperty(Fn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Fn.prototype.between=function(f,h,C,S){C=C!==!1,S=S===!0;try{return 0<this._cmp(f,h)||this._cmp(f,h)===0&&(C||S)&&(!C||!S)?Oa(this):new this.Collection(this,function(){return as(f,h,!C,!S)})}catch{return Jr(this,K)}},Fn.prototype.equals=function(f){return f==null?Jr(this,K):new this.Collection(this,function(){return km(f)})},Fn.prototype.above=function(f){return f==null?Jr(this,K):new this.Collection(this,function(){return as(f,void 0,!0)})},Fn.prototype.aboveOrEqual=function(f){return f==null?Jr(this,K):new this.Collection(this,function(){return as(f,void 0,!1)})},Fn.prototype.below=function(f){return f==null?Jr(this,K):new this.Collection(this,function(){return as(void 0,f,!1,!0)})},Fn.prototype.belowOrEqual=function(f){return f==null?Jr(this,K):new this.Collection(this,function(){return as(void 0,f)})},Fn.prototype.startsWith=function(f){return typeof f!="string"?Jr(this,ge):this.between(f,f+V,!0,!0)},Fn.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):_u(this,function(h,C){return h.indexOf(C[0])===0},[f],V)},Fn.prototype.equalsIgnoreCase=function(f){return _u(this,function(h,C){return h===C[0]},[f],"")},Fn.prototype.anyOfIgnoreCase=function(){var f=ue.apply(D,arguments);return f.length===0?Oa(this):_u(this,function(h,C){return C.indexOf(h)!==-1},f,"")},Fn.prototype.startsWithAnyOfIgnoreCase=function(){var f=ue.apply(D,arguments);return f.length===0?Oa(this):_u(this,function(h,C){return C.some(function(S){return h.indexOf(S)===0})},f,V)},Fn.prototype.anyOf=function(){var f=this,h=ue.apply(D,arguments),C=this._cmp;try{h.sort(C)}catch{return Jr(this,K)}if(h.length===0)return Oa(this);var S=new this.Collection(this,function(){return as(h[0],h[h.length-1])});S._ondirectionchange=function(R){C=R==="next"?f._ascending:f._descending,h.sort(C)};var _=0;return S._addAlgorithm(function(R,k,U){for(var ee=R.key;0<C(ee,h[_]);)if(++_===h.length)return k(U),!1;return C(ee,h[_])===0||(k(function(){R.continue(h[_])}),!1)}),S},Fn.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Fn.prototype.noneOf=function(){var f=ue.apply(D,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Jr(this,K)}var h=f.reduce(function(C,S){return C?C.concat([[C[C.length-1][1],S]]):[[-1/0,S]]},null);return h.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Fn.prototype.inAnyRange=function(me,h){var C=this,S=this._cmp,_=this._ascending,R=this._descending,k=this._min,U=this._max;if(me.length===0)return Oa(this);if(!me.every(function(ye){return ye[0]!==void 0&&ye[1]!==void 0&&_(ye[0],ye[1])<=0}))return Jr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var ee=!h||h.includeLowers!==!1,z=h&&h.includeUppers===!0,ae,$=_;function le(ye,be){return $(ye[0],be[0])}try{(ae=me.reduce(function(ye,be){for(var _e=0,Ne=ye.length;_e<Ne;++_e){var je=ye[_e];if(S(be[0],je[1])<0&&0<S(be[1],je[0])){je[0]=k(je[0],be[0]),je[1]=U(je[1],be[1]);break}}return _e===Ne&&ye.push(be),ye},[])).sort(le)}catch{return Jr(this,K)}var Q=0,ie=z?function(ye){return 0<_(ye,ae[Q][1])}:function(ye){return 0<=_(ye,ae[Q][1])},ce=ee?function(ye){return 0<R(ye,ae[Q][0])}:function(ye){return 0<=R(ye,ae[Q][0])},ne=ie,me=new this.Collection(this,function(){return as(ae[0][0],ae[ae.length-1][1],!ee,!z)});return me._ondirectionchange=function(ye){$=ye==="next"?(ne=ie,_):(ne=ce,R),ae.sort(le)},me._addAlgorithm(function(ye,be,_e){for(var Ne,je=ye.key;ne(je);)if(++Q===ae.length)return be(_e),!1;return!ie(Ne=je)&&!ce(Ne)||(C._cmp(je,ae[Q][1])===0||C._cmp(je,ae[Q][0])===0||be(function(){$===_?ye.continue(ae[Q][0]):ye.continue(ae[Q][1])}),!1)}),me},Fn.prototype.startsWithAnyOf=function(){var f=ue.apply(D,arguments);return f.every(function(h){return typeof h=="string"})?f.length===0?Oa(this):this.inAnyRange(f.map(function(h){return[h,h+V]})):Jr(this,"startsWithAnyOf() only works with strings")},Fn);function Fn(){}function ji(f){return hn(function(h){return cs(h),f(h.target.error),!1})}function cs(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var ec="storagemutated",tc="x-storagemutated-1",us=ql(null,ec),Vm=(Wi.prototype._lock=function(){return N(!Je.global),++this._reculock,this._reculock!==1||Je.global||(Je.lockOwnerFor=this),this},Wi.prototype._unlock=function(){if(N(!Je.global),--this._reculock==0)for(Je.global||(Je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Zi(f[1],f[0])}catch{}}return this},Wi.prototype._locked=function(){return this._reculock&&Je.lockOwnerFor!==this},Wi.prototype.create=function(f){var h=this;if(!this.mode)return this;var C=this.db.idbdb,S=this.db._state.dbOpenError;if(N(!this.idbtrans),!f&&!C)switch(S&&S.name){case"DatabaseClosedError":throw new F.DatabaseClosed(S);case"MissingAPIError":throw new F.MissingAPI(S.message,S);default:throw new F.OpenFailed(S)}if(!this.active)throw new F.TransactionInactive;return N(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=hn(function(_){cs(_),h._reject(f.error)}),f.onabort=hn(function(_){cs(_),h.active&&h._reject(new F.Abort(f.error)),h.active=!1,h.on("abort").fire(_)}),f.oncomplete=hn(function(){h.active=!1,h._resolve(),"mutatedParts"in f&&us.storagemutated.fire(f.mutatedParts)}),this},Wi.prototype._promise=function(f,h,C){var S=this;if(f==="readwrite"&&this.mode!=="readwrite")return nn(new F.ReadOnly("Transaction is readonly"));if(!this.active)return nn(new F.TransactionInactive);if(this._locked())return new De(function(R,k){S._blockedFuncs.push([function(){S._promise(f,h,C).then(R,k)},Je])});if(C)return $r(function(){var R=new De(function(k,U){S._lock();var ee=h(k,U,S);ee&&ee.then&&ee.then(k,U)});return R.finally(function(){return S._unlock()}),R._lib=!0,R});var _=new De(function(R,k){var U=h(R,k,S);U&&U.then&&U.then(R,k)});return _._lib=!0,_},Wi.prototype._root=function(){return this.parent?this.parent._root():this},Wi.prototype.waitFor=function(f){var h,C=this._root(),S=De.resolve(f);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return S}):(C._waitingFor=S,C._waitingQueue=[],h=C.idbtrans.objectStore(C.storeNames[0]),function R(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(h.get(-1/0).onsuccess=R)}());var _=C._waitingFor;return new De(function(R,k){S.then(function(U){return C._waitingQueue.push(hn(R.bind(null,U)))},function(U){return C._waitingQueue.push(hn(k.bind(null,U)))}).finally(function(){C._waitingFor===_&&(C._waitingFor=null)})})},Wi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort))},Wi.prototype.table=function(f){var h=this._memoizedTables||(this._memoizedTables={});if(d(h,f))return h[f];var C=this.schema[f];if(!C)throw new F.NotFound("Table "+f+" not part of transaction");return C=new this.db.Table(f,C,this),C.core=this.db.core.table(f),h[f]=C},Wi);function Wi(){}function wu(f,h,C,S,_,R,k){return{name:f,keyPath:h,unique:C,multi:S,auto:_,compound:R,src:(C&&!k?"&":"")+(S?"*":"")+(_?"++":"")+Ha(h)}}function Ha(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Bu(f,h,C){return{name:f,primKey:h,indexes:C,mappedClass:null,idxByName:(S=function(_){return[_.name,_]},C.reduce(function(_,R,k){return k=S(R,k),k&&(_[k[0]]=k[1]),_},{}))};var S}var nc=function(f){try{return f.only([[]]),nc=function(){return[[]]},[[]]}catch{return nc=function(){return V},V}};function sg(f){return f==null?function(){}:typeof f=="string"?(h=f).split(".").length===1?function(C){return C[h]}:function(C){return G(C,h)}:function(C){return G(C,f)};var h}function Om(f){return[].slice.call(f)}var H=0;function te(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Ze(f,h,ee){function S(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=ne.lower,ie=ne.upper,ce=ne.lowerOpen,ne=ne.upperOpen;return Q===void 0?ie===void 0?null:h.upperBound(ie,!!ne):ie===void 0?h.lowerBound(Q,!!ce):h.bound(Q,ie,!!ce,!!ne)}function _(le){var Q,ie=le.name;return{name:ie,schema:le,mutate:function(ce){var ne=ce.trans,me=ce.type,ye=ce.keys,be=ce.values,_e=ce.range;return new Promise(function(Ne,je){Ne=hn(Ne);var Pe=ne.objectStore(ie),Ke=Pe.keyPath==null,Qe=me==="put"||me==="add";if(!Qe&&me!=="delete"&&me!=="deleteRange")throw new Error("Invalid operation type: "+me);var et,At=(ye||be||{length:1}).length;if(ye&&be&&ye.length!==be.length)throw new Error("Given keys array must have same length as given values array.");if(At===0)return Ne({numFailures:0,failures:{},results:[],lastResult:void 0});function Yt(Qr){++Ao,cs(Qr)}var Ut=[],Pt=[],Ao=0;if(me==="deleteRange"){if(_e.type===4)return Ne({numFailures:Ao,failures:Pt,results:[],lastResult:void 0});_e.type===3?Ut.push(et=Pe.clear()):Ut.push(et=Pe.delete(S(_e)))}else{var Ke=Qe?Ke?[be,ye]:[be,null]:[ye,null],Xt=Ke[0],Nr=Ke[1];if(Qe)for(var Zr=0;Zr<At;++Zr)Ut.push(et=Nr&&Nr[Zr]!==void 0?Pe[me](Xt[Zr],Nr[Zr]):Pe[me](Xt[Zr])),et.onerror=Yt;else for(Zr=0;Zr<At;++Zr)Ut.push(et=Pe[me](Xt[Zr])),et.onerror=Yt}function Xm(Qr){Qr=Qr.target.result,Ut.forEach(function(sc,hA){return sc.error!=null&&(Pt[hA]=sc.error)}),Ne({numFailures:Ao,failures:Pt,results:me==="delete"?ye:Ut.map(function(sc){return sc.result}),lastResult:Qr})}et.onerror=function(Qr){Yt(Qr),Xm(Qr)},et.onsuccess=Xm})},getMany:function(ce){var ne=ce.trans,me=ce.keys;return new Promise(function(ye,be){ye=hn(ye);for(var _e,Ne=ne.objectStore(ie),je=me.length,Pe=new Array(je),Ke=0,Qe=0,et=function(Ut){Ut=Ut.target,Pe[Ut._pos]=Ut.result,++Qe===Ke&&ye(Pe)},At=ji(be),Yt=0;Yt<je;++Yt)me[Yt]!=null&&((_e=Ne.get(me[Yt]))._pos=Yt,_e.onsuccess=et,_e.onerror=At,++Ke);Ke===0&&ye(Pe)})},get:function(ce){var ne=ce.trans,me=ce.key;return new Promise(function(ye,be){ye=hn(ye);var _e=ne.objectStore(ie).get(me);_e.onsuccess=function(Ne){return ye(Ne.target.result)},_e.onerror=ji(be)})},query:(Q=z,function(ce){return new Promise(function(ne,me){ne=hn(ne);var ye,be,_e,Ke=ce.trans,Ne=ce.values,je=ce.limit,et=ce.query,Pe=je===1/0?void 0:je,Qe=et.index,et=et.range,Ke=Ke.objectStore(ie),Qe=Qe.isPrimaryKey?Ke:Ke.index(Qe.name),et=S(et);if(je===0)return ne({result:[]});Q?((Pe=Ne?Qe.getAll(et,Pe):Qe.getAllKeys(et,Pe)).onsuccess=function(At){return ne({result:At.target.result})},Pe.onerror=ji(me)):(ye=0,be=!Ne&&"openKeyCursor"in Qe?Qe.openKeyCursor(et):Qe.openCursor(et),_e=[],be.onsuccess=function(At){var Yt=be.result;return Yt?(_e.push(Ne?Yt.value:Yt.primaryKey),++ye===je?ne({result:_e}):void Yt.continue()):ne({result:_e})},be.onerror=ji(me))})}),openCursor:function(ce){var ne=ce.trans,me=ce.values,ye=ce.query,be=ce.reverse,_e=ce.unique;return new Promise(function(Ne,je){Ne=hn(Ne);var Qe=ye.index,Pe=ye.range,Ke=ne.objectStore(ie),Ke=Qe.isPrimaryKey?Ke:Ke.index(Qe.name),Qe=be?_e?"prevunique":"prev":_e?"nextunique":"next",et=!me&&"openKeyCursor"in Ke?Ke.openKeyCursor(S(Pe),Qe):Ke.openCursor(S(Pe),Qe);et.onerror=ji(je),et.onsuccess=hn(function(At){var Yt,Ut,Pt,Ao,Xt=et.result;Xt?(Xt.___id=++H,Xt.done=!1,Yt=Xt.continue.bind(Xt),Ut=(Ut=Xt.continuePrimaryKey)&&Ut.bind(Xt),Pt=Xt.advance.bind(Xt),Ao=function(){throw new Error("Cursor not stopped")},Xt.trans=ne,Xt.stop=Xt.continue=Xt.continuePrimaryKey=Xt.advance=function(){throw new Error("Cursor not started")},Xt.fail=hn(je),Xt.next=function(){var Nr=this,Zr=1;return this.start(function(){return Zr--?Nr.continue():Nr.stop()}).then(function(){return Nr})},Xt.start=function(Nr){function Zr(){if(et.result)try{Nr()}catch(Qr){Xt.fail(Qr)}else Xt.done=!0,Xt.start=function(){throw new Error("Cursor behind last entry")},Xt.stop()}var Xm=new Promise(function(Qr,sc){Qr=hn(Qr),et.onerror=ji(sc),Xt.fail=sc,Xt.stop=function(hA){Xt.stop=Xt.continue=Xt.continuePrimaryKey=Xt.advance=Ao,Qr(hA)}});return et.onsuccess=hn(function(Qr){et.onsuccess=Zr,Zr()}),Xt.continue=Yt,Xt.continuePrimaryKey=Ut,Xt.advance=Pt,Zr(),Xm},Ne(Xt)):Ne(null)},je)})},count:function(ce){var ne=ce.query,me=ce.trans,ye=ne.index,be=ne.range;return new Promise(function(_e,Ne){var je=me.objectStore(ie),Pe=ye.isPrimaryKey?je:je.index(ye.name),je=S(be),Pe=je?Pe.count(je):Pe.count();Pe.onsuccess=hn(function(Ke){return _e(Ke.target.result)}),Pe.onerror=ji(Ne)})}}}var R,k,U,ae=(k=ee,U=Om((R=f).objectStoreNames),{schema:{name:R.name,tables:U.map(function(le){return k.objectStore(le)}).map(function(le){var Q=le.keyPath,ne=le.autoIncrement,ie=a(Q),ce={},ne={name:le.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:ie,keyPath:Q,autoIncrement:ne,unique:!0,extractKey:sg(Q)},indexes:Om(le.indexNames).map(function(me){return le.index(me)}).map(function(_e){var ye=_e.name,be=_e.unique,Ne=_e.multiEntry,_e=_e.keyPath,Ne={name:ye,compound:a(_e),keyPath:_e,unique:be,multiEntry:Ne,extractKey:sg(_e)};return ce[te(_e)]=Ne}),getIndexByKeyPath:function(me){return ce[te(me)]}};return ce[":id"]=ne.primaryKey,Q!=null&&(ce[te(Q)]=ne.primaryKey),ne})},hasGetAll:0<U.length&&"getAll"in k.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ee=ae.schema,z=ae.hasGetAll,ae=ee.tables.map(_),$={};return ae.forEach(function(le){return $[le.name]=le}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(le){if(!$[le])throw new Error("Table '".concat(le,"' not found"));return $[le]},MIN_KEY:-1/0,MAX_KEY:nc(h),schema:ee}}function it(f,h,C,S){var _=C.IDBKeyRange;return C.indexedDB,{dbcore:(S=Ze(h,_,S),f.dbcore.reduce(function(R,k){return k=k.create,r(r({},R),k(R))},S))}}function an(f,S){var C=S.db,S=it(f._middlewares,C,f._deps,S);f.core=S.dbcore,f.tables.forEach(function(_){var R=_.name;f.core.schema.tables.some(function(k){return k.name===R})&&(_.core=f.core.table(R),f[R]instanceof f.Table&&(f[R].core=_.core))})}function Bt(f,h,C,S){C.forEach(function(_){var R=S[_];h.forEach(function(k){var U=function ee(z,ae){return y(z,ae)||(z=c(z))&&ee(z,ae)}(k,_);(!U||"value"in U&&U.value===void 0)&&(k===f.Transaction.prototype||k instanceof f.Transaction?m(k,_,{get:function(){return this.table(_)},set:function(ee){p(this,_,{value:ee,writable:!0,configurable:!0,enumerable:!0})}}):k[_]=new f.Table(_,R))})})}function In(f,h){h.forEach(function(C){for(var S in C)C[S]instanceof f.Table&&delete C[S]})}function Un(f,h){return f._cfg.version-h._cfg.version}function jn(f,h,C,S){var _=f._dbSchema;C.objectStoreNames.contains("$meta")&&!_.$meta&&(_.$meta=Bu("$meta",Qi("")[0],[]),f._storeNames.push("$meta"));var R=f._createTransaction("readwrite",f._storeNames,_);R.create(C),R._completion.catch(S);var k=R._reject.bind(R),U=Je.transless||Je;$r(function(){return Je.trans=R,Je.transless=U,h!==0?(an(f,C),z=h,((ee=R).storeNames.includes("$meta")?ee.table("$meta").get("version").then(function(ae){return ae??z}):De.resolve(z)).then(function(ae){return le=ae,Q=R,ie=C,ce=[],ae=($=f)._versions,ne=$._dbSchema=vr(0,$.idbdb,ie),(ae=ae.filter(function(me){return me._cfg.version>=le})).length!==0?(ae.forEach(function(me){ce.push(function(){var ye=ne,be=me._cfg.dbschema;ki($,ye,ie),ki($,be,ie),ne=$._dbSchema=be;var _e=yr(ye,be);_e.add.forEach(function(Qe){jr(ie,Qe[0],Qe[1].primKey,Qe[1].indexes)}),_e.change.forEach(function(Qe){if(Qe.recreate)throw new F.Upgrade("Not yet support for changing primary key");var et=ie.objectStore(Qe.name);Qe.add.forEach(function(At){return Ir(et,At)}),Qe.change.forEach(function(At){et.deleteIndex(At.name),Ir(et,At)}),Qe.del.forEach(function(At){return et.deleteIndex(At)})});var Ne=me._cfg.contentUpgrade;if(Ne&&me._cfg.version>le){an($,ie),Q._memoizedTables={};var je=j(be);_e.del.forEach(function(Qe){je[Qe]=ye[Qe]}),In($,[$.Transaction.prototype]),Bt($,[$.Transaction.prototype],s(je),je),Q.schema=je;var Pe,Ke=Re(Ne);return Ke&&os(),_e=De.follow(function(){var Qe;(Pe=Ne(Q))&&Ke&&(Qe=zi.bind(null,null),Pe.then(Qe,Qe))}),Pe&&typeof Pe.then=="function"?De.resolve(Pe):_e.then(function(){return Pe})}}),ce.push(function(ye){var be,_e,Ne=me._cfg.dbschema;be=Ne,_e=ye,[].slice.call(_e.db.objectStoreNames).forEach(function(je){return be[je]==null&&_e.db.deleteObjectStore(je)}),In($,[$.Transaction.prototype]),Bt($,[$.Transaction.prototype],$._storeNames,$._dbSchema),Q.schema=$._dbSchema}),ce.push(function(ye){$.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil($.idbdb.version/10)===me._cfg.version?($.idbdb.deleteObjectStore("$meta"),delete $._dbSchema.$meta,$._storeNames=$._storeNames.filter(function(be){return be!=="$meta"})):ye.objectStore("$meta").put(me._cfg.version,"version"))})}),function me(){return ce.length?De.resolve(ce.shift()(Q.idbtrans)).then(me):De.resolve()}().then(function(){Qn(ne,ie)})):De.resolve();var $,le,Q,ie,ce,ne}).catch(k)):(s(_).forEach(function(ae){jr(C,ae,_[ae].primKey,_[ae].indexes)}),an(f,C),void De.follow(function(){return f.on.populate.fire(R)}).catch(k));var ee,z})}function Cn(f,h){Qn(f._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var C=vr(0,f.idbdb,h);ki(f,f._dbSchema,h);for(var S=0,_=yr(C,f._dbSchema).change;S<_.length;S++){var R=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var U=h.objectStore(k.name);k.add.forEach(function(ee){Qt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(ee.src)),Ir(U,ee)})}(_[S]);if(typeof R=="object")return R.value}}function yr(f,h){var C,S={del:[],add:[],change:[]};for(C in f)h[C]||S.del.push(C);for(C in h){var _=f[C],R=h[C];if(_){var k={name:C,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(_.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||_.primKey.auto!==R.primKey.auto)k.recreate=!0,S.change.push(k);else{var U=_.idxByName,ee=R.idxByName,z=void 0;for(z in U)ee[z]||k.del.push(z);for(z in ee){var ae=U[z],$=ee[z];ae?ae.src!==$.src&&k.change.push($):k.add.push($)}(0<k.del.length||0<k.add.length||0<k.change.length)&&S.change.push(k)}}else S.add.push([C,R])}return S}function jr(f,h,C,S){var _=f.db.createObjectStore(h,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return S.forEach(function(R){return Ir(_,R)}),_}function Qn(f,h){s(f).forEach(function(C){h.db.objectStoreNames.contains(C)||(Qt&&console.debug("Dexie: Creating missing table",C),jr(h,C,f[C].primKey,f[C].indexes))})}function Ir(f,h){f.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function vr(f,h,C){var S={};return b(h.objectStoreNames,0).forEach(function(_){for(var R=C.objectStore(_),k=wu(Ha(z=R.keyPath),z||"",!0,!1,!!R.autoIncrement,z&&typeof z!="string",!0),U=[],ee=0;ee<R.indexNames.length;++ee){var ae=R.index(R.indexNames[ee]),z=ae.keyPath,ae=wu(ae.name,z,!!ae.unique,!!ae.multiEntry,!1,z&&typeof z!="string",!1);U.push(ae)}S[_]=Bu(_,k,U)}),S}function ki(f,h,C){for(var S=C.db.objectStoreNames,_=0;_<S.length;++_){var R=S[_],k=C.objectStore(R);f._hasGetAll="getAll"in k;for(var U=0;U<k.indexNames.length;++U){var ee=k.indexNames[U],z=k.index(ee).keyPath,ae=typeof z=="string"?z:"["+b(z).join("+")+"]";!h[R]||(z=h[R].idxByName[ae])&&(z.name=ee,delete h[R].idxByName[ae],h[R].idxByName[ee]=z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Qi(f){return f.split(",").map(function(h,C){var S=(h=h.trim()).replace(/([&*]|\+\+)/g,""),_=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return wu(S,_||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(_),C===0)})}var Ms=(rc.prototype._parseStoresSpec=function(f,h){s(f).forEach(function(C){if(f[C]!==null){var S=Qi(f[C]),_=S.shift();if(_.unique=!0,_.multi)throw new F.Schema("Primary key cannot be multi-valued");S.forEach(function(R){if(R.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!R.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")}),h[C]=Bu(C,_,S)}})},rc.prototype.stores=function(C){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,C):C;var C=h._versions,S={},_={};return C.forEach(function(R){l(S,R._cfg.storesSource),_=R._cfg.dbschema={},R._parseStoresSpec(S,_)}),h._dbSchema=_,In(h,[h._allTables,h,h.Transaction.prototype]),Bt(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],s(_),_),h._storeNames=s(_),this},rc.prototype.upgrade=function(f){return this._cfg.contentUpgrade=On(this._cfg.contentUpgrade||Ge,f),this},rc);function rc(){}function Fa(f,h){var C=f._dbNamesDB;return C||(C=f._dbNamesDB=new $s(Le,{addons:[],indexedDB:f,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function xa(f){return f&&typeof f.databases=="function"}function tA(f){return $r(function(){return Je.letThrough=!0,f()})}function nA(f){return!("from"in f)}var Gr=function(f,h){if(!this){var C=new Gr;return f&&"d"in f&&l(C,f),C}l(this,arguments.length?{d:1,from:f,to:1<arguments.length?h:f}:{d:0})};function ag(f,h,C){var S=wt(h,C);if(!isNaN(S)){if(0<S)throw RangeError();if(nA(f))return l(f,{from:h,to:C,d:1});var _=f.l,S=f.r;if(wt(C,f.from)<0)return _?ag(_,h,C):f.l={from:h,to:C,d:1,l:null,r:null},JZ(f);if(0<wt(h,f.to))return S?ag(S,h,C):f.r={from:h,to:C,d:1,l:null,r:null},JZ(f);wt(h,f.from)<0&&(f.from=h,f.l=null,f.d=S?S.d+1:1),0<wt(C,f.to)&&(f.to=C,f.r=null,f.d=f.l?f.l.d+1:1),C=!f.r,_&&!f.l&&lg(f,_),S&&C&&lg(f,S)}}function lg(f,h){nA(h)||function C(S,ee){var R=ee.from,k=ee.to,U=ee.l,ee=ee.r;ag(S,R,k),U&&C(S,U),ee&&C(S,ee)}(f,h)}function Hm(f,h){var C=rA(h),S=C.next();if(S.done)return!1;for(var _=S.value,R=rA(f),k=R.next(_.from),U=k.value;!S.done&&!k.done;){if(wt(U.from,_.to)<=0&&0<=wt(U.to,_.from))return!0;wt(_.from,U.from)<0?_=(S=C.next(U.from)).value:U=(k=R.next(_.from)).value}return!1}function rA(f){var h=nA(f)?null:{s:0,n:f};return{next:function(C){for(var S=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,S)for(;h.n.l&&wt(C,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!S||wt(C,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function JZ(f){var h,C,S=(((h=f.r)===null||h===void 0?void 0:h.d)||0)-(((C=f.l)===null||C===void 0?void 0:C.d)||0),_=1<S?"r":S<-1?"l":"";_&&(h=_=="r"?"l":"r",C=r({},f),S=f[_],f.from=S.from,f.to=S.to,f[_]=S[_],C[_]=S[h],(f[h]=C).d=jZ(C)),f.d=jZ(f)}function jZ(C){var h=C.r,C=C.l;return(h?C?Math.max(h.d,C.d):h.d:C?C.d:0)+1}function Fm(f,h){return s(h).forEach(function(C){f[C]?lg(f[C],h[C]):f[C]=function S(_){var R,k,U={};for(R in _)d(_,R)&&(k=_[R],U[R]=!k||typeof k!="object"||Ue.has(k.constructor)?k:S(k));return U}(h[C])}),f}function iA(f,h){return f.all||h.all||Object.keys(f).some(function(C){return h[C]&&Hm(h[C],f[C])})}g(Gr.prototype,((qi={add:function(f){return lg(this,f),this},addKey:function(f){return ag(this,f,f),this},addKeys:function(f){var h=this;return f.forEach(function(C){return ag(h,C,C)}),this}})[oe]=function(){return rA(this)},qi));var ic={},oA={},sA=!1;function xm(f){Fm(oA,f),sA||(sA=!0,setTimeout(function(){sA=!1,aA(oA,!(oA={}))},0))}function aA(f,h){h===void 0&&(h=!1);var C=new Set;if(f.all)for(var S=0,_=Object.values(ic);S<_.length;S++)QZ(k=_[S],f,C,h);else for(var R in f){var k,U=/^idb\:\/\/(.*)\/(.*)\//.exec(R);U&&(R=U[1],U=U[2],(k=ic["idb://".concat(R,"/").concat(U)])&&QZ(k,f,C,h))}C.forEach(function(ee){return ee()})}function QZ(f,h,C,S){for(var _=[],R=0,k=Object.entries(f.queries.query);R<k.length;R++){for(var U=k[R],ee=U[0],z=[],ae=0,$=U[1];ae<$.length;ae++){var le=$[ae];iA(h,le.obsSet)?le.subscribers.forEach(function(ne){return C.add(ne)}):S&&z.push(le)}S&&_.push([ee,z])}if(S)for(var Q=0,ie=_;Q<ie.length;Q++){var ce=ie[Q],ee=ce[0],z=ce[1];f.queries.query[ee]=z}}function zz(f){var h=f._state,C=f._deps.indexedDB;if(h.isBeingOpened||f.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?nn(h.dbOpenError):f});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var S=h.openCanceller,_=Math.round(10*f.verno),R=!1;function k(){if(h.openCanceller!==S)throw new F.DatabaseClosed("db.open() was cancelled")}function U(){return new De(function(le,Q){if(k(),!C)throw new F.MissingAPI;var ie=f.name,ce=h.autoSchema||!_?C.open(ie):C.open(ie,_);if(!ce)throw new F.MissingAPI;ce.onerror=ji(Q),ce.onblocked=hn(f._fireOnBlocked),ce.onupgradeneeded=hn(function(ne){var me;ae=ce.transaction,h.autoSchema&&!f._options.allowEmptyDB?(ce.onerror=cs,ae.abort(),ce.result.close(),(me=C.deleteDatabase(ie)).onsuccess=me.onerror=hn(function(){Q(new F.NoSuchDatabase("Database ".concat(ie," doesnt exist")))})):(ae.onerror=ji(Q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,$=ne<1,f.idbdb=ce.result,R&&Cn(f,ae),jn(f,ne/10,ae,Q))},Q),ce.onsuccess=hn(function(){ae=null;var ne,me,ye,be,_e,Ne=f.idbdb=ce.result,je=b(Ne.objectStoreNames);if(0<je.length)try{var Pe=Ne.transaction((be=je).length===1?be[0]:be,"readonly");if(h.autoSchema)me=Ne,ye=Pe,(ne=f).verno=me.version/10,ye=ne._dbSchema=vr(0,me,ye),ne._storeNames=b(me.objectStoreNames,0),Bt(ne,[ne._allTables],s(ye),ye);else if(ki(f,f._dbSchema,Pe),((_e=yr(vr(0,(_e=f).idbdb,Pe),_e._dbSchema)).add.length||_e.change.some(function(Ke){return Ke.add.length||Ke.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ne.close(),_=Ne.version+1,R=!0,le(U());an(f,Pe)}catch{}We.push(f),Ne.onversionchange=hn(function(Ke){h.vcFired=!0,f.on("versionchange").fire(Ke)}),Ne.onclose=hn(function(Ke){f.on("close").fire(Ke)}),$&&(_e=f._deps,Pe=ie,Ne=_e.indexedDB,_e=_e.IDBKeyRange,xa(Ne)||Pe===Le||Fa(Ne,_e).put({name:Pe}).catch(Ge)),le()},Q)}).catch(function(le){switch(le==null?void 0:le.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),U();break;case"VersionError":if(0<_)return _=0,U()}return De.reject(le)})}var ee,z=h.dbReadyResolve,ae=null,$=!1;return De.race([S,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(le){function Q(){return indexedDB.databases().finally(le)}ee=setInterval(Q,100),Q()}).finally(function(){return clearInterval(ee)}):Promise.resolve()).then(U)]).then(function(){return k(),h.onReadyBeingFired=[],De.resolve(tA(function(){return f.on.ready.fire(f.vip)})).then(function le(){if(0<h.onReadyBeingFired.length){var Q=h.onReadyBeingFired.reduce(On,Ge);return h.onReadyBeingFired=[],De.resolve(tA(function(){return Q(f.vip)})).then(le)}})}).finally(function(){h.openCanceller===S&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(le){h.dbOpenError=le;try{ae&&ae.abort()}catch{}return S===h.openCanceller&&f._close(),nn(le)}).finally(function(){h.openComplete=!0,z()}).then(function(){var le;return $&&(le={},f.tables.forEach(function(Q){Q.schema.indexes.forEach(function(ie){ie.name&&(le["idb://".concat(f.name,"/").concat(Q.name,"/").concat(ie.name)]=new Gr(-1/0,[[[]]]))}),le["idb://".concat(f.name,"/").concat(Q.name,"/")]=le["idb://".concat(f.name,"/").concat(Q.name,"/:dels")]=new Gr(-1/0,[[[]]])}),us(ec).fire(le),aA(le,!0)),f})}function lA(f){function h(R){return f.next(R)}var C=_(h),S=_(function(R){return f.throw(R)});function _(R){return function(ee){var U=R(ee),ee=U.value;return U.done?ee:ee&&typeof ee.then=="function"?ee.then(C,S):a(ee)?Promise.all(ee).then(C,S):C(ee)}}return _(h)()}function Lm(f,h,C){for(var S=a(f)?f.slice():[f],_=0;_<C;++_)S.push(h);return S}var Jz={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(h){var C=f.table(h),S=C.schema,_={},R=[];function k($,le,Q){var ie=te($),ce=_[ie]=_[ie]||[],ne=$==null?0:typeof $=="string"?1:$.length,me=0<le,me=r(r({},Q),{name:me?"".concat(ie,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:me,keyTail:le,keyLength:ne,extractKey:sg($),unique:!me&&Q.unique});return ce.push(me),me.isPrimaryKey||R.push(me),1<ne&&k(ne===2?$[0]:$.slice(0,ne-1),le+1,Q),ce.sort(function(ye,be){return ye.keyTail-be.keyTail}),me}h=k(S.primaryKey.keyPath,0,S.primaryKey),_[":id"]=[h];for(var U=0,ee=S.indexes;U<ee.length;U++){var z=ee[U];k(z.keyPath,0,z)}function ae($){var le,Q=$.query.index;return Q.isVirtual?r(r({},$),{query:{index:Q.lowLevelIndex,range:(le=$.query.range,Q=Q.keyTail,{type:le.type===1?2:le.type,lower:Lm(le.lower,le.lowerOpen?f.MAX_KEY:f.MIN_KEY,Q),lowerOpen:!0,upper:Lm(le.upper,le.upperOpen?f.MIN_KEY:f.MAX_KEY,Q),upperOpen:!0})}}):$}return r(r({},C),{schema:r(r({},S),{primaryKey:h,indexes:R,getIndexByKeyPath:function($){return($=_[te($)])&&$[0]}}),count:function($){return C.count(ae($))},query:function($){return C.query(ae($))},openCursor:function($){var le=$.query.index,Q=le.keyTail,ie=le.isVirtual,ce=le.keyLength;return ie?C.openCursor(ae($)).then(function(me){return me&&ne(me)}):C.openCursor($);function ne(me){return Object.create(me,{continue:{value:function(ye){ye!=null?me.continue(Lm(ye,$.reverse?f.MAX_KEY:f.MIN_KEY,Q)):$.unique?me.continue(me.key.slice(0,ce).concat($.reverse?f.MIN_KEY:f.MAX_KEY,Q)):me.continue()}},continuePrimaryKey:{value:function(ye,be){me.continuePrimaryKey(Lm(ye,f.MAX_KEY,Q),be)}},primaryKey:{get:function(){return me.primaryKey}},key:{get:function(){var ye=me.key;return ce===1?ye[0]:ye.slice(0,ce)}},value:{get:function(){return me.value}}})}}})}})}};function cA(f,h,C,S){return C=C||{},S=S||"",s(f).forEach(function(_){var R,k,U;d(h,_)?(R=f[_],k=h[_],typeof R=="object"&&typeof k=="object"&&R&&k?(U=P(R))!==P(k)?C[S+_]=h[_]:U==="Object"?cA(R,k,C,S+_+"."):R!==k&&(C[S+_]=h[_]):R!==k&&(C[S+_]=h[_])):C[S+_]=void 0}),s(h).forEach(function(_){d(f,_)||(C[S+_]=h[_])}),C}function uA(f,h){return h.type==="delete"?h.keys:h.keys||h.values.map(f.extractKey)}var jz={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(h){var C=f.table(h),S=C.schema.primaryKey;return r(r({},C),{mutate:function(_){var R=Je.trans,k=R.table(h).hook,U=k.deleting,ee=k.creating,z=k.updating;switch(_.type){case"add":if(ee.fire===Ge)break;return R._promise("readwrite",function(){return ae(_)},!0);case"put":if(ee.fire===Ge&&z.fire===Ge)break;return R._promise("readwrite",function(){return ae(_)},!0);case"delete":if(U.fire===Ge)break;return R._promise("readwrite",function(){return ae(_)},!0);case"deleteRange":if(U.fire===Ge)break;return R._promise("readwrite",function(){return function $(le,Q,ie){return C.query({trans:le,values:!1,query:{index:S,range:Q},limit:ie}).then(function(ce){var ne=ce.result;return ae({type:"delete",keys:ne,trans:le}).then(function(me){return 0<me.numFailures?Promise.reject(me.failures[0]):ne.length<ie?{failures:[],numFailures:0,lastResult:void 0}:$(le,r(r({},Q),{lower:ne[ne.length-1],lowerOpen:!0}),ie)})})}(_.trans,_.range,1e4)},!0)}return C.mutate(_);function ae($){var le,Q,ie,ce=Je.trans,ne=$.keys||uA(S,$);if(!ne)throw new Error("Keys missing");return($=$.type==="add"||$.type==="put"?r(r({},$),{keys:ne}):r({},$)).type!=="delete"&&($.values=i([],$.values,!0)),$.keys&&($.keys=i([],$.keys,!0)),le=C,ie=ne,((Q=$).type==="add"?Promise.resolve([]):le.getMany({trans:Q.trans,keys:ie,cache:"immutable"})).then(function(me){var ye=ne.map(function(be,_e){var Ne,je,Pe,Ke=me[_e],Qe={onerror:null,onsuccess:null};return $.type==="delete"?U.fire.call(Qe,be,Ke,ce):$.type==="add"||Ke===void 0?(Ne=ee.fire.call(Qe,be,$.values[_e],ce),be==null&&Ne!=null&&($.keys[_e]=be=Ne,S.outbound||W($.values[_e],S.keyPath,be))):(Ne=cA(Ke,$.values[_e]),(je=z.fire.call(Qe,Ne,be,Ke,ce))&&(Pe=$.values[_e],Object.keys(je).forEach(function(et){d(Pe,et)?Pe[et]=je[et]:W(Pe,et,je[et])}))),Qe});return C.mutate($).then(function(be){for(var _e=be.failures,Ne=be.results,je=be.numFailures,be=be.lastResult,Pe=0;Pe<ne.length;++Pe){var Ke=(Ne||ne)[Pe],Qe=ye[Pe];Ke==null?Qe.onerror&&Qe.onerror(_e[Pe]):Qe.onsuccess&&Qe.onsuccess($.type==="put"&&me[Pe]?$.values[Pe]:Ke)}return{failures:_e,results:Ne,numFailures:je,lastResult:be}}).catch(function(be){return ye.forEach(function(_e){return _e.onerror&&_e.onerror(be)}),Promise.reject(be)})})}}})}})}};function qZ(f,h,C){try{if(!h||h.keys.length<f.length)return null;for(var S=[],_=0,R=0;_<h.keys.length&&R<f.length;++_)wt(h.keys[_],f[R])===0&&(S.push(C?ze(h.values[_]):h.values[_]),++R);return S.length===f.length?S:null}catch{return null}}var Qz={stack:"dbcore",level:-1,create:function(f){return{table:function(h){var C=f.table(h);return r(r({},C),{getMany:function(S){if(!S.cache)return C.getMany(S);var _=qZ(S.keys,S.trans._cache,S.cache==="clone");return _?De.resolve(_):C.getMany(S).then(function(R){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?ze(R):R},R})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),C.mutate(S)}})}}}};function e2(f,h){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function t2(f,h){switch(f){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qz={stack:"dbcore",level:0,name:"Observability",create:function(f){var h=f.schema.name,C=new Gr(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(S,_,R){if(Je.subscr&&_!=="readonly")throw new F.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Je.querier));return f.transaction(S,_,R)},table:function(S){var _=f.table(S),R=_.schema,k=R.primaryKey,$=R.indexes,U=k.extractKey,ee=k.outbound,z=k.autoIncrement&&$.filter(function(Q){return Q.compound&&Q.keyPath.includes(k.keyPath)}),ae=r(r({},_),{mutate:function(Q){function ie(et){return et="idb://".concat(h,"/").concat(S,"/").concat(et),be[et]||(be[et]=new Gr)}var ce,ne,me,ye=Q.trans,be=Q.mutatedParts||(Q.mutatedParts={}),_e=ie(""),Ne=ie(":dels"),je=Q.type,Qe=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[uA(k,Q).filter(function(et){return et}),Q.values]:[],Pe=Qe[0],Ke=Qe[1],Qe=Q.trans._cache;return a(Pe)?(_e.addKeys(Pe),(Qe=je==="delete"||Pe.length===Ke.length?qZ(Pe,Qe):null)||Ne.addKeys(Pe),(Qe||Ke)&&(ce=ie,ne=Qe,me=Ke,R.indexes.forEach(function(et){var At=ce(et.name||"");function Yt(Pt){return Pt!=null?et.extractKey(Pt):null}function Ut(Pt){return et.multiEntry&&a(Pt)?Pt.forEach(function(Ao){return At.addKey(Ao)}):At.addKey(Pt)}(ne||me).forEach(function(Pt,Nr){var Xt=ne&&Yt(ne[Nr]),Nr=me&&Yt(me[Nr]);wt(Xt,Nr)!==0&&(Xt!=null&&Ut(Xt),Nr!=null&&Ut(Nr))})}))):Pe?(Ke={from:Pe.lower,to:Pe.upper},Ne.add(Ke),_e.add(Ke)):(_e.add(C),Ne.add(C),R.indexes.forEach(function(et){return ie(et.name).add(C)})),_.mutate(Q).then(function(et){return!Pe||Q.type!=="add"&&Q.type!=="put"||(_e.addKeys(et.results),z&&z.forEach(function(At){var Yt=Q.values.map(function(Pt){return At.extractKey(Pt)}),Ut=At.keyPath.findIndex(function(Pt){return Pt===k.keyPath});et.results.forEach(function(Pt){return Yt[Ut]=Pt}),ie(At.name).addKeys(Yt)})),ye.mutatedParts=Fm(ye.mutatedParts||{},be),et})}}),$=function(ie){var ce=ie.query,ie=ce.index,ce=ce.range;return[ie,new Gr((ie=ce.lower)!==null&&ie!==void 0?ie:f.MIN_KEY,(ce=ce.upper)!==null&&ce!==void 0?ce:f.MAX_KEY)]},le={get:function(Q){return[k,new Gr(Q.key)]},getMany:function(Q){return[k,new Gr().addKeys(Q.keys)]},count:$,query:$,openCursor:$};return s(le).forEach(function(Q){ae[Q]=function(ie){var ce=Je.subscr,ne=!!ce,me=e2(Je,_)&&t2(Q,ie)?ie.obsSet={}:ce;if(ne){var ye=function(Ke){return Ke="idb://".concat(h,"/").concat(S,"/").concat(Ke),me[Ke]||(me[Ke]=new Gr)},be=ye(""),_e=ye(":dels"),ce=le[Q](ie),ne=ce[0],ce=ce[1];if((Q==="query"&&ne.isPrimaryKey&&!ie.values?_e:ye(ne.name||"")).add(ce),!ne.isPrimaryKey){if(Q!=="count"){var Ne=Q==="query"&&ee&&ie.values&&_.query(r(r({},ie),{values:!1}));return _[Q].apply(this,arguments).then(function(Ke){if(Q==="query"){if(ee&&ie.values)return Ne.then(function(Yt){return Yt=Yt.result,be.addKeys(Yt),Ke});var Qe=ie.values?Ke.result.map(U):Ke.result;(ie.values?be:_e).addKeys(Qe)}else if(Q==="openCursor"){var et=Ke,At=ie.values;return et&&Object.create(et,{key:{get:function(){return _e.addKey(et.primaryKey),et.key}},primaryKey:{get:function(){var Yt=et.primaryKey;return _e.addKey(Yt),Yt}},value:{get:function(){return At&&be.addKey(et.primaryKey),et.value}}})}return Ke})}_e.add(C)}}return _[Q].apply(this,arguments)}}),ae}})}};function n2(f,h,C){if(C.numFailures===0)return h;if(h.type==="deleteRange")return null;var S=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return C.numFailures===S?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(_,R){return!(R in C.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(_,R){return!(R in C.failures)})),h)}function dA(f,h){return C=f,((S=h).lower===void 0||(S.lowerOpen?0<wt(C,S.lower):0<=wt(C,S.lower)))&&(f=f,(h=h).upper===void 0||(h.upperOpen?wt(f,h.upper)<0:wt(f,h.upper)<=0));var C,S}function r2(f,h,le,S,_,R){if(!le||le.length===0)return f;var k=h.query.index,U=k.multiEntry,ee=h.query.range,z=S.schema.primaryKey.extractKey,ae=k.extractKey,$=(k.lowLevelIndex||k).extractKey,le=le.reduce(function(Q,ie){var ce=Q,ne=ie.type==="add"||ie.type==="put"?ie.values.filter(function(_e){return _e=ae(_e),U&&a(_e)?_e.some(function(Ne){return dA(Ne,ee)}):dA(_e,ee)}).map(function(_e){return _e=ze(_e),R&&Object.freeze(_e),_e}):[];switch(ie.type){case"add":ce=Q.concat(h.values?ne:ne.map(function(Ne){return z(Ne)}));break;case"put":var me=new Gr().addKeys(ie.values.map(function(Ne){return z(Ne)})),ce=Q.filter(function(Ne){return Ne=h.values?z(Ne):Ne,!Hm(new Gr(Ne),me)}).concat(h.values?ne:ne.map(function(Ne){return z(Ne)}));break;case"delete":var ye=new Gr().addKeys(ie.keys);ce=Q.filter(function(Ne){return Ne=h.values?z(Ne):Ne,!Hm(new Gr(Ne),ye)});break;case"deleteRange":var be=ie.range;ce=Q.filter(function(Ne){return!dA(z(Ne),be)})}return ce},f);return le===f?f:(le.sort(function(Q,ie){return wt($(Q),$(ie))||wt(z(Q),z(ie))}),h.limit&&h.limit<1/0&&(le.length>h.limit?le.length=h.limit:f.length===h.limit&&le.length<h.limit&&(_.dirty=!0)),R?Object.freeze(le):le)}function i2(f,h){return wt(f.lower,h.lower)===0&&wt(f.upper,h.upper)===0&&!!f.lowerOpen==!!h.lowerOpen&&!!f.upperOpen==!!h.upperOpen}function eJ(f,h){return function(C,S,_,R){if(C===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=wt(C,S))===0){if(_&&R)return 0;if(_)return 1;if(R)return-1}return S}(f.lower,h.lower,f.lowerOpen,h.lowerOpen)<=0&&0<=function(C,S,_,R){if(C===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=wt(C,S))===0){if(_&&R)return 0;if(_)return-1;if(R)return 1}return S}(f.upper,h.upper,f.upperOpen,h.upperOpen)}function tJ(f,h,C,S){f.subscribers.add(C),S.addEventListener("abort",function(){var _,R;f.subscribers.delete(C),f.subscribers.size===0&&(_=f,R=h,setTimeout(function(){_.subscribers.size===0&&M(R,_)},3e3))})}var nJ={stack:"dbcore",level:0,name:"Cache",create:function(f){var h=f.schema.name;return r(r({},f),{transaction:function(C,S,_){var R,k,U=f.transaction(C,S,_);return S==="readwrite"&&(k=(R=new AbortController).signal,_=function(ee){return function(){if(R.abort(),S==="readwrite"){for(var z=new Set,ae=0,$=C;ae<$.length;ae++){var le=$[ae],Q=ic["idb://".concat(h,"/").concat(le)];if(Q){var ie=f.table(le),ce=Q.optimisticOps.filter(function(At){return At.trans===U});if(U._explicit&&ee&&U.mutatedParts)for(var ne=0,me=Object.values(Q.queries.query);ne<me.length;ne++)for(var ye=0,be=(je=me[ne]).slice();ye<be.length;ye++)iA((Pe=be[ye]).obsSet,U.mutatedParts)&&(M(je,Pe),Pe.subscribers.forEach(function(At){return z.add(At)}));else if(0<ce.length){Q.optimisticOps=Q.optimisticOps.filter(function(At){return At.trans!==U});for(var _e=0,Ne=Object.values(Q.queries.query);_e<Ne.length;_e++)for(var je,Pe,Ke,Qe=0,et=(je=Ne[_e]).slice();Qe<et.length;Qe++)(Pe=et[Qe]).res!=null&&U.mutatedParts&&(ee&&!Pe.dirty?(Ke=Object.isFrozen(Pe.res),Ke=r2(Pe.res,Pe.req,ce,ie,Pe,Ke),Pe.dirty?(M(je,Pe),Pe.subscribers.forEach(function(At){return z.add(At)})):Ke!==Pe.res&&(Pe.res=Ke,Pe.promise=De.resolve({result:Ke}))):(Pe.dirty&&M(je,Pe),Pe.subscribers.forEach(function(At){return z.add(At)})))}}}z.forEach(function(At){return At()})}}},U.addEventListener("abort",_(!1),{signal:k}),U.addEventListener("error",_(!1),{signal:k}),U.addEventListener("complete",_(!0),{signal:k})),U},table:function(C){var S=f.table(C),_=S.schema.primaryKey;return r(r({},S),{mutate:function(R){var k=Je.trans;if(_.outbound||k.db._options.cache==="disabled"||k.explicit)return S.mutate(R);var U=ic["idb://".concat(h,"/").concat(C)];return U?(k=S.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||uA(_,R).some(function(ee){return ee==null}))?(U.optimisticOps.push(R),R.mutatedParts&&xm(R.mutatedParts),k.then(function(ee){0<ee.numFailures&&(M(U.optimisticOps,R),(ee=n2(0,R,ee))&&U.optimisticOps.push(ee),R.mutatedParts&&xm(R.mutatedParts))}),k.catch(function(){M(U.optimisticOps,R),R.mutatedParts&&xm(R.mutatedParts)})):k.then(function(ee){var z=n2(0,r(r({},R),{values:R.values.map(function(Q,$){var le,Q=(le=_.keyPath)!==null&&le!==void 0&&le.includes(".")?ze(Q):r({},Q);return W(Q,_.keyPath,ee.results[$]),Q})}),ee);U.optimisticOps.push(z),queueMicrotask(function(){return R.mutatedParts&&xm(R.mutatedParts)})}),k):S.mutate(R)},query:function(R){if(!e2(Je,S)||!t2("query",R))return S.query(R);var k=((z=Je.trans)===null||z===void 0?void 0:z.db._options.cache)==="immutable",$=Je,U=$.requery,ee=$.signal,z=function(ie,ce,ne,me){var ye=ic["idb://".concat(ie,"/").concat(ce)];if(!ye)return[];if(!(ce=ye.queries[ne]))return[null,!1,ye,null];var be=ce[(me.query?me.query.index.name:null)||""];if(!be)return[null,!1,ye,null];switch(ne){case"query":var _e=be.find(function(Ne){return Ne.req.limit===me.limit&&Ne.req.values===me.values&&i2(Ne.req.query.range,me.query.range)});return _e?[_e,!0,ye,be]:[be.find(function(Ne){return("limit"in Ne.req?Ne.req.limit:1/0)>=me.limit&&(!me.values||Ne.req.values)&&eJ(Ne.req.query.range,me.query.range)}),!1,ye,be];case"count":return _e=be.find(function(Ne){return i2(Ne.req.query.range,me.query.range)}),[_e,!!_e,ye,be]}}(h,C,"query",R),ae=z[0],$=z[1],le=z[2],Q=z[3];return ae&&$?ae.obsSet=R.obsSet:($=S.query(R).then(function(ie){var ce=ie.result;if(ae&&(ae.res=ce),k){for(var ne=0,me=ce.length;ne<me;++ne)Object.freeze(ce[ne]);Object.freeze(ce)}else ie.result=ze(ce);return ie}).catch(function(ie){return Q&&ae&&M(Q,ae),Promise.reject(ie)}),ae={obsSet:R.obsSet,promise:$,subscribers:new Set,type:"query",req:R,dirty:!1},Q?Q.push(ae):(Q=[ae],(le=le||(ic["idb://".concat(h,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=Q)),tJ(ae,Q,U,ee),ae.promise.then(function(ie){return{result:r2(ie.result,R,le==null?void 0:le.optimisticOps,S,ae,k)}})}})}})}};function Ym(f,h){return new Proxy(f,{get:function(C,S,_){return S==="db"?h:Reflect.get(C,S,_)}})}var $s=(xn.prototype.version=function(f){if(isNaN(f)||f<.1)throw new F.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var h=this._versions,C=h.filter(function(S){return S._cfg.version===f})[0];return C||(C=new this.Version(f),h.push(C),h.sort(Un),C.stores({}),this._state.autoSchema=!1,C)},xn.prototype._whenReady=function(f){var h=this;return this.idbdb&&(this._state.openComplete||Je.letThrough||this._vip)?f():new De(function(C,S){if(h._state.openComplete)return S(new F.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void S(new F.DatabaseClosed);h.open().catch(Ge)}h._state.dbReadyPromise.then(C,S)}).then(f)},xn.prototype.use=function(f){var h=f.stack,C=f.create,S=f.level,_=f.name;return _&&this.unuse({stack:h,name:_}),f=this._middlewares[h]||(this._middlewares[h]=[]),f.push({stack:h,create:C,level:S??10,name:_}),f.sort(function(R,k){return R.level-k.level}),this},xn.prototype.unuse=function(f){var h=f.stack,C=f.name,S=f.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(_){return S?_.create!==S:!!C&&_.name!==C})),this},xn.prototype.open=function(){var f=this;return Zi(ft,function(){return zz(f)})},xn.prototype._close=function(){var f=this._state,h=We.indexOf(this);if(0<=h&&We.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new De(function(C){f.dbReadyResolve=C}),f.openCanceller=new De(function(C,S){f.cancelOpen=S}))},xn.prototype.close=function(C){var h=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;h?(C.isBeingOpened&&C.cancelOpen(new F.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new F.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},xn.prototype.delete=function(f){var h=this;f===void 0&&(f={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new De(function(_,R){function k(){h.close(f);var U=h._deps.indexedDB.deleteDatabase(h.name);U.onsuccess=hn(function(){var ee,z,ae;ee=h._deps,z=h.name,ae=ee.indexedDB,ee=ee.IDBKeyRange,xa(ae)||z===Le||Fa(ae,ee).delete(z).catch(Ge),_()}),U.onerror=ji(R),U.onblocked=h._fireOnBlocked}if(C)throw new F.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(k):k()})},xn.prototype.backendDB=function(){return this.idbdb},xn.prototype.isOpen=function(){return this.idbdb!==null},xn.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},xn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},xn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xn.prototype,"tables",{get:function(){var f=this;return s(this._allTables).map(function(h){return f._allTables[h]})},enumerable:!1,configurable:!0}),xn.prototype.transaction=function(){var f=(function(h,C,S){var _=arguments.length;if(_<2)throw new F.InvalidArgument("Too few arguments");for(var R=new Array(_-1);--_;)R[_-1]=arguments[_];return S=R.pop(),[h,Ce(R),S]}).apply(this,arguments);return this._transaction.apply(this,f)},xn.prototype._transaction=function(f,h,C){var S=this,_=Je.trans;_&&_.db===this&&f.indexOf("!")===-1||(_=null);var R,k,U=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(k=h.map(function(z){if(z=z instanceof S.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),f=="r"||f===tt)R=tt;else{if(f!="rw"&&f!=at)throw new F.InvalidArgument("Invalid transaction mode: "+f);R=at}if(_){if(_.mode===tt&&R===at){if(!U)throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");_=null}_&&k.forEach(function(z){if(_&&_.storeNames.indexOf(z)===-1){if(!U)throw new F.SubTransaction("Table "+z+" not included in parent transaction.");_=null}}),U&&_&&!_.active&&(_=null)}}catch(z){return _?_._promise(null,function(ae,$){$(z)}):nn(z)}var ee=(function z(ae,$,le,Q,ie){return De.resolve().then(function(){var ce=Je.transless||Je,ne=ae._createTransaction($,le,ae._dbSchema,Q);if(ne.explicit=!0,ce={trans:ne,transless:ce},Q)ne.idbtrans=Q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,ae._state.PR1398_maxLoop=3}catch(be){return be.name===B.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return z(ae,$,le,null,ie)})):nn(be)}var me,ye=Re(ie);return ye&&os(),ce=De.follow(function(){var be;(me=ie.call(ne,ne))&&(ye?(be=zi.bind(null,null),me.then(be,be)):typeof me.next=="function"&&typeof me.throw=="function"&&(me=lA(me)))},ce),(me&&typeof me.then=="function"?De.resolve(me).then(function(be){return ne.active?be:nn(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ce.then(function(){return me})).then(function(be){return Q&&ne._resolve(),ne._completion.then(function(){return be})}).catch(function(be){return ne._reject(be),nn(be)})})}).bind(null,this,R,k,_,C);return _?_._promise(R,ee,"lock"):Je.trans?Zi(Je.transless,function(){return S._whenReady(ee)}):this._whenReady(ee)},xn.prototype.table=function(f){if(!d(this._allTables,f))throw new F.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},xn);function xn(f,h){var C=this;this._middlewares={},this.verno=0;var S=xn.dependencies;this._options=h=r({addons:xn.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},S=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var _,R,k,U,ee,z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ge,dbReadyPromise:null,cancelOpen:Ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};z.dbReadyPromise=new De(function($){z.dbReadyResolve=$}),z.openCanceller=new De(function($,le){z.cancelOpen=le}),this._state=z,this.name=f,this.on=ql(this,"populate","blocked","versionchange","close",{ready:[On,Ge]}),this.on.ready.subscribe=A(this.on.ready.subscribe,function($){return function(le,Q){xn.vip(function(){var ie,ce=C._state;ce.openComplete?(ce.dbOpenError||De.resolve().then(le),Q&&$(le)):ce.onReadyBeingFired?(ce.onReadyBeingFired.push(le),Q&&$(le)):($(le),ie=C,Q||$(function ne(){ie.on.ready.unsubscribe(le),ie.on.ready.unsubscribe(ne)}))})}}),this.Collection=(_=this,Co(Su.prototype,function(me,ne){this.db=_;var Q=_t,ie=null;if(ne)try{Q=ne()}catch(ye){ie=ye}var ce=me._ctx,ne=ce.table,me=ne.hook.reading.fire;this._ctx={table:ne,index:ce.index,isPrimKey:!ce.index||ne.schema.primKey.keyPath&&ce.index===ne.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ie,or:ce.or,valueMapper:me!==ke?me:null}})),this.Table=(R=this,Co(Tm.prototype,function($,le,Q){this.db=R,this._tx=Q,this.name=$,this.schema=le,this.hook=R._allTables[$]?R._allTables[$].hook:ql(null,{creating:[bt,Ge],reading:[dt,ke],updating:[pt,Ge],deleting:[Wt,Ge]})})),this.Transaction=(k=this,Co(Vm.prototype,function($,le,Q,ie,ce){var ne=this;this.db=k,this.mode=$,this.storeNames=le,this.schema=Q,this.chromeTransactionDurability=ie,this.idbtrans=null,this.on=ql(this,"complete","error","abort"),this.parent=ce||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(me,ye){ne._resolve=me,ne._reject=ye}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(me){var ye=ne.active;return ne.active=!1,ne.on.error.fire(me),ne.parent?ne.parent._reject(me):ye&&ne.idbtrans&&ne.idbtrans.abort(),nn(me)})})),this.Version=(U=this,Co(Ms.prototype,function($){this.db=U,this._cfg={version:$,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ee=this,Co(ls.prototype,function($,le,Q){if(this.db=ee,this._ctx={table:$,index:le===":id"?null:le,or:Q},this._cmp=this._ascending=wt,this._descending=function(ie,ce){return wt(ce,ie)},this._max=function(ie,ce){return 0<wt(ie,ce)?ie:ce},this._min=function(ie,ce){return wt(ie,ce)<0?ie:ce},this._IDBKeyRange=ee._deps.IDBKeyRange,!this._IDBKeyRange)throw new F.MissingAPI})),this.on("versionchange",function($){0<$.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function($){!$.newVersion||$.newVersion<$.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat($.oldVersion/10))}),this._maxKey=nc(h.IDBKeyRange),this._createTransaction=function($,le,Q,ie){return new C.Transaction($,le,Q,C._options.chromeTransactionDurability,ie)},this._fireOnBlocked=function($){C.on("blocked").fire($),We.filter(function(le){return le.name===C.name&&le!==C&&!le._state.vcFired}).map(function(le){return le.on("versionchange").fire($)})},this.use(Qz),this.use(nJ),this.use(qz),this.use(Jz),this.use(jz);var ae=new Proxy(this,{get:function($,le,Q){if(le==="_vip")return!0;if(le==="table")return function(ce){return Ym(C.table(ce),ae)};var ie=Reflect.get($,le,Q);return ie instanceof Tm?Ym(ie,ae):le==="tables"?ie.map(function(ce){return Ym(ce,ae)}):le==="_createTransaction"?function(){return Ym(ie.apply(this,arguments),ae)}:ie}});this.vip=ae,S.forEach(function($){return $(C)})}var Pm,qi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",rJ=(fA.prototype.subscribe=function(f,h,C){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:h,complete:C})},fA.prototype[qi]=function(){return this},fA);function fA(f){this._subscribe=f}try{Pm={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Pm={indexedDB:null,IDBKeyRange:null}}function o2(f){var h,C=!1,S=new rJ(function(_){var R=Re(f),k,U=!1,ee={},z={},ae={get closed(){return U},unsubscribe:function(){U||(U=!0,k&&k.abort(),$&&us.storagemutated.unsubscribe(Q))}};_.start&&_.start(ae);var $=!1,le=function(){return Ql(ie)},Q=function(ce){Fm(ee,ce),iA(z,ee)&&le()},ie=function(){var ce,ne,me;!U&&Pm.indexedDB&&(ee={},ce={},k&&k.abort(),k=new AbortController,me=function(ye){var be=$i();try{R&&os();var _e=$r(f,ye);return _e=R?_e.finally(zi):_e}finally{be&&gn()}}(ne={subscr:ce,signal:k.signal,requery:le,querier:f,trans:null}),Promise.resolve(me).then(function(ye){C=!0,h=ye,U||ne.signal.aborted||(ee={},function(be){for(var _e in be)if(d(be,_e))return;return 1}(z=ce)||$||(us(ec,Q),$=!0),Ql(function(){return!U&&_.next&&_.next(ye)}))},function(ye){C=!1,["DatabaseClosedError","AbortError"].includes(ye==null?void 0:ye.name)||U||Ql(function(){U||_.error&&_.error(ye)})}))};return setTimeout(le,0),ae});return S.hasValue=function(){return C},S.getValue=function(){return h},S}var oc=$s;function gA(f){var h=La;try{La=!0,us.storagemutated.fire(f),aA(f,!0)}finally{La=h}}g(oc,r(r({},Se),{delete:function(f){return new oc(f,{addons:[]}).delete()},exists:function(f){return new oc(f,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return h=oc.dependencies,C=h.indexedDB,h=h.IDBKeyRange,(xa(C)?Promise.resolve(C.databases()).then(function(S){return S.map(function(_){return _.name}).filter(function(_){return _!==Le})}):Fa(C,h).toCollection().primaryKeys()).then(f)}catch{return nn(new F.MissingAPI)}var h,C},defineClass:function(){return function(f){l(this,f)}},ignoreTransaction:function(f){return Je.trans?Zi(Je.transless,f):f()},vip:tA,async:function(f){return function(){try{var h=lA(f.apply(this,arguments));return h&&typeof h.then=="function"?h:De.resolve(h)}catch(C){return nn(C)}}},spawn:function(f,h,C){try{var S=lA(f.apply(C,h||[]));return S&&typeof S.then=="function"?S:De.resolve(S)}catch(_){return nn(_)}},currentTransaction:{get:function(){return Je.trans||null}},waitFor:function(f,h){return h=De.resolve(typeof f=="function"?oc.ignoreTransaction(f):f).timeout(h||6e4),Je.trans?Je.trans.waitFor(h):h},Promise:De,debug:{get:function(){return Qt},set:function(f){ut(f)}},derive:v,extend:l,props:g,override:A,Events:ql,on:us,liveQuery:o2,extendObservabilitySet:Fm,getByKeyPath:G,setByKeyPath:W,delByKeyPath:function(f,h){typeof h=="string"?W(f,h,void 0):"length"in h&&[].map.call(h,function(C){W(f,C,void 0)})},shallowClone:j,deepClone:ze,getObjectDiff:cA,cmp:wt,asap:L,minKey:-1/0,addons:[],connections:We,errnames:B,dependencies:Pm,cache:ic,semVer:"4.0.4",version:"4.0.4".split(".").map(function(f){return parseInt(f)}).reduce(function(f,h,C){return f+h/Math.pow(10,2*C)})})),oc.maxKey=nc(oc.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(us(ec,function(f){La||(f=new CustomEvent(tc,{detail:f}),La=!0,dispatchEvent(f),La=!1)}),addEventListener(tc,function(f){f=f.detail,La||gA(f)}));var Eu,La=!1,s2=function(){};return typeof BroadcastChannel<"u"&&((s2=function(){(Eu=new BroadcastChannel(tc)).onmessage=function(f){return f.data&&gA(f.data)}})(),typeof Eu.unref=="function"&&Eu.unref(),us(ec,function(f){La||Eu.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!$s.disableBfCache&&f.persisted){Qt&&console.debug("Dexie: handling persisted pagehide"),Eu!=null&&Eu.close();for(var h=0,C=We;h<C.length;h++)C[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!$s.disableBfCache&&f.persisted&&(Qt&&console.debug("Dexie: handling persisted pageshow"),s2(),gA({all:new Gr(-1/0,[[]])}))})),De.rejectionMapper=function(f,h){return!f||f instanceof pe||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Y[f.name]?f:(h=new Y[f.name](h||f.message,f),"stack"in f&&m(h,"stack",{get:function(){return this.inner.stack}}),h)},ut(Qt),r($s,Object.freeze({__proto__:null,Dexie:$s,liveQuery:o2,Entity:zr,cmp:wt,PropModSymbol:bo,PropModification:rg,replacePrefix:function(f,h){return new rg({replacePrefix:[f,h]})},default:$s,RangeSet:Gr,mergeRanges:lg,rangesOverlap:Hm}),{default:$s}),$s})})(dX);var Ote=dX.exports;const rw=Ht(Ote),ET=Symbol.for("Dexie"),eo=globalThis[ET]||(globalThis[ET]=rw);if(rw.semVer!==eo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${rw.semVer} and ${eo.semVer}`);var tn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(tn||(tn={}));var iw;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(iw||(iw={}));const rt=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$a=e=>{switch(typeof e){case"undefined":return rt.undefined;case"string":return rt.string;case"number":return isNaN(e)?rt.nan:rt.number;case"boolean":return rt.boolean;case"function":return rt.function;case"bigint":return rt.bigint;case"symbol":return rt.symbol;case"object":return Array.isArray(e)?rt.array:e===null?rt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rt.promise:typeof Map<"u"&&e instanceof Map?rt.map:typeof Set<"u"&&e instanceof Set?rt.set:typeof Date<"u"&&e instanceof Date?rt.date:rt.object;default:return rt.unknown}},Xe=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Hte=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ho extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(s))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ho.create=e=>new Ho(e);const Ph=(e,t)=>{let n;switch(e.code){case Xe.invalid_type:e.received===rt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Xe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,tn.jsonStringifyReplacer)}`;break;case Xe.unrecognized_keys:n=`Unrecognized key(s) in object: ${tn.joinValues(e.keys,", ")}`;break;case Xe.invalid_union:n="Invalid input";break;case Xe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${tn.joinValues(e.options)}`;break;case Xe.invalid_enum_value:n=`Invalid enum value. Expected ${tn.joinValues(e.options)}, received '${e.received}'`;break;case Xe.invalid_arguments:n="Invalid function arguments";break;case Xe.invalid_return_type:n="Invalid function return type";break;case Xe.invalid_date:n="Invalid date";break;case Xe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:tn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Xe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Xe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Xe.custom:n="Invalid input";break;case Xe.invalid_intersection_types:n="Intersection results could not be merged";break;case Xe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Xe.not_finite:n="Number must be finite";break;default:n=t.defaultError,tn.assertNever(e)}return{message:n}};let fX=Ph;function Fte(e){fX=e}function UI(){return fX}const DI=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(s,{data:t,defaultError:a}).message;return{...i,path:o,message:i.message||a}},xte=[];function st(e,t){const n=DI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,UI(),Ph].filter(r=>!!r)});e.common.issues.push(n)}class Lr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Rt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return Lr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Rt;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const Rt=Object.freeze({status:"aborted"}),gX=e=>({status:"dirty",value:e}),si=e=>({status:"valid",value:e}),ow=e=>e.status==="aborted",sw=e=>e.status==="dirty",Xh=e=>e.status==="valid",KI=e=>typeof Promise<"u"&&e instanceof Promise;var yt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(yt||(yt={}));class Ws{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const RT=(e,t)=>{if(Xh(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ho(e.common.issues);return this._error=n,this._error}}};function Ot(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,a)=>s.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class xt{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return $a(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:$a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lr,ctx:{common:t.parent.common,data:t.data,parsedType:$a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(KI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$a(t)},o=this._parseSync({data:t,path:i.path,parent:i});return RT(i,o)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$a(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(KI(i)?i:Promise.resolve(i));return RT(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:Xe.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Po({schema:this,typeName:Ct.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return aa.create(this,this._def)}nullable(){return Hc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fo.create(this,this._def)}promise(){return Yd.create(this,this._def)}or(t){return Mh.create([this,t],this._def)}and(t){return $h.create(this,t,this._def)}transform(t){return new Po({...Ot(this._def),schema:this,typeName:Ct.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new qh({...Ot(this._def),innerType:this,defaultValue:n,typeName:Ct.ZodDefault})}brand(){return new pX({typeName:Ct.ZodBranded,type:this,...Ot(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new JI({...Ot(this._def),innerType:this,catchValue:n,typeName:Ct.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Up.create(this,t)}readonly(){return QI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lte=/^c[^\s-]{8,}$/i,Yte=/^[a-z][a-z0-9]*$/,Pte=/[0-9A-HJKMNP-TV-Z]{26}/,Xte=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ute=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Dte=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Kte=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Mte=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,$te=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function zte(e,t){return!!((t==="v4"||!t)&&Kte.test(e)||(t==="v6"||!t)&&Mte.test(e))}class Wo extends xt{constructor(){super(...arguments),this._regex=(t,n,r)=>this.refinement(i=>t.test(i),{validation:n,code:Xe.invalid_string,...yt.errToObj(r)}),this.nonempty=t=>this.min(1,yt.errToObj(t)),this.trim=()=>new Wo({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Wo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Wo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rt.string){const o=this._getOrReturnCtx(t);return st(o,{code:Xe.invalid_type,expected:rt.string,received:o.parsedType}),Rt}const r=new Lr;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?st(i,{code:Xe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&st(i,{code:Xe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Ute.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"email",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Dte.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"emoji",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Xte.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"uuid",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Lte.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"cuid",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Yte.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"cuid2",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Pte.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"ulid",code:Xe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),st(i,{validation:"url",code:Xe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"regex",code:Xe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?$te(o).test(t.data)||(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="ip"?zte(t.data,o.version)||(i=this._getOrReturnCtx(t,i),st(i,{validation:"ip",code:Xe.invalid_string,message:o.message}),r.dirty()):tn.assertNever(o);return{status:r.value,value:t.data}}_addCheck(t){return new Wo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...yt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...yt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...yt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...yt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...yt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...yt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...yt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...yt.errToObj(t)})}datetime(t){var n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,...yt.errToObj(t==null?void 0:t.message)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...yt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...yt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...yt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...yt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...yt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...yt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...yt.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Wo.create=e=>{var t;return new Wo({checks:[],typeName:Ct.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};function Jte(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class Gl extends xt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rt.number){const o=this._getOrReturnCtx(t);return st(o,{code:Xe.invalid_type,expected:rt.number,received:o.parsedType}),Rt}let r;const i=new Lr;for(const o of this._def.checks)o.kind==="int"?tn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Jte(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.not_finite,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,yt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,yt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,yt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,yt.toString(n))}setLimit(t,n,r,i){return new Gl({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(t){return new Gl({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:yt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:yt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:yt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&tn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Gl.create=e=>new Gl({checks:[],typeName:Ct.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ot(e)});class Nl extends xt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==rt.bigint){const o=this._getOrReturnCtx(t);return st(o,{code:Xe.invalid_type,expected:rt.bigint,received:o.parsedType}),Rt}let r;const i=new Lr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),st(r,{code:Xe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,yt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,yt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,yt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,yt.toString(n))}setLimit(t,n,r,i){return new Nl({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(t){return new Nl({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:yt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Nl.create=e=>{var t;return new Nl({checks:[],typeName:Ct.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};class Uh extends xt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rt.boolean){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.boolean,received:r.parsedType}),Rt}return si(t.data)}}Uh.create=e=>new Uh({typeName:Ct.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ot(e)});class Vc extends xt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rt.date){const o=this._getOrReturnCtx(t);return st(o,{code:Xe.invalid_type,expected:rt.date,received:o.parsedType}),Rt}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return st(o,{code:Xe.invalid_date}),Rt}const r=new Lr;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),st(i,{code:Xe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):tn.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Vc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:yt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:yt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Vc.create=e=>new Vc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ct.ZodDate,...Ot(e)});class MI extends xt{_parse(t){if(this._getType(t)!==rt.symbol){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.symbol,received:r.parsedType}),Rt}return si(t.data)}}MI.create=e=>new MI({typeName:Ct.ZodSymbol,...Ot(e)});class Dh extends xt{_parse(t){if(this._getType(t)!==rt.undefined){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.undefined,received:r.parsedType}),Rt}return si(t.data)}}Dh.create=e=>new Dh({typeName:Ct.ZodUndefined,...Ot(e)});class Kh extends xt{_parse(t){if(this._getType(t)!==rt.null){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.null,received:r.parsedType}),Rt}return si(t.data)}}Kh.create=e=>new Kh({typeName:Ct.ZodNull,...Ot(e)});class Ld extends xt{constructor(){super(...arguments),this._any=!0}_parse(t){return si(t.data)}}Ld.create=e=>new Ld({typeName:Ct.ZodAny,...Ot(e)});class _c extends xt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return si(t.data)}}_c.create=e=>new _c({typeName:Ct.ZodUnknown,...Ot(e)});class ha extends xt{_parse(t){const n=this._getOrReturnCtx(t);return st(n,{code:Xe.invalid_type,expected:rt.never,received:n.parsedType}),Rt}}ha.create=e=>new ha({typeName:Ct.ZodNever,...Ot(e)});class $I extends xt{_parse(t){if(this._getType(t)!==rt.undefined){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.void,received:r.parsedType}),Rt}return si(t.data)}}$I.create=e=>new $I({typeName:Ct.ZodVoid,...Ot(e)});class Fo extends xt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==rt.array)return st(n,{code:Xe.invalid_type,expected:rt.array,received:n.parsedType}),Rt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(s||a)&&(st(n,{code:s?Xe.too_big:Xe.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(st(n,{code:Xe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(st(n,{code:Xe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>i.type._parseAsync(new Ws(n,s,n.path,a)))).then(s=>Lr.mergeArray(r,s));const o=[...n.data].map((s,a)=>i.type._parseSync(new Ws(n,s,n.path,a)));return Lr.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new Fo({...this._def,minLength:{value:t,message:yt.toString(n)}})}max(t,n){return new Fo({...this._def,maxLength:{value:t,message:yt.toString(n)}})}length(t,n){return new Fo({...this._def,exactLength:{value:t,message:yt.toString(n)}})}nonempty(t){return this.min(1,t)}}Fo.create=(e,t)=>new Fo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ct.ZodArray,...Ot(t)});function Fu(e){if(e instanceof Nn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=aa.create(Fu(r))}return new Nn({...e._def,shape:()=>t})}else return e instanceof Fo?new Fo({...e._def,type:Fu(e.element)}):e instanceof aa?aa.create(Fu(e.unwrap())):e instanceof Hc?Hc.create(Fu(e.unwrap())):e instanceof ks?ks.create(e.items.map(t=>Fu(t))):e}class Nn extends xt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=tn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rt.object){const c=this._getOrReturnCtx(t);return st(c,{code:Xe.invalid_type,expected:rt.object,received:c.parsedType}),Rt}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof ha&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||a.push(c);const l=[];for(const c of s){const u=o[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ws(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ha){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(st(i,{code:Xe.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ws(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Lr.mergeObjectSync(r,c)):Lr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return yt.errToObj,new Nn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,s,a;const l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=yt.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Nn({...this._def,unknownKeys:"strip"})}passthrough(){return new Nn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Nn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Nn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ct.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Nn({...this._def,catchall:t})}pick(t){const n={};return tn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Nn({...this._def,shape:()=>n})}omit(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Nn({...this._def,shape:()=>n})}deepPartial(){return Fu(this)}partial(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new Nn({...this._def,shape:()=>n})}required(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof aa;)o=o._def.innerType;n[r]=o}}),new Nn({...this._def,shape:()=>n})}keyof(){return hX(tn.objectKeys(this.shape))}}Nn.create=(e,t)=>new Nn({shape:()=>e,unknownKeys:"strip",catchall:ha.create(),typeName:Ct.ZodObject,...Ot(t)});Nn.strictCreate=(e,t)=>new Nn({shape:()=>e,unknownKeys:"strict",catchall:ha.create(),typeName:Ct.ZodObject,...Ot(t)});Nn.lazycreate=(e,t)=>new Nn({shape:e,unknownKeys:"strip",catchall:ha.create(),typeName:Ct.ZodObject,...Ot(t)});class Mh extends xt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Ho(a.ctx.common.issues));return st(n,{code:Xe.invalid_union,unionErrors:s}),Rt}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new Ho(l));return st(n,{code:Xe.invalid_union,unionErrors:a}),Rt}}get options(){return this._def.options}}Mh.create=(e,t)=>new Mh({options:e,typeName:Ct.ZodUnion,...Ot(t)});const rI=e=>e instanceof Jh?rI(e.schema):e instanceof Po?rI(e.innerType()):e instanceof jh?[e.value]:e instanceof Zl?e.options:e instanceof Qh?Object.keys(e.enum):e instanceof qh?rI(e._def.innerType):e instanceof Dh?[void 0]:e instanceof Kh?[null]:null;class sb extends xt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rt.object)return st(n,{code:Xe.invalid_type,expected:rt.object,received:n.parsedType}),Rt;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(st(n,{code:Xe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Rt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const s=rI(o.shape[t]);if(!s)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of s){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,o)}}return new sb({typeName:Ct.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Ot(r)})}}function aw(e,t){const n=$a(e),r=$a(t);if(e===t)return{valid:!0,data:e};if(n===rt.object&&r===rt.object){const i=tn.objectKeys(t),o=tn.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const l=aw(e[a],t[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===rt.array&&r===rt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],l=aw(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===rt.date&&r===rt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class $h extends xt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,s)=>{if(ow(o)||ow(s))return Rt;const a=aw(o.value,s.value);return a.valid?((sw(o)||sw(s))&&n.dirty(),{status:n.value,value:a.data}):(st(r,{code:Xe.invalid_intersection_types}),Rt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}$h.create=(e,t,n)=>new $h({left:e,right:t,typeName:Ct.ZodIntersection,...Ot(n)});class ks extends xt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rt.array)return st(r,{code:Xe.invalid_type,expected:rt.array,received:r.parsedType}),Rt;if(r.data.length<this._def.items.length)return st(r,{code:Xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rt;!this._def.rest&&r.data.length>this._def.items.length&&(st(r,{code:Xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ws(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Lr.mergeArray(n,s)):Lr.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new ks({...this._def,rest:t})}}ks.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ks({items:e,typeName:Ct.ZodTuple,rest:null,...Ot(t)})};class zh extends xt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rt.object)return st(r,{code:Xe.invalid_type,expected:rt.object,received:r.parsedType}),Rt;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new Ws(r,a,r.path,a)),value:s._parse(new Ws(r,r.data[a],r.path,a))});return r.common.async?Lr.mergeObjectAsync(n,i):Lr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof xt?new zh({keyType:t,valueType:n,typeName:Ct.ZodRecord,...Ot(r)}):new zh({keyType:Wo.create(),valueType:t,typeName:Ct.ZodRecord,...Ot(n)})}}class zI extends xt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rt.map)return st(r,{code:Xe.invalid_type,expected:rt.map,received:r.parsedType}),Rt;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Ws(r,a,r.path,[c,"key"])),value:o._parse(new Ws(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Rt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Rt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}zI.create=(e,t,n)=>new zI({valueType:t,keyType:e,typeName:Ct.ZodMap,...Ot(n)});class Oc extends xt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rt.set)return st(r,{code:Xe.invalid_type,expected:rt.set,received:r.parsedType}),Rt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(st(r,{code:Xe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(st(r,{code:Xe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Rt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>o._parse(new Ws(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(t,n){return new Oc({...this._def,minSize:{value:t,message:yt.toString(n)}})}max(t,n){return new Oc({...this._def,maxSize:{value:t,message:yt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Oc.create=(e,t)=>new Oc({valueType:e,minSize:null,maxSize:null,typeName:Ct.ZodSet,...Ot(t)});class hd extends xt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rt.function)return st(n,{code:Xe.invalid_type,expected:rt.function,received:n.parsedType}),Rt;function r(a,l){return DI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,UI(),Ph].filter(c=>!!c),issueData:{code:Xe.invalid_arguments,argumentsError:l}})}function i(a,l){return DI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,UI(),Ph].filter(c=>!!c),issueData:{code:Xe.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Yd){const a=this;return si(async function(...l){const c=new Ho([]),u=await a._def.args.parseAsync(l,o).catch(p=>{throw c.addIssue(r(l,p)),c}),d=await Reflect.apply(s,this,u);return await a._def.returns._def.type.parseAsync(d,o).catch(p=>{throw c.addIssue(i(d,p)),c})})}else{const a=this;return si(function(...l){const c=a._def.args.safeParse(l,o);if(!c.success)throw new Ho([r(l,c.error)]);const u=Reflect.apply(s,this,c.data),d=a._def.returns.safeParse(u,o);if(!d.success)throw new Ho([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new hd({...this._def,args:ks.create(t).rest(_c.create())})}returns(t){return new hd({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new hd({args:t||ks.create([]).rest(_c.create()),returns:n||_c.create(),typeName:Ct.ZodFunction,...Ot(r)})}}class Jh extends xt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Jh.create=(e,t)=>new Jh({getter:e,typeName:Ct.ZodLazy,...Ot(t)});class jh extends xt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return st(n,{received:n.data,code:Xe.invalid_literal,expected:this._def.value}),Rt}return{status:"valid",value:t.data}}get value(){return this._def.value}}jh.create=(e,t)=>new jh({value:e,typeName:Ct.ZodLiteral,...Ot(t)});function hX(e,t){return new Zl({values:e,typeName:Ct.ZodEnum,...Ot(t)})}class Zl extends xt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return st(n,{expected:tn.joinValues(r),received:n.parsedType,code:Xe.invalid_type}),Rt}if(this._def.values.indexOf(t.data)===-1){const n=this._getOrReturnCtx(t),r=this._def.values;return st(n,{received:n.data,code:Xe.invalid_enum_value,options:r}),Rt}return si(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t){return Zl.create(t)}exclude(t){return Zl.create(this.options.filter(n=>!t.includes(n)))}}Zl.create=hX;class Qh extends xt{_parse(t){const n=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rt.string&&r.parsedType!==rt.number){const i=tn.objectValues(n);return st(r,{expected:tn.joinValues(i),received:r.parsedType,code:Xe.invalid_type}),Rt}if(n.indexOf(t.data)===-1){const i=tn.objectValues(n);return st(r,{received:r.data,code:Xe.invalid_enum_value,options:i}),Rt}return si(t.data)}get enum(){return this._def.values}}Qh.create=(e,t)=>new Qh({values:e,typeName:Ct.ZodNativeEnum,...Ot(t)});class Yd extends xt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rt.promise&&n.common.async===!1)return st(n,{code:Xe.invalid_type,expected:rt.promise,received:n.parsedType}),Rt;const r=n.parsedType===rt.promise?n.data:Promise.resolve(n.data);return si(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Yd.create=(e,t)=>new Yd({type:e,typeName:Ct.ZodPromise,...Ot(t)});class Po extends xt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{st(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(s).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:s,path:r.path,parent:r})}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Rt:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Rt:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xh(s))return s;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Xh(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:n.value,value:a})):s);tn.assertNever(i)}}Po.create=(e,t,n)=>new Po({schema:e,typeName:Ct.ZodEffects,effect:t,...Ot(n)});Po.createWithPreprocess=(e,t,n)=>new Po({schema:t,effect:{type:"preprocess",transform:e},typeName:Ct.ZodEffects,...Ot(n)});class aa extends xt{_parse(t){return this._getType(t)===rt.undefined?si(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}aa.create=(e,t)=>new aa({innerType:e,typeName:Ct.ZodOptional,...Ot(t)});class Hc extends xt{_parse(t){return this._getType(t)===rt.null?si(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Hc.create=(e,t)=>new Hc({innerType:e,typeName:Ct.ZodNullable,...Ot(t)});class qh extends xt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qh.create=(e,t)=>new qh({innerType:e,typeName:Ct.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ot(t)});class JI extends xt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return KI(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}JI.create=(e,t)=>new JI({innerType:e,typeName:Ct.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ot(t)});class jI extends xt{_parse(t){if(this._getType(t)!==rt.nan){const r=this._getOrReturnCtx(t);return st(r,{code:Xe.invalid_type,expected:rt.nan,received:r.parsedType}),Rt}return{status:"valid",value:t.data}}}jI.create=e=>new jI({typeName:Ct.ZodNaN,...Ot(e)});const jte=Symbol("zod_brand");class pX extends xt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Up extends xt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Rt:o.status==="dirty"?(n.dirty(),gX(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Rt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Up({in:t,out:n,typeName:Ct.ZodPipeline})}}class QI extends xt{_parse(t){const n=this._def.innerType._parse(t);return Xh(n)&&(n.value=Object.freeze(n.value)),n}}QI.create=(e,t)=>new QI({innerType:e,typeName:Ct.ZodReadonly,...Ot(t)});const mX=(e,t={},n)=>e?Ld.create().superRefine((r,i)=>{var o,s;if(!e(r)){const a=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,l=(s=(o=a.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):Ld.create(),Qte={object:Nn.lazycreate};var Ct;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ct||(Ct={}));const qte=(e,t={message:`Input not instance of ${e.name}`})=>mX(n=>n instanceof e,t),yX=Wo.create,IX=Gl.create,ene=jI.create,tne=Nl.create,vX=Uh.create,nne=Vc.create,rne=MI.create,ine=Dh.create,one=Kh.create,sne=Ld.create,ane=_c.create,lne=ha.create,cne=$I.create,une=Fo.create,dne=Nn.create,fne=Nn.strictCreate,gne=Mh.create,hne=sb.create,pne=$h.create,mne=ks.create,yne=zh.create,Ine=zI.create,vne=Oc.create,Cne=hd.create,bne=Jh.create,Ane=jh.create,Sne=Zl.create,_ne=Qh.create,wne=Yd.create,GT=Po.create,Bne=aa.create,Ene=Hc.create,Rne=Po.createWithPreprocess,Gne=Up.create,Nne=()=>yX().optional(),Zne=()=>IX().optional(),Tne=()=>vX().optional(),Wne={string:e=>Wo.create({...e,coerce:!0}),number:e=>Gl.create({...e,coerce:!0}),boolean:e=>Uh.create({...e,coerce:!0}),bigint:e=>Nl.create({...e,coerce:!0}),date:e=>Vc.create({...e,coerce:!0})},kne=Rt;var Ae=Object.freeze({__proto__:null,defaultErrorMap:Ph,setErrorMap:Fte,getErrorMap:UI,makeIssue:DI,EMPTY_PATH:xte,addIssueToContext:st,ParseStatus:Lr,INVALID:Rt,DIRTY:gX,OK:si,isAborted:ow,isDirty:sw,isValid:Xh,isAsync:KI,get util(){return tn},get objectUtil(){return iw},ZodParsedType:rt,getParsedType:$a,ZodType:xt,ZodString:Wo,ZodNumber:Gl,ZodBigInt:Nl,ZodBoolean:Uh,ZodDate:Vc,ZodSymbol:MI,ZodUndefined:Dh,ZodNull:Kh,ZodAny:Ld,ZodUnknown:_c,ZodNever:ha,ZodVoid:$I,ZodArray:Fo,ZodObject:Nn,ZodUnion:Mh,ZodDiscriminatedUnion:sb,ZodIntersection:$h,ZodTuple:ks,ZodRecord:zh,ZodMap:zI,ZodSet:Oc,ZodFunction:hd,ZodLazy:Jh,ZodLiteral:jh,ZodEnum:Zl,ZodNativeEnum:Qh,ZodPromise:Yd,ZodEffects:Po,ZodTransformer:Po,ZodOptional:aa,ZodNullable:Hc,ZodDefault:qh,ZodCatch:JI,ZodNaN:jI,BRAND:jte,ZodBranded:pX,ZodPipeline:Up,ZodReadonly:QI,custom:mX,Schema:xt,ZodSchema:xt,late:Qte,get ZodFirstPartyTypeKind(){return Ct},coerce:Wne,any:sne,array:une,bigint:tne,boolean:vX,date:nne,discriminatedUnion:hne,effect:GT,enum:Sne,function:Cne,instanceof:qte,intersection:pne,lazy:bne,literal:Ane,map:Ine,nan:ene,nativeEnum:_ne,never:lne,null:one,nullable:Ene,number:IX,object:dne,oboolean:Tne,onumber:Zne,optional:Bne,ostring:Nne,pipeline:Gne,preprocess:Rne,promise:wne,record:yne,set:vne,strictObject:fne,string:yX,symbol:rne,transformer:GT,tuple:mne,undefined:ine,union:gne,unknown:ane,void:cne,NEVER:kne,ZodIssueCode:Xe,quotelessJson:Hte,ZodError:Ho}),Vne=typeof rn=="object"&&rn&&rn.Object===Object&&rn,CX=Vne,One=CX,Hne=typeof self=="object"&&self&&self.Object===Object&&self,Fne=One||Hne||Function("return this")(),Aa=Fne,xne=Aa,Lne=xne.Symbol,ab=Lne,NT=ab,bX=Object.prototype,Yne=bX.hasOwnProperty,Pne=bX.toString,gg=NT?NT.toStringTag:void 0;function Xne(e){var t=Yne.call(e,gg),n=e[gg];try{e[gg]=void 0;var r=!0}catch{}var i=Pne.call(e);return r&&(t?e[gg]=n:delete e[gg]),i}var Une=Xne,Dne=Object.prototype,Kne=Dne.toString;function Mne(e){return Kne.call(e)}var $ne=Mne,ZT=ab,zne=Une,Jne=$ne,jne="[object Null]",Qne="[object Undefined]",TT=ZT?ZT.toStringTag:void 0;function qne(e){return e==null?e===void 0?Qne:jne:TT&&TT in Object(e)?zne(e):Jne(e)}var oG=qne;function ere(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var AX=ere,tre=oG,nre=AX,rre="[object AsyncFunction]",ire="[object Function]",ore="[object GeneratorFunction]",sre="[object Proxy]";function are(e){if(!nre(e))return!1;var t=tre(e);return t==ire||t==ore||t==rre||t==sre}var lre=are,cre=Aa,ure=cre["__core-js_shared__"],dre=ure,HA=dre,WT=function(){var e=/[^.]+$/.exec(HA&&HA.keys&&HA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fre(e){return!!WT&&WT in e}var gre=fre,hre=Function.prototype,pre=hre.toString;function mre(e){if(e!=null){try{return pre.call(e)}catch{}try{return e+""}catch{}}return""}var SX=mre,yre=lre,Ire=gre,vre=AX,Cre=SX,bre=/[\\^$.*+?()[\]{}|]/g,Are=/^\[object .+?Constructor\]$/,Sre=Function.prototype,_re=Object.prototype,wre=Sre.toString,Bre=_re.hasOwnProperty,Ere=RegExp("^"+wre.call(Bre).replace(bre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rre(e){if(!vre(e)||Ire(e))return!1;var t=yre(e)?Ere:Are;return t.test(Cre(e))}var Gre=Rre;function Nre(e,t){return e==null?void 0:e[t]}var Zre=Nre,Tre=Gre,Wre=Zre;function kre(e,t){var n=Wre(e,t);return Tre(n)?n:void 0}var eu=kre,Vre=eu,Ore=Aa,Hre=Vre(Ore,"DataView"),Fre=Hre,xre=eu,Lre=Aa,Yre=xre(Lre,"Map"),sG=Yre,Pre=eu,Xre=Aa,Ure=Pre(Xre,"Promise"),Dre=Ure,Kre=eu,Mre=Aa,$re=Kre(Mre,"Set"),zre=$re,Jre=eu,jre=Aa,Qre=Jre(jre,"WeakMap"),qre=Qre,lw=Fre,cw=sG,uw=Dre,dw=zre,fw=qre,_X=oG,Sf=SX,kT="[object Map]",eie="[object Object]",VT="[object Promise]",OT="[object Set]",HT="[object WeakMap]",FT="[object DataView]",tie=Sf(lw),nie=Sf(cw),rie=Sf(uw),iie=Sf(dw),oie=Sf(fw),Ru=_X;(lw&&Ru(new lw(new ArrayBuffer(1)))!=FT||cw&&Ru(new cw)!=kT||uw&&Ru(uw.resolve())!=VT||dw&&Ru(new dw)!=OT||fw&&Ru(new fw)!=HT)&&(Ru=function(e){var t=_X(e),n=t==eie?e.constructor:void 0,r=n?Sf(n):"";if(r)switch(r){case tie:return FT;case nie:return kT;case rie:return VT;case iie:return OT;case oie:return HT}return t});function sie(e){return e!=null&&typeof e=="object"}var wX=sie,aie=oG,lie=wX,cie="[object Arguments]";function uie(e){return lie(e)&&aie(e)==cie}var die=uie,xT=die,fie=wX,BX=Object.prototype,gie=BX.hasOwnProperty,hie=BX.propertyIsEnumerable;xT(function(){return arguments}());var qI={exports:{}};function pie(){return!1}var mie=pie;qI.exports;(function(e,t){var n=Aa,r=mie,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;e.exports=c})(qI,qI.exports);qI.exports;var ev={exports:{}};ev.exports;(function(e,t){var n=CX,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=a})(ev,ev.exports);var yie=ev.exports,LT=yie;LT&&LT.isTypedArray;function Tl(e){return e!=null}var Iie={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,g){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,d||l,g),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)t.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,p=d.length,m=new Array(p);g<p;g++)m[g]=d[g].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,g,p,m){var v=n?n+c:c;if(!this._events[v])return!1;var y=this._events[v],I=arguments.length,b,A;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),I){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,g),!0;case 5:return y.fn.call(y.context,u,d,g,p),!0;case 6:return y.fn.call(y.context,u,d,g,p,m),!0}for(A=1,b=new Array(I-1);A<I;A++)b[A-1]=arguments[A];y.fn.apply(y.context,b)}else{var N=y.length,L;for(A=0;A<N;A++)switch(y[A].once&&this.removeListener(c,y[A].fn,void 0,!0),I){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,u);break;case 3:y[A].fn.call(y[A].context,u,d);break;case 4:y[A].fn.call(y[A].context,u,d,g);break;default:if(!b)for(L=1,b=new Array(I-1);L<I;L++)b[L-1]=arguments[L];y[A].fn.apply(y[A].context,b)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,g){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!g||m.once)&&(!d||m.context===d)&&s(this,p);else{for(var v=0,y=[],I=m.length;v<I;v++)(m[v].fn!==u||g&&!m[v].once||d&&m[v].context!==d)&&y.push(m[v]);y.length?this._events[p]=y.length===1?y[0]:y:s(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(Iie);var vie=eu;(function(){try{var e=vie(Object,"defineProperty");return e({},"",{}),e}catch{}})();function Cie(){this.__data__=[],this.size=0}var bie=Cie;function Aie(e,t){return e===t||e!==e&&t!==t}var Sie=Aie,_ie=Sie;function wie(e,t){for(var n=e.length;n--;)if(_ie(e[n][0],t))return n;return-1}var lb=wie,Bie=lb,Eie=Array.prototype,Rie=Eie.splice;function Gie(e){var t=this.__data__,n=Bie(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Rie.call(t,n,1),--this.size,!0}var Nie=Gie,Zie=lb;function Tie(e){var t=this.__data__,n=Zie(t,e);return n<0?void 0:t[n][1]}var Wie=Tie,kie=lb;function Vie(e){return kie(this.__data__,e)>-1}var Oie=Vie,Hie=lb;function Fie(e,t){var n=this.__data__,r=Hie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var xie=Fie,Lie=bie,Yie=Nie,Pie=Wie,Xie=Oie,Uie=xie;function _f(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_f.prototype.clear=Lie;_f.prototype.delete=Yie;_f.prototype.get=Pie;_f.prototype.has=Xie;_f.prototype.set=Uie;var cb=_f,Die=cb;function Kie(){this.__data__=new Die,this.size=0}var Mie=Kie;function $ie(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var zie=$ie;function Jie(e){return this.__data__.get(e)}var jie=Jie;function Qie(e){return this.__data__.has(e)}var qie=Qie,eoe=eu,toe=eoe(Object,"create"),ub=toe,YT=ub;function noe(){this.__data__=YT?YT(null):{},this.size=0}var roe=noe;function ioe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ooe=ioe,soe=ub,aoe="__lodash_hash_undefined__",loe=Object.prototype,coe=loe.hasOwnProperty;function uoe(e){var t=this.__data__;if(soe){var n=t[e];return n===aoe?void 0:n}return coe.call(t,e)?t[e]:void 0}var doe=uoe,foe=ub,goe=Object.prototype,hoe=goe.hasOwnProperty;function poe(e){var t=this.__data__;return foe?t[e]!==void 0:hoe.call(t,e)}var moe=poe,yoe=ub,Ioe="__lodash_hash_undefined__";function voe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yoe&&t===void 0?Ioe:t,this}var Coe=voe,boe=roe,Aoe=ooe,Soe=doe,_oe=moe,woe=Coe;function wf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wf.prototype.clear=boe;wf.prototype.delete=Aoe;wf.prototype.get=Soe;wf.prototype.has=_oe;wf.prototype.set=woe;var Boe=wf,PT=Boe,Eoe=cb,Roe=sG;function Goe(){this.size=0,this.__data__={hash:new PT,map:new(Roe||Eoe),string:new PT}}var Noe=Goe;function Zoe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Toe=Zoe,Woe=Toe;function koe(e,t){var n=e.__data__;return Woe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var db=koe,Voe=db;function Ooe(e){var t=Voe(this,e).delete(e);return this.size-=t?1:0,t}var Hoe=Ooe,Foe=db;function xoe(e){return Foe(this,e).get(e)}var Loe=xoe,Yoe=db;function Poe(e){return Yoe(this,e).has(e)}var Xoe=Poe,Uoe=db;function Doe(e,t){var n=Uoe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Koe=Doe,Moe=Noe,$oe=Hoe,zoe=Loe,Joe=Xoe,joe=Koe;function Bf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bf.prototype.clear=Moe;Bf.prototype.delete=$oe;Bf.prototype.get=zoe;Bf.prototype.has=Joe;Bf.prototype.set=joe;var aG=Bf,Qoe=cb,qoe=sG,ese=aG,tse=200;function nse(e,t){var n=this.__data__;if(n instanceof Qoe){var r=n.__data__;if(!qoe||r.length<tse-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ese(r)}return n.set(e,t),this.size=n.size,this}var rse=nse,ise=cb,ose=Mie,sse=zie,ase=jie,lse=qie,cse=rse;function Dp(e){var t=this.__data__=new ise(e);this.size=t.size}Dp.prototype.clear=ose;Dp.prototype.delete=sse;Dp.prototype.get=ase;Dp.prototype.has=lse;Dp.prototype.set=cse;var use="__lodash_hash_undefined__";function dse(e){return this.__data__.set(e,use),this}var fse=dse;function gse(e){return this.__data__.has(e)}var hse=gse,pse=aG,mse=fse,yse=hse;function gw(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new pse;++t<n;)this.add(e[t])}gw.prototype.add=gw.prototype.push=mse;gw.prototype.has=yse;var Ise=Aa;Ise.Uint8Array;var XT=ab,UT=XT?XT.prototype:void 0;UT&&UT.valueOf;var EX=aG,vse="Expected a function";function lG(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(vse);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(lG.Cache||EX),n}lG.Cache=EX;var Cse=lG,bse=Cse,Ase=500;function Sse(e){var t=bse(e,function(r){return n.size===Ase&&n.clear(),r}),n=t.cache;return t}var _se=Sse,wse=_se,Bse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ese=/\\(\\)?/g;wse(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bse,function(n,r,i,o){t.push(i?o.replace(Ese,"$1"):r||n)}),t});var DT=ab,KT=DT?DT.prototype:void 0;KT&&KT.toString;let Rse=class iI extends Error{constructor({statusText:n,status:r,responseJSON:i,ignorable:o}){super(n);T(this,"status",0);T(this,"statusText","");T(this,"responseJSON");T(this,"name","HttpError");T(this,"ignorable",!1);this.status=r,this.statusText=n,this.responseJSON=i,this.ignorable=o??this.ignorable}static connectionAborted(){return new iI({status:0,statusText:"error",ignorable:!0})}static ignorableAPIError(n){return n instanceof iI&&(n.status>400||n.ignorable)}static networkError(n){return n instanceof iI&&(n.status<100||n.status>=600)}};class cG extends Error{constructor(n,r,i=500,o){super(n);T(this,"safeToLog",!0);this.requestId=r,this.status=i,this.payload=o}static fromEvent(n,r,i){return new cG("Sync transport error",r,n,i)}}const MT=-104;class Gse extends Error{constructor(){super("We could not verify the SSL certificate.");T(this,"name","SSLVerificationError");T(this,"status",MT)}static isInstanceOf(n){return n===MT}}for(var FA=0;FA<256;++FA)(FA+256).toString(16).substr(1);class Nse extends Error{constructor(){super(...arguments);T(this,"name","DialogAlreadyOpened");T(this,"ignorable",!0)}}class RX extends Error{constructor(){super(...arguments);T(this,"safeToLog",!0);T(this,"name","SafeToLogError")}}class uG extends Error{constructor(){super(...arguments);T(this,"name","UserCancelDialogueError");T(this,"ignorable",!0)}static swallow(n){if(n instanceof uG)return n;throw n}}function Ef(e){return t=>e.safeParse(t).success}function Zse(e){return e}var tu=Zse;const Tse=Ht(tu);var Wse=typeof rn=="object"&&rn&&rn.Object===Object&&rn,GX=Wse,kse=GX,Vse=typeof self=="object"&&self&&self.Object===Object&&self,Ose=kse||Vse||Function("return this")(),li=Ose,Hse=li,Fse=Hse.Symbol,Rf=Fse,$T=Rf,NX=Object.prototype,xse=NX.hasOwnProperty,Lse=NX.toString,hg=$T?$T.toStringTag:void 0;function Yse(e){var t=xse.call(e,hg),n=e[hg];try{e[hg]=void 0;var r=!0}catch{}var i=Lse.call(e);return r&&(t?e[hg]=n:delete e[hg]),i}var Pse=Yse,Xse=Object.prototype,Use=Xse.toString;function Dse(e){return Use.call(e)}var Kse=Dse,zT=Rf,Mse=Pse,$se=Kse,zse="[object Null]",Jse="[object Undefined]",JT=zT?zT.toStringTag:void 0;function jse(e){return e==null?e===void 0?Jse:zse:JT&&JT in Object(e)?Mse(e):$se(e)}var nu=jse;function Qse(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Do=Qse,qse=nu,eae=Do,tae="[object AsyncFunction]",nae="[object Function]",rae="[object GeneratorFunction]",iae="[object Proxy]";function oae(e){if(!eae(e))return!1;var t=qse(e);return t==nae||t==rae||t==tae||t==iae}var dG=oae,sae=li,aae=sae["__core-js_shared__"],lae=aae,xA=lae,jT=function(){var e=/[^.]+$/.exec(xA&&xA.keys&&xA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cae(e){return!!jT&&jT in e}var uae=cae,dae=Function.prototype,fae=dae.toString;function gae(e){if(e!=null){try{return fae.call(e)}catch{}try{return e+""}catch{}}return""}var ZX=gae,hae=dG,pae=uae,mae=Do,yae=ZX,Iae=/[\\^$.*+?()[\]{}|]/g,vae=/^\[object .+?Constructor\]$/,Cae=Function.prototype,bae=Object.prototype,Aae=Cae.toString,Sae=bae.hasOwnProperty,_ae=RegExp("^"+Aae.call(Sae).replace(Iae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wae(e){if(!mae(e)||pae(e))return!1;var t=hae(e)?_ae:vae;return t.test(yae(e))}var Bae=wae;function Eae(e,t){return e==null?void 0:e[t]}var Rae=Eae,Gae=Bae,Nae=Rae;function Zae(e,t){var n=Nae(e,t);return Gae(n)?n:void 0}var ru=Zae,Tae=ru,Wae=function(){try{var e=Tae(Object,"defineProperty");return e({},"",{}),e}catch{}}(),TX=Wae,QT=TX;function kae(e,t,n){t=="__proto__"&&QT?QT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Kp=kae;function Vae(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(n(o[l],l,o)===!1)break}return t}}var Oae=Vae,Hae=Oae,Fae=Hae(),WX=Fae;function xae(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Lae=xae;function Yae(e){return e!=null&&typeof e=="object"}var Sa=Yae,Pae=nu,Xae=Sa,Uae="[object Arguments]";function Dae(e){return Xae(e)&&Pae(e)==Uae}var Kae=Dae,qT=Kae,Mae=Sa,kX=Object.prototype,$ae=kX.hasOwnProperty,zae=kX.propertyIsEnumerable,Jae=qT(function(){return arguments}())?qT:function(e){return Mae(e)&&$ae.call(e,"callee")&&!zae.call(e,"callee")},Mp=Jae,jae=Array.isArray,Er=jae;const Qae=Ht(Er);var tv={exports:{}};function qae(){return!1}var VX=qae;const ele=Ht(VX);tv.exports;(function(e,t){var n=li,r=VX,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;e.exports=c})(tv,tv.exports);var fb=tv.exports,tle=9007199254740991,nle=/^(?:0|[1-9]\d*)$/;function rle(e,t){var n=typeof e;return t=t??tle,!!t&&(n=="number"||n!="symbol"&&nle.test(e))&&e>-1&&e%1==0&&e<t}var Gf=rle,ile=9007199254740991;function ole(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ile}var fG=ole,sle=nu,ale=fG,lle=Sa,cle="[object Arguments]",ule="[object Array]",dle="[object Boolean]",fle="[object Date]",gle="[object Error]",hle="[object Function]",ple="[object Map]",mle="[object Number]",yle="[object Object]",Ile="[object RegExp]",vle="[object Set]",Cle="[object String]",ble="[object WeakMap]",Ale="[object ArrayBuffer]",Sle="[object DataView]",_le="[object Float32Array]",wle="[object Float64Array]",Ble="[object Int8Array]",Ele="[object Int16Array]",Rle="[object Int32Array]",Gle="[object Uint8Array]",Nle="[object Uint8ClampedArray]",Zle="[object Uint16Array]",Tle="[object Uint32Array]",An={};An[_le]=An[wle]=An[Ble]=An[Ele]=An[Rle]=An[Gle]=An[Nle]=An[Zle]=An[Tle]=!0;An[cle]=An[ule]=An[Ale]=An[dle]=An[Sle]=An[fle]=An[gle]=An[hle]=An[ple]=An[mle]=An[yle]=An[Ile]=An[vle]=An[Cle]=An[ble]=!1;function Wle(e){return lle(e)&&ale(e.length)&&!!An[sle(e)]}var kle=Wle;function Vle(e){return function(t){return e(t)}}var gb=Vle,nv={exports:{}};nv.exports;(function(e,t){var n=GX,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=a})(nv,nv.exports);var gG=nv.exports,Ole=kle,Hle=gb,eW=gG,tW=eW&&eW.isTypedArray,Fle=tW?Hle(tW):Ole,hb=Fle,xle=Lae,Lle=Mp,Yle=Er,Ple=fb,Xle=Gf,Ule=hb,Dle=Object.prototype,Kle=Dle.hasOwnProperty;function Mle(e,t){var n=Yle(e),r=!n&&Lle(e),i=!n&&!r&&Ple(e),o=!n&&!r&&!i&&Ule(e),s=n||r||i||o,a=s?xle(e.length,String):[],l=a.length;for(var c in e)(t||Kle.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Xle(c,l)))&&a.push(c);return a}var OX=Mle,$le=Object.prototype;function zle(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||$le;return e===n}var $p=zle;function Jle(e,t){return function(n){return e(t(n))}}var HX=Jle,jle=HX,Qle=jle(Object.keys,Object),qle=Qle,ece=$p,tce=qle,nce=Object.prototype,rce=nce.hasOwnProperty;function ice(e){if(!ece(e))return tce(e);var t=[];for(var n in Object(e))rce.call(e,n)&&n!="constructor"&&t.push(n);return t}var FX=ice,oce=dG,sce=fG;function ace(e){return e!=null&&sce(e.length)&&!oce(e)}var _a=ace,lce=OX,cce=FX,uce=_a;function dce(e){return uce(e)?lce(e):cce(e)}var zp=dce,fce=WX,gce=zp;function hce(e,t){return e&&fce(e,t,gce)}var xX=hce;function pce(){this.__data__=[],this.size=0}var mce=pce;function yce(e,t){return e===t||e!==e&&t!==t}var Jp=yce,Ice=Jp;function vce(e,t){for(var n=e.length;n--;)if(Ice(e[n][0],t))return n;return-1}var pb=vce,Cce=pb,bce=Array.prototype,Ace=bce.splice;function Sce(e){var t=this.__data__,n=Cce(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ace.call(t,n,1),--this.size,!0}var _ce=Sce,wce=pb;function Bce(e){var t=this.__data__,n=wce(t,e);return n<0?void 0:t[n][1]}var Ece=Bce,Rce=pb;function Gce(e){return Rce(this.__data__,e)>-1}var Nce=Gce,Zce=pb;function Tce(e,t){var n=this.__data__,r=Zce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Wce=Tce,kce=mce,Vce=_ce,Oce=Ece,Hce=Nce,Fce=Wce;function Nf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Nf.prototype.clear=kce;Nf.prototype.delete=Vce;Nf.prototype.get=Oce;Nf.prototype.has=Hce;Nf.prototype.set=Fce;var mb=Nf,xce=mb;function Lce(){this.__data__=new xce,this.size=0}var Yce=Lce;function Pce(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Xce=Pce;function Uce(e){return this.__data__.get(e)}var Dce=Uce;function Kce(e){return this.__data__.has(e)}var Mce=Kce,$ce=ru,zce=li,Jce=$ce(zce,"Map"),hG=Jce,jce=ru,Qce=jce(Object,"create"),yb=Qce,nW=yb;function qce(){this.__data__=nW?nW(null):{},this.size=0}var eue=qce;function tue(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var nue=tue,rue=yb,iue="__lodash_hash_undefined__",oue=Object.prototype,sue=oue.hasOwnProperty;function aue(e){var t=this.__data__;if(rue){var n=t[e];return n===iue?void 0:n}return sue.call(t,e)?t[e]:void 0}var lue=aue,cue=yb,uue=Object.prototype,due=uue.hasOwnProperty;function fue(e){var t=this.__data__;return cue?t[e]!==void 0:due.call(t,e)}var gue=fue,hue=yb,pue="__lodash_hash_undefined__";function mue(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=hue&&t===void 0?pue:t,this}var yue=mue,Iue=eue,vue=nue,Cue=lue,bue=gue,Aue=yue;function Zf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zf.prototype.clear=Iue;Zf.prototype.delete=vue;Zf.prototype.get=Cue;Zf.prototype.has=bue;Zf.prototype.set=Aue;var Sue=Zf,rW=Sue,_ue=mb,wue=hG;function Bue(){this.size=0,this.__data__={hash:new rW,map:new(wue||_ue),string:new rW}}var Eue=Bue;function Rue(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Gue=Rue,Nue=Gue;function Zue(e,t){var n=e.__data__;return Nue(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ib=Zue,Tue=Ib;function Wue(e){var t=Tue(this,e).delete(e);return this.size-=t?1:0,t}var kue=Wue,Vue=Ib;function Oue(e){return Vue(this,e).get(e)}var Hue=Oue,Fue=Ib;function xue(e){return Fue(this,e).has(e)}var Lue=xue,Yue=Ib;function Pue(e,t){var n=Yue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Xue=Pue,Uue=Eue,Due=kue,Kue=Hue,Mue=Lue,$ue=Xue;function Tf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Tf.prototype.clear=Uue;Tf.prototype.delete=Due;Tf.prototype.get=Kue;Tf.prototype.has=Mue;Tf.prototype.set=$ue;var pG=Tf,zue=mb,Jue=hG,jue=pG,Que=200;function que(e,t){var n=this.__data__;if(n instanceof zue){var r=n.__data__;if(!Jue||r.length<Que-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jue(r)}return n.set(e,t),this.size=n.size,this}var ede=que,tde=mb,nde=Yce,rde=Xce,ide=Dce,ode=Mce,sde=ede;function Wf(e){var t=this.__data__=new tde(e);this.size=t.size}Wf.prototype.clear=nde;Wf.prototype.delete=rde;Wf.prototype.get=ide;Wf.prototype.has=ode;Wf.prototype.set=sde;var mG=Wf,ade="__lodash_hash_undefined__";function lde(e){return this.__data__.set(e,ade),this}var cde=lde;function ude(e){return this.__data__.has(e)}var dde=ude,fde=pG,gde=cde,hde=dde;function rv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new fde;++t<n;)this.add(e[t])}rv.prototype.add=rv.prototype.push=gde;rv.prototype.has=hde;var vb=rv;function pde(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var mde=pde;function yde(e,t){return e.has(t)}var Cb=yde,Ide=vb,vde=mde,Cde=Cb,bde=1,Ade=2;function Sde(e,t,n,r,i,o){var s=n&bde,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,g=!0,p=n&Ade?new Ide:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var m=e[d],v=t[d];if(r)var y=s?r(v,m,d,t,e,o):r(m,v,d,e,t,o);if(y!==void 0){if(y)continue;g=!1;break}if(p){if(!vde(t,function(I,b){if(!Cde(p,b)&&(m===I||i(m,I,n,r,o)))return p.push(b)})){g=!1;break}}else if(!(m===v||i(m,v,n,r,o))){g=!1;break}}return o.delete(e),o.delete(t),g}var LX=Sde,_de=li,wde=_de.Uint8Array,YX=wde;function Bde(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Ede=Bde;function Rde(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var yG=Rde,iW=Rf,oW=YX,Gde=Jp,Nde=LX,Zde=Ede,Tde=yG,Wde=1,kde=2,Vde="[object Boolean]",Ode="[object Date]",Hde="[object Error]",Fde="[object Map]",xde="[object Number]",Lde="[object RegExp]",Yde="[object Set]",Pde="[object String]",Xde="[object Symbol]",Ude="[object ArrayBuffer]",Dde="[object DataView]",sW=iW?iW.prototype:void 0,LA=sW?sW.valueOf:void 0;function Kde(e,t,n,r,i,o,s){switch(n){case Dde:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ude:return!(e.byteLength!=t.byteLength||!o(new oW(e),new oW(t)));case Vde:case Ode:case xde:return Gde(+e,+t);case Hde:return e.name==t.name&&e.message==t.message;case Lde:case Pde:return e==t+"";case Fde:var a=Zde;case Yde:var l=r&Wde;if(a||(a=Tde),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=kde,s.set(e,t);var u=Nde(a(e),a(t),r,i,o,s);return s.delete(e),u;case Xde:if(LA)return LA.call(e)==LA.call(t)}return!1}var Mde=Kde;function $de(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var IG=$de,zde=IG,Jde=Er;function jde(e,t,n){var r=t(e);return Jde(e)?r:zde(r,n(e))}var PX=jde;function Qde(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}var qde=Qde;function efe(){return[]}var XX=efe,tfe=qde,nfe=XX,rfe=Object.prototype,ife=rfe.propertyIsEnumerable,aW=Object.getOwnPropertySymbols,ofe=aW?function(e){return e==null?[]:(e=Object(e),tfe(aW(e),function(t){return ife.call(e,t)}))}:nfe,UX=ofe,sfe=PX,afe=UX,lfe=zp;function cfe(e){return sfe(e,lfe,afe)}var ufe=cfe,lW=ufe,dfe=1,ffe=Object.prototype,gfe=ffe.hasOwnProperty;function hfe(e,t,n,r,i,o){var s=n&dfe,a=lW(e),l=a.length,c=lW(t),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var g=a[d];if(!(s?g in t:gfe.call(t,g)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var v=!0;o.set(e,t),o.set(t,e);for(var y=s;++d<l;){g=a[d];var I=e[g],b=t[g];if(r)var A=s?r(b,I,g,t,e,o):r(I,b,g,e,t,o);if(!(A===void 0?I===b||i(I,b,n,r,o):A)){v=!1;break}y||(y=g=="constructor")}if(v&&!y){var N=e.constructor,L=t.constructor;N!=L&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof L=="function"&&L instanceof L)&&(v=!1)}return o.delete(e),o.delete(t),v}var pfe=hfe,mfe=ru,yfe=li,Ife=mfe(yfe,"DataView"),vfe=Ife,Cfe=ru,bfe=li,Afe=Cfe(bfe,"Promise"),Sfe=Afe,_fe=ru,wfe=li,Bfe=_fe(wfe,"Set"),DX=Bfe,Efe=ru,Rfe=li,Gfe=Efe(Rfe,"WeakMap"),KX=Gfe,hw=vfe,pw=hG,mw=Sfe,yw=DX,Iw=KX,MX=nu,kf=ZX,cW="[object Map]",Nfe="[object Object]",uW="[object Promise]",dW="[object Set]",fW="[object WeakMap]",gW="[object DataView]",Zfe=kf(hw),Tfe=kf(pw),Wfe=kf(mw),kfe=kf(yw),Vfe=kf(Iw),uc=MX;(hw&&uc(new hw(new ArrayBuffer(1)))!=gW||pw&&uc(new pw)!=cW||mw&&uc(mw.resolve())!=uW||yw&&uc(new yw)!=dW||Iw&&uc(new Iw)!=fW)&&(uc=function(e){var t=MX(e),n=t==Nfe?e.constructor:void 0,r=n?kf(n):"";if(r)switch(r){case Zfe:return gW;case Tfe:return cW;case Wfe:return uW;case kfe:return dW;case Vfe:return fW}return t});var $X=uc,YA=mG,Ofe=LX,Hfe=Mde,Ffe=pfe,hW=$X,pW=Er,mW=fb,xfe=hb,Lfe=1,yW="[object Arguments]",IW="[object Array]",ry="[object Object]",Yfe=Object.prototype,vW=Yfe.hasOwnProperty;function Pfe(e,t,n,r,i,o){var s=pW(e),a=pW(t),l=s?IW:hW(e),c=a?IW:hW(t);l=l==yW?ry:l,c=c==yW?ry:c;var u=l==ry,d=c==ry,g=l==c;if(g&&mW(e)){if(!mW(t))return!1;s=!0,u=!1}if(g&&!u)return o||(o=new YA),s||xfe(e)?Ofe(e,t,n,r,i,o):Hfe(e,t,l,n,r,i,o);if(!(n&Lfe)){var p=u&&vW.call(e,"__wrapped__"),m=d&&vW.call(t,"__wrapped__");if(p||m){var v=p?e.value():e,y=m?t.value():t;return o||(o=new YA),i(v,y,n,r,o)}}return g?(o||(o=new YA),Ffe(e,t,n,r,i,o)):!1}var Xfe=Pfe,Ufe=Xfe,CW=Sa;function zX(e,t,n,r,i){return e===t?!0:e==null||t==null||!CW(e)&&!CW(t)?e!==e&&t!==t:Ufe(e,t,n,r,zX,i)}var bb=zX,Dfe=mG,Kfe=bb,Mfe=1,$fe=2;function zfe(e,t,n,r){var i=n.length,o=i,s=!r;if(e==null)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var l=a[0],c=e[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in e))return!1}else{var d=new Dfe;if(r)var g=r(c,u,l,e,t,d);if(!(g===void 0?Kfe(u,c,Mfe|$fe,r,d):g))return!1}}return!0}var Jfe=zfe,jfe=Do;function Qfe(e){return e===e&&!jfe(e)}var JX=Qfe,qfe=JX,ege=zp;function tge(e){for(var t=ege(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,qfe(i)]}return t}var nge=tge;function rge(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var jX=rge,ige=Jfe,oge=nge,sge=jX;function age(e){var t=oge(e);return t.length==1&&t[0][2]?sge(t[0][0],t[0][1]):function(n){return n===e||ige(n,e,t)}}var lge=age,cge=nu,uge=Sa,dge="[object Symbol]";function fge(e){return typeof e=="symbol"||uge(e)&&cge(e)==dge}var Vf=fge,gge=Er,hge=Vf,pge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mge=/^\w*$/;function yge(e,t){if(gge(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||hge(e)?!0:mge.test(e)||!pge.test(e)||t!=null&&e in Object(t)}var vG=yge,QX=pG,Ige="Expected a function";function CG(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ige);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(CG.Cache||QX),n}CG.Cache=QX;var qX=CG;const eU=Ht(qX);var vge=qX,Cge=500;function bge(e){var t=vge(e,function(r){return n.size===Cge&&n.clear(),r}),n=t.cache;return t}var Age=bge,Sge=Age,_ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wge=/\\(\\)?/g,Bge=Sge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_ge,function(n,r,i,o){t.push(i?o.replace(wge,"$1"):r||n)}),t}),Ege=Bge;function Rge(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Of=Rge,bW=Rf,Gge=Of,Nge=Er,Zge=Vf,Tge=1/0,AW=bW?bW.prototype:void 0,SW=AW?AW.toString:void 0;function tU(e){if(typeof e=="string")return e;if(Nge(e))return Gge(e,tU)+"";if(Zge(e))return SW?SW.call(e):"";var t=e+"";return t=="0"&&1/e==-Tge?"-0":t}var Wge=tU,kge=Wge;function Vge(e){return e==null?"":kge(e)}var nU=Vge,Oge=Er,Hge=vG,Fge=Ege,xge=nU;function Lge(e,t){return Oge(e)?e:Hge(e,t)?[e]:Fge(xge(e))}var jp=Lge,Yge=Vf,Pge=1/0;function Xge(e){if(typeof e=="string"||Yge(e))return e;var t=e+"";return t=="0"&&1/e==-Pge?"-0":t}var Hf=Xge,Uge=jp,Dge=Hf;function Kge(e,t){t=Uge(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Dge(t[n++])];return n&&n==r?e:void 0}var Qp=Kge,Mge=Qp;function $ge(e,t,n){var r=e==null?void 0:Mge(e,t);return r===void 0?n:r}var zge=$ge;function Jge(e,t){return e!=null&&t in Object(e)}var jge=Jge,Qge=jp,qge=Mp,ehe=Er,the=Gf,nhe=fG,rhe=Hf;function ihe(e,t,n){t=Qge(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var s=rhe(t[r]);if(!(o=e!=null&&n(e,s)))break;e=e[s]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&nhe(i)&&the(s,i)&&(ehe(e)||qge(e)))}var rU=ihe,ohe=jge,she=rU;function ahe(e,t){return e!=null&&she(e,t,ohe)}var lhe=ahe,che=bb,uhe=zge,dhe=lhe,fhe=vG,ghe=JX,hhe=jX,phe=Hf,mhe=1,yhe=2;function Ihe(e,t){return fhe(e)&&ghe(t)?hhe(phe(e),t):function(n){var r=uhe(n,e);return r===void 0&&r===t?dhe(n,e):che(t,r,mhe|yhe)}}var vhe=Ihe;function Che(e){return function(t){return t==null?void 0:t[e]}}var bhe=Che,Ahe=Qp;function She(e){return function(t){return Ahe(t,e)}}var _he=She,whe=bhe,Bhe=_he,Ehe=vG,Rhe=Hf;function Ghe(e){return Ehe(e)?whe(Rhe(e)):Bhe(e)}var Nhe=Ghe,Zhe=lge,The=vhe,Whe=tu,khe=Er,Vhe=Nhe;function Ohe(e){return typeof e=="function"?e:e==null?Whe:typeof e=="object"?khe(e)?The(e[0],e[1]):Zhe(e):Vhe(e)}var wa=Ohe,Hhe=Kp,Fhe=xX,xhe=wa;function Lhe(e,t){var n={};return t=xhe(t),Fhe(e,function(r,i,o){Hhe(n,i,t(r,i,o))}),n}var Yhe=Lhe;const Ab=Ht(Yhe);var Phe=gr.inspect,bG=typeof Map=="function"&&Map.prototype,PA=Object.getOwnPropertyDescriptor&&bG?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,iv=bG&&PA&&typeof PA.get=="function"?PA.get:null,_W=bG&&Map.prototype.forEach,AG=typeof Set=="function"&&Set.prototype,XA=Object.getOwnPropertyDescriptor&&AG?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ov=AG&&XA&&typeof XA.get=="function"?XA.get:null,wW=AG&&Set.prototype.forEach,Xhe=typeof WeakMap=="function"&&WeakMap.prototype,sh=Xhe?WeakMap.prototype.has:null,Uhe=typeof WeakSet=="function"&&WeakSet.prototype,ah=Uhe?WeakSet.prototype.has:null,Dhe=typeof WeakRef=="function"&&WeakRef.prototype,BW=Dhe?WeakRef.prototype.deref:null,Khe=Boolean.prototype.valueOf,Mhe=Object.prototype.toString,$he=Function.prototype.toString,zhe=String.prototype.match,SG=String.prototype.slice,Qa=String.prototype.replace,Jhe=String.prototype.toUpperCase,EW=String.prototype.toLowerCase,iU=RegExp.prototype.test,RW=Array.prototype.concat,bs=Array.prototype.join,jhe=Array.prototype.slice,GW=Math.floor,vw=typeof BigInt=="function"?BigInt.prototype.valueOf:null,UA=Object.getOwnPropertySymbols,Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Yr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Pd||"symbol")?Symbol.toStringTag:null,oU=Object.prototype.propertyIsEnumerable,NW=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function ZW(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||iU.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-GW(-e):GW(e);if(r!==e){var i=String(r),o=SG.call(t,i.length+1);return Qa.call(i,n,"$&_")+"."+Qa.call(Qa.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Qa.call(t,n,"$&_")}var bw=Phe,TW=bw.custom,WW=aU(TW)?TW:null,Qhe=function e(t,n,r,i){var o=n||{};if(Xa(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Xa(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Xa(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xa(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xa(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return cU(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?ZW(t,l):l}if(typeof t=="bigint"){var c=String(t)+"n";return a?ZW(t,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof t=="object")return Aw(t)?"[Array]":"[Object]";var d=mpe(o,r);if(typeof i>"u")i=[];else if(lU(i,t)>=0)return"[Circular]";function g(ze,Ee,P){if(Ee&&(i=jhe.call(i),i.push(Ee)),P){var oe={depth:o.depth};return Xa(o,"quoteStyle")&&(oe.quoteStyle=o.quoteStyle),e(ze,oe,r+1,i)}return e(ze,o,r+1,i)}if(typeof t=="function"&&!kW(t)){var p=ape(t),m=iy(t,g);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+bs.call(m,", ")+" }":"")}if(aU(t)){var v=Pd?Qa.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Cw.call(t);return typeof t=="object"&&!Pd?pg(v):v}if(gpe(t)){for(var y="<"+EW.call(String(t.nodeName)),I=t.attributes||[],b=0;b<I.length;b++)y+=" "+I[b].name+"="+sU(qhe(I[b].value),"double",o);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+EW.call(String(t.nodeName))+">",y}if(Aw(t)){if(t.length===0)return"[]";var A=iy(t,g);return d&&!ppe(A)?"["+Sw(A,d)+"]":"[ "+bs.call(A,", ")+" ]"}if(tpe(t)){var N=iy(t,g);return!("cause"in Error.prototype)&&"cause"in t&&!oU.call(t,"cause")?"{ ["+String(t)+"] "+bs.call(RW.call("[cause]: "+g(t.cause),N),", ")+" }":N.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+bs.call(N,", ")+" }"}if(typeof t=="object"&&s){if(WW&&typeof t[WW]=="function"&&bw)return bw(t,{depth:u-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(lpe(t)){var L=[];return _W&&_W.call(t,function(ze,Ee){L.push(g(Ee,t,!0)+" => "+g(ze,t))}),VW("Map",iv.call(t),L,d)}if(dpe(t)){var G=[];return wW&&wW.call(t,function(ze){G.push(g(ze,t))}),VW("Set",ov.call(t),G,d)}if(cpe(t))return DA("WeakMap");if(fpe(t))return DA("WeakSet");if(upe(t))return DA("WeakRef");if(rpe(t))return pg(g(Number(t)));if(ope(t))return pg(g(vw.call(t)));if(ipe(t))return pg(Khe.call(t));if(npe(t))return pg(g(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===rn)return"{ [object globalThis] }";if(!epe(t)&&!kW(t)){var W=iy(t,g),j=NW?NW(t)===Object.prototype:t instanceof Object||t.constructor===Object,O=t instanceof Object?"":"null prototype",Ce=!j&&Yr&&Object(t)===t&&Yr in t?SG.call(Ul(t),8,-1):O?"Object":"",Ue=j||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",$e=Ue+(Ce||O?"["+bs.call(RW.call([],Ce||[],O||[]),": ")+"] ":"");return W.length===0?$e+"{}":d?$e+"{"+Sw(W,d)+"}":$e+"{ "+bs.call(W,", ")+" }"}return String(t)};function sU(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function qhe(e){return Qa.call(String(e),/"/g,"&quot;")}function Aw(e){return Ul(e)==="[object Array]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function epe(e){return Ul(e)==="[object Date]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function kW(e){return Ul(e)==="[object RegExp]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function tpe(e){return Ul(e)==="[object Error]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function npe(e){return Ul(e)==="[object String]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function rpe(e){return Ul(e)==="[object Number]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function ipe(e){return Ul(e)==="[object Boolean]"&&(!Yr||!(typeof e=="object"&&Yr in e))}function aU(e){if(Pd)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Cw)return!1;try{return Cw.call(e),!0}catch{}return!1}function ope(e){if(!e||typeof e!="object"||!vw)return!1;try{return vw.call(e),!0}catch{}return!1}var spe=Object.prototype.hasOwnProperty||function(e){return e in this};function Xa(e,t){return spe.call(e,t)}function Ul(e){return Mhe.call(e)}function ape(e){if(e.name)return e.name;var t=zhe.call($he.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function lU(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function lpe(e){if(!iv||!e||typeof e!="object")return!1;try{iv.call(e);try{ov.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function cpe(e){if(!sh||!e||typeof e!="object")return!1;try{sh.call(e,sh);try{ah.call(e,ah)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function upe(e){if(!BW||!e||typeof e!="object")return!1;try{return BW.call(e),!0}catch{}return!1}function dpe(e){if(!ov||!e||typeof e!="object")return!1;try{ov.call(e);try{iv.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function fpe(e){if(!ah||!e||typeof e!="object")return!1;try{ah.call(e,ah);try{sh.call(e,sh)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function gpe(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function cU(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return cU(SG.call(e,0,t.maxStringLength),t)+r}var i=Qa.call(Qa.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,hpe);return sU(i,"single",t)}function hpe(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Jhe.call(t.toString(16))}function pg(e){return"Object("+e+")"}function DA(e){return e+" { ? }"}function VW(e,t,n,r){var i=r?Sw(n,r):bs.call(n,", ");return e+" ("+t+") {"+i+"}"}function ppe(e){for(var t=0;t<e.length;t++)if(lU(e[t],`
`)>=0)return!1;return!0}function mpe(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=bs.call(Array(e.indent+1)," ");else return null;return{base:n,prev:bs.call(Array(t+1),n)}}function Sw(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+bs.call(e,","+n)+`
`+t.prev}function iy(e,t){var n=Aw(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=Xa(e,i)?t(e[i],e):""}var o=typeof UA=="function"?UA(e):[],s;if(Pd){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in e)Xa(e,l)&&(n&&String(Number(l))===l&&l<e.length||Pd&&s["$"+l]instanceof Symbol||(iU.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if(typeof UA=="function")for(var c=0;c<o.length;c++)oU.call(e,o[c])&&r.push("["+t(o[c])+"]: "+t(e[o[c]],e));return r}const ype=Ht(Qhe);class Ipe extends Error{constructor(t,n){const r=`${t}, error: ${vpe(n)}`;super(r),n instanceof Error?(this.name=n.name,this.stack=n.stack):this.name=uU(n)}}function uU(e){const t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&e!=null&&typeof e=="object"?`Object, ${e.constructor.name}`:t}function vpe(e){return e==null||typeof e!="object"?"":ype(Ab(e,Cpe(e)))}const Cpe=e=>{if(e instanceof RX||e instanceof TypeError)return Tse;const t=uU(e)==="Object, Object";return(n,r)=>typeof n=="string"&&!(r==="title"||r==="code"||r==="syscall"||r==="name"||t&&r==="message")?"[String]":typeof n=="object"?"[Object]":n};function dU(e){var r,i;const t="ignorable"in e&&!!e.ignorable,n=e.stack!=null?((r=e.stack)==null?void 0:r.startsWith(new uG().name))||((i=e.stack)==null?void 0:i.startsWith(new Nse().name)):!1;return t||n}const bpe=(e,t)=>({isIgnorableError:dU,exception:(n,r,i)=>{_pe(r)&&wpe(r)&&typeof r.message=="string"&&r.message!==""&&(n=`${n}:
${r.message}`);const s=new Ipe(n,r);e.captureException(s,i),e.addBreadcrumb({level:"error",category:t,message:`${s.name}: ${s.message}`})},info:(n,r)=>{e.addBreadcrumb({level:"info",category:t,message:n,data:r})},setUser:n=>{e.configureScope(r=>r.setUser(n))}});function Ape(){const e="app:///";return uX({iteratee:t=>(t.filename&&(t.filename=Spe(e,t.filename)),t)})}function Spe(e,t){const r=/^[a-zA-Z]:\\/.test(t)||t.includes("\\")&&!t.includes("/")?t.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t,i=kL(r);return`${e}${i}`}function _pe(e){const t=e instanceof eo.AbortError||e instanceof eo.BulkError||e instanceof eo.ConstraintError||e instanceof eo.DatabaseClosedError||e instanceof eo.DataError||e instanceof eo.InvalidStateError||e instanceof eo.ModifyError||e instanceof eo.OpenFailedError||e instanceof eo.QuotaExceededError||e instanceof eo.VersionError;return e instanceof RX||e instanceof TypeError||e instanceof RangeError||e instanceof cG||Epe(e)||t}function wpe(e){return typeof e=="object"&&e!=null&&"message"in e}const Bpe=Ae.object({safeToLog:Ae.literal(!0)}),Epe=Ef(Bpe);lX({dsn:"https://55af16af94074b88844cd7e16f535fa5@o76327.ingest.sentry.io/193727",environment:"production",release:"Termius@9.31.5",maxBreadcrumbs:100,defaultIntegrations:[Ape(),new q2.GlobalHandlers({onerror:!1,onunhandledrejection:!1}),new q2.Breadcrumbs({console:!1,dom:!1,fetch:!0,history:!1,sentry:!1,xhr:!1})],beforeSend:(e,t)=>e,beforeBreadcrumb:e=>Gpe(e)?Npe(e)?(Tpe(e),e):null:e});const fU=Wpe(process.type);wr({level:"info",category:fU,message:"Sentry has initialized"});const Rpe=bpe(Ete,fU),En={...Rpe,withEncryptionLogin(e,t,n){let r={hasValue:!1};return Lp(i=>{i.setExtra("collection",t),i.setExtra("encryption_login",e),r={hasValue:!0,value:n()}}),r.hasValue||(r={hasValue:!0,value:n()}),r.value},getUserId(){return new Promise(e=>ML(t=>{var n,r;e(((r=(n=t.getUser())==null?void 0:n.id)==null?void 0:r.toString())??"")}))}};function Gpe(e){return e.type==="http"&&e.category==="fetch"}function Npe(e){var t;return((t=e.data)==null?void 0:t.url.startsWith(process.env.BACKEND_URL))??!1}function Zpe(e){return`${e.origin}${e.pathname}`}function Tpe(e){const{data:t}=e;t!=null&&(t.url=Zpe(new URL(t.url)))}function Wpe(e){switch(e){case"browser":return"main";case"renderer":return window.location.pathname.includes("background-process")?"background":"ui";case"worker":return"worker";default:return"unknown"}}const kpe="LOG_CREATE_FAILED",Vpe="WRITING",OW="UNKNOWN";function Ope(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var gU=Ope;function Hpe(e){return e!==e}var Fpe=Hpe;function xpe(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Lpe=xpe,Ype=gU,Ppe=Fpe,Xpe=Lpe;function Upe(e,t,n){return t===t?Xpe(e,t,n):Ype(e,Ppe,n)}var Dpe=Upe,Kpe=Dpe;function Mpe(e,t){var n=e==null?0:e.length;return!!n&&Kpe(e,t,0)>-1}var Sb=Mpe;function $pe(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var _G=$pe;function zpe(){}var hU=zpe,KA=DX,Jpe=hU,jpe=yG,Qpe=1/0,qpe=KA&&1/jpe(new KA([,-0]))[1]==Qpe?function(e){return new KA(e)}:Jpe,eme=qpe,tme=vb,nme=Sb,rme=_G,ime=Cb,ome=eme,sme=yG,ame=200;function lme(e,t,n){var r=-1,i=nme,o=e.length,s=!0,a=[],l=a;if(n)s=!1,i=rme;else if(o>=ame){var c=t?null:ome(e);if(c)return sme(c);s=!1,i=ime,l=new tme}else l=t?[]:a;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||u!==0?u:0,s&&d===d){for(var g=l.length;g--;)if(l[g]===d)continue e;t&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var wG=lme,cme=wG;function ume(e){return e&&e.length?cme(e):[]}var dme=ume;const pU=Ht(dme),fme="AUTO",mU=["local_id","id","updated_at","is_shared","encrypted_with","local_updated_at"];class Gi{constructor(t={}){T(this,"local_id");T(this,"id");T(this,"updated_at");T(this,"is_shared");T(this,"encrypted_with");T(this,"local_updated_at");T(this,"changedFields");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at,this.is_shared=t.is_shared??!1,this.encrypted_with=t.encrypted_with??null,this.local_updated_at=t.local_updated_at??null,this.changedFields=t.changedFields??[]}get entityLocalPath(){return`${this.entityName}/${this.local_id}`}get hasVaultChanges(){return!this.changedFields.includes("local_id")&&(this.changedFields.includes("is_shared")||this.changedFields.includes("encrypted_with"))}static is(t){return t!=null&&typeof t=="object"&&mU.every(n=>t.hasOwnProperty(n))}changed(t){if(t==null)return this.changedFields;const n=Object.keys(t).filter(gme);return pU([...n,...this.changedFields])}shouldRemoveOldEntity(t){return!t||t.local_id!==this.local_id}}function gme(e){return mU.includes(e)}function sv(e,t){return e!=null?t!=null&&e.isPotentialDuplicate(t):t==null}function hme(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var BG=hme;const yU=Ht(BG);class EG{constructor(t){T(this,"local_id");T(this,"id");T(this,"updated_at");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at}}class pme extends EG{constructor(n){super(n);T(this,"accessKeyId");T(this,"secretAccessKey");T(this,"region");T(this,"ipAddressType");T(this,"serviceType");T(this,"cloudType","aws");this.accessKeyId=n.accessKeyId||"",this.secretAccessKey=n.secretAccessKey||"",this.region=n.region||"",this.ipAddressType=n.ipAddressType||"public",this.serviceType=n.serviceType||"ec2"}isEmpty(){return[this.accessKeyId,this.secretAccessKey,this.region].every(n=>n==null)}isFulfilled(){return[this.accessKeyId,this.secretAccessKey,this.region].every(n=>!!n)}}class mme extends EG{constructor(n){super(n);T(this,"cloudType","azure");T(this,"tenant_id");T(this,"client_id");T(this,"client_secret");this.tenant_id=n.tenant_id||"",this.client_id=n.client_id||"",this.client_secret=n.client_secret||""}isEmpty(){return[this.tenant_id,this.client_id,this.client_secret].every(n=>n==null)}isFulfilled(){return[this.tenant_id,this.client_id,this.client_secret].every(n=>!!n)}}class yme extends EG{constructor(n){super(n);T(this,"cloudType","DigitalOcean");T(this,"token");this.token=n.token||""}isEmpty(){return!this.token}isFulfilled(){return!!this.token}}var Ime={exports:{}};(function(e,t){(function(n,r){typeof kte=="function"?e.exports=r():n.pluralize=r()})(rn,function(){var n=[],r=[],i={},o={},s={};function a(v){return typeof v=="string"?new RegExp("^"+v+"$","i"):v}function l(v,y){return v===y?y:v===v.toLowerCase()?y.toLowerCase():v===v.toUpperCase()?y.toUpperCase():v[0]===v[0].toUpperCase()?y.charAt(0).toUpperCase()+y.substr(1).toLowerCase():y.toLowerCase()}function c(v,y){return v.replace(/\$(\d{1,2})/g,function(I,b){return y[b]||""})}function u(v,y){return v.replace(y[0],function(I,b){var A=c(y[1],arguments);return l(I===""?v[b-1]:I,A)})}function d(v,y,I){if(!v.length||i.hasOwnProperty(v))return y;for(var b=I.length;b--;){var A=I[b];if(A[0].test(y))return u(y,A)}return y}function g(v,y,I){return function(b){var A=b.toLowerCase();return y.hasOwnProperty(A)?l(b,A):v.hasOwnProperty(A)?l(b,v[A]):d(A,b,I)}}function p(v,y,I,b){return function(A){var N=A.toLowerCase();return y.hasOwnProperty(N)?!0:v.hasOwnProperty(N)?!1:d(N,N,I)===N}}function m(v,y,I){var b=y===1?m.singular(v):m.plural(v);return(I?y+" ":"")+b}return m.plural=g(s,o,n),m.isPlural=p(s,o,n),m.singular=g(o,s,r),m.isSingular=p(o,s,r),m.addPluralRule=function(v,y){n.push([a(v),y])},m.addSingularRule=function(v,y){r.push([a(v),y])},m.addUncountableRule=function(v){if(typeof v=="string"){i[v.toLowerCase()]=!0;return}m.addPluralRule(v,"$0"),m.addSingularRule(v,"$0")},m.addIrregularRule=function(v,y){y=y.toLowerCase(),v=v.toLowerCase(),s[v]=y,o[y]=v},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(v){return m.addIrregularRule(v[0],v[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(v){return m.addPluralRule(v[0],v[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(v){return m.addSingularRule(v[0],v[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(m.addUncountableRule),m})})(Ime);const vme=19;function IU(e){return new Intl.DateTimeFormat("en-US",e)}function vU(e){return e.length===vme?new Date(`${e}Z`):new Date(e)}const Cme="Secure Enclave",bme="Windows Hello";class iu{constructor(t={}){T(this,"local_id");T(this,"id");T(this,"updated_at");T(this,"label");T(this,"public_key");T(this,"storage");T(this,"credentialId");T(this,"is_shared");T(this,"local_updated_at");T(this,"entityName","hardwareKey");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at,this.label=t.label||"",this.public_key=t.public_key||"",this.storage=t.storage||"",this.credentialId=t.credentialId,this.is_shared=!1,this.local_updated_at=t.local_updated_at||null}get type(){return"Type ECDSA"}isSep(){return this.storage===Cme}isWindowsHello(){return this.storage===bme}clone(t={}){return new iu({...this,...t})}get entityLocalPath(){return`${this.entityName}/${this.local_id}`}get keyVariant(){return"key"}}var Ame=FX,Sme=$X,_me=Mp,wme=Er,Bme=_a,Eme=fb,Rme=$p,Gme=hb,Nme="[object Map]",Zme="[object Set]",Tme=Object.prototype,Wme=Tme.hasOwnProperty;function kme(e){if(e==null)return!0;if(Bme(e)&&(wme(e)||typeof e=="string"||typeof e.splice=="function"||Eme(e)||Gme(e)||_me(e)))return!e.length;var t=Sme(e);if(t==Nme||t==Zme)return!e.size;if(Rme(e))return!Ame(e).length;for(var n in e)if(Wme.call(e,n))return!1;return!0}var Vme=kme;const RG=Ht(Vme);function GG(e){if(!e)return!1;const t=ud.getKeyTypeFromPrivateKey(e);return t==="sk-ec"||t==="sk-ed"}function HW(e){if(!e)return"Type unknown";const t=ud.getKeyTypeFromPrivateKey(e);return t!=="unknown"?`Type ${CU(t)}`:"Type unknown"}const Ome=/sk-(e[cd])/;function CU(e){return e.replace(Ome,"$1-sk").replace("ec","ECDSA").replace("ed","ED25519").toUpperCase()}class NG extends Gi{constructor(n={}){super(n);T(this,"ssh_key_id");T(this,"certificate");T(this,"label");T(this,"entityName","sshCertificate");T(this,"nameInAnalytic","Certificate");this.ssh_key_id=n.ssh_key_id,this.updated_at=n.updated_at,this.label=n.label,this.certificate=n.certificate||""}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.ssh_key_id=void 0}clone(n){return new NG({...this,...n,changedFields:this.changed(n)})}}class Ls extends Gi{constructor(n={}){super(n);T(this,"label");T(this,"passphrase");T(this,"private_key");T(this,"public_key");T(this,"certificates");T(this,"entityName","sshKey");T(this,"nameInAnalytic","PrivateKey");this.label=n.label||"",this.passphrase=n.passphrase||"",this.private_key=n.private_key||"",this.public_key=n.public_key||"",this.certificates=(n.certificates??[]).map(r=>new NG(r))}get displayLabel(){return this.label}get type(){return this.certificates.length>0?`${HW(this.certificates[0].certificate)} SSH Certificate`:HW(this.private_key)}clone(n){return new Ls({...this,...n,changedFields:this.changed(n)})}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.certificates.forEach(n=>n.prepareForDuplicate())}trimPrivateAndPublic(){this.private_key=this.private_key.trim(),this.public_key=this.public_key.trim()}static is(n){return n.entityName==="sshKey"}get keyVariant(){return RG(this.certificates)?GG(this.private_key)?"fido":"key":"certificate"}}class uo extends Gi{constructor(n){super(n);T(this,"is_visible");T(this,"label");T(this,"password");T(this,"ssh_key");T(this,"hardware_key");T(this,"username");T(this,"entityName","identity");T(this,"nameInAnalytic","Identity");this.is_visible=n.is_visible,this.label=n.label||"",this.password=n.password||null,this.ssh_key=n.ssh_key?new Ls(n.ssh_key):null,this.hardware_key=n.hardware_key?new iu(n.hardware_key):null,this.username=n.username||null}isPotentialDuplicate(n){return this.username===n.username}prepareForDuplicate(){return this.local_id=void 0,this.id=void 0,this}replaceKey(n){var r;return((r=this.ssh_key)==null?void 0:r.local_id)===n.original.local_id?(this.ssh_key=n.copy,!0):!1}isEmpty(){return this.is_visible===!1&&this.password==null&&this.ssh_key==null&&this.hardware_key==null&&this.username==null}get authMethod(){const n=this.ssh_key||this.hardware_key;return this.password&&n?"Auth password and key":this.password?"Auth password":n?"Auth key":"No auth method"}get displayLabel(){return this.label||this.username||""}get lastModifiedAt(){if(this.local_updated_at)return this.local_updated_at;if(this.updated_at)return vU(this.updated_at)}clone(n={}){return new uo({...this,...n,changedFields:this.changed(n)})}static is(n){return n.entityName==="identity"}shouldRemoveOldEntity(n){return!this.is_visible&&(!n||n.is_visible||n.local_id!==this.local_id)}}class ZG{}function TG(e){if(e.hasMergedSshConfig&&e.hasMergedTelnetConfig)return;if(e.hasMergedSshConfig)return e.getMergedSshConfig().use_mosh?"mosh":"ssh";if(e.hasMergedTelnetConfig)return"telnet";const{parentGroups:t}=e;if(t.length)return TG(t[0])}const FW=e=>{const{current:t,parent:n,value:r}=e;return r||t&&t.is_visible?!1:t&&t.isEmpty()?!0:!(t&&!t.isEmpty()&&n&&n.is_visible)};class bU extends ZG{constructor(n){super();T(this,"associatedEntity");T(this,"credentialsMode");T(this,"current");T(this,"parent");T(this,"isEmpty",uo.prototype.isEmpty.bind(this));this.associatedEntity=n.associatedEntity,this.credentialsMode=n.credentialsMode,this.current=n.current,this.parent=n.parent}getMergedValue(n,r){var c,u,d;const{skipNotVisible:i}=r||{},o=((c=this.current)==null?void 0:c.is_visible)??!1,s=this.current&&n(this.current);if(FW({current:this.current,parent:(u=this.parent)==null?void 0:u.current,value:s})){const g=(d=this.parent)==null?void 0:d.getMergedValue(n,r);return g&&g.source!=="global"?{value:g.value,source:"parent",associatedEntity:g.associatedEntity}:{value:null,source:"global",associatedEntity:null}}return s&&(!i||o)?{value:s,source:"me",associatedEntity:this.associatedEntity}:{value:null,source:"me",associatedEntity:null}}getAuthMethod(){var r,i;if(this.current){if(this.current.hardware_key)return{source:"me",value:{type:"hardwareKey",hardware_key:this.current.hardware_key},associatedEntity:this.associatedEntity};if(this.current.ssh_key)return{source:"me",value:{type:"sshKey",ssh_key:this.current.ssh_key},associatedEntity:this.associatedEntity}}if(FW({current:this.current,parent:(r=this.parent)==null?void 0:r.current,value:void 0})){const o=(i=this.parent)==null?void 0:i.getAuthMethod();if(o&&o.value&&o.value.type!=="none")return{...o,source:"parent"}}return{source:"me",value:{type:"none"},associatedEntity:this.associatedEntity}}get id(){return this.getMergedValue(n=>n.id,{skipNotVisible:!0}).value}get local_id(){return this.getMergedValue(n=>n.local_id,{skipNotVisible:!0}).value}get updated_at(){return this.getMergedValue(n=>n.updated_at,{skipNotVisible:!0}).value}get is_visible(){return this.getMergedValue(n=>n.is_visible,{skipNotVisible:!0}).value??!1}get label(){return this.getMergedValue(n=>n.label).value??""}get username(){return this.getMergedValue(n=>n.username).value??""}get password(){return this.getMergedValue(n=>n.password).value??""}get ssh_key(){const n=this.getAuthMethod().value;return n&&"ssh_key"in n?n.ssh_key:null}get hardware_key(){const n=this.getAuthMethod().value;return n&&"hardware_key"in n?n.hardware_key:null}get merged_hardware_key(){return this.getMergedValue(n=>n.hardware_key).source==="parent"}get merged_ssh_key(){return this.getMergedValue(n=>n.ssh_key).source==="parent"}get merged_username(){return this.getMergedValue(n=>n.username).source==="parent"}get merged_password(){return this.getMergedValue(n=>n.password).source==="parent"}get usernameSource(){return this.getMergedValue(n=>n.username).source}asIdentity(){var o;const{value:n}=this.getAuthMethod(),{type:r,...i}=n||{};return new uo({local_id:this.local_id,id:this.id,label:this.label,is_visible:this.is_visible,is_shared:((o=this.current)==null?void 0:o.is_shared)??!1,updated_at:this.updated_at,local_updated_at:this.getMergedValue(s=>s.local_updated_at).value,hardware_key:null,ssh_key:null,username:this.username,password:this.password,...i})}}class AU extends ZG{constructor(n){super();T(this,"associatedEntity");T(this,"credentialsMode");T(this,"current");T(this,"parent");this.associatedEntity=n.associatedEntity,this.credentialsMode=n.credentialsMode,this.current=n.current,this.parent=n.parent}get identity(){var n,r;return new bU({associatedEntity:this.associatedEntity,credentialsMode:this.credentialsMode,current:(n=this.current)==null?void 0:n.identity,parent:(r=this.parent)==null?void 0:r.identity})}getMergedValue(n){var i;if(this.current){const o=n(this.current);if(o!=null&&o!=="")return{value:o,source:"me",associatedEntity:this.associatedEntity}}const r=(i=this.parent)==null?void 0:i.getMergedValue(n);return r?{value:r.value,source:r.source!=="global"?"parent":"global",associatedEntity:r.associatedEntity}:{value:null,source:"global",associatedEntity:null}}get agent_forwarding(){return this.getMergedValue(n=>n.agent_forwarding).value??!1}get agentForwardingSource(){return this.getMergedValue(n=>n.agent_forwarding).source}get charset(){return this.getMergedValue(n=>n.charset).value??"UTF-8"}get charsetSource(){return this.getMergedValue(n=>n.charset).source}get color_scheme(){return this.getMergedValue(n=>n.color_scheme).value??null}get colorSchemeSource(){return this.getMergedValue(n=>n.color_scheme).source}get cursor_blink(){return this.getMergedValue(n=>n.cursor_blink).value??null}get env_variables(){return this.getMergedValue(n=>n.env_variables).value??[]}get envVariablesSource(){return this.getMergedValue(n=>n.env_variables).source}get font_size(){return this.getMergedValue(n=>n.font_size).value??null}get is_forward_ports(){return this.getMergedValue(n=>n.is_forward_ports).value??null}get keep_alive_packages(){return this.getMergedValue(n=>n.keep_alive_packages).value??null}get mosh_server_command(){return this.getMergedValue(n=>n.mosh_server_command).value??""}get port(){return this.getMergedValue(n=>n.port).value??22}get portSource(){return this.getMergedValue(n=>n.port).source}get proxy(){return this.getMergedValue(n=>n.proxy).value??null}get proxy_source(){return this.getMergedValue(n=>n.proxy).source}get startup_snippet(){return this.getMergedValue(n=>n.startup_snippet).value??null}get startupSnippetSource(){return this.getMergedValue(n=>n.startup_snippet).source}get strict_host_key_check(){return this.getMergedValue(n=>n.strict_host_key_check).value??null}get timeout(){return this.getMergedValue(n=>n.timeout).value??null}get use_mosh(){return this.getMergedValue(n=>n.use_mosh).value??!1}get useMoshSource(){return this.getMergedValue(n=>n.use_mosh).source}get use_ssh_key(){return this.getMergedValue(n=>n.use_ssh_key).value??null}get host_chain(){return this.getMergedValue(n=>n.host_chain).value??null}get host_chain_source(){return this.getMergedValue(n=>n.host_chain).source}get is_shared(){return this.getMergedValue(n=>n.is_shared).value??!1}}class SU extends ZG{constructor(n){super();T(this,"associatedEntity");T(this,"credentialsMode");T(this,"current");T(this,"parent");this.associatedEntity=n.associatedEntity,this.credentialsMode=n.credentialsMode,this.current=n.current,this.parent=n.parent}get identity(){var n,r;return new bU({associatedEntity:this.associatedEntity,credentialsMode:this.credentialsMode,current:(n=this.current)==null?void 0:n.identity,parent:(r=this.parent)==null?void 0:r.identity})}getMergedValue(n){var i;if(this.current){const o=n(this.current);if(o!=null)return{value:o,source:"me",associatedEntity:this.associatedEntity}}const r=(i=this.parent)==null?void 0:i.getMergedValue(n);return r?{value:r.value,source:r.source!=="global"?"parent":"global",associatedEntity:r.associatedEntity}:{value:null,source:"global",associatedEntity:null}}get charset(){return this.getMergedValue(n=>n.charset).value??"UTF-8"}get charsetSource(){return this.getMergedValue(n=>n.charset).source}get color_scheme(){return this.getMergedValue(n=>n.color_scheme).value??null}get colorSchemeSource(){return this.getMergedValue(n=>n.color_scheme).source}get cursor_blink(){return this.getMergedValue(n=>n.cursor_blink).value??null}get font_size(){return this.getMergedValue(n=>n.font_size).value??null}get keep_alive_packages(){return this.getMergedValue(n=>n.keep_alive_packages).value??null}get port(){return this.getMergedValue(n=>n.port).value??23}get portSource(){return this.getMergedValue(n=>n.port).source}get startup_snippet(){return this.getMergedValue(n=>n.startup_snippet).value??null}get timeout(){return this.getMergedValue(n=>n.timeout).value??1500}get is_shared(){return this.getMergedValue(n=>n.is_shared).value??!1}}var Hme=bb;function Fme(e,t){return Hme(e,t)}var xme=Fme;const Cs=Ht(xme);class _U{constructor(t){T(this,"local_id");T(this,"id");T(this,"address");T(this,"label");T(this,"os_name");T(this,"is_shared");T(this,"encrypted_with");this.local_id=t.local_id,this.id=t.id,this.address=t.address||"",this.label=t.label||"",this.os_name=t.os_name||"",this.is_shared=!!t.is_shared,this.encrypted_with=t.encrypted_with??null}get displayLabel(){return this.label||this.address}}class WG extends Gi{constructor(n){super(n);T(this,"hosts_chain");T(this,"entityName","hostChain");T(this,"nameInAnalytic","HostChain");this.hosts_chain=n.hosts_chain?n.hosts_chain.map(r=>new _U(r)):[]}prepareForDuplicate(){this.local_id=void 0,this.id=void 0}get displayLabel(){return this.hosts_chain.map(n=>n.displayLabel).join(" -> ")}clone(n={}){return new WG({...this,...n,changedFields:this.changed(n)})}}const Lme="http",Yme="socks";function Pme(e){switch(e){case Lme:return 3128;case Yme:return 1080;default:return 0}}let Xme=class wU extends Gi{constructor(n={}){super(n);T(this,"hostname");T(this,"identity");T(this,"port");T(this,"type");T(this,"entityName","proxy");T(this,"nameInAnalytic","Proxy");this.hostname=n.hostname||"",this.identity=n.identity?new uo(n.identity):null,this.type=n.type||"http",this.port=n.port!=null?n.port:Pme(this.type)}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.identity&&!this.identity.is_visible&&this.identity.prepareForDuplicate()}replaceIdentity(n){var r;return((r=this.identity)==null?void 0:r.local_id)===n.original.local_id?(this.identity=n.copy,!0):!1}get displayLabel(){return`${this.hostname}:${this.port}`}clone(n={}){return new wU({...this,...n,changedFields:this.changed(n)})}static areSame(n,r){var i,o,s,a,l,c,u,d;return Cs(n==null?void 0:n.hostname,r==null?void 0:r.hostname)&&Cs((i=n==null?void 0:n.identity)==null?void 0:i.username,(o=r==null?void 0:r.identity)==null?void 0:o.username)&&(Cs((s=n==null?void 0:n.identity)==null?void 0:s.password,(a=r==null?void 0:r.identity)==null?void 0:a.password)||Cs((l=n==null?void 0:n.identity)==null?void 0:l.hardware_key,(c=r==null?void 0:r.identity)==null?void 0:c.hardware_key)||Cs((u=n==null?void 0:n.identity)==null?void 0:u.ssh_key,(d=r==null?void 0:r.identity)==null?void 0:d.ssh_key))&&Cs(n==null?void 0:n.port,r==null?void 0:r.port)&&Cs(n==null?void 0:n.type,r==null?void 0:r.type)}};function BU(e,t=`
`){return e.split(t).find(n=>n.trim().length>0)}class ou extends Gi{constructor(n){super(n);T(this,"label");T(this,"snippets_count");T(this,"analytics_id");T(this,"entityName","snippetsPackage");T(this,"nameInAnalytic","SnippetPackage");this.label=n.label||"",this.snippets_count=n.snippets_count,this.analytics_id=n.analytics_id}get displayLabel(){return this.label}clone(n={}){return new ou({...this,...n,changedFields:this.changed(n)})}static is(n){return n.entityName==="snippetsPackage"}}class Ys extends Gi{constructor(n={}){super(n);T(this,"label");T(this,"script");T(this,"package");T(this,"entityName","snippet");T(this,"nameInAnalytic","Snippet");T(this,"targetHosts");T(this,"aianalyticsID");T(this,"isTargetHostModified",!1);this.label=n.label||"",this.script=n.script||"",this.package=n.package?new ou(n.package):null,this.aianalyticsID=n.aianalyticsID,this.targetHosts=n.targetHosts||null}get displayLabel(){return this.label?this.label:BU(this.script)??""}clone(n={}){return new Ys({...this,...n,changedFields:this.changed(n)})}prepareForDuplicate(){this.local_id=void 0,this.id=void 0}resetPackage(){this.package=null}replacePackage(n){var r;return((r=this.package)==null?void 0:r.local_id)===n.original.local_id?(this.package=n.copy,!0):!1}replaceHostInTargets(n){this.targetHosts=sl(this.targetHosts??[],r=>{const i=r.findIndex(o=>o.local_id===n.original.local_id);i<0||(n.original.local_id!==n.copy.local_id&&(this.isTargetHostModified=!0),r[i]=new _U(n.copy))})}resetTargetHostModified(){this.isTargetHostModified=!1}static is(n){return n.entityName==="snippet"}}class pd extends Gi{constructor(n={}){super(n);T(this,"agent_forwarding");T(this,"charset");T(this,"color_scheme");T(this,"cursor_blink");T(this,"env_variables");T(this,"font_size");T(this,"identity");T(this,"is_forward_ports");T(this,"keep_alive_packages");T(this,"mosh_server_command");T(this,"port");T(this,"proxy");T(this,"startup_snippet");T(this,"strict_host_key_check");T(this,"timeout");T(this,"use_mosh");T(this,"use_ssh_key");T(this,"host_chain");T(this,"entityName","sshConfig");T(this,"nameInAnalytic","SSHConfig");this.agent_forwarding=n.agent_forwarding,this.charset=n.charset,this.color_scheme=n.color_scheme,this.cursor_blink=n.cursor_blink,this.env_variables=n.env_variables?n.env_variables.slice():null,this.font_size=n.font_size,this.identity=n.identity?new uo(n.identity):null,this.is_forward_ports=n.is_forward_ports,this.keep_alive_packages=n.keep_alive_packages,this.mosh_server_command=n.mosh_server_command,this.port=n.port,this.proxy=n.proxy?new Xme(n.proxy):null,this.startup_snippet=n.startup_snippet?new Ys(n.startup_snippet):null,this.strict_host_key_check=n.strict_host_key_check,this.timeout=n.timeout,this.use_mosh=n.use_mosh,this.use_ssh_key=n.use_ssh_key,this.host_chain=n.host_chain!=null?new WG(n.host_chain):null}static parseEnvVariables(n){if(!n)return null;try{const r=JSON.parse(n);return Object.entries(r).map(([i,o])=>({name:i,value:typeof o=="string"?o:""}))}catch{return null}}static stringifyEnvVariables(n){const r={};return n&&n.forEach(i=>{r[i.name]=i.value}),JSON.stringify(r)}isPotentialDuplicate(n){return this.port===n.port&&sv(this.identity,n.identity)}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.identity&&!this.identity.is_visible&&this.identity.prepareForDuplicate(),this.proxy&&this.proxy.prepareForDuplicate(),this.host_chain&&this.host_chain.prepareForDuplicate()}replaceIdentity(n){var r;return((r=this.identity)==null?void 0:r.local_id)===n.original.local_id?(this.identity=n.copy,!0):!1}replaceStartupSnippet(n){var r;return((r=this.startup_snippet)==null?void 0:r.local_id)===n.original.local_id?(this.startup_snippet=n.copy,!0):!1}isEmpty(){return[this.agent_forwarding,this.charset,this.color_scheme,this.cursor_blink,this.env_variables,this.font_size,this.identity,this.is_forward_ports,this.keep_alive_packages,this.mosh_server_command,this.port,this.proxy,this.startup_snippet,this.strict_host_key_check,this.timeout,this.use_mosh,this.use_ssh_key,this.host_chain].every(n=>n==null)}stripEmptyIdentity(){this.identity&&this.identity.isEmpty()&&(this.identity=null)}stripForNonProUsers(){var n,r;this.agent_forwarding=null,this.env_variables=null,this.startup_snippet=null,this.proxy=null,this.host_chain=null,(r=(n=this.identity)==null?void 0:n.ssh_key)!=null&&r.certificates&&(this.identity.ssh_key.certificates=[])}clone(n={}){return new pd({...this,...n,changedFields:this.changed(n)})}static areSame(n,r){return n==null&&r==null?!0:n==null||r==null?!1:Cs(new pd({...n,identity:null}),new pd({...r,identity:null}))}resetField(n){Dme(n)&&(this[n]=null)}}const Ume=Ae.union([Ae.literal("port"),Ae.literal("identity"),Ae.literal("startup_snippet"),Ae.literal("proxy"),Ae.literal("host_chain")]),Dme=Ef(Ume);class md extends Gi{constructor(n={}){super(n);T(this,"charset");T(this,"color_scheme");T(this,"cursor_blink");T(this,"font_size");T(this,"identity");T(this,"keep_alive_packages");T(this,"port");T(this,"startup_snippet");T(this,"timeout");T(this,"entityName","telnetConfig");T(this,"nameInAnalytic","TelnetConfig");this.charset=n.charset,this.color_scheme=n.color_scheme,this.cursor_blink=n.cursor_blink,this.font_size=n.font_size,this.identity=n.identity?new uo(n.identity):null,this.keep_alive_packages=n.keep_alive_packages,this.port=n.port,this.startup_snippet=n.startup_snippet?new Ys(n.startup_snippet):null,this.timeout=n.timeout}isPotentialDuplicate(n){return this.port===n.port&&sv(this.identity,n.identity)}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.identity&&!this.identity.is_visible&&this.identity.prepareForDuplicate()}replaceIdentity(n){var r;return((r=this.identity)==null?void 0:r.local_id)===n.original.local_id?(this.identity=n.copy,!0):!1}replaceStartupSnippet(n){var r;return((r=this.startup_snippet)==null?void 0:r.local_id)===n.original.local_id?(this.startup_snippet=n.copy,!0):!1}isEmpty(){return this.charset==null&&this.color_scheme==null&&this.cursor_blink==null&&this.font_size==null&&this.identity==null&&this.keep_alive_packages==null&&this.port==null&&this.startup_snippet==null&&this.timeout==null}stripEmptyIdentity(){this.identity&&this.identity.isEmpty()&&(this.identity=null)}stripForNonProUsers(){var n,r;this.startup_snippet=null,(r=(n=this.identity)==null?void 0:n.ssh_key)!=null&&r.certificates&&(this.identity.ssh_key.certificates=[])}clone(n={}){return new md({...this,...n,changedFields:this.changed(n)})}static areSame(n,r){return n==null&&r==null?!0:n==null||r==null?!1:Cs(new md({...n,identity:null}),new md({...r,identity:null}))}resetField(n){Mme(n)&&(this[n]=null)}}const Kme=Ae.union([Ae.literal("port"),Ae.literal("identity")]),Mme=Ef(Kme);class xo extends Gi{constructor(n={}){super(n);T(this,"label");T(this,"parent_group");T(this,"ssh_config");T(this,"cloud_config");T(this,"telnet_config");T(this,"sharing_mode");T(this,"credentials_mode");T(this,"entityName","group");T(this,"nameInAnalytic","Group");this.label=n.label||"",this.parent_group=n.parent_group?new xo(n.parent_group):null,this.ssh_config=n.ssh_config?new pd(n.ssh_config):null,this.cloud_config=n.cloud_config?$me(n.cloud_config):null,this.telnet_config=n.telnet_config?new md(n.telnet_config):null,this.sharing_mode=n.sharing_mode??null,this.credentials_mode=n.credentials_mode??null}get displayLabel(){return this.label}get parentGroups(){const{parent_group:n}=this;return n?[n,...n.parentGroups]:[]}get rootGroup(){return yU(this.parentGroups)??this}get hasMergedSshConfig(){return this.ssh_config?!0:this.parent_group?this.parent_group.hasMergedSshConfig:!1}get hasMergedTelnetConfig(){return this.telnet_config?!0:this.parent_group?this.parent_group.hasMergedTelnetConfig:!1}getMergedSshConfig(n=[]){return new AU({associatedEntity:this,credentialsMode:this.credentials_mode,current:this.ssh_config,parent:this.parent_group&&!n.includes(this.parent_group)?this.parent_group.getMergedSshConfig([this,...n]):void 0})}getMergedTelnetConfig(){var n;return new SU({associatedEntity:this,credentialsMode:this.credentials_mode,current:this.telnet_config,parent:(n=this.parent_group)==null?void 0:n.getMergedTelnetConfig()})}getSshConfigWithCredentialsMode(){if(this.ssh_config)return{sshConfig:this.ssh_config,credentialsMode:this.credentials_mode}}getSshConfigsRecursively(){return[this.getSshConfigWithCredentialsMode(),...this.parentGroups.map(n=>n.getSshConfigWithCredentialsMode())].filter(Tl)}getTelnetConfigsRecursively(){return[this.telnet_config,...this.parentGroups.map(({telnet_config:n})=>n)].filter(Tl)}stripEmptyIdentities(){this.ssh_config&&this.ssh_config.stripEmptyIdentity(),this.telnet_config&&this.telnet_config.stripEmptyIdentity()}stripConfigsForNonProUsers(){this.parent_group&&this.parent_group.stripConfigsForNonProUsers(),this.ssh_config&&this.ssh_config.stripForNonProUsers(),this.telnet_config&&this.telnet_config.stripForNonProUsers(),this.cloud_config&&(this.cloud_config=null)}clone(n={}){return new xo({...this,...n,changedFields:this.changed(n)})}unlinkParentGroup(){this.parent_group=null}replaceParentGroup(n){var r;return((r=this.parent_group)==null?void 0:r.local_id)===n.original.local_id?(this.parent_group=n.copy,!0):!1}static clone(n,r={}){return new xo({...n}).clone(r)}static is(n){return n.entityName==="group"}}function $me(e){if(e.cloudType==="aws")return new pme(e);if(e.cloudType==="DigitalOcean")return new yme(e);if(e.cloudType==="azure")return new mme(e);throw new Error("Incorrect cloud config")}class ri extends Gi{constructor(n={}){super(n);T(this,"address");T(this,"backspace");T(this,"group");T(this,"icon");T(this,"interaction_date");T(this,"label");T(this,"os_name");T(this,"ssh_config");T(this,"telnet_config");T(this,"tags");T(this,"ip_version");T(this,"cloud_instance_id");T(this,"cloud_instance_type");T(this,"connectionPath");T(this,"credentials_mode");T(this,"entityName","host");T(this,"nameInAnalytic","Host");this.cloud_instance_id=n.cloud_instance_id,this.cloud_instance_type=n.cloud_instance_type,this.address=n.address||"",this.backspace=n.backspace||"default",this.group=n.group?new xo(n.group):null,this.icon=n.icon||"",this.interaction_date=n.interaction_date,this.label=n.label||"",this.os_name=n.os_name||"",this.ssh_config=n.ssh_config?new pd(n.ssh_config):null,this.telnet_config=n.telnet_config?new md(n.telnet_config):null,this.tags=Array.isArray(n.tags)?[...n.tags]:[],this.ip_version=n.ip_version||fme,this.connectionPath=Array.isArray(n.connectionPath)?n.connectionPath.map(r=>new ri(r)):[],this.credentials_mode=n.credentials_mode??null}static fromLocalhost(n){return new ri({address:n.address,ssh_config:{port:n.port,identity:{is_visible:!1,username:n.username,password:n.password}}})}isPotentialDuplicate(n){return this.address===n.address&&this.label===n.label&&sv(this.ssh_config,n.ssh_config)&&sv(this.telnet_config,n.telnet_config)}prepareForDuplicate(){this.local_id=void 0,this.id=void 0,this.cloud_instance_id=void 0,this.cloud_instance_type=void 0,this.os_name="",this.ssh_config&&this.ssh_config.prepareForDuplicate(),this.telnet_config&&this.telnet_config.prepareForDuplicate()}get displayLabel(){return this.label||this.address}get actions(){const n=[];return this.ssh_config&&(this.getMergedSshConfig().use_mosh&&n.push("mosh"),n.push("ssh")),this.telnet_config&&n.push("telnet"),n}get firstChain(){return this.connectionPath.length>1?this.connectionPath[0]:null}get description(){const{ssh_config:n,telnet_config:r}=this,i=[...this.actions];n&&n.identity&&n.identity.username&&i.push(n.identity.username),r&&r.identity&&r.identity.username&&i.push(r.identity.username);const o=pU(this.tags);return i.concat(o).join(", ")}get parentGroups(){const{group:n}=this;return n?[n,...n.parentGroups]:[]}getMergedSshConfig(){var n;return new AU({associatedEntity:this,credentialsMode:this.credentials_mode,current:this.ssh_config,parent:(n=this.group)==null?void 0:n.getMergedSshConfig()})}get hasMergedSshConfig(){return this.ssh_config?!0:this.group?this.group.hasMergedSshConfig:!1}get hasMergedTelnetConfig(){return this.telnet_config?!0:this.group?this.group.hasMergedTelnetConfig:!1}getHostChainCount(){return this.connectionPath.length>1?this.connectionPath.length-1:0}getMergedTelnetConfig(){var n;return new SU({associatedEntity:this,credentialsMode:this.credentials_mode,current:this.telnet_config,parent:(n=this.group)==null?void 0:n.getMergedTelnetConfig()})}getMergedConfigFor(n){if(n==="ssh"||n==="mosh")return this.getMergedSshConfig();if(n==="telnet")return this.getMergedTelnetConfig()}stripEmptyIdentities(){this.ssh_config&&this.ssh_config.stripEmptyIdentity(),this.telnet_config&&this.telnet_config.stripEmptyIdentity()}stripConfigsForNonProUsers(){this.group&&this.group.stripConfigsForNonProUsers(),this.ssh_config&&this.ssh_config.stripForNonProUsers(),this.telnet_config&&this.telnet_config.stripForNonProUsers()}replaceGroup(n){var r;return((r=this.group)==null?void 0:r.local_id)===n.original.local_id?(this.group=n.copy,!0):!1}unlinkParentGroup(){this.group=null}clone(n={}){return new ri({...this,...n,changedFields:this.changed(n)})}get rootGroup(){var n;return(n=this.group)==null?void 0:n.rootGroup}static clone(n,r={}){return new ri({...n}).clone(r)}static is(n){return n.entityName==="host"}}class kG{constructor(t){T(this,"local_id");T(this,"id");T(this,"updated_at");T(this,"created_at");T(this,"device");T(this,"address");T(this,"connected_at");T(this,"errorMsg");T(this,"encrypted_with");T(this,"host");T(this,"label");T(this,"log_status");T(this,"password");T(this,"port");T(this,"ssh_key");T(this,"startup_snippet");T(this,"username");T(this,"active");T(this,"protocol");T(this,"session_log_data");T(this,"disconnectedAt");T(this,"actorId");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at,this.created_at=t.updated_at,this.encrypted_with=t.encrypted_with??null,this.address=t.address||"",this.connected_at=t.connected_at,this.errorMsg=t.errorMsg||"",this.host=t.host!=null?new ri(t.host):null,this.log_status=t.log_status??OW,this.label=t.label||"",this.password=t.password||"",this.port=t.port||0,this.ssh_key=t.ssh_key!=null?new Ls(t.ssh_key):null,this.startup_snippet=t.startup_snippet!=null?new Ys(t.startup_snippet):null,this.username=t.username||"",this.active=t.active,this.protocol=t.protocol,this.session_log_data=t.session_log_data,this.disconnectedAt=t.disconnectedAt,this.actorId=t.actorId,this.device=t.device}static createFromConnection(t,n){const{host:r,errorMsg:i,protocol:o,sessionLogData:s}=t,{address:a,label:l}=r,c=o==="telnet"?r.getMergedTelnetConfig():r.getMergedSshConfig(),{startup_snippet:u,port:d,identity:g}=c,{ssh_key:p,username:m,password:v}=g,y=(()=>s?Vpe:i?kpe:OW)();return new kG({address:a,connected_at:n.setUTCMilliseconds(0),errorMsg:i||"",encrypted_with:r.encrypted_with,host:r,label:l,log_status:y,password:v,port:d,ssh_key:p,startup_snippet:u,username:m,active:!i,protocol:o,session_log_data:s})}}var zme=tu;function Jme(e){return typeof e=="function"?e:zme}var jme=Jme;function Qme(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var VG=Qme,qme=VG,xW=Math.max;function eye(e,t,n){return t=xW(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=xW(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),qme(e,this,a)}}var tye=eye;function nye(e){return function(){return e}}var rye=nye,iye=rye,LW=TX,oye=tu,sye=LW?function(e,t){return LW(e,"toString",{configurable:!0,enumerable:!1,value:iye(t),writable:!0})}:oye,aye=sye,lye=800,cye=16,uye=Date.now;function dye(e){var t=0,n=0;return function(){var r=uye(),i=cye-(r-n);if(n=r,i>0){if(++t>=lye)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var EU=dye,fye=aye,gye=EU,hye=gye(fye),RU=hye,pye=tu,mye=tye,yye=RU;function Iye(e,t){return yye(mye(e,t,pye),e+"")}var su=Iye,YW=KX,vye=YW&&new YW,GU=vye,Cye=tu,PW=GU,bye=PW?function(e,t){return PW.set(e,t),e}:Cye,NU=bye,Aye=Do,XW=Object.create,Sye=function(){function e(){}return function(t){if(!Aye(t))return{};if(XW)return XW(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),_b=Sye,_ye=_b,wye=Do;function Bye(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=_ye(e.prototype),r=e.apply(n,t);return wye(r)?r:n}}var wb=Bye,Eye=wb,Rye=li,Gye=1;function Nye(e,t,n){var r=t&Gye,i=Eye(e);function o(){var s=this&&this!==Rye&&this instanceof o?i:e;return s.apply(r?n:this,arguments)}return o}var Zye=Nye,Tye=Math.max;function Wye(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,l=t.length,c=Tye(o-s,0),u=Array(l+c),d=!r;++a<l;)u[a]=t[a];for(;++i<s;)(d||i<o)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u}var ZU=Wye,kye=Math.max;function Vye(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,l=-1,c=t.length,u=kye(o-a,0),d=Array(u+c),g=!r;++i<u;)d[i]=e[i];for(var p=i;++l<c;)d[p+l]=t[l];for(;++s<a;)(g||i<o)&&(d[p+n[s]]=e[i++]);return d}var TU=Vye;function Oye(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Hye=Oye;function Fye(){}var OG=Fye,xye=_b,Lye=OG,Yye=4294967295;function av(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Yye,this.__views__=[]}av.prototype=xye(Lye.prototype);av.prototype.constructor=av;var HG=av,UW=GU,Pye=hU,Xye=UW?function(e){return UW.get(e)}:Pye,WU=Xye,Uye={},Dye=Uye,DW=Dye,Kye=Object.prototype,Mye=Kye.hasOwnProperty;function $ye(e){for(var t=e.name+"",n=DW[t],r=Mye.call(DW,t)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==e)return i.name}return t}var zye=$ye,Jye=_b,jye=OG;function lv(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}lv.prototype=Jye(jye.prototype);lv.prototype.constructor=lv;var kU=lv;function Qye(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var FG=Qye,qye=HG,eIe=kU,tIe=FG;function nIe(e){if(e instanceof qye)return e.clone();var t=new eIe(e.__wrapped__,e.__chain__);return t.__actions__=tIe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var rIe=nIe,iIe=HG,KW=kU,oIe=OG,sIe=Er,aIe=Sa,lIe=rIe,cIe=Object.prototype,uIe=cIe.hasOwnProperty;function cv(e){if(aIe(e)&&!sIe(e)&&!(e instanceof iIe)){if(e instanceof KW)return e;if(uIe.call(e,"__wrapped__"))return lIe(e)}return new KW(e)}cv.prototype=oIe.prototype;cv.prototype.constructor=cv;var dIe=cv,fIe=HG,gIe=WU,hIe=zye,pIe=dIe;function mIe(e){var t=hIe(e),n=pIe[t];if(typeof n!="function"||!(t in fIe.prototype))return!1;if(e===n)return!0;var r=gIe(n);return!!r&&e===r[0]}var yIe=mIe,IIe=NU,vIe=EU,CIe=vIe(IIe),VU=CIe,bIe=/\{\n\/\* \[wrapped with (.+)\] \*/,AIe=/,? & /;function SIe(e){var t=e.match(bIe);return t?t[1].split(AIe):[]}var _Ie=SIe,wIe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function BIe(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(wIe,`{
/* [wrapped with `+t+`] */
`)}var EIe=BIe;function RIe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var GIe=RIe,NIe=GIe,ZIe=Sb,TIe=1,WIe=2,kIe=8,VIe=16,OIe=32,HIe=64,FIe=128,xIe=256,LIe=512,YIe=[["ary",FIe],["bind",TIe],["bindKey",WIe],["curry",kIe],["curryRight",VIe],["flip",LIe],["partial",OIe],["partialRight",HIe],["rearg",xIe]];function PIe(e,t){return NIe(YIe,function(n){var r="_."+n[0];t&n[1]&&!ZIe(e,r)&&e.push(r)}),e.sort()}var XIe=PIe,UIe=_Ie,DIe=EIe,KIe=RU,MIe=XIe;function $Ie(e,t,n){var r=t+"";return KIe(e,DIe(r,MIe(UIe(r),n)))}var OU=$Ie,zIe=yIe,JIe=VU,jIe=OU,QIe=1,qIe=2,eve=4,tve=8,MW=32,$W=64;function nve(e,t,n,r,i,o,s,a,l,c){var u=t&tve,d=u?s:void 0,g=u?void 0:s,p=u?o:void 0,m=u?void 0:o;t|=u?MW:$W,t&=~(u?$W:MW),t&eve||(t&=~(QIe|qIe));var v=[e,t,i,p,d,m,g,a,l,c],y=n.apply(void 0,v);return zIe(e)&&JIe(y,v),y.placeholder=r,jIe(y,e,t)}var HU=nve;function rve(e){var t=e;return t.placeholder}var xG=rve,ive=FG,ove=Gf,sve=Math.min;function ave(e,t){for(var n=e.length,r=sve(t.length,n),i=ive(e);r--;){var o=t[r];e[r]=ove(o,n)?i[o]:void 0}return e}var lve=ave,zW="__lodash_placeholder__";function cve(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];(s===t||s===zW)&&(e[n]=zW,o[i++]=n)}return o}var Bb=cve,uve=ZU,dve=TU,fve=Hye,JW=wb,gve=HU,hve=xG,pve=lve,mve=Bb,yve=li,Ive=1,vve=2,Cve=8,bve=16,Ave=128,Sve=512;function FU(e,t,n,r,i,o,s,a,l,c){var u=t&Ave,d=t&Ive,g=t&vve,p=t&(Cve|bve),m=t&Sve,v=g?void 0:JW(e);function y(){for(var I=arguments.length,b=Array(I),A=I;A--;)b[A]=arguments[A];if(p)var N=hve(y),L=fve(b,N);if(r&&(b=uve(b,r,i,p)),o&&(b=dve(b,o,s,p)),I-=L,p&&I<c){var G=mve(b,N);return gve(e,t,FU,y.placeholder,n,b,G,a,l,c-I)}var W=d?n:this,j=g?W[e]:e;return I=b.length,a?b=pve(b,a):m&&I>1&&b.reverse(),u&&l<I&&(b.length=l),this&&this!==yve&&this instanceof y&&(j=v||JW(j)),j.apply(W,b)}return y}var xU=FU,_ve=VG,wve=wb,Bve=xU,Eve=HU,Rve=xG,Gve=Bb,Nve=li;function Zve(e,t,n){var r=wve(e);function i(){for(var o=arguments.length,s=Array(o),a=o,l=Rve(i);a--;)s[a]=arguments[a];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:Gve(s,l);if(o-=c.length,o<n)return Eve(e,t,Bve,i.placeholder,void 0,s,c,void 0,void 0,n-o);var u=this&&this!==Nve&&this instanceof i?r:e;return _ve(u,this,s)}return i}var Tve=Zve,Wve=VG,kve=wb,Vve=li,Ove=1;function Hve(e,t,n,r){var i=t&Ove,o=kve(e);function s(){for(var a=-1,l=arguments.length,c=-1,u=r.length,d=Array(u+l),g=this&&this!==Vve&&this instanceof s?o:e;++c<u;)d[c]=r[c];for(;l--;)d[c++]=arguments[++a];return Wve(g,i?n:this,d)}return s}var Fve=Hve,xve=ZU,Lve=TU,jW=Bb,QW="__lodash_placeholder__",MA=1,Yve=2,Pve=4,qW=8,mg=128,ek=256,Xve=Math.min;function Uve(e,t){var n=e[1],r=t[1],i=n|r,o=i<(MA|Yve|mg),s=r==mg&&n==qW||r==mg&&n==ek&&e[7].length<=t[8]||r==(mg|ek)&&t[7].length<=t[8]&&n==qW;if(!(o||s))return e;r&MA&&(e[2]=t[2],i|=n&MA?0:Pve);var a=t[3];if(a){var l=e[3];e[3]=l?xve(l,a,t[4]):a,e[4]=l?jW(e[3],QW):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?Lve(l,a,t[6]):a,e[6]=l?jW(e[5],QW):t[6]),a=t[7],a&&(e[7]=a),r&mg&&(e[8]=e[8]==null?t[8]:Xve(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}var Dve=Uve,Kve=/\s/;function Mve(e){for(var t=e.length;t--&&Kve.test(e.charAt(t)););return t}var $ve=Mve,zve=$ve,Jve=/^\s+/;function jve(e){return e&&e.slice(0,zve(e)+1).replace(Jve,"")}var Qve=jve,qve=Qve,tk=Do,eCe=Vf,nk=0/0,tCe=/^[-+]0x[0-9a-f]+$/i,nCe=/^0b[01]+$/i,rCe=/^0o[0-7]+$/i,iCe=parseInt;function oCe(e){if(typeof e=="number")return e;if(eCe(e))return nk;if(tk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=tk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=qve(e);var n=nCe.test(e);return n||rCe.test(e)?iCe(e.slice(2),n?2:8):tCe.test(e)?nk:+e}var LU=oCe,sCe=LU,rk=1/0,aCe=17976931348623157e292;function lCe(e){if(!e)return e===0?e:0;if(e=sCe(e),e===rk||e===-rk){var t=e<0?-1:1;return t*aCe}return e===e?e:0}var cCe=lCe,uCe=cCe;function dCe(e){var t=uCe(e),n=t%1;return t===t?n?t-n:t:0}var YU=dCe,fCe=NU,gCe=Zye,hCe=Tve,pCe=xU,mCe=Fve,yCe=WU,ICe=Dve,vCe=VU,CCe=OU,ik=YU,bCe="Expected a function",ok=1,ACe=2,$A=8,zA=16,JA=32,sk=64,ak=Math.max;function SCe(e,t,n,r,i,o,s,a){var l=t&ACe;if(!l&&typeof e!="function")throw new TypeError(bCe);var c=r?r.length:0;if(c||(t&=~(JA|sk),r=i=void 0),s=s===void 0?s:ak(ik(s),0),a=a===void 0?a:ik(a),c-=i?i.length:0,t&sk){var u=r,d=i;r=i=void 0}var g=l?void 0:yCe(e),p=[e,t,n,r,i,u,d,o,s,a];if(g&&ICe(p,g),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],a=p[9]=p[9]===void 0?l?0:e.length:ak(p[9]-c,0),!a&&t&($A|zA)&&(t&=~($A|zA)),!t||t==ok)var m=gCe(e,t,n);else t==$A||t==zA?m=hCe(e,t,a):(t==JA||t==(ok|JA))&&!i.length?m=mCe(e,t,n,r):m=pCe.apply(void 0,p);var v=g?fCe:vCe;return CCe(v(m,p),e,t)}var _Ce=SCe,wCe=su,BCe=_Ce,ECe=xG,RCe=Bb,GCe=32,LG=wCe(function(e,t){var n=RCe(t,ECe(LG));return BCe(e,GCe,void 0,t,n)});LG.placeholder={};var NCe=LG,ZCe=jme,TCe=NCe;function WCe(e,t){return TCe(ZCe(t),e)}var kCe=WCe;const VCe=Ht(kCe);var OCe=Ns,HCe=function(){return OCe.randomBytes(16)},PU=[];for(var oy=0;oy<256;++oy)PU[oy]=(oy+256).toString(16).substr(1);function FCe(e,t){var n=t||0,r=PU;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}var xCe=FCe,LCe=HCe,YCe=xCe;function PCe(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||LCe)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||YCe(i)}var XCe=PCe;const Fc=Ht(XCe),UCe="LOCAL_MESSAGE_ACTION_SSL_VERIFICATION_FAILED",DCe="LOCAL_MESSAGE_ACTION_UPDATE_DOWNLOADED",KCe=-1,lk=-5;var XU={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp=Symbol.for("react.element"),MCe=Symbol.for("react.portal"),$Ce=Symbol.for("react.fragment"),zCe=Symbol.for("react.strict_mode"),JCe=Symbol.for("react.profiler"),jCe=Symbol.for("react.provider"),QCe=Symbol.for("react.context"),qCe=Symbol.for("react.forward_ref"),ebe=Symbol.for("react.suspense"),tbe=Symbol.for("react.memo"),nbe=Symbol.for("react.lazy"),ck=Symbol.iterator;function rbe(e){return e===null||typeof e!="object"?null:(e=ck&&e[ck]||e["@@iterator"],typeof e=="function"?e:null)}var UU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DU=Object.assign,KU={};function Ff(e,t,n){this.props=e,this.context=t,this.refs=KU,this.updater=n||UU}Ff.prototype.isReactComponent={};Ff.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ff.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MU(){}MU.prototype=Ff.prototype;function YG(e,t,n){this.props=e,this.context=t,this.refs=KU,this.updater=n||UU}var PG=YG.prototype=new MU;PG.constructor=YG;DU(PG,Ff.prototype);PG.isPureReactComponent=!0;var uk=Array.isArray,$U=Object.prototype.hasOwnProperty,XG={current:null},zU={key:!0,ref:!0,__self:!0,__source:!0};function JU(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)$U.call(t,r)&&!zU.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qp,type:e,key:o,ref:s,props:i,_owner:XG.current}}function ibe(e,t){return{$$typeof:qp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function UG(e){return typeof e=="object"&&e!==null&&e.$$typeof===qp}function obe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dk=/\/+/g;function jA(e,t){return typeof e=="object"&&e!==null&&e.key!=null?obe(""+e.key):t.toString(36)}function oI(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case qp:case MCe:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+jA(s,0):r,uk(i)?(n="",e!=null&&(n=e.replace(dk,"$&/")+"/"),oI(i,t,n,"",function(c){return c})):i!=null&&(UG(i)&&(i=ibe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(dk,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",uk(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+jA(o,a);s+=oI(o,t,n,l,i)}else if(l=rbe(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+jA(o,a++),s+=oI(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function sy(e,t,n){if(e==null)return e;var r=[],i=0;return oI(e,r,"","",function(o){return t.call(n,o,i++)}),r}function sbe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ci={current:null},sI={transition:null},abe={ReactCurrentDispatcher:ci,ReactCurrentBatchConfig:sI,ReactCurrentOwner:XG};Mt.Children={map:sy,forEach:function(e,t,n){sy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return sy(e,function(){t++}),t},toArray:function(e){return sy(e,function(t){return t})||[]},only:function(e){if(!UG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mt.Component=Ff;Mt.Fragment=$Ce;Mt.Profiler=JCe;Mt.PureComponent=YG;Mt.StrictMode=zCe;Mt.Suspense=ebe;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=abe;Mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=DU({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=XG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)$U.call(t,l)&&!zU.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qp,type:e.type,key:i,ref:o,props:r,_owner:s}};Mt.createContext=function(e){return e={$$typeof:QCe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jCe,_context:e},e.Consumer=e};Mt.createElement=JU;Mt.createFactory=function(e){var t=JU.bind(null,e);return t.type=e,t};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(e){return{$$typeof:qCe,render:e}};Mt.isValidElement=UG;Mt.lazy=function(e){return{$$typeof:nbe,_payload:{_status:-1,_result:e},_init:sbe}};Mt.memo=function(e,t){return{$$typeof:tbe,type:e,compare:t===void 0?null:t}};Mt.startTransition=function(e){var t=sI.transition;sI.transition={};try{e()}finally{sI.transition=t}};Mt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Mt.useCallback=function(e,t){return ci.current.useCallback(e,t)};Mt.useContext=function(e){return ci.current.useContext(e)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(e){return ci.current.useDeferredValue(e)};Mt.useEffect=function(e,t){return ci.current.useEffect(e,t)};Mt.useId=function(){return ci.current.useId()};Mt.useImperativeHandle=function(e,t,n){return ci.current.useImperativeHandle(e,t,n)};Mt.useInsertionEffect=function(e,t){return ci.current.useInsertionEffect(e,t)};Mt.useLayoutEffect=function(e,t){return ci.current.useLayoutEffect(e,t)};Mt.useMemo=function(e,t){return ci.current.useMemo(e,t)};Mt.useReducer=function(e,t,n){return ci.current.useReducer(e,t,n)};Mt.useRef=function(e){return ci.current.useRef(e)};Mt.useState=function(e){return ci.current.useState(e)};Mt.useSyncExternalStore=function(e,t,n){return ci.current.useSyncExternalStore(e,t,n)};Mt.useTransition=function(){return ci.current.useTransition()};Mt.version="18.2.0";XU.exports=Mt;var Eb=XU.exports;const lbe=Ht(Eb);var cbe="Invariant failed";function Bs(e,t){if(!e)throw new Error(cbe)}const ube=Eb.createContext(void 0);ube.Provider;function So(e,t){return e?t:[]}function dbe(e,t=!1){return e??t?"yes":"no"}const fbe=e=>{const t=e.toLowerCase();return t.includes("aws")?"AWS":t.includes("azure")?"Azure":"Digital Ocean"},ay=e=>{const{cloud_instance_type:t}=e??{};return t==null?null:fbe(t)},QA=e=>{if(!e)return{isWorkspace:"no",workspaceTemplateID:void 0};const{isWorkspaceConnection:t,workspaceTemplateLocalId:n}=e;return{isWorkspace:dbe(t),workspaceTemplateID:n==null?void 0:n.toString()}};function gbe(e){switch(e){case"ssh":return"SSH";case"telnet":return"Telnet";case"mosh":return"Mosh";case"local":return"Local";case"stream":return"LiveTerminal";case"serial":return"Serial";default:return null}}const hbe=14,jU="termius dark",pbe="Source Code Pro",mbe=4,ybe=40,Ibe=[{name:"Termius Dark",colorPaletteOverrides:["#343851","#f24e50","#008463","#eca855","#08639f","#c13282","#2091f6","#e2e3e8","#8d91a5","#ff7375","#3ed7be","#fdc47d","#6ba0c3","#ff7dc5","#44a7ff","#ffffff"],backgroundColor:"#141729",cursorColor:"#21b568",foregroundColor:"#21b568",selectionColor:"#21b56880",app:{terminalUIColor:"#8D91A5"}},{name:"Termius Light",colorPaletteOverrides:["#141729","#f24e50","#198c51","#f8aa4b","#004878","#8f3c91","#2091f6","#eeeeee","#3e4257","#ff7375","#21b568","#fdc47d","#1d6da2","#ff7dc5","#44a7ff","#ffffff"],backgroundColor:"#d5dde0",cursorColor:"#32364a",foregroundColor:"#32364a",selectionColor:"#32364a80",app:{terminalUIColor:"#6C797E"}},{name:"Kanagawa Wave",colorPaletteOverrides:["#16161d","#c34043","#5d864d","#c0a36e","#7e9cd8","#6f549b","#6a9589","#c8c093","#727169","#e9585b","#98bb6c","#e6c384","#7fb4ca","#a18bc4","#8bc5b9","#dcd7ba"],backgroundColor:"#1f1f28",cursorColor:"#c8c093",foregroundColor:"#dcd7ba",selectionColor:"#d7ba8080",app:{terminalUIColor:"#88928a"}},{name:"Kanagawa Dragon",colorPaletteOverrides:["#0d0c0c","#c4746e","#596f44","#c4b28a","#8ba4b0","#9c5f9f","#5a948f","#e6e2c7","#a6a69c","#e88a83","#9ccd9c","#e6c384","#7fb4ca","#d7bdd9","#77c7c0","#fffad9"],backgroundColor:"#181616",cursorColor:"#c8c093",foregroundColor:"#c5c9c5",selectionColor:"#c9c58080",app:{terminalUIColor:"#88928a"}},{name:"Kanagawa Lotus",colorPaletteOverrides:["#1f1f28","#c84053","#6f894e","#cbbc41","#4871af","#e56792","#5fa99c","#545464","#555448","#e65569","#88a760","#e5d978","#6693bf","#c299ff","#7cc4b0","#43436c"],backgroundColor:"#f2ecbc",cursorColor:"#43436c",foregroundColor:"#545464",selectionColor:"#54648080",app:{terminalUIColor:"#88928a"}},{name:"Hacker Blue",colorPaletteOverrides:["#1e2644","#0d7eaf","#529cbd","#00608a","#034765","#648593","#7ad6ff","#d1f1ff","#2f385a","#0fbdff","#6fb7d3","#43c3f4","#5cc0e6","#7ab2c7","#4dceff","#fefefe"],backgroundColor:"#010515",cursorColor:"#10b6ff",foregroundColor:"#11b7ff",selectionColor:"#c1e4ff80",app:{terminalUIColor:"#2c71a4"}},{name:"Hacker Green",colorPaletteOverrides:["#243128","#14af0d","#86ce83","#068a00","#50be4b","#4b7649","#a8f0a4","#d6fcd4","#36463b","#28f11d","#90e08b","#4cf443","#63e65c","#a8d9a5","#59ea51","#fefefe"],backgroundColor:"#020f01",cursorColor:"#15d00d",foregroundColor:"#16b10e",selectionColor:"#d4ffc180",app:{terminalUIColor:"#2ca43f"}},{name:"Hacker Red",colorPaletteOverrides:["#381313","#b00d0d","#5d2020","#890000","#be4a4a","#7a3b3b","#ff7979","#ffd2d2","#993f3f","#ff1111","#d26d6d","#f54242","#e55b5b","#c87b7b","#ff4d4d","#fefefe"],backgroundColor:"#200000",cursorColor:"#b00d0d",foregroundColor:"#b10e0e",selectionColor:"#ebc1ff80",app:{terminalUIColor:"#a42c2c"}},{name:"Everforest Dark",colorPaletteOverrides:["#42494e","#a1484a","#778e54","#ba9e68","#388084","#906378","#6ca37a","#c0dac6","#575656","#e67e80","#a7c080","#dbbc7f","#7fbbb3","#d699b6","#83c092","#e8f4eb"],backgroundColor:"#282e32",cursorColor:"#d3c6aa",foregroundColor:"#d3c6aa",selectionColor:"#d3c6aa80",app:{terminalUIColor:"#88928A"}},{name:"Everforest Light",colorPaletteOverrides:["#42494e","#d2413e","#919d45","#d89902","#2b7ba7","#bc72a5","#50b08c","#c8d0c9","#575656","#e67e80","#a7c080","#dbbc7f","#7fbbb3","#d699b6","#83c092","#d7e2d8"],backgroundColor:"#fefbf1",cursorColor:"#5c6a72",foregroundColor:"#5c6a72",selectionColor:"#5c6a7280",app:{terminalUIColor:"#959F92"}},{name:"Night Owl",colorPaletteOverrides:["#072945","#ef5350","#22da6e","#c5e478","#82aaff","#c792ea","#21c7a8","#e1f1ff","#575656","#ff7472","#40fa8d","#ffeb95","#a0beff","#daa4ff","#7fdbca","#ffffff"],backgroundColor:"#011627",cursorColor:"#80a4c2",foregroundColor:"#d6deeb",selectionColor:"#d6deeb80",app:{terminalUIColor:"#6D90AD"}},{name:"Light Owl",colorPaletteOverrides:["#403f53","#de3d3b","#08916a","#e0af02","#288ed7","#d6438a","#2aa298","#e8e5e5","#57566d","#fa5d5b","#1abf90","#f4c315","#3ca3ec","#f559a4","#39c6ba","#f6f6f6"],backgroundColor:"#fbfbfb",cursorColor:"#90a7b2",foregroundColor:"#403f53",selectionColor:"#403f5380",app:{terminalUIColor:"#8898A4"}},{name:"Aura",colorPaletteOverrides:["#1c1b22","#ff6767","#4deeb8","#f4be77","#5b72ee","#a277ff","#51fafa","#dddbfa","#4d4d4d","#ffa285","#99ffdd","#ffd49d","#8296ff","#b592ff","#8cffff","#ffffff"],backgroundColor:"#21202e",cursorColor:"#edecee",foregroundColor:"#edecee",selectionColor:"#edecee80",app:{terminalUIColor:"#A6A2D7"}},{name:"Ros Pine",colorPaletteOverrides:["#26233a","#be5d78","#78b1bb","#e4ad5f","#266782","#9c7ac5","#c28987","#e0def4","#6e6a86","#eb6f92","#9ccfd8","#f6c177","#4386a1","#d5b2ff","#ebbcba","#f0eeff"],backgroundColor:"#191724",cursorColor:"#e0def4",foregroundColor:"#e0def4",selectionColor:"#e0def480",app:{terminalUIColor:"#858297"}},{name:"Ros Pine Moon",colorPaletteOverrides:["#393552","#be5d78","#78b1bb","#e4ad5f","#307997","#9c7ac5","#da8c8a","#e0def4","#6e6a86","#eb6f92","#9ccfd8","#f6c177","#3e8fb0","#d5b2ff","#ebbcba","#f0eeff"],backgroundColor:"#232136",cursorColor:"#e0def4",foregroundColor:"#e0def4",selectionColor:"#e0def480",app:{terminalUIColor:"#858297"}},{name:"Ros Pine Dawn",colorPaletteOverrides:["#c9c0b9","#b4637a","#56949f","#ea9d34","#286983","#875fb5","#c47874","#3e3a5b","#e5dcd3","#e8829f","#a0d5df","#f6c177","#46afd9","#be96ec","#dd8f8c","#aaa2e2"],backgroundColor:"#faf4ed",cursorColor:"#575279",foregroundColor:"#575279",selectionColor:"#57527980",app:{terminalUIColor:"#7D776F"}},{name:"Cobalt2",colorPaletteOverrides:["#000000","#ff0000","#38de21","#ffe50a","#1460d2","#ff4387","#00bbbb","#cfcfcf","#555555","#ff757a","#69fb79","#fff285","#77adff","#ff92cc","#6bffff","#ffffff"],backgroundColor:"#132738",cursorColor:"#f0cc09",foregroundColor:"#ffffff",selectionColor:"#ffffff80",app:{terminalUIColor:"#8B9CAB"}},{name:"Octocat Dark",colorPaletteOverrides:["#000000","#f78166","#56d364","#e3b341","#6ca4f8","#db61a2","#2b7489","#DADADA","#4d4d4d","#ffb5a5","#69fb79","#ffcf5f","#b0d0ff","#ff92cc","#54d8ff","#ffffff"],backgroundColor:"#101216",cursorColor:"#c9d1d9",foregroundColor:"#8b949e",selectionColor:"#8b949e80",app:{terminalUIColor:"#626873"}},{name:"Octocat Light",colorPaletteOverrides:["#000000","#970b16","#07962a","#f1d007","#0053b9","#e94691","#89d1ec","#dfdddd","#666666","#de0000","#87d5a2","#ffe689","#2e6cba","#ffa29f","#1cfafe","#ffffff"],backgroundColor:"#f4f4f4",cursorColor:"#3f3f3f",foregroundColor:"#3e3e3e",selectionColor:"#3e3e3e80",app:{terminalUIColor:"#A1A1A1"}},{name:"Ayu Dark",colorPaletteOverrides:["#000000","#ff3333","#b8cc52","#dbb012","#36a3d9","#df7a80","#6ceedf","#ababab","#323232","#ff8181","#eafe84","#ffe174","#68d5ff","#ffa3aa","#94fff1","#ffffff"],backgroundColor:"#0f1419",cursorColor:"#f29718",foregroundColor:"#e6e1cf",selectionColor:"#e6e1cf80",app:{terminalUIColor:"#716F67"}},{name:"Ayu Light",colorPaletteOverrides:["#000000","#ff3333","#319900","#f29718","#41a6d9","#e07ead","#1dd1b0","#dfdddd","#323232","#ff5959","#b8e532","#ffc94a","#73d8ff","#ffa3aa","#7ff1cb","#ffffff"],backgroundColor:"#fafafa",cursorColor:"#ff6a00",foregroundColor:"#5c6773",selectionColor:"#5c677380",app:{terminalUIColor:"#A1A1A1"}},{name:"Cyberpunk",colorPaletteOverrides:["#100c1d","#ff7092","#01da7f","#ddd84f","#00a0d6","#be4eee","#28e3cc","#eaeaea","#221b3a","#ff9999","#00f890","#fff787","#28bfe9","#e4a7ff","#95fff2","#ffffff"],backgroundColor:"#332a57",cursorColor:"#21f6bc",foregroundColor:"#e5e5e5",selectionColor:"#e5e5e580",app:{terminalUIColor:"#8174B8"}},{name:"Cyberpunk Scarlet",colorPaletteOverrides:["#272831","#c5123d","#019540","#ffed30","#00b0ff","#c77bff","#4ae3c2","#6e7281","#3f4352","#ff8aa4","#44d884","#fff7ac","#c2ecff","#e6aefe","#7bffe2","#ffffff"],backgroundColor:"#101116",cursorColor:"#00ffc8",foregroundColor:"#ff0055",selectionColor:"#ff005580",app:{terminalUIColor:"#933F5B"}},{name:"Romania Night",colorPaletteOverrides:["#0b141f","#b50011","#124150","#8d562d","#444f60","#5b2928","#80252d","#917d7c","#1d2d41","#de1016","#b16749","#d74d29","#e69148","#c2b1ad","#f7d382","#f5f5ea"],backgroundColor:"#0b141f",cursorColor:"#f7d382",foregroundColor:"#f5f5ea",selectionColor:"#f5f5ea80",app:{terminalUIColor:"#8092A7"}},{name:"Romania Day",colorPaletteOverrides:["#300f0d","#b50011","#1c817b","#b4a667","#798cb1","#cf7751","#fd7d89","#bfb3a4","#5b2c29","#000000","#5bc2b1","#ffcd87","#e69148","#c2b1ad","#ddb763","#fffefd"],backgroundColor:"#f5e8e7",cursorColor:"#d7b25e",foregroundColor:"#632228",selectionColor:"#63222880",app:{terminalUIColor:"#B29A98"}},{name:"Aubergine",colorPaletteOverrides:["#47233b","#ae3120","#4e9a06","#c4a000","#3465a4","#8f6696","#5dbdac","#cdc2b6","#682e59","#e95420","#8ae234","#fce94f","#729fcf","#b188ad","#34e2e2","#eeeeec"],backgroundColor:"#2c001e",cursorColor:"#bbbbbb",foregroundColor:"#eeeeec",selectionColor:"#eeeeec80",app:{terminalUIColor:"#B385A5"}},{name:"Peach Fresh",colorPaletteOverrides:["#220200","#cb4434","#65a06a","#e6a200","#3c5672","#7a1a48","#517e9a","#fddac3","#61201b","#db6355","#7db882","#ffcf5c","#5f7c9d","#d06397","#82adc9","#ffffff"],backgroundColor:"#f5c19e",cursorColor:"#b33a00",foregroundColor:"#520701",selectionColor:"#e6760180",app:{terminalUIColor:"#8A6851"}},{name:"1984 Dark",colorPaletteOverrides:["#2a2a54","#db229d","#89b15c","#ddca34","#377fd2","#c124db","#4497a2","#dedef4","#363666","#fd27b5","#9ed262","#f3e049","#44a6e0","#e42cf4","#6bcdda","#ececf9"],backgroundColor:"#0d1030",cursorColor:"#dedee1",foregroundColor:"#dedee1",selectionColor:"#dedee180",app:{terminalUIColor:"#767698"}},{name:"1984 Light",colorPaletteOverrides:["#1f2022","#f93bb8","#2cb569","#ea9033","#0380d9","#cf29ea","#0698a4","#dedef4","#1f2022","#ff89d6","#59d08e","#ffb76d","#6dc2ff","#e26eff","#3bcfdb","#fbfbfe"],backgroundColor:"#e4ecf4",cursorColor:"#353247",foregroundColor:"#353247",selectionColor:"#35324780",app:{terminalUIColor:"#798DA1"}},{name:"Winter Night",colorPaletteOverrides:["#1e2c37","#933911","#51876b","#cc9867","#3e5f7e","#82658a","#7cb298","#f9edcc","#35424c","#d85751","#7b9a8a","#e7cf91","#6098aa","#b690e6","#94d2b5","#fff9ea"],backgroundColor:"#00192c",cursorColor:"#f8cfa6",foregroundColor:"#e4d5cc",selectionColor:"#e4d5cc80",app:{terminalUIColor:"#869CB2"}},{name:"Winter Day",colorPaletteOverrides:["#685b3f","#9c3b12","#5a9f79","#dca067","#546f88","#5d4864","#2e8e9a","#d1c6af","#857554","#b26848","#7cb596","#ffc48d","#6d8fb0","#d3b3dd","#56b6c2","#fff7e4"],backgroundColor:"#ece3d1",cursorColor:"#5c6370",foregroundColor:"#1a2720",selectionColor:"#abb2bf80",app:{terminalUIColor:"#887F6A"}},{name:"Tokyo Night",colorPaletteOverrides:["#373947","#f7768e","#92ba68","#e8be80","#5d91ff","#a079e5","#7dcfff","#6d759a","#414868","#ff8da2","#b8e785","#ffd292","#739fff","#b288ff","#b1e2ff","#dbe2ff"],backgroundColor:"#1a1b26",cursorColor:"#c0caf5",foregroundColor:"#cdd6ff",selectionColor:"#c0caf580",app:{terminalUIColor:"#6E769A"}},{name:"Tokyo Day",colorPaletteOverrides:["#f4f4fb","#f52a65","#506d31","#a07433","#4782d4","#9854f1","#004b65","#465484","#bfc2d0","#ff6692","#819966","#9f8662","#5898f0","#cba4ff","#00a6de","#b6c4f9"],backgroundColor:"#e1e2e7",cursorColor:"#3760bf",foregroundColor:"#2f54a8",selectionColor:"#3760bf80",app:{terminalUIColor:"#757885"}},{name:"Catppuccin Latte",colorPaletteOverrides:["#5c5f77","#c41037","#389524","#d58515","#3167d2","#d26eb7","#09908e","#acb0be","#7a7d92","#e6224c","#4cb435","#eb9926","#2f75ff","#ff99e3","#1eabb3","#d3d7e3"],backgroundColor:"#eff1f5",cursorColor:"#dc8a78",foregroundColor:"#4c4f69",selectionColor:"#dc8a7880",app:{terminalUIColor:"#858A9C"}},{name:"Catppuccin Mocha",colorPaletteOverrides:["#45475a","#ad626b","#95cb91","#b09e76","#4c82d9","#bc81ae","#71b2aa","#5a5d74","#64698a","#fb99b4","#aeeca9","#ffe7b4","#67bfff","#ffccf1","#a2f3e5","#d7ddf3"],backgroundColor:"#1e1e2e",cursorColor:"#f5e0dc",foregroundColor:"#cdd6f4",selectionColor:"#f5e0dc80",app:{terminalUIColor:"#777790"}},{name:"Diwali",colorPaletteOverrides:["#1e0b34","#ad0656","#00b45d","#f8d203","#4548e1","#e869ea","#00d5dd","#856da2","#5a3f7e","#f02889","#35ef96","#ffe769","#7578ff","#fc99ff","#47eef4","#f8efff"],backgroundColor:"#311652",cursorColor:"#ffa900",foregroundColor:"#fdf6f6",selectionColor:"#ffa90080",app:{terminalUIColor:"#856EA2"}},{name:"Movember",colorPaletteOverrides:["#421400","#a43219","#4b6d21","#caa630","#1e4888","#7c2f4a","#357b6e","#cdba9e","#561900","#d04325","#749c43","#fac04f","#4080e0","#b44c72","#52bca8","#fff1dd"],backgroundColor:"#1f0900",cursorColor:"#e6c03c",foregroundColor:"#ffe7c3",selectionColor:"#3b262680",app:{terminalUIColor:"#8C6D5E"}},{name:"Atom One Dark",colorPaletteOverrides:["#000000","#ca6169","#82a568","#bf8c5d","#56a2e1","#b76ccd","#4e9aa3","#c5cbd6","#5c6370","#e77c84","#b4e294","#e9b17b","#7ec5ff","#db8df2","#64cfdd","#ffffff"],backgroundColor:"#1e2127",cursorColor:"#5c6370",foregroundColor:"#abb2bf",selectionColor:"#abb2bf80",app:{terminalUIColor:"#70798D"}},{name:"Atom One Light",colorPaletteOverrides:["#000000","#e45649","#4c9b4b","#c99525","#4078f2","#a626a4","#0184bc","#b8b9bf","#474747","#ff7468","#74ca72","#dba633","#6a99ff","#c142bf","#00b1fd","#ffffff"],backgroundColor:"#f9f9f9",cursorColor:"#383a42",foregroundColor:"#383a42",selectionColor:"#383a4280",app:{terminalUIColor:"#9395A3"}},{name:"Halloween",colorPaletteOverrides:["#100015","#a31736","#887225","#ff7600","#5c50a6","#6d008d","#ae4fa4","#c7c7c6","#694a71","#ff2e5d","#c3a640","#ffa85e","#8e7cff","#c500ff","#f491ea","#fafafa"],backgroundColor:"#22012b",cursorColor:"#ffa900",foregroundColor:"#e5e5e5",selectionColor:"#ffa90080",app:{terminalUIColor:"#9F84A7"}},{name:"Dia De Muertos",colorPaletteOverrides:["#020018","#eb1670","#23816c","#fb6633","#5c439e","#9d2686","#e29b00","#d2cbb4","#3f3b64","#f63b7b","#28aa8b","#ffa85e","#7a54df","#ff81c7","#ffbe30","#f1ebd9"],backgroundColor:"#fffdf5",cursorColor:"#b33a00",foregroundColor:"#281f63",selectionColor:"#e6760180",app:{terminalUIColor:"#8B8982"}},{name:"Gruvbox Dark",colorPaletteOverrides:["#151515","#cc241d","#98971a","#d79921","#458588","#b16286","#689d6a","#c3b198","#695c50","#fb4934","#b8bb26","#fabd2f","#83a598","#f59db5","#8ec07c","#ebdbb2"],backgroundColor:"#282828",cursorColor:"#ebdbb2",foregroundColor:"#ebdbb2",selectionColor:"#ebdbb280",app:{terminalUIColor:"#908477"}},{name:"Gruvbox Light",colorPaletteOverrides:["#dfd6b1","#9d0006","#79740e","#b57614","#076678","#8f3f71","#427b58","#3c3836","#9d8374","#cc241d","#98971a","#d79921","#458588","#d180a5","#689d69","#7c6f64"],backgroundColor:"#fbf1c7",cursorColor:"#282828",foregroundColor:"#282828",selectionColor:"#28282880",app:{terminalUIColor:"#857D5F"}},{name:"Material Dark",colorPaletteOverrides:["#040404","#b7141f","#457b24","#f6981e","#134eb2","#560088","#0e717c","#efefef","#424242","#e83b3f","#7aba3a","#ffea2e","#54a4f3","#aa4dbc","#26bbd1","#d9d9d9"],backgroundColor:"#232322",cursorColor:"#16afca",foregroundColor:"#e5e5e5",selectionColor:"#e5e5e580",app:{terminalUIColor:"#75756E"}},{name:"Material Light",colorPaletteOverrides:["#000000","#b7141f","#457b24","#f6981e","#134eb2","#560088","#0e717c","#f5f5f5","#424242","#e83b3f","#7aba3a","#ffea2e","#54a4f3","#aa4dbc","#26bbd1","#d9d9d9"],backgroundColor:"#eaeaea",cursorColor:"#16afca",foregroundColor:"#2f2f2f",selectionColor:"#23232280",app:{terminalUIColor:"#747474"}},{name:"Manhattan",colorPaletteOverrides:["#0a0a0a","#840f02","#5e5e5c","#c3a421","#727370","#d1d1cb","#4f4f4c","#aaaba6","#2e2e2c","#d15510","#636361","#d8b741","#777875","#d6d6d0","#696966","#afb0ab"],backgroundColor:"#0a0a0a",cursorColor:"#dfe0db",foregroundColor:"#b8b9b4",selectionColor:"#b8b9b480",app:{terminalUIColor:"#7B7B7B"}},{name:"Plastic World",colorPaletteOverrides:["#581743","#de0000","#99d76d","#f2d66f","#eb8dd7","#9b37ff","#68b9dc","#f6b8ec","#86316b","#ff7ba3","#d3ffaf","#ffe383","#fe9be8","#a65cf0","#b0e6fe","#ffe6f7"],backgroundColor:"#ea56c1",cursorColor:"#bafc8b",foregroundColor:"#ffe9da",selectionColor:"#ffe9da80",app:{terminalUIColor:"#FFD9F2"}},{name:"Basic",colorPaletteOverrides:["#2e2e2e","#c61a1a","#007900","#999900","#0f48cd","#b200b2","#3fc1dd","#acacac","#757575","#ff3e3e","#00b300","#d4d400","#316fff","#ff60c9","#6ce5ff","#cac5c5"],backgroundColor:"#ffffff",cursorColor:"#7f7f7f",foregroundColor:"#000000",selectionColor:"#00000080",app:{terminalUIColor:"#808080"}},{name:"Homebrew",colorPaletteOverrides:["#2e2e2e","#c93434","#348e48","#e09e00","#0031e0","#e235ff","#3fc1dd","#d0cfcf","#5b5b5b","#ff6767","#31ff31","#ffdca8","#4465da","#ff5fc8","#8debff","#e6e6e6"],backgroundColor:"#000000",cursorColor:"#23ff18",foregroundColor:"#00ff00",selectionColor:"#00ff0080",app:{terminalUIColor:"#9D9D9D"}},{name:"Grass",colorPaletteOverrides:["#000000","#9a183c","#6eb95e","#ffa673","#00378a","#771361","#3bcbea","#939393","#393939","#e0692f","#b2ffa2","#ffc27b","#2380c4","#ec88c2","#70e4ff","#ffffff"],backgroundColor:"#13773d",cursorColor:"#8c2800",foregroundColor:"#fff0a5",selectionColor:"#fff0a580",app:{terminalUIColor:"#8ED4AC"}},{name:"Man Page",colorPaletteOverrides:["#383838","#9a183c","#009100","#be6600","#114695","#b72fb9","#3bcbea","#959595","#a7a7a7","#e0692f","#00b400","#ffb571","#3392d6","#ec88c2","#70e4ff","#dadada"],backgroundColor:"#fef49c",cursorColor:"#7f7f7f",foregroundColor:"#000000",selectionColor:"#00000080",app:{terminalUIColor:"#848057"}},{name:"Novel",colorPaletteOverrides:["#000000","#d30f0f","#00933b","#d38b40","#00528e","#cc32cf","#26c3e6","#a6a6a6","#5c5c5c","#e0692f","#00b400","#fff284","#3ba6f3","#ec88c2","#38daff","#f2f2f2"],backgroundColor:"#dfdbc3",cursorColor:"#73635a",foregroundColor:"#3b2322",selectionColor:"#3b232280",app:{terminalUIColor:"#6F6C5A"}},{name:"Ocean",colorPaletteOverrides:["#000000","#881616","#399518","#dda114","#00a3ff","#a83aff","#28ccd6","#d3d3d3","#d2d2d2","#ff7658","#00ff47","#f5c147","#79ceff","#ea6fff","#58f4ff","#ffffff"],backgroundColor:"#224fbc",cursorColor:"#7f7f7f",foregroundColor:"#ffffff",selectionColor:"#ffffff80",app:{terminalUIColor:"#9BB4EE"}},{name:"Pro",colorPaletteOverrides:["#2e2e2e","#c93434","#348e48","#e09e00","#002bc7","#e235ff","#3fc1dd","#d0cfcf","#5b5b5b","#ff6767","#31ff31","#ffdca8","#4465da","#ff5fc8","#8debff","#e6e6e6"],backgroundColor:"#000000",cursorColor:"#4d4d4d",foregroundColor:"#f2f2f2",selectionColor:"#f2f2f280",app:{terminalUIColor:"#9D9D9D"}},{name:"Red Sands",colorPaletteOverrides:["#000000","#d30e0e","#58aa47","#ffa673","#0072ff","#ff57ee","#3bcbea","#e6e6e6","#606060","#e0692f","#b2ffa2","#ffc27b","#0193fc","#ffbce2","#70e4ff","#ffffff"],backgroundColor:"#7a251e",cursorColor:"#ffffff",foregroundColor:"#d7c9a7",selectionColor:"#d7c9a780",app:{terminalUIColor:"#CC8984"}},{name:"Solarized Dark",colorPaletteOverrides:["#11586a","#dc322f","#8ea20a","#b58900","#268bd2","#c41f6f","#2aa198","#e7e0cc","#003b4a","#f15c59","#677558","#7e7a61","#83a8ad","#886cc4","#72b6b6","#fdf6e3"],backgroundColor:"#002b36",cursorColor:"#657779",foregroundColor:"#839496",selectionColor:"#65777980",app:{terminalUIColor:"#5D838D"}},{name:"Solarized Light",colorPaletteOverrides:["#073642","#dc322f","#8fa30a","#b58900","#268bd2","#c41f6f","#2aa198","#e6e0cb","#00252f","#e05319","#667558","#7e7960","#83a8ad","#886cc4","#72b6b6","#fff0c7"],backgroundColor:"#fdf6e3",cursorColor:"#657b83",foregroundColor:"#657b83",selectionColor:"#657b8380",app:{terminalUIColor:"#9C9686"}},{name:"Silver Aerogel",colorPaletteOverrides:["#262424","#ca3535","#09672f","#ffbe73","#004582","#cf41e6","#45adce","#eae9e9","#b6b6b6","#ff7658","#57cc5c","#fff06b","#487bff","#ff60c9","#2cc6f7","#ffffff"],backgroundColor:"#919191",cursorColor:"#d9d9d9",foregroundColor:"#000000",selectionColor:"#00000080",app:{terminalUIColor:"#4D4D4D"}},{name:"Dracula",colorPaletteOverrides:["#000000","#e04242","#45e16c","#e3ec7d","#9b7dc6","#e469b0","#8be9fd","#cac5c5","#4a4a4a","#ff5555","#b5ffc8","#fff9c8","#c8a1ff","#ff8cce","#c8f5ff","#ffffff"],backgroundColor:"#282a36",cursorColor:"#bbbbbb",foregroundColor:"#f8f8f2",selectionColor:"#f8f8f280",app:{terminalUIColor:"#7D8197"}},{name:"Monokai",colorPaletteOverrides:["#1a1a1a","#dd0056","#92d526","#fd971f","#874deb","#ea095a","#48bfd8","#c4c5b5","#625e4c","#ff3382","#a6f12f","#e0d561","#9d65ff","#ff116d","#58d1eb","#f6f6ef"],backgroundColor:"#0c0c0c",cursorColor:"#fc971f",foregroundColor:"#d9d9d9",selectionColor:"#d9d9d980",app:{terminalUIColor:"#86899A"}},{name:"Nord Light",colorPaletteOverrides:["#2c3344","#ae545d","#8ca377","#dabe84","#718fae","#95728e","#78acbb","#d8dee9","#4c556a","#d97982","#a3be8b","#eacb8a","#a4c7e9","#b48dac","#8fbcbb","#eceff4"],backgroundColor:"#e5e9f0",cursorColor:"#88c0d0",foregroundColor:"#414858",selectionColor:"#41485880",app:{terminalUIColor:"#6F7683"}},{name:"Nord Dark",colorPaletteOverrides:["#3b4252","#ae545d","#8ca377","#dabe84","#718fae","#95728e","#78acbb","#d8dee9","#4c556a","#d97982","#a3be8b","#eacb8a","#a4c7e9","#b48dac","#8fbcbb","#eceff4"],backgroundColor:"#2e3440",cursorColor:"#eceff4",foregroundColor:"#d8dee9",selectionColor:"#eceff480",app:{terminalUIColor:"#808A9E"}}],DG=Object.fromEntries(Ibe.map(e=>[e.name.toLowerCase(),e])),vbe=["Source Code Pro","Source Code Pro Medium","Operator Mono Book","Operator Mono Medium","Fira Mono","Fira Mono Medium","Inconsolata-g","Anonymous Pro","Ubuntu Mono","Droid Sans Mono","Dejavu Sans Mono","PT Mono","Andale Mono","Cascadia Code","Fira Code","JetBrains Mono","Meslo"],Cbe="Multiplayer";class bbe{get(t,n,r){const i=t!=null?t.toLowerCase():"",o=this.getAllSchemeObjects();return!t&&n==="auto"?this.getAutoScheme(r):qA(i)?o[i]:qA(n)?o[n]:o[jU]}getAutoScheme(t){return t?this.getAllSchemeObjects()["termius dark"]:this.getAllSchemeObjects()["termius light"]}getMinFontSize(){return mbe}getMaxFontSize(){return ybe}getAllSchemeNames(){return[...Object.keys(this.getAllSchemeObjects()),"auto"]}getAllSchemeObjects(){return DG}getValidForBackendSchemesValues(){return Object.values(this.getAllSchemeObjects())}getFontFamilies(){return vbe}isValidColorSchemeName(t){return qA(t)||t==="auto"}}const KG=new bbe,qA=e=>Object.keys(DG).some(t=>t===e),QU=e=>{switch(e){case"ssh":return"ssh_config";case"mosh":return"ssh_config";case"telnet":return"telnet_config";default:return null}},qU=(e,t,n,r)=>{var l,c;const i=n||"auto",o={from:"global",fromTarget:null,schemeName:i,targetConfigName:t},s=r==null?void 0:r.name.toLowerCase(),a=s&&KG.isValidColorSchemeName(s);if(t){const u=(l=e==null?void 0:e[t])==null?void 0:l.color_scheme;if(u)return o.from="host",o.fromTarget=e,o.schemeName=a?s:u,o;const d=e==null?void 0:e.parentGroups.find(p=>{var m;return!!((m=p[t])!=null&&m.color_scheme)}),g=(c=d==null?void 0:d[t])==null?void 0:c.color_scheme;if(g)return o.from="group",o.fromTarget=d,o.schemeName=a?s:g,o}return a&&s!==i&&(o.schemeName=s),o},Abe=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),Sbe=`${process.env.windir}\\${Abe?"Sysnative":"System32"}`,_be=`${Sbe}\\WindowsPowerShell\\v1.0\\powershell.exe`,wbe=vt.windows()?_be:process.env.SHELL||"";function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function Bbe(e,t){if(ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ebe(e){var t=Bbe(e,"string");return ep(t)=="symbol"?t:t+""}function Rbe(e,t,n){return t=Ebe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(n),!0).forEach(function(r){Rbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var hk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),eS=function(){return Math.random().toString(36).substring(7).split("").join(".")},uv={INIT:"@@redux/INIT"+eS(),REPLACE:"@@redux/REPLACE"+eS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+eS()}};function Gbe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function e5(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kr(1));return n(e5)(e,t)}if(typeof e!="function")throw new Error(kr(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(kr(3));return o}function d(v){if(typeof v!="function")throw new Error(kr(4));if(l)throw new Error(kr(5));var y=!0;return c(),a.push(v),function(){if(y){if(l)throw new Error(kr(6));y=!1,c();var b=a.indexOf(v);a.splice(b,1),s=null}}}function g(v){if(!Gbe(v))throw new Error(kr(7));if(typeof v.type>"u")throw new Error(kr(8));if(l)throw new Error(kr(9));try{l=!0,o=i(o,v)}finally{l=!1}for(var y=s=a,I=0;I<y.length;I++){var b=y[I];b()}return v}function p(v){if(typeof v!="function")throw new Error(kr(10));i=v,g({type:uv.REPLACE})}function m(){var v,y=d;return v={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(kr(11));function A(){b.next&&b.next(u())}A();var N=y(A);return{unsubscribe:N}}},v[hk]=function(){return this},v}return g({type:uv.INIT}),r={dispatch:g,subscribe:d,getState:u,replaceReducer:p},r[hk]=m,r}function Nbe(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:uv.INIT});if(typeof r>"u")throw new Error(kr(12));if(typeof n(void 0,{type:uv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kr(13))})}function em(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),s;try{Nbe(n)}catch(a){s=a}return function(l,c){if(l===void 0&&(l={}),s)throw s;for(var u=!1,d={},g=0;g<o.length;g++){var p=o[g],m=n[p],v=l[p],y=m(v,c);if(typeof y>"u")throw c&&c.type,new Error(kr(14));d[p]=y,u=u||y!==v}return u=u||o.length!==Object.keys(l).length,u?d:l}}function dv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Zbe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(kr(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(l){return l(s)});return o=dv.apply(void 0,a)(i.dispatch),gk(gk({},i),{},{dispatch:o})}}}var fv="NOT_FOUND";function Tbe(e){var t;return{get:function(r){return t&&e(t.key,r)?t.value:fv},put:function(r,i){t={key:r,value:i}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function Wbe(e,t){var n=[];function r(a){var l=n.findIndex(function(u){return t(a,u.key)});if(l>-1){var c=n[l];return l>0&&(n.splice(l,1),n.unshift(c)),c.value}return fv}function i(a,l){r(a)===fv&&(n.unshift({key:a,value:l}),n.length>e&&n.pop())}function o(){return n}function s(){n=[]}return{get:r,put:i,getEntries:o,clear:s}}var kbe=function(t,n){return t===n};function Vbe(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;for(var i=n.length,o=0;o<i;o++)if(!e(n[o],r[o]))return!1;return!0}}function Obe(e,t){var n=typeof t=="object"?t:{equalityCheck:t},r=n.equalityCheck,i=r===void 0?kbe:r,o=n.maxSize,s=o===void 0?1:o,a=n.resultEqualityCheck,l=Vbe(i),c=s===1?Tbe(l):Wbe(s,l);function u(){var d=c.get(arguments);if(d===fv){if(d=e.apply(null,arguments),a){var g=c.getEntries(),p=g.find(function(m){return a(m.value,d)});p&&(d=p.value)}c.put(arguments,d)}return d}return u.clearCache=function(){return c.clear()},u}function Hbe(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(r){return typeof r=="function"})){var n=t.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Fbe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=0,u,d={memoizeOptions:void 0},g=a.pop();if(typeof g=="object"&&(d=g,g=a.pop()),typeof g!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof g+"]");var p=d,m=p.memoizeOptions,v=m===void 0?n:m,y=Array.isArray(v)?v:[v],I=Hbe(a),b=e.apply(void 0,[function(){return c++,g.apply(null,arguments)}].concat(y)),A=e(function(){for(var L=[],G=I.length,W=0;W<G;W++)L.push(I[W].apply(null,arguments));return u=b.apply(null,L),u});return Object.assign(A,{resultFunc:g,memoizedResultFunc:b,dependencies:I,lastResult:function(){return u},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),A};return i}var ve=Fbe(Obe);function t5(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(a){return typeof a=="function"?a(i,o,e):s(a)}}};return t}var n5=t5();n5.withExtraArgument=t5;const pk=n5;var r5=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xbe=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Xd=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Lbe=Object.defineProperty,Ybe=Object.defineProperties,Pbe=Object.getOwnPropertyDescriptors,mk=Object.getOwnPropertySymbols,Xbe=Object.prototype.hasOwnProperty,Ube=Object.prototype.propertyIsEnumerable,yk=function(e,t,n){return t in e?Lbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},cl=function(e,t){for(var n in t||(t={}))Xbe.call(t,n)&&yk(e,n,t[n]);if(mk)for(var r=0,i=mk(t);r<i.length;r++){var n=i[r];Ube.call(t,n)&&yk(e,n,t[n])}return e},tS=function(e,t){return Ybe(e,Pbe(t))},Dbe=function(e,t,n){return new Promise(function(r,i){var o=function(l){try{a(n.next(l))}catch(c){i(c)}},s=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(o,s)};a((n=n.apply(e,t)).next())})},Kbe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dv:dv.apply(null,arguments)};function Mbe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var $be=function(e){r5(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Xd([void 0],n[0].concat(this)))):new(t.bind.apply(t,Xd([void 0],n.concat(this))))},t}(Array),zbe=function(e){r5(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Xd([void 0],n[0].concat(this)))):new(t.bind.apply(t,Xd([void 0],n.concat(this))))},t}(Array);function _w(e){return co(e)?sl(e,function(){}):e}function Jbe(e){return typeof e=="boolean"}function jbe(){return function(t){return Qbe(t)}}function Qbe(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new $be;return n&&(Jbe(n)?r.push(pk):r.push(pk.withExtraArgument(n.extraArgument))),r}var qbe=!0;function e0e(e){var t=jbe(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,s=o===void 0?t():o,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,u=c===void 0?void 0:c,d=n.enhancers,g=d===void 0?void 0:d,p;if(typeof i=="function")p=i;else if(Mbe(i))p=em(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=s;typeof m=="function"&&(m=m(t));var v=Zbe.apply(void 0,m),y=dv;l&&(y=Kbe(cl({trace:!qbe},typeof l=="object"&&l)));var I=new zbe(v),b=I;Array.isArray(g)?b=Xd([v],g):typeof g=="function"&&(b=g(I));var A=y.apply(void 0,b);return e5(p,u,A)}function E(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return cl(cl({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function i5(e){var t={},n=[],r,i={addCase:function(o,s){var a=typeof o=="string"?o:o.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=s,i},addMatcher:function(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function t0e(e){return typeof e=="function"}function dr(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?i5(t):[t,n,r],o=i[0],s=i[1],a=i[2],l;if(t0e(e))l=function(){return _w(e())};else{var c=_w(e);l=function(){return c}}function u(d,g){d===void 0&&(d=l());var p=Xd([o[g.type]],s.filter(function(m){var v=m.matcher;return v(g)}).map(function(m){var v=m.reducer;return v}));return p.filter(function(m){return!!m}).length===0&&(p=[a]),p.reduce(function(m,v){if(v)if(Zs(m)){var y=m,I=v(y,g);return I===void 0?m:I}else{if(co(m))return sl(m,function(b){return v(b,g)});var I=v(m,g);if(I===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return I}return m},d)}return u.getInitialState=l,u}function n0e(e,t){return e+"/"+t}function _n(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:_w(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},s={},a={};i.forEach(function(u){var d=r[u],g=n0e(t,u),p,m;"reducer"in d?(p=d.reducer,m=d.prepare):p=d,o[u]=p,s[g]=p,a[u]=m?E(g,m):E(g)});function l(){var u=typeof e.extraReducers=="function"?i5(e.extraReducers):[e.extraReducers],d=u[0],g=d===void 0?{}:d,p=u[1],m=p===void 0?[]:p,v=u[2],y=v===void 0?void 0:v,I=cl(cl({},g),s);return dr(n,function(b){for(var A in I)b.addCase(A,I[A]);for(var N=0,L=m;N<L.length;N++){var G=L[N];b.addMatcher(G.matcher,G.reducer)}y&&b.addDefaultCase(y)})}var c;return{name:t,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:a,caseReducers:o,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var r0e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",i0e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=r0e[Math.random()*64|0];return t},o0e=["name","message","stack","code"],nS=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ik=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),s0e=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=o0e;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=E(t+"/fulfilled",function(c,u,d,g){return{payload:c,meta:tS(cl({},g||{}),{arg:d,requestId:u,requestStatus:"fulfilled"})}}),o=E(t+"/pending",function(c,u,d){return{payload:void 0,meta:tS(cl({},d||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),s=E(t+"/rejected",function(c,u,d,g,p){return{payload:g,error:(r&&r.serializeError||s0e)(c||"Rejected"),meta:tS(cl({},p||{}),{arg:d,requestId:u,rejectedWithValue:!!g,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,d,g){var p=r!=null&&r.idGenerator?r.idGenerator(c):i0e(),m=new a,v;function y(b){v=b,m.abort()}var I=function(){return Dbe(this,null,function(){var b,A,N,L,G,W,j;return xbe(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),L=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,c,{getState:d,extra:g}),l0e(L)?[4,L]:[3,2];case 1:L=O.sent(),O.label=2;case 2:if(L===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return G=new Promise(function(Ce,Ue){return m.signal.addEventListener("abort",function(){return Ue({name:"AbortError",message:v||"Aborted"})})}),u(o(p,c,(A=r==null?void 0:r.getPendingMeta)==null?void 0:A.call(r,{requestId:p,arg:c},{getState:d,extra:g}))),[4,Promise.race([G,Promise.resolve(n(c,{dispatch:u,getState:d,extra:g,requestId:p,signal:m.signal,abort:y,rejectWithValue:function(Ce,Ue){return new nS(Ce,Ue)},fulfillWithValue:function(Ce,Ue){return new Ik(Ce,Ue)}})).then(function(Ce){if(Ce instanceof nS)throw Ce;return Ce instanceof Ik?i(Ce.payload,p,c,Ce.meta):i(Ce,p,c)})])];case 3:return N=O.sent(),[3,5];case 4:return W=O.sent(),N=W instanceof nS?s(null,p,c,W.payload,W.meta):s(W,p,c),[3,5];case 5:return j=r&&!r.dispatchConditionRejection&&s.match(N)&&N.meta.condition,j||u(N),[2,N]}})})}();return Object.assign(I,{abort:y,requestId:p,arg:c,unwrap:function(){return I.then(a0e)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function a0e(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function l0e(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var MG="listenerMiddleware";E(MG+"/add");E(MG+"/removeAll");E(MG+"/remove");var vk;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);OJ();var o5=function(t){return"@@redux-saga/"+t},c0e=o5("IO"),u0e=o5("MULTICAST"),d0e=function(t){return t==null},rS=function(t){return t!=null},xc=function(t){return typeof t=="function"},s5=function(t){return typeof t=="string"},a5=Array.isArray,Ck=function e(t){return t&&(s5(t)||g0e(t)||xc(t)||a5(t)&&t.every(e))},$G=function(t){return t&&xc(t.take)&&xc(t.close)},f0e=function(t){return xc(t)&&t.hasOwnProperty("toString")},g0e=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},h0e=function(t){return $G(t)&&t[u0e]},p0e=function(t){return t},m0e=function(t){throw t},y0e=function(t){return{value:t,done:!0}};function I0e(e,t,n){t===void 0&&(t=m0e),n===void 0&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:y0e,isSagaIterator:!0};return typeof Symbol<"u"&&(r[Symbol.iterator]=function(){return r}),r}var iS="TAKE",v0e="PUT",C0e="ALL",b0e="CALL",A0e="FORK",S0e="SELECT",ul=function(t,n){var r;return r={},r[c0e]=!0,r.combinator=!1,r.type=t,r.payload=n,r};function l5(e,t){if(e===void 0&&(e="*"),Ck(e))return rS(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),ul(iS,{pattern:e});if(h0e(e)&&rS(t)&&Ck(t))return ul(iS,{channel:e,pattern:t});if($G(e))return rS(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),ul(iS,{channel:e})}function _0e(e,t){return d0e(t)&&(t=e,e=void 0),ul(v0e,{channel:e,action:t})}function w0e(e){var t=ul(C0e,e);return t.combinator=!0,t}function c5(e,t){var n=null,r;return xc(e)?r=e:(a5(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&s5(r)&&xc(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function B0e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ul(b0e,c5(e,n))}function u5(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ul(A0e,c5(e,n))}function E0e(e){e===void 0&&(e=p0e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ul(S0e,{selector:e,args:n})}var bk=function(t){return{done:!0,value:t}},oS={};function R0e(e){return $G(e)?"channel":f0e(e)?String(e):xc(e)?e.name:String(e)}function G0e(e,t,n){var r,i,o,s=t;function a(l,c){if(s===oS)return bk(l);if(c&&!i)throw s=oS,c;r&&r(l);var u=c?e[i](c):e[s]();return s=u.nextState,o=u.effect,r=u.stateUpdater,i=u.errorState,s===oS?bk(l):o}return I0e(a,function(l){return a(null,l)},n)}function N0e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o={done:!1,value:l5(e)},s=function(u){return{done:!1,value:u5.apply(void 0,[t].concat(r,[u]))}},a,l=function(u){return a=u};return G0e({q1:function(){return{nextState:"q2",effect:o,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(a)}}},"q1","takeEvery("+R0e(e)+", "+t.name+")")}function Z0e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return u5.apply(void 0,[N0e,e,t].concat(r))}function*d5(...e){return yield l5(...e)}function*Vi(...e){return yield Z0e(...e)}function*Ud(...e){return yield _0e(...e)}function*Dd(...e){return yield B0e(...e)}function*ww(...e){return yield E0e(...e)}function*f5(...e){return yield w0e(...e)}function T0e(e,t){return E(e,n=>({payload:n,meta:{requestId:Fc(),...t}}))}function Ak(e,t){return E(e,(n,r)=>({payload:n,meta:{requestId:r,...t}}))}function Ie(e){return{request:T0e(`${e}_REQUEST`),success:Ak(`${e}_SUCCESS`),failure:Ak(`${e}_FAILURE`),toString(){return this.request.toString()}}}function W0e(e,t){return d5(({type:n,meta:r})=>(r==null?void 0:r.requestId)===t&&(n===e.success.toString()||n===e.failure.toString()))}function*k0e(e,t){const n=V0e(e,t);yield*Ud(n);const r=yield*W0e(e,n.meta.requestId);if(e.success.match(r))return r.payload;throw r.payload}function V0e(e,t){return e.request(t)}function O0e(e,t,n){if(t instanceof Rse){const r={status:t.status,responseJSON:t.responseJSON,code:e.failure.toString()};return e.failure(r,n.requestId)}return e.failure(t,n.requestId)}function*H0e(e,t,{payload:n,meta:r}){try{const i=yield*Dd(t,n);yield*Ud(e.success(i,r.requestId))}catch(i){yield*Ud(O0e(e,i,r))}}function aI(e,t){return Vi(e.request,H0e,e,t)}const Sk=(e,...t)=>({type:`@analytics/${e}`,payload:t[0]});E("TRIAL_STARTED");E("TRIAL_DISMISSED");E("WELCOME_SCREEN_OPENED");E("NEW_HOST_BUTTON_PRESSED");E("NEW_HOST_CREATED");E("HOST_DELETED");E("NEW_IDENTITY_BUTTON_PRESSED");E("NEW_IDENTITY_SET_UP");E("NEW_SNIPPET_BUTTON_PRESSED");E("NEW_SNIPPET_CREATED");E("SNIPPET_EDITED");E("SNIPPET_DELETED");E("SNIPPET_EXECUTED");E("MAGIC_BUTTON_PRESSED");E("REWRITE_AI_REQUEST_PRESSED");const F0e=E("APP_OPENED");E("FEATURE_DESCRIPTION_SCREEN_OPENED");E("NEW_PORT_FORWARDING_RULE_BUTTON_PRESSED");E("NEW_PORT_FORWARDING_RULE_CREATED");E("IMPORT_STARTED");E("IMPORT_BUTTON_PRESSED");E("IMPORT_FAILED");E("IMPORT_COMPLETED");E("TEAM_PRIVATE_KEY_GENERATED");E("PERSONAL_KEY_SET_GENERATED");E("PASSWORD_CHECKED_WITH_HIBP");E("SET_TEAM_ID");E("CRITICAL_ERROR_RESOLUTION_STARTED");E("TERMINAL_SEARCH_EXECUTED");E("NEW_GROUP_CREATED");E("GROUP_DELETED");E("NEW_GROUP_BUTTON_PRESSED");E("MULTIPLE_CONNECTIONS_INITIATED");const x0e=E("CONNECTION_INITIATED"),L0e=E("CONNECTION_DETAILS_REQUESTED"),Y0e=E("CONNECTION_ESTABLISHED"),P0e=E("CONNECTION_CLOSED"),X0e=E("CONNECTION_FAILED"),U0e=E("EXEC_CHANNEL_OPEN_FAILED"),D0e=E("APP_STARTED");E("SHARED_BUTTON_PRESSED");const K0e=E("NEW_MAIN_WINDOW_OPENED");E("PROMOTION_SHOWN");E("PROMOTION_PRESSED");E("PROMOTION_DISMISSED");E("ENCRYPTION_MIGRATION_WIZARD_VIEW_OPENED");E("HELP_BUTTON_PRESSED");const yg=E("DEEP_LINK_HANDLED");E("NOTIFICATION_RECEIVED");E("NOTIFICATION_SNOOZED");E("CONFIRM_ACCESS_BUTTON_PRESSED");E("CUSTOMER_EXPERIENCE_SURVEY_SHOWN");E("HINT_CLOSED");E("SNIPPETS_PANEL_OPENED");E("ACCOUNT_SET_UP_COMPLETED_SCREEN_OPENED");E("SET_YOUR_DEFAULT_CREDENTIALS_SCREEN_OPENED");E("NEW_IDENTITY_CREATED");E("TEAM_SIDE_ONBOARDING_PRESSED");E("TEAM_SIDE_ONBOARDING_SHOWN");E("TEAM_SIDE_ONBOARDING_CLOSED");E("MULTIPLE_ITEMS_SELECTED");E("EDIT_ENTITY_SCREEN_OPENED");E("AUTHORIZED_KEYS_DOWNLOADED");E("CREATE_MULTIKEY_EXPORT_SCRIPT_BUTTON_PRESSED");E("MULTIKEY_UPDATED");E("SSH_KEY_FOR_MULTIKEY_GENERATED");E("MULTIKEY_CHOSEN");E("ENTITIES_DRAG_AND_DROP_STARTED");E("ENTITIES_DRAG_AND_DROP_COMPLETED");E("MFA_INSTALL_AUTHY_SCREEN_OPENED");E("MFA_CONFIGURE_SCREEN_OPENED");E("MFA_PHONE_NUMBER_SCREEN_OPENED");E("MFA_TOKEN_SCREEN_OPENED");E("MFA_CONFIRM_PASSWORD_SCREEN_OPENED");E("MFA_CHOOSE_PROVIDER_SCREEN_OPENED");E("MFA_COPY_CODE_SCREEN_OPENED");E("MFA_CODE_COPIED");E("MFA_PROVIDER_CHOSEN");E("WHO_IS_TERMIUS_SCREEN_OPENED");E("PRESENCE_ICON_PRESSED");E("ENCRYPTION_PASSWORD_INFO_SCREEN_OPENED");E("SEND_CHOOSE_PLAN_SCREEN_OPENED");E("TEAM_TRIAL_EXTENDED_SCREEN_OPENED");E("CONTEXT_MENU_OPENED");E("SFTP_FILE_OPENED");E("SFTP_UPLOAD_FILE_BUTTON_PRESSED");E("SFTP_DISCARD_FILE_BUTTON_PRESSED");E("SFTP_MODIFIED_FILES_BAR_SHOWN");E("SFTP_FILE_TYPE_ASSOCIATED");E("CREATE_ACCOUNT_SCREEN_OPENED");E("NEW_KEY_BUTTON_PRESSED");E("NEW_KEY_OPTION_SELECTED");E("NEW_CERTIFICATE_BUTTON_PRESSED");E("KEYCHAIN_ITEM_CREATED");E("KEYCHAIN_ITEM_DELETED");Ie("RESTART_BUTTON_PRESSED");E("CHANGELOG_BUTTON_PRESSED");E("CREDENTIALS_SHARING_OPTION_CHOSEN");E("CREDENTIALS_SHARING_SCREEN_OPENED");E("LEARN_MORE_ABOUT_MULTIKEY_BUTTON_PRESSED");E("TAB_CONTEXT_MENU_OPENED");E("NEW_HARDWARE_KEY_CREATED");E("AUTOCOMPLETE");E("SERIAL_CONNECTION_SCREEN_OPENED");E("SERIAL_CONNECTION_PROMO_SCREEN_OPENED");E("COPY_INVITATION_LINK_BUTTON_PRESSED");E("CLOUD_CREDENTIALS_CHECKED");E("CLOUD_SYNC_ACTIVATED");E("SYNC_NOW_BUTTON_PRESSED");E("CLOUD_SYNC_COMPLETED");E("CLOUD_SYNC_FAILED");E("TERMINAL_THEME_CHANGED");E("APPEARANCE_PANEL_OPENED");E("SAVE_APPEARANCE_BUTTON_PRESSED");E("TERMINAL_FONT_CHANGED");E("BROADCAST_INPUT_TOGGLED");E("SUGGEST_TERMINAL_THEME_BUTTON_PRESSED");E("AUTOCOMPLETE_SETTING_CHANGED");E("ENTITY_SELECTED");E("EXPORT_KEY_BUTTON_PRESSED");E("EDIT_HOST_CHAIN_SCREEN_OPENED");E("BUY_NOW_BUTTON_PRESSED");E("TEAM_TRIAL_EXTENSION_OFFER_SCREEN_OPENED");E("DOWNLOAD_TEMPLATE_BUTTON_PRESSED");E("GROUP_SETTINGS_OPENED");E("PORT_FORWARDING_FORM_TYPE_CHANGED");E("CREATE_PORT_FORWARDING_WIZARD_VIEW_OPENED");E("ENTERPRISE_SSO_BUTTON_PRESSED");E("USER_LOGIN_FAILED");E("LOGIN_SCREEN_OPENED");E("FIDO2_KEYGEN_OPTIONS_SUBMITTED");E("FIDO2_PIN_CODE_REQUESTED");E("FIDO2_SSH_KEYS_SELECTED");E("FIDO2_KEY_GENERATION_CONFIRMED");E("FIDO2_DEVICE_SELECTED");E("COPY_HOST_DETAILS_LINK_BUTTON_PRESSED");E("DUPLICATE_BUTTON_PRESSED");E("SSH_KEY_DRAGGED_AND_DROPPED");E("SETUP_CLOUD_SYNC_BUTTON_PRESSED");E("CRYPTO_ERROR_OCCURRED");E("ENABLE_SHARING_DIALOG_SHOWN"),E("ENABLE_SHARING_DIALOG_SUBMITTED"),E("ENABLE_SHARING_DIALOG_POSTPONED"),E("ENABLE_SHARING_DIALOG_CAUGHT_ERROR"),E("ENABLE_SHARING_DIALOG_SUCCEEDED");E("UPGRADE_TO_PRO_FUNNEL_STARTED");E("PRO_PLAN_SCREEN_OPENED");E("SELECT_ENTITY_SCREEN_OPENED");E("IDENTITY_SETTINGS_SCREEN_OPENED");E("KEYWORD_HIGHLIGHTING_SETTING_CHANGED");E("KEYWORD_HIGHLIGHTING_CUSTOMIZATION_BUTTON_PRESSED");E("KEYWORD_HIGHLIGHTING_COLOR_ITEM_PRESSED");E("ADVANCED_SETTINGS_BUTTON_PRESSED");E("SAVE_HISTORY_COMMAND_BUTTON_PRESSED");E("PRODUCTIVITY_PANEL_OPENED");E("COMMANDS_HISTORY_PANEL_OPENED");E("TRIAL_ONBOARDING_STARTED");E("TRIAL_ONBOARDING_BUTTON_PRESSED");E("COPY_DOWNLOAD_LINK_BUTTON_PRESSED");E("TRIAL_ONBOARDING_STEP_COMPLETED");E("TRIAL_ONBOARDING_MINIMIZED");E("TOOLBAR_CHEVRON_BUTTON_PRESSED");E("SUBSCRIPTION_GRACE_PERIOD_NOTIFICATION_SHOWN");E("SUBSCRIPTION_GRACE_PERIOD_NOTIFICATION_SNOOZED");E("BULK_DATA_SHARING_SCREEN_OPENED");E("BULK_SHARING_COMPLETED");E("SUBSCRIPTION_EXPIRED_SCREEN_OPENED");E("CHANGING_VAULT_COMPLETED");E("UPGRADE_BUTTON_PRESSED");E("SESSION_AUTH_METHOD_CHANGED");E("MOVE_ENTITY_BUTTON_PRESSED");E("DOWNGRADED_TO_STARTER_PLAN");E("SET_PASSWORD_SCREEN_OPENED");E("ENTER_PASSWORD_SCREEN_OPENED");E("ENTER_EMAIL_SCREEN_OPENED");E("FORGOT_PASSWORD_BUTTON_PRESSED");E("BOOST_SHELL_PERFORMANCE_INITIATED");E("BOOST_SHELL_PERFORMANCE_SUCCEEDED");E("BOOST_SHELL_PERFORMANCE_FAILED");E("LOGOUT_WARNING_SCREEN_OPENED");E("LOGOUT_BIOMETRIC_KEYS_WARNING_SCREEN_OPENED");E("ACTIVATION_BANNER_SHOWN");E("ACTIVATION_BANNER_CLOSED");E("ENTITY_AUTOCOMPLETE_FIELD_FOCUSED");E("ENTITY_AUTOCOMPLETE_ITEM_PRESSED");E("SHOW_CONFIG_DETAILS_BUTTON_PRESSED");E("NEW_PROTOCOL_ADDED");E("ENTITY_AUTOCOMPLETE_SHOWN");E("NEW_TAG_CREATED");E("WINDOWS_HELLO_AVAILABILITY_DETECTED");E("COMMAND_PALETTE_OPENED");E("COMMAND_PALETTE_STATE_CHANGED");E("COMMAND_PALETTE_ITEM_SELECTED");const gv=(...e)=>localStorage.getItem(...e),Ln=(...e)=>JSON.parse(gv(...e)||"null"),Bw=(...e)=>localStorage.setItem(...e),qn=(e,t)=>Bw(e,JSON.stringify(t)),hs=(...e)=>localStorage.removeItem(...e),M0e=e=>{const t=gv(e);return hs(e),t},sS=e=>{const t=Ln(e);return hs(e),t};function _k(e,t=22){return t==null||t===22?`${e}`:`[${e}]:${t}`}const tp={takeColorScheme:()=>sS("settings"),takeFontSize:()=>sS("settings_font_size"),takeFontFamily:()=>M0e("settings_font_family"),setAllKnownHosts:e=>qn("hosts_keys",e),getAllKnownHosts:()=>Ln("hosts_keys"),clearKnownHosts:()=>hs("hosts_keys"),userJustSawSuggestionToTryPremium:()=>qn("the_date_user_saw_suggestion_to_try_premium",new Date),didUserSeeSuggestionToTryPremium:()=>Ln("the_date_user_saw_suggestion_to_try_premium")!=null?!0:Ln("free_plan_started")===!0?(qn("the_date_user_saw_suggestion_to_try_premium",new Date(0)),hs("free_plan_started"),!0):!1,setDeprecatedWelcomeScreenOpenedEventSend:()=>qn("welcome_screen_open_event_send",!0),isDeprecatedWelcomeScreenOpenedEventSend:()=>!!gv("welcome_screen_open_event_send"),setDeprecatedLocalhost:e=>qn("localhost",e),getDeprecatedLocalhost:()=>Ln("localhost"),removeDeprecatedLocalhost:()=>hs("localhost"),getDeprecatedHostHashForUser(e,t){const n=this.getAllKnownHosts();return n==null?null:n[_k(e,t)]},removeDeprecatedHostHashItem(e){const t=this.getAllKnownHosts();delete t[e],this.setAllKnownHosts(t)},removeDeprecatedHostHashForUser(e,t){return this.removeDeprecatedHostHashItem(_k(e,t))},getKeepAliveInterval:()=>gv("keep_alive_interval"),setKeepAliveInterval:e=>Bw("keep_alive_interval",e),removeKeepAliveInterval:()=>hs("keep_alive_interval"),wasDeprecatedCopyPasteDialogShown:()=>!!Ln("copy_paste_dialog_was_shown"),setDeprecatedCopyPasteDialogWasShown:()=>qn("copy_paste_dialog_was_shown",!0),takeDarkMode:()=>sS("dark_mode"),getDeprecatedLastSyncVersion:()=>Ln("last_sync_version"),setDeprecatedLastSyncVersion:e=>qn("last_sync_version",e),setDeprecatedEncryptionSchema:e=>Bw("encryptionSchema",e),getLocalKey:()=>Ln("localKey"),setLocalKey:e=>qn("localKey",e),getLocalKeyIsReady:()=>!!Ln("local_key_is_ready"),setLocalKeyIsReady:()=>qn("local_key_is_ready",!0),removeLocalKeyIsReady:()=>hs("local_key_is_ready"),getLocalKeyVault:()=>Ln("local_key_vault"),setLocalKeyVault:e=>qn("local_key_vault",e),removeLocalKeyVault:()=>hs("local_key_vault"),getCredential:e=>Ln(e),setCredential:(e,t)=>qn(e,t),removeCredential:e=>hs(e),getMigrationLog:()=>Ln("migrationLog"),setMigrationLog:e=>qn("migrationLog",e),getDeprecatedEnableSharingDialogWasShown:()=>!!Ln("enable_sharing_dialog_was_shown"),setDeprecatedEnableSharingDialogWasShown:()=>qn("enable_sharing_dialog_was_shown",!0),wasDeprecatedNewWindowHintShown:()=>!!Ln("new_window_hint_was_shown"),newDeprecatedWindowHintWasShown:()=>qn("new_window_hint_was_shown",!0),wasDeprecatedSidePanelShortcutHintShown:()=>!!Ln("snippets_panel_shortcut_hint_was_shown"),getDeprecatedBellDotType:()=>Ln("bell_dot_type"),setDeprecatedBellDotType:e=>qn("bell_dot_type",e),getDeprecatedCustomBackendApiUrl:()=>Ln("custom_backend_api_url"),setDeprecatedCustomBackendApiUrl:e=>qn("custom_backend_api_url",e),resetDeprecatedCustomBackendApiUrl:()=>hs("custom_backend_api_url"),getDeprecatedWasTeamTrialInPreferencesOpened:()=>Ln("was_team_trial_in_preferences_opened"),setDeprecatedWasTeamTrialInPreferencesOpened:()=>qn("was_team_trial_in_preferences_opened",!0),getDeprecatedForceToShowTeamTrialPromotions:()=>Ln("force_show_team_trial_promotions"),didDeprecatedUserSentAcquisitionChannel:()=>Ln("user_init_connection"),setDeprecatedUserSentAcquisitionChannel:()=>qn("user_init_connection",!0),getDeprecatedDeviceHasSepSupport:()=>Ln("device_has_sep_support"),setDeprecatedDeviceHasSepSupport:e=>qn("device_has_sep_support",e)},Ew=1e3;class $0e{constructor({dispatch:t,type:n,host:r,userType:i,teamStatus:o,wizardID:s,theme:a,terminalTheme:l,customVaultID:c},u){T(this,"dispatch");T(this,"properties");T(this,"customVaultID");T(this,"lastConnectionOrigin");T(this,"_connected");T(this,"teamStatus");T(this,"_next_safe_sent_event_date");T(this,"setConnectionInstance",t=>{this.connectionInstance=t,this.properties.connectionID=t.id});T(this,"sendEventWithSafeDelayBetweenEventsToAvoidCollision",t=>{const n=this._next_safe_sent_event_date-Date.now();if(n<=0){t(),this._next_safe_sent_event_date=new Date(Date.now()+Ew);return}setTimeout(()=>{t()},n),this._next_safe_sent_event_date=new Date(this._next_safe_sent_event_date.getTime()+Ew)});T(this,"_connectionInitiated",t=>{this._connected=!1;const n=tp.didDeprecatedUserSentAcquisitionChannel()||t==null?void 0:t.acquisitionChannel;tp.setDeprecatedUserSentAcquisitionChannel(),this.lastConnectionOrigin=t==null?void 0:t.connectionOrigin,this.dispatch(x0e({...this.properties,...t,...QA(this.connectionInstance),acquisitionChannel:n,cloudIntegration:ay(this.properties.host),connectionOrigin:this.lastConnectionOrigin,wizardID:this.properties.wizardID,vaultID:this.customVaultID}))});T(this,"connectionInitiated",t=>this.sendEventWithSafeDelayBetweenEventsToAvoidCollision(()=>this._connectionInitiated(t)));T(this,"_connectionDetailsRequested",t=>{this.dispatch(L0e({requestedConnectionProperty:t.property,connectionID:this.properties.connectionID,cloudIntegration:ay(this.properties.host),sessionAuthMethod:t.authMethod,connectionOrigin:this.lastConnectionOrigin,wizardID:this.properties.wizardID}))});T(this,"connectionDetailsRequested",t=>{this.sendEventWithSafeDelayBetweenEventsToAvoidCollision(()=>this._connectionDetailsRequested(t))});T(this,"_connectionFailed",t=>{this._connected||(this._connected=!0,this.dispatch(X0e({...this.properties,...t,...QA(this.connectionInstance),cloudIntegration:ay(this.properties.host),connectionOrigin:this.lastConnectionOrigin,wizardID:this.properties.wizardID,vaultID:this.customVaultID})))});T(this,"connectionFailed",t=>this.sendEventWithSafeDelayBetweenEventsToAvoidCollision(()=>this._connectionFailed(t)));T(this,"_connectionEstablished",t=>{this._connected=!0,this.dispatch(Y0e({...this.properties,...t,...QA(this.connectionInstance),cloudIntegration:ay(this.properties.host),connectionOrigin:this.lastConnectionOrigin,wizardID:this.properties.wizardID,vaultID:this.customVaultID}))});T(this,"connectionEstablished",t=>this.sendEventWithSafeDelayBetweenEventsToAvoidCollision(()=>this._connectionEstablished(t)));T(this,"_connectionClosed",async t=>{this.dispatch(P0e({...t,connectionOrigin:this.lastConnectionOrigin}))});T(this,"connectionClosed",t=>this.sendEventWithSafeDelayBetweenEventsToAvoidCollision(()=>this._connectionClosed(t)));var g,p,m,v,y,I,b,A,N;this.connectionInstance=u,this.dispatch=t;const d=r?new ri(r):null;this.properties={host:d,type:n,teamStatus:o,userType:i,connectionID:this.connectionInstance.id,fido2BasedKey:GG((m=(p=(g=d==null?void 0:d.ssh_config)==null?void 0:g.identity)==null?void 0:p.ssh_key)==null?void 0:m.private_key),sepkey:((I=(y=(v=d==null?void 0:d.ssh_config)==null?void 0:v.identity)==null?void 0:y.hardware_key)==null?void 0:I.isSep())??!1,windowsHelloKey:((N=(A=(b=d==null?void 0:d.ssh_config)==null?void 0:b.identity)==null?void 0:A.hardware_key)==null?void 0:N.isWindowsHello())??!1,wizardID:s,theme:a,terminalTheme:l},this.customVaultID=c,this._connected=!1,this._next_safe_sent_event_date=new Date}}function z0e(e){return e!=null&&["ssh","mosh","telnet"].includes(e)}function J0e(e){return e!=null&&["ssh","mosh"].includes(e)}class zG{constructor(t){T(this,"id");T(this,"protocol");T(this,"host");T(this,"chainedHostOverrides");T(this,"shellPath");T(this,"sshKnownHosts");T(this,"keepaliveInterval");T(this,"errorMsg");T(this,"connectedAt");T(this,"analyticsHelper");T(this,"delegate");T(this,"abortController");T(this,"quick");T(this,"saveAsHost");T(this,"stream");T(this,"featureSet");T(this,"sessionLogData");T(this,"sessionLogAnalytics");T(this,"serialOptions");T(this,"isDetectOSEnabled");T(this,"colorSchemeName");T(this,"bypassRecordingHistory");T(this,"isWorkspaceConnection");T(this,"workspaceTemplateLocalId");T(this,"startupSnippetOverwrite");var n;this.id=t.id??Fc(),this.host=new ri(t.host||void 0),this.chainedHostOverrides=t.chainedHostOverrides,this.protocol=t.protocol||this._getMergedProtocol(),this.keepaliveInterval=t.keepaliveInterval,this.errorMsg=t.errorMsg,this.connectedAt=t.connectedAt,this.shellPath=t.shellPath||wbe,this.sshKnownHosts=t.sshKnownHosts||[],this.stream=t.stream,this.featureSet=t.featureSet??[],this.sessionLogData=t.sessionLogData??void 0,this.sessionLogAnalytics=t.sessionLogAnalytics??void 0,this.serialOptions=t.serialOptions,this.bypassRecordingHistory=!!t.bypassRecordingHistory,this.isWorkspaceConnection=!!t.isWorkspaceConnection,this.workspaceTemplateLocalId=t.workspaceTemplateLocalId,this.startupSnippetOverwrite=t.startupSnippetOverwrite,this.delegate=t.delegate??{onDisconnect(){},onClosed:j0e(r=>{}),onError(r,i,o,s){},onSessionLogFinishedWriting(){},hostVerifier(r,i,o,s,a,l){l(!0)},requestKeyboardInteractive(r,i,o,s,a,l){},async requestSignature(r,i,o){throw new Error("not implemented")},async askUserNecessaryFields(){throw new Error("not implemented")},requestPassphrase(){},handleHostChainConnection(){},onLogMessage(r){},requestSKPresence(r){},updateSKPresence(r){},requestPIN(){},onHostOSDetected(r){},requestChooseKey(){},requestAuthMethod(){},requestDiscoverableSKKeys(){}},this.abortController=t.abortController||new AbortController,this.quick=t.quick||!1,this.saveAsHost=t.saveAsHost??!1,this.analyticsHelper=t.analyticsHelper,this.isDetectOSEnabled=t.isDetectOSEnabled??!1,this.colorSchemeName=t.colorSchemeName,(n=this.analyticsHelper)==null||n.setConnectionInstance(this)}abort(){return this.abortController.abort()}initAnalyticsHelper(t){var u;const n=QU(this.protocol),r=qU(this.host,n),{type:i=gbe(this.protocol),vaults:o}=t,s=r.from==="host"?"yes":"inherited",a=r.schemeName!=="auto"?(u=DG[r.schemeName])==null?void 0:u.name:void 0,l=r.schemeName!=="auto"?s:"no",c=Q0e(this.host,o);this.analyticsHelper=new $0e({...t,type:i,theme:l,terminalTheme:a,host:this.host,customVaultID:c},this)}get signal(){return this.abortController.signal}get displayLabel(){var i,o;if(this.protocol==="local")return"Local Terminal";if(this.protocol==="serial")return((i=this.serialOptions)==null?void 0:i.path)||"Serial";if(this.protocol==="stream")return((o=this.stream)==null?void 0:o.terminalTitle)??Cbe;const{label:t,address:n}=this.host;if(t)return t;const r=this._getConfig();if(r){const{identity:s,port:a}=r,{username:l}=s,{protocol:c}=this;if(l)return c==="telnet"&&a===23||c!=="telnet"&&a===22?n:`${l}@[${n}]:${a}`}return n}get colorScheme(){var n;if(this.protocol==="stream")return((n=this.stream)==null?void 0:n.color_scheme)||null;if(this.colorSchemeName)return this.colorSchemeName;const t=this._getConfig();return t&&t.color_scheme||null}get startupSnippet(){if(this.startupSnippetOverwrite)return this.startupSnippetOverwrite;const t=this._getConfig();return t&&t.startup_snippet||null}get port(){var t;return(t=this._getConfig())==null?void 0:t.port}get username(){var t;return(t=this._getConfig())==null?void 0:t.identity.username}isHostMissingNecessaryFields(){return z0e(this.protocol)&&!this.host.address||J0e(this.protocol)&&!this.username}clone(t){return new zG({...this,...t})}_getMergedProtocol(){return TG(this.host)}_getConfig(){const{protocol:t,host:n}=this;switch(t){case"telnet":return n.getMergedTelnetConfig();case"ssh":case"mosh":return n.getMergedSshConfig();default:return null}}setAsWorkspaceConnection(t){this.isWorkspaceConnection=!0,this.workspaceTemplateLocalId=t}setAsNotWorkspaceConnection(){this.isWorkspaceConnection=!1,this.workspaceTemplateLocalId=void 0}toTransferableObject(){return{...this,abortController:null,delegate:null,analyticsHelper:null,sessionLogAnalytics:null}}}function j0e(e){return VCe(e,(t,...n)=>{t(...n)})}function Q0e(e,t){const n=t.find(r=>r.encryptionKeyId===e.encrypted_with);if(n!=null&&!n.isDefault)return n.id}class tm extends xo{constructor(n={}){super(n);T(this,"children_groups",[]);T(this,"children_hosts",[]);this.children_groups=n.children_groups||[],this.children_hosts=n.children_hosts||[]}clone(n={}){return new tm({...this,...n,changedFields:this.changed(n)})}}const qa=Object.freeze({name:"Personal",id:null,encryptionKeyId:null,role:"Editor",isDefault:!1}),g5=-2,q0e=Object.freeze({id:g5,isDefault:!1,name:"",encryptionKeyId:null}),h5=Object.freeze({is_shared:!1,encrypted_with:null}),JG=-1;function p5(e){const t="encrypted_with"in e?e.encrypted_with:e.encryptionKeyId;return{is_shared:"is_shared"in e?!!e.is_shared:e.id!=null,encrypted_with:t}}class yd extends Gi{constructor(n={}){super(n);T(this,"marker");T(this,"hostnames");T(this,"key");T(this,"comment");T(this,"entityName","knownHost");T(this,"nameInAnalytic","KnownHost");this.marker=n.marker||"",this.hostnames=n.hostnames||"",this.key=n.key||"",this.comment=n.comment||""}static buildHostName(n){return n.port===22?n.address:`[${n.address}]:${n.port}`}static createFromConnection(n,r){const{host:i,port:o,pubKey:s,canEditHost:a}=n;return new yd({...p5(a?r.host:h5),hostnames:yd.buildHostName({address:i,port:o}),key:s})}toOpenSshFormat(){return`${this.hostnames} ${this.key}`}isEqual(n){return this.hostnames===n.hostnames&&this.marker===n.marker&&this.key===n.key&&this.comment===n.comment}clone(n={}){return new yd({...this,...n,changedFields:this.changed(n)})}static is(n){return n.entityName==="knownHost"}}class Rb extends Gi{constructor(n){super(n);T(this,"bound_address");T(this,"host");T(this,"hostname");T(this,"label");T(this,"local_port");T(this,"pf_type");T(this,"remote_port");T(this,"status");T(this,"interaction_date");T(this,"entityName","portForwardingRule");T(this,"nameInAnalytic","PortForwardingRule");this.bound_address=n.bound_address||"127.0.0.1",this.host=new ri(n.host),this.hostname=n.hostname||"",this.label=n.label||"",this.local_port=n.local_port,this.pf_type=n.pf_type,this.remote_port=n.remote_port,this.status=n.status||"disconnected",this.interaction_date=n.interaction_date}get rule(){const n=`From ${this.host.displayLabel}:${this.local_port}`;switch(this.pf_type){case"Dynamic Rule":return n;case"Local Rule":case"Remote Rule":return`${n} to ${this.hostname}:${this.remote_port}`;default:return"Unknown port forwarding type"}}get displayLabel(){return this.label||this.rule}get pfRuleType(){switch(this.pf_type){case"Dynamic Rule":return"dynamic";case"Local Rule":return"local";case"Remote Rule":return"remote";default:return"local"}}get isValid(){var r,i,o;return((r=this.pf_type)==null?void 0:r.toLowerCase().includes("dynamic"))?!!((i=this.host)!=null&&i.local_id&&(this.local_port||this.local_port===0)):!!((o=this.host)!=null&&o.local_id&&this.hostname&&(this.local_port||this.local_port===0)&&(this.remote_port||this.remote_port===0))}getHost(){return this.host}replaceHost(n){var r;return((r=this.host)==null?void 0:r.local_id)===n.original.local_id?(this.host=n.copy,!0):!1}clone(n={}){return new Rb({...this,...n,changedFields:this.changed(n)})}prepareForDuplicate(){this.local_id=void 0,this.id=void 0}static is(n){return n.entityName==="portForwardingRule"}}class eAe{constructor(t){T(this,"local_id");T(this,"id");T(this,"updated_at");T(this,"host");T(this,"latest_used_protocol");T(this,"latest_used_identity");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at,this.host=t.host!=null?new ri(t.host):null,this.latest_used_protocol=t.latest_used_protocol||null,this.latest_used_identity=t.latest_used_identity?new uo(t.latest_used_identity):null}}class Gb{constructor(t={}){T(this,"local_id");T(this,"id");T(this,"updated_at");T(this,"script");T(this,"rating");T(this,"is_shared");T(this,"local_updated_at");T(this,"completed_at");T(this,"exit_code");this.local_id=t.local_id,this.id=t.id,this.updated_at=t.updated_at,this.script=t.script||"",this.is_shared=!!t.is_shared,this.local_updated_at=t.local_updated_at||null,this.rating=t.rating??1,this.completed_at=t.completed_at!=null?new Date(t.completed_at):void 0,this.exit_code=tAe(t.exit_code)}clone(t={}){return new Gb({...this,...t})}}function tAe(e){if(e==null)return;if(typeof e=="number")return e;const t=parseInt(e,10);return Number.isNaN(t)?void 0:t}var nAe=bb;function rAe(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?nAe(e,t,void 0,n):!!r}var iAe=rAe;const oAe=Ht(iAe);var wk=Rf,sAe=Mp,aAe=Er,Bk=wk?wk.isConcatSpreadable:void 0;function lAe(e){return aAe(e)||sAe(e)||!!(Bk&&e&&e[Bk])}var cAe=lAe,uAe=IG,dAe=cAe;function m5(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=dAe),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?m5(a,t-1,n,r,i):uAe(i,a):r||(i[i.length]=a)}return i}var jG=m5,fAe=_a;function gAe(e,t){return function(n,r){if(n==null)return n;if(!fAe(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var hAe=gAe,pAe=xX,mAe=hAe,yAe=mAe(pAe),y5=yAe,IAe=y5,vAe=_a;function CAe(e,t){var n=-1,r=vAe(e)?Array(e.length):[];return IAe(e,function(i,o,s){r[++n]=t(i,o,s)}),r}var bAe=CAe;function AAe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var SAe=AAe,Ek=Vf;function _Ae(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,o=Ek(e),s=t!==void 0,a=t===null,l=t===t,c=Ek(t);if(!a&&!c&&!o&&e>t||o&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var wAe=_Ae,BAe=wAe;function EAe(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=BAe(i[r],o[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return e.index-t.index}var RAe=EAe,aS=Of,GAe=Qp,NAe=wa,ZAe=bAe,TAe=SAe,WAe=gb,kAe=RAe,VAe=tu,OAe=Er;function HAe(e,t,n){t.length?t=aS(t,function(o){return OAe(o)?function(s){return GAe(s,o.length===1?o[0]:o)}:o}):t=[VAe];var r=-1;t=aS(t,WAe(NAe));var i=ZAe(e,function(o,s,a){var l=aS(t,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return TAe(i,function(o,s){return kAe(o,s,n)})}var I5=HAe,FAe=Jp,xAe=_a,LAe=Gf,YAe=Do;function PAe(e,t,n){if(!YAe(n))return!1;var r=typeof t;return(r=="number"?xAe(n)&&LAe(t,n.length):r=="string"&&t in n)?FAe(n[t],e):!1}var v5=PAe,XAe=jG,UAe=I5,DAe=su,Rk=v5,KAe=DAe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Rk(e,t[0],t[1])?t=[]:n>2&&Rk(t[0],t[1],t[2])&&(t=[t[0]]),UAe(e,XAe(t,1),[])}),MAe=KAe;const lh=Ht(MAe);var $Ae=!0;function pn(e,t){if(!$Ae){if(e)return;var n="Warning: "+t;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var zAe=Vf;function JAe(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(s!=null&&(a===void 0?s===s&&!zAe(s):n(s,a)))var a=s,l=o}return l}var jAe=JAe;function QAe(e,t){return e>t}var qAe=QAe,eSe=jAe,tSe=qAe,nSe=wa;function rSe(e,t){return e&&e.length?eSe(e,nSe(t),tSe):void 0}var iSe=rSe;const oSe=Ht(iSe);function sSe(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}var aSe=sSe,lSe=Qp,cSe=aSe;function uSe(e,t){return t.length<2?e:lSe(e,cSe(t,0,-1))}var dSe=uSe,fSe=jp,gSe=BG,hSe=dSe,pSe=Hf;function mSe(e,t){return t=fSe(t,e),e=hSe(e,t),e==null||delete e[pSe(gSe(t))]}var ySe=mSe,ISe=ySe,vSe=Gf,CSe=Array.prototype,bSe=CSe.splice;function ASe(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;vSe(i)?bSe.call(e,i,1):ISe(e,i)}}return e}var SSe=ASe,_Se=wa,wSe=SSe;function BSe(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],o=e.length;for(t=_Se(t);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return wSe(e,i),n}var ESe=BSe;const Id=Ht(ESe);var RSe=nU,GSe=0;function NSe(e){var t=++GSe;return RSe(e)+t}var ZSe=NSe;const Ig=Ht(ZSe),C5=(e,t,n)=>{e.splice(t,0,n)};var KJe;const cd=class cd{constructor(t){T(this,KJe,!0);T(this,"root");this.root=t}getRoot(){return this.root}getFirstLeafId(){return this.getFirstLeaf(this.root).id}getFirstLeaf(t){var n;return(n=t==null?void 0:t.children)!=null&&n.length?this.getFirstLeaf(t==null?void 0:t.children[0]):t}split(t,n,r){return sl(this,o=>{const[s,a]=o.findBranch(d=>d.id===t)??[];if(!s||s.children.length>1)return o;const l={id:n,children:[],layout:"single",size:1/2};if(!a)return s.size=.5,o.root={id:Ig("split-"),layout:r.layout,size:1,children:r.position==="start"?[l,s]:[s,l]},o;if(a.layout!==r.layout){const d={id:s.id,layout:"single",children:[],size:.5};return s.id=Ig("split-"),s.layout=r.layout,s.children=r.position==="start"?[l,d]:[d,l],o}const c=a.children.findIndex(d=>d.id===s.id);l.size=s.size/2,s.size/=2;const u=r.position==="start"?c:c+1;return C5(a.children,u,l),o})}remove(t){return sl(this,r=>{const[i,o,s]=r.findBranch(u=>u.id===t)??[];if(!o||i.children.length>=1)return r;if(o.children.length>2)return Id(o.children,u=>u.id===i.id),TSe(o,i.size),r;const[a,l]=o.children,c=a.id===i.id?l:a;if((s==null?void 0:s.layout)===c.layout){const u=s.children.findIndex(d=>d.id===o.id);return WSe(c,o.size),s.children.splice(u,1,...c.children),r}return o.id=c.id,o.layout=c.layout,o.children=c.children,r})}resize(t,n){return sl(this,i=>{const[o]=i.findBranch(s=>s.id===t)??[];for(const[s,a]of o.children.entries())a.size=n[s]})}has(t){const[n]=this.findBranch(r=>r.id===t)??[];return n!==void 0}single(){return this.root.children.length===0?this.root:void 0}*leafs(){yield*b5(this.root)}numberOfLeafs(){return[...this.leafs()].length}toJSON(){return this.root}mapDepthFirst(t){return A5(this.root,t)}findAdjacentLeaf(t,n){const r=Array.from(this.getBoundingNodeRects().entries()),i=r.find(([c])=>t(c));if(!i)return;const[o,s]=i,a=kSe[n],l=oSe(r,([c,u])=>c===o||c.children.length>0?-1:a(s,u));return l==null?void 0:l[0]}findNodeWithBiggestSquare(t=this.root,n=1,r={id:this.root.id,size:0,layout:"horizontal"},i=new Set){let o={...r};if(i.has(t.id))return o;i.add(t.id);const s=n*t.size;if(s<=o.size)return o;if(t.children.length)for(const a of t.children)o=this.findNodeWithBiggestSquare(a,s,o,i);else{const a=this.getBoundingNodeRects().get(t);Bs(a,`Missing rect for node: ${t.id}`);const l=a.right-a.left,c=a.bottom-a.top,u=l>c?"horizontal":"vertical";o={id:t.id,size:s,layout:u}}return o}splitLayoutBasedParent(t){return t==="horizontal"?"vertical":"horizontal"}getBoundingNodeRects(){const t=new Map;return t.set(this.root,{left:0,top:0,right:1,bottom:1}),Rw(this.root,t),t}findBranch(t,n=this.root,r=[]){if(t(n))return[n,...r];if(n.children.length!==0)for(const i of n.children){const o=this.findBranch(t,i,[n,...r]);if(o)return o}}static buildBalancedTree(t){let n=t.map(i=>({id:i,layout:"single",size:.5,children:[]})),r="horizontal";if(n.length>1)for(;n.length>2;){const i=n.length,o=[];for(let s=0;s<i;s+=2){const a=i-s;if(a===3){o.push({id:Ig("split-"),layout:r,size:s===0?1:1/2,children:[{...n[s],size:1/3},{...n[s+1],size:1/3},{...n[s+2],size:1/3}]});break}else a===1?o.push({...n[s],size:1/2}):o.push({id:Ig("split-"),layout:r,size:1/2,children:[{...n[s],size:1/2},{...n[s+1],size:1/2}]})}r=r==="horizontal"?"vertical":"horizontal",n=o}return t.length===1?new cd({id:t[0],layout:"single",size:1,children:[]}):n.length===1?new cd(n[0]):new cd({id:Ig("split-"),layout:r,size:1,children:n})}static get treeNodeSchema(){return Ae.lazy(()=>Ae.object({id:Ae.string(),layout:Ae.union([Ae.literal("single"),Ae.literal("horizontal"),Ae.literal("vertical")]),size:Ae.number().min(0).max(1),children:Ae.array(cd.treeNodeSchema)}))}};KJe=k_;let el=cd;function*b5(e){if(e.children.length===0)yield e;else for(const t of e.children)yield*b5(t)}function TSe(e,t){Bs(e.layout==="horizontal"||e.layout==="vertical");for(const n of e.children)n.size+=t/e.children.length}function WSe(e,t){Bs(e.layout==="horizontal"||e.layout==="vertical");for(const n of e.children)n.size*=t}function A5(e,{onLeaf:t,onSplit:n}){return e.layout==="single"?t(e):n(e,r=>A5(r,{onLeaf:t,onSplit:n}))}const Rw=(e,t)=>{const n=t.get(e),{layout:r,children:i}=e;if(i.length===0)return;if(Bs(n,`Missing rect for node: ${e.id}`),r==="vertical"){let s=0;for(const a of i){const l=(n.bottom-n.top)*a.size;t.set(a,{left:n.left,right:n.right,top:s,bottom:l+s}),s+=l,Rw(a,t)}return}let o=0;for(const s of i){const a=(n.right-n.left)*s.size;t.set(s,{top:n.top,bottom:n.bottom,left:o,right:o+a}),o+=a,Rw(s,t)}},kSe={upper:(e,t)=>e.top!==t.bottom?-1:ly({min:e.left,max:e.right},{min:t.left,max:t.right}),lower:(e,t)=>e.bottom!==t.top?-1:ly({min:e.left,max:e.right},{min:t.left,max:t.right}),left:(e,t)=>e.left!==t.right?-1:ly({min:e.top,max:e.bottom},{min:t.top,max:t.bottom}),right:(e,t)=>e.right!==t.left?-1:ly({min:e.top,max:e.bottom},{min:t.top,max:t.bottom})},ly=(e,t)=>t.min<=e.max&&e.min<=t.max?Math.min(e.max,t.max)-Math.max(e.min,t.min):0,VSe=Ae.object({layoutRoot:el.treeNodeSchema});class hv{constructor(t){T(this,"layoutRoot");this.layoutRoot=t}buildTreeFromTerminals(t){const n=new el(this.layoutRoot),r=[],i=n.mapDepthFirst({onLeaf:s=>{const{id:a}=s,l=t.find(c=>c.workspaceTerminalId===a);return l?{...s,id:l.id}:(r.push(a),s)},onSplit:(s,a)=>({...s,children:s.children.map(a)})});let o=new el(i);return r.forEach(s=>{o=o.remove(s)}),o}static buildMappedLayoutWithWorkspaceTerminals(t,n){const r=[],i=t.mapDepthFirst({onLeaf:s=>{const{id:a}=s,l=n.find(c=>c.id===a);return!l||!l.workspaceTerminalId?(r.push(a),s):{...s,id:l.workspaceTerminalId}},onSplit:(s,a)=>({...s,children:s.children.map(a)})});let o=new el(i);return r.forEach(s=>{o=o.remove(s)}),new hv(o.getRoot())}removeInvalidTerminals(t){let n=new el(this.layoutRoot);const r=new Set(t.map(o=>o.id)),i=[];for(const o of n.leafs()){const{id:s}=o;r.has(s)||i.push(s)}i.forEach(o=>{n=n.remove(o)}),this.layoutRoot=n.getRoot()}}function Gw(e){return e.length>0}function OSe(e,t){return e.map(t)}class HSe{label(t){return t.label||t.address||""}placeholder(){return"Enter IP or Hostname..."}description(t){return t.description||""}icon(t){return t.os_name||"unknown"}}const FSe=new HSe,xSe=IU({year:"numeric",month:"short",day:"2-digit"}),LSe=IU({hour:"numeric",minute:"numeric",second:"numeric",hour12:!1});function YSe(e){return xSe.format(e)}function PSe(e){return LSe.format(e)}const S5=/\s*\(\d+\)$/;function _5(e,t){let n=0;const r=w5(e);for(const i of t){const o=i.replace(S5,"");r===o&&(n+=1)}return n===0?`${r}`:`${r} (${n})`}const w5=e=>e.replace(S5,"");function XSe(e,t=void 0,n=[]){return e.protocol==="session-log"?USe(e):_5(t||FSe.label(e.host)||e.displayLabel,n)}function USe(e){const t=new Date(e.connectedAt??Date.now()),n=PSe(t),r=YSe(t);return`Log: ${e.displayLabel}, ${n} ${r}`}const DSe=(e,t,n,r,i)=>({id:e,title:t,windowId:n,host:i.host,connectionId:i.id,colorScheme:r,isMultiplayer:!1,isActive:!0,disconnectTimestamp:null,connectionEstablished:!1,connectionProcess:"connecting",osName:i.host.os_name,backspaceMode:i.host.backspace,zoom:null,connectionProtocol:i.protocol,isTerminalWithProFeatures:!1,terminalWithProFeaturesOpenTimestamp:null,localFontFamily:null,autocompleteState:"follows-global-setting",connectionHostLocalId:i.host.local_id,isEditingTitle:!1}),KSe=Ae.object({id:Ae.string(),label:Ae.string().optional(),host:Ae.object({local_id:Ae.number().optional(),id:Ae.number().optional()}).optional(),protocol:Ae.any().optional(),startupSnippet:Ae.any().optional()});class Go{constructor(t){T(this,"id");T(this,"label");T(this,"host");T(this,"protocol");T(this,"startupSnippet");this.id=t.id??Fc(),this.label=t.label,this.host=t.host?new ri(t.host):null,this.protocol=t.protocol??null,this.startupSnippet=t.startupSnippet?new Ys(t.startupSnippet):void 0,this.host&&!this.protocol&&(this.protocol=TG(this.host)??null)}transformToConnection(t){const n=new zG({protocol:this.protocol,quick:!1,isDetectOSEnabled:!1,workspaceTemplateLocalId:t,isWorkspaceConnection:!0});return this.host&&(n.host=this.host),this.startupSnippet&&(n.startupSnippetOverwrite=this.startupSnippet),n}transformToTerminal(t,{colorScheme:n,windowId:r}){const i={...DSe(Fc(),this.label||XSe(t),r,n,t),isActive:!1};return i.workspaceTerminalId=this.id,i}static createFromHistory(t){return new Go({host:t.host,protocol:t.protocol})}static createFromSnippetHost(t,n){return new Go({host:t,protocol:"ssh",startupSnippet:n})}static createFromTerminal(t){var r;const n=w5(t.title)!==((r=t.host)==null?void 0:r.displayLabel);return new Go({id:t.workspaceTerminalId,label:n?t.title:void 0,host:t.host,protocol:t.connectionProtocol})}static isSupportedTerminal(t,n){const{host:r}=t;return!!r&&r.local_id!=null?n.some(s=>s.local_id===(r==null?void 0:r.local_id)):!1}isEqual(t){var n,r;return this.id===t.id&&this.label===t.label&&((n=this.host)==null?void 0:n.local_id)===((r=t.host)==null?void 0:r.local_id)&&this.protocol===t.protocol}clone(t){return new Go({...this,...t})}}const MSe="New Workspace Template",$Se=Ae.object({local_id:Ae.number().optional(),lastTerminalView:Ae.string().optional(),label:Ae.string().optional(),workspaceTerminals:Ae.array(KSe).nonempty(),workspaceLayout:VSe.optional()}),Nh=class Nh extends Gi{constructor(n){var o;super(n);T(this,"lastTerminalView");T(this,"nameInAnalytic");T(this,"label");T(this,"workspaceTerminals");T(this,"workspaceLayout");T(this,"entityName","workspaceTemplate");this.lastTerminalView="focusView",this.label=n.label??"Workspace Template",this.workspaceTerminals=OSe(n.workspaceTerminals,s=>new Go(s));let r=(o=n.workspaceLayout)==null?void 0:o.layoutRoot;r||(r=el.buildBalancedTree(this.workspaceTerminals.map(s=>s.id)).toJSON());const i=new hv(r);i.removeInvalidTerminals(this.workspaceTerminals),this.workspaceLayout=i}get workspaceLayoutRoot(){return this.workspaceLayout.layoutRoot}get displayLabel(){return this.label}getLayoutForTerminals(n){return this.workspaceLayout.buildTreeFromTerminals(n)}setMappedLayoutForActiveTerminals(n,r){this.workspaceLayout=hv.buildMappedLayoutWithWorkspaceTerminals(n,r)}static is(n){return n.entityName==="workspaceTemplate"}clone(n){return new Nh({...this,...n})}compareTemplateWithAnother(n){if(!n||this.local_id!==n.local_id)return{updatedTemplate:this,changeTypes:[],isNewWorkspace:!0};const r=[],i=oAe(lh(this.workspaceTerminals,"id"),lh(n.workspaceTerminals,"id"),(a,l)=>{if(a instanceof Go&&l instanceof Go)return a.isEqual(l)}),o=this.workspaceTerminals.every((a,l)=>{var c;return a.id===((c=n.workspaceTerminals[l])==null?void 0:c.id)}),s=Cs(this.workspaceLayoutRoot,n.workspaceLayoutRoot);if(i||r.push("terminals"),s||r.push("layout"),o||r.push("order"),this.label!==n.label&&r.push("workspace_label"),r.length!==0)return{isNewWorkspace:!1,updatedTemplate:this,changeTypes:r}}static createWorkspaceTemplateFromTab({allTerminals:n,existingHosts:r,workspace:i}){const o=Object.values(n).filter(c=>i.layout.has(c.id)&&Go.isSupportedTerminal(c,r)),s=o.map(Go.createFromTerminal);if(!Gw(s))return;const a=new Nh({local_id:i.templateId,lastTerminalView:"focusView",label:i.title||MSe,workspaceTerminals:s});a.setMappedLayoutForActiveTerminals(i.layout,o);const l=(i.orderedTerminalIds||[]).reduce((c,u)=>{const d=o.find(g=>g.id===u);return d&&c.push(Go.createFromTerminal(d)),c},[]);return Gw(l)?a.workspaceTerminals=l:pn(!1,"Cannot set workspace terminals order because the orderedTerminalIds value contains no valid terminals"),a}};T(Nh,"isValidWorkspaceTemplateInit",Ef($Se));let Nw=Nh;var zSe=_a,JSe=Sa;function jSe(e){return JSe(e)&&zSe(e)}var nm=jSe,QSe=jG,qSe=su,e_e=wG,t_e=nm,n_e=qSe(function(e){return e_e(QSe(e,1,t_e,!0))}),r_e=n_e;const i_e=Ht(r_e);function QG({local_id:e},t){if(e==null)return[];const n=t.find(a=>a.local_id===e);if(n==null)return[];const r=[];let i=[n],o=[];const s=a=>{r.push(a),o=i_e(o,o_e(a,t)).filter(l=>!r.some(c=>c.local_id===l.local_id))};for(;i.length!==0;)i.forEach(s),i=o,o=[];return r}function o_e({local_id:e},t){return e!=null?t.filter(n=>{var r;return((r=n.parent_group)==null?void 0:r.local_id)===e}):[]}function qG(e,t){const n=new Set(e.map(r=>r.local_id));return t.filter(({group:r})=>(r==null?void 0:r.local_id)!=null&&n.has(r.local_id))}const B5=22,eN=["termius","ssh"];function Mg(e,t,n){const r=e.get(t);if(r==null||r==="")throw new Error(n);return decodeURIComponent(r)}function xu(e,t,n){const r=e.get(t);return r==null||r===""||r==="undefined"?n??null:decodeURIComponent(r)}function s_e(e){const t="Cannot open shared host. Missing arguments",n=e.hash.substr(1),r=new URLSearchParams(n),i=Mg(r,"ip",t),o=E5(xu(r,"port",B5.toString())),s=xu(r,"username"),a=xu(r,"label"),l=xu(r,"os"),c=xu(r,"id");return{address:i,port:o,label:a,username:s,os:l,id:c}}function a_e(e){const{hostname:t,port:n,username:r}=e;if(!t)throw new Error("Cannot open host from ssh deeplink. Missing arguments");return{address:t,port:E5(n),username:r||null}}function E5(e){const t=Number.parseInt(e??"",10);return Number.isInteger(t)?t:B5}function l_e(e){const t=e.filter(n=>eN.some(r=>n.startsWith(`${r}://`)));return t.length===1?t[0]:null}function c_e(e){const t=eN.find(n=>e.startsWith(n));if(!t)throw new Error("Unsupported deeplink protocol");return t}function u_e(e,t){if(!e.startsWith(`${t}://`))throw new Error("URI malformed");return decodeURI(e)}function d_e(e){if(!e)throw new Error("Deeplink is empty");const t=c_e(e),n=u_e(e,t);return{url:new URL(n),protocol:t}}var R5={},Kd={},Nb={},Zb={},f_e=HX,g_e=f_e(Object.getPrototypeOf,Object),tN=g_e,h_e=nu,p_e=tN,m_e=Sa,y_e="[object Object]",I_e=Function.prototype,v_e=Object.prototype,G5=I_e.toString,C_e=v_e.hasOwnProperty,b_e=G5.call(Object);function A_e(e){if(!m_e(e)||h_e(e)!=y_e)return!1;var t=p_e(e);if(t===null)return!0;var n=C_e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&G5.call(n)==b_e}var N5=A_e,S_e=nu,__e=Er,w_e=Sa,B_e="[object String]";function E_e(e){return typeof e=="string"||!__e(e)&&w_e(e)&&S_e(e)==B_e}var R_e=E_e;Object.defineProperty(Zb,"__esModule",{value:!0});Zb.isFSA=Z5;Zb.isError=G_e;var Gk={isPlainObject:N5,isString:R_e};function Z5(e){return(0,Gk.isPlainObject)(e)&&(0,Gk.isString)(e.type)&&Object.keys(e).every(N_e)}function G_e(e){return Z5(e)&&e.error===!0}function N_e(e){return["type","payload","error","meta"].indexOf(e)>-1}var Zw={exports:{}},cy={exports:{}},uy={exports:{}},lS,Nk;function Z_e(){if(Nk)return lS;Nk=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*365.25;lS=function(c,u){u=u||{};var d=typeof c;if(d==="string"&&c.length>0)return o(c);if(d==="number"&&isNaN(c)===!1)return u.long?a(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(u){var d=parseFloat(u[1]),g=(u[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function s(c){return c>=r?Math.round(c/r)+"d":c>=n?Math.round(c/n)+"h":c>=t?Math.round(c/t)+"m":c>=e?Math.round(c/e)+"s":c+"ms"}function a(c){return l(c,r,"day")||l(c,n,"hour")||l(c,t,"minute")||l(c,e,"second")||c+" ms"}function l(c,u,d){if(!(c<u))return c<u*1.5?Math.floor(c/u)+" "+d:Math.ceil(c/u)+" "+d+"s"}return lS}var Zk;function T5(){return Zk||(Zk=1,function(e,t){t=e.exports=r.debug=r.default=r,t.coerce=l,t.disable=s,t.enable=o,t.enabled=a,t.humanize=Z_e(),t.instances=[],t.names=[],t.skips=[],t.formatters={};function n(c){var u=0,d;for(d in c)u=(u<<5)-u+c.charCodeAt(d),u|=0;return t.colors[Math.abs(u)%t.colors.length]}function r(c){var u;function d(){if(d.enabled){var g=d,p=+new Date,m=p-(u||p);g.diff=m,g.prev=u,g.curr=p,u=p;for(var v=new Array(arguments.length),y=0;y<v.length;y++)v[y]=arguments[y];v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var I=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(A,N){if(A==="%%")return A;I++;var L=t.formatters[N];if(typeof L=="function"){var G=v[I];A=L.call(g,G),v.splice(I,1),I--}return A}),t.formatArgs.call(g,v);var b=d.log||t.log||console.log.bind(console);b.apply(g,v)}}return d.namespace=c,d.enabled=t.enabled(c),d.useColors=t.useColors(),d.color=n(c),d.destroy=i,typeof t.init=="function"&&t.init(d),t.instances.push(d),d}function i(){var c=t.instances.indexOf(this);return c!==-1?(t.instances.splice(c,1),!0):!1}function o(c){t.save(c),t.names=[],t.skips=[];var u,d=(typeof c=="string"?c:"").split(/[\s,]+/),g=d.length;for(u=0;u<g;u++)d[u]&&(c=d[u].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.substr(1)+"$")):t.names.push(new RegExp("^"+c+"$")));for(u=0;u<t.instances.length;u++){var p=t.instances[u];p.enabled=t.enabled(p.namespace)}}function s(){t.enable("")}function a(c){if(c[c.length-1]==="*")return!0;var u,d;for(u=0,d=t.skips.length;u<d;u++)if(t.skips[u].test(c))return!1;for(u=0,d=t.names.length;u<d;u++)if(t.names[u].test(c))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}}(uy,uy.exports)),uy.exports}var Tk;function T_e(){return Tk||(Tk=1,function(e,t){t=e.exports=T5(),t.log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:a(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}};function r(l){var c=this.useColors;if(l[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+l[0]+(c?"%c ":" ")+"+"+t.humanize(this.diff),!!c){var u="color: "+this.color;l.splice(1,0,u,"color: inherit");var d=0,g=0;l[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(d++,p==="%c"&&(g=d))}),l.splice(g,0,u)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function s(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(s());function a(){try{return window.localStorage}catch{}}}(cy,cy.exports)),cy.exports}var dy={exports:{}},cS,Wk;function W_e(){return Wk||(Wk=1,cS=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1?!0:r<i)}),cS}var uS,kk;function W5(){if(kk)return uS;kk=1;const e=Ri,t=W_e(),n=process.env;let r;t("no-color")||t("no-colors")||t("color=false")?r=!1:(t("color")||t("colors")||t("color=true")||t("color=always"))&&(r=!0),"FORCE_COLOR"in n&&(r=n.FORCE_COLOR.length===0||parseInt(n.FORCE_COLOR,10)!==0);function i(a){return a===0?!1:{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function o(a){if(r===!1)return 0;if(t("color=16m")||t("color=full")||t("color=truecolor"))return 3;if(t("color=256"))return 2;if(a&&!a.isTTY&&r!==!0)return 0;const l=r?1:0;if(process.platform==="win32"){const c=e.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(c[0])>=10&&Number(c[2])>=10586?Number(c[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(c=>c in n)||n.CI_NAME==="codeship"?1:l;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const c=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return c>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:(n.TERM==="dumb",l)}function s(a){const l=o(a);return i(l)}return uS={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)},uS}var Vk;function k_e(){return Vk||(Vk=1,function(e,t){var n=qx,r=gr;t=e.exports=T5(),t.init=d,t.log=l,t.formatArgs=s,t.save=c,t.load=u,t.useColors=o,t.colors=[6,2,3,4,5,1];try{var i=W5();i&&i.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(function(g){return/^debug_/i.test(g)}).reduce(function(g,p){var m=p.substring(6).toLowerCase().replace(/_([a-z])/g,function(y,I){return I.toUpperCase()}),v=process.env[p];return/^(yes|on|true|enabled)$/i.test(v)?v=!0:/^(no|off|false|disabled)$/i.test(v)?v=!1:v==="null"?v=null:v=Number(v),g[m]=v,g},{});function o(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}t.formatters.o=function(g){return this.inspectOpts.colors=this.useColors,r.inspect(g,this.inspectOpts).split(`
`).map(function(p){return p.trim()}).join(" ")},t.formatters.O=function(g){return this.inspectOpts.colors=this.useColors,r.inspect(g,this.inspectOpts)};function s(g){var p=this.namespace,m=this.useColors;if(m){var v=this.color,y="\x1B[3"+(v<8?v:"8;5;"+v),I="  "+y+";1m"+p+" \x1B[0m";g[0]=I+g[0].split(`
`).join(`
`+I),g.push(y+"m+"+t.humanize(this.diff)+"\x1B[0m")}else g[0]=a()+p+" "+g[0]}function a(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function l(){return process.stderr.write(r.format.apply(r,arguments)+`
`)}function c(g){g==null?delete process.env.DEBUG:process.env.DEBUG=g}function u(){return process.env.DEBUG}function d(g){g.inspectOpts={};for(var p=Object.keys(t.inspectOpts),m=0;m<p.length;m++)g.inspectOpts[p[m]]=t.inspectOpts[p[m]]}t.enable(u())}(dy,dy.exports)),dy.exports}typeof process>"u"||process.type==="renderer"?Zw.exports=T_e():Zw.exports=k_e();var V_e=Zw.exports;Object.defineProperty(Nb,"__esModule",{value:!0});Nb.default=L_e;var O_e=Zb,H_e=F_e(V_e);function F_e(e){return e&&e.__esModule?e:{default:e}}var x_e=(0,H_e.default)("electron-redux:validateAction");function L_e(e){return(0,O_e.isFSA)(e)?!0:(x_e("WARNING! Action not FSA-compliant",e),!1)}Object.defineProperty(Kd,"__esModule",{value:!0});Kd.default=Kd.forwardToMainWithParams=void 0;var Y_e=J,P_e=X_e(Nb);function X_e(e){return e&&e.__esModule?e:{default:e}}var k5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(n){return function(r){return function(i){var o=t.blacklist,s=o===void 0?[]:o;if(!(0,P_e.default)(i)||i.meta&&i.meta.scope==="local"||s.some(function(a){return a.test(i.type)}))return r(i);Y_e.ipcRenderer.send("redux-action",i)}}}};Kd.forwardToMainWithParams=k5;var U_e=k5({blacklist:[/^@@/,/^redux-form/]}),D_e=U_e;Kd.default=D_e;var Tb={};Object.defineProperty(Tb,"__esModule",{value:!0});Tb.default=void 0;var K_e=J,M_e=$_e(Nb);function $_e(e){return e&&e.__esModule?e:{default:e}}function pv(){return pv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(this,arguments)}var z_e=function(){return function(t){return function(n){if(!(0,M_e.default)(n)||n.meta&&n.meta.scope==="local")return t(n);var r=pv({},n,{meta:pv({},n.meta,{scope:"local"})}),i=K_e.webContents.getAllWebContents();return i.forEach(function(o){o.send("redux-action",r)}),t(n)}}},J_e=z_e;Tb.default=J_e;var Wb={},rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.ALIASED=void 0;var j_e="ALIASED";rm.ALIASED=j_e;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var Ok={},Q_e={get:function(t){return Ok[t]},set:function(t,n){Ok[t]=n}};im.default=Q_e;Object.defineProperty(Wb,"__esModule",{value:!0});Wb.default=void 0;var Hk=V5(aR),q_e=rm,ewe=V5(im);function V5(e){return e&&e.__esModule?e:{default:e}}function twe(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var nwe=function(t){return function(n){return function(r){if(r.type===q_e.ALIASED){(0,Hk.default)(r.meta&&r.meta.trigger,"No trigger defined");var i=ewe.default.get(r.meta.trigger);(0,Hk.default)(i,"Trigger alias ".concat(r.meta.trigger," not found"));var o=r.payload||[];r=i.apply(void 0,twe(o))}return n(r)}}},rwe=nwe;Wb.default=rwe;var nN={};Object.defineProperty(nN,"__esModule",{value:!0});nN.default=awe;var iwe=rm,owe=swe(im);function swe(e){return e&&e.__esModule?e:{default:e}}function awe(e,t){return owe.default.set(e,t),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return{type:iwe.ALIASED,payload:r,meta:{trigger:e}}}}var rN={};Object.defineProperty(rN,"__esModule",{value:!0});rN.default=cwe;var lwe=J;function cwe(e){rn.getReduxState=function(){return JSON.stringify(e.getState())},lwe.ipcMain.on("redux-action",function(t,n){e.dispatch(n)})}var iN={};Object.defineProperty(iN,"__esModule",{value:!0});iN.default=dwe;var uwe=J;function dwe(e){uwe.ipcRenderer.on("redux-action",function(t,n){e.dispatch(n)})}var oN={};Object.defineProperty(oN,"__esModule",{value:!0});oN.default=gwe;var fwe=J;function gwe(){var e=fwe.remote.getGlobal("getReduxState");if(!e)throw new Error("Could not find reduxState global in main process, did you forget to call replayActionMain?");return JSON.parse(e())}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"forwardToMain",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"forwardToMainWithParams",{enumerable:!0,get:function(){return t.forwardToMainWithParams}}),Object.defineProperty(e,"forwardToRenderer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"triggerAlias",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"createAliasedAction",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"replayActionMain",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"replayActionRenderer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInitialStateRenderer",{enumerable:!0,get:function(){return a.default}});var t=c(Kd),n=l(Tb),r=l(Wb),i=l(nN),o=l(rN),s=l(iN),a=l(oN);function l(u){return u&&u.__esModule?u:{default:u}}function c(u){if(u&&u.__esModule)return u;var d={};if(u!=null){for(var g in u)if(Object.prototype.hasOwnProperty.call(u,g)){var p=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(u,g):{};p.get||p.set?Object.defineProperty(d,g,p):d[g]=u[g]}}return d.default=u,d}})(R5);var dS,Fk;function hwe(){if(Fk)return dS;Fk=1;var e=hJ,t=process.cwd,n=null,r=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return n||(n=t.call(process)),n};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var i=process.chdir;process.chdir=function(s){n=null,i.call(process,s)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,i)}dS=o;function o(s){e.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&a(s),s.lutimes||l(s),s.chown=d(s.chown),s.fchown=d(s.fchown),s.lchown=d(s.lchown),s.chmod=c(s.chmod),s.fchmod=c(s.fchmod),s.lchmod=c(s.lchmod),s.chownSync=g(s.chownSync),s.fchownSync=g(s.fchownSync),s.lchownSync=g(s.lchownSync),s.chmodSync=u(s.chmodSync),s.fchmodSync=u(s.fchmodSync),s.lchmodSync=u(s.lchmodSync),s.stat=p(s.stat),s.fstat=p(s.fstat),s.lstat=p(s.lstat),s.statSync=m(s.statSync),s.fstatSync=m(s.fstatSync),s.lstatSync=m(s.lstatSync),s.chmod&&!s.lchmod&&(s.lchmod=function(y,I,b){b&&process.nextTick(b)},s.lchmodSync=function(){}),s.chown&&!s.lchown&&(s.lchown=function(y,I,b,A){A&&process.nextTick(A)},s.lchownSync=function(){}),r==="win32"&&(s.rename=typeof s.rename!="function"?s.rename:function(y){function I(b,A,N){var L=Date.now(),G=0;y(b,A,function W(j){if(j&&(j.code==="EACCES"||j.code==="EPERM")&&Date.now()-L<6e4){setTimeout(function(){s.stat(A,function(O,Ce){O&&O.code==="ENOENT"?y(b,A,W):N(j)})},G),G<100&&(G+=10);return}N&&N(j)})}return Object.setPrototypeOf&&Object.setPrototypeOf(I,y),I}(s.rename)),s.read=typeof s.read!="function"?s.read:function(y){function I(b,A,N,L,G,W){var j;if(W&&typeof W=="function"){var O=0;j=function(Ce,Ue,$e){if(Ce&&Ce.code==="EAGAIN"&&O<10)return O++,y.call(s,b,A,N,L,G,j);W.apply(this,arguments)}}return y.call(s,b,A,N,L,G,j)}return Object.setPrototypeOf&&Object.setPrototypeOf(I,y),I}(s.read),s.readSync=typeof s.readSync!="function"?s.readSync:function(y){return function(I,b,A,N,L){for(var G=0;;)try{return y.call(s,I,b,A,N,L)}catch(W){if(W.code==="EAGAIN"&&G<10){G++;continue}throw W}}}(s.readSync);function a(y){y.lchmod=function(I,b,A){y.open(I,e.O_WRONLY|e.O_SYMLINK,b,function(N,L){if(N){A&&A(N);return}y.fchmod(L,b,function(G){y.close(L,function(W){A&&A(G||W)})})})},y.lchmodSync=function(I,b){var A=y.openSync(I,e.O_WRONLY|e.O_SYMLINK,b),N=!0,L;try{L=y.fchmodSync(A,b),N=!1}finally{if(N)try{y.closeSync(A)}catch{}else y.closeSync(A)}return L}}function l(y){e.hasOwnProperty("O_SYMLINK")&&y.futimes?(y.lutimes=function(I,b,A,N){y.open(I,e.O_SYMLINK,function(L,G){if(L){N&&N(L);return}y.futimes(G,b,A,function(W){y.close(G,function(j){N&&N(W||j)})})})},y.lutimesSync=function(I,b,A){var N=y.openSync(I,e.O_SYMLINK),L,G=!0;try{L=y.futimesSync(N,b,A),G=!1}finally{if(G)try{y.closeSync(N)}catch{}else y.closeSync(N)}return L}):y.futimes&&(y.lutimes=function(I,b,A,N){N&&process.nextTick(N)},y.lutimesSync=function(){})}function c(y){return y&&function(I,b,A){return y.call(s,I,b,function(N){v(N)&&(N=null),A&&A.apply(this,arguments)})}}function u(y){return y&&function(I,b){try{return y.call(s,I,b)}catch(A){if(!v(A))throw A}}}function d(y){return y&&function(I,b,A,N){return y.call(s,I,b,A,function(L){v(L)&&(L=null),N&&N.apply(this,arguments)})}}function g(y){return y&&function(I,b,A){try{return y.call(s,I,b,A)}catch(N){if(!v(N))throw N}}}function p(y){return y&&function(I,b,A){typeof b=="function"&&(A=b,b=null);function N(L,G){G&&(G.uid<0&&(G.uid+=4294967296),G.gid<0&&(G.gid+=4294967296)),A&&A.apply(this,arguments)}return b?y.call(s,I,b,N):y.call(s,I,N)}}function m(y){return y&&function(I,b){var A=b?y.call(s,I,b):y.call(s,I);return A&&(A.uid<0&&(A.uid+=4294967296),A.gid<0&&(A.gid+=4294967296)),A}}function v(y){if(!y||y.code==="ENOSYS")return!0;var I=!process.getuid||process.getuid()!==0;return!!(I&&(y.code==="EINVAL"||y.code==="EPERM"))}}return dS}var fS,xk;function pwe(){if(xk)return fS;xk=1;var e=Pl.Stream;fS=t;function t(n){return{ReadStream:r,WriteStream:i};function r(o,s){if(!(this instanceof r))return new r(o,s);e.call(this);var a=this;this.path=o,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var l=Object.keys(s),c=0,u=l.length;c<u;c++){var d=l[c];this[d]=s[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){a._read()});return}n.open(this.path,this.flags,this.mode,function(g,p){if(g){a.emit("error",g),a.readable=!1;return}a.fd=p,a.emit("open",p),a._read()})}function i(o,s){if(!(this instanceof i))return new i(o,s);e.call(this),this.path=o,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l];this[u]=s[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=n.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return fS}var gS,Lk;function mwe(){if(Lk)return gS;Lk=1,gS=t;var e=Object.getPrototypeOf||function(n){return n.__proto__};function t(n){if(n===null||typeof n!="object")return n;if(n instanceof Object)var r={__proto__:e(n)};else var r=Object.create(null);return Object.getOwnPropertyNames(n).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))}),r}return gS}var fy,Yk;function ui(){if(Yk)return fy;Yk=1;var e=Rn,t=hwe(),n=pwe(),r=mwe(),i=gr,o,s;typeof Symbol=="function"&&typeof Symbol.for=="function"?(o=Symbol.for("graceful-fs.queue"),s=Symbol.for("graceful-fs.previous")):(o="___graceful-fs.queue",s="___graceful-fs.previous");function a(){}function l(y,I){Object.defineProperty(y,o,{get:function(){return I}})}var c=a;if(i.debuglog?c=i.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(c=function(){var y=i.format.apply(i,arguments);y="GFS4: "+y.split(/\n/).join(`
GFS4: `),console.error(y)}),!e[o]){var u=rn[o]||[];l(e,u),e.close=function(y){function I(b,A){return y.call(e,b,function(N){N||m(),typeof A=="function"&&A.apply(this,arguments)})}return Object.defineProperty(I,s,{value:y}),I}(e.close),e.closeSync=function(y){function I(b){y.apply(e,arguments),m()}return Object.defineProperty(I,s,{value:y}),I}(e.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){c(e[o]),aR.equal(e[o].length,0)})}rn[o]||l(rn,e[o]),fy=d(r(e)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!e.__patched&&(fy=d(e),e.__patched=!0);function d(y){t(y),y.gracefulify=d,y.createReadStream=Re,y.createWriteStream=Oe;var I=y.readFile;y.readFile=b;function b(q,Be,B){return typeof Be=="function"&&(B=Be,Be=null),w(q,Be,B);function w(F,Y,Se,Ge){return I(F,Y,function(ke){ke&&(ke.code==="EMFILE"||ke.code==="ENFILE")?g([w,[F,Y,Se],ke,Ge||Date.now(),Date.now()]):typeof Se=="function"&&Se.apply(this,arguments)})}}var A=y.writeFile;y.writeFile=N;function N(q,Be,B,w){return typeof B=="function"&&(w=B,B=null),F(q,Be,B,w);function F(Y,Se,Ge,ke,dt){return A(Y,Se,Ge,function(ot){ot&&(ot.code==="EMFILE"||ot.code==="ENFILE")?g([F,[Y,Se,Ge,ke],ot,dt||Date.now(),Date.now()]):typeof ke=="function"&&ke.apply(this,arguments)})}}var L=y.appendFile;L&&(y.appendFile=G);function G(q,Be,B,w){return typeof B=="function"&&(w=B,B=null),F(q,Be,B,w);function F(Y,Se,Ge,ke,dt){return L(Y,Se,Ge,function(ot){ot&&(ot.code==="EMFILE"||ot.code==="ENFILE")?g([F,[Y,Se,Ge,ke],ot,dt||Date.now(),Date.now()]):typeof ke=="function"&&ke.apply(this,arguments)})}}var W=y.copyFile;W&&(y.copyFile=j);function j(q,Be,B,w){return typeof B=="function"&&(w=B,B=0),F(q,Be,B,w);function F(Y,Se,Ge,ke,dt){return W(Y,Se,Ge,function(ot){ot&&(ot.code==="EMFILE"||ot.code==="ENFILE")?g([F,[Y,Se,Ge,ke],ot,dt||Date.now(),Date.now()]):typeof ke=="function"&&ke.apply(this,arguments)})}}var O=y.readdir;y.readdir=Ue;var Ce=/^v[0-5]\./;function Ue(q,Be,B){typeof Be=="function"&&(B=Be,Be=null);var w=Ce.test(process.version)?function(Se,Ge,ke,dt){return O(Se,F(Se,Ge,ke,dt))}:function(Se,Ge,ke,dt){return O(Se,Ge,F(Se,Ge,ke,dt))};return w(q,Be,B);function F(Y,Se,Ge,ke){return function(dt,ot){dt&&(dt.code==="EMFILE"||dt.code==="ENFILE")?g([w,[Y,Se,Ge],dt,ke||Date.now(),Date.now()]):(ot&&ot.sort&&ot.sort(),typeof Ge=="function"&&Ge.call(this,dt,ot))}}}if(process.version.substr(0,4)==="v0.8"){var $e=n(y);X=$e.ReadStream,D=$e.WriteStream}var ze=y.ReadStream;ze&&(X.prototype=Object.create(ze.prototype),X.prototype.open=M);var Ee=y.WriteStream;Ee&&(D.prototype=Object.create(Ee.prototype),D.prototype.open=ue),Object.defineProperty(y,"ReadStream",{get:function(){return X},set:function(q){X=q},enumerable:!0,configurable:!0}),Object.defineProperty(y,"WriteStream",{get:function(){return D},set:function(q){D=q},enumerable:!0,configurable:!0});var P=X;Object.defineProperty(y,"FileReadStream",{get:function(){return P},set:function(q){P=q},enumerable:!0,configurable:!0});var oe=D;Object.defineProperty(y,"FileWriteStream",{get:function(){return oe},set:function(q){oe=q},enumerable:!0,configurable:!0});function X(q,Be){return this instanceof X?(ze.apply(this,arguments),this):X.apply(Object.create(X.prototype),arguments)}function M(){var q=this;re(q.path,q.flags,q.mode,function(Be,B){Be?(q.autoClose&&q.destroy(),q.emit("error",Be)):(q.fd=B,q.emit("open",B),q.read())})}function D(q,Be){return this instanceof D?(Ee.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function ue(){var q=this;re(q.path,q.flags,q.mode,function(Be,B){Be?(q.destroy(),q.emit("error",Be)):(q.fd=B,q.emit("open",B))})}function Re(q,Be){return new y.ReadStream(q,Be)}function Oe(q,Be){return new y.WriteStream(q,Be)}var pe=y.open;y.open=re;function re(q,Be,B,w){return typeof B=="function"&&(w=B,B=null),F(q,Be,B,w);function F(Y,Se,Ge,ke,dt){return pe(Y,Se,Ge,function(ot,bt){ot&&(ot.code==="EMFILE"||ot.code==="ENFILE")?g([F,[Y,Se,Ge,ke],ot,dt||Date.now(),Date.now()]):typeof ke=="function"&&ke.apply(this,arguments)})}}return y}function g(y){c("ENQUEUE",y[0].name,y[1]),e[o].push(y),v()}var p;function m(){for(var y=Date.now(),I=0;I<e[o].length;++I)e[o][I].length>2&&(e[o][I][3]=y,e[o][I][4]=y);v()}function v(){if(clearTimeout(p),p=void 0,e[o].length!==0){var y=e[o].shift(),I=y[0],b=y[1],A=y[2],N=y[3],L=y[4];if(N===void 0)c("RETRY",I.name,b),I.apply(null,b);else if(Date.now()-N>=6e4){c("TIMEOUT",I.name,b);var G=b.pop();typeof G=="function"&&G.call(null,A)}else{var W=Date.now()-L,j=Math.max(L-N,1),O=Math.min(j*1.2,100);W>=O?(c("RETRY",I.name,b),I.apply(null,b.concat([N]))):e[o].push(y)}p===void 0&&(p=setTimeout(v,0))}}return fy}var Md;try{Md=ui()}catch{Md=Rn}function ywe(e,t,n){n==null&&(n=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var r=t.fs||Md,i=!0;"throws"in t&&(i=t.throws),r.readFile(e,t,function(o,s){if(o)return n(o);s=H5(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(l){return i?(l.message=e+": "+l.message,n(l)):n(null,null)}n(null,a)})}function Iwe(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var n=t.fs||Md,r=!0;"throws"in t&&(r=t.throws);try{var i=n.readFileSync(e,t);return i=H5(i),JSON.parse(i,t.reviver)}catch(o){if(r)throw o.message=e+": "+o.message,o;return null}}function O5(e,t){var n,r=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,n);return i.replace(/\n/g,r)+r}function vwe(e,t,n,r){r==null&&(r=n,n={}),n=n||{};var i=n.fs||Md,o="";try{o=O5(t,n)}catch(s){r&&r(s,null);return}i.writeFile(e,o,n,r)}function Cwe(e,t,n){n=n||{};var r=n.fs||Md,i=O5(t,n);return r.writeFileSync(e,i,n)}function H5(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var bwe={readFile:ywe,readFileSync:Iwe,writeFile:vwe,writeFileSync:Cwe},Awe=bwe,ch=mt,F5=Rn,x5=parseInt("0777",8),Swe=vd.mkdirp=vd.mkdirP=vd;function vd(e,t,n,r){typeof t=="function"?(n=t,t={}):(!t||typeof t!="object")&&(t={mode:t});var i=t.mode,o=t.fs||F5;i===void 0&&(i=x5),r||(r=null);var s=n||function(){};e=ch.resolve(e),o.mkdir(e,i,function(a){if(!a)return r=r||e,s(null,r);switch(a.code){case"ENOENT":if(ch.dirname(e)===e)return s(a);vd(ch.dirname(e),t,function(l,c){l?s(l,c):vd(e,t,s,c)});break;default:o.stat(e,function(l,c){l||!c.isDirectory()?s(a,r):s(null,r)});break}})}vd.sync=function e(t,n,r){(!n||typeof n!="object")&&(n={mode:n});var i=n.mode,o=n.fs||F5;i===void 0&&(i=x5),r||(r=null),t=ch.resolve(t);try{o.mkdirSync(t,i),r=r||t}catch(a){switch(a.code){case"ENOENT":r=e(ch.dirname(t),n,r),e(t,n,r);break;default:var s;try{s=o.statSync(t)}catch{throw a}if(!s.isDirectory())throw a;break}}return r};const Pk=mt,gy=J,Xk=Awe,_we=Swe;var wwe=function(e){const t=gy.app||gy.remote.app,n=gy.screen||gy.remote.screen;let r,i,o;const s=100,a=Object.assign({file:"window-state.json",path:t.getPath("userData"),maximize:!0,fullScreen:!0},e),l=Pk.join(a.path,a.file);function c(G){return!G.isMaximized()&&!G.isMinimized()&&!G.isFullScreen()}function u(){return r&&Number.isInteger(r.x)&&Number.isInteger(r.y)&&Number.isInteger(r.width)&&r.width>0&&Number.isInteger(r.height)&&r.height>0}function d(){const G=n.getPrimaryDisplay().bounds;r={width:a.defaultWidth||800,height:a.defaultHeight||600,x:0,y:0,displayBounds:G}}function g(G){return r.x>=G.x&&r.y>=G.y&&r.x+r.width<=G.x+G.width&&r.y+r.height<=G.y+G.height}function p(){if(!n.getAllDisplays().some(W=>g(W.bounds)))return d()}function m(){if(!(r&&(u()||r.isMaximized||r.isFullScreen))){r=null;return}u()&&r.displayBounds&&p()}function v(G){if(G=G||i,!!G)try{const W=G.getBounds();c(G)&&(r.x=W.x,r.y=W.y,r.width=W.width,r.height=W.height),r.isMaximized=G.isMaximized(),r.isFullScreen=G.isFullScreen(),r.displayBounds=n.getDisplayMatching(W).bounds}catch{}}function y(G){G&&v(G);try{_we.sync(Pk.dirname(l)),Xk.writeFileSync(l,r)}catch{}}function I(){clearTimeout(o),o=setTimeout(v,s)}function b(){v()}function A(){L(),y()}function N(G){a.maximize&&r.isMaximized&&G.maximize(),a.fullScreen&&r.isFullScreen&&G.setFullScreen(!0),G.on("resize",I),G.on("move",I),G.on("close",b),G.on("closed",A),i=G}function L(){i&&(i.removeListener("resize",I),i.removeListener("move",I),clearTimeout(o),i.removeListener("close",b),i.removeListener("closed",A),i=null)}try{r=Xk.readFileSync(l)}catch{}return m(),r=Object.assign({width:a.defaultWidth||800,height:a.defaultHeight||600},r),{get x(){return r.x},get y(){return r.y},get width(){return r.width},get height(){return r.height},get displayBounds(){return r.displayBounds},get isMaximized(){return r.isMaximized},get isFullScreen(){return r.isFullScreen},saveState:y,unmanage:L,manage:N,resetStateToDefault:d}};const Bwe=Ht(wwe);var Ko=function(t){return"@@redux-saga/"+t},Ewe=Ko("CANCEL_PROMISE"),L5=Ko("CHANNEL_END"),Rwe=Ko("IO"),Uk=Ko("MATCH"),Gwe=Ko("MULTICAST"),Y5=Ko("SAGA_ACTION"),Nwe=Ko("SELF_CANCELLATION"),Zwe=Ko("TASK"),Cd=Ko("TASK_CANCEL"),P5=Ko("TERMINATE"),Twe=Ko("LOCATION");function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mv.apply(this,arguments)}function Wwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var kwe=function(t){return t==null},Vwe=function(t){return t!=null},Wl=function(t){return typeof t=="function"},Owe=function(t){return typeof t=="string"},xf=Array.isArray,kb=function(t){return t&&Wl(t.then)},sN=function(t){return t&&Wl(t.next)&&Wl(t.throw)},Hwe=function(t){return Wl(t)&&t.hasOwnProperty("toString")},Fwe=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},xwe=function(t){return function(){return t}},Lwe=xwe(!0),ti=function(){},Ywe=function(t){return t},aN=function(t,n){mv(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(r){t[r]=n[r]})},Pwe=function(t,n){var r;return(r=[]).concat.apply(r,n.map(t))};function Vb(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Xwe(e){var t=!1;return function(){t||(t=!0,e())}}var Uwe=function(t){throw t},Dwe=function(t){return{value:t,done:!0}};function Dk(e,t,n){t===void 0&&(t=Uwe),n===void 0&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:Dwe,isSagaIterator:!0};return typeof Symbol<"u"&&(r[Symbol.iterator]=function(){return r}),r}function Kwe(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var X5=function(t){return Array.apply(null,new Array(t))},Mwe=function(t){return function(n){return t(Object.defineProperty(n,Y5,{value:!0}))}},U5=function(t){return t===P5},D5=function(t){return t===Cd},K5=function(t){return U5(t)||D5(t)};function M5(e,t){var n=Object.keys(e),r=n.length,i=0,o,s=xf(e)?X5(r):{},a={};function l(){i===r&&(o=!0,t(s))}return n.forEach(function(c){var u=function(g,p){o||(p||K5(g)?(t.cancel(),t(g,p)):(s[c]=g,i++,l()))};u.cancel=ti,a[c]=u}),t.cancel=function(){o||(o=!0,n.forEach(function(c){return a[c].cancel()}))},a}function lN(e){return{name:e.name||"anonymous",location:$5(e)}}function $5(e){return e[Twe]}var $we="Channel's Buffer overflow!",zwe=1,Jwe=3,z5=4;function jwe(e,t){e===void 0&&(e=10);var n=new Array(e),r=0,i=0,o=0,s=function(u){n[i]=u,i=(i+1)%e,r++},a=function(){if(r!=0){var u=n[o];return n[o]=null,r--,o=(o+1)%e,u}},l=function(){for(var u=[];r;)u.push(a());return u};return{isEmpty:function(){return r==0},put:function(u){if(r<e)s(u);else{var d;switch(t){case zwe:throw new Error($we);case Jwe:n[i]=u,i=(i+1)%e,o=i;break;case z5:d=2*e,n=l(),r=n.length,i=n.length,o=0,n.length=d,e=d,s(u);break}}},take:a,flush:l}}var Qwe=function(t){return jwe(t,z5)},qwe="TAKE",eBe="PUT",tBe="ALL",nBe="RACE",rBe="CALL",iBe="CPS",oBe="FORK",sBe="JOIN",aBe="CANCEL",lBe="SELECT",cBe="ACTION_CHANNEL",uBe="CANCELLED",dBe="FLUSH",fBe="GET_CONTEXT",gBe="SET_CONTEXT";function hBe(e){var t,n=e.Symbol;return typeof n=="function"?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var Lu;typeof self<"u"?Lu=self:typeof window<"u"?Lu=window:typeof global<"u"?Lu=global:typeof module<"u"?Lu=module:Lu=Function("return this")();hBe(Lu);var hS=function(){return Math.random().toString(36).substring(7).split("").join(".")};""+hS(),""+hS();function pBe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function mBe(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var J5=[],Ob=0;function yBe(e){try{cN(),e()}finally{q5()}}function j5(e){J5.push(e),Ob||(cN(),eD())}function Q5(e){try{return cN(),e()}finally{eD()}}function cN(){Ob++}function q5(){Ob--}function eD(){q5();for(var e;!Ob&&(e=J5.shift())!==void 0;)yBe(e)}var IBe=function(t){return function(n){return t.some(function(r){return uN(r)(n)})}},vBe=function(t){return function(n){return t(n)}},Kk=function(t){return function(n){return n.type===String(t)}},CBe=function(t){return function(n){return n.type===t}},tD=function(){return Lwe};function uN(e){var t=e==="*"?tD:Owe(e)?Kk:xf(e)?IBe:Hwe(e)?Kk:Wl(e)?vBe:Fwe(e)?CBe:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var uh={type:L5},dN=function(t){return t&&t.type===L5};function bBe(e){e===void 0&&(e=Qwe());var t=!1,n=[];function r(a){if(!t){if(n.length===0)return e.put(a);var l=n.shift();l(a)}}function i(a){t&&e.isEmpty()?a(uh):e.isEmpty()?(n.push(a),a.cancel=function(){Vb(n,a)}):a(e.take())}function o(a){if(t&&e.isEmpty()){a(uh);return}a(e.flush())}function s(){if(!t){t=!0;var a=n;n=[];for(var l=0,c=a.length;l<c;l++){var u=a[l];u(uh)}}}return{take:i,put:r,flush:o,close:s}}function ABe(){var e,t=!1,n=[],r=n,i=function(){r===n&&(r=n.slice())},o=function(){t=!0;var a=n=r;r=[],a.forEach(function(l){l(uh)})};return e={},e[Gwe]=!0,e.put=function(a){if(!t){if(dN(a)){o();return}for(var l=n=r,c=0,u=l.length;c<u;c++){var d=l[c];d[Uk](a)&&(d.cancel(),d(a))}}},e.take=function(a,l){if(l===void 0&&(l=tD),t){a(uh);return}a[Uk]=l,i(),r.push(a),a.cancel=Xwe(function(){i(),Vb(r,a)})},e.close=o,e}function nD(){var e=ABe(),t=e.put;return e.put=function(n){if(n[Y5]){t(n);return}j5(function(){t(n)})},e}var hc=0,ra=1,lI=2,rD=3;function fN(e,t){var n=e[Ewe];Wl(n)&&(t.cancel=n),e.then(t,function(r){t(r,!0)})}var om=0,iD=function(){return++om},Cr;function SBe(e,t){return e.isSagaIterator?{name:e.meta.name}:lN(t)}function _Be(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(sN(i))return i;var o=!1,s=function(l){return o?{value:l,done:!0}:(o=!0,{value:i,done:!kb(i)})};return Dk(s)}catch(a){return Dk(function(){throw a})}}function wBe(e,t,n){var r=t.channel,i=t.action,o=t.resolve;j5(function(){var s;try{s=(r?r.put:e.dispatch)(i)}catch(a){n(a,!0);return}o&&kb(s)?fN(s,n):n(s)})}function BBe(e,t,n){var r=t.channel,i=r===void 0?e.channel:r,o=t.pattern,s=t.maybe,a=function(c){if(c instanceof Error){n(c,!0);return}if(dN(c)&&!s){n(P5);return}n(c)};try{i.take(a,Vwe(o)?uN(o):null)}catch(l){n(l,!0);return}n.cancel=a.cancel}function EBe(e,t,n,r){var i=t.context,o=t.fn,s=t.args,a=r.task;try{var l=o.apply(i,s);if(kb(l)){fN(l,n);return}if(sN(l)){Hb(e,l,a.context,om,lN(o),!1,n);return}n(l)}catch(c){n(c,!0)}}function RBe(e,t,n){var r=t.context,i=t.fn,o=t.args;try{var s=function(l,c){kwe(l)?n(c):n(l,!0)};i.apply(r,o.concat(s)),s.cancel&&(n.cancel=s.cancel)}catch(a){n(a,!0)}}function GBe(e,t,n,r){var i=t.context,o=t.fn,s=t.args,a=t.detached,l=r.task,c=_Be({context:i,fn:o,args:s}),u=SBe(c,o);Q5(function(){var d=Hb(e,c,l.context,om,u,a,void 0);a?n(d):d.isRunning()?(l.queue.addTask(d),n(d)):d.isAborted()?l.queue.abort(d.error()):n(d)})}function NBe(e,t,n,r){var i=r.task,o=function(l,c){if(l.isRunning()){var u={task:i,cb:c};c.cancel=function(){l.isRunning()&&Vb(l.joiners,u)},l.joiners.push(u)}else l.isAborted()?c(l.error(),!0):c(l.result())};if(xf(t)){if(t.length===0){n([]);return}var s=M5(t,n);t.forEach(function(a,l){o(a,s[l])})}else o(t,n)}function pS(e){e.isRunning()&&e.cancel()}function ZBe(e,t,n,r){var i=r.task;t===Nwe?pS(i):xf(t)?t.forEach(pS):pS(t),n()}function TBe(e,t,n,r){var i=r.digestEffect,o=om,s=Object.keys(t);if(s.length===0){n(xf(t)?[]:{});return}var a=M5(t,n);s.forEach(function(l){i(t[l],o,a[l],l)})}function WBe(e,t,n,r){var i=r.digestEffect,o=om,s=Object.keys(t),a=xf(t)?X5(s.length):{},l={},c=!1;s.forEach(function(u){var d=function(p,m){c||(m||K5(p)?(n.cancel(),n(p,m)):(n.cancel(),c=!0,a[u]=p,n(a)))};d.cancel=ti,l[u]=d}),n.cancel=function(){c||(c=!0,s.forEach(function(u){return l[u].cancel()}))},s.forEach(function(u){c||i(t[u],o,l[u],u)})}function kBe(e,t,n){var r=t.selector,i=t.args;try{var o=r.apply(void 0,[e.getState()].concat(i));n(o)}catch(s){n(s,!0)}}function VBe(e,t,n){var r=t.pattern,i=t.buffer,o=bBe(i),s=uN(r),a=function c(u){dN(u)||e.channel.take(c,s),o.put(u)},l=o.close;o.close=function(){a.cancel(),l()},e.channel.take(a,s),n(o)}function OBe(e,t,n,r){var i=r.task;n(i.isCancelled())}function HBe(e,t,n){t.flush(n)}function FBe(e,t,n,r){var i=r.task;n(i.context[t])}function xBe(e,t,n,r){var i=r.task;aN(i.context,t),n()}var LBe=(Cr={},Cr[qwe]=BBe,Cr[eBe]=wBe,Cr[tBe]=TBe,Cr[nBe]=WBe,Cr[rBe]=EBe,Cr[iBe]=RBe,Cr[oBe]=GBe,Cr[sBe]=NBe,Cr[aBe]=ZBe,Cr[lBe]=kBe,Cr[cBe]=VBe,Cr[uBe]=OBe,Cr[dBe]=HBe,Cr[fBe]=FBe,Cr[gBe]=xBe,Cr);function YBe(e,t,n){var r=[],i,o=!1;l(e);var s=function(){return r};function a(u){t(),c(),n(u,!0)}function l(u){r.push(u),u.cont=function(d,g){o||(Vb(r,u),u.cont=ti,g?a(d):(u===e&&(i=d),r.length||(o=!0,n(i))))}}function c(){o||(o=!0,r.forEach(function(u){u.cont=ti,u.cancel()}),r=[])}return{addTask:l,cancelAll:c,abort:a,getTasks:s}}function oD(e,t){return e+"?"+t}function PBe(e){var t=$5(e);if(t){var n=t.code,r=t.fileName,i=t.lineNumber,o=n+"  "+oD(r,i);return o}return""}function Mk(e){var t=e.name,n=e.location;return n?t+"  "+oD(n.fileName,n.lineNumber):t}function XBe(e){var t=Pwe(function(n){return n.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var gN=null,dh=[],UBe=function(t){t.crashedEffect=gN,dh.push(t)},sD=function(){gN=null,dh.length=0},DBe=function(t){gN=t},KBe=function(){var t=dh[0],n=dh.slice(1),r=t.crashedEffect?PBe(t.crashedEffect):null,i="The above error occurred in task "+Mk(t.meta)+(r?` 
 when executing effect `+r:"");return[i].concat(n.map(function(o){return"    created by "+Mk(o.meta)}),[XBe(dh)]).join(`
`)};function MBe(e,t,n,r,i,o,s){var a;s===void 0&&(s=ti);var l=hc,c,u,d=null,g=[],p=Object.create(n),m=YBe(t,function(){g.push.apply(g,m.getTasks().map(function(L){return L.meta.name}))},y);function v(){l===hc&&(l=ra,m.cancelAll(),y(Cd,!1))}function y(N,L){if(!L)N===Cd?l=ra:l!==ra&&(l=rD),c=N,d&&d.resolve(N);else{if(l=lI,UBe({meta:i,cancelledTasks:g}),A.isRoot){var G=KBe();sD(),e.onError(N,{sagaStack:G})}u=N,d&&d.reject(N)}A.cont(N,L),A.joiners.forEach(function(W){W.cb(N,L)}),A.joiners=null}function I(N){aN(p,N)}function b(){return d||(d=mBe(),l===lI?d.reject(u):l!==hc&&d.resolve(c)),d.promise}var A=(a={},a[Zwe]=!0,a.id=r,a.meta=i,a.isRoot=o,a.context=p,a.joiners=[],a.queue=m,a.cancel=v,a.cont=s,a.end=y,a.setContext=I,a.toPromise=b,a.isRunning=function(){return l===hc},a.isCancelled=function(){return l===ra||l===hc&&t.status===ra},a.isAborted=function(){return l===lI},a.result=function(){return c},a.error=function(){return u},a);return A}function Hb(e,t,n,r,i,o,s){var a=e.finalizeRunEffect(p);g.cancel=ti;var l={meta:i,cancel:d,status:hc},c=MBe(e,l,n,r,i,o,s),u={task:c,digestEffect:m};function d(){l.status===hc&&(l.status=ra,g(Cd))}return s&&(s.cancel=c.cancel),g(),c;function g(v,y){try{var I;y?(I=t.throw(v),sD()):D5(v)?(l.status=ra,g.cancel(),I=Wl(t.return)?t.return(Cd):{done:!0,value:Cd}):U5(v)?I=Wl(t.return)?t.return():{done:!0}:I=t.next(v),I.done?(l.status!==ra&&(l.status=rD),l.cont(I.value)):m(I.value,r,g)}catch(b){if(l.status===ra)throw b;l.status=lI,l.cont(b,!0)}}function p(v,y,I){if(kb(v))fN(v,I);else if(sN(v))Hb(e,v,c.context,y,i,!1,I);else if(v&&v[Rwe]){var b=LBe[v.type];b(e,v.payload,I,u)}else I(v)}function m(v,y,I,b){b===void 0&&(b="");var A=iD();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:A,parentEffectId:y,label:b,effect:v});var N;function L(G,W){N||(N=!0,I.cancel=ti,e.sagaMonitor&&(W?e.sagaMonitor.effectRejected(A,G):e.sagaMonitor.effectResolved(A,G)),W&&DBe(v),I(G,W))}L.cancel=ti,I.cancel=function(){N||(N=!0,L.cancel(),L.cancel=ti,e.sagaMonitor&&e.sagaMonitor.effectCancelled(A))},a(v,A,L)}}function $Be(e,t){for(var n=e.channel,r=n===void 0?nD():n,i=e.dispatch,o=e.getState,s=e.context,a=s===void 0?{}:s,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,d=u===void 0?Kwe:u,g=arguments.length,p=new Array(g>2?g-2:0),m=2;m<g;m++)p[m-2]=arguments[m];var v=t.apply(void 0,p),y=iD();l&&(l.rootSagaStarted=l.rootSagaStarted||ti,l.effectTriggered=l.effectTriggered||ti,l.effectResolved=l.effectResolved||ti,l.effectRejected=l.effectRejected||ti,l.effectCancelled=l.effectCancelled||ti,l.actionDispatched=l.actionDispatched||ti,l.rootSagaStarted({effectId:y,saga:t,args:p}));var I;if(c){var b=pBe.apply(void 0,c);I=function(L){return function(G,W,j){var O=function(Ue){return L(Ue,W,j)};return b(O)(G)}}}else I=Ywe;var A={channel:r,dispatch:Mwe(i),getState:o,sagaMonitor:l,onError:d,finalizeRunEffect:I};return Q5(function(){var N=Hb(A,v,a,y,lN(t),!0,void 0);return l&&l.effectResolved(y,N),N})}function zBe(e){var t=e===void 0?{}:e,n=t.context,r=n===void 0?{}:n,i=t.channel,o=i===void 0?nD():i,s=t.sagaMonitor,a=Wwe(t,["context","channel","sagaMonitor"]),l;function c(u){var d=u.getState,g=u.dispatch;return l=$Be.bind(null,mv({},a,{context:r,channel:o,dispatch:g,getState:d,sagaMonitor:s})),function(p){return function(m){s&&s.actionDispatched&&s.actionDispatched(m);var v=p(m);return o.put(m),v}}}return c.run=function(){return l.apply(void 0,arguments)},c.setContext=function(u){aN(r,u)},c}const hN=E("SET_AUTHORIZED");E("OPEN_MULTIPLAYER_TERMINAL");const JBe=E("OPEN_SHARED_HOST"),jBe=E("OPEN_SSH_HOST");E("OPEN_CONNECTIONS");const QBe=E("OPEN_CONNECTIONS_FROM_DEEPLINK");E("OPEN_TERMINAL_NEW_IDENTITY_FORM");const qBe=E("OPEN_MULTIPLAYER_TERMINAL_DEEPLINK"),eEe=E("UPDATE_ENTITIES");Ie("UPDATE_HISTORY_ENTITIES");Ie("SET_SNIPPET");Ie("DELETE_SNIPPETS");E("DUPLICATE_SNIPPETS");Ie("MOVE_SNIPPET_TO_SNIPPETS_PACKAGE");Ie("GENERATE_SCRIPT");Ie("SET_COMMAND_EXECUTED");Ie("SET_SNIPPETS_PACKAGE");Ie("DELETE_SNIPPETS_PACKAGES");Ie("SET_HARDWARE_KEYS");Ie("GENERATE_SEP_KEY");E("CLEANUP_SEP_KEYS");Ie("SET_SSHKEY");Ie("GENERATE_KEY");Ie("DELETE_SSHKEYS_AND_IDENTITIES");Ie("SAVE_PORT_FORWARDING_RULE");Ie("SAVE_PORT_FORWARDING_RULE_INTERACTION");Ie("DELETE_PORT_FORWARDING_RULES");Ie("DUPLICATE_PORT_FORWARDING_RULES");Ie("SET_IDENTITY");Ie("DELETE_HOSTS_AND_GROUPS");Ie("SAVE_GROUP");Ie("SAVE_HOST_WITH_GROUP");Ie("SAVE_HOST");Ie("DUPLICATE_HOSTS");E("RESOLVE_DUPLICATES");const tEe=E("SAVE_HOST_OS");Ie("SAVE_TAG");Ie("DELETE_TAG");E("REPLACE_KNOWN_HOST");E("ADD_KNOWN_HOST");E("DELETE_KNOWN_HOSTS");Ie("PUSH_HISTORY");Ie("DEACTIVATE_HISTORY");const nEe=E("DEACTIVATE_HISTORY_BY_WINDOW_ID");Ie("START_SESSION_LOG_WRITING");Ie("PREPARE_SESSION_LOGS_UPLOAD");Ie("SAVE_HOST_LATEST_ACTIVITY");Ie("DELETE_HOST_LATEST_ACTIVITY");Ie("SAVE_WORKSPACE_TEMPLATE");Ie("DELETE_WORKSPACE_TEMPLATE");Ie("HAS_SYNCABLE_ENTITIES");Ie("IMPORT_ENTITIES");Ie("MOVE_HOSTS_AND_GROUPS_TO_GROUP");Ie("SHARE_ENTITIES_IN_TEAM_TRIAL_ONBOARDING");Ie("SAVE_HISTORY_COMMANDS");Ie("DELETE_HISTORY_COMMANDS");Ie("DELETE_SESSION_LOGS_BY_VAULT");E("ENTITIES_REMOVED");const pN=E("WINDOW_CREATED"),mN=E("WINDOW_DESTROYED"),rEe=E("WINDOW_TITLE_CHANGED"),iEe=Ie("REQUEST_PRIMARY_WINDOW_FOR_AN_ACTION");if(process.type!=="browser")throw new Error('"@/lib/electron" can be required only in the browser (Main) process');function aD(e,t){return`https://account.termius.com/sso/desktop?provider=${e}&request=${t}`}const oEe=()=>vt.windows()?"win":vt.macOS()?"mac":"linux";oEe();const sEe=vt.windows();vt.windowsStore();const lD=vt.macOS(),aEe=vt.linux(),lEe=vt.mas(),mS=vt.mas()||vt.windowsStore()&&vt.ltRelease("10.0.14391"),cEe="auth.macSingleSignIn";function uEe(){J.ipcMain.handle(cEe,async(e,t)=>{var r;const n=(r=J.BrowserWindow.fromWebContents(e.sender))==null?void 0:r.getNativeWindowHandle();if(n==null)throw new Error("No window found");try{return t==="apple"&&lEe?{type:"success",appleIdToken:await dEe(n),firebaseToken:void 0}:{type:"success",firebaseToken:await fEe(t,n),appleIdToken:void 0}}catch(i){const{errorDomain:o,OUTDATED_OPERATING_SYSTEM:s}=require("@termius/mac-single-sign-in");if(Ef(Ae.instanceof(Error).and(Ae.object({error_domain:Ae.literal(o),error_code:Ae.literal(s)})))(i))return{type:"fallback"};throw i}})}async function dEe(e){const{authenticate:t}=require("@termius/mac-single-sign-in"),n=Ns.randomBytes(32).toString("hex"),r=Ns.createHash("sha256").update(n).digest("hex");return{token:await t(r,e),nonce:n}}async function fEe(e,t){const{authenticateUserThroughWebService:n}=require("@termius/mac-single-sign-in"),r=await n(aD(e,"native"),"termius",t),i=new URL(r).searchParams.get("firebaseToken");if(i==null)throw new Error("missing argument");return i}function gEe(e,t){return e==null||e!==e?t:e}var hEe=gEe;const cD=Ht(hEe);function pEe(e){const t=e.hash.substr(1),n=new URLSearchParams(t),r=Mg(n,"peerId",hy("peerId")),i=Mg(n,"pwd",hy("pwd")),o=xu(n,"terminalTitle"),s=Mg(n,"connectionId",hy("connectionId")),a=Mg(n,"version",hy("version"));return{peerId:r,password:i,connectionId:s,terminalTitle:cD(o,void 0),version:a}}const hy=e=>`Cannot open multiplayer. Error in parsing: "${e}"`,mEe=Ae.object({address:Ae.string(),port:Ae.number()}),yEe=Ae.any(),IEe=Ae.any(),vEe=Ae.any(),CEe=Ae.any(),bEe=Ae.any(),AEe=Ae.any(),SEe=Ae.any(),_Ee=Ae.any(),wEe=Ae.any(),BEe=Ae.any(),EEe=Ae.any(),REe=Ae.object({id:Ae.string().optional(),protocol:yEe.optional().nullable(),host:IEe.optional(),chainedHostOverrides:Ae.union([mEe,Ae.undefined()]).optional(),shellPath:Ae.string().optional().nullable(),sshKnownHosts:Ae.array(Ae.string()).optional(),keepaliveInterval:Ae.number().optional().nullable(),errorMsg:Ae.string().optional().nullable(),connectedAt:Ae.number().optional().nullable(),delegate:vEe.optional().nullable(),quick:Ae.boolean().optional(),abortController:BEe.optional(),saveAsHost:Ae.boolean().optional(),analyticsHelper:CEe.optional().nullable(),stream:bEe.optional(),featureSet:AEe.optional(),sessionLogData:SEe.optional().nullable(),sessionLogAnalytics:_Ee.optional(),serialOptions:wEe.optional(),isDetectOSEnabled:Ae.boolean().optional(),colorSchemeName:Ae.string().optional(),isWorkspaceConnection:Ae.boolean().optional(),workspaceTemplateLocalId:Ae.number().optional(),bypassRecordingHistory:Ae.boolean().optional(),startupSnippetOverwrite:EEe.optional()}),GEe=Ae.string().optional(),NEe=Ae.union([Ae.literal("History"),Ae.literal("SFTP Screen"),Ae.literal("Hosts Screen"),Ae.literal("Port Forwarding Screen"),Ae.literal("Quick Connect"),Ae.literal("Duplicated Tab"),Ae.literal("Duplicated In New Window"),Ae.literal("Connection Flow"),Ae.literal("Local Host"),Ae.literal("Reconnect Context"),Ae.literal("Reconnect Hint"),Ae.literal("Live Terminal Link"),Ae.literal("Side Menu"),Ae.literal("System Top Bar"),Ae.literal("Shortcut"),Ae.literal("Serial"),Ae.literal("Host Details Link"),Ae.literal("Edit Host Screen"),Ae.literal("Quick Connect In Context Menu"),Ae.literal("Connect In Context Menu"),Ae.literal("Quick Connect In a New Window Context Menu"),Ae.literal("Connect In a New Window Context Menu"),Ae.literal("Double Click"),Ae.literal("Toolbar On Hosts Screen"),Ae.literal("Collaboration Context Menu"),Ae.literal("Reconnect Hotkey"),Ae.literal("Reconnect Button"),Ae.literal("Run Snippet")]),ZEe=Ae.union([Ae.literal("Live Terminal"),Ae.literal("Lizhi"),Ae.literal("Host Details Deeplink")]).optional(),TEe=Ae.object({connection:REe.strict(),tabTitle:GEe,connectionOrigin:NEe,acquisitionChannel:ZEe}),WEe=e=>Qae(e)?e.every(t=>TEe.strict().safeParse(t).success):!1;function zn(e,t){return dr(t,n=>{for(const[r,i]of Object.entries(e))n.addCase(r,(o,s)=>i(kEe(o),s))})}function kEe(e){return!co(e)||!Zs(e)?e:ZJ(e)}const Ve=e=>E(e,t=>({payload:t,meta:{scope:"local"}})),VEe=e=>({payload:e,meta:{scope:"local"}}),er=e=>({reducer:(t,n)=>{e(t,n)},prepare:t=>VEe(t)});function Tw(e,t,n,r){return(i,o,s={skipWarning:!1})=>{e.addCase(i,(a,l)=>{const c=r===void 0?l.payload:l.payload[r],u=t(a,c);if(!u){pn(s.skipWarning,`Action ${l.type}: ${n} was not found`);return}o([u,a],l)})}}Ie("SYNC_GROUP_WITH_CLOUD");const OEe=E("SET_FAILED_GROUP_SYNC_WITH_CLOUD"),HEe=E("REMOVE_FAILED_GROUP_SYNC_WITH_CLOUD");E("CLOUD_ENTITIES_RESOLVED");Ie("INSTANT_CLOUDS_SYNC");const FEe=zn({[OEe.toString()]:(e,{payload:t})=>{if(!t.group.local_id)return e;const n=new Map(e.failedSyncGroups);return n.set(t.group.local_id,t.errorMessage),{...e,failedSyncGroups:Array.from(n.entries())}},[HEe.toString()]:(e,{payload:t})=>{if(!t.local_id)return e;const n=new Map(e.failedSyncGroups);return n.delete(t.local_id),{...e,failedSyncGroups:Array.from(n.entries())}}},{failedSyncGroups:[]}),xEe={snippet:void 0,keychain:void 0,terminal:void 0,host:void 0,portForwarding:void 0},{reducer:LEe,actions:zJe}=_n({name:"pageSliderRoute",initialState:xEe,reducers:{openSlider:er((e,t)=>{const{page:n,route:r}=t.payload;YEe({draftState:e,page:n,route:r})}),closeSlider:er((e,t)=>{const{payload:n}=t;e[n]=void 0})}}),YEe=e=>{const{draftState:t,page:n,route:r}=e;t[n]=r},PEe={identityBanners:{empty:{ssh:"not defined",telnet:"not defined"}}},{reducer:XEe,actions:JJe}=_n({name:"identityPromo",initialState:PEe,reducers:{updateIdentityBanner(e,{payload:t}){const{bannerOpenState:n,configType:r,configLocalId:i}=t,o=i??"empty";e.identityBanners[o]==null&&(e.identityBanners[o]={ssh:"not defined",telnet:"not defined"}),e.identityBanners[o][r]=n}}}),UEe={"kanagawa wave":6770,"kanagawa dragon":5068,"kanagawa lotus":846,"hacker blue":5915,"hacker green":4483,"hacker red":511,"1984 dark":4186,"1984 light":841,"atom one dark":6639,"atom one light":1192,aubergine:868,aura:4412,"ayu dark":5045,"ayu light":876,basic:7651,"catppuccin latte":1155,"catppuccin mocha":4341,cobalt2:6110,"cyberpunk scarlet":3815,cyberpunk:2771,"dia de muertos":621,diwali:1556,dracula:14603,"everforest dark":3897,"everforest light":1050,grass:1013,"gruvbox dark":2408,"gruvbox light":712,halloween:1743,homebrew:21171,"light owl":2177,"man page":1002,manhattan:2537,"material dark":3377,"material light":707,monokai:19805,movember:722,"night owl":14960,"nord dark":9882,"nord light":1492,novel:2142,ocean:1246,"octocat dark":6141,"octocat light":826,"peach fresh":424,"plastic world":176,pro:26002,"red sands":603,"romania day":491,"romania night":2076,"ros pine dawn":915,"ros pine moon":2003,"ros pine":3085,"silver aerogel":276,"solarized dark":4437,"solarized light":1630,"termius dark":null,"termius light":23385,"tokyo day":862,"tokyo night":8096,"winter day":1072,"winter night":3859},{reducer:DEe,actions:jJe}=_n({name:"terminalTheme",initialState:{themeUsages:UEe},reducers:{increaseThemeUsageNumber(e,{payload:t}){const n=e.themeUsages[t];typeof n=="number"&&(e.themeUsages[t]=n+1)}}}),{reducer:KEe,actions:QJe,getInitialState:qJe}=_n({name:"customerExperience",reducers:{setCESVisibility(e,{payload:t}){e.isCESVisible=t},userInteractedWithSurvey(e,{payload:t}){e.criteria.allowedToShowDialog&&(e.interactionData=t,e.numberOfHappenedKeyEvents=0,t.action==="dismissed"&&(e.dismissCount+=1,e.dismissCount>=e.criteria.numberOfReminders&&(e.interactionData={action:"dismissed-all-reminders",interactedAt:t.interactedAt,appVersion:t.appVersion})),e.interactionData.action!=="dismissed"&&(e.dismissCount=0))},keyEventHasHappened(e){e.numberOfHappenedKeyEvents+=1},criteriaWereUpdated(e,{payload:t}){e.criteria=t}},initialState:{isCESVisible:!1,interactionData:null,numberOfHappenedKeyEvents:0,dismissCount:0,criteria:{allowedToShowDialog:!1}}});var MEe=Kp,$Ee=Jp;function zEe(e,t,n){(n!==void 0&&!$Ee(e[t],n)||n===void 0&&!(t in e))&&MEe(e,t,n)}var uD=zEe,yv={exports:{}};yv.exports;(function(e,t){var n=li,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,g=a?a(d):new c.constructor(d);return c.copy(g),g}e.exports=l})(yv,yv.exports);var JEe=yv.exports,$k=YX;function jEe(e){var t=new e.constructor(e.byteLength);return new $k(t).set(new $k(e)),t}var QEe=jEe,qEe=QEe;function eRe(e,t){var n=t?qEe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var tRe=eRe,nRe=_b,rRe=tN,iRe=$p;function oRe(e){return typeof e.constructor=="function"&&!iRe(e)?nRe(rRe(e)):{}}var sRe=oRe;function aRe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var dD=aRe,lRe=Kp,cRe=Jp,uRe=Object.prototype,dRe=uRe.hasOwnProperty;function fRe(e,t,n){var r=e[t];(!(dRe.call(e,t)&&cRe(r,n))||n===void 0&&!(t in e))&&lRe(e,t,n)}var yN=fRe,gRe=yN,hRe=Kp;function pRe(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),i?hRe(n,a,l):gRe(n,a,l)}return n}var fD=pRe;function mRe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var yRe=mRe,IRe=Do,vRe=$p,CRe=yRe,bRe=Object.prototype,ARe=bRe.hasOwnProperty;function SRe(e){if(!IRe(e))return CRe(e);var t=vRe(e),n=[];for(var r in e)r=="constructor"&&(t||!ARe.call(e,r))||n.push(r);return n}var _Re=SRe,wRe=OX,BRe=_Re,ERe=_a;function RRe(e){return ERe(e)?wRe(e,!0):BRe(e)}var IN=RRe,GRe=fD,NRe=IN;function ZRe(e){return GRe(e,NRe(e))}var TRe=ZRe,zk=uD,WRe=JEe,kRe=tRe,VRe=FG,ORe=sRe,Jk=Mp,jk=Er,HRe=nm,FRe=fb,xRe=dG,LRe=Do,YRe=N5,PRe=hb,Qk=dD,XRe=TRe;function URe(e,t,n,r,i,o,s){var a=Qk(e,n),l=Qk(t,n),c=s.get(l);if(c){zk(e,n,c);return}var u=o?o(a,l,n+"",e,t,s):void 0,d=u===void 0;if(d){var g=jk(l),p=!g&&FRe(l),m=!g&&!p&&PRe(l);u=l,g||p||m?jk(a)?u=a:HRe(a)?u=VRe(a):p?(d=!1,u=WRe(l,!0)):m?(d=!1,u=kRe(l,!0)):u=[]:YRe(l)||Jk(l)?(u=a,Jk(a)?u=XRe(a):(!LRe(a)||xRe(a))&&(u=ORe(l))):d=!1}d&&(s.set(l,u),i(u,l,r,o,s),s.delete(l)),zk(e,n,u)}var DRe=URe,KRe=mG,MRe=uD,$Re=WX,zRe=DRe,JRe=Do,jRe=IN,QRe=dD;function gD(e,t,n,r,i){e!==t&&$Re(t,function(o,s){if(i||(i=new KRe),JRe(o))zRe(e,t,s,n,gD,r,i);else{var a=r?r(QRe(e,s),o,s+"",e,t,i):void 0;a===void 0&&(a=o),MRe(e,s,a)}},jRe)}var qRe=gD,eGe=su,tGe=v5;function nGe(e){return eGe(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,s&&tGe(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}var hD=nGe,rGe=qRe,iGe=hD,oGe=iGe(function(e,t,n){rGe(e,t,n)}),sGe=oGe;const ps=Ht(sGe),aGe=E("HANDLE_SHOW_DIALOG"),vN=Ie("SHOW_DIALOG"),lGe=E("UPDATE_DIALOG_PROPS"),cGe=E("DIALOG_OPENED"),uGe=E("CLOSE_DIALOG"),dGe=E("DESTROY_DIALOG");E("CLOSE_ALL_DIALOGS_BY_NAME");const yS=(e,t,n)=>{const r=new Map(e),i=r.get(t);return i?(r.set(t,ps({},i,n)),[...r]):e},fGe=zn({[aGe.toString()]:(e,{payload:t})=>{const{dialogData:n,requestMeta:r}=t,{dialog:i,props:o,target:s,options:a}=n,l=new Map(e);return l.set(r.requestId,{name:i,state:"opening",props:o,requestMeta:r,target:s,options:a}),[...l]},[lGe.toString()]:(e,{payload:{requestId:t,props:n}})=>yS(e,t,{props:n}),[uGe.toString()]:(e,{payload:t})=>yS(e,t,{state:"closing"}),[cGe.toString()]:(e,{payload:t})=>yS(e,t,{state:"opened"}),[dGe.toString()]:(e,{payload:t})=>{const n=new Map(e);return n.delete(t),[...n]}},[]),gGe=E("SET_TREATMENTS");E("START_SIGN_UP_EMAIL_VERIFICATION_EXPERIMENT");Ie("START_TEAM_TRIAL_GRANT_ACCESS_EXPERIMENT");Ie("START_CHOOSE_PLAN_SCREEN_EXPERIMENT");Ie("START_HELIUM_AUTOCOMPLETE_VALIDATION_EXPERIMENT");const hGe={treatments:{}},pGe=zn({[gGe.toString()]:(e,{payload:t})=>({...e,treatments:t})},hGe);E("GENERATE_TEST_DATA_FOR_DEACTIVATE");const pD=Ie("REFRESH_USER_PROFILE"),mD=E("SET_USER_PROFILE");Ie("UPDATE_USER_FULL_NAME");Ie("SECURITY_TOKEN");const mGe=Ie("ENABLE_2FA"),yGe=Ie("DISABLE_2FA"),IGe=Ie("MODIFY_TEAM");Ie("OTP_REGISTER_PROVIDER_AUTHY");Ie("OTP_REGISTER_PROVIDER_TOTP");Ie("CREATE_TEAM_TRIAL");Ie("UPDATE_BILLING_INFORMATION");Ie("INVITE_TEAM_MEMBER");Ie("RESEND_TEAM_INVITE");Ie("SIGN_UP_FREE");const vGe=Ie("SIGNUP_TRIAL"),yD=Ie("LOGIN");E("LOGGED_IN");E("SIGNED_IN");const Ur=Ie("LOGOUT"),CGe=Ie("CHANGE_USERNAME"),bGe=Ie("DELETE_ACCOUNT"),AGe=Ie("CHANGE_PASSWORD");Ie("RECOVER_ACCOUNT");Ie("RESET_PASSWORD");Ie("SEND_VERIFICATION_CODE");const SGe=Ie("CONFIRM_EMAIL");Ie("CLEAN_DATABASE");Ie("REMOVE_LOCAL_DATA");Ie("GET_TEAM_SEATS_LIST");const _Ge=Ie("GET_TEAM_MEMBERS_LIST"),wGe=Ie("GET_TEAM_INVITES_LIST");E("TEAM_UPDATED");Ie("GET_TEAM_MEMBER_STALE_ENCRYPTION_LIST");Ie("GET_STALE_ENCRYPTION_DEVICES_LIST");const BGe=Ie("DEACTIVATE_TRIAL");Ie("MIGRATE_TO_NEW_CRYPTO_SYSTEM");Ie("RESET_PASSWORD_AND_MIGRATE_TO_NEW_CRYPTO_SYSTEM");Ie("REQUEST_UNSYNCED_PERSONAL_DATA");Ie("DETECT_SSO_ACTION");const EGe=Ie("SSO_SIGNUP_TRIAL");Ie("GENERATE_INVITATION_LINK");Ie("SIGN_UP_IN_TEAM_TRIAL_ONBOARDING");Ie("CREATE_TEAM_IN_TEAM_TRIAL_ONBOARDING");Ie("QUERY_WHETHER_USER_ENTERPRISE_SSO");Ie("CREATE_TEAM_IN_CHOOSE_PLAN_DIALOG");Ie("QUERY_WHETHER_EMAIL_IS_AVAILABLE");Ie("SEND_EMAIL_VERIFICATION_CODE");Ie("QUERY_WHETHER_EMAIL_VERIFICATION_CODE_IS_VALID");E("CLOSE_CREATE_IDENTITY_DIALOG");const RGe=E("SET_HAS_DOWNGRADED_TO_STARTER");Ie("GRANT_ACCESS_TO_VAULTS");Ie("REJECT_ACCESS_TO_VAULTS");Ie("LEAVE_TEAM");Ie("GET_ONLY_SHARED_ENTITIES");Ie("GET_USER_DEVICES");const GGe=E("SET_USER_DEVICES");Ie("SET_EMAIL_PREFERENCES");E("NEW_DEVICE_ADDED");const NGe=Ie("ASSEMBLE_AUTOCOMPLETE_SUGGESTIONS");Ie("LINK_IDENTITY");Ie("UNLINK_IDENTITY");const ZGe=zn({[NGe.success.toString()]:(e,{payload:t})=>({...e,suggestions:t}),[Ur.success.toString()]:()=>({suggestions:{ssh:[],telnet:[],proxy:[]}})},{suggestions:{ssh:[],telnet:[],proxy:[]}}),vg={proTrialOnboarding:{userShouldSeeProTrialOnboarding:!1,proTrialSuccessAnimationFinished:!1,proTrialCompletedStepsOrder:["add_hosts","connect_to_host","add_second_device","invite_members"]},teamOwnerOnboarding:{userShouldSeeTeamOnboarding:!1,teamEntryAnimationFinished:!1,teamSuccessAnimationFinished:!1,userClosedTeamOnboarding:!1,upgradeNowButtonHasActiveMode:!1},onboardingAttributes:[],promotionBanner:void 0},{reducer:TGe,actions:eje}=_n({name:"onboardings",initialState:vg,reducers:{setProTrialSuccessAnimationFinished(e){e.proTrialOnboarding.userShouldSeeProTrialOnboarding=!1,e.proTrialOnboarding.proTrialSuccessAnimationFinished=!0},setUserShouldSeeProTrialOnboarding(e,{payload:t}){e.proTrialOnboarding.userShouldSeeProTrialOnboarding=t},setOnboardingAttributes(e,{payload:t}){e.onboardingAttributes=t},setProTrialCompletedStepsOrder(e,{payload:t}){e.proTrialOnboarding.proTrialCompletedStepsOrder=t},setUserHasNoTeam(e){var r;const t=(r=e.onboardingAttributes)==null?void 0:r.find(i=>i.type==="personal"),n=t==null?void 0:t.steps.find(i=>i.codename==="invite_members");n&&(n.value=!0)},setUserClosedTeamOnboarding(e,{payload:t}){e.teamOwnerOnboarding.userClosedTeamOnboarding=t},setUserShouldSeeTeamOnboarding(e,{payload:t}){e.teamOwnerOnboarding.userShouldSeeTeamOnboarding=t},setTeamSuccessAnimationFinished(e,{payload:t}){e.teamOwnerOnboarding.teamSuccessAnimationFinished=t},setTeamEntryAnimationFinished(e,{payload:t}){e.teamOwnerOnboarding.teamEntryAnimationFinished=t},setTeamOnboardingFlagsToInitialState(e){e.teamOwnerOnboarding=vg.teamOwnerOnboarding},unsetPromotionBannerState(e){e.promotionBanner=void 0},setPromotionBannerToInitialState(e){e.promotionBanner={shouldShowBanner:!1,isBannerDismissed:!1}},setShowPromotionBanner(e){e.promotionBanner&&(e.promotionBanner.shouldShowBanner=!0)},setPromotionBannerDismissed(e){e.promotionBanner&&(e.promotionBanner.isBannerDismissed=!0)}},extraReducers:e=>{e.addCase(Ur.success,t=>{t.proTrialOnboarding=vg.proTrialOnboarding,t.teamOwnerOnboarding=vg.teamOwnerOnboarding,t.onboardingAttributes=vg.onboardingAttributes})}});E("ONBOARDING_UPDATED");Ie("SKIP_PRO_TRIAL_ONBOARDING_INVITE_STEP");E("UPDATE_ONBOARDING_IF_TEAM_WAS_DELETED");const WGe=Ve("ADD_RECONNECTABLE_TERMINAL"),kGe=Ve("REMOVE_RECONNECTABLE_TERMINAL");Ve("CLOSE_ALL_DISCONNECTED_TERMINALS");const VGe=Ve("INCREASE_RECONNECT_TIMER"),OGe=Ve("RESET_RECONNECT_TIMER"),HGe=Ve("RECONNECT_TERMINAL"),FGe=Ve("SET_SEARCH_QUERY"),xGe=Ve("ADD_TERMINAL"),LGe=Ve("ADD_WORKSPACE_TAB"),YGe=Ve("ADD_NEW_TAB"),PGe=Ve("ADD_TERMINAL_TAB"),XGe=Ve("MOVE_TERMINAL_TO_NEW_TAB");Ve("RUN_SNIPPET_IN_ACTIVE_TERMINALS");const UGe=Ve("SET_ACTIVE_TAB_ID");Ve("CLOSE_TAB");const DGe=Ve("REMOVE_TAB");Ve("CLOSE_TERMINAL");const KGe=Ve("REMOVE_TERMINAL"),MGe=Ve("TOGGLE_SPLIT_VIEW_BROADCAST_MODE"),ID=Ve("ADD_SHELL_INTEGRATION_ACTIVATED_CONNECTION"),vD=E("OPEN_TERMINAL_SEARCH"),$Ge=Ve("CLOSE_TERMINAL_SEARCH");Ve("CLOSE_TERMINAL_SIDE_PANEL");Ve("EXIT_FROM_SEARCH");const zGe=Ve("ACTIVATE_TERMINAL"),JGe=Ve("ACTIVATE_TAB"),jGe=Ve("TERMINAL_DISCONNECT"),QGe=Ve("DEACTIVATE_WINDOW_TERMINALS"),qGe=Ve("ESTABLISH_TERMINAL");Ve("TERMINAL_FIND_NEXT_MATCH");Ve("TERMINAL_FIND_PREV_MATCH");const eNe=E("INCREASE_TERMINAL_FONT_SIZE"),tNe=E("DECREASE_TERMINAL_FONT_SIZE");E("SET_TERMINAL_FONT_SIZE");E("SET_TERMINAL_FONT_NAME");const nNe=E("RESET_TERMINAL_FONT_SIZE_TO_DEFAULT");E("SET_LOCAL_TERMINAL_VISUAL_SETTINGS_AS_DEFAULT");E("SET_TERMINAL_COLOR_SCHEME");const rNe=Ve("UPDATE_TAB"),iNe=Ve("REORDER_TERMINALS");Ve("RECONNECT_TAB");const oNe=Ve("PATCH_TERMINAL"),sNe=Ve("PATCH_TERMINAL_TAB");E("RUN_IN_ALL_ACTIVE_TABS");const aNe=Ve("PRE_CREATE_HISTORY"),lNe=E("SHOW_SPLIT_VIEW_HINT"),cNe=E("DISMISS_SPLIT_VIEW_HINT");Ve("TERMINAL_ERROR");E("SINGLE_TERMINAL_SESSION_STARTED");E("SINGLE_TERMINAL_SESSION_FINISHED");E("SINGLE_TERMINAL_TAB_RENAMED");const uNe=E("OPEN_CONNECTED_TO_TERMINAL_WITH_UNAVAILABLE_PRO_FEATURES_HINT"),dNe=E("CLOSE_CONNECTED_TO_TERMINAL_WITH_UNAVAILABLE_PRO_FEATURES_HINT"),fNe=Ve("SET_AUTOCOMPLETE_DISABLED_FOR_TERMINAL_SESSION"),gNe=Ve("SET_TERMINAL_HISTORY");E("FINISH_SESSION_LOG_WRITING");const hNe=Ve("APPEND_TERMINAL_HISTORY");Ve("ADD_CONNECTION_CONTROLLER");const pNe=Ve("INIT_CONNECTION"),mNe=Ve("REQUEST_NEW_STEP"),yNe=Ve("CONTINUE_CONNECTION"),INe=Ve("FINISH_HOST_CHAIN_CONNECTION"),vNe=Ve("START_HOST_CHAIN_CONNECTION"),CNe=Ve("FINISH_CONNECTION_FLOW"),bNe=Ve("MARK_CONNECTION_FLOW_AS_CONNECTED");Ve("START_OVER");Ve("TRY_TO_CONNECT");const ANe=Ve("FAILED_SHELL_INTEGRATION");Ve("SEND_EXIT_CODE");Ve("CLOSE_TERMINAL_CHANNELS");Ve("RUN_SNIPPET");Ve("DISPOSE_TERMINALS_IN_SINGLETONS");const SNe=Ve("MARK_TERMINALS_AS_READ"),_Ne=Ve("GENERATE_WORKSPACE_TERMINAL_ID"),wNe=Ve("REMOVE_WORKSPACE_TERMINAL_ID");Ve("OPEN_CONNECTION");const BNe=Ve("SET_EDITING_TITLE"),ENe=Ve("UPDATE_TAB_TITLE"),RNe=Ve("SET_MULTIPLAYER_NOTIFICATION"),GNe={shouldShowDirectoriesAutocompleteDescription:!0,showShellAssistHint:!0,trialToPremiumDismissTimestamp:null,shouldShowBroadcastPrompt:!0,multiKeyDismissTimestamp:null},{actions:tje,reducer:NNe}=_n({name:"promotions",initialState:GNe,reducers:{hideShellAssistHint(e){e.showShellAssistHint=!1},hideBroadcastPrompt(e){e.shouldShowBroadcastPrompt=!1},setMultiKeyDismissTimestamp(e,{payload:t}){e.multiKeyDismissTimestamp=t}},extraReducers:e=>{e.addCase(ID,t=>{t.shouldShowDirectoriesAutocompleteDescription=!1})}}),ZNe=E("SAVE_FILE_TYPE_APP_ASSOCIATION"),TNe=E("DELETE_FILE_TYPE_APP_ASSOCIATION"),WNe=E("SET_SFTP_SHOW_HIDDEN_FILES"),kNe=E("SET_SFTP_SORTING");E("SUGGEST_TO_SAVE_FILE_TYPE_ASSOCIATIONS");const qk={sorting:{sortBy:null,sortDirection:"ASC"}},VNe={showHiddenFiles:!1,left:qk,right:qk,fileTypeAppAssociations:[]},ONe=zn({[ZNe.toString()]:(e,{payload:t})=>({...e,fileTypeAppAssociations:[...e.fileTypeAppAssociations.filter(n=>n.type!==t.type),t]}),[TNe.toString()]:(e,{payload:t})=>({...e,fileTypeAppAssociations:e.fileTypeAppAssociations.filter(n=>n.type!==t.type)}),[WNe.toString()]:(e,{payload:t})=>({...e,showHiddenFiles:t}),[kNe.toString()]:(e,{payload:t})=>({...e,[t.containerId]:{sorting:t.sorting}}),[Ur.success.toString()]:e=>({...e,fileTypeAppAssociations:[]})},VNe),{reducer:HNe,actions:FNe}=_n({name:"app",reducers:{initAppRuntimeInfo(e,{payload:t}){return t}},initialState:{userDataPath:"",version:""}}),{initAppRuntimeInfo:xNe}=FNe;function LNe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.whitelist||null,i=n.blacklist||null;function o(s){return!!(r&&r.indexOf(s)===-1||i&&i.indexOf(s)!==-1)}return{in:function(a,l,c){return!o(l)&&e?e(a,l,c):a},out:function(a,l,c){return!o(l)&&t?t(a,l,c):a}}}const{reducer:YNe,actions:nje,getInitialState:PNe,name:XNe}=_n({name:"appUpdate",reducers:{exchangeVersions(e,{payload:t}){e.previouslySeenVersion=e.persisted.lastSeenVersion,e.persisted.lastSeenVersion=t}},initialState:{previouslySeenVersion:void 0,persisted:{lastSeenVersion:void 0}}});LNe(({persisted:e})=>e,e=>({...PNe(),persisted:e}),{whitelist:[XNe]});const UNe={commandPaletteInstanceID:"",isJumpToButtonVisible:"no"},{reducer:DNe,actions:{toggleJumpToButtonState:rje,setCommandPaletteInstanceID:ije}}=_n({name:"commandPalette",initialState:UNe,reducers:{toggleJumpToButtonState:{reducer:(e,{payload:t})=>{e.isJumpToButtonVisible=t},prepare:e=>({payload:e,meta:{scope:"local"}})},setCommandPaletteInstanceID:{reducer:(e,{payload:t})=>{e.commandPaletteInstanceID=t},prepare:e=>({payload:e,meta:{scope:"local"}})}}});Ve("TRACK_COMMAND_PALETTE_ANALYTICS_SAGA");Ve("TRACK_COMMAND_PALETTE_SELECT_ITEM_SAGA");Ve("TRACK_COMMAND_PALETTE_JUMP_TO_BUTTON_STATE_SAGA");const KNe={isOpen:!1},{reducer:MNe,actions:{toggleCommandPalette:oje}}=_n({name:"commandPalette",initialState:KNe,reducers:{toggleCommandPalette:{reducer:(e,{payload:{filter:t,isOpen:n,userInput:r}})=>{e.filter=t,e.isOpen=n,e.userInput=r},prepare:e=>({payload:e,meta:{scope:"local"}})}},extraReducers:e=>{e.addCase(Ur.success,t=>{t.filter=void 0,t.isOpen=!1})}});Ve("TOGGLE_COMMAND_PALETTE_SAGA");Ve("COMMAND_PALETTE_OPEN_TAB");const $Ne={saveCredentials:!0},{actions:sje,reducer:zNe}=_n({name:"connectionFlow",initialState:$Ne,reducers:{changeSaveCredentials:(e,{payload:t})=>{e.saveCredentials=t}}});var JNe=I5,eV=Er;function jNe(e,t,n,r){return e==null?[]:(eV(t)||(t=t==null?[]:[t]),n=r?void 0:n,eV(n)||(n=n==null?[]:[n]),JNe(e,t,n))}var QNe=jNe;const CD=Ht(QNe);var bD={exports:{}};(function(e,t){(function(){function n(r){r=r||{};var i=r.desc?-1:1,o=-i,s=/^0/,a=/\s+/g,l=/^\s+|\s+$/g,c=/[^\x00-\x80]/,u=/^0x[0-9a-f]+$/i,d=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,g=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,p=r.insensitive?function(I){return m(""+I).replace(l,"")}:function(I){return(""+I).replace(l,"")};function m(I){return I.toLocaleLowerCase?I.toLocaleLowerCase():I.toLowerCase()}function v(I){return I.replace(d,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function y(I,b){return(!I.match(s)||b===1)&&parseFloat(I)||I.replace(a," ").replace(l,"")||0}return function(I,b){var A=p(I),N=p(b);if(!A&&!N)return 0;if(!A&&N)return o;if(A&&!N)return i;var L=v(A),G=v(N),W=parseInt(A.match(u),16)||L.length!==1&&Date.parse(A),j=parseInt(N.match(u),16)||W&&N.match(g)&&Date.parse(N)||null;if(j){if(W<j)return o;if(W>j)return i}for(var O=L.length,Ce=G.length,Ue=0,$e=Math.max(O,Ce);Ue<$e;Ue++){var ze=y(L[Ue]||"",O),Ee=y(G[Ue]||"",Ce);if(isNaN(ze)!==isNaN(Ee))return isNaN(ze)?i:o;if(c.test(ze+Ee)&&ze.localeCompare){var P=ze.localeCompare(Ee);if(P>0)return i;if(P<0)return o;if(Ue===$e-1)return 0;continue}if(ze<Ee)return o;if(ze>Ee)return i}return 0}}e.exports=n})()})(bD);var qNe=bD.exports;const e1e=Ht(qNe);e1e({insensitive:!0});const t1e=()=>({search:"",sort:{type:"Date",reverse:!0}}),n1e={path:"",baudRate:9600,dataBits:8,stopBits:1,parity:"none",controlFlow:"none",charset:"UTF-8"},tV={protocol:{selectedProtocol:void 0,sshPort:void 0,sshPortForMosh:void 0,telnetPort:void 0,moshCommand:void 0},serialOptions:n1e,identity:{filter:t1e(),isShowActions:!0,username:"",selectedIdentityId:null},keyboardInteractivePrompts:{},keyboardInteractiveAuthMethod:{selectedAuthMethod:"keyboard-interactive"},authInteractive:{selectedAuthMethod:void 0,password:""},requestPassphrase:{passphrase:""},requestPIN:{pin:""},discoverableKeys:{selectedKey:null},chooseKey:{selectedKey:null,invalidKey:!1},requestSignature:{request:{state:"Generating",isSignatureRequested:!1}}},r1e={connections:new Map([])},{actions:aje,reducer:i1e}=_n({name:"connectionFlowSteps",initialState:r1e,reducers:{updateConnectionStep:er((e,t)=>{const{connectionId:n,step:{stepName:r,stepProps:i}}=t.payload,o=e.connections.get(n);if(!o){e.connections.set(n,tV);return}e.connections.set(n,{...o,[r]:{...o[r],...i}})}),clearConnectionSteps:er((e,t)=>{const n=t.payload;e.connections.delete(n)}),initConnectionSteps:er((e,t)=>{const n=t.payload;e.connections.set(n,tV)})}}),py={departments:[],enterpriseInfo:{id:null,name:"",iconUrl:"",userCountWithMatchedDomains:null},userLocation:{city:"",region:"",country_code:"",text:""},placeSuggestions:[],isAccessPending:!1,isSignedUp:!1},{actions:lje,reducer:o1e}=_n({name:"enterprisePlan",initialState:py,reducers:{clearPlaceSuggestions:e=>{e.placeSuggestions=py.placeSuggestions},clearEnterprisePlanData:e=>py,setPendingAccessFlag:(e,t)=>{e.isAccessPending=t.payload},setSignedUpFlag:(e,t)=>{e.isSignedUp=t.payload}},extraReducers:e=>{e.addCase(s1e.success,(t,n)=>{t.departments=n.payload.departments,t.enterpriseInfo.id=n.payload.id,t.enterpriseInfo.iconUrl=n.payload.icon_url,t.enterpriseInfo.name=n.payload.name,t.enterpriseInfo.userCountWithMatchedDomains=n.payload.user_count_with_matched_domains,t.userLocation=n.payload.user_location,t.placeSuggestions=py.placeSuggestions}),e.addCase(a1e.success,(t,n)=>{t.placeSuggestions=n.payload.suggestions??[]})}}),s1e=Ie("enterprisePlan/getEnterpriseInfo");Ie("enterprisePlan/createDepartment");Ie("enterprisePlan/joinDepartment");const a1e=Ie("enterprisePlan/getSuggestions");Ie("enterprisePlan/getMap");const to=e=>{const{form:t,formId:n}=e;if(!t||!n)return;if(t.formId===n)return t;const{internalForm:r}=t;if(r)return to({form:r,formId:n})},AD=e=>{const{form:t,activeFormId:n}=e;if(!t||!n)return;const{internalForm:r}=t;return(r==null?void 0:r.formId)===n?t:AD({form:r,activeFormId:n})};Ae.union([Ae.literal("fidoKeygen"),Ae.literal("keygen"),Ae.literal("sepKeygen")]);Ae.union([Ae.literal("snippetsPackage"),Ae.literal("snippet"),Ae.literal("key"),Ae.literal("identity"),Ae.literal("sep")]);const nV="edit",rV={snippet:void 0,keychain:void 0},{reducer:l1e,actions:cje}=_n({name:"pageSliderFormPreview",initialState:rV,reducers:{startManualSaving:lc(er((e,t)=>{var l;const{page:n,formId:r}=t.payload,i=(l=e[n])==null?void 0:l.formState,o=to({form:i,formId:r});if(!o){pn(!1,"Form closed");return}const s=o.savingStatus,a=s==="editing"?"saving":s;o.savingStatus=a})),startSaving:lc(er((e,t)=>{var s;const{page:n,formId:r}=t.payload,i=(s=e[n])==null?void 0:s.formState,o=to({form:i,formId:r});if(!o){pn(!1,"Form closed");return}o.savingStatus="saving"})),startEditing:lc(er((e,t)=>{var s;const{page:n,formId:r}=t.payload,i=(s=e[n])==null?void 0:s.formState,o=to({form:i,formId:r});if(!o){pn(!1,"Form closed");return}o.savingStatus="editing"})),cancelSaving:lc(er((e,t)=>{var s;const{page:n,formId:r}=t.payload,i=(s=e[n])==null?void 0:s.formState,o=to({form:i,formId:r});if(!o){pn(!1,"Form closed");return}o.savingStatus=void 0})),openEditForm:er((e,t)=>{const{entityLocalPath:n,preview:r,formType:i,entityVault:o,page:s,formId:a}=t.payload;e[s]={entity:i,formState:{entityLocalPath:n,entityVault:o,preview:r,savingStatus:void 0,internalForm:void 0,formRoute:nV,formId:a,formNavigation:{activeFormRoute:nV,activeFormId:a}}}}),closeForm:er((e,t)=>{const{page:n}=t.payload;if(!e[n]){pn(!1,"Form closed");return}e[n]=void 0}),updateFormPreview:lc(er((e,t)=>{var a;const{preview:n,page:r,formId:i}=t.payload,o=(a=e[r])==null?void 0:a.formState,s=to({form:o,formId:i});if(!s){pn(!1,"Form closed");return}s.preview=n})),openInternalForm:er((e,t)=>{var d;const{preview:n,page:r,formRoute:i,entityLocalPath:o,formId:s}=t.payload,a=(d=e[r])==null?void 0:d.formState,l=a==null?void 0:a.formNavigation.activeFormId,c=to({form:a,formId:l});if(!a||!c){pn(!1,"Form closed");return}const u={preview:n,savingStatus:void 0,formRoute:i,entityLocalPath:o,formId:s};c.internalForm=u,a.formNavigation.activeFormId=s,a.formNavigation.activeFormRoute=i}),closeInternalForm:er((e,t)=>{var s;const{page:n}=t.payload,r=(s=e[n])==null?void 0:s.formState,i=r==null?void 0:r.formNavigation.activeFormId,o=AD({form:r,activeFormId:i});if(!r||!o){pn(!1,"Form closed");return}o.internalForm=void 0,r.formNavigation={activeFormId:o.formId,activeFormRoute:o.formRoute}}),closeAllInternalForms:er((e,t)=>{var i;const{page:n}=t.payload,r=(i=e[n])==null?void 0:i.formState;if(!r){pn(!1,"Form closed");return}r.internalForm=void 0,r.formNavigation={activeFormId:r.formId,activeFormRoute:r.formRoute}}),updateEntityLocalPath:er((e,t)=>{var a;const{formId:n,page:r,updatedEntityLocalPath:i}=t.payload,o=(a=e[r])==null?void 0:a.formState,s=to({form:o,formId:n});if(!s){pn(!1,"Form closed");return}s.entityLocalPath=i}),updateEntityVault:er((e,t)=>{const{entityVault:n,page:r}=t.payload;if(!e[r]){pn(!1,"Form closed");return}e[r].formState.entityVault=n}),successfulSave:lc(er((e,t)=>{var a;const{preview:n,page:r,formId:i}=t.payload,o=(a=e[r])==null?void 0:a.formState,s=to({form:o,formId:i});if(!s){pn(!1,"Form closed");return}s.savingStatus="saved",s.preview=n})),updateWithoutSave:lc(er((e,t)=>{var c;const{preview:n,page:r,formId:i}=t.payload,o=(c=e[r])==null?void 0:c.formState,s=to({form:o,formId:i});if(!s){pn(!1,"Form closed");return}const a=s.savingStatus,l=a&&"saved";s.savingStatus=l,s.preview=n}))},extraReducers:e=>e.addCase(Ur.success,()=>rV)});function lc(e){return{reducer:(t,n)=>{var l;const{formId:r,page:i}=n.payload,o=(l=t[i])==null?void 0:l.formState;if(!o){pn(!1,"Form closed");return}const{activeFormId:s}=o.formNavigation;if(c1e(s,r))return e.reducer(t,n)},prepare:t=>e.prepare(t)}}const c1e=(e,t)=>e===t,u1e={isShowing:!0,sessionLogFileDownloadable:!1,sessionLogsFilesStatus:null,sessionLogsStorageSize:0},{reducer:d1e,actions:uje,getInitialState:dje}=_n({name:"history",reducers:{setSessionLogsStorageSize(e,t){e.sessionLogsStorageSize=t.payload}},extraReducers:e=>{e.addCase(IS.request,t=>{t.sessionLogFileDownloadable=!1}),e.addCase(IS.success,t=>{t.sessionLogFileDownloadable=!0}),e.addCase(IS.failure,t=>{t.sessionLogFileDownloadable=!1}),e.addCase(f1e.success,(t,n)=>{t.sessionLogsFilesStatus=n.payload})},initialState:u1e});Ie("SYNC_HISTORY");Ie("VALIDATE_SESSION_LOG_FILE_EXIST");E("SYNC_STORED_CONNECTION_PROPS");E("UPDATE_STORED_CONNECTION_PROPS");const IS=Ie("CAN_DOWNLOAD_SESSION_LOG_FILE"),f1e=Ie("GET_LOG_FILE_STATUSES");Ie("DOWNLOAD_SESSION_LOG_FILE");const g1e=Ie("MARK_AS_READ"),CN=Ie("ADD_LOCAL_IN_APP_MESSAGE");E("IN_APP_MESSAGE_DETAILS_PRESSED");E("IN_APP_MESSAGE_LIST_SCREEN_OPENED");E("GET_IN_APP_MESSAGES_ON_PUSH_NOTIFICATION");const h1e=Ie("GET_IN_APP_MESSAGES"),p1e=Ie("INIT_IN_APP_MESSAGES"),m1e=Ie("UPDATE_IN_APP_MESSAGES");E("SHOW_FULL_SCREEN_IN_APP_MESSAGES");const SD=Ie("REMOVE_IN_APP_MESSAGES");Ie("DISMISS_IN_APP_MESSAGE");const y1e={objects:[],meta:{dot_type:null}},I1e=dr(y1e,e=>{e.addCase(CN.success,(t,{payload:n})=>{const r=t.objects.findIndex(i=>i.id===n.id);r>=0?t.objects[r]=n:t.objects.push(n)}).addCase(g1e.success,(t,{payload:n})=>{t.objects=t.objects.map(r=>r.id===n?{...r,is_seen:!0}:r)}).addCase(p1e.success,(t,{payload:n})=>{Object.assign(t,n)}).addCase(h1e.success,(t,{payload:n})=>{Object.assign(t,n)}).addCase(m1e.success,(t,{payload:n})=>{t.objects=n}).addCase(SD.success,(t,{payload:n})=>{t.objects=t.objects.filter(r=>!n.includes(r.id))})}),_D=E("lifecycle/REHYDRATE");Ie("lifecycle/INIT_DATA_BASE");const v1e=dr({hydrated:!1},e=>{e.addCase(_D,()=>({hydrated:!0}))}),C1e=Ie("@MULTI_KEY/GET_AUTHORIZED_KEYS"),b1e=E("@MULTI_KEY/HYDRATE");Ie("@MULTI_KEY/UPDATE_USERNAME");const A1e=E("@MULTI_KEY/SET_FORM_OPEN");E("@MULTI_KEY/EXPORT_SNIPPET_WAS_CREATED");E("@MULTI_KEY/EXPORT_SNIPPET_WAS_UPDATED");const iV={personalDeviceKeyPair:null,authorizedKeys:[],teamMultiKeyFormOpen:!1},S1e=dr(iV,e=>{e.addCase(Ur.success,()=>iV),e.addCase(b1e,(t,{payload:n})=>{t.personalDeviceKeyPair=n}),e.addCase(C1e.success,(t,{payload:n})=>{t.authorizedKeys=n}),e.addCase(A1e,(t,{payload:n})=>{t.teamMultiKeyFormOpen=n})}),wD="multiplayer",Ui=e=>E(`${wD}/${e}`);Ui("grantControl");Ui("requestControl");Ui("cancelControlRequest");Ui("acceptControl");Ui("rejectControl");Ui("takeControlBack");Ui("giveUpControl");Ui("sendInitTerminalBufferData");Ui("sendUserConnected");Ui("sendHostSettings");const _1e=Ui("startMultiplayer");Ui("stopMultiplayer");Ui("joinMultiplayer");const w1e={connections:{},connectionsInProcessing:{},startMultiplayerMenu:{},tabWidget:{},connectionsPreview:{},startSharingTerminalRequests:{},isMultiplayerEnabled:!1,centrifugeClientId:void 0},B1e=["participant-viewing-expanded","host-viewing-expanded","requesting-control-expanded"],{actions:fje,reducer:E1e,name:R1e}=_n({name:wD,initialState:w1e,reducers:{updateConnectionData:(e,t)=>{const{sessionId:n,inviteLink:r,controlOwnerId:i,me:o}=t.payload;e.connections[n]&&G1e({connection:e.connections[n],controlOwnerId:i,me:o,inviteLink:r})},connectionEstablished:(e,t)=>{const{sessionId:n,participant:r,inviteLink:i,terminalId:o,terminalConnectionId:s,hostId:a,windowId:l}=t.payload,c=N1e({sessionId:n,terminalId:o,terminalConnectionId:s,hostId:a,inviteLink:i,windowId:l});c.status="connected",c.inviteLink=i,c.participants.push(r),c.participants=lh(c.participants,"userId"),r.isControlOwner&&(c.currentControlOwner=r),e.connections[n]=c},removeConnection:(e,t)=>{const{sessionId:n,terminalConnectionId:r}=t.payload;if(n){delete e.connections[n];return}const i=Object.values(e.connections).find(o=>(o==null?void 0:o.terminalConnectionId)===r);i&&delete e.connections[i.sessionId]},updateProcessingConnection:(e,t)=>{const{terminalConnectionId:n,isProcessing:r}=t.payload;if(r){e.connectionsInProcessing[n]=!0;return}e.connectionsInProcessing[n]&&delete e.connectionsInProcessing[n]},addParticipant:(e,t)=>{const{sessionId:n,userId:r,isHost:i,participantId:o,peerId:s,isControlOwner:a,username:l}=t.payload,c=e.connections[n];if(!c)return;const u=c.participants.find(g=>g.participantId===o),d={participantId:o,userId:r,isHost:i,peerId:s,isControlOwner:a,username:l};u||(c.participants.push(d),c.participants=lh(c.participants,"userId")),a&&(c.currentControlOwner=d)},removeParticipant:(e,t)=>{const{sessionId:n,participantId:r}=t.payload,i=e.connections[n];if(!i)return;const o=s=>s.participantId!==r;i.participants=lh(i.participants.filter(o),"userId"),i.controlRequests=i.controlRequests.filter(o)},updateConnectionStatus:(e,t)=>{const{sessionId:n,status:r,error:i}=t.payload,o=e.connections[n];o&&(o.status=r,o.error=i||void 0)},addControlRequest:(e,t)=>{const{sessionId:n,participantId:r,requestId:i,seenByHost:o}=t.payload,s=e.connections[n];!s||s.controlRequests.find(l=>l.participantId===r)||s.controlRequests.push({participantId:r,seenByHost:o,id:i})},removeControlRequest:(e,t)=>{const{sessionId:n,requestId:r}=t.payload,i=e.connections[n];i&&(i.controlRequests=i.controlRequests.filter(o=>o.id!==r))},clearControlRequests:(e,t)=>{const{sessionId:n}=t.payload,r=e.connections[n];r&&(r.controlRequests=[])},updateControlRequestsSeen:(e,t)=>{const{sessionId:n,seenByHost:r}=t.payload,i=e.connections[n];if(i)for(const o of i.controlRequests)o.seenByHost=r},setCurrentControlOwner:(e,t)=>{const{sessionId:n,participantId:r}=t.payload,i=e.connections[n];if(i){for(const o of i.participants)o.isControlOwner=o.participantId===r,o.participantId===r&&(i.currentControlOwner=o);i.controlRequests=[]}},setMultiplayerTerminalMenuState:(e,t)=>{const{sessionId:n,state:r,type:i}=t.payload,o=e.connections[n];if(!o||(i&&(o.multiplayerTerminalMenuType=i),!r))return;const s=e.tabWidget[o.terminalId];s&&!["closed","hidden"].includes(r)&&(s.isOpened=!1),o.multiplayerTerminalMenuState=r},makeMenuCompactIfExpanded:(e,t)=>{const n=e.connections[t.payload.sessionId];if(!n||!B1e.includes(n.multiplayerTerminalMenuType))return;const i=n.multiplayerTerminalMenuType==="requesting-control-expanded"?"requesting-control-collapsed":"viewing-collapsed";n.multiplayerTerminalMenuState="compact",n.multiplayerTerminalMenuType=i},enableMultiplayer:e=>{e.isMultiplayerEnabled=!0},disableMultiplayer:(e,t)=>{e.isMultiplayerEnabled=!1},updateCentrifugeClientId:(e,t)=>{e.centrifugeClientId=t.payload},updateConnectionPreview:(e,t)=>{const{connectionId:n}=t.payload;let r={};e.connectionsPreview[n]&&(r=e.connectionsPreview[n]),e.connectionsPreview[n]={...r,...t.payload}},removeConnectionPreview:(e,t)=>{const{connectionId:n}=t.payload;e.connectionsPreview[n]&&delete e.connectionsPreview[n]},clearConnectionPreviewsByConnectionId:(e,t)=>{const{connectionId:n}=t.payload;e.connectionsPreview=Object.fromEntries(Object.entries(e.connectionsPreview).filter(([r])=>r!==n))},clearAllConnectionPreviews:(e,t)=>{e.connectionsPreview={}},clearFilteredConnectionPreviewsByUserId:(e,t)=>{e.connectionsPreview=Object.fromEntries(Object.entries(e.connectionsPreview).filter(([n,r])=>r.userId===t.payload.userId))},addRequestByPotentialParticipant:(e,t)=>{const{connectionId:n,hostId:r,deviceId:i,windowId:o}=t.payload;e.startSharingTerminalRequests[n]={hostId:r,connectionId:n,deviceId:i,centrifugeClientId:t.payload.centrifugeClientId,windowId:o}},removeRequestByPotentialParticipant:(e,t)=>{const{connectionId:n}=t.payload;e.startSharingTerminalRequests[n]&&delete e.startSharingTerminalRequests[n]},toggleStartMultiplayerMenuOpened:(e,t)=>{const{terminalId:n}=t.payload;sV(e.startMultiplayerMenu,n),e.startMultiplayerMenu[n]&&(e.startMultiplayerMenu[n].isOpened=!e.startMultiplayerMenu[n].isOpened)},updateStartMultiplayerMenuStatus:(e,t)=>{const{terminalId:n,status:r}=t.payload;e.startMultiplayerMenu[n]?e.startMultiplayerMenu[n].status=r??"default":e.startMultiplayerMenu[n]={isOpened:!1,status:"default"}},removeStartMultiplayerMenu:(e,t)=>{const{terminalId:n}=t.payload;delete e.startMultiplayerMenu[n]},toggleMultiplayerWidgetOpened:(e,t)=>{const{sessionId:n}=t.payload,r=e.connections[n];r&&(sV(e.tabWidget,r.terminalId),e.tabWidget[r.terminalId].isOpened=!e.tabWidget[r.terminalId].isOpened,e.tabWidget[r.terminalId].isOpened&&(r.multiplayerTerminalMenuState="closed",r.multiplayerTerminalMenuType="hidden"))},setMultiplayerWidgetState:(e,t)=>{const{terminalId:n,state:r,isOpened:i}=t.payload;if(e.tabWidget[n]){if(e.tabWidget[n].state=r??"inactive",i===void 0)return;e.tabWidget[n].isOpened=i;return}e.tabWidget[n]={isOpened:!1,state:"inactive"}},removeMultiplayerWidget:(e,t)=>{const{terminalId:n}=t.payload;delete e.tabWidget[n]},closeOpenedMultiplayerWidgets:e=>{oV(e.tabWidget),oV(e.startMultiplayerMenu)}}}),oV=e=>{for(const t of Object.values(e))t.isOpened&&(t.isOpened=!1)};function G1e({connection:e,controlOwnerId:t,me:n,inviteLink:r}){const i=e;for(const o of i.participants){(n==null?void 0:n.participantId)===o.participantId&&(o.isHost=n.isHost,o.peerId=n.peerId,o.userId=n.userId,o.username=n.username);const s=o.participantId===t;o.isControlOwner=s,s&&(i.currentControlOwner=o)}r&&(i.inviteLink=r)}const N1e=({sessionId:e,terminalId:t,terminalConnectionId:n,hostId:r,inviteLink:i,windowId:o})=>({sessionId:e,terminalId:t,participants:[],controlRequests:[],status:"connecting",error:void 0,multiplayerTerminalMenuState:"hidden",multiplayerTerminalMenuType:"hidden",currentControlOwner:void 0,terminalConnectionId:n,hostId:r,inviteLink:i,windowId:o});Ie(_1e.type);function sV(e,t){Object.entries(e).forEach(([n,r])=>{n!==t&&r.isOpened&&(r.isOpened=!1)})}const{reducer:Z1e,actions:T1e}=_n({name:"nativeTheme",reducers:{setNativeTheme(e,t){return t.payload}},initialState:{shouldUseDarkColors:!1}}),{setNativeTheme:W1e}=T1e;function k1e(e,t=!1){const n=t?"http://localhost:2000":"ui-process";switch(e){case"preferences":return`${n}/src/settings-process/main.html`;default:return`${n}/src/ui-process/main.html`}}function V1e(e,t){return{query:{type:e,id:`${t.id}`}}}const O1e=0,BD=1,ED=2;function H1e(e){return e===BD}const RD="/hosts",F1e="/pf",GD="/sftp",x1e="/snippets",ND="/tabs",L1e=`${ND}/terminals/`,Y1e="/keychain",P1e="/knownhosts",bd=RD,X1e=new Map([[RD,"Hosts"],[F1e,"Port Forwarding"],[GD,"SFTP"],[x1e,"Snippets"],[P1e,"Known Hosts"],[Y1e,"Keychain"]]),U1e=e=>{const t=X1e.get(e);return t||"Hosts"},ZD=Ie("SHOW_ONBOARDING"),D1e=Ie("SHOW_ONBOARDING_IN_WINDOW");E("RECOVER_FROM_DECRYPTION_ERROR");Ve("OPEN_HOST_FORM");const K1e=E("OPEN_LOCAL_TERMINAL");Ve("OPEN_CONNECTION_IN_SFTP");const M1e=Ve("SET_NAVIGATION_PATH"),$1e=E("FAN_OUT_NAVIGATION_PATH");Ve("OPEN_TAB");const z1e=E("OPEN_VAULTS_TAB"),J1e=E("OPEN_SFTP_TAB"),TD=E("OPEN_SETTINGS"),j1e=E("NAVIGATE_SETTINGS"),Q1e=E("TOGGLE_UI_BLOCK"),q1e=E("MAYBE_OPEN_SERIAL_CONNECTION");E("OPEN_SERIAL_CONNECTION");E("@MULTI_KEY/OPEN_KEYCHAIN_AND_EDIT_MULTIKEY_FORM");const eZe=Ie("SHOW_PRIMARY_WINDOW_FOR_AN_ACTION"),tZe=[yD,AGe,vGe,EGe,SGe,bGe,BGe],nZe=e=>({...e,blockUiReferenceCount:e.blockUiReferenceCount+1}),aV=e=>({...e,blockUiReferenceCount:e.blockUiReferenceCount-1}),rZe={localPath:bd,homePath:bd,global:[],blockUiReferenceCount:0,forceUnblockUi:!1},iZe=dr(rZe,e=>{e.addCase(M1e,(t,{payload:n})=>{t.localPath=n,vS(n)&&(t.homePath=n)}),e.addCase($1e,(t,{payload:n})=>{const r=t.global.find(i=>i.windowId===n.windowId);r==null?t.global.push({...n,homePath:vS(n.path)?n.path:bd}):(r.path=n.path,r.homePath=vS(n.path)?n.path:r.homePath)}),e.addCase(pN,(t,{payload:n})=>{n!==ED&&t.global.push({path:bd,homePath:bd,windowId:n})}),e.addCase(mN,(t,{payload:n})=>{Id(t.global,r=>r.windowId===n)}),e.addCase(Q1e,t=>{t.forceUnblockUi=!t.forceUnblockUi});for(const{request:t,success:n,failure:r}of tZe)e.addCase(t,nZe),e.addCase(n,aV),e.addCase(r,aV)}),vS=e=>!(e.includes(ND)||e.includes(GD)),oZe=E("UPDATE_PRESENCE_EFFECT");E("SET_ACTIVE_TEAMMATES_FOR_PRESENCE_EFFECT");E("JOIN_PRESENCE_EFFECT_CHANNEL");E("LEAVE_PRESENCE_EFFECT_CHANNEL");E("DOWNLOAD_AVATARS");const sZe=E("UPDATE_AVATARS"),WD=Ie("INIT_PRESENCE_EFFECT");E("SHOW_PRESENCE_EFFECT");const lV=[],aZe=zn({[oZe.toString()]:(e,{payload:t})=>[...t],[Ur.success.toString()]:()=>lV},lV),lZe=E("CHANGE_SAVING_QUICK_CONNECT_AS_HOST"),cZe=zn({[lZe.toString()]:sl((e,{payload:t})=>{e.saveAsHost=t})},{saveAsHost:!0}),uZe=E("SET_SAVE_TOGGLE_FOR_RUN_SNIPPET"),dZe=dr(!0,e=>{e.addCase(uZe,(t,n)=>n.payload)}),fZe={saveToggle:dZe},gZe=em(fZe),{reducer:hZe,actions:pZe}=_n({name:"shortcuts",reducers:{updateShortcutsScheme(e,{payload:t}){return t??null}},initialState:null}),{updateShortcutsScheme:mZe}=pZe,yZe=Ve("@SNACK/ADD_LOCAL_SNACK_NOTIFICATION"),IZe=E("@SNACK/ADD_SNACK_NOTIFICATION"),vZe=E("@SNACK/REMOVE_SNACK_NOTIFICATION"),CZe=E("@SNACK/UPDATE_SNACK_NOTIFICATION"),bZe=[],AZe=zn({[yZe.toString()]:(e,{payload:t})=>[...e,t],[IZe.toString()]:(e,{payload:t})=>[...e,t],[vZe.toString()]:(e,{payload:t})=>[...e.filter(n=>n.id!==t)],[CZe.toString()]:(e,{payload:t})=>[...e.filter(n=>n.id!==t.id),t],[Ur.success.toString()]:()=>[]},bZe),SZe=E("INCREASE_CONNECTIONS_AMOUNT"),_Ze=E("SET_FIRST_LAUNCH_DATE"),wZe=E("RESET_SESSION"),BZe=E("ADD_TAB_DURING_SESSION"),EZe=E("INTERACT_DURING_SESSION"),RZe={connectionsAmount:0,firstLaunchDate:Date.now(),firstInteractionDate:Date.now(),lastInteractionDate:Date.now(),sessionTabs:{}},GZe=dr(RZe,e=>{e.addCase(SZe,t=>{t.connectionsAmount+=1}),e.addCase(_Ze,(t,{payload:n})=>{t.firstLaunchDate=n}),e.addCase(wZe,t=>{t.sessionTabs={},t.firstInteractionDate=Date.now(),t.lastInteractionDate=Date.now()}),e.addCase(BZe,(t,{payload:n})=>{const{windowId:r,openedTabs:i}=n,o=t.sessionTabs[r];o?t.sessionTabs[r]={totalTerminalTabs:o.totalTerminalTabs+1,maxTerminalTabs:Math.max(i,o.maxTerminalTabs)}:t.sessionTabs[r]={totalTerminalTabs:i,maxTerminalTabs:i}}),e.addCase(EZe,t=>{t.lastInteractionDate=Date.now()})}),CS=Ie("SYNC");Ie("SYNC_SEQUENTIALLY");Ie("SYNC_ON_PUSH_NOTIFICATION");const NZe=E("INIT_SYNC_OPTIONS"),ZZe=E("UPDATE_SYNC_KEYS_AND_IDENTITIES");Ie("TOGGLE_SYNC_KEYS_AND_IDENTITIES");const TZe=E("SET_VAULTS_SUPPORTED",e=>e.err?{payload:!0}:{payload:e.val});Ie("TRY_FIX_SHARING_SETUP");const WZe=dr({lastSyncDate:null,syncKeysAndIdentities:!1,inProcess:"no",isSharingPossible:!0},e=>{e.addCase(NZe,(t,{payload:n})=>({...t,...n})).addCase(CS.request,(t,{payload:n})=>{t.inProcess=n}).addCase(CS.success,(t,{payload:n})=>({...t,...n,inProcess:"no"})).addCase(CS.failure,t=>{t.inProcess="no"}).addCase(ZZe,(t,{payload:n})=>{t.syncKeysAndIdentities=n}).addCase(Ur.success,t=>{t.lastSyncDate=null}).addCase(TZe,(t,{payload:n})=>{t.isSharingPossible=n})}),kZe={tags:[]},{actions:gje,reducer:VZe}=_n({name:"filters/tags",initialState:kZe,reducers:{refreshTags:(e,t)=>{e.tags=t.payload}}}),cV={terminalReconnectQueue:[],timer:0},OZe=dr(cV,e=>e.addCase(WGe,(t,{payload:n})=>{t.terminalReconnectQueue.push(n)}).addCase(kGe,(t,{payload:n})=>{Id(t.terminalReconnectQueue,r=>r.id===n.id)}).addCase(VGe,t=>{t.timer=Math.min(t.timer+3e4,6e4)}).addCase(OGe,t=>{t.timer=cV.timer}));var ho={},kD={exports:{}},VD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,D){var ue=M.length;M.push(D);e:for(;0<ue;){var Re=ue-1>>>1,Oe=M[Re];if(0<i(Oe,D))M[Re]=D,M[ue]=Oe,ue=Re;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var D=M[0],ue=M.pop();if(ue!==D){M[0]=ue;e:for(var Re=0,Oe=M.length,pe=Oe>>>1;Re<pe;){var re=2*(Re+1)-1,q=M[re],Be=re+1,B=M[Be];if(0>i(q,ue))Be<Oe&&0>i(B,q)?(M[Re]=B,M[Be]=ue,Re=Be):(M[Re]=q,M[re]=ue,Re=re);else if(Be<Oe&&0>i(B,ue))M[Re]=B,M[Be]=ue,Re=Be;else break e}}return D}function i(M,D){var ue=M.sortIndex-D.sortIndex;return ue!==0?ue:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,g=3,p=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var D=n(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=M)r(c),D.sortIndex=D.expirationTime,t(l,D);else break;D=n(c)}}function N(M){if(v=!1,A(M),!m)if(n(l)!==null)m=!0,oe(L);else{var D=n(c);D!==null&&X(N,D.startTime-M)}}function L(M,D){m=!1,v&&(v=!1,I(j),j=-1),p=!0;var ue=g;try{for(A(D),d=n(l);d!==null&&(!(d.expirationTime>D)||M&&!Ue());){var Re=d.callback;if(typeof Re=="function"){d.callback=null,g=d.priorityLevel;var Oe=Re(d.expirationTime<=D);D=e.unstable_now(),typeof Oe=="function"?d.callback=Oe:d===n(l)&&r(l),A(D)}else r(l);d=n(l)}if(d!==null)var pe=!0;else{var re=n(c);re!==null&&X(N,re.startTime-D),pe=!1}return pe}finally{d=null,g=ue,p=!1}}var G=!1,W=null,j=-1,O=5,Ce=-1;function Ue(){return!(e.unstable_now()-Ce<O)}function $e(){if(W!==null){var M=e.unstable_now();Ce=M;var D=!0;try{D=W(!0,M)}finally{D?ze():(G=!1,W=null)}}else G=!1}var ze;if(typeof b=="function")ze=function(){b($e)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,P=Ee.port2;Ee.port1.onmessage=$e,ze=function(){P.postMessage(null)}}else ze=function(){y($e,0)};function oe(M){W=M,G||(G=!0,ze())}function X(M,D){j=y(function(){M(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,oe(L))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(g){case 1:case 2:case 3:var D=3;break;default:D=g}var ue=g;g=D;try{return M()}finally{g=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ue=g;g=M;try{return D()}finally{g=ue}},e.unstable_scheduleCallback=function(M,D,ue){var Re=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,M){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=ue+Oe,M={id:u++,callback:D,priorityLevel:M,startTime:ue,expirationTime:Oe,sortIndex:-1},ue>Re?(M.sortIndex=ue,t(c,M),n(l)===null&&M===n(c)&&(v?(I(j),j=-1):v=!0,X(N,ue-Re))):(M.sortIndex=Oe,t(l,M),m||p||(m=!0,oe(L))),M},e.unstable_shouldYield=Ue,e.unstable_wrapCallback=function(M){var D=g;return function(){var ue=g;g=D;try{return M.apply(this,arguments)}finally{g=ue}}}})(VD);kD.exports=VD;var HZe=kD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OD=Eb,Xi=HZe;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HD=new Set,np={};function au(e,t){$d(e,t),$d(e+"Capture",t)}function $d(e,t){for(np[e]=t,e=0;e<t.length;e++)HD.add(t[e])}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ww=Object.prototype.hasOwnProperty,FZe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uV={},dV={};function xZe(e){return Ww.call(dV,e)?!0:Ww.call(uV,e)?!1:FZe.test(e)?dV[e]=!0:(uV[e]=!0,!1)}function LZe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YZe(e,t,n,r){if(t===null||typeof t>"u"||LZe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function di(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Br[e]=new di(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Br[t]=new di(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Br[e]=new di(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Br[e]=new di(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Br[e]=new di(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Br[e]=new di(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Br[e]=new di(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Br[e]=new di(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Br[e]=new di(e,5,!1,e.toLowerCase(),null,!1,!1)});var bN=/[\-:]([a-z])/g;function AN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bN,AN);Br[t]=new di(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bN,AN);Br[t]=new di(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bN,AN);Br[t]=new di(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Br[e]=new di(e,1,!1,e.toLowerCase(),null,!1,!1)});Br.xlinkHref=new di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Br[e]=new di(e,1,!1,e.toLowerCase(),null,!0,!0)});function SN(e,t,n,r){var i=Br.hasOwnProperty(t)?Br[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YZe(t,n,i,r)&&(n=null),r||i===null?xZe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ba=OD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,my=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Du=Symbol.for("react.fragment"),_N=Symbol.for("react.strict_mode"),kw=Symbol.for("react.profiler"),FD=Symbol.for("react.provider"),xD=Symbol.for("react.context"),wN=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),Ow=Symbol.for("react.suspense_list"),BN=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),LD=Symbol.for("react.offscreen"),fV=Symbol.iterator;function Cg(e){return e===null||typeof e!="object"?null:(e=fV&&e[fV]||e["@@iterator"],typeof e=="function"?e:null)}var Wn=Object.assign,bS;function $g(e){if(bS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bS=t&&t[1]||""}return`
`+bS+e}var AS=!1;function SS(e,t){if(!e||AS)return"";AS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{AS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$g(e):""}function PZe(e){switch(e.tag){case 5:return $g(e.type);case 16:return $g("Lazy");case 13:return $g("Suspense");case 19:return $g("SuspenseList");case 0:case 2:case 15:return e=SS(e.type,!1),e;case 11:return e=SS(e.type.render,!1),e;case 1:return e=SS(e.type,!0),e;default:return""}}function Hw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Du:return"Fragment";case Uu:return"Portal";case kw:return"Profiler";case _N:return"StrictMode";case Vw:return"Suspense";case Ow:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xD:return(e.displayName||"Context")+".Consumer";case FD:return(e._context.displayName||"Context")+".Provider";case wN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case BN:return t=e.displayName||null,t!==null?t:Hw(e.type)||"Memo";case Ua:t=e._payload,e=e._init;try{return Hw(e(t))}catch{}}return null}function XZe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hw(t);case 8:return t===_N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UZe(e){var t=YD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yy(e){e._valueTracker||(e._valueTracker=UZe(e))}function PD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=YD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Iv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fw(e,t){var n=t.checked;return Wn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gV(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function XD(e,t){t=t.checked,t!=null&&SN(e,"checked",t,!1)}function xw(e,t){XD(e,t);var n=kl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lw(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lw(e,t.type,kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hV(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lw(e,t,n){(t!=="number"||Iv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zg=Array.isArray;function Ad(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Yw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Wn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pV(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Fe(92));if(zg(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kl(n)}}function UD(e,t){var n=kl(t.value),r=kl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mV(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Iy,KD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Iy=Iy||document.createElement("div"),Iy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Iy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DZe=["Webkit","ms","Moz","O"];Object.keys(fh).forEach(function(e){DZe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fh[t]=fh[e]})});function MD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fh.hasOwnProperty(e)&&fh[e]?(""+t).trim():t+"px"}function $D(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=MD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var KZe=Wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xw(e,t){if(t){if(KZe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function Uw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dw=null;function EN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kw=null,Sd=null,_d=null;function yV(e){if(e=lm(e)){if(typeof Kw!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=Pb(t),Kw(e.stateNode,e.type,t))}}function zD(e){Sd?_d?_d.push(e):_d=[e]:Sd=e}function JD(){if(Sd){var e=Sd,t=_d;if(_d=Sd=null,yV(e),t)for(e=0;e<t.length;e++)yV(t[e])}}function jD(e,t){return e(t)}function QD(){}var _S=!1;function qD(e,t,n){if(_S)return e(t,n);_S=!0;try{return jD(e,t,n)}finally{_S=!1,(Sd!==null||_d!==null)&&(QD(),JD())}}function ip(e,t){var n=e.stateNode;if(n===null)return null;var r=Pb(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Fe(231,t,typeof n));return n}var Mw=!1;if(pa)try{var bg={};Object.defineProperty(bg,"passive",{get:function(){Mw=!0}}),window.addEventListener("test",bg,bg),window.removeEventListener("test",bg,bg)}catch{Mw=!1}function MZe(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var gh=!1,vv=null,Cv=!1,$w=null,$Ze={onError:function(e){gh=!0,vv=e}};function zZe(e,t,n,r,i,o,s,a,l){gh=!1,vv=null,MZe.apply($Ze,arguments)}function JZe(e,t,n,r,i,o,s,a,l){if(zZe.apply(this,arguments),gh){if(gh){var c=vv;gh=!1,vv=null}else throw Error(Fe(198));Cv||(Cv=!0,$w=c)}}function lu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eK(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function IV(e){if(lu(e)!==e)throw Error(Fe(188))}function jZe(e){var t=e.alternate;if(!t){if(t=lu(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return IV(i),e;if(o===r)return IV(i),t;o=o.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?e:t}function tK(e){return e=jZe(e),e!==null?nK(e):null}function nK(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nK(e);if(t!==null)return t;e=e.sibling}return null}var rK=Xi.unstable_scheduleCallback,vV=Xi.unstable_cancelCallback,QZe=Xi.unstable_shouldYield,qZe=Xi.unstable_requestPaint,Yn=Xi.unstable_now,e2e=Xi.unstable_getCurrentPriorityLevel,RN=Xi.unstable_ImmediatePriority,iK=Xi.unstable_UserBlockingPriority,bv=Xi.unstable_NormalPriority,t2e=Xi.unstable_LowPriority,oK=Xi.unstable_IdlePriority,Fb=null,Es=null;function n2e(e){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(Fb,e,void 0,(e.current.flags&128)===128)}catch{}}var Lo=Math.clz32?Math.clz32:o2e,r2e=Math.log,i2e=Math.LN2;function o2e(e){return e>>>=0,e===0?32:31-(r2e(e)/i2e|0)|0}var vy=64,Cy=4194304;function Jg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Av(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Jg(a):(o&=s,o!==0&&(r=Jg(o)))}else s=n&~i,s!==0?r=Jg(s):o!==0&&(r=Jg(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lo(t),i=1<<n,r|=e[n],t&=~i;return r}function s2e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a2e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Lo(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=s2e(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function zw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sK(){var e=vy;return vy<<=1,!(vy&4194240)&&(vy=64),e}function wS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lo(t),e[t]=n}function l2e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Lo(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function GN(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var fn=0;function aK(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lK,NN,cK,uK,dK,Jw=!1,by=[],dl=null,fl=null,gl=null,op=new Map,sp=new Map,za=[],c2e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CV(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":op.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sp.delete(t.pointerId)}}function Ag(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=lm(t),t!==null&&NN(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function u2e(e,t,n,r,i){switch(t){case"focusin":return dl=Ag(dl,e,t,n,r,i),!0;case"dragenter":return fl=Ag(fl,e,t,n,r,i),!0;case"mouseover":return gl=Ag(gl,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return op.set(o,Ag(op.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sp.set(o,Ag(sp.get(o)||null,e,t,n,r,i)),!0}return!1}function fK(e){var t=Ic(e.target);if(t!==null){var n=lu(t);if(n!==null){if(t=n.tag,t===13){if(t=eK(n),t!==null){e.blockedOn=t,dK(e.priority,function(){cK(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cI(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Dw=r,n.target.dispatchEvent(r),Dw=null}else return t=lm(n),t!==null&&NN(t),e.blockedOn=n,!1;t.shift()}return!0}function bV(e,t,n){cI(e)&&n.delete(t)}function d2e(){Jw=!1,dl!==null&&cI(dl)&&(dl=null),fl!==null&&cI(fl)&&(fl=null),gl!==null&&cI(gl)&&(gl=null),op.forEach(bV),sp.forEach(bV)}function Sg(e,t){e.blockedOn===t&&(e.blockedOn=null,Jw||(Jw=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,d2e)))}function ap(e){function t(i){return Sg(i,e)}if(0<by.length){Sg(by[0],e);for(var n=1;n<by.length;n++){var r=by[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dl!==null&&Sg(dl,e),fl!==null&&Sg(fl,e),gl!==null&&Sg(gl,e),op.forEach(t),sp.forEach(t),n=0;n<za.length;n++)r=za[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<za.length&&(n=za[0],n.blockedOn===null);)fK(n),n.blockedOn===null&&za.shift()}var wd=Ba.ReactCurrentBatchConfig,Sv=!0;function f2e(e,t,n,r){var i=fn,o=wd.transition;wd.transition=null;try{fn=1,ZN(e,t,n,r)}finally{fn=i,wd.transition=o}}function g2e(e,t,n,r){var i=fn,o=wd.transition;wd.transition=null;try{fn=4,ZN(e,t,n,r)}finally{fn=i,wd.transition=o}}function ZN(e,t,n,r){if(Sv){var i=jw(e,t,n,r);if(i===null)VS(e,t,r,_v,n),CV(e,r);else if(u2e(i,e,t,n,r))r.stopPropagation();else if(CV(e,r),t&4&&-1<c2e.indexOf(e)){for(;i!==null;){var o=lm(i);if(o!==null&&lK(o),o=jw(e,t,n,r),o===null&&VS(e,t,r,_v,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else VS(e,t,r,null,n)}}var _v=null;function jw(e,t,n,r){if(_v=null,e=EN(r),e=Ic(e),e!==null)if(t=lu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eK(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _v=e,null}function gK(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e2e()){case RN:return 1;case iK:return 4;case bv:case t2e:return 16;case oK:return 536870912;default:return 16}default:return 16}}var tl=null,TN=null,uI=null;function hK(){if(uI)return uI;var e,t=TN,n=t.length,r,i="value"in tl?tl.value:tl.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return uI=i.slice(e,1<r?1-r:void 0)}function dI(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ay(){return!0}function AV(){return!1}function Di(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ay:AV,this.isPropagationStopped=AV,this}return Wn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ay)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ay)},persist:function(){},isPersistent:Ay}),t}var Lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WN=Di(Lf),am=Wn({},Lf,{view:0,detail:0}),h2e=Di(am),BS,ES,_g,xb=Wn({},am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_g&&(_g&&e.type==="mousemove"?(BS=e.screenX-_g.screenX,ES=e.screenY-_g.screenY):ES=BS=0,_g=e),BS)},movementY:function(e){return"movementY"in e?e.movementY:ES}}),SV=Di(xb),p2e=Wn({},xb,{dataTransfer:0}),m2e=Di(p2e),y2e=Wn({},am,{relatedTarget:0}),RS=Di(y2e),I2e=Wn({},Lf,{animationName:0,elapsedTime:0,pseudoElement:0}),v2e=Di(I2e),C2e=Wn({},Lf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b2e=Di(C2e),A2e=Wn({},Lf,{data:0}),_V=Di(A2e),S2e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_2e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w2e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B2e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=w2e[e])?!!t[e]:!1}function kN(){return B2e}var E2e=Wn({},am,{key:function(e){if(e.key){var t=S2e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dI(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_2e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kN,charCode:function(e){return e.type==="keypress"?dI(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dI(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),R2e=Di(E2e),G2e=Wn({},xb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wV=Di(G2e),N2e=Wn({},am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kN}),Z2e=Di(N2e),T2e=Wn({},Lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),W2e=Di(T2e),k2e=Wn({},xb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),V2e=Di(k2e),O2e=[9,13,27,32],VN=pa&&"CompositionEvent"in window,hh=null;pa&&"documentMode"in document&&(hh=document.documentMode);var H2e=pa&&"TextEvent"in window&&!hh,pK=pa&&(!VN||hh&&8<hh&&11>=hh),BV=String.fromCharCode(32),EV=!1;function mK(e,t){switch(e){case"keyup":return O2e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yK(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ku=!1;function F2e(e,t){switch(e){case"compositionend":return yK(t);case"keypress":return t.which!==32?null:(EV=!0,BV);case"textInput":return e=t.data,e===BV&&EV?null:e;default:return null}}function x2e(e,t){if(Ku)return e==="compositionend"||!VN&&mK(e,t)?(e=hK(),uI=TN=tl=null,Ku=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pK&&t.locale!=="ko"?null:t.data;default:return null}}var L2e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RV(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!L2e[e.type]:t==="textarea"}function IK(e,t,n,r){zD(r),t=wv(t,"onChange"),0<t.length&&(n=new WN("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ph=null,lp=null;function Y2e(e){GK(e,0)}function Lb(e){var t=zu(e);if(PD(t))return e}function P2e(e,t){if(e==="change")return t}var vK=!1;if(pa){var GS;if(pa){var NS="oninput"in document;if(!NS){var GV=document.createElement("div");GV.setAttribute("oninput","return;"),NS=typeof GV.oninput=="function"}GS=NS}else GS=!1;vK=GS&&(!document.documentMode||9<document.documentMode)}function NV(){ph&&(ph.detachEvent("onpropertychange",CK),lp=ph=null)}function CK(e){if(e.propertyName==="value"&&Lb(lp)){var t=[];IK(t,lp,e,EN(e)),qD(Y2e,t)}}function X2e(e,t,n){e==="focusin"?(NV(),ph=t,lp=n,ph.attachEvent("onpropertychange",CK)):e==="focusout"&&NV()}function U2e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lb(lp)}function D2e(e,t){if(e==="click")return Lb(t)}function K2e(e,t){if(e==="input"||e==="change")return Lb(t)}function M2e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xo=typeof Object.is=="function"?Object.is:M2e;function cp(e,t){if(Xo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ww.call(t,i)||!Xo(e[i],t[i]))return!1}return!0}function ZV(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TV(e,t){var n=ZV(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZV(n)}}function bK(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bK(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AK(){for(var e=window,t=Iv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Iv(e.document)}return t}function ON(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $2e(e){var t=AK(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bK(n.ownerDocument.documentElement,n)){if(r!==null&&ON(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=TV(n,o);var s=TV(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z2e=pa&&"documentMode"in document&&11>=document.documentMode,Mu=null,Qw=null,mh=null,qw=!1;function WV(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qw||Mu==null||Mu!==Iv(r)||(r=Mu,"selectionStart"in r&&ON(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mh&&cp(mh,r)||(mh=r,r=wv(Qw,"onSelect"),0<r.length&&(t=new WN("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Mu)))}function Sy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $u={animationend:Sy("Animation","AnimationEnd"),animationiteration:Sy("Animation","AnimationIteration"),animationstart:Sy("Animation","AnimationStart"),transitionend:Sy("Transition","TransitionEnd")},ZS={},SK={};pa&&(SK=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function Yb(e){if(ZS[e])return ZS[e];if(!$u[e])return e;var t=$u[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in SK)return ZS[e]=t[n];return e}var _K=Yb("animationend"),wK=Yb("animationiteration"),BK=Yb("animationstart"),EK=Yb("transitionend"),RK=new Map,kV="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dl(e,t){RK.set(e,t),au(t,[e])}for(var TS=0;TS<kV.length;TS++){var WS=kV[TS],J2e=WS.toLowerCase(),j2e=WS[0].toUpperCase()+WS.slice(1);Dl(J2e,"on"+j2e)}Dl(_K,"onAnimationEnd");Dl(wK,"onAnimationIteration");Dl(BK,"onAnimationStart");Dl("dblclick","onDoubleClick");Dl("focusin","onFocus");Dl("focusout","onBlur");Dl(EK,"onTransitionEnd");$d("onMouseEnter",["mouseout","mouseover"]);$d("onMouseLeave",["mouseout","mouseover"]);$d("onPointerEnter",["pointerout","pointerover"]);$d("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q2e=new Set("cancel close invalid load scroll toggle".split(" ").concat(jg));function VV(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,JZe(r,t,void 0,e),e.currentTarget=null}function GK(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;VV(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;VV(i,a,c),o=l}}}if(Cv)throw e=$w,Cv=!1,$w=null,e}function bn(e,t){var n=t[iB];n===void 0&&(n=t[iB]=new Set);var r=e+"__bubble";n.has(r)||(NK(t,e,2,!1),n.add(r))}function kS(e,t,n){var r=0;t&&(r|=4),NK(n,e,r,t)}var _y="_reactListening"+Math.random().toString(36).slice(2);function up(e){if(!e[_y]){e[_y]=!0,HD.forEach(function(n){n!=="selectionchange"&&(Q2e.has(n)||kS(n,!1,e),kS(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_y]||(t[_y]=!0,kS("selectionchange",!1,t))}}function NK(e,t,n,r){switch(gK(t)){case 1:var i=f2e;break;case 4:i=g2e;break;default:i=ZN}n=i.bind(null,t,n,e),i=void 0,!Mw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function VS(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ic(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}qD(function(){var c=o,u=EN(n),d=[];e:{var g=RK.get(e);if(g!==void 0){var p=WN,m=e;switch(e){case"keypress":if(dI(n)===0)break e;case"keydown":case"keyup":p=R2e;break;case"focusin":m="focus",p=RS;break;case"focusout":m="blur",p=RS;break;case"beforeblur":case"afterblur":p=RS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=SV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=m2e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Z2e;break;case _K:case wK:case BK:p=v2e;break;case EK:p=W2e;break;case"scroll":p=h2e;break;case"wheel":p=V2e;break;case"copy":case"cut":case"paste":p=b2e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wV}var v=(t&4)!==0,y=!v&&e==="scroll",I=v?g!==null?g+"Capture":null:g;v=[];for(var b=c,A;b!==null;){A=b;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,I!==null&&(N=ip(b,I),N!=null&&v.push(dp(b,N,A)))),y)break;b=b.return}0<v.length&&(g=new p(g,m,null,n,u),d.push({event:g,listeners:v}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==Dw&&(m=n.relatedTarget||n.fromElement)&&(Ic(m)||m[ma]))break e;if((p||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Ic(m):null,m!==null&&(y=lu(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=SV,N="onMouseLeave",I="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=wV,N="onPointerLeave",I="onPointerEnter",b="pointer"),y=p==null?g:zu(p),A=m==null?g:zu(m),g=new v(N,b+"leave",p,n,u),g.target=y,g.relatedTarget=A,N=null,Ic(u)===c&&(v=new v(I,b+"enter",m,n,u),v.target=A,v.relatedTarget=y,N=v),y=N,p&&m)t:{for(v=p,I=m,b=0,A=v;A;A=Gu(A))b++;for(A=0,N=I;N;N=Gu(N))A++;for(;0<b-A;)v=Gu(v),b--;for(;0<A-b;)I=Gu(I),A--;for(;b--;){if(v===I||I!==null&&v===I.alternate)break t;v=Gu(v),I=Gu(I)}v=null}else v=null;p!==null&&OV(d,g,p,v,!1),m!==null&&y!==null&&OV(d,y,m,v,!0)}}e:{if(g=c?zu(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var L=P2e;else if(RV(g))if(vK)L=K2e;else{L=U2e;var G=X2e}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=D2e);if(L&&(L=L(e,c))){IK(d,L,n,u);break e}G&&G(e,g,c),e==="focusout"&&(G=g._wrapperState)&&G.controlled&&g.type==="number"&&Lw(g,"number",g.value)}switch(G=c?zu(c):window,e){case"focusin":(RV(G)||G.contentEditable==="true")&&(Mu=G,Qw=c,mh=null);break;case"focusout":mh=Qw=Mu=null;break;case"mousedown":qw=!0;break;case"contextmenu":case"mouseup":case"dragend":qw=!1,WV(d,n,u);break;case"selectionchange":if(z2e)break;case"keydown":case"keyup":WV(d,n,u)}var W;if(VN)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ku?mK(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(pK&&n.locale!=="ko"&&(Ku||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ku&&(W=hK()):(tl=u,TN="value"in tl?tl.value:tl.textContent,Ku=!0)),G=wv(c,j),0<G.length&&(j=new _V(j,e,null,n,u),d.push({event:j,listeners:G}),W?j.data=W:(W=yK(n),W!==null&&(j.data=W)))),(W=H2e?F2e(e,n):x2e(e,n))&&(c=wv(c,"onBeforeInput"),0<c.length&&(u=new _V("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=W))}GK(d,t)})}function dp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wv(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ip(e,n),o!=null&&r.unshift(dp(e,o,i)),o=ip(e,t),o!=null&&r.push(dp(e,o,i))),e=e.return}return r}function Gu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function OV(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ip(n,o),l!=null&&s.unshift(dp(n,l,a))):i||(l=ip(n,o),l!=null&&s.push(dp(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var q2e=/\r\n?/g,eTe=/\u0000|\uFFFD/g;function HV(e){return(typeof e=="string"?e:""+e).replace(q2e,`
`).replace(eTe,"")}function wy(e,t,n){if(t=HV(t),HV(e)!==t&&n)throw Error(Fe(425))}function Bv(){}var eB=null,tB=null;function nB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rB=typeof setTimeout=="function"?setTimeout:void 0,tTe=typeof clearTimeout=="function"?clearTimeout:void 0,FV=typeof Promise=="function"?Promise:void 0,nTe=typeof queueMicrotask=="function"?queueMicrotask:typeof FV<"u"?function(e){return FV.resolve(null).then(e).catch(rTe)}:rB;function rTe(e){setTimeout(function(){throw e})}function OS(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ap(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ap(t)}function hl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xV(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yf=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Yf,fp="__reactProps$"+Yf,ma="__reactContainer$"+Yf,iB="__reactEvents$"+Yf,iTe="__reactListeners$"+Yf,oTe="__reactHandles$"+Yf;function Ic(e){var t=e[Ss];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[Ss]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xV(e);e!==null;){if(n=e[Ss])return n;e=xV(e)}return t}e=n,n=e.parentNode}return null}function lm(e){return e=e[Ss]||e[ma],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function Pb(e){return e[fp]||null}var oB=[],Ju=-1;function Kl(e){return{current:e}}function Sn(e){0>Ju||(e.current=oB[Ju],oB[Ju]=null,Ju--)}function vn(e,t){Ju++,oB[Ju]=e.current,e.current=t}var Vl={},Pr=Kl(Vl),_i=Kl(!1),Lc=Vl;function zd(e,t){var n=e.type.contextTypes;if(!n)return Vl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function wi(e){return e=e.childContextTypes,e!=null}function Ev(){Sn(_i),Sn(Pr)}function LV(e,t,n){if(Pr.current!==Vl)throw Error(Fe(168));vn(Pr,t),vn(_i,n)}function ZK(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Fe(108,XZe(e)||"Unknown",i));return Wn({},n,r)}function Rv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vl,Lc=Pr.current,vn(Pr,e),vn(_i,_i.current),!0}function YV(e,t,n){var r=e.stateNode;if(!r)throw Error(Fe(169));n?(e=ZK(e,t,Lc),r.__reactInternalMemoizedMergedChildContext=e,Sn(_i),Sn(Pr),vn(Pr,e)):Sn(_i),vn(_i,n)}var ta=null,Xb=!1,HS=!1;function TK(e){ta===null?ta=[e]:ta.push(e)}function sTe(e){Xb=!0,TK(e)}function Ml(){if(!HS&&ta!==null){HS=!0;var e=0,t=fn;try{var n=ta;for(fn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ta=null,Xb=!1}catch(i){throw ta!==null&&(ta=ta.slice(e+1)),rK(RN,Ml),i}finally{fn=t,HS=!1}}return null}var ju=[],Qu=0,Gv=null,Nv=0,ro=[],io=0,Yc=null,ia=1,oa="";function dc(e,t){ju[Qu++]=Nv,ju[Qu++]=Gv,Gv=e,Nv=t}function WK(e,t,n){ro[io++]=ia,ro[io++]=oa,ro[io++]=Yc,Yc=e;var r=ia;e=oa;var i=32-Lo(r)-1;r&=~(1<<i),n+=1;var o=32-Lo(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ia=1<<32-Lo(t)+i|n<<i|r,oa=o+e}else ia=1<<o|n<<i|r,oa=e}function HN(e){e.return!==null&&(dc(e,1),WK(e,1,0))}function FN(e){for(;e===Gv;)Gv=ju[--Qu],ju[Qu]=null,Nv=ju[--Qu],ju[Qu]=null;for(;e===Yc;)Yc=ro[--io],ro[io]=null,oa=ro[--io],ro[io]=null,ia=ro[--io],ro[io]=null}var Yi=null,Li=null,Bn=!1,No=null;function kK(e,t){var n=oo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function PV(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yi=e,Li=hl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yi=e,Li=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yc!==null?{id:ia,overflow:oa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=oo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yi=e,Li=null,!0):!1;default:return!1}}function sB(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aB(e){if(Bn){var t=Li;if(t){var n=t;if(!PV(e,t)){if(sB(e))throw Error(Fe(418));t=hl(n.nextSibling);var r=Yi;t&&PV(e,t)?kK(r,n):(e.flags=e.flags&-4097|2,Bn=!1,Yi=e)}}else{if(sB(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,Bn=!1,Yi=e}}}function XV(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yi=e}function By(e){if(e!==Yi)return!1;if(!Bn)return XV(e),Bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nB(e.type,e.memoizedProps)),t&&(t=Li)){if(sB(e))throw VK(),Error(Fe(418));for(;t;)kK(e,t),t=hl(t.nextSibling)}if(XV(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Li=hl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Li=null}}else Li=Yi?hl(e.stateNode.nextSibling):null;return!0}function VK(){for(var e=Li;e;)e=hl(e.nextSibling)}function Jd(){Li=Yi=null,Bn=!1}function xN(e){No===null?No=[e]:No.push(e)}var aTe=Ba.ReactCurrentBatchConfig;function Eo(e,t){if(e&&e.defaultProps){t=Wn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Zv=Kl(null),Tv=null,qu=null,LN=null;function YN(){LN=qu=Tv=null}function PN(e){var t=Zv.current;Sn(Zv),e._currentValue=t}function lB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bd(e,t){Tv=e,LN=qu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bi=!0),e.firstContext=null)}function fo(e){var t=e._currentValue;if(LN!==e)if(e={context:e,memoizedValue:t,next:null},qu===null){if(Tv===null)throw Error(Fe(308));qu=e,Tv.dependencies={lanes:0,firstContext:e}}else qu=qu.next=e;return t}var vc=null;function XN(e){vc===null?vc=[e]:vc.push(e)}function OK(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,XN(t)):(n.next=i.next,i.next=n),t.interleaved=n,ya(e,r)}function ya(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Da=!1;function UN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HK(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ya(e,n)}return i=r.interleaved,i===null?(t.next=t,XN(r)):(t.next=i.next,i.next=t),r.interleaved=t,ya(e,n)}function fI(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,GN(e,n)}}function UV(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wv(e,t,n,r){var i=e.updateQueue;Da=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var g=a.lane,p=a.eventTime;if((r&g)===g){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,v=a;switch(g=t,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,g);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,g=typeof m=="function"?m.call(p,d,g):m,g==null)break e;d=Wn({},d,g);break e;case 2:Da=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else p={eventTime:p,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Xc|=s,e.lanes=s,e.memoizedState=d}}function DV(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var FK=new OD.Component().refs;function cB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Wn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ub={isMounted:function(e){return(e=e._reactInternals)?lu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ii(),i=yl(e),o=la(r,i);o.payload=t,n!=null&&(o.callback=n),t=pl(e,o,i),t!==null&&(Yo(t,e,i,r),fI(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ii(),i=yl(e),o=la(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=pl(e,o,i),t!==null&&(Yo(t,e,i,r),fI(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ii(),r=yl(e),i=la(n,r);i.tag=2,t!=null&&(i.callback=t),t=pl(e,i,r),t!==null&&(Yo(t,e,r,n),fI(t,e,r))}};function KV(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!cp(n,r)||!cp(i,o):!0}function xK(e,t,n){var r=!1,i=Vl,o=t.contextType;return typeof o=="object"&&o!==null?o=fo(o):(i=wi(t)?Lc:Pr.current,r=t.contextTypes,o=(r=r!=null)?zd(e,i):Vl),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ub,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function MV(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ub.enqueueReplaceState(t,t.state,null)}function uB(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=FK,UN(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=fo(o):(o=wi(t)?Lc:Pr.current,i.context=zd(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(cB(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ub.enqueueReplaceState(i,i.state,null),Wv(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===FK&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,e))}return e}function Ey(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $V(e){var t=e._init;return t(e._payload)}function LK(e){function t(I,b){if(e){var A=I.deletions;A===null?(I.deletions=[b],I.flags|=16):A.push(b)}}function n(I,b){if(!e)return null;for(;b!==null;)t(I,b),b=b.sibling;return null}function r(I,b){for(I=new Map;b!==null;)b.key!==null?I.set(b.key,b):I.set(b.index,b),b=b.sibling;return I}function i(I,b){return I=Il(I,b),I.index=0,I.sibling=null,I}function o(I,b,A){return I.index=A,e?(A=I.alternate,A!==null?(A=A.index,A<b?(I.flags|=2,b):A):(I.flags|=2,b)):(I.flags|=1048576,b)}function s(I){return e&&I.alternate===null&&(I.flags|=2),I}function a(I,b,A,N){return b===null||b.tag!==6?(b=US(A,I.mode,N),b.return=I,b):(b=i(b,A),b.return=I,b)}function l(I,b,A,N){var L=A.type;return L===Du?u(I,b,A.props.children,N,A.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ua&&$V(L)===b.type)?(N=i(b,A.props),N.ref=wg(I,b,A),N.return=I,N):(N=II(A.type,A.key,A.props,null,I.mode,N),N.ref=wg(I,b,A),N.return=I,N)}function c(I,b,A,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=DS(A,I.mode,N),b.return=I,b):(b=i(b,A.children||[]),b.return=I,b)}function u(I,b,A,N,L){return b===null||b.tag!==7?(b=Bc(A,I.mode,N,L),b.return=I,b):(b=i(b,A),b.return=I,b)}function d(I,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=US(""+b,I.mode,A),b.return=I,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case my:return A=II(b.type,b.key,b.props,null,I.mode,A),A.ref=wg(I,null,b),A.return=I,A;case Uu:return b=DS(b,I.mode,A),b.return=I,b;case Ua:var N=b._init;return d(I,N(b._payload),A)}if(zg(b)||Cg(b))return b=Bc(b,I.mode,A,null),b.return=I,b;Ey(I,b)}return null}function g(I,b,A,N){var L=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return L!==null?null:a(I,b,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case my:return A.key===L?l(I,b,A,N):null;case Uu:return A.key===L?c(I,b,A,N):null;case Ua:return L=A._init,g(I,b,L(A._payload),N)}if(zg(A)||Cg(A))return L!==null?null:u(I,b,A,N,null);Ey(I,A)}return null}function p(I,b,A,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return I=I.get(A)||null,a(b,I,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case my:return I=I.get(N.key===null?A:N.key)||null,l(b,I,N,L);case Uu:return I=I.get(N.key===null?A:N.key)||null,c(b,I,N,L);case Ua:var G=N._init;return p(I,b,A,G(N._payload),L)}if(zg(N)||Cg(N))return I=I.get(A)||null,u(b,I,N,L,null);Ey(b,N)}return null}function m(I,b,A,N){for(var L=null,G=null,W=b,j=b=0,O=null;W!==null&&j<A.length;j++){W.index>j?(O=W,W=null):O=W.sibling;var Ce=g(I,W,A[j],N);if(Ce===null){W===null&&(W=O);break}e&&W&&Ce.alternate===null&&t(I,W),b=o(Ce,b,j),G===null?L=Ce:G.sibling=Ce,G=Ce,W=O}if(j===A.length)return n(I,W),Bn&&dc(I,j),L;if(W===null){for(;j<A.length;j++)W=d(I,A[j],N),W!==null&&(b=o(W,b,j),G===null?L=W:G.sibling=W,G=W);return Bn&&dc(I,j),L}for(W=r(I,W);j<A.length;j++)O=p(W,I,j,A[j],N),O!==null&&(e&&O.alternate!==null&&W.delete(O.key===null?j:O.key),b=o(O,b,j),G===null?L=O:G.sibling=O,G=O);return e&&W.forEach(function(Ue){return t(I,Ue)}),Bn&&dc(I,j),L}function v(I,b,A,N){var L=Cg(A);if(typeof L!="function")throw Error(Fe(150));if(A=L.call(A),A==null)throw Error(Fe(151));for(var G=L=null,W=b,j=b=0,O=null,Ce=A.next();W!==null&&!Ce.done;j++,Ce=A.next()){W.index>j?(O=W,W=null):O=W.sibling;var Ue=g(I,W,Ce.value,N);if(Ue===null){W===null&&(W=O);break}e&&W&&Ue.alternate===null&&t(I,W),b=o(Ue,b,j),G===null?L=Ue:G.sibling=Ue,G=Ue,W=O}if(Ce.done)return n(I,W),Bn&&dc(I,j),L;if(W===null){for(;!Ce.done;j++,Ce=A.next())Ce=d(I,Ce.value,N),Ce!==null&&(b=o(Ce,b,j),G===null?L=Ce:G.sibling=Ce,G=Ce);return Bn&&dc(I,j),L}for(W=r(I,W);!Ce.done;j++,Ce=A.next())Ce=p(W,I,j,Ce.value,N),Ce!==null&&(e&&Ce.alternate!==null&&W.delete(Ce.key===null?j:Ce.key),b=o(Ce,b,j),G===null?L=Ce:G.sibling=Ce,G=Ce);return e&&W.forEach(function($e){return t(I,$e)}),Bn&&dc(I,j),L}function y(I,b,A,N){if(typeof A=="object"&&A!==null&&A.type===Du&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case my:e:{for(var L=A.key,G=b;G!==null;){if(G.key===L){if(L=A.type,L===Du){if(G.tag===7){n(I,G.sibling),b=i(G,A.props.children),b.return=I,I=b;break e}}else if(G.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ua&&$V(L)===G.type){n(I,G.sibling),b=i(G,A.props),b.ref=wg(I,G,A),b.return=I,I=b;break e}n(I,G);break}else t(I,G);G=G.sibling}A.type===Du?(b=Bc(A.props.children,I.mode,N,A.key),b.return=I,I=b):(N=II(A.type,A.key,A.props,null,I.mode,N),N.ref=wg(I,b,A),N.return=I,I=N)}return s(I);case Uu:e:{for(G=A.key;b!==null;){if(b.key===G)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){n(I,b.sibling),b=i(b,A.children||[]),b.return=I,I=b;break e}else{n(I,b);break}else t(I,b);b=b.sibling}b=DS(A,I.mode,N),b.return=I,I=b}return s(I);case Ua:return G=A._init,y(I,b,G(A._payload),N)}if(zg(A))return m(I,b,A,N);if(Cg(A))return v(I,b,A,N);Ey(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(n(I,b.sibling),b=i(b,A),b.return=I,I=b):(n(I,b),b=US(A,I.mode,N),b.return=I,I=b),s(I)):n(I,b)}return y}var jd=LK(!0),YK=LK(!1),cm={},Rs=Kl(cm),gp=Kl(cm),hp=Kl(cm);function Cc(e){if(e===cm)throw Error(Fe(174));return e}function DN(e,t){switch(vn(hp,t),vn(gp,e),vn(Rs,cm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pw(t,e)}Sn(Rs),vn(Rs,t)}function Qd(){Sn(Rs),Sn(gp),Sn(hp)}function PK(e){Cc(hp.current);var t=Cc(Rs.current),n=Pw(t,e.type);t!==n&&(vn(gp,e),vn(Rs,n))}function KN(e){gp.current===e&&(Sn(Rs),Sn(gp))}var Zn=Kl(0);function kv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var FS=[];function MN(){for(var e=0;e<FS.length;e++)FS[e]._workInProgressVersionPrimary=null;FS.length=0}var gI=Ba.ReactCurrentDispatcher,xS=Ba.ReactCurrentBatchConfig,Pc=0,Tn=null,tr=null,lr=null,Vv=!1,yh=!1,pp=0,lTe=0;function Tr(){throw Error(Fe(321))}function $N(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xo(e[n],t[n]))return!1;return!0}function zN(e,t,n,r,i,o){if(Pc=o,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gI.current=e===null||e.memoizedState===null?fTe:gTe,e=n(r,i),yh){o=0;do{if(yh=!1,pp=0,25<=o)throw Error(Fe(301));o+=1,lr=tr=null,t.updateQueue=null,gI.current=hTe,e=n(r,i)}while(yh)}if(gI.current=Ov,t=tr!==null&&tr.next!==null,Pc=0,lr=tr=Tn=null,Vv=!1,t)throw Error(Fe(300));return e}function JN(){var e=pp!==0;return pp=0,e}function ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?Tn.memoizedState=lr=e:lr=lr.next=e,lr}function go(){if(tr===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=tr.next;var t=lr===null?Tn.memoizedState:lr.next;if(t!==null)lr=t,tr=e;else{if(e===null)throw Error(Fe(310));tr=e,e={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},lr===null?Tn.memoizedState=lr=e:lr=lr.next=e}return lr}function mp(e,t){return typeof t=="function"?t(e):t}function LS(e){var t=go(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=tr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Pc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Tn.lanes|=u,Xc|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Xo(r,t.memoizedState)||(bi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Tn.lanes|=o,Xc|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function YS(e){var t=go(),n=t.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Xo(o,t.memoizedState)||(bi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function XK(){}function UK(e,t){var n=Tn,r=go(),i=t(),o=!Xo(r.memoizedState,i);if(o&&(r.memoizedState=i,bi=!0),r=r.queue,jN(MK.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||lr!==null&&lr.memoizedState.tag&1){if(n.flags|=2048,yp(9,KK.bind(null,n,r,i,t),void 0,null),fr===null)throw Error(Fe(349));Pc&30||DK(n,t,i)}return i}function DK(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function KK(e,t,n,r){t.value=n,t.getSnapshot=r,$K(t)&&zK(e)}function MK(e,t,n){return n(function(){$K(t)&&zK(e)})}function $K(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xo(e,n)}catch{return!0}}function zK(e){var t=ya(e,1);t!==null&&Yo(t,e,1,-1)}function zV(e){var t=ms();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:e},t.queue=e,e=e.dispatch=dTe.bind(null,Tn,e),[t.memoizedState,e]}function yp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function JK(){return go().memoizedState}function hI(e,t,n,r){var i=ms();Tn.flags|=e,i.memoizedState=yp(1|t,n,void 0,r===void 0?null:r)}function Db(e,t,n,r){var i=go();r=r===void 0?null:r;var o=void 0;if(tr!==null){var s=tr.memoizedState;if(o=s.destroy,r!==null&&$N(r,s.deps)){i.memoizedState=yp(t,n,o,r);return}}Tn.flags|=e,i.memoizedState=yp(1|t,n,o,r)}function JV(e,t){return hI(8390656,8,e,t)}function jN(e,t){return Db(2048,8,e,t)}function jK(e,t){return Db(4,2,e,t)}function QK(e,t){return Db(4,4,e,t)}function qK(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function e9(e,t,n){return n=n!=null?n.concat([e]):null,Db(4,4,qK.bind(null,t,e),n)}function QN(){}function t9(e,t){var n=go();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$N(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function n9(e,t){var n=go();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$N(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function r9(e,t,n){return Pc&21?(Xo(n,t)||(n=sK(),Tn.lanes|=n,Xc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=n)}function cTe(e,t){var n=fn;fn=n!==0&&4>n?n:4,e(!0);var r=xS.transition;xS.transition={};try{e(!1),t()}finally{fn=n,xS.transition=r}}function i9(){return go().memoizedState}function uTe(e,t,n){var r=yl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o9(e))s9(t,n);else if(n=OK(e,t,n,r),n!==null){var i=ii();Yo(n,e,r,i),a9(n,t,r)}}function dTe(e,t,n){var r=yl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o9(e))s9(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Xo(a,s)){var l=t.interleaved;l===null?(i.next=i,XN(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=OK(e,t,i,r),n!==null&&(i=ii(),Yo(n,e,r,i),a9(n,t,r))}}function o9(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function s9(e,t){yh=Vv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function a9(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,GN(e,n)}}var Ov={readContext:fo,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},fTe={readContext:fo,useCallback:function(e,t){return ms().memoizedState=[e,t===void 0?null:t],e},useContext:fo,useEffect:JV,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hI(4194308,4,qK.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hI(4194308,4,e,t)},useInsertionEffect:function(e,t){return hI(4,2,e,t)},useMemo:function(e,t){var n=ms();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ms();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uTe.bind(null,Tn,e),[r.memoizedState,e]},useRef:function(e){var t=ms();return e={current:e},t.memoizedState=e},useState:zV,useDebugValue:QN,useDeferredValue:function(e){return ms().memoizedState=e},useTransition:function(){var e=zV(!1),t=e[0];return e=cTe.bind(null,e[1]),ms().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Tn,i=ms();if(Bn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=t(),fr===null)throw Error(Fe(349));Pc&30||DK(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,JV(MK.bind(null,r,o,e),[e]),r.flags|=2048,yp(9,KK.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ms(),t=fr.identifierPrefix;if(Bn){var n=oa,r=ia;n=(r&~(1<<32-Lo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lTe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gTe={readContext:fo,useCallback:t9,useContext:fo,useEffect:jN,useImperativeHandle:e9,useInsertionEffect:jK,useLayoutEffect:QK,useMemo:n9,useReducer:LS,useRef:JK,useState:function(){return LS(mp)},useDebugValue:QN,useDeferredValue:function(e){var t=go();return r9(t,tr.memoizedState,e)},useTransition:function(){var e=LS(mp)[0],t=go().memoizedState;return[e,t]},useMutableSource:XK,useSyncExternalStore:UK,useId:i9,unstable_isNewReconciler:!1},hTe={readContext:fo,useCallback:t9,useContext:fo,useEffect:jN,useImperativeHandle:e9,useInsertionEffect:jK,useLayoutEffect:QK,useMemo:n9,useReducer:YS,useRef:JK,useState:function(){return YS(mp)},useDebugValue:QN,useDeferredValue:function(e){var t=go();return tr===null?t.memoizedState=e:r9(t,tr.memoizedState,e)},useTransition:function(){var e=YS(mp)[0],t=go().memoizedState;return[e,t]},useMutableSource:XK,useSyncExternalStore:UK,useId:i9,unstable_isNewReconciler:!1};function qd(e,t){try{var n="",r=t;do n+=PZe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function PS(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dB(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pTe=typeof WeakMap=="function"?WeakMap:Map;function l9(e,t,n){n=la(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fv||(Fv=!0,bB=r),dB(e,t)},n}function c9(e,t,n){n=la(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){dB(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){dB(e,t),typeof r!="function"&&(ml===null?ml=new Set([this]):ml.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function jV(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pTe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=GTe.bind(null,e,t,n),t.then(e,e))}function QV(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qV(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=la(-1,1),t.tag=2,pl(n,t,1))),n.lanes|=1),e)}var mTe=Ba.ReactCurrentOwner,bi=!1;function qr(e,t,n,r){t.child=e===null?YK(t,null,n,r):jd(t,e.child,n,r)}function eO(e,t,n,r,i){n=n.render;var o=t.ref;return Bd(t,i),r=zN(e,t,n,r,o,i),n=JN(),e!==null&&!bi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ia(e,t,i)):(Bn&&n&&HN(t),t.flags|=1,qr(e,t,r,i),t.child)}function tO(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!s1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,u9(e,t,o,r,i)):(e=II(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:cp,n(s,r)&&e.ref===t.ref)return Ia(e,t,i)}return t.flags|=1,e=Il(o,r),e.ref=t.ref,e.return=t,t.child=e}function u9(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(cp(o,r)&&e.ref===t.ref)if(bi=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(bi=!0);else return t.lanes=e.lanes,Ia(e,t,i)}return fB(e,t,n,r,i)}function d9(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(td,Oi),Oi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vn(td,Oi),Oi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,vn(td,Oi),Oi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,vn(td,Oi),Oi|=r;return qr(e,t,i,n),t.child}function f9(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fB(e,t,n,r,i){var o=wi(n)?Lc:Pr.current;return o=zd(t,o),Bd(t,i),n=zN(e,t,n,r,o,i),r=JN(),e!==null&&!bi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ia(e,t,i)):(Bn&&r&&HN(t),t.flags|=1,qr(e,t,n,i),t.child)}function nO(e,t,n,r,i){if(wi(n)){var o=!0;Rv(t)}else o=!1;if(Bd(t,i),t.stateNode===null)pI(e,t),xK(t,n,r),uB(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=fo(c):(c=wi(n)?Lc:Pr.current,c=zd(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&MV(t,s,r,c),Da=!1;var g=t.memoizedState;s.state=g,Wv(t,r,s,i),l=t.memoizedState,a!==r||g!==l||_i.current||Da?(typeof u=="function"&&(cB(t,n,u,r),l=t.memoizedState),(a=Da||KV(t,n,a,r,g,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,HK(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Eo(t.type,a),s.props=c,d=t.pendingProps,g=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=fo(l):(l=wi(n)?Lc:Pr.current,l=zd(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||g!==l)&&MV(t,s,r,l),Da=!1,g=t.memoizedState,s.state=g,Wv(t,r,s,i);var m=t.memoizedState;a!==d||g!==m||_i.current||Da?(typeof p=="function"&&(cB(t,n,p,r),m=t.memoizedState),(c=Da||KV(t,n,c,r,g,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return gB(e,t,n,r,o,i)}function gB(e,t,n,r,i,o){f9(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&YV(t,n,!1),Ia(e,t,o);r=t.stateNode,mTe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=jd(t,e.child,null,o),t.child=jd(t,null,a,o)):qr(e,t,a,o),t.memoizedState=r.state,i&&YV(t,n,!0),t.child}function g9(e){var t=e.stateNode;t.pendingContext?LV(e,t.pendingContext,t.pendingContext!==t.context):t.context&&LV(e,t.context,!1),DN(e,t.containerInfo)}function rO(e,t,n,r,i){return Jd(),xN(i),t.flags|=256,qr(e,t,n,r),t.child}var hB={dehydrated:null,treeContext:null,retryLane:0};function pB(e){return{baseLanes:e,cachePool:null,transitions:null}}function h9(e,t,n){var r=t.pendingProps,i=Zn.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vn(Zn,i&1),e===null)return aB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=$b(s,r,0,null),e=Bc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=pB(n),t.memoizedState=hB,e):qN(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yTe(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Il(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Il(a,o):(o=Bc(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?pB(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=hB,r}return o=e.child,e=o.sibling,r=Il(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qN(e,t){return t=$b({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ry(e,t,n,r){return r!==null&&xN(r),jd(t,e.child,null,n),e=qN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yTe(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=PS(Error(Fe(422))),Ry(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=$b({mode:"visible",children:r.children},i,0,null),o=Bc(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&jd(t,e.child,null,s),t.child.memoizedState=pB(s),t.memoizedState=hB,o);if(!(t.mode&1))return Ry(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Fe(419)),r=PS(o,r,void 0),Ry(e,t,s,r)}if(a=(s&e.childLanes)!==0,bi||a){if(r=fr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ya(e,i),Yo(r,e,i,-1))}return o1(),r=PS(Error(Fe(421))),Ry(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=NTe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Li=hl(i.nextSibling),Yi=t,Bn=!0,No=null,e!==null&&(ro[io++]=ia,ro[io++]=oa,ro[io++]=Yc,ia=e.id,oa=e.overflow,Yc=t),t=qN(t,r.children),t.flags|=4096,t)}function iO(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lB(e.return,t,n)}function XS(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function p9(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(qr(e,t,r.children,n),r=Zn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iO(e,n,t);else if(e.tag===19)iO(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vn(Zn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&kv(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),XS(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&kv(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}XS(t,!0,n,null,o);break;case"together":XS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pI(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ia(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,n=Il(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Il(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ITe(e,t,n){switch(t.tag){case 3:g9(t),Jd();break;case 5:PK(t);break;case 1:wi(t.type)&&Rv(t);break;case 4:DN(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;vn(Zv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(vn(Zn,Zn.current&1),t.flags|=128,null):n&t.child.childLanes?h9(e,t,n):(vn(Zn,Zn.current&1),e=Ia(e,t,n),e!==null?e.sibling:null);vn(Zn,Zn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return p9(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn(Zn,Zn.current),r)break;return null;case 22:case 23:return t.lanes=0,d9(e,t,n)}return Ia(e,t,n)}var m9,mB,y9,I9;m9=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mB=function(){};y9=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Cc(Rs.current);var o=null;switch(n){case"input":i=Fw(e,i),r=Fw(e,r),o=[];break;case"select":i=Wn({},i,{value:void 0}),r=Wn({},r,{value:void 0}),o=[];break;case"textarea":i=Yw(e,i),r=Yw(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bv)}Xw(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(np.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(np.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};I9=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bg(e,t){if(!Bn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vTe(e,t,n){var r=t.pendingProps;switch(FN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(t),null;case 1:return wi(t.type)&&Ev(),Wr(t),null;case 3:return r=t.stateNode,Qd(),Sn(_i),Sn(Pr),MN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(By(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,No!==null&&(_B(No),No=null))),mB(e,t),Wr(t),null;case 5:KN(t);var i=Cc(hp.current);if(n=t.type,e!==null&&t.stateNode!=null)y9(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Fe(166));return Wr(t),null}if(e=Cc(Rs.current),By(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ss]=t,r[fp]=o,e=(t.mode&1)!==0,n){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(i=0;i<jg.length;i++)bn(jg[i],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":gV(r,o),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},bn("invalid",r);break;case"textarea":pV(r,o),bn("invalid",r)}Xw(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&wy(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&wy(r.textContent,a,e),i=["children",""+a]):np.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&bn("scroll",r)}switch(n){case"input":yy(r),hV(r,o,!0);break;case"textarea":yy(r),mV(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Bv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ss]=t,e[fp]=r,m9(e,t,!1,!1),t.stateNode=e;e:{switch(s=Uw(n,r),n){case"dialog":bn("cancel",e),bn("close",e),i=r;break;case"iframe":case"object":case"embed":bn("load",e),i=r;break;case"video":case"audio":for(i=0;i<jg.length;i++)bn(jg[i],e);i=r;break;case"source":bn("error",e),i=r;break;case"img":case"image":case"link":bn("error",e),bn("load",e),i=r;break;case"details":bn("toggle",e),i=r;break;case"input":gV(e,r),i=Fw(e,r),bn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Wn({},r,{value:void 0}),bn("invalid",e);break;case"textarea":pV(e,r),i=Yw(e,r),bn("invalid",e);break;default:i=r}Xw(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$D(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KD(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rp(e,l):typeof l=="number"&&rp(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(np.hasOwnProperty(o)?l!=null&&o==="onScroll"&&bn("scroll",e):l!=null&&SN(e,o,l,s))}switch(n){case"input":yy(e),hV(e,r,!1);break;case"textarea":yy(e),mV(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kl(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ad(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ad(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Bv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wr(t),null;case 6:if(e&&t.stateNode!=null)I9(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Fe(166));if(n=Cc(hp.current),Cc(Rs.current),By(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ss]=t,(o=r.nodeValue!==n)&&(e=Yi,e!==null))switch(e.tag){case 3:wy(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wy(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ss]=t,t.stateNode=r}return Wr(t),null;case 13:if(Sn(Zn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bn&&Li!==null&&t.mode&1&&!(t.flags&128))VK(),Jd(),t.flags|=98560,o=!1;else if(o=By(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Fe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Fe(317));o[Ss]=t}else Jd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wr(t),o=!1}else No!==null&&(_B(No),No=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Zn.current&1?rr===0&&(rr=3):o1())),t.updateQueue!==null&&(t.flags|=4),Wr(t),null);case 4:return Qd(),mB(e,t),e===null&&up(t.stateNode.containerInfo),Wr(t),null;case 10:return PN(t.type._context),Wr(t),null;case 17:return wi(t.type)&&Ev(),Wr(t),null;case 19:if(Sn(Zn),o=t.memoizedState,o===null)return Wr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Bg(o,!1);else{if(rr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=kv(e),s!==null){for(t.flags|=128,Bg(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return vn(Zn,Zn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Yn()>ef&&(t.flags|=128,r=!0,Bg(o,!1),t.lanes=4194304)}else{if(!r)if(e=kv(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Bn)return Wr(t),null}else 2*Yn()-o.renderingStartTime>ef&&n!==1073741824&&(t.flags|=128,r=!0,Bg(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Yn(),t.sibling=null,n=Zn.current,vn(Zn,r?n&1|2:n&1),t):(Wr(t),null);case 22:case 23:return i1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Oi&1073741824&&(Wr(t),t.subtreeFlags&6&&(t.flags|=8192)):Wr(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function CTe(e,t){switch(FN(t),t.tag){case 1:return wi(t.type)&&Ev(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qd(),Sn(_i),Sn(Pr),MN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return KN(t),null;case 13:if(Sn(Zn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));Jd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(Zn),null;case 4:return Qd(),null;case 10:return PN(t.type._context),null;case 22:case 23:return i1(),null;case 24:return null;default:return null}}var Gy=!1,Or=!1,bTe=typeof WeakSet=="function"?WeakSet:Set,lt=null;function ed(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(e,t,r)}else n.current=null}function yB(e,t,n){try{n()}catch(r){Vn(e,t,r)}}var oO=!1;function ATe(e,t){if(eB=Sv,e=AK(),ON(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=e,g=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)g=d,d=p;for(;;){if(d===e)break t;if(g===n&&++c===i&&(a=s),g===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tB={focusedElem:e,selectionRange:n},Sv=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){t=lt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,y=m.memoizedState,I=t.stateNode,b=I.getSnapshotBeforeUpdate(t.elementType===t.type?v:Eo(t.type,v),y);I.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(N){Vn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}return m=oO,oO=!1,m}function Ih(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&yB(t,n,o)}i=i.next}while(i!==r)}}function Kb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function IB(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function v9(e){var t=e.alternate;t!==null&&(e.alternate=null,v9(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ss],delete t[fp],delete t[iB],delete t[iTe],delete t[oTe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function C9(e){return e.tag===5||e.tag===3||e.tag===4}function sO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||C9(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bv));else if(r!==4&&(e=e.child,e!==null))for(vB(e,t,n),e=e.sibling;e!==null;)vB(e,t,n),e=e.sibling}function CB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(CB(e,t,n),e=e.sibling;e!==null;)CB(e,t,n),e=e.sibling}var br=null,Ro=!1;function Ya(e,t,n){for(n=n.child;n!==null;)b9(e,t,n),n=n.sibling}function b9(e,t,n){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(Fb,n)}catch{}switch(n.tag){case 5:Or||ed(n,t);case 6:var r=br,i=Ro;br=null,Ya(e,t,n),br=r,Ro=i,br!==null&&(Ro?(e=br,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):br.removeChild(n.stateNode));break;case 18:br!==null&&(Ro?(e=br,n=n.stateNode,e.nodeType===8?OS(e.parentNode,n):e.nodeType===1&&OS(e,n),ap(e)):OS(br,n.stateNode));break;case 4:r=br,i=Ro,br=n.stateNode.containerInfo,Ro=!0,Ya(e,t,n),br=r,Ro=i;break;case 0:case 11:case 14:case 15:if(!Or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&yB(n,t,s),i=i.next}while(i!==r)}Ya(e,t,n);break;case 1:if(!Or&&(ed(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vn(n,t,a)}Ya(e,t,n);break;case 21:Ya(e,t,n);break;case 22:n.mode&1?(Or=(r=Or)||n.memoizedState!==null,Ya(e,t,n),Or=r):Ya(e,t,n);break;default:Ya(e,t,n)}}function aO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bTe),t.forEach(function(r){var i=ZTe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _o(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,Ro=!1;break e;case 3:br=a.stateNode.containerInfo,Ro=!0;break e;case 4:br=a.stateNode.containerInfo,Ro=!0;break e}a=a.return}if(br===null)throw Error(Fe(160));b9(o,s,i),br=null,Ro=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)A9(t,e),t=t.sibling}function A9(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_o(t,e),fs(e),r&4){try{Ih(3,e,e.return),Kb(3,e)}catch(v){Vn(e,e.return,v)}try{Ih(5,e,e.return)}catch(v){Vn(e,e.return,v)}}break;case 1:_o(t,e),fs(e),r&512&&n!==null&&ed(n,n.return);break;case 5:if(_o(t,e),fs(e),r&512&&n!==null&&ed(n,n.return),e.flags&32){var i=e.stateNode;try{rp(i,"")}catch(v){Vn(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&XD(i,o),Uw(a,s);var c=Uw(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?$D(i,d):u==="dangerouslySetInnerHTML"?KD(i,d):u==="children"?rp(i,d):SN(i,u,d,c)}switch(a){case"input":xw(i,o);break;case"textarea":UD(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ad(i,!!o.multiple,p,!1):g!==!!o.multiple&&(o.defaultValue!=null?Ad(i,!!o.multiple,o.defaultValue,!0):Ad(i,!!o.multiple,o.multiple?[]:"",!1))}i[fp]=o}catch(v){Vn(e,e.return,v)}}break;case 6:if(_o(t,e),fs(e),r&4){if(e.stateNode===null)throw Error(Fe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Vn(e,e.return,v)}}break;case 3:if(_o(t,e),fs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ap(t.containerInfo)}catch(v){Vn(e,e.return,v)}break;case 4:_o(t,e),fs(e);break;case 13:_o(t,e),fs(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(n1=Yn())),r&4&&aO(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Or=(c=Or)||u,_o(t,e),Or=c):_o(t,e),fs(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(lt=e,u=e.child;u!==null;){for(d=lt=u;lt!==null;){switch(g=lt,p=g.child,g.tag){case 0:case 11:case 14:case 15:Ih(4,g,g.return);break;case 1:ed(g,g.return);var m=g.stateNode;if(typeof m.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Vn(r,n,v)}}break;case 5:ed(g,g.return);break;case 22:if(g.memoizedState!==null){cO(d);continue}}p!==null?(p.return=g,lt=p):cO(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MD("display",s))}catch(v){Vn(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Vn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_o(t,e),fs(e),r&4&&aO(e);break;case 21:break;default:_o(t,e),fs(e)}}function fs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(C9(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rp(i,""),r.flags&=-33);var o=sO(e);CB(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=sO(e);vB(e,a,s);break;default:throw Error(Fe(161))}}catch(l){Vn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function STe(e,t,n){lt=e,S9(e)}function S9(e,t,n){for(var r=(e.mode&1)!==0;lt!==null;){var i=lt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Gy;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Or;a=Gy;var c=Or;if(Gy=s,(Or=l)&&!c)for(lt=i;lt!==null;)s=lt,l=s.child,s.tag===22&&s.memoizedState!==null?uO(i):l!==null?(l.return=s,lt=l):uO(i);for(;o!==null;)lt=o,S9(o),o=o.sibling;lt=i,Gy=a,Or=c}lO(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,lt=o):lO(e)}}function lO(e){for(;lt!==null;){var t=lt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Or||Kb(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Or)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Eo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&DV(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}DV(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ap(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Or||t.flags&512&&IB(t)}catch(g){Vn(t,t.return,g)}}if(t===e){lt=null;break}if(n=t.sibling,n!==null){n.return=t.return,lt=n;break}lt=t.return}}function cO(e){for(;lt!==null;){var t=lt;if(t===e){lt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,lt=n;break}lt=t.return}}function uO(e){for(;lt!==null;){var t=lt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Kb(4,t)}catch(l){Vn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Vn(t,i,l)}}var o=t.return;try{IB(t)}catch(l){Vn(t,o,l)}break;case 5:var s=t.return;try{IB(t)}catch(l){Vn(t,s,l)}}}catch(l){Vn(t,t.return,l)}if(t===e){lt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,lt=a;break}lt=t.return}}var _Te=Math.ceil,Hv=Ba.ReactCurrentDispatcher,e1=Ba.ReactCurrentOwner,lo=Ba.ReactCurrentBatchConfig,en=0,fr=null,Kn=null,_r=0,Oi=0,td=Kl(0),rr=0,Ip=null,Xc=0,Mb=0,t1=0,vh=null,Ci=null,n1=0,ef=1/0,js=null,Fv=!1,bB=null,ml=null,Ny=!1,nl=null,xv=0,Ch=0,AB=null,mI=-1,yI=0;function ii(){return en&6?Yn():mI!==-1?mI:mI=Yn()}function yl(e){return e.mode&1?en&2&&_r!==0?_r&-_r:aTe.transition!==null?(yI===0&&(yI=sK()),yI):(e=fn,e!==0||(e=window.event,e=e===void 0?16:gK(e.type)),e):1}function Yo(e,t,n,r){if(50<Ch)throw Ch=0,AB=null,Error(Fe(185));sm(e,n,r),(!(en&2)||e!==fr)&&(e===fr&&(!(en&2)&&(Mb|=n),rr===4&&Ja(e,_r)),Bi(e,r),n===1&&en===0&&!(t.mode&1)&&(ef=Yn()+500,Xb&&Ml()))}function Bi(e,t){var n=e.callbackNode;a2e(e,t);var r=Av(e,e===fr?_r:0);if(r===0)n!==null&&vV(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vV(n),t===1)e.tag===0?sTe(dO.bind(null,e)):TK(dO.bind(null,e)),nTe(function(){!(en&6)&&Ml()}),n=null;else{switch(aK(r)){case 1:n=RN;break;case 4:n=iK;break;case 16:n=bv;break;case 536870912:n=oK;break;default:n=bv}n=Z9(n,_9.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _9(e,t){if(mI=-1,yI=0,en&6)throw Error(Fe(327));var n=e.callbackNode;if(Ed()&&e.callbackNode!==n)return null;var r=Av(e,e===fr?_r:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Lv(e,r);else{t=r;var i=en;en|=2;var o=B9();(fr!==e||_r!==t)&&(js=null,ef=Yn()+500,wc(e,t));do try{ETe();break}catch(a){w9(e,a)}while(1);YN(),Hv.current=o,en=i,Kn!==null?t=0:(fr=null,_r=0,t=rr)}if(t!==0){if(t===2&&(i=zw(e),i!==0&&(r=i,t=SB(e,i))),t===1)throw n=Ip,wc(e,0),Ja(e,r),Bi(e,Yn()),n;if(t===6)Ja(e,r);else{if(i=e.current.alternate,!(r&30)&&!wTe(i)&&(t=Lv(e,r),t===2&&(o=zw(e),o!==0&&(r=o,t=SB(e,o))),t===1))throw n=Ip,wc(e,0),Ja(e,r),Bi(e,Yn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Fe(345));case 2:fc(e,Ci,js);break;case 3:if(Ja(e,r),(r&130023424)===r&&(t=n1+500-Yn(),10<t)){if(Av(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ii(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rB(fc.bind(null,e,Ci,js),t);break}fc(e,Ci,js);break;case 4:if(Ja(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Lo(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Yn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_Te(r/1960))-r,10<r){e.timeoutHandle=rB(fc.bind(null,e,Ci,js),r);break}fc(e,Ci,js);break;case 5:fc(e,Ci,js);break;default:throw Error(Fe(329))}}}return Bi(e,Yn()),e.callbackNode===n?_9.bind(null,e):null}function SB(e,t){var n=vh;return e.current.memoizedState.isDehydrated&&(wc(e,t).flags|=256),e=Lv(e,t),e!==2&&(t=Ci,Ci=n,t!==null&&_B(t)),e}function _B(e){Ci===null?Ci=e:Ci.push.apply(Ci,e)}function wTe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Xo(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ja(e,t){for(t&=~t1,t&=~Mb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lo(t),r=1<<n;e[n]=-1,t&=~r}}function dO(e){if(en&6)throw Error(Fe(327));Ed();var t=Av(e,0);if(!(t&1))return Bi(e,Yn()),null;var n=Lv(e,t);if(e.tag!==0&&n===2){var r=zw(e);r!==0&&(t=r,n=SB(e,r))}if(n===1)throw n=Ip,wc(e,0),Ja(e,t),Bi(e,Yn()),n;if(n===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fc(e,Ci,js),Bi(e,Yn()),null}function r1(e,t){var n=en;en|=1;try{return e(t)}finally{en=n,en===0&&(ef=Yn()+500,Xb&&Ml())}}function Uc(e){nl!==null&&nl.tag===0&&!(en&6)&&Ed();var t=en;en|=1;var n=lo.transition,r=fn;try{if(lo.transition=null,fn=1,e)return e()}finally{fn=r,lo.transition=n,en=t,!(en&6)&&Ml()}}function i1(){Oi=td.current,Sn(td)}function wc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tTe(n)),Kn!==null)for(n=Kn.return;n!==null;){var r=n;switch(FN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ev();break;case 3:Qd(),Sn(_i),Sn(Pr),MN();break;case 5:KN(r);break;case 4:Qd();break;case 13:Sn(Zn);break;case 19:Sn(Zn);break;case 10:PN(r.type._context);break;case 22:case 23:i1()}n=n.return}if(fr=e,Kn=e=Il(e.current,null),_r=Oi=t,rr=0,Ip=null,t1=Mb=Xc=0,Ci=vh=null,vc!==null){for(t=0;t<vc.length;t++)if(n=vc[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}vc=null}return e}function w9(e,t){do{var n=Kn;try{if(YN(),gI.current=Ov,Vv){for(var r=Tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vv=!1}if(Pc=0,lr=tr=Tn=null,yh=!1,pp=0,e1.current=null,n===null||n.return===null){rr=1,Ip=t,Kn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=QV(s);if(p!==null){p.flags&=-257,qV(p,s,a,o,t),p.mode&1&&jV(o,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){jV(o,c,t),o1();break e}l=Error(Fe(426))}}else if(Bn&&a.mode&1){var y=QV(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),qV(y,s,a,o,t),xN(qd(l,a));break e}}o=l=qd(l,a),rr!==4&&(rr=2),vh===null?vh=[o]:vh.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var I=l9(o,l,t);UV(o,I);break e;case 1:a=l;var b=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ml===null||!ml.has(A)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=c9(o,a,t);UV(o,N);break e}}o=o.return}while(o!==null)}R9(n)}catch(L){t=L,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(1)}function B9(){var e=Hv.current;return Hv.current=Ov,e===null?Ov:e}function o1(){(rr===0||rr===3||rr===2)&&(rr=4),fr===null||!(Xc&268435455)&&!(Mb&268435455)||Ja(fr,_r)}function Lv(e,t){var n=en;en|=2;var r=B9();(fr!==e||_r!==t)&&(js=null,wc(e,t));do try{BTe();break}catch(i){w9(e,i)}while(1);if(YN(),en=n,Hv.current=r,Kn!==null)throw Error(Fe(261));return fr=null,_r=0,rr}function BTe(){for(;Kn!==null;)E9(Kn)}function ETe(){for(;Kn!==null&&!QZe();)E9(Kn)}function E9(e){var t=N9(e.alternate,e,Oi);e.memoizedProps=e.pendingProps,t===null?R9(e):Kn=t,e1.current=null}function R9(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CTe(n,t),n!==null){n.flags&=32767,Kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rr=6,Kn=null;return}}else if(n=vTe(n,t,Oi),n!==null){Kn=n;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);rr===0&&(rr=5)}function fc(e,t,n){var r=fn,i=lo.transition;try{lo.transition=null,fn=1,RTe(e,t,n,r)}finally{lo.transition=i,fn=r}return null}function RTe(e,t,n,r){do Ed();while(nl!==null);if(en&6)throw Error(Fe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(l2e(e,o),e===fr&&(Kn=fr=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ny||(Ny=!0,Z9(bv,function(){return Ed(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=lo.transition,lo.transition=null;var s=fn;fn=1;var a=en;en|=4,e1.current=null,ATe(e,n),A9(n,e),$2e(tB),Sv=!!eB,tB=eB=null,e.current=n,STe(n),qZe(),en=a,fn=s,lo.transition=o}else e.current=n;if(Ny&&(Ny=!1,nl=e,xv=i),o=e.pendingLanes,o===0&&(ml=null),n2e(n.stateNode),Bi(e,Yn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fv)throw Fv=!1,e=bB,bB=null,e;return xv&1&&e.tag!==0&&Ed(),o=e.pendingLanes,o&1?e===AB?Ch++:(Ch=0,AB=e):Ch=0,Ml(),null}function Ed(){if(nl!==null){var e=aK(xv),t=lo.transition,n=fn;try{if(lo.transition=null,fn=16>e?16:e,nl===null)var r=!1;else{if(e=nl,nl=null,xv=0,en&6)throw Error(Fe(331));var i=en;for(en|=4,lt=e.current;lt!==null;){var o=lt,s=o.child;if(lt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(lt=c;lt!==null;){var u=lt;switch(u.tag){case 0:case 11:case 15:Ih(8,u,o)}var d=u.child;if(d!==null)d.return=u,lt=d;else for(;lt!==null;){u=lt;var g=u.sibling,p=u.return;if(v9(u),u===c){lt=null;break}if(g!==null){g.return=p,lt=g;break}lt=p}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}lt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,lt=s;else e:for(;lt!==null;){if(o=lt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ih(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,lt=I;break e}lt=o.return}}var b=e.current;for(lt=b;lt!==null;){s=lt;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,lt=A;else e:for(s=b;lt!==null;){if(a=lt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kb(9,a)}}catch(L){Vn(a,a.return,L)}if(a===s){lt=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,lt=N;break e}lt=a.return}}if(en=i,Ml(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(Fb,e)}catch{}r=!0}return r}finally{fn=n,lo.transition=t}}return!1}function fO(e,t,n){t=qd(n,t),t=l9(e,t,1),e=pl(e,t,1),t=ii(),e!==null&&(sm(e,1,t),Bi(e,t))}function Vn(e,t,n){if(e.tag===3)fO(e,e,n);else for(;t!==null;){if(t.tag===3){fO(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ml===null||!ml.has(r))){e=qd(n,e),e=c9(t,e,1),t=pl(t,e,1),e=ii(),t!==null&&(sm(t,1,e),Bi(t,e));break}}t=t.return}}function GTe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ii(),e.pingedLanes|=e.suspendedLanes&n,fr===e&&(_r&n)===n&&(rr===4||rr===3&&(_r&130023424)===_r&&500>Yn()-n1?wc(e,0):t1|=n),Bi(e,t)}function G9(e,t){t===0&&(e.mode&1?(t=Cy,Cy<<=1,!(Cy&130023424)&&(Cy=4194304)):t=1);var n=ii();e=ya(e,t),e!==null&&(sm(e,t,n),Bi(e,n))}function NTe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),G9(e,n)}function ZTe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(t),G9(e,n)}var N9;N9=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_i.current)bi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bi=!1,ITe(e,t,n);bi=!!(e.flags&131072)}else bi=!1,Bn&&t.flags&1048576&&WK(t,Nv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pI(e,t),e=t.pendingProps;var i=zd(t,Pr.current);Bd(t,n),i=zN(null,t,r,e,i,n);var o=JN();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wi(r)?(o=!0,Rv(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UN(t),i.updater=Ub,t.stateNode=i,i._reactInternals=t,uB(t,r,e,n),t=gB(null,t,r,!0,o,n)):(t.tag=0,Bn&&o&&HN(t),qr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pI(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=WTe(r),e=Eo(r,e),i){case 0:t=fB(null,t,r,e,n);break e;case 1:t=nO(null,t,r,e,n);break e;case 11:t=eO(null,t,r,e,n);break e;case 14:t=tO(null,t,r,Eo(r.type,e),n);break e}throw Error(Fe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),fB(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),nO(e,t,r,i,n);case 3:e:{if(g9(t),e===null)throw Error(Fe(387));r=t.pendingProps,o=t.memoizedState,i=o.element,HK(e,t),Wv(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=qd(Error(Fe(423)),t),t=rO(e,t,r,n,i);break e}else if(r!==i){i=qd(Error(Fe(424)),t),t=rO(e,t,r,n,i);break e}else for(Li=hl(t.stateNode.containerInfo.firstChild),Yi=t,Bn=!0,No=null,n=YK(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jd(),r===i){t=Ia(e,t,n);break e}qr(e,t,r,n)}t=t.child}return t;case 5:return PK(t),e===null&&aB(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,nB(r,i)?s=null:o!==null&&nB(r,o)&&(t.flags|=32),f9(e,t),qr(e,t,s,n),t.child;case 6:return e===null&&aB(t),null;case 13:return h9(e,t,n);case 4:return DN(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=jd(t,null,r,n):qr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),eO(e,t,r,i,n);case 7:return qr(e,t,t.pendingProps,n),t.child;case 8:return qr(e,t,t.pendingProps.children,n),t.child;case 12:return qr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,vn(Zv,r._currentValue),r._currentValue=s,o!==null)if(Xo(o.value,s)){if(o.children===i.children&&!_i.current){t=Ia(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=la(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lB(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Fe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),lB(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}qr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Bd(t,n),i=fo(i),r=r(i),t.flags|=1,qr(e,t,r,n),t.child;case 14:return r=t.type,i=Eo(r,t.pendingProps),i=Eo(r.type,i),tO(e,t,r,i,n);case 15:return u9(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),pI(e,t),t.tag=1,wi(r)?(e=!0,Rv(t)):e=!1,Bd(t,n),xK(t,r,i),uB(t,r,i,n),gB(null,t,r,!0,e,n);case 19:return p9(e,t,n);case 22:return d9(e,t,n)}throw Error(Fe(156,t.tag))};function Z9(e,t){return rK(e,t)}function TTe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(e,t,n,r){return new TTe(e,t,n,r)}function s1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function WTe(e){if(typeof e=="function")return s1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wN)return 11;if(e===BN)return 14}return 2}function Il(e,t){var n=e.alternate;return n===null?(n=oo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function II(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")s1(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Du:return Bc(n.children,i,o,t);case _N:s=8,i|=8;break;case kw:return e=oo(12,n,t,i|2),e.elementType=kw,e.lanes=o,e;case Vw:return e=oo(13,n,t,i),e.elementType=Vw,e.lanes=o,e;case Ow:return e=oo(19,n,t,i),e.elementType=Ow,e.lanes=o,e;case LD:return $b(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FD:s=10;break e;case xD:s=9;break e;case wN:s=11;break e;case BN:s=14;break e;case Ua:s=16,r=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=oo(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Bc(e,t,n,r){return e=oo(7,e,r,t),e.lanes=n,e}function $b(e,t,n,r){return e=oo(22,e,r,t),e.elementType=LD,e.lanes=n,e.stateNode={isHidden:!1},e}function US(e,t,n){return e=oo(6,e,null,t),e.lanes=n,e}function DS(e,t,n){return t=oo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kTe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wS(0),this.expirationTimes=wS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function a1(e,t,n,r,i,o,s,a,l){return e=new kTe(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=oo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UN(o),e}function VTe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function T9(e){if(!e)return Vl;e=e._reactInternals;e:{if(lu(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var n=e.type;if(wi(n))return ZK(e,n,t)}return t}function W9(e,t,n,r,i,o,s,a,l){return e=a1(n,r,!0,e,i,o,s,a,l),e.context=T9(null),n=e.current,r=ii(),i=yl(n),o=la(r,i),o.callback=t??null,pl(n,o,i),e.current.lanes=i,sm(e,i,r),Bi(e,r),e}function zb(e,t,n,r){var i=t.current,o=ii(),s=yl(i);return n=T9(n),t.context===null?t.context=n:t.pendingContext=n,t=la(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pl(i,t,s),e!==null&&(Yo(e,i,s,o),fI(e,i,s)),s}function Yv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function l1(e,t){gO(e,t),(e=e.alternate)&&gO(e,t)}function OTe(){return null}var k9=typeof reportError=="function"?reportError:function(e){console.error(e)};function c1(e){this._internalRoot=e}Jb.prototype.render=c1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));zb(e,t,null,null)};Jb.prototype.unmount=c1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uc(function(){zb(null,e,null,null)}),t[ma]=null}};function Jb(e){this._internalRoot=e}Jb.prototype.unstable_scheduleHydration=function(e){if(e){var t=uK();e={blockedOn:null,target:e,priority:t};for(var n=0;n<za.length&&t!==0&&t<za[n].priority;n++);za.splice(n,0,e),n===0&&fK(e)}};function u1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hO(){}function HTe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Yv(s);o.call(c)}}var s=W9(t,r,e,0,null,!1,!1,"",hO);return e._reactRootContainer=s,e[ma]=s.current,up(e.nodeType===8?e.parentNode:e),Uc(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Yv(l);a.call(c)}}var l=a1(e,0,!1,null,null,!1,!1,"",hO);return e._reactRootContainer=l,e[ma]=l.current,up(e.nodeType===8?e.parentNode:e),Uc(function(){zb(t,l,n,r)}),l}function Qb(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Yv(s);a.call(l)}}zb(t,s,e,i)}else s=HTe(n,t,e,i,r);return Yv(s)}lK=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Jg(t.pendingLanes);n!==0&&(GN(t,n|1),Bi(t,Yn()),!(en&6)&&(ef=Yn()+500,Ml()))}break;case 13:Uc(function(){var r=ya(e,1);if(r!==null){var i=ii();Yo(r,e,1,i)}}),l1(e,1)}};NN=function(e){if(e.tag===13){var t=ya(e,134217728);if(t!==null){var n=ii();Yo(t,e,134217728,n)}l1(e,134217728)}};cK=function(e){if(e.tag===13){var t=yl(e),n=ya(e,t);if(n!==null){var r=ii();Yo(n,e,t,r)}l1(e,t)}};uK=function(){return fn};dK=function(e,t){var n=fn;try{return fn=e,t()}finally{fn=n}};Kw=function(e,t,n){switch(t){case"input":if(xw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Pb(r);if(!i)throw Error(Fe(90));PD(r),xw(r,i)}}}break;case"textarea":UD(e,n);break;case"select":t=n.value,t!=null&&Ad(e,!!n.multiple,t,!1)}};jD=r1;QD=Uc;var FTe={usingClientEntryPoint:!1,Events:[lm,zu,Pb,zD,JD,r1]},Eg={findFiberByHostInstance:Ic,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xTe={bundleType:Eg.bundleType,version:Eg.version,rendererPackageName:Eg.rendererPackageName,rendererConfig:Eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tK(e),e===null?null:e.stateNode},findFiberByHostInstance:Eg.findFiberByHostInstance||OTe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zy.isDisabled&&Zy.supportsFiber)try{Fb=Zy.inject(xTe),Es=Zy}catch{}}ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FTe;ho.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u1(t))throw Error(Fe(200));return VTe(e,t,null,n)};ho.createRoot=function(e,t){if(!u1(e))throw Error(Fe(299));var n=!1,r="",i=k9;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=a1(e,1,!1,null,null,n,!1,r,i),e[ma]=t.current,up(e.nodeType===8?e.parentNode:e),new c1(t)};ho.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=tK(t),e=e===null?null:e.stateNode,e};ho.flushSync=function(e){return Uc(e)};ho.hydrate=function(e,t,n){if(!jb(t))throw Error(Fe(200));return Qb(null,e,t,!0,n)};ho.hydrateRoot=function(e,t,n){if(!u1(e))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=k9;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=W9(t,null,e,1,n??null,i,!1,o,s),e[ma]=t.current,up(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jb(t)};ho.render=function(e,t,n){if(!jb(t))throw Error(Fe(200));return Qb(null,e,t,!1,n)};ho.unmountComponentAtNode=function(e){if(!jb(e))throw Error(Fe(40));return e._reactRootContainer?(Uc(function(){Qb(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0):!1};ho.unstable_batchedUpdates=r1;ho.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jb(n))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return Qb(e,t,n,!1,r)};ho.version="18.2.0-next-9e3b772b8-20220608";function V9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V9)}catch(e){console.error(e)}}V9();function LTe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function YTe(e){return"nodeType"in e}function PTe(e){var t,n;return e?LTe(e)?e:YTe(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}var pO;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(pO||(pO={}));const XTe=Object.freeze({x:0,y:0});function UTe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function DTe(e,t,n){const r=UTe(t);if(!r)return e;const{scaleX:i,scaleY:o,x:s,y:a}=r,l=e.left-s-(1-i)*parseFloat(n),c=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=o?e.height/o:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const KTe={ignoreTransform:!1};function O9(e,t){t===void 0&&(t=KTe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=PTe(e).getComputedStyle(e);c&&(n=DTe(n,c,u))}const{top:r,left:i,width:o,height:s,bottom:a,right:l}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:l}}function mO(e){return O9(e,{ignoreTransform:!0})}var nd;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(nd||(nd={}));var yO;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(yO||(yO={}));var To;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(To||(To={}));To.Space,To.Enter,To.Esc,To.Space,To.Enter;var IO;(function(e){e[e.RightClick=2]="RightClick"})(IO||(IO={}));var vO;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(vO||(vO={}));var CO;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(CO||(CO={}));nd.Backward+"",nd.Forward+"",nd.Backward+"",nd.Forward+"";var wB;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(wB||(wB={}));var BB;(function(e){e.Optimized="optimized"})(BB||(BB={}));wB.WhileDragging,BB.Optimized;({...XTe});var bO;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(bO||(bO={}));function H9(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}To.Down,To.Right,To.Up,To.Left;function AO(e){const{name:t,data:n}=e;switch(t){case"authInteractive":return{name:t,stepProps:{...n,onContinue:n.resolve}};case"fingerprint":return{name:t,stepProps:{...n,isTabActive:!0}};case"identity":return{name:t,stepProps:{onContinueConnection:n.resolve}};case"requestSKPresence":return{name:t,stepProps:{...n,name:null,isBlocked:!1}};case"requestPassphrase":case"requestPIN":case"chooseKey":case"discoverableKeys":case"keyboardInteractive":case"requestSignature":case"unavailableProFeatures":case"setupShellIntegration":return{name:t,stepProps:{...n}};case"protocol":case"serialOptions":return{name:t};default:return null}}const Pv={name:"terminal",status:"disabled",icon:"terminal",isActive:!1,animation:"none"},EB={name:"connection",status:"progress",isActive:!1,animation:"show",icon:"connection"};sl((e,t)=>{const n=e.filter(i=>i.name==="requestSKPresence"),r=t!=null;if(n.length!==0){const{stepProps:i}=n[n.length-1];i.name=t,i.isBlocked=i.isBlocked||r}});function MTe(e,t){if(e.length===1)return;const n=e.indexOf(t);if(n!==-1)return n===e.length-1?e[n-1]:e[n+1]}var $Te=Object.prototype,zTe=$Te.hasOwnProperty;function JTe(e,t){return e!=null&&zTe.call(e,t)}var jTe=JTe,QTe=jTe,qTe=rU;function eWe(e,t){return e!=null&&qTe(e,t,QTe)}var tWe=eWe;const nWe=Ht(tWe);var rWe=yN,iWe=jp,oWe=Gf,SO=Do,sWe=Hf;function aWe(e,t,n,r){if(!SO(e))return e;t=iWe(t,e);for(var i=-1,o=t.length,s=o-1,a=e;a!=null&&++i<o;){var l=sWe(t[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=s){var u=a[l];c=r?r(u,l,a):void 0,c===void 0&&(c=SO(u)?u:oWe(t[i+1])?[]:{})}rWe(a,l,c),a=a[l]}return e}var F9=aWe,lWe=F9;function cWe(e,t,n){return e==null?e:lWe(e,t,n)}var uWe=cWe;const dWe=Ht(uWe);function Ty(e,t,n){nWe(e,t)&&dWe(e,t,n)}var fWe=wa,gWe=_a,hWe=zp;function pWe(e){return function(t,n,r){var i=Object(t);if(!gWe(t)){var o=fWe(n);t=hWe(t),n=function(a){return o(i[a],a,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}}var mWe=pWe,yWe=gU,IWe=wa,vWe=YU,CWe=Math.max;function bWe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:vWe(n);return i<0&&(i=CWe(r+i,0)),yWe(e,IWe(t),i)}var AWe=bWe,SWe=mWe,_We=AWe,wWe=SWe(_We),BWe=wWe;const d1=Ht(BWe),Mo=e=>(e==null?void 0:e.tabType)==="terminalTab",Ea=e=>(e==null?void 0:e.tabType)==="workspaceTab",f1=e=>Mo(e)||Ea(e),vI=(e,t)=>e.find(n=>n.id===t),EWe=(e,t)=>d1(e,n=>Mo(n)&&t(n)),x9=(e,t)=>d1(e,n=>Ea(n)&&t(n)),L9=(e,t)=>d1(e,n=>f1(n)&&t(n)),RB=(e,t)=>EWe(e,n=>n.id===t),RWe=(e,t)=>x9(e,n=>n.id===t),GWe=(e,t)=>x9(e,n=>n.workspaceId===t),NWe=(e,t,n)=>L9(e,r=>{var i;return Mo(r)?r.terminalId===n:(i=t[r.workspaceId])==null?void 0:i.layout.has(n)}),GB=(e,t)=>L9(e,n=>n.id===t),ZWe={all:{},tabs:[],history:{},splitViewBroadcastTabs:new Set([]),shellIntegrationActivatedConnections:[],search:{searchQuery:"",targetTerminalId:null},activeTabId:void 0},TWe=dr(ZWe,e=>{const t=Tw(e,(r,i)=>r.all[i],"Terminal","terminalId"),n=Tw(e,(r,i)=>r.all[i],"Terminal");e.addCase(MGe,(r,{payload:i})=>{r.splitViewBroadcastTabs.has(i)?r.splitViewBroadcastTabs.delete(i):r.splitViewBroadcastTabs.add(i)}),e.addCase(ID,(r,{payload:i})=>{r.shellIntegrationActivatedConnections.push(i)}),e.addCase(FGe,(r,{payload:{windowId:i,query:o}})=>{r.search=kWe(r,i,o)}),e.addCase(xGe,(r,{payload:{terminal:i}})=>{r.all[i.id]=i}),e.addCase(YGe,(r,{payload:i})=>{r.tabs.push(i)}),e.addCase(PGe,(r,{payload:{title:i,terminal:o,id:s,targetTabPosition:a}})=>{r.all[o.id]=o,RO(a,{id:s,title:i,isEditingTitle:!1,hasMultiplayerNotification:!1,windowId:o.windowId,showSplitViewHint:!1,tabType:"terminalTab",terminalId:o.id},r)}),e.addCase(SNe,(r,{payload:{terminalIds:i}})=>{i.forEach(o=>{Ty(r,["all",o,"hasUnreadOutput"],!1)})}),e.addCase(XGe,(r,{payload:{terminalId:i,newTabIndex:o,newTabId:s}})=>{const a=r.all[i];if(!a){pn(!1,"Terminal was not found");return}const l=_5(a.title,r.tabs.map(c=>c.title));C5(r.tabs,o,{id:s,title:l,isEditingTitle:!1,hasMultiplayerNotification:!1,windowId:a.windowId,showSplitViewHint:!1,tabType:"terminalTab",terminalId:i})}),e.addCase(rNe,(r,{payload:{tab:i}})=>{const o=r.tabs.findIndex(s=>s.id===i.id);if(o===-1){pn(!1,"Action updateTab: Tab was not found");return}r.tabs[o]=i}),e.addCase(DGe,(r,{payload:i})=>{var a;const o=r.tabs.findIndex(l=>l.id===i),s=r.tabs[o];if(!s){pn(!1,"Tab was not found");return}r.activeTabId=(a=MTe(r.tabs,s))==null?void 0:a.id,Id(r.tabs,l=>l.id===i)}),n(KGe,([r,i],{payload:o})=>{delete i.all[o],Id(i.shellIntegrationActivatedConnections,s=>s===r.connectionId),delete i.history[o]}),n(_Ne,([r])=>{const{workspaceTerminalId:i}=r;i||(r.workspaceTerminalId=Fc())}),n(wNe,([r])=>{delete r.workspaceTerminalId},{skipWarning:!0}),e.addCase(vD,(r,{payload:{windowId:i}})=>{r.search=wO(r,i,!0)}),e.addCase($Ge,(r,{payload:i})=>{r.search=wO(r,i,!1)}),e.addCase(zGe,(r,{payload:i})=>{Ty(r,["all",i,"isActive"],!0),Ty(r,["all",i,"hasUnreadOutput"],!1);for(const o of Object.values(r.all))o.id!==i&&(o.isActive=!1)}),e.addCase(UGe,(r,{payload:i})=>{r.activeTabId=i}),e.addCase(JGe,(r,{payload:i})=>{const o=vI(r.tabs,i);if(!o){pn(!1,"Action activateTab: Tab was not found");return}r.activeTabId=o.id,f1(o)&&(o.hasMultiplayerNotification=!1)}),e.addCase(QGe,(r,{payload:i})=>{for(const o of Object.values(r.all))o.windowId===i&&(o.isActive=!1)}),e.addCase(qGe,(r,{payload:i})=>{r.all=VWe(r,i,!0)}),e.addCase(jGe,(r,{payload:i})=>{var s;const o=(s=r.all[i])==null?void 0:s.connectionId;o&&Id(r.shellIntegrationActivatedConnections,a=>a===o),r.all=WWe(r,i,Date.now())}),e.addCase(HGe,(r,{payload:i})=>{Ty(r,["all",i.terminalId,"disconnectTimestamp"],null)}),e.addCase(iNe,(r,{payload:i})=>{r.tabs=H9(r.tabs,i.oldIndex,i.newIndex)}),e.addCase(oNe,(r,{payload:i})=>{const o=r.all[i.id];if(!o){pn(!1,"Action updateTerminal: Terminal was not found");return}Object.assign(o,i.changes)}),e.addCase(sNe,(r,{payload:i})=>{const o=GB(r.tabs,i.id);if(!o){pn(!1,"Action updateTerminalTab: Tab was not found");return}Object.assign(o,i.changes);const s=Mo(o)?o.terminalId:void 0;s&&i.changes.title&&(r.all[s].title=i.changes.title)}),e.addCase(lNe,(r,{payload:i})=>{const o=RB(r.tabs,i);o&&(o.showSplitViewHint=!0)}),e.addCase(cNe,(r,{payload:i})=>{const o=RB(r.tabs,i);o&&(o.showSplitViewHint=!1)}),e.addCase(uNe,(r,{payload:{windowId:i}})=>{r.all=_O(r,i,!0)}),e.addCase(dNe,(r,{payload:{windowId:i}})=>{r.all=_O(r,i,!1)}),t(fNe,([r],{payload:i})=>{r.autocompleteState=i.state}),e.addCase(gNe,(r,{payload:i})=>{r.history[i.terminalId]={commands:i.commands,status:i.status}}),e.addCase(LGe,(r,{payload:{targetTabPosition:i,...o}})=>{const s={...o,tabType:"workspaceTab",isEditingTitle:!1,hasMultiplayerNotification:!1};RO(i,s,r)}),e.addCase(hNe,(r,{payload:i})=>{const o=r.history[i.terminalId];if(!o){pn(!1,"Action appendTerminalHistoryCommand: Terminal history was not found");return}const s=o.commands.find(a=>a.script===i.command.script);s!=null?(s.completed_at=i.command.completed_at,s.exit_code=i.command.exit_code,s.rating+=1):o.commands.push(i.command)}),t(tEe,([r],{payload:{os:i}})=>{r.osName=i??void 0}),e.addCase(RNe,(r,{payload:i})=>{const o=GB(r.tabs,i.tabId);o&&(o.hasMultiplayerNotification=i.hasMultiplayerNotification)}),n(pNe,([r])=>{const i=[EB,Pv];r.connectionFlow={steps:i,currentStep:{name:"connection"},isConnectionError:!1,isConnected:!1,isCurrentStepActive:!1,isConnectedCurrentHostOfChain:!1},r.connectionProcess="connecting"}),t(mNe,([r],{payload:i})=>{const{request:o}=i,{connectionFlow:s}=r;if(!s)return;const a=OWe(s,o),l=o.name==="error",u=o.name==="setupShellIntegration"?"connecting":"blocked",d=l?"error":u;r.connectionFlow=a,r.connectionProcess=d}),n(yNe,([r])=>{const{connectionFlow:i}=r;if(!i)return;const o=Y9(i.steps),s=[...i.steps],a=o.name==="identity",l=um(i.steps);s.splice(l,1,{...o,isActive:!0,animation:"active",name:a?"connection":o.name,icon:a?"connection":o.icon}),i.steps=s,i.isCurrentStepActive=!0}),n(CNe,([r])=>{const{connectionFlow:i}=r;if(!i)return;const o=EO(i.steps);i.steps=o,i.isConnected=!0,r.connectionProcess="succeeded"}),n(bNe,([r])=>{const{connectionFlow:i}=r;i&&(r.connectionFlow=void 0)}),n(INe,([r])=>{const{connectionFlow:i}=r;if(!i)return;const o=EO(i.steps);i.steps=o,i.isConnectedCurrentHostOfChain=!0}),t(vNe,([r])=>{const{connectionFlow:i}=r;i&&(i.isConnectedCurrentHostOfChain=!1,i.steps=[EB,Pv])}),n(ANe,([r])=>{const{connectionFlow:i}=r;if(!i)return;const o=i.steps.find(s=>s.name==="shellIntegration");o&&(o.status="warning")}),e.addCase(BNe,(r,{payload:i})=>{const o=vI(r.tabs,i.tabId);if(!o){pn(!1,"Action startTabTitleEditing: Tab was not found");return}if(!("isEditingTitle"in o)){pn(!1,`Action startTabTitleEditing: Tab ${o.tabType} cannot be renamed`);return}o.isEditingTitle=!0}),e.addCase(ENe,(r,{payload:i})=>{const o=vI(r.tabs,i.tabId);if(!o){pn(!1,"Action updateTabTitle: Tab was not found");return}o.title=i.title,"isEditingTitle"in o&&(o.isEditingTitle=!1)})}),_O=(e,t,n)=>Ab(e.all,r=>g1(r,t)?{...r,isTerminalWithProFeatures:n,terminalWithProFeaturesOpenTimestamp:n?Date.now():null}:r),wO=(e,t,n)=>{var r;return{...e.search,targetTerminalId:n&&((r=Object.values(e.all).find(i=>g1(i,t)))==null?void 0:r.id)||null}},WWe=(e,t,n)=>Ab(e.all,r=>r.id===t?{...r,disconnectTimestamp:n}:r),kWe=(e,t,n)=>{const r=Object.values(e.all).filter(i=>g1(i,t))[0]??null;return r?{...e.search,searchQuery:n,targetTerminalId:r.id}:e.search},VWe=(e,t,n)=>Ab(e.all,r=>r.id===t?{...r,connectionEstablished:n}:r),g1=(e,t)=>e.windowId===t&&e.isActive&&!e.connectionFlow,OWe=(e,t)=>{if(t.name==="hostChainConnection")return{...e,steps:[EB,Pv],currentStep:null,isCurrentStepActive:!1,isConnectionError:!1};if(t.name==="identity"&&e.steps.length===2)return{...e,steps:[{...BO(t),animation:"none"},Pv],currentStep:AO(t),isCurrentStepActive:!1};if(t.name==="error"){const l=HWe(e.steps);return{...e,steps:l,currentStep:null,isConnectionError:!0}}if(t.name==="updateSKPresence"&&e.currentStep&&e.currentStep.name==="requestSKPresence")return{...e,currentStep:{...e.currentStep,stepProps:{...e.currentStep.stepProps,name:t.data.blockingConnectName,isBlocked:e.currentStep.stepProps.isBlocked||t.data.blockingConnectName!=null}}};if(t.name==="updateSKPresence")return{...e};const n=BO(t),r=AO(t);if(n==null)return{...e,currentStep:r};const i=Y9(e.steps),o=[...e.steps];if(t.name==="requestSKPresence"&&!t.data.isTouchRequired)return{...e,steps:o,currentStep:r,isCurrentStepActive:!1};const s=t.name==="setupShellIntegration",a=um(e.steps);return o.splice(a,1,{...i,isActive:!1,animation:"none"},{...n,animation:s?"show":"hide"}),{...e,steps:o,currentStep:r,isCurrentStepActive:!1}},BO=e=>{let t=e.name;return e.name==="authInteractive"&&(t=e.data.methods.includes("password")?"requestPassphrase":"identity"),{name:e.name,status:"progress",isActive:!1,animation:"hide",icon:t}},um=e=>e.length-2,Y9=e=>e[um(e)],EO=e=>e.map((t,n,r)=>n===um(r)?{...t,isActive:!1,animation:"finish",status:"success"}:t),HWe=e=>e.map((t,n,r)=>n===um(r)?{...t,isActive:!1,animation:"none",status:"error"}:t),RO=(e,t,n)=>{var o;const r=e??n.tabs.length,i=e!=null&&((o=n.tabs[e])==null?void 0:o.tabType)==="newTab";n.tabs.splice(r,i?1:0,t)},FWe={interacted:!1,hintWasShown:!1,visible:!0,windows:new Map,screen:"theme",topThreePromoClosed:!1},{reducer:xWe,actions:LWe}=_n({name:"sidepanel",initialState:FWe,reducers:{toggleSidepanel(e,{payload:t}){e.interacted=!0;const{windowId:n}=t,r=e.windows.get(n);if(r){const o=!r.visible;r.visible=o,e.visible=o;return}const i=!e.visible;e.windows.set(n,{visible:i,screen:e.screen}),e.visible=i},setSidepanelTab(e,{payload:t}){const{screen:n,windowId:r}=t;e.screen=n;const i=e.windows.get(r);if(i){i.screen=n;return}e.windows.set(r,{visible:e.visible,screen:n})},setSidepanelShortcutHintWasShown(e){e.hintWasShown=!0},setTopThreePromoClosed(e){e.topThreePromoClosed=!0}},extraReducers:e=>{e.addCase(pN,(t,{payload:n})=>{t.windows.set(n,{visible:t.visible,screen:t.screen})}),e.addCase(mN,(t,{payload:n})=>{t.windows.delete(n)})}}),{toggleSidepanel:P9,setSidepanelTab:hje,setSidepanelShortcutHintWasShown:pje,setTopThreePromoClosed:mje}=LWe,h1="grantAccessHiddenMembers",YWe=Ve(`${h1}/clearGrantAccessHiddenMembersData`);Ve(`${h1}/closeAllGrantAccessDialogs`);const KS={hiddenUserIds:[]},{reducer:PWe,actions:{hideGrantAccessDialog:yje}}=_n({name:h1,initialState:KS,reducers:{hideGrantAccessDialog(e,{payload:t}){e.hiddenUserIds=t.map(n=>n.user_id)}},extraReducers:e=>{e.addCase(Ur.success,()=>KS).addCase(YWe,()=>KS)}});var XWe=vb,UWe=Sb,DWe=_G,KWe=Of,MWe=gb,GO=Cb,$We=Math.min;function zWe(e,t,n){for(var r=n?DWe:UWe,i=e[0].length,o=e.length,s=o,a=Array(o),l=1/0,c=[];s--;){var u=e[s];s&&t&&(u=KWe(u,MWe(t))),l=$We(u.length,l),a[s]=!n&&(t||i>=120&&u.length>=120)?new XWe(s&&u):void 0}u=e[0];var d=-1,g=a[0];e:for(;++d<i&&c.length<l;){var p=u[d],m=t?t(p):p;if(p=n||p!==0?p:0,!(g?GO(g,m):r(c,m,n))){for(s=o;--s;){var v=a[s];if(!(v?GO(v,m):r(e[s],m,n)))continue e}g&&g.push(m),c.push(p)}}return c}var JWe=zWe,jWe=nm;function QWe(e){return jWe(e)?e:[]}var qWe=QWe,eke=Of,tke=JWe,nke=su,rke=qWe,ike=nke(function(e){var t=eke(e,rke);return t.length&&t[0]===e[0]?tke(t):[]}),oke=ike;const NO=Ht(oke);function ske(e,t,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}var ake=ske,lke=y5;function cke(e,t,n,r){return lke(e,function(i,o,s){t(r,i,n(i),s)}),r}var uke=cke,dke=ake,fke=uke,gke=wa,hke=Er;function pke(e,t){return function(n,r){var i=hke(n)?dke:fke,o=t?t():{};return i(n,e,gke(r),o)}}var X9=pke,mke=X9,yke=mke(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ike=yke;const U9=Ht(Ike),vp=null,vke=[vp,JG],Cke=[{vault_id:vp,enabled:!0}],bke=Ve("vaults/selectVaultIds"),ZO={vaults:[],other:[],withoutKeys:[],selectedVaultIds:vke,changeVaultWizards:[],vaultsMembers:[],logs:Cke},{reducer:Ake,actions:{setVaults:Ije,showInteractiveChangeVaultDialog:vje,hideChangeVaultDialog:Cje,selectPersonalVault:bje,setVaultsMembers:Aje,setLogSettings:Sje,updateLogSettings:_je}}=_n({initialState:ZO,name:"vaults",reducers:{setVaults:(e,t)=>{const[n,r]=Ske(t.payload.items),[i,o]=U9(n,c=>c.role!=="Owner"||c.isDefault),s=e.vaults.length+1===e.selectedVaultIds.length;e.vaults=i,e.other=o,e.withoutKeys=r;const a=TO(i);if(t.payload.selectAll||s){e.selectedVaultIds=a;return}const l=NO(e.selectedVaultIds,a);e.selectedVaultIds=l},showInteractiveChangeVaultDialog:(e,t)=>{e.changeVaultWizards=[t.payload,...e.changeVaultWizards.filter(n=>n.wizardID!==t.payload.wizardID)]},setVaultsMembers:(e,{payload:t})=>{e.vaultsMembers=t},hideChangeVaultDialog:(e,t)=>{e.changeVaultWizards=e.changeVaultWizards.filter(n=>n.wizardID!==t.payload.wizardID)},selectPersonalVault:e=>{e.selectedVaultIds.includes(vp)||e.selectedVaultIds.unshift(vp)},openNewVaultForm:e=>e,setLogSettings:(e,{payload:t})=>{e.logs=t},updateLogSettings:(e,{payload:t})=>{t.forEach(n=>{const r=e.logs.find(i=>i.vault_id===n.vault_id);r!==void 0?r.enabled=n.enabled:e.logs.push(n)})}},extraReducers:e=>e.addCase(bke,(t,n)=>{if(!n.payload.length){t.selectedVaultIds=[];return}const r=NO(n.payload,TO(t.vaults));t.selectedVaultIds=RG(r)?t.selectedVaultIds:r}).addCase(Ur.success,()=>ZO)});function TO(e){const t=e.map(n=>n.id);return t.unshift(vp),t}function Ske(e){const t=e.map(i=>({id:i.id,name:i.name,encryptionKeyId:i.original_key,isDefault:!!i.is_default,role:i.role})),[n,r]=U9(t,i=>i.encryptionKeyId!=null);return[n,r]}const _ke={selectedVaultId:void 0,vaultDraft:void 0,sliderOpen:!1,openConfirmDialog:!1,openVaultRemotelyById:void 0},wke=_n({name:"vaultsManagement",initialState:_ke,reducers:{setSelectedVaultId(e,t){e.selectedVaultId=t.payload},setDraft(e,t){t.payload===void 0?e.vaultDraft=void 0:e.vaultDraft={...e.vaultDraft,...t.payload}},setSliderOpen(e,t){e.sliderOpen=t.payload},setOpenConfirmDialog(e,t){e.openConfirmDialog=t.payload},setClosed:e=>{e.selectedVaultId=void 0,e.vaultDraft=void 0,e.sliderOpen=!1,e.openConfirmDialog=!1,e.openVaultRemotelyById=void 0},setSelectIdFromOutside(e,t){e.openVaultRemotelyById=t.payload}}}),Bke=wke.reducer,Eke={lastFocused:void 0,isFocused:!1},{reducer:Rke,actions:Gke}=_n({name:"windows",initialState:Eke,reducers:{windowFocused(e,{payload:t}){e.lastFocused=t,e.isFocused=!0},windowBlurred(e,{payload:t}){e.lastFocused=t,e.isFocused=!1}}}),{windowFocused:Nke,windowBlurred:Zke}=Gke,Tke=16,Wke=Ve("ADD_TERMINAL_TO_WORKSPACE");Ve("OPEN_WORKSPACE_WITH_TERMINALS");const kke=Ve("ADD_WORKSPACE"),Vke=Ve("REMOVE_WORKSPACE");Ve("SPLIT_TERMINAL");const Oke=Ve("UPDATE_WORKSPACE_TEMPLATE_ID"),Hke=Ve("CHANGE_TAB_VIEW_TYPE"),Fke=Ve("RESIZE_SPLIT_VIEW"),xke=Ve("RENAME_WORKSPACE"),Lke=Ve("REORDER_SPLIT_VIEW_PANES"),Yke=Ve("SWAP_WORKSPACE_TABS");Ve("MOVE_WORKSPACE_TERMINAL_TO_NEW_TAB");const Pke=Ve("REMOVE_WORKSPACE_TERMINAL");Ve("OPEN_WORKSPACE_CONNECTION");const Xke=Ve("SET_LAST_ACTIVE_TERMINAL_ID");Ve("WORKSPACE_FROM_SPLIT_VIEW_IS_CREATED");const Uke={all:{}},Dke=dr(Uke,e=>{const t=Tw(e,(n,r)=>n.all[r],"Workspace","workspaceId");e.addCase(kke,(n,{payload:{workspace:r}})=>{n.all[r.id]=r}),e.addCase(Vke,(n,{payload:{workspaceId:r}})=>{delete n.all[r]}),t(Wke,([n],{payload:{sourceTerminalId:r,targetTerminalId:i,layout:o,workspaceTabOrderTargetIndex:s,position:a="start"}})=>{const l=n.orderedTerminalIds,c=s!==void 0?s:l.indexOf(i);l.splice(c,0,r),n.orderedTerminalIds=l,n.layout=n.layout.split(i,r,{layout:o,position:a}),n.layout.numberOfLeafs()>Tke&&(n.viewMode="focusView")}),t(Oke,([n],{payload:{workspaceTemplateId:r}})=>{n.templateId=r}),t(Hke,([n],{payload:{viewMode:r}})=>{n.viewMode=r}),t(Fke,([n],{payload:{nodeId:r,sizes:i}})=>{n.layout=n.layout.resize(r,i)}),t(xke,([n],{payload:{title:r}})=>{n.title=r}),e.addCase(Lke,(n,{payload:{sourceTerminalId:r,targetTerminalId:i,layout:o,position:s}})=>{const l=Object.values(n.all).find(c=>c.layout.has(i));if(!l){pn(!1,"Action reorderSplitViewPanes: No workspace found for source or target terminal");return}if(!l.orderedTerminalIds.includes(r)){pn(!1,"Action reorderSplitViewPanes: Source terminal not found in target workspace");return}l.layout=l.layout.remove(r).split(i,r,{layout:o,position:s})}),t(Yke,([n],{payload:{item:r,swapWith:i}})=>{const o=n.orderedTerminalIds.indexOf(r),s=n.orderedTerminalIds.indexOf(i),a=H9(n.orderedTerminalIds,o,s);n.orderedTerminalIds=a}),t(Pke,([n,r],{payload:{workspaceId:i,terminalId:o}})=>{if(n.layout.single()){delete r.all[i];return}const s=n.orderedTerminalIds,a=s.indexOf(o);s.splice(a,1),n.orderedTerminalIds=s,n.layout=n.layout.remove(o),n.lastActiveTerminalId===o&&(n.lastActiveTerminalId=void 0)},{skipWarning:!0}),t(Xke,([n],{payload:{terminalId:r}})=>{n.lastActiveTerminalId=r})});var Kke=yN,Mke=fD,$ke=hD,zke=_a,Jke=$p,jke=zp,Qke=Object.prototype,qke=Qke.hasOwnProperty,eVe=$ke(function(e,t){if(Jke(t)||zke(t)){Mke(t,jke(t),e);return}for(var n in t)qke.call(t,n)&&Kke(e,n,t[n])}),tVe=eVe;const Wy=Ht(tVe),WO={username:"",team:null,isTeamDataStale:!1,personal_subscription:null,team_subscription:null,student:null,trial:null,account:{id:null,user_id:null,is_email_confirmed:!0,need_to_update_subscription:!1,pro_mode:!1,two_factor_auth:!1,team:!1,updated_at:"",feature_toggles:null,registered_at:"",now:"",plan_type:"Unauthorized",user_type:"Unauthorized",full_name:"",company:"",address:"",country_code:"",current_period:null,authorized_features:null,expired_screen_type:null,tax_id:"",has_sso:!1,team_display_name:"",is_subscribed_to_marketing_emails:!1},device:void 0,devices:void 0,team_members:[],team_invites:[],hasAccessToSharedData:null,access_objects:[],hasDowngradedToStarter:!1,enterprise:null},nVe=zn({[pD.success.toString()]:(e,{payload:t})=>ps({},e,t,{isTeamDataStale:!1}),[yD.success.toString()]:(e,{payload:{bulk_account:t,device:n}})=>ps({},e,t,{isTeamDataStale:!1,device:n}),[mD.toString()]:(e,{payload:t})=>ps({},e,t),[Ur.success.toString()]:()=>WO,[mGe.success.toString()]:e=>ps({},e,{account:{two_factor_auth:!0}}),[yGe.success.toString()]:e=>ps({},e,{account:{two_factor_auth:!1}}),[IGe.success.toString()]:(e,{payload:t})=>Wy({},e,{team:t},{isTeamDataStale:!1}),[CGe.success.toString()]:(e,{payload:t})=>ps({},e,{username:t,account:{is_email_confirmed:!1,has_sso:!1}}),[_Ge.success.toString()]:(e,{payload:t})=>Wy({},e,{team_members:(t==null?void 0:t.results)??[]}),[wGe.success.toString()]:(e,{payload:t})=>Wy({},e,{team_invites:(t==null?void 0:t.results)??[]}),[WD.success.toString()]:(e,{payload:t})=>Wy({},e,{team_invites:t.invites,team_members:t.members}),[RGe.toString()]:(e,{payload:t})=>ps({},e,{hasDowngradedToStarter:t}),[GGe.toString()]:(e,{payload:t})=>ps({},e,{devices:t})},WO),rVe=E("REQUEST_MONTHLY_PREMIUM"),iVe=E("REQUEST_YEARLY_PREMIUM"),oVe=E("REQUEST_RESTORE_PREMIUM");E("PURCHASE_STARTED");E("PURCHASE_FAILED");E("PURCHASE_SUCCESS");const sVe=E("RESTORE_FAILED"),aVe=E("RESTORE_SUCCESS"),lVe=Ie("UPDATE_STORE_PRO_PRICES"),cVe=Ie("UPDATE_BACKEND_PRICES"),uVe=E("REMOVE_IS_LOADING");E("RETRY_PURCHASE");const dVe=E("USER_CANCEL_PURCHASE");var fVe=li;fVe.isFinite;const gVe={monthly:{value:12,currency:"USD"},yearly:{value:120,currency:"USD"}},hVe={monthly:{value:24,currency:"USD"},yearly:{value:240,currency:"USD"}},pVe={monthly:{value:36,currency:"USD"},yearly:{value:360,currency:"USD"}},mVe={isCanceled:!1,isLoading:null,pro:gVe,team:hVe,business:pVe},yVe=zn({[rVe.toString()]:e=>({...e,isCanceled:!1,isLoading:mS?"monthly":null}),[iVe.toString()]:e=>({...e,isCanceled:!1,isLoading:mS?"yearly":null}),[oVe.toString()]:e=>({...e,isLoading:mS?"restore":null}),[dVe.toString()]:e=>({...e,isCanceled:!0,isLoading:null}),[sVe.toString()]:e=>({...e,isLoading:null}),[aVe.toString()]:e=>({...e,isLoading:null}),[lVe.success.toString()]:(e,t)=>({...e,pro:t.payload}),[cVe.success.toString()]:(e,t)=>t.payload.pro?{...e,pro:t.payload.pro,team:t.payload.team,business:t.payload.business}:{...e,team:t.payload.team,business:t.payload.business},[uVe.toString()]:e=>({...e,isLoading:null})},mVe),IVe=zn({[hN.toString()]:(e,{payload:t})=>t},!1),kO=[],vVe=zn({[sZe.toString()]:(e,{payload:t})=>[...t],[WD.success.toString()]:(e,{payload:t})=>[...t.avatars],[Ur.success.toString()]:()=>kO},kO),CVe=Ve("SET_SFTP_CHANGED_FILE"),bVe=Ve("REMOVE_SFTP_CHANGED_FILE"),AVe=Ve("REMOVE_ALL_SFTP_CHANGED_FILES"),SVe=zn({[CVe.toString()]:(e,{payload:{fileId:t,changedFile:n}})=>{const r=new Map(e);return r.set(t,n),[...r]},[bVe.toString()]:(e,{payload:t})=>{const n=new Map(e);return n.delete(t),[...n]},[AVe.toString()]:(e,{payload:t})=>{const n=new Map(e);return e.forEach(([r,i])=>{i.sftpContainerId===t&&n.delete(r)}),[...n]}},[]),_Ve={hosts:[],groups:[],snippets:[],sshKeys:[],visibleIdentities:[],portForwardingRules:[],knownHosts:[],histories:[],hostLatestActivities:[],multiKeys:[],awsConfigs:[],snippetsPackages:[],hardwareKeys:[],historyCommands:[],deviceSet:[],logSet:[],workspaceTemplates:[]},wVe=zn({[eEe.toString()]:(e,{payload:t})=>({...e,...t})},_Ve);function BVe(){return!0}var EVe=BVe;const NB=Ht(EVe),RVe=E("ENABLE_BELL_SOUND"),GVe=E("DISABLE_BELL_SOUND"),NVe=E("ENABLE_BRIGHTEN_BOLD_TEXT"),ZVe=E("DISABLE_BRIGHTEN_BOLD_TEXT"),VO=E("CHANGE_COLOR_SCHEME"),OO=E("CHANGE_COLOR_SCHEME_FROM_SYNC"),TVe=E("ENABLE_DETECT_OS"),WVe=E("DISABLE_DETECT_OS"),kVe=E("CHANGE_FONT_FAMILY"),VVe=E("CHANGE_FONT_SIZE"),OVe=E("HIDE_MULTIPLAYER_TERMINAL_LABEL"),HVe=E("ENABLE_OPTION_IS_META"),FVe=E("DISABLE_OPTION_IS_META"),xVe=E("ENABLE_RIGHT_CLICK_TO_PASTE"),LVe=E("DISABLE_RIGHT_CLICK_TO_PASTE"),YVe=E("SET_SCROLLBACK_SIZE"),PVe=E("CHANGE_TERMINAL_EMULATION_TYPE"),XVe=E("HIDE_UNAVAILABLE_PRO_FEATURES_STEPS"),UVe=E("CHANGE_KEYWORDS_HIGHLIGHTING"),DVe=E("CHANGE_PQC_KEX_ENABLED"),KVe=E("SET_SHELL_HISTORY_IMPORT_ENABLED"),MVe=E("SET_AUTOCOMPLETE_DISABLED_UNTIL_TIMESTAMP"),$Ve=E("SET_AUTOCOMPLETE_VARIANT"),zVe=E("ENABLE_AUTORECONNECT"),JVe=E("DISABLE_AUTORECONNECT"),jVe={ENABLED:0,DISABLED:1},QVe=4e4,Nu=(e,t,n)=>dr(n,r=>{r.addCase(e,NB).addCase(t,ele)}),zs=(e,t)=>dr(t,n=>{n.addCase(e,(r,i)=>i.payload)}),qVe={rightClickToPaste:Nu(xVe,LVe,!1),bellSound:Nu(RVe,GVe,!1),optionIsMeta:Nu(HVe,FVe,!0),scrollback:zs(YVe,QVe),colorScheme:dr(jU,e=>{e.addCase(VO,(t,n)=>n.payload),e.addCase(OO,(t,n)=>n.payload)}),colorSchemeAwaitsSynchronization:dr(!1,e=>{e.addCase(VO,()=>!0),e.addCase(OO,()=>!1)}),fontFamily:zs(kVe,pbe),fontSize:zs(VVe,hbe),brightenBoldText:Nu(NVe,ZVe,!1),terminalEmulationType:zs(PVe,"xterm-256color"),detectOS:Nu(TVe,WVe,!0),liveTerminalLabel:dr(!1,e=>{e.addCase(OVe,NB)}),hideProFeatureSteps:dr(!1,e=>{e.addCase(XVe,NB)}),keywordsHighlighting:zs(UVe,!0),pqcKexEnabled:zs(DVe,!0),enableShellHistoryImport:zs(KVe,!0),autocompleteDisabledUntilTimestamp:zs(MVe,jVe.DISABLED),autocompleteVariant:zs($Ve,"helium"),autoreconnect:Nu(zVe,JVe,!0)},eOe=em(qVe),tOe=E("SET_LAYOUT"),Rg="grid",nOe={hosts:Rg,keychain:Rg,portForwarding:Rg,snippets:Rg,knownHosts:Rg},rOe=zn({[tOe.toString()]:(e,{payload:t})=>{const n=t.tab;return{...e,[n]:t.layout}}},nOe);E("SET_LOCALHOST");E("REFRESH_LOCALHOST");E("REMOVE_LOCALHOST");const iOe=E("UPDATE_STORED_LOCALHOST"),oOe=null,sOe=zn({[iOe.toString()]:(e,{payload:t})=>t},oOe);var aOe=vb,lOe=Sb,cOe=_G,uOe=Of,dOe=gb,fOe=Cb,gOe=200;function hOe(e,t,n,r){var i=-1,o=lOe,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=uOe(t,dOe(n))),r?(o=cOe,s=!1):t.length>=gOe&&(o=fOe,s=!1,t=new aOe(t));e:for(;++i<a;){var u=e[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,s&&d===d){for(var g=c;g--;)if(t[g]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}var D9=hOe,pOe=D9,mOe=su,yOe=nm,IOe=mOe(function(e,t){return yOe(e)?pOe(e,t):[]}),vOe=IOe;const COe=Ht(vOe),bOe=E("SET_LOCAL_TERMINAL_PATH"),AOe=E("ADD_CUSTOM_LOCAL_TERMINAL_PATH"),SOe=E("REMOVE_CUSTOM_LOCAL_TERMINAL_PATH"),_Oe=zn({[AOe.toString()]:(e,{payload:t})=>[...e,t],[SOe.toString()]:(e,{payload:t})=>COe(e,t)},[]),wOe=zn({[bOe.toString()]:(e,{payload:t})=>t==null?void 0:t.label},null),BOe={path:wOe,customPaths:_Oe},EOe=em(BOe),ROe=E("SET_SORTING"),Gg={by:"Date",reverse:!0},GOe={hosts:Gg,keychain:Gg,portForwarding:Gg,snippets:Gg,knownHosts:Gg},NOe=zn({[ROe.toString()]:(e,{payload:t})=>{const n=t.tab;return{...e,[n]:{by:t.sort,reverse:t.reverse}}}},GOe),ZOe=Ve("ADD_TRANSFER_STREAM"),TOe=Ve("REMOVE_TRANSFER_STREAM"),WOe=zn({[ZOe.toString()]:(e,{payload:{transferStreamId:t,transferStream:n}})=>{const r=new Map(e);return r.set(t,n),[...r]},[TOe.toString()]:(e,{payload:t})=>{const n=new Map(e);return n.delete(t),[...n]}},[]),HO={theme:"light",selectedThemeValue:"auto",isSettingsOpened:!1,isPortForwardingWizardEnabled:!0,isCopyLinkInfoVisible:!0,isShowAppInterface:!1,gracePeriodUntilDate:void 0,identityPromo:{variant:"banner"},showLinkedIdentitiesBanner:!0,groupPromo:{variant:"banner"},showBannerAboutGroup:!0,hideBusinessPromoInGrantAccess:!1,showUnsyncedSessionLogsSnackbar:!0,showTerminalSpinners:!1,isConnectedToRemoteHost:!1},{reducer:kOe,actions:VOe}=_n({initialState:HO,name:"ui",reducers:{changeTheme:(e,{payload:t})=>{const{selectedThemeValue:n,theme:r}=t;e.theme=r,e.selectedThemeValue=n||r},setPortForwardingWizardEnabled:(e,{payload:t})=>{e.isPortForwardingWizardEnabled=t},setSettingsOpenState:(e,{payload:t})=>{e.isSettingsOpened=t},disableCopyLinkInfo:e=>{e.isCopyLinkInfoVisible=!1},showAppInterface:e=>{e.isShowAppInterface=!0},setGracePeriodUntilDate:(e,{payload:t})=>{e.gracePeriodUntilDate=t},transformIdentityBannerToIcon:e=>{e.identityPromo.variant="icon"},closeShowLinkedIdentitiesBanner:e=>{e.showLinkedIdentitiesBanner=!1},transformGroupBannerToIcon:e=>{e.groupPromo.variant="icon"},closeBannerAboutGroup:e=>{e.showBannerAboutGroup=!1},hideSessionLogsUnsyncedSnackbar:e=>{e.showUnsyncedSessionLogsSnackbar=!1},setHideBusinessPromoInGrantAccess:(e,{payload:t})=>{e.hideBusinessPromoInGrantAccess=t},activateSnippetRunAnimation:e=>{e.showTerminalSpinners=!0},hideSnippetRunAnimation:e=>{e.showTerminalSpinners=!0}},extraReducers:e=>{e.addCase(Ur.success,t=>{t.hideBusinessPromoInGrantAccess=HO.hideBusinessPromoInGrantAccess}),e.addCase(aNe,(t,{payload:n})=>{const{connection:r}=n,i=r.host.local_id;t.isConnectedToRemoteHost||i==null||(t.isConnectedToRemoteHost=!0)})}});E("vaults/openCreateNewGroupForm");const{changeTheme:ZB,setPortForwardingWizardEnabled:wje,setSettingsOpenState:FO,disableCopyLinkInfo:Bje,showAppInterface:Eje,setGracePeriodUntilDate:Rje,transformIdentityBannerToIcon:Gje,closeShowLinkedIdentitiesBanner:Nje,transformGroupBannerToIcon:Zje,closeBannerAboutGroup:Tje,hideSessionLogsUnsyncedSnackbar:Wje,activateSnippetRunAnimation:kje,hideSnippetRunAnimation:Vje}=VOe,OOe={commandPalette:MNe,commandPaletteAnalytics:DNe,transferStreams:WOe,globalTerminalSettings:eOe,sidepanel:xWe,localTerminalPath:EOe,localhost:sOe,sorting:NOe,sftp:ONe,entities:wVe,user:nVe,purchases:yVe,dialogs:fGe,sync:WZe,experiments:pGe,inAppMessages:I1e,terminal:TWe,workspace:Dke,promotion:NNe,history:d1e,ui:kOe,navigation:iZe,authorized:IVe,layout:rOe,snackbar:AZe,multiKey:S1e,presenceEffect:aZe,avatars:vVe,changedSftpFiles:SVe,app:HNe,appUpdate:YNe,shortcuts:hZe,clouds:FEe,customerExperience:KEe,windows:Rke,identityAutocomplete:ZGe,quickConnectSettings:cZe,connectionFlow:zNe,nativeTheme:Z1e,stats:GZe,onboardings:TGe,tags:VZe,terminalTheme:DEe,vault:Ake,vaultsManagement:Bke,lifecycle:v1e,reconnection:OZe,runSnippet:gZe,identityPromotion:XEe,grantAccessHiddenMembers:PWe,connectionFlowSteps:i1e,enterprisePlan:o1e,pageSliderFormPreview:l1e,pageSliderRoute:LEe,[R1e]:E1e},HOe=em(OOe),FOe=(e,t)=>{let n=e;return _D.match(t)&&(n=dL(t.payload,r=>{e!=null&&(r.windows=e.windows)})),HOe(n,t)};function Xv(e,t=0){var n;return(n=e.find(r=>r.id===t))==null?void 0:n.base64}function xOe(e){return e.presenceEffect}function p1(e){return e.avatars}const LOe="TRIAL",YOe="PREMIUM",POe="GITHUB_STUDENT",XOe="GITHUB_TEACHER",UOe=[LOe,YOe,POe,XOe],K9="unauthorized",DOe="trial expired",KOe="team trial owner expired";function qb(e){return e.user.account.user_id}function e0(e){return Pf(e)?e.user.team_subscription||e.user.personal_subscription||null:e.user.personal_subscription||null}function MOe(e){var t;return((t=e0(e))==null?void 0:t.plan_type)==="TEAM"}function $Oe(e){var t;return((t=e0(e))==null?void 0:t.plan_type)==="TEAM_BUSINESS"}function zOe(e){var t;return!!((t=e0(e))!=null&&t.is_expired)}function m1(e){return!!e0(e)&&!zOe(e)}function JOe(e){return!!(sHe(e)&&m1(e))}const jOe=ve(m1,MOe,(e,t)=>e&&t),QOe=ve(m1,$Oe,(e,t)=>e&&t),qOe=ve(jOe,QOe,(e,t)=>e||t);function eHe(e){return[DOe,KOe].includes(M9(e).toLowerCase())}function M9(e){return e.user.account.user_type||K9}function tHe(e){return M9(e).toLowerCase()===K9}function $9(e){return!tHe(e)}function Pf(e){return!!e.user.team}function nHe(e){return!!e.user.team&&!e.user.team.is_owner}function t0(e){var t;return!!((t=e.user.team)!=null&&t.is_owner)}function rHe(e){var t;return(t=e.user.team)==null?void 0:t.owner}function iHe(e){var t;return(t=e.user.team)==null?void 0:t.owner_name}function z9(e){return e.user.account.expired_screen_type}const oHe=e=>{const{trial:t}=e.user;return t!=null&&t.trial_type?t.trial_type.toLowerCase()==="team":!1};function sHe(e){return e.user.personal_subscription}function dm(e){return e.user.account.email??e.user.username}const fm=ve(e=>e.user.team_members,Pf,(e,t)=>t?e??[]:[]);function aHe(e){return e.user.team_invites||[]}ve(aHe,fm,(e,t)=>[...t.filter(n=>!n.is_access_granted),...e]);const J9=ve(t0,qb,fm,(e,t,n)=>{if(e)return!0;const r=n.find(i=>i.user_id===t);return r==null?void 0:r.is_access_granted});function j9(e){var t;return(t=e.user.team)==null?void 0:t.owner_id}const lHe=ve(fm,j9,(e,t)=>new Set(e.filter(n=>n.is_access_granted).map(n=>n.user_id).concat(t??[])));function cHe(e){var t;return(t=e.user.device)==null?void 0:t.id}const Q9=ve(fm,p1,(e,t)=>e.filter(n=>n.has_key_pair&&!n.is_access_granted&&n.role!=="Owner").map(n=>({role:n.role==="Owner"?"Editor":n.role,email:n.email,full_name:n.full_name,user_id:n.user_id,avatar:Xv(t,n.user_id)})));ve(fm,p1,j9,rHe,iHe,(e,t,n,r,i)=>{const o=e.filter(a=>a.is_access_granted).map(a=>({userId:a.user_id,email:a.email,avatar:Xv(t,a.user_id),fullName:a.full_name})),s=n!=null&&r!=null?{userId:n,email:r,avatar:Xv(t,n),fullName:i}:void 0;return s!=null?[s,...o]:o});ve(Q9,e=>e.grantAccessHiddenMembers.hiddenUserIds,(e,t)=>{const n=new Set(t);return e.some(r=>!n.has(r.user_id))});const q9=e=>e.user.hasDowngradedToStarter;ve(dm,z9,q9,(e,t,n)=>e3(e,t)&&!n);const uHe=ve(dm,z9,q9,(e,t,n)=>e3(e,t)&&n);ve(uHe,$9,(e,t)=>e||!t);const e3=(e,t)=>{if(t==null)return!1;const n=UOe.includes(t);return!!e&&n};ve(Pf,eHe,JOe,(e,t,n)=>!e&&(t||n));const dHe=e=>e.user.devices;ve(dHe,e=>(e==null?void 0:e.filter(({mobile_type:t})=>t==="iPhone"||t==="Google"))??[]);function*fHe(){yield*f5([Vi(mD,xO),Vi(pD.success,xO)])}function gHe(e,{sagaStack:t}){dU(e)||En.exception(`Unhandled saga error ${pHe(e.stack,t)}`,e)}function*xO(){const e=yield*ww(qb),t=yield*ww(dm),n={};e!=null&&(n.id=`${e}`),t!=null&&t!==""&&(n.email=t),En.setUser(Object.keys(n).length!==0?n:null)}const hHe=/\s/;function pHe(e,t){var o;const n=(e==null?void 0:e.trimStart().split(hHe)[0])??"UnknownError",r="    created by ",i=((o=t.split(`
`).find(s=>s.startsWith(r)))==null?void 0:o.replace(r,""))??"an unknown saga";return`${n} inside of ${i}`}function Cp(e){return e.authorized}function t3(e){return e.ui.theme==="dark"}function mHe(e){return e.ui.selectedThemeValue}const Uv="exec-analytics";if(process.type!=="browser")throw new Error('"ExecAnalyticsProxyServerForRenderer" can be required only in the browser (Main) process');class yHe{constructor(t){T(this,"handler",(t,n)=>{this.redirector.send(n)});this.redirector=t}start(){J.ipcMain.on(Uv,this.handler)}stop(){J.ipcMain.removeListener(Uv,this.handler)}}const IHe=e=>new Promise(t=>setTimeout(t,e)),vHe=Ae.object({type:Ae.literal("EXEC_CHANNEL_OPEN_FAILED"),softwareVersion:Ae.optional(Ae.string()),comment:Ae.optional(Ae.string())}),CHe=Ef(vHe);class LO{constructor(t){this.dispatch=t}async send(t){CHe(t)&&(await IHe(Ew),this.dispatch(U0e({sshserver:t.softwareVersion,sshserverComment:t.comment})))}}async function TB(e){const n=(await ud.sep.fetchAllKeys()).find(r=>r.publicKey===e);if(!n)throw new Error("Key not found");return n}class bHe{constructor(){T(this,"tasks",[]);T(this,"isExecuting",!1)}add(t){return new Promise((n,r)=>{this.tasks.push({request:t,isCancelled:!1,resolve:n,reject:r}),this.maybeExecute()})}cancel(t){const n=this.tasks.find(r=>r.request.request_id===t);return n?(n.isCancelled=!0,!0):!1}canStartNewTask(){return!(this.isExecuting||this.tasks.length===0)}maybeExecute(){this.canStartNewTask()&&this.execute()}async execute(){const t=this.tasks.shift();if(t){if(this.isExecuting=!0,t.isCancelled){this.onTaskFailed(t,new Error("Cancelled"));return}try{const n=await this.sign(t.request);this.onTaskSucceeded(t,n)}catch(n){this.onTaskFailed(t,n)}}}onTaskSucceeded(t,n){t.resolve(n),this.onTaskFinished()}onTaskFailed(t,n){t.reject(n),this.onTaskFinished()}onTaskFinished(){this.isExecuting=!1,this.maybeExecute()}async sign(t){return(await TB(t.publicKey)).sign(t.data)}}function ky(e){return{isSuccess:!1,error:e}}function Vy(e){return{isSuccess:!0,result:e}}const YO="keychain.sep";class n3{static listen(){J.ipcMain.handle(YO,(t,n,r)=>this.handle(n,r))}static async isAvailable(t="FULL_CHECK"){if(!lD)return!1;const n=tp.getDeprecatedDeviceHasSepSupport();if(t==="SHALLOW_CHECK")return!!n;if(n!=null)return n;const r=await this.invoke("CHECK_SUPPORTED");return tp.setDeprecatedDeviceHasSepSupport(r),r}static async generateNewKey(t){const n=await this.invoke("GENERATE",t);if(!n.isSuccess)throw new Error(n.error.message);return n.result}static async removeKey(t){const n=await this.invoke("REMOVE",t);if(!n.isSuccess)throw new Error(n.error.message);return n.result}static signData(t,n){const r=Fc();return{promise:this.invokeSignatureRequest({request_id:r,data:t,publicKey:n}),cancel:async()=>this.invoke("SIGN_CANCEL",r)}}static async checkKeyExists(t){return this.invoke("CHECK_KEY_EXISTS",t)}static async getAllKeys(){const t=await this.invoke("GET_ALL_KEYS");if(!t.isSuccess)throw new Error(t.error.message);return t.result}static async invokeSignatureRequest(t){const n=await this.invoke("SIGN",t);if(!n.isSuccess)throw new Error(n.error.message);return n.result}static invoke(t,n){return J.ipcRenderer.invoke(YO,t,n)}static handle(t,n){switch(t){case"CHECK_SUPPORTED":return this.handleIsSupported();case"GENERATE":return this.handleGenerateNewKey(n);case"REMOVE":return this.handleRemoveKey(n);case"SIGN":return this.handleSignatureRequest(n);case"SIGN_CANCEL":return this.handleCancelSignatureRequest(n);case"CHECK_KEY_EXISTS":return this.handleCheckKeyExists(n);case"GET_ALL_KEYS":return this.handleGetAllKeys();default:throw new Error("API Misuse")}}static handleIsSupported(){return ud.sep.isSupported()}static async handleGenerateNewKey(t){try{const n=await ud.sep.generateNewKey({label:t});return Vy(n.publicKey)}catch(n){return ky(n)}}static async handleRemoveKey(t){try{const r=await(await TB(t)).remove();return Vy(r)}catch(n){return ky(n)}}static async handleSignatureRequest(t){try{const n=await this.signatureRequests.add(t);return Vy(n)}catch(n){return ky(n)}}static handleCancelSignatureRequest(t){return this.signatureRequests.cancel(t)}static async handleCheckKeyExists(t){try{return(await TB(t)).publicKey.length!==0}catch{return!1}}static async handleGetAllKeys(){try{const n=(await ud.sep.fetchAllKeys()).map(r=>({label:r.label,publicKey:r.publicKey}));return Vy(n)}catch(t){return ky(t)}}}T(n3,"signatureRequests",new bHe);function AHe(e){var t;return(t=e.user.account.promotions)==null?void 0:t.enterprise_trial}var r3={exports:{}};(function(e){((t,n)=>{e.exports?e.exports=n():t.fuzzysort=n()})(rn,t=>{var n=(pe,re)=>{if(!pe||!re)return D;var q=m(pe);P(re)||(re=p(re));var Be=q.bitflags;return(Be&re._bitflags)!==Be?D:y(q,re)},r=(pe,re,q)=>{if(!pe)return q!=null&&q.all?v(re,q):M;var Be=m(pe),B=Be.bitflags,w=Be.containsSpace,F=d((q==null?void 0:q.threshold)||0),Y=(q==null?void 0:q.limit)||oe,Se=0,Ge=0,ke=re.length;function dt(Jt){Se<Y?(Oe.add(Jt),++Se):(++Ge,Jt._score>Oe.peek()._score&&Oe.replaceTop(Jt))}if(q!=null&&q.key)for(var ot=q.key,bt=0;bt<ke;++bt){var Wt=re[bt],pt=Ee(Wt,ot);if(pt&&(P(pt)||(pt=p(pt)),(B&pt._bitflags)===B)){var Et=y(Be,pt);Et!==D&&(Et._score<F||(Et.obj=Wt,dt(Et)))}}else if(q!=null&&q.keys){var On=q.keys,Qt=On.length;e:for(var bt=0;bt<ke;++bt){var Wt=re[bt];{for(var ut=0,St=0;St<Qt;++St){var ot=On[St],pt=Ee(Wt,ot);if(!pt){$e[St]=ue;continue}P(pt)||(pt=p(pt)),$e[St]=pt,ut|=pt._bitflags}if((B&ut)!==B)continue}if(w)for(let xe=0;xe<Be.spaceSearches.length;xe++)Ce[xe]=X;for(var St=0;St<Qt;++St){if(pt=$e[St],pt===ue){ze[St]=ue;continue}if(ze[St]=y(Be,pt,!1,w),ze[St]===D){ze[St]=ue;continue}if(w)for(let Ye=0;Ye<Be.spaceSearches.length;Ye++){if(Ue[Ye]>-1e3&&Ce[Ye]>X){var se=(Ce[Ye]+Ue[Ye])/4;se>Ce[Ye]&&(Ce[Ye]=se)}Ue[Ye]>Ce[Ye]&&(Ce[Ye]=Ue[Ye])}}if(w){for(let xe=0;xe<Be.spaceSearches.length;xe++)if(Ce[xe]===X)continue e}else{var fe=!1;for(let xe=0;xe<Qt;xe++)if(ze[xe]._score!==X){fe=!0;break}if(!fe)continue}var we=new l(Qt);for(let xe=0;xe<Qt;xe++)we[xe]=ze[xe];if(w){var Te=0;for(let xe=0;xe<Be.spaceSearches.length;xe++)Te+=Ce[xe]}else{var Te=X;for(let Ye=0;Ye<Qt;Ye++){var Et=we[Ye];if(Et._score>-1e3&&Te>X){var se=(Te+Et._score)/4;se>Te&&(Te=se)}Et._score>Te&&(Te=Et._score)}}if(we.obj=Wt,we._score=Te,q!=null&&q.scoreFn){if(Te=q.scoreFn(we),!Te)continue;Te=d(Te),we._score=Te}Te<F||dt(we)}}else for(var bt=0;bt<ke;++bt){var pt=re[bt];if(pt&&(P(pt)||(pt=p(pt)),(B&pt._bitflags)===B)){var Et=y(Be,pt);Et!==D&&(Et._score<F||dt(Et))}}if(Se===0)return M;for(var qe=new Array(Se),bt=Se-1;bt>=0;--bt)qe[bt]=Oe.poll();return qe.total=Se+Ge,qe},i=(pe,re="<b>",q="</b>")=>{for(var Be=typeof re=="function"?re:void 0,B=pe.target,w=B.length,F=pe.indexes,Y="",Se=0,Ge=0,ke=!1,dt=[],ot=0;ot<w;++ot){var bt=B[ot];if(F[Ge]===ot){if(++Ge,ke||(ke=!0,Be?(dt.push(Y),Y=""):Y+=re),Ge===F.length){Be?(Y+=bt,dt.push(Be(Y,Se++)),Y="",dt.push(B.substr(ot+1))):Y+=bt+q+B.substr(ot+1);break}}else ke&&(ke=!1,Be?(dt.push(Be(Y,Se++)),Y=""):Y+=q);Y+=bt}return Be?dt:Y},o=pe=>{typeof pe=="number"?pe=""+pe:typeof pe!="string"&&(pe="");var re=b(pe);return c(pe,{_targetLower:re._lower,_targetLowerCodes:re.lowerCodes,_bitflags:re.bitflags})},s=()=>{L.clear(),G.clear()};class a{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((re,q)=>re-q)}set indexes(re){return this._indexes=re}highlight(re,q){return i(this,re,q)}get score(){return u(this._score)}set score(re){this._score=d(re)}}class l extends Array{get score(){return u(this._score)}set score(re){this._score=d(re)}}var c=(pe,re)=>{const q=new a;return q.target=pe,q.obj=re.obj??D,q._score=re._score??X,q._indexes=re._indexes??[],q._targetLower=re._targetLower??"",q._targetLowerCodes=re._targetLowerCodes??D,q._nextBeginningIndexes=re._nextBeginningIndexes??D,q._bitflags=re._bitflags??0,q},u=pe=>pe===X?0:pe>1?pe:Math.E**(((-pe+1)**.04307-1)*-2),d=pe=>pe===0?X:pe>1?pe:1-Math.pow(Math.log(pe)/-2+1,1/.04307),g=pe=>{typeof pe=="number"?pe=""+pe:typeof pe!="string"&&(pe=""),pe=pe.trim();var re=b(pe),q=[];if(re.containsSpace){var Be=pe.split(/\s+/);Be=[...new Set(Be)];for(var B=0;B<Be.length;B++)if(Be[B]!==""){var w=b(Be[B]);q.push({lowerCodes:w.lowerCodes,_lower:Be[B].toLowerCase(),containsSpace:!1})}}return{lowerCodes:re.lowerCodes,_lower:re._lower,containsSpace:re.containsSpace,bitflags:re.bitflags,spaceSearches:q}},p=pe=>{if(pe.length>999)return o(pe);var re=L.get(pe);return re!==void 0||(re=o(pe),L.set(pe,re)),re},m=pe=>{if(pe.length>999)return g(pe);var re=G.get(pe);return re!==void 0||(re=g(pe),G.set(pe,re)),re},v=(pe,re)=>{var q=[];q.total=pe.length;var Be=(re==null?void 0:re.limit)||oe;if(re!=null&&re.key)for(var B=0;B<pe.length;B++){var w=pe[B],F=Ee(w,re.key);if(F!=D){P(F)||(F=p(F));var Y=c(F.target,{_score:F._score,obj:w});if(q.push(Y),q.length>=Be)return q}}else if(re!=null&&re.keys)for(var B=0;B<pe.length;B++){for(var w=pe[B],Se=new l(re.keys.length),Ge=re.keys.length-1;Ge>=0;--Ge){var F=Ee(w,re.keys[Ge]);if(!F){Se[Ge]=ue;continue}P(F)||(F=p(F)),F._score=X,F._indexes.len=0,Se[Ge]=F}if(Se.obj=w,Se._score=X,q.push(Se),q.length>=Be)return q}else for(var B=0;B<pe.length;B++){var F=pe[B];if(F!=D&&(P(F)||(F=p(F)),F._score=X,F._indexes.len=0,q.push(F),q.length>=Be))return q}return q},y=(pe,re,q=!1,Be=!1)=>{if(q===!1&&pe.containsSpace)return I(pe,re,Be);for(var B=pe._lower,w=pe.lowerCodes,F=w[0],Y=re._targetLowerCodes,Se=w.length,Ge=Y.length,bt=0,ke=0,dt=0;;){var ot=F===Y[ke];if(ot){if(W[dt++]=ke,++bt,bt===Se)break;F=w[bt]}if(++ke,ke>=Ge)return D}var bt=0,Wt=!1,pt=0,Et=re._nextBeginningIndexes;Et===D&&(Et=re._nextBeginningIndexes=N(re.target)),ke=W[0]===0?0:Et[W[0]-1];var On=0;if(ke!==Ge)for(;;)if(ke>=Ge){if(bt<=0||(++On,On>200))break;--bt;var Qt=j[--pt];ke=Et[Qt]}else{var ot=w[bt]===Y[ke];if(ot){if(j[pt++]=ke,++bt,bt===Se){Wt=!0;break}++ke}else ke=Et[ke]}var ut=Se<=1?-1:re._targetLower.indexOf(B,W[0]),St=!!~ut,se=St?ut===0||re._nextBeginningIndexes[ut-1]===ut:!1;if(St&&!se){for(var fe=0;fe<Et.length;fe=Et[fe])if(!(fe<=ut)){for(var we=0;we<Se&&w[we]===re._targetLowerCodes[fe+we];we++);if(we===Se){ut=fe,se=!0;break}}}var Te=xe=>{for(var Ye=0,Gt=0,ft=1;ft<Se;++ft)xe[ft]-xe[ft-1]!==1&&(Ye-=xe[ft],++Gt);var Je=xe[Se-1]-xe[0]-(Se-1);if(Ye-=(12+Je)*Gt,xe[0]!==0&&(Ye-=xe[0]*xe[0]*.2),!Wt)Ye*=1e3;else{for(var Hn=1,ft=Et[0];ft<Ge;ft=Et[ft])++Hn;Hn>24&&(Ye*=(Hn-24)*10)}return Ye-=(Ge-Se)/2,St&&(Ye/=1+Se*Se*1),se&&(Ye/=1+Se*Se*1),Ye-=(Ge-Se)/2,Ye};if(Wt)if(se){for(var fe=0;fe<Se;++fe)W[fe]=ut+fe;var qe=W,Jt=Te(W)}else var qe=j,Jt=Te(j);else{if(St)for(var fe=0;fe<Se;++fe)W[fe]=ut+fe;var qe=W,Jt=Te(qe)}re._score=Jt;for(var fe=0;fe<Se;++fe)re._indexes[fe]=qe[fe];re._indexes.len=Se;const ct=new a;return ct.target=re.target,ct._score=re._score,ct._indexes=re._indexes,ct},I=(pe,re,q)=>{for(var Be=new Set,B=0,w=D,F=0,Y=pe.spaceSearches,Se=Y.length,Ge=0,ke=()=>{for(let se=Ge-1;se>=0;se--)re._nextBeginningIndexes[O[se*2+0]]=O[se*2+1]},dt=!1,St=0;St<Se;++St){Ue[St]=X;var ot=Y[St];if(w=y(ot,re),q){if(w===D)continue;dt=!0}else if(w===D)return ke(),D;var bt=St===Se-1;if(!bt){var Wt=w._indexes,pt=!0;for(let fe=0;fe<Wt.len-1;fe++)if(Wt[fe+1]-Wt[fe]!==1){pt=!1;break}if(pt){var Et=Wt[Wt.len-1]+1,On=re._nextBeginningIndexes[Et-1];for(let fe=Et-1;fe>=0&&On===re._nextBeginningIndexes[fe];fe--)re._nextBeginningIndexes[fe]=Et,O[Ge*2+0]=fe,O[Ge*2+1]=On,Ge++}}B+=w._score/Se,Ue[St]=w._score/Se,w._indexes[0]<F&&(B-=(F-w._indexes[0])*2),F=w._indexes[0];for(var Qt=0;Qt<w._indexes.len;++Qt)Be.add(w._indexes[Qt])}if(q&&!dt)return D;ke();var ut=y(pe,re,!0);if(ut!==D&&ut._score>B){if(q)for(var St=0;St<Se;++St)Ue[St]=ut._score/Se;return ut}q&&(w=re),w._score=B;var St=0;for(let se of Be)w._indexes[St++]=se;return w._indexes.len=St,w},b=pe=>{for(var re=pe.length,q=pe.toLowerCase(),Be=[],B=0,w=!1,F=0;F<re;++F){var Y=Be[F]=q.charCodeAt(F);if(Y===32){w=!0;continue}var Se=Y>=97&&Y<=122?Y-97:Y>=48&&Y<=57?26:Y<=127?30:31;B|=1<<Se}return{lowerCodes:Be,bitflags:B,containsSpace:w,_lower:q}},A=pe=>{for(var re=pe.length,q=[],Be=0,B=!1,w=!1,F=0;F<re;++F){var Y=pe.charCodeAt(F),Se=Y>=65&&Y<=90,Ge=Se||Y>=97&&Y<=122||Y>=48&&Y<=57,ke=Se&&!B||!w||!Ge;B=Se,w=Ge,ke&&(q[Be++]=F)}return q},N=pe=>{for(var re=pe.length,q=A(pe),Be=[],B=q[0],w=0,F=0;F<re;++F)B>F?Be[F]=B:(B=q[++w],Be[F]=B===void 0?re:B);return Be},L=new Map,G=new Map,W=[],j=[],O=[],Ce=[],Ue=[],$e=[],ze=[],Ee=(pe,re)=>{var q=pe[re];if(q!==void 0)return q;if(typeof re=="function")return re(pe);var Be=re;Array.isArray(re)||(Be=re.split("."));for(var B=Be.length,w=-1;pe&&++w<B;)pe=pe[Be[w]];return pe},P=pe=>typeof pe=="object"&&typeof pe._bitflags=="number",oe=1/0,X=-oe,M=[];M.total=0;var D=null,ue=o(""),Re=pe=>{var re=[],q=0,Be={},B=w=>{for(var F=0,Y=re[F],Se=1;Se<q;){var Ge=Se+1;F=Se,Ge<q&&re[Ge]._score<re[Se]._score&&(F=Ge),re[F-1>>1]=re[F],Se=1+(F<<1)}for(var ke=F-1>>1;F>0&&Y._score<re[ke]._score;ke=(F=ke)-1>>1)re[F]=re[ke];re[F]=Y};return Be.add=w=>{var F=q;re[q++]=w;for(var Y=F-1>>1;F>0&&w._score<re[Y]._score;Y=(F=Y)-1>>1)re[F]=re[Y];re[F]=w},Be.poll=w=>{if(q!==0){var F=re[0];return re[0]=re[--q],B(),F}},Be.peek=w=>{if(q!==0)return re[0]},Be.replaceTop=w=>{re[0]=w,B()},Be},Oe=Re();return{single:n,go:r,prepare:o,cleanup:s}})})(r3);var i3=r3.exports;const SHe=Ht(i3),WB={VAULTS:"vaults",SFTP:"sftp"},o3={JUMP_TO:"JUMP_TO"},_He=["label","address","description","ssh_config.port","telnet_config.port"];function s3(e){return e.commandPalette}class wHe{constructor(t){T(this,"local_id");T(this,"position");T(this,"presenter");T(this,"entity");T(this,"endAdornment");T(this,"onEnter");T(this,"onDoubleClick");T(this,"onSelect");T(this,"isSelected");T(this,"entityName","fakeEntityLayoutElement");this.local_id=Fc(),this.position=t.position,this.presenter=t.presenter,this.endAdornment=t.endAdornment||null,this.entity=t.entity||null,this.onEnter=t.onEnter||(()=>{}),this.onDoubleClick=t.onDoubleClick||(()=>{}),this.onSelect=t.onSelect||(()=>{}),this.isSelected=t.isSelected}get entityLocalPath(){return`${this.entityName}/${this.local_id}`}}class BHe extends wHe{constructor(t){super({...t,position:"start",isSelected:!0,onDoubleClick:()=>{},onEnter:()=>{},onSelect:()=>{}}),this.endAdornment=lbe.createElement("div",null)}}class EHe{label(t){return t.label||t.username||""}description(t){return t.authMethod}placeholder(){return"Add a label..."}icon(t){return"identity"}}const RHe=new EHe;class GHe{label(t){return t.displayLabel}placeholder(){return"Set a Label or Script..."}description(t){return t.label&&(BU(t.script)??"")}icon(){return"snippet"}}const NHe=new GHe;class ZHe{label(t){return t.label}description(t){return t.type}placeholder(){return"Add a label..."}icon(t){return t.private_key&&GG(t.private_key)?"hardware_key":"key"}}const THe=new ZHe;class WHe{label(t){return t.label}placeholder(){return"Set a package name..."}description(t){const n=t.snippets_count!==1;return`${t.snippets_count||0} ${n?"snippets":"snippet"}`}icon(){return"snippets_package"}}const kHe=new WHe;function VHe(e){return e instanceof iu}function OHe(e){return e.local_id==null}class HHe{label(t){return t.label}description(t){return t.type}placeholder(){return"Add a label..."}icon(t){return VHe(t)?OHe(t)?"unsaved_sep_key":"sep_key":t.type.toLowerCase().endsWith("-sk")?"hardware_key":"key"}}const FHe=new HHe;class xHe{label(t){return t.label}description(t){return t.type}placeholder(){return"Add a label..."}icon(){return"unsaved_hardware_key"}}const LHe=new xHe;let YHe=class extends Ls{constructor(n){super(n);T(this,"keygenOptions");T(this,"_type");this.keygenOptions=n.keygenOptions,this._type=`Type ${CU(this.keygenOptions.type)}`}get type(){return this._type}};class PHe{label(t){return t.label}description(t){return t.type}placeholder(){return"Add a label..."}icon(){return"unsaved_key"}}const XHe=new PHe;class UHe extends Ls{constructor(n){super(n);T(this,"key_type");this.key_type=n.keyName?`Type ${n.keyName}`:null}get type(){return this.key_type?this.key_type:super.type}}const DHe=e=>"keygenOptions"in e,KHe=e=>"keyName"in e,MHe=(e,t)=>{switch(e){case"snippetsPackage":return{presenter:kHe,entity:new ou({...t})};case"snippet":return{presenter:NHe,entity:new Ys({...t})};case"key":return{presenter:THe,entity:new Ls({...t})};case"fidoKeygen":return DHe(t)?{presenter:LHe,entity:new YHe({...t})}:null;case"keygen":return KHe(t)?{presenter:XHe,entity:new UHe({...t})}:null;case"identity":return{presenter:RHe,entity:new uo({...t,is_visible:!0})};case"sep":case"sepKeygen":return{presenter:FHe,entity:new iu({...t})};default:return null}},Qs=(e,t)=>{var n;if(t)return(n=e.pageSliderFormPreview[t])==null?void 0:n.formState},PO=(e,t)=>{const n=Qs(e,t);return to({form:n,formId:n==null?void 0:n.formNavigation.activeFormId})},a3=(e,t)=>{var n;if(t)return(n=e.pageSliderFormPreview[t])==null?void 0:n.entity};function Ng(e,t){const n=Qs(e,t.page);return to({form:n,formId:t.formId})}const Zu=e=>({rootFormPreview:t=>{var n;return(n=Qs(t,e))==null?void 0:n.preview},rootFormLocalPath:t=>{var n;return((n=Qs(t,e))==null?void 0:n.entityLocalPath)??""},rootFormId:t=>{var n;return((n=Qs(t,e))==null?void 0:n.formId)??""},rootFormSavingStatus:t=>{var n;return(n=Qs(t,e))==null?void 0:n.savingStatus},rootFormVault:t=>{var n;return(n=Qs(t,e))==null?void 0:n.entityVault},formNavigation:t=>{var n;return(n=Qs(t,e))==null?void 0:n.formNavigation},preview:t=>{var n;return(n=PO(t,e))==null?void 0:n.preview},savingStatus:t=>{var n;return(n=PO(t,e))==null?void 0:n.savingStatus},presenterPreview:t=>{var o;if(!e)return null;const n=(o=Qs(t,e))==null?void 0:o.preview,r=a3(t,e);if(!r||!n)return null;const i=MHe(r,n);return i?new BHe({presenter:i.presenter,entity:i.entity}):null}}),$He={snippet:Zu("snippet"),keychain:Zu("keychain"),terminal:Zu("terminal"),host:Zu("host"),portForwarding:Zu("portForwarding"),default:Zu()};function zHe(e){return e/1024/1024}const JHe=100*1024*1024,jHe=ve(e=>e.history.sessionLogsFilesStatus,e=>e);ve(e=>e.history.sessionLogsStorageSize,e=>!e||e<JHe?{over:!1}:{over:!0,size:Math.round(zHe(e))});function QHe(e){return e.entities.multiKeys}function qHe(e){const t=(e==null?void 0:e.credentials_mode)==="credentials_sharing";return{is_shared:t,encrypted_with:t?e.encrypted_with:null}}function eFe(e){return e&&(xo.is(e)||ri.is(e))?qHe(e):{is_shared:!!(e!=null&&e.is_shared),encrypted_with:e!=null&&e.is_shared?e.encrypted_with:null}}function tFe(e,t){return"credentials_mode"in e?e.credentials_mode===t:!1}function nFe(e,t){return e==null?!1:e.is_shared&&((t==null?void 0:t.ignoreCredentialsMode)||tFe(e,"credentials_sharing"))}function l3(e,t){return e.encrypted_with!=null&&e.is_shared&&t.encrypted_with!=null&&t.is_shared?e.encrypted_with===t.encrypted_with:e.is_shared===t.is_shared}function c3(e,t){const n=t.id!=null;return l3(e,{is_shared:n,encrypted_with:t.encryptionKeyId})}const y1=e=>l3(p5(e),h5),rFe=e=>e.isDefault,iFe=e=>e.id!=null,oFe=e=>"pendingAccess"in e&&e.pendingAccess===!0;var sFe=Kp,aFe=X9,lFe=Object.prototype,cFe=lFe.hasOwnProperty,uFe=aFe(function(e,t,n){cFe.call(e,n)?e[n].push(t):sFe(e,n,[t])}),dFe=uFe;const fFe=Ht(dFe);function gFe(e){return e.length===1?e[0]:void 0}function hFe(e,t){var i;const n=t.length<e.length?t.length:"all";if(t.length===0)return{selectedCount:n,label:"Vaults"};const r=gFe(t);if(r!==void 0){const o=((i=e.find(s=>s.id===r))==null?void 0:i.name)??"Unnamed";return{selectedCount:n,label:o}}return{selectedCount:n,label:"Vaults"}}const pFe=Object.freeze({...q0e,members:[]});function bh(e){var t=String(e);if(t==="[object Object]")try{t=JSON.stringify(e)}catch{}return t}var mFe=function(){function e(){this.some=!1,this.none=!0}return e.prototype[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:void 0}}}},e.prototype.unwrapOr=function(t){return t},e.prototype.expect=function(t){throw new Error(""+t)},e.prototype.unwrap=function(){throw new Error("Tried to unwrap None")},e.prototype.map=function(t){return this},e.prototype.andThen=function(t){return this},e.prototype.toResult=function(t){return pc(t)},e.prototype.toString=function(){return"None"},e}(),Dv=new mFe;Object.freeze(Dv);var yFe=function(){function e(t){if(!(this instanceof e))return new e(t);this.some=!0,this.none=!1,this.val=t}return e.prototype[Symbol.iterator]=function(){var t=Object(this.val);return Symbol.iterator in t?t[Symbol.iterator]():{next:function(){return{done:!0,value:void 0}}}},e.prototype.unwrapOr=function(t){return this.val},e.prototype.expect=function(t){return this.val},e.prototype.unwrap=function(){return this.val},e.prototype.map=function(t){return Kv(t(this.val))},e.prototype.andThen=function(t){return t(this.val)},e.prototype.toResult=function(t){return rd(this.val)},e.prototype.safeUnwrap=function(){return this.val},e.prototype.toString=function(){return"Some("+bh(this.val)+")"},e.EMPTY=new e(void 0),e}(),Kv=yFe,XO;(function(e){function t(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var s=[],a=0,l=i;a<l.length;a++){var c=l[a];if(c.some)s.push(c.val);else return c}return Kv(s)}e.all=t;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var s=0,a=i;s<a.length;s++){var l=a[s];return l.some,l}return Dv}e.any=n;function r(i){return i instanceof Kv||i===Dv}e.isOption=r})(XO||(XO={}));var IFe=function(){function e(t){if(!(this instanceof e))return new e(t);this.ok=!1,this.err=!0,this.val=t;var n=new Error().stack.split(`
`).slice(2);n&&n.length>0&&n[0].includes("ErrImpl")&&n.shift(),this._stack=n.join(`
`)}return e.prototype[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:void 0}}}},e.prototype.else=function(t){return t},e.prototype.unwrapOr=function(t){return t},e.prototype.expect=function(t){throw new Error(t+" - Error: "+bh(this.val)+`
`+this._stack)},e.prototype.unwrap=function(){throw new Error("Tried to unwrap Error: "+bh(this.val)+`
`+this._stack)},e.prototype.map=function(t){return this},e.prototype.andThen=function(t){return this},e.prototype.mapErr=function(t){return new pc(t(this.val))},e.prototype.toOption=function(){return Dv},e.prototype.toString=function(){return"Err("+bh(this.val)+")"},Object.defineProperty(e.prototype,"stack",{get:function(){return this+`
`+this._stack},enumerable:!1,configurable:!0}),e.EMPTY=new e(void 0),e}(),pc=IFe,vFe=function(){function e(t){if(!(this instanceof e))return new e(t);this.ok=!0,this.err=!1,this.val=t}return e.prototype[Symbol.iterator]=function(){var t=Object(this.val);return Symbol.iterator in t?t[Symbol.iterator]():{next:function(){return{done:!0,value:void 0}}}},e.prototype.else=function(t){return this.val},e.prototype.unwrapOr=function(t){return this.val},e.prototype.expect=function(t){return this.val},e.prototype.unwrap=function(){return this.val},e.prototype.map=function(t){return new rd(t(this.val))},e.prototype.andThen=function(t){return t(this.val)},e.prototype.mapErr=function(t){return this},e.prototype.toOption=function(){return Kv(this.val)},e.prototype.safeUnwrap=function(){return this.val},e.prototype.toString=function(){return"Ok("+bh(this.val)+")"},e.EMPTY=new e(void 0),e}(),rd=vFe,UO;(function(e){function t(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];for(var l=[],c=0,u=s;c<u.length;c++){var d=u[c];if(d.ok)l.push(d.val);else return d}return new rd(l)}e.all=t;function n(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];for(var l=[],c=0,u=s;c<u.length;c++){var d=u[c];if(d.ok)return d;l.push(d.val)}return new pc(l)}e.any=n;function r(s){try{return new rd(s())}catch(a){return new pc(a)}}e.wrap=r;function i(s){try{return s().then(function(a){return new rd(a)}).catch(function(a){return new pc(a)})}catch(a){return Promise.resolve(new pc(a))}}e.wrapAsync=i;function o(s){return s instanceof pc||s instanceof rd}e.isResult=o})(UO||(UO={}));function CFe(e){return e.id===g5}const DO=new Set(["editName","editMembersList","updateMembersRoles","updateOwnRole","removeVault","editVaultSettings","viewVaultData"]),bFe=new Set([]),AFe=new Set(["editVaultSettings"]),SFe=new Set(["updateMembersRoles","editVaultSettings","viewVaultData"]),_Fe=new Set(["viewVaultData"]),wFe=new Set(["viewVaultData"]),BFe=new Set(["viewVaultData"]),EFe=new Set(["editName","editMembersList","editVaultSettings","updateMembersRoles","removeVault","updateOwnRole"]),RFe=new Set(["editName","editMembersList","updateMembersRoles","updateOwnRole"]),GFe=(e,t,n)=>{if(CFe(e))return RFe;if(e&&y1(e))return AFe;if(t==null||!e)return bFe;const{isDefault:o,members:s}=e,a=s.find(c=>c.user_id===t),l=(a==null?void 0:a.role)==="Editor";return o?n?SFe:l?_Fe:wFe:n?l?DO:EFe:l?DO:BFe},NFe=e=>e.find(t=>t.isDefault);function ZFe(e){return e!=null}function TFe(e){return ZFe(e)&&e!=="Member"}function u3(e){return TFe(e==null?void 0:e.role)}const n0=e=>e.vault.selectedVaultIds,I1=ve(e=>e.vault.vaults,e=>e.vault.withoutKeys,FFe,J9,(e,t,n,r)=>{const i=e.find(o=>o.isDefault);if(i)return i;if(!t.some(o=>o.isDefault)&&n!=null){const o={id:JG,encryptionKeyId:null,isDefault:!0,name:"Team",role:n};return r?o:{...o,pendingAccess:!0}}});ve(I1,e=>e==null?void 0:e.role);const cu=ve(e=>e.vault.vaults,I1,J9,(e,t,n)=>!n&&(t==null?void 0:t.encryptionKeyId)!=null?[qa,{...t,isDefault:!0,pendingAccess:!0}]:e.length>0?[qa,...e]:t?[qa,t]:[qa]),d3=e=>e.vault.other??[];function WFe(e,t,n,r){const i=fFe(t,o=>o.vault_id);return new Map(e.map(o=>{const s=i[o.id??pFe.id]??[],a=GFe({...o,members:s},n,r);return[o.id,{...o,members:s,permissions:a}]}))}const f3=e=>e.vault.vaultsMembers??[];ve(cu,d3,f3,qb,t0,lHe,(e,t,n,r,i,o)=>{const s=[...e,...t];return kFe(s,n,r,i,o)});const kFe=(e,t,n,r,i)=>{const o=t.filter(({user_id:s})=>i.has(s));return WFe(e,o,n,r)};ve((e,t)=>t,f3,(e,t)=>t.filter(n=>n.vault_id===e));const v1=ve(cu,n0,(e,t)=>e.filter(n=>t.includes(n.id))),VFe=ve(cu,e=>e.filter(t=>u3(t)));ve(VFe,n0,(e,t)=>e.find(n=>t.some(r=>r===n.id))??qa);const OFe=e=>e.vault.changeVaultWizards;ve((e,t)=>OFe(e),(e,t)=>t,(e,t)=>e.find(n=>n.wizardID===t));const HFe=ve((e,t)=>e.vault.vaults,I1,(e,t)=>t,(e,t,n)=>n.is_shared?n.encrypted_with==null||(t==null?void 0:t.id)===JG&&n.is_shared?t:e.find(i=>c3(n,i)):qa);ve(cu,e=>{var t;return(t=e.vault.other)==null?void 0:t.filter(u3)},(e,t)=>e.filter(iFe).concat(t??[]));const g3=ve(cu,n0,Pf,dm,(e,t,n,r)=>{const i=r?"Vaults":"Vault",{label:o,selectedCount:s}=hFe(e,t);return{label:n?o:i,defaultLabel:i,selectedCount:s}});function FFe(e){if(t0(e))return"Owner";const t=!!e.user.hasAccessToSharedData,n=xFe(e.user).includes("platform__edit_shared_entities");if(t&&n)return"Editor";if(nHe(e))return"Member"}function xFe(e){var t;return((t=e.team)==null?void 0:t.team_permissions)||[]}ve(n0,e=>!e.length);const LFe=ve(cu,e=>{const t=NFe(e);return t!==void 0&&oFe(t)}),C1=ve(cu,d3,(e,t)=>[...e,...t]);ve(C1,e=>e.filter(t=>!y1(t)));ve(C1,e=>e.filter(t=>!y1(t)&&!rFe(t)));ve([C1,e=>e.vault.logs],(e,t)=>{const n=new Map(t.map(r=>[r.vault_id,r]));return e.reduce((r,i)=>{const o=n.get(i.id);return o&&r.push({...o,encryptionKeyId:i.encryptionKeyId}),r},[])});const YFe=[];function tf(e,t){return e.map(n=>new t(n))}function uu(e,t){return ve(e,v1,(n,r)=>{const i=r0(n,r);return tf(i,t)})}function po(e,t){return ve(e,n=>tf(n,t))}uu(e=>e.entities.snippets,Ys);const h3=po(e=>e.entities.snippets,Ys);uu(e=>e.entities.snippetsPackages,ou);const PFe=po(e=>e.entities.snippetsPackages,ou),p3=po(e=>e.entities.hardwareKeys,iu),m3=p3;uu(e=>e.entities.sshKeys,Ls);const b1=po(e=>e.entities.sshKeys,Ls);uu(e=>e.entities.visibleIdentities,uo);const y3=po(e=>e.entities.visibleIdentities,uo);uu(e=>e.entities.portForwardingRules,Rb);const XFe=po(e=>e.entities.portForwardingRules,Rb);uu(e=>e.entities.knownHosts,yd);const UFe=po(e=>e.entities.knownHosts,yd);ve(UFe,e=>e.map(t=>t.toOpenSshFormat()));const I3=po(e=>e.entities.histories,kG);ve([I3,qb],(e,t)=>e.filter(n=>!n.actorId||n.actorId===t));const DFe=ve(I3,jHe,(e,t)=>!t||RG(t)?YFe:e.filter(n=>{if(!n.local_id)return!1;const r=t[n.local_id];return["can open","can download"].includes(r)})),KFe=eU(e=>new Map(e.map(t=>[t.id,t]))),MFe=ve(e=>e.entities.deviceSet,e=>KFe(e)),$Fe=eU(e=>new Map(e.map(t=>[t.history_connection,t]))),zFe=ve(e=>e.entities.logSet,e=>$Fe(e));ve(DFe,MFe,zFe,v1,(e,t,n,r)=>{const i=[];return e.forEach(o=>{const{device:s,id:a}=o,l=a?n.get(a):void 0;if(!r.map(m=>m.encryptionKeyId).includes(o.encrypted_with))return;if(!l){i.push(o);return}const u=s!=null&&s.id?t.get(s.id):void 0,d=l.disconnected_at?vU(l.disconnected_at).getTime():o.disconnectedAt,g=l.location??void 0,p=l.ip_address??void 0;i.push({...o,deviceInfo:u,disconnectedAt:d,location:g,ipAddress:p})}),i});po(e=>e.entities.hostLatestActivities,eAe);const A1=uu(e=>e.entities.hosts,ri),gm=po(e=>e.entities.hosts,ri);ve((e,t)=>gm(e),s3,(e,t)=>t,(e,{filter:t},n)=>{if(t&&t===o3.JUMP_TO)return[];if(n===""){const r=new Date;return e.sort((i,o)=>{const s=i.interaction_date?new Date(i.interaction_date).getTime():0,a=o.interaction_date?new Date(o.interaction_date).getTime():0,l=Math.abs(s-r.getTime()),c=Math.abs(a-r.getTime());return l-c})}return i3.go(n,e,{keys:_He}).map(({obj:r})=>r)});const JFe=e=>e.entities.hosts.length;ve((e,t)=>A1(e),(e,t)=>t,(e,t)=>t.map(n=>e.find(r=>r.local_id===n.local_id)).filter(Tl));const jFe=ve(gm,e=>t=>t&&e.find(n=>n.local_id===t)||null),QFe=po(e=>e.entities.workspaceTemplates,Nw),qFe=(e,t)=>e.map(n=>{const r=t.find(i=>{var o;return i.local_id===((o=n.host)==null?void 0:o.local_id)});return n.clone({host:r})}).filter(n=>Tl(n.host));ve(e=>QFe(e),A1,(e,t)=>e.map(n=>{const r=qFe(n.workspaceTerminals,t);if(Gw(r))return n.clone({workspaceTerminals:r})}).filter(Boolean));const exe=ve(e=>e.entities.groups,A1,v1,(e,t,n)=>{const r=r0(e,n);return tf(r,xo).map(i=>{const o=new tm(i),s=QG(i,tf(r,xo));return o.children_groups=s,o.children_hosts=qG(s,t),o})}),txe=ve(po(e=>e.entities.groups,xo),gm,(e,t)=>e.map(n=>{const r=new tm(n),i=QG(n,e);return r.children_groups=i,r.children_hosts=qG(i,t),r}));ve((e,t=null)=>txe(e),(e,t=null)=>t,v3);ve(exe,e=>t=>v3(e,t));function v3(e,t){return t&&e.find(n=>n.local_id===t)||null}const nxe=ve(e=>e.entities.historyCommands,e=>{const t=e.map(n=>new Gb(n).clone({completed_at:n.completed_at??new Date(0)}));return CD(t,["completed_at","rating"],["desc","desc"])}),r0=(e,t)=>t?e.filter(n=>t.some(r=>c3(n,r))):e;function Qg(e,t){const n=HFe(e,t);return n!=null?[n]:[]}function MS(e,t){return ve(e,Qg,CI(t))}function CI(e){return(t,n)=>{const r=r0(t,n);return tf(r,e)}}ve((e,t)=>e.entities.hosts,(e,t,n)=>n!=null&&n.allVaults?null:Qg(e,t),CI(ri)),ve((e,t)=>e.entities.visibleIdentities,(e,t,n)=>nFe(t,n)?Qg(e,t):[qa],CI(uo)),ve((e,t)=>e.entities.sshKeys,(e,t)=>eFe(t).is_shared?Qg(e,t):[qa],CI(Ls)),MS(m3,iu),ve((e,t)=>e.entities.groups,gm,(e,t,n)=>n!=null&&n.allVaults?null:Qg(e,t),(e,t,n)=>{const r=tf(r0(e,n),xo);return r.map(i=>{const o=new tm(i),s=QG(i,r);return o.children_groups=s,o.children_hosts=qG(s,t),o})}),MS(e=>e.entities.snippets,Ys),MS(e=>e.entities.snippetsPackages,ou);ve([(e,t)=>a3(e,t),(e,t)=>$He[t].rootFormId(e),(e,t)=>t,e=>e],(e,t,n,r)=>{var i;if(e)return(i=$S[e])==null?void 0:i.call($S,r,{page:n,formId:t})});const $S={snippetsPackage:ve([Ng,PFe],(e,t)=>t.find(n=>n.entityLocalPath===(e==null?void 0:e.entityLocalPath))),snippet:ve([Ng,h3],(e,t)=>t.find(n=>n.entityLocalPath===(e==null?void 0:e.entityLocalPath))),historyCommands:(e,t)=>{},key:ve([Ng,b1],(e,t)=>t.find(n=>n.entityLocalPath===(e==null?void 0:e.entityLocalPath))),identity:ve([Ng,y3],(e,t)=>t.find(n=>n.entityLocalPath===(e==null?void 0:e.entityLocalPath))),sep:ve([Ng,p3],(e,t)=>t.find(n=>n.entityLocalPath===(e==null?void 0:e.entityLocalPath))),sepKeygen:(e,t)=>{},keygen:(e,t)=>{},fidoKeygen:(e,t)=>{},keyExport:(e,t)=>{},multikey:(e,t)=>{}};ve(gm,h3,b1,y3,XFe,(e,t,n,r,i)=>({hosts:e,snippets:t,sshKeys:n,identities:r,portForwardingRules:i}));ve([(e,t)=>t,b1,m3,QHe],(e,t,n,r)=>[...t,...n,...r].find(i=>i.local_id===e));function rxe(e){if(tp.getDeprecatedForceToShowTeamTrialPromotions())return!0;const t=Pf(e),n=JFe(e);return!t&&n>=2}function S1(e){return e.navigation.localPath}function ixe(e){return e.navigation.homePath}function C3(e){return e.navigation.global}function Oy(e,t){const n=b3(e,t);return n==null?!1:n.path.startsWith(L1e)}function b3(e,t){return C3(e).find(n=>n.windowId===t)}ve(t0,rxe,Pf,$9,(e,t,n,r)=>{const i=[];let o="/account";return e&&(i.push({title:"Team",path:"/manage-team"}),o="/manage-team"),i.push({title:"Account",path:"/account"}),n&&i.push({title:"Vaults",path:"/vaults"}),t&&r&&i.push({title:"Invite People",path:"/invite-people"}),i.push({title:"Terminal",path:"/terminal"}),i.push({title:"SFTP",path:"/sftp"}),i.push({title:"Logs",path:"/logs"}),i.push({title:"Shortcuts",path:"/shortcuts"}),process.env.TERMIUS_DEVELOPER_TOOLS&&i.push({title:"Developer Tools",path:"/developer-tools"}),process.env.TERMIUS_QA_HELPERS&&i.push({title:"QA Helpers",path:"/qa-helpers"}),{tabs:i,defaultPath:o,sanitizePath:s};function s(a){const l=i.find(c=>c.path===a);return l==null?o:l.path}});ve(C3,e=>{var t;return((t=e.find(n=>n.windowId===ED))==null?void 0:t.path)==="/invite-people"});const oxe=E("SIGN_IN_WITH_SSO"),sxe=E("CONTINUE_SSO"),axe=E("SIGN_IN_WITH_ENTERPRISE_SSO"),lxe=E("CONTINUE_ENTERPRISE_SSO");E("RESET_SSO_AUTHORIZATION");Ie("SIGN_IN_WITH_FIREBASE_SSO");Ie("SIGN_IN_WITH_WORK_OS_SSO");const KO=()=>{const e=Ri.release();return!!(vt.macOS()&&T_.lt("18.0.0",e)||vt.windows()&&T_.lt("10.0.18362",e))};function cxe(e){return t=>n=>r=>{var i;return n(((i=r.meta)==null?void 0:i.scope)==="local"?r:ps({meta:{windowId:e}},r))}}class uxe{constructor(){T(this,"observers",[])}subscribe(t){return this.observers.push(t),()=>{this.observers.splice(this.observers.indexOf(t),1)}}sendAction(t){this.observers.forEach(n=>{n.sendAction(t)})}}const Ah=`${mt.dirname(__dirname)}/icons/icon.png`;var zS={},hr={},Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.CancellationError=Ol.CancellationToken=void 0;const dxe=zc;class fxe extends dxe.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new kB);const n=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}};let r=null;return new Promise((i,o)=>{let s=null;if(r=()=>{try{s!=null&&(s(),s=null)}finally{o(new kB)}},this.cancelled){r();return}this.onCancel(r),t(i,o,a=>{s=a})}).then(i=>(n(),i)).catch(i=>{throw n(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}Ol.CancellationToken=fxe;class kB extends Error{constructor(){super("cancelled")}}Ol.CancellationError=kB;var oi={},VB={exports:{}},Hy={exports:{}},JS,MO;function gxe(){if(MO)return JS;MO=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,o=r*365.25;JS=function(u,d){d=d||{};var g=typeof u;if(g==="string"&&u.length>0)return s(u);if(g==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var g=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return g*o;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*n;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=r?c(u,d,r,"day"):d>=n?c(u,d,n,"hour"):d>=t?c(u,d,t,"minute"):d>=e?c(u,d,e,"second"):u+" ms"}function c(u,d,g,p){var m=d>=g*1.5;return Math.round(u/g)+" "+p+(m?"s":"")}return JS}var jS,$O;function A3(){if($O)return jS;$O=1;function e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=a,r.humanize=gxe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let g=0;for(let p=0;p<d.length;p++)g=(g<<5)-g+d.charCodeAt(p),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=n;function r(d){let g,p=null,m,v;function y(...I){if(!y.enabled)return;const b=y,A=Number(new Date),N=A-(g||A);b.diff=N,b.prev=g,b.curr=A,g=A,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let L=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(W,j)=>{if(W==="%%")return"%";L++;const O=r.formatters[j];if(typeof O=="function"){const Ce=I[L];W=O.call(b,Ce),I.splice(L,1),L--}return W}),r.formatArgs.call(b,I),(b.log||r.log).apply(b,I)}return y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==r.namespaces&&(m=r.namespaces,v=r.enabled(d)),v),set:I=>{p=I}}),typeof r.init=="function"&&r.init(y),y}function i(d,g){const p=r(this.namespace+(typeof g>"u"?":":g)+d);return p.log=this.log,p}function o(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let g;const p=(typeof d=="string"?d:"").split(/[\s,]+/),m=p.length;for(g=0;g<m;g++)p[g]&&(d=p[g].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(l),...r.skips.map(l).map(g=>"-"+g)].join(",");return r.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let g,p;for(g=0,p=r.skips.length;g<p;g++)if(r.skips[g].test(d))return!1;for(g=0,p=r.names.length;g<p;g++)if(r.names[g].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return jS=e,jS}var zO;function hxe(){return zO||(zO=1,function(e,t){t.formatArgs=r,t.save=i,t.load=o,t.useColors=n,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(u++,g==="%c"&&(d=u))}),l.splice(d,0,c)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=A3()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(Hy,Hy.exports)),Hy.exports}var Fy={exports:{}},JO;function pxe(){return JO||(JO=1,function(e,t){const n=qx,r=gr;t.init=u,t.log=a,t.formatArgs=o,t.save=l,t.load=c,t.useColors=i,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const g=W5();g&&(g.stderr||g).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(g=>/^debug_/i.test(g)).reduce((g,p)=>{const m=p.substring(6).toLowerCase().replace(/_([a-z])/g,(y,I)=>I.toUpperCase());let v=process.env[p];return/^(yes|on|true|enabled)$/i.test(v)?v=!0:/^(no|off|false|disabled)$/i.test(v)?v=!1:v==="null"?v=null:v=Number(v),g[m]=v,g},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}function o(g){const{namespace:p,useColors:m}=this;if(m){const v=this.color,y="\x1B[3"+(v<8?v:"8;5;"+v),I=`  ${y};1m${p} \x1B[0m`;g[0]=I+g[0].split(`
`).join(`
`+I),g.push(y+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else g[0]=s()+p+" "+g[0]}function s(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function a(...g){return process.stderr.write(r.formatWithOptions(t.inspectOpts,...g)+`
`)}function l(g){g?process.env.DEBUG=g:delete process.env.DEBUG}function c(){return process.env.DEBUG}function u(g){g.inspectOpts={};const p=Object.keys(t.inspectOpts);for(let m=0;m<p.length;m++)g.inspectOpts[p[m]]=t.inspectOpts[p[m]]}e.exports=A3()(t);const{formatters:d}=e.exports;d.o=function(g){return this.inspectOpts.colors=this.useColors,r.inspect(g,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},d.O=function(g){return this.inspectOpts.colors=this.useColors,r.inspect(g,this.inspectOpts)}}(Fy,Fy.exports)),Fy.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?VB.exports=hxe():VB.exports=pxe();var mxe=VB.exports,Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.newError=yxe;function yxe(e,t){const n=new Error(e);return n.code=t,n}var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.ProgressCallbackTransform=void 0;const Ixe=Pl;class vxe extends Ixe.Transform{constructor(t,n,r){super(),this.total=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}hm.ProgressCallbackTransform=vxe;Object.defineProperty(oi,"__esModule",{value:!0});oi.DigestTransform=oi.HttpExecutor=oi.HttpError=void 0;oi.createHttpError=OB;oi.parseJson=Exe;oi.configureRequestOptionsFromUrl=_3;oi.configureRequestUrl=w1;oi.safeGetHeader=Rd;oi.configureRequestOptions=$v;oi.safeStringifyJson=zv;const Cxe=Ns,bxe=mxe,Axe=Rn,Sxe=Pl,S3=Sr,_xe=Ol,jO=Xf,wxe=hm,Zg=(0,bxe.default)("electron-builder");function OB(e,t=null){return new _1(e.statusCode||-1,`${e.statusCode} ${e.statusMessage}`+(t==null?"":`
`+JSON.stringify(t,null,"  "))+`
Headers: `+zv(e.headers),t)}const Bxe=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class _1 extends Error{constructor(t,n=`HTTP error: ${Bxe.get(t)||t}`,r=null){super(n),this.statusCode=t,this.description=r,this.name="HttpError",this.code=`HTTP_ERROR_${t}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}oi.HttpError=_1;function Exe(e){return e.then(t=>t==null||t.length===0?null:JSON.parse(t))}class Mv{constructor(){this.maxRedirects=10}request(t,n=new _xe.CancellationToken,r){$v(t);const i=r==null?void 0:JSON.stringify(r),o=i?Buffer.from(i):void 0;if(o!=null){Zg(i);const{headers:s,...a}=t;t={method:"post",headers:{"Content-Type":"application/json","Content-Length":o.length,...s},...a}}return this.doApiRequest(t,n,s=>s.end(o))}doApiRequest(t,n,r,i=0){return Zg.enabled&&Zg(`Request: ${zv(t)}`),n.createPromise((o,s,a)=>{const l=this.createRequest(t,c=>{try{this.handleResponse(c,t,n,o,s,i,r)}catch(u){s(u)}});this.addErrorAndTimeoutHandlers(l,s,t.timeout),this.addRedirectHandlers(l,t,s,i,c=>{this.doApiRequest(c,n,r,i).then(o).catch(s)}),r(l,s),a(()=>l.abort())})}addRedirectHandlers(t,n,r,i,o){}addErrorAndTimeoutHandlers(t,n,r=60*1e3){this.addTimeOutHandler(t,n,r),t.on("error",n),t.on("aborted",()=>{n(new Error("Request has been aborted by the server"))})}handleResponse(t,n,r,i,o,s,a){var l;if(Zg.enabled&&Zg(`Response: ${t.statusCode} ${t.statusMessage}, request options: ${zv(n)}`),t.statusCode===404){o(OB(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(t.statusCode===204){i();return}const c=(l=t.statusCode)!==null&&l!==void 0?l:0,u=c>=300&&c<400,d=Rd(t,"location");if(u&&d!=null){if(s>this.maxRedirects){o(this.createMaxRedirectError());return}this.doApiRequest(Mv.prepareRedirectUrlOptions(d,n),r,a,s).then(i).catch(o);return}t.setEncoding("utf8");let g="";t.on("error",o),t.on("data",p=>g+=p),t.on("end",()=>{try{if(t.statusCode!=null&&t.statusCode>=400){const p=Rd(t,"content-type"),m=p!=null&&(Array.isArray(p)?p.find(v=>v.includes("json"))!=null:p.includes("json"));o(OB(t,`method: ${n.method||"GET"} url: ${n.protocol||"https:"}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}

          Data:
          ${m?JSON.stringify(JSON.parse(g)):g}
          `))}else i(g.length===0?null:g)}catch(p){o(p)}})}async downloadToBuffer(t,n){return await n.cancellationToken.createPromise((r,i,o)=>{const s=[],a={headers:n.headers||void 0,redirect:"manual"};w1(t,a),$v(a),this.doDownload(a,{destination:null,options:n,onCancel:o,callback:l=>{l==null?r(Buffer.concat(s)):i(l)},responseHandler:(l,c)=>{let u=0;l.on("data",d=>{if(u+=d.length,u>524288e3){c(new Error("Maximum allowed size is 500 MB"));return}s.push(d)}),l.on("end",()=>{c(null)})}},0)})}doDownload(t,n,r){const i=this.createRequest(t,o=>{if(o.statusCode>=400){n.callback(new Error(`Cannot download "${t.protocol||"https:"}//${t.hostname}${t.path}", status ${o.statusCode}: ${o.statusMessage}`));return}o.on("error",n.callback);const s=Rd(o,"location");if(s!=null){r<this.maxRedirects?this.doDownload(Mv.prepareRedirectUrlOptions(s,t),n,r++):n.callback(this.createMaxRedirectError());return}n.responseHandler==null?Gxe(n,o):n.responseHandler(o,n.callback)});this.addErrorAndTimeoutHandlers(i,n.callback,t.timeout),this.addRedirectHandlers(i,t,n.callback,r,o=>{this.doDownload(o,n,r++)}),i.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(t,n,r){t.on("socket",i=>{i.setTimeout(r,()=>{t.abort(),n(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(t,n){const r=_3(t,{...n}),i=r.headers;if(i!=null&&i.authorization){const o=new S3.URL(t);(o.hostname.endsWith(".amazonaws.com")||o.searchParams.has("X-Amz-Credential"))&&delete i.authorization}return r}static retryOnServerError(t,n=3){for(let r=0;;r++)try{return t()}catch(i){if(r<n&&(i instanceof _1&&i.isServerError()||i.code==="EPIPE"))continue;throw i}}}oi.HttpExecutor=Mv;function _3(e,t){const n=$v(t);return w1(new S3.URL(e),n),n}function w1(e,t){t.protocol=e.protocol,t.hostname=e.hostname,e.port?t.port=e.port:t.port&&delete t.port,t.path=e.pathname+e.search}class HB extends Sxe.Transform{get actual(){return this._actual}constructor(t,n="sha512",r="base64"){super(),this.expected=t,this.algorithm=n,this.encoding=r,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,Cxe.createHash)(n)}_transform(t,n,r){this.digester.update(t),r(null,t)}_flush(t){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(n){t(n);return}t(null)}validate(){if(this._actual==null)throw(0,jO.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,jO.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}oi.DigestTransform=HB;function Rxe(e,t,n){return e!=null&&t!=null&&e!==t?(n(new Error(`checksum mismatch: expected ${t} but got ${e} (X-Checksum-Sha2 header)`)),!1):!0}function Rd(e,t){const n=e.headers[t];return n==null?null:Array.isArray(n)?n.length===0?null:n[n.length-1]:n}function Gxe(e,t){if(!Rxe(Rd(t,"X-Checksum-Sha2"),e.options.sha2,e.callback))return;const n=[];if(e.options.onProgress!=null){const s=Rd(t,"content-length");s!=null&&n.push(new wxe.ProgressCallbackTransform(parseInt(s,10),e.options.cancellationToken,e.options.onProgress))}const r=e.options.sha512;r!=null?n.push(new HB(r,"sha512",r.length===128&&!r.includes("+")&&!r.includes("Z")&&!r.includes("=")?"hex":"base64")):e.options.sha2!=null&&n.push(new HB(e.options.sha2,"sha256","hex"));const i=(0,Axe.createWriteStream)(e.destination);n.push(i);let o=t;for(const s of n)s.on("error",a=>{i.close(),e.options.cancellationToken.cancelled||e.callback(a)}),o=o.pipe(s);i.on("finish",()=>{i.close(e.callback)})}function $v(e,t,n){n!=null&&(e.method=n),e.headers={...e.headers};const r=e.headers;return t!=null&&(r.authorization=t.startsWith("Basic")||t.startsWith("Bearer")?t:`token ${t}`),r["User-Agent"]==null&&(r["User-Agent"]="electron-builder"),(n==null||n==="GET"||r["Cache-Control"]==null)&&(r["Cache-Control"]="no-cache"),e.protocol==null&&process.versions.electron!=null&&(e.protocol="https:"),e}function zv(e,t){return JSON.stringify(e,(n,r)=>n.endsWith("Authorization")||n.endsWith("authorization")||n.endsWith("Password")||n.endsWith("PASSWORD")||n.endsWith("Token")||n.includes("password")||n.includes("token")||t!=null&&t.has(n)?"<stripped sensitive data>":r,2)}var i0={};Object.defineProperty(i0,"__esModule",{value:!0});i0.githubUrl=Nxe;i0.getS3LikeProviderBaseUrl=Zxe;function Nxe(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}function Zxe(e){const t=e.provider;if(t==="s3")return Txe(e);if(t==="spaces")return Wxe(e);throw new Error(`Not supported provider: ${t}`)}function Txe(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return w3(t,e.path)}function w3(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function Wxe(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return w3(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var B1={};Object.defineProperty(B1,"__esModule",{value:!0});B1.parseDn=kxe;function kxe(e){let t=!1,n=null,r="",i=0;e=e.trim();const o=new Map;for(let s=0;s<=e.length;s++){if(s===e.length){n!==null&&o.set(n,r);break}const a=e[s];if(t){if(a==='"'){t=!1;continue}}else{if(a==='"'){t=!0;continue}if(a==="\\"){s++;const l=parseInt(e.slice(s,s+2),16);Number.isNaN(l)?r+=e[s]:(s++,r+=String.fromCharCode(l));continue}if(n===null&&a==="="){n=r,r="";continue}if(a===","||a===";"||a==="+"){n!==null&&o.set(n,r),n=null,r="";continue}}if(a===" "&&!t){if(r.length===0)continue;if(s>i){let l=s;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||n===null&&e[i]==="="||n!==null&&e[i]==="+"){s=i-1;continue}}r+=a}return o}var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.nil=nf.UUID=void 0;const B3=Ns,E3=Xf,Vxe="options.name must be either a string or a Buffer",QO=(0,B3.randomBytes)(16);QO[0]=QO[0]|1;const bI={},qt=[];for(let e=0;e<256;e++){const t=(e+256).toString(16).substr(1);bI[t]=e,qt[e]=t}class Dc{constructor(t){this.ascii=null,this.binary=null;const n=Dc.check(t);if(!n)throw new Error("not a UUID");this.version=n.version,n.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,n){return Oxe(t,"sha1",80,n)}toString(){return this.ascii==null&&(this.ascii=Hxe(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,n=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(bI[t[14]+t[15]]&240)>>4,variant:qO((bI[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<n+16)return!1;let r=0;for(;r<16&&t[n+r]===0;r++);return r===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[n+6]&240)>>4,variant:qO((t[n+8]&224)>>5),format:"binary"}}throw(0,E3.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const n=Buffer.allocUnsafe(16);let r=0;for(let i=0;i<16;i++)n[i]=bI[t[r++]+t[r++]],(i===3||i===5||i===7||i===9)&&(r+=1);return n}}nf.UUID=Dc;Dc.OID=Dc.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function qO(e){switch(e){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var Sh;(function(e){e[e.ASCII=0]="ASCII",e[e.BINARY=1]="BINARY",e[e.OBJECT=2]="OBJECT"})(Sh||(Sh={}));function Oxe(e,t,n,r,i=Sh.ASCII){const o=(0,B3.createHash)(t);if(typeof e!="string"&&!Buffer.isBuffer(e))throw(0,E3.newError)(Vxe,"ERR_INVALID_UUID_NAME");o.update(r),o.update(e);const a=o.digest();let l;switch(i){case Sh.BINARY:a[6]=a[6]&15|n,a[8]=a[8]&63|128,l=a;break;case Sh.OBJECT:a[6]=a[6]&15|n,a[8]=a[8]&63|128,l=new Dc(a);break;default:l=qt[a[0]]+qt[a[1]]+qt[a[2]]+qt[a[3]]+"-"+qt[a[4]]+qt[a[5]]+"-"+qt[a[6]&15|n]+qt[a[7]]+"-"+qt[a[8]&63|128]+qt[a[9]]+"-"+qt[a[10]]+qt[a[11]]+qt[a[12]]+qt[a[13]]+qt[a[14]]+qt[a[15]];break}return l}function Hxe(e){return qt[e[0]]+qt[e[1]]+qt[e[2]]+qt[e[3]]+"-"+qt[e[4]]+qt[e[5]]+"-"+qt[e[6]]+qt[e[7]]+"-"+qt[e[8]]+qt[e[9]]+"-"+qt[e[10]]+qt[e[11]]+qt[e[12]]+qt[e[13]]+qt[e[14]]+qt[e[15]]}nf.nil=new Dc("00000000-0000-0000-0000-000000000000");var pm={},R3={};(function(e){(function(t){t.parser=function(B,w){return new r(B,w)},t.SAXParser=r,t.SAXStream=u,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(B,w){if(!(this instanceof r))return new r(B,w);var F=this;o(F),F.q=F.c="",F.bufferCheckPosition=t.MAX_BUFFER_LENGTH,F.opt=w||{},F.opt.lowercase=F.opt.lowercase||F.opt.lowercasetags,F.looseCase=F.opt.lowercase?"toLowerCase":"toUpperCase",F.tags=[],F.closed=F.closedRoot=F.sawRoot=!1,F.tag=F.error=null,F.strict=!!B,F.noscript=!!(B||F.opt.noscript),F.state=O.BEGIN,F.strictEntities=F.opt.strictEntities,F.ENTITIES=F.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),F.attribList=[],F.opt.xmlns&&(F.ns=Object.create(v)),F.trackPosition=F.opt.position!==!1,F.trackPosition&&(F.position=F.line=F.column=0),Ue(F,"onready")}Object.create||(Object.create=function(B){function w(){}w.prototype=B;var F=new w;return F}),Object.keys||(Object.keys=function(B){var w=[];for(var F in B)B.hasOwnProperty(F)&&w.push(F);return w});function i(B){for(var w=Math.max(t.MAX_BUFFER_LENGTH,10),F=0,Y=0,Se=n.length;Y<Se;Y++){var Ge=B[n[Y]].length;if(Ge>w)switch(n[Y]){case"textNode":ze(B);break;case"cdata":$e(B,"oncdata",B.cdata),B.cdata="";break;case"script":$e(B,"onscript",B.script),B.script="";break;default:P(B,"Max buffer length exceeded: "+n[Y])}F=Math.max(F,Ge)}var ke=t.MAX_BUFFER_LENGTH-F;B.bufferCheckPosition=ke+B.position}function o(B){for(var w=0,F=n.length;w<F;w++)B[n[w]]=""}function s(B){ze(B),B.cdata!==""&&($e(B,"oncdata",B.cdata),B.cdata=""),B.script!==""&&($e(B,"onscript",B.script),B.script="")}r.prototype={end:function(){oe(this)},write:Be,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}var l=t.EVENTS.filter(function(B){return B!=="error"&&B!=="end"});function c(B,w){return new u(B,w)}function u(B,w){if(!(this instanceof u))return new u(B,w);a.apply(this),this._parser=new r(B,w),this.writable=!0,this.readable=!0;var F=this;this._parser.onend=function(){F.emit("end")},this._parser.onerror=function(Y){F.emit("error",Y),F._parser.error=null},this._decoder=null,l.forEach(function(Y){Object.defineProperty(F,"on"+Y,{get:function(){return F._parser["on"+Y]},set:function(Se){if(!Se)return F.removeAllListeners(Y),F._parser["on"+Y]=Se,Se;F.on(Y,Se)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(a.prototype,{constructor:{value:u}}),u.prototype.write=function(B){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(B)){if(!this._decoder){var w=pJ.StringDecoder;this._decoder=new w("utf8")}B=this._decoder.write(B)}return this._parser.write(B.toString()),this.emit("data",B),!0},u.prototype.end=function(B){return B&&B.length&&this.write(B),this._parser.end(),!0},u.prototype.on=function(B,w){var F=this;return!F._parser["on"+B]&&l.indexOf(B)!==-1&&(F._parser["on"+B]=function(){var Y=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Y.splice(0,0,B),F.emit.apply(F,Y)}),a.prototype.on.call(F,B,w)};var d="[CDATA[",g="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:p,xmlns:m},y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N(B){return B===" "||B===`
`||B==="\r"||B==="	"}function L(B){return B==='"'||B==="'"}function G(B){return B===">"||N(B)}function W(B,w){return B.test(w)}function j(B,w){return!W(B,w)}var O=0;t.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(B){var w=t.ENTITIES[B],F=typeof w=="number"?String.fromCharCode(w):w;t.ENTITIES[B]=F});for(var Ce in t.STATE)t.STATE[t.STATE[Ce]]=Ce;O=t.STATE;function Ue(B,w,F){B[w]&&B[w](F)}function $e(B,w,F){B.textNode&&ze(B),Ue(B,w,F)}function ze(B){B.textNode=Ee(B.opt,B.textNode),B.textNode&&Ue(B,"ontext",B.textNode),B.textNode=""}function Ee(B,w){return B.trim&&(w=w.trim()),B.normalize&&(w=w.replace(/\s+/g," ")),w}function P(B,w){return ze(B),B.trackPosition&&(w+=`
Line: `+B.line+`
Column: `+B.column+`
Char: `+B.c),w=new Error(w),B.error=w,Ue(B,"onerror",w),B}function oe(B){return B.sawRoot&&!B.closedRoot&&X(B,"Unclosed root tag"),B.state!==O.BEGIN&&B.state!==O.BEGIN_WHITESPACE&&B.state!==O.TEXT&&P(B,"Unexpected end"),ze(B),B.c="",B.closed=!0,Ue(B,"onend"),r.call(B,B.strict,B.opt),B}function X(B,w){if(typeof B!="object"||!(B instanceof r))throw new Error("bad call to strictFail");B.strict&&P(B,w)}function M(B){B.strict||(B.tagName=B.tagName[B.looseCase]());var w=B.tags[B.tags.length-1]||B,F=B.tag={name:B.tagName,attributes:{}};B.opt.xmlns&&(F.ns=w.ns),B.attribList.length=0,$e(B,"onopentagstart",F)}function D(B,w){var F=B.indexOf(":"),Y=F<0?["",B]:B.split(":"),Se=Y[0],Ge=Y[1];return w&&B==="xmlns"&&(Se="xmlns",Ge=""),{prefix:Se,local:Ge}}function ue(B){if(B.strict||(B.attribName=B.attribName[B.looseCase]()),B.attribList.indexOf(B.attribName)!==-1||B.tag.attributes.hasOwnProperty(B.attribName)){B.attribName=B.attribValue="";return}if(B.opt.xmlns){var w=D(B.attribName,!0),F=w.prefix,Y=w.local;if(F==="xmlns")if(Y==="xml"&&B.attribValue!==p)X(B,"xml: prefix must be bound to "+p+`
Actual: `+B.attribValue);else if(Y==="xmlns"&&B.attribValue!==m)X(B,"xmlns: prefix must be bound to "+m+`
Actual: `+B.attribValue);else{var Se=B.tag,Ge=B.tags[B.tags.length-1]||B;Se.ns===Ge.ns&&(Se.ns=Object.create(Ge.ns)),Se.ns[Y]=B.attribValue}B.attribList.push([B.attribName,B.attribValue])}else B.tag.attributes[B.attribName]=B.attribValue,$e(B,"onattribute",{name:B.attribName,value:B.attribValue});B.attribName=B.attribValue=""}function Re(B,w){if(B.opt.xmlns){var F=B.tag,Y=D(B.tagName);F.prefix=Y.prefix,F.local=Y.local,F.uri=F.ns[Y.prefix]||"",F.prefix&&!F.uri&&(X(B,"Unbound namespace prefix: "+JSON.stringify(B.tagName)),F.uri=Y.prefix);var Se=B.tags[B.tags.length-1]||B;F.ns&&Se.ns!==F.ns&&Object.keys(F.ns).forEach(function(ut){$e(B,"onopennamespace",{prefix:ut,uri:F.ns[ut]})});for(var Ge=0,ke=B.attribList.length;Ge<ke;Ge++){var dt=B.attribList[Ge],ot=dt[0],bt=dt[1],Wt=D(ot,!0),pt=Wt.prefix,Et=Wt.local,On=pt===""?"":F.ns[pt]||"",Qt={name:ot,value:bt,prefix:pt,local:Et,uri:On};pt&&pt!=="xmlns"&&!On&&(X(B,"Unbound namespace prefix: "+JSON.stringify(pt)),Qt.uri=pt),B.tag.attributes[ot]=Qt,$e(B,"onattribute",Qt)}B.attribList.length=0}B.tag.isSelfClosing=!!w,B.sawRoot=!0,B.tags.push(B.tag),$e(B,"onopentag",B.tag),w||(!B.noscript&&B.tagName.toLowerCase()==="script"?B.state=O.SCRIPT:B.state=O.TEXT,B.tag=null,B.tagName=""),B.attribName=B.attribValue="",B.attribList.length=0}function Oe(B){if(!B.tagName){X(B,"Weird empty close tag."),B.textNode+="</>",B.state=O.TEXT;return}if(B.script){if(B.tagName!=="script"){B.script+="</"+B.tagName+">",B.tagName="",B.state=O.SCRIPT;return}$e(B,"onscript",B.script),B.script=""}var w=B.tags.length,F=B.tagName;B.strict||(F=F[B.looseCase]());for(var Y=F;w--;){var Se=B.tags[w];if(Se.name!==Y)X(B,"Unexpected close tag");else break}if(w<0){X(B,"Unmatched closing tag: "+B.tagName),B.textNode+="</"+B.tagName+">",B.state=O.TEXT;return}B.tagName=F;for(var Ge=B.tags.length;Ge-- >w;){var ke=B.tag=B.tags.pop();B.tagName=B.tag.name,$e(B,"onclosetag",B.tagName);var dt={};for(var ot in ke.ns)dt[ot]=ke.ns[ot];var bt=B.tags[B.tags.length-1]||B;B.opt.xmlns&&ke.ns!==bt.ns&&Object.keys(ke.ns).forEach(function(Wt){var pt=ke.ns[Wt];$e(B,"onclosenamespace",{prefix:Wt,uri:pt})})}w===0&&(B.closedRoot=!0),B.tagName=B.attribValue=B.attribName="",B.attribList.length=0,B.state=O.TEXT}function pe(B){var w=B.entity,F=w.toLowerCase(),Y,Se="";return B.ENTITIES[w]?B.ENTITIES[w]:B.ENTITIES[F]?B.ENTITIES[F]:(w=F,w.charAt(0)==="#"&&(w.charAt(1)==="x"?(w=w.slice(2),Y=parseInt(w,16),Se=Y.toString(16)):(w=w.slice(1),Y=parseInt(w,10),Se=Y.toString(10))),w=w.replace(/^0+/,""),isNaN(Y)||Se.toLowerCase()!==w?(X(B,"Invalid character entity"),"&"+B.entity+";"):String.fromCodePoint(Y))}function re(B,w){w==="<"?(B.state=O.OPEN_WAKA,B.startTagPosition=B.position):N(w)||(X(B,"Non-whitespace before first tag."),B.textNode=w,B.state=O.TEXT)}function q(B,w){var F="";return w<B.length&&(F=B.charAt(w)),F}function Be(B){var w=this;if(this.error)throw this.error;if(w.closed)return P(w,"Cannot write after close. Assign an onready handler.");if(B===null)return oe(w);typeof B=="object"&&(B=B.toString());for(var F=0,Y="";Y=q(B,F++),w.c=Y,!!Y;)switch(w.trackPosition&&(w.position++,Y===`
`?(w.line++,w.column=0):w.column++),w.state){case O.BEGIN:if(w.state=O.BEGIN_WHITESPACE,Y==="\uFEFF")continue;re(w,Y);continue;case O.BEGIN_WHITESPACE:re(w,Y);continue;case O.TEXT:if(w.sawRoot&&!w.closedRoot){for(var Se=F-1;Y&&Y!=="<"&&Y!=="&";)Y=q(B,F++),Y&&w.trackPosition&&(w.position++,Y===`
`?(w.line++,w.column=0):w.column++);w.textNode+=B.substring(Se,F-1)}Y==="<"&&!(w.sawRoot&&w.closedRoot&&!w.strict)?(w.state=O.OPEN_WAKA,w.startTagPosition=w.position):(!N(Y)&&(!w.sawRoot||w.closedRoot)&&X(w,"Text data outside of root node."),Y==="&"?w.state=O.TEXT_ENTITY:w.textNode+=Y);continue;case O.SCRIPT:Y==="<"?w.state=O.SCRIPT_ENDING:w.script+=Y;continue;case O.SCRIPT_ENDING:Y==="/"?w.state=O.CLOSE_TAG:(w.script+="<"+Y,w.state=O.SCRIPT);continue;case O.OPEN_WAKA:if(Y==="!")w.state=O.SGML_DECL,w.sgmlDecl="";else if(!N(Y))if(W(y,Y))w.state=O.OPEN_TAG,w.tagName=Y;else if(Y==="/")w.state=O.CLOSE_TAG,w.tagName="";else if(Y==="?")w.state=O.PROC_INST,w.procInstName=w.procInstBody="";else{if(X(w,"Unencoded <"),w.startTagPosition+1<w.position){var Ge=w.position-w.startTagPosition;Y=new Array(Ge).join(" ")+Y}w.textNode+="<"+Y,w.state=O.TEXT}continue;case O.SGML_DECL:(w.sgmlDecl+Y).toUpperCase()===d?($e(w,"onopencdata"),w.state=O.CDATA,w.sgmlDecl="",w.cdata=""):w.sgmlDecl+Y==="--"?(w.state=O.COMMENT,w.comment="",w.sgmlDecl=""):(w.sgmlDecl+Y).toUpperCase()===g?(w.state=O.DOCTYPE,(w.doctype||w.sawRoot)&&X(w,"Inappropriately located doctype declaration"),w.doctype="",w.sgmlDecl=""):Y===">"?($e(w,"onsgmldeclaration",w.sgmlDecl),w.sgmlDecl="",w.state=O.TEXT):(L(Y)&&(w.state=O.SGML_DECL_QUOTED),w.sgmlDecl+=Y);continue;case O.SGML_DECL_QUOTED:Y===w.q&&(w.state=O.SGML_DECL,w.q=""),w.sgmlDecl+=Y;continue;case O.DOCTYPE:Y===">"?(w.state=O.TEXT,$e(w,"ondoctype",w.doctype),w.doctype=!0):(w.doctype+=Y,Y==="["?w.state=O.DOCTYPE_DTD:L(Y)&&(w.state=O.DOCTYPE_QUOTED,w.q=Y));continue;case O.DOCTYPE_QUOTED:w.doctype+=Y,Y===w.q&&(w.q="",w.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:w.doctype+=Y,Y==="]"?w.state=O.DOCTYPE:L(Y)&&(w.state=O.DOCTYPE_DTD_QUOTED,w.q=Y);continue;case O.DOCTYPE_DTD_QUOTED:w.doctype+=Y,Y===w.q&&(w.state=O.DOCTYPE_DTD,w.q="");continue;case O.COMMENT:Y==="-"?w.state=O.COMMENT_ENDING:w.comment+=Y;continue;case O.COMMENT_ENDING:Y==="-"?(w.state=O.COMMENT_ENDED,w.comment=Ee(w.opt,w.comment),w.comment&&$e(w,"oncomment",w.comment),w.comment=""):(w.comment+="-"+Y,w.state=O.COMMENT);continue;case O.COMMENT_ENDED:Y!==">"?(X(w,"Malformed comment"),w.comment+="--"+Y,w.state=O.COMMENT):w.state=O.TEXT;continue;case O.CDATA:Y==="]"?w.state=O.CDATA_ENDING:w.cdata+=Y;continue;case O.CDATA_ENDING:Y==="]"?w.state=O.CDATA_ENDING_2:(w.cdata+="]"+Y,w.state=O.CDATA);continue;case O.CDATA_ENDING_2:Y===">"?(w.cdata&&$e(w,"oncdata",w.cdata),$e(w,"onclosecdata"),w.cdata="",w.state=O.TEXT):Y==="]"?w.cdata+="]":(w.cdata+="]]"+Y,w.state=O.CDATA);continue;case O.PROC_INST:Y==="?"?w.state=O.PROC_INST_ENDING:N(Y)?w.state=O.PROC_INST_BODY:w.procInstName+=Y;continue;case O.PROC_INST_BODY:if(!w.procInstBody&&N(Y))continue;Y==="?"?w.state=O.PROC_INST_ENDING:w.procInstBody+=Y;continue;case O.PROC_INST_ENDING:Y===">"?($e(w,"onprocessinginstruction",{name:w.procInstName,body:w.procInstBody}),w.procInstName=w.procInstBody="",w.state=O.TEXT):(w.procInstBody+="?"+Y,w.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:W(I,Y)?w.tagName+=Y:(M(w),Y===">"?Re(w):Y==="/"?w.state=O.OPEN_TAG_SLASH:(N(Y)||X(w,"Invalid character in tag name"),w.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:Y===">"?(Re(w,!0),Oe(w)):(X(w,"Forward-slash in opening tag not followed by >"),w.state=O.ATTRIB);continue;case O.ATTRIB:if(N(Y))continue;Y===">"?Re(w):Y==="/"?w.state=O.OPEN_TAG_SLASH:W(y,Y)?(w.attribName=Y,w.attribValue="",w.state=O.ATTRIB_NAME):X(w,"Invalid attribute name");continue;case O.ATTRIB_NAME:Y==="="?w.state=O.ATTRIB_VALUE:Y===">"?(X(w,"Attribute without value"),w.attribValue=w.attribName,ue(w),Re(w)):N(Y)?w.state=O.ATTRIB_NAME_SAW_WHITE:W(I,Y)?w.attribName+=Y:X(w,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if(Y==="=")w.state=O.ATTRIB_VALUE;else{if(N(Y))continue;X(w,"Attribute without value"),w.tag.attributes[w.attribName]="",w.attribValue="",$e(w,"onattribute",{name:w.attribName,value:""}),w.attribName="",Y===">"?Re(w):W(y,Y)?(w.attribName=Y,w.state=O.ATTRIB_NAME):(X(w,"Invalid attribute name"),w.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(N(Y))continue;L(Y)?(w.q=Y,w.state=O.ATTRIB_VALUE_QUOTED):(X(w,"Unquoted attribute value"),w.state=O.ATTRIB_VALUE_UNQUOTED,w.attribValue=Y);continue;case O.ATTRIB_VALUE_QUOTED:if(Y!==w.q){Y==="&"?w.state=O.ATTRIB_VALUE_ENTITY_Q:w.attribValue+=Y;continue}ue(w),w.q="",w.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:N(Y)?w.state=O.ATTRIB:Y===">"?Re(w):Y==="/"?w.state=O.OPEN_TAG_SLASH:W(y,Y)?(X(w,"No whitespace between attributes"),w.attribName=Y,w.attribValue="",w.state=O.ATTRIB_NAME):X(w,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!G(Y)){Y==="&"?w.state=O.ATTRIB_VALUE_ENTITY_U:w.attribValue+=Y;continue}ue(w),Y===">"?Re(w):w.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(w.tagName)Y===">"?Oe(w):W(I,Y)?w.tagName+=Y:w.script?(w.script+="</"+w.tagName,w.tagName="",w.state=O.SCRIPT):(N(Y)||X(w,"Invalid tagname in closing tag"),w.state=O.CLOSE_TAG_SAW_WHITE);else{if(N(Y))continue;j(y,Y)?w.script?(w.script+="</"+Y,w.state=O.SCRIPT):X(w,"Invalid tagname in closing tag."):w.tagName=Y}continue;case O.CLOSE_TAG_SAW_WHITE:if(N(Y))continue;Y===">"?Oe(w):X(w,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var ke,dt;switch(w.state){case O.TEXT_ENTITY:ke=O.TEXT,dt="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:ke=O.ATTRIB_VALUE_QUOTED,dt="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:ke=O.ATTRIB_VALUE_UNQUOTED,dt="attribValue";break}Y===";"?(w[dt]+=pe(w),w.entity="",w.state=ke):W(w.entity.length?A:b,Y)?w.entity+=Y:(X(w,"Invalid character in entity name"),w[dt]+="&"+w.entity+Y,w.entity="",w.state=ke);continue;default:throw new Error(w,"Unknown state: "+w.state)}return w.position>=w.bufferCheckPosition&&i(w),w}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var B=String.fromCharCode,w=Math.floor,F=function(){var Y=16384,Se=[],Ge,ke,dt=-1,ot=arguments.length;if(!ot)return"";for(var bt="";++dt<ot;){var Wt=Number(arguments[dt]);if(!isFinite(Wt)||Wt<0||Wt>1114111||w(Wt)!==Wt)throw RangeError("Invalid code point: "+Wt);Wt<=65535?Se.push(Wt):(Wt-=65536,Ge=(Wt>>10)+55296,ke=Wt%1024+56320,Se.push(Ge,ke)),(dt+1===ot||Se.length>Y)&&(bt+=B.apply(null,Se),Se.length=0)}return bt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:F,configurable:!0,writable:!0}):String.fromCodePoint=F}()})(e)})(R3);Object.defineProperty(pm,"__esModule",{value:!0});pm.XElement=void 0;pm.parseXml=Yxe;const Fxe=R3,xy=Xf;class G3{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,xy.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!Lxe(t))throw(0,xy.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const n=this.attributes===null?null:this.attributes[t];if(n==null)throw(0,xy.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return n}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,n=!1,r=null){const i=this.elementOrNull(t,n);if(i===null)throw(0,xy.newError)(r||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return i}elementOrNull(t,n=!1){if(this.elements===null)return null;for(const r of this.elements)if(eH(r,t,n))return r;return null}getElements(t,n=!1){return this.elements===null?[]:this.elements.filter(r=>eH(r,t,n))}elementValueOrEmpty(t,n=!1){const r=this.elementOrNull(t,n);return r===null?"":r.value}}pm.XElement=G3;const xxe=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function Lxe(e){return xxe.test(e)}function eH(e,t,n){const r=e.name;return r===t||n===!0&&r.length===t.length&&r.toLowerCase()===t.toLowerCase()}function Yxe(e){let t=null;const n=Fxe.parser(!0,{}),r=[];return n.onopentag=i=>{const o=new G3(i.name);if(o.attributes=i.attributes,t===null)t=o;else{const s=r[r.length-1];s.elements==null&&(s.elements=[]),s.elements.push(o)}r.push(o)},n.onclosetag=()=>{r.pop()},n.ontext=i=>{r.length>0&&(r[r.length-1].value=i)},n.oncdata=i=>{const o=r[r.length-1];o.value=i,o.isCData=!0},n.onerror=i=>{throw i},n.write(e),t}var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.MemoLazy=void 0;class Pxe{constructor(t,n){this.selector=t,this.creator=n,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const t=this.selector();if(this._value!==void 0&&N3(this.selected,t))return this._value;this.selected=t;const n=this.creator(t);return this.value=n,n}set value(t){this._value=t}}o0.MemoLazy=Pxe;function N3(e,t){if(typeof e=="object"&&e!==null&&(typeof t=="object"&&t!==null)){const i=Object.keys(e),o=Object.keys(t);return i.length===o.length&&i.every(s=>N3(e[s],t[s]))}return e===t}var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.retry=Z3;const Xxe=Ol;async function Z3(e,t,n,r=0,i=0,o){var s;const a=new Xxe.CancellationToken;try{return await e()}catch(l){if((!((s=o==null?void 0:o(l))!==null&&s!==void 0)||s)&&t>0&&!a.cancelled)return await new Promise(c=>setTimeout(c,n+r*i)),await Z3(e,t-1,n,r,i+1,o);throw l}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.retry=e.MemoLazy=e.newError=e.XElement=e.parseXml=e.ProgressCallbackTransform=e.UUID=e.parseDn=e.githubUrl=e.getS3LikeProviderBaseUrl=e.configureRequestUrl=e.parseJson=e.safeStringifyJson=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.safeGetHeader=e.DigestTransform=e.HttpExecutor=e.createHttpError=e.HttpError=e.CancellationError=e.CancellationToken=void 0,e.asArray=d;var t=Ol;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}});var n=oi;Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return n.HttpError}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return n.createHttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return n.HttpExecutor}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return n.DigestTransform}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return n.safeGetHeader}}),Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return n.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return n.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return n.safeStringifyJson}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return n.parseJson}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return n.configureRequestUrl}});var r=i0;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return r.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return r.githubUrl}});var i=B1;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var o=nf;Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return o.UUID}});var s=hm;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return s.ProgressCallbackTransform}});var a=pm;Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return a.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return a.XElement}});var l=Xf;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return l.newError}});var c=o0;Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return c.MemoLazy}});var u=E1;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return u.retry}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function d(g){return g==null?[]:Array.isArray(g)?g:[g]}})(hr);var du={},fi={};fi.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,r)=>{t.push((i,o)=>i!=null?r(i):n(o)),e.apply(this,t)})},"name",{value:e.name})};fi.fromPromise=function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>n(null,r),n)},"name",{value:e.name})};(function(e){const t=fi.fromCallback,n=ui(),r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof n[i]=="function");Object.assign(e,n),r.forEach(i=>{e[i]=t(n[i])}),e.exists=function(i,o){return typeof o=="function"?n.exists(i,o):new Promise(s=>n.exists(i,s))},e.read=function(i,o,s,a,l,c){return typeof c=="function"?n.read(i,o,s,a,l,c):new Promise((u,d)=>{n.read(i,o,s,a,l,(g,p,m)=>{if(g)return d(g);u({bytesRead:p,buffer:m})})})},e.write=function(i,o,...s){return typeof s[s.length-1]=="function"?n.write(i,o,...s):new Promise((a,l)=>{n.write(i,o,...s,(c,u,d)=>{if(c)return l(c);a({bytesWritten:u,buffer:d})})})},typeof n.writev=="function"&&(e.writev=function(i,o,...s){return typeof s[s.length-1]=="function"?n.writev(i,o,...s):new Promise((a,l)=>{n.writev(i,o,...s,(c,u,d)=>{if(c)return l(c);a({bytesWritten:u,buffers:d})})})}),typeof n.realpath.native=="function"?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(du);var R1={},T3={};const Uxe=mt;T3.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Uxe.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const W3=du,{checkPath:k3}=T3,V3=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};R1.makeDir=async(e,t)=>(k3(e),W3.mkdir(e,{mode:V3(t),recursive:!0}));R1.makeDirSync=(e,t)=>(k3(e),W3.mkdirSync(e,{mode:V3(t),recursive:!0}));const Dxe=fi.fromPromise,{makeDir:Kxe,makeDirSync:QS}=R1,qS=Dxe(Kxe);var Ps={mkdirs:qS,mkdirsSync:QS,mkdirp:qS,mkdirpSync:QS,ensureDir:qS,ensureDirSync:QS};const Mxe=fi.fromPromise,O3=du;function $xe(e){return O3.access(e).then(()=>!0).catch(()=>!1)}var fu={pathExists:Mxe($xe),pathExistsSync:O3.existsSync};const Gd=ui();function zxe(e,t,n,r){Gd.open(e,"r+",(i,o)=>{if(i)return r(i);Gd.futimes(o,t,n,s=>{Gd.close(o,a=>{r&&r(s||a)})})})}function Jxe(e,t,n){const r=Gd.openSync(e,"r+");return Gd.futimesSync(r,t,n),Gd.closeSync(r)}var H3={utimesMillis:zxe,utimesMillisSync:Jxe};const rf=du,cr=mt,jxe=gr;function Qxe(e,t,n){const r=n.dereference?i=>rf.stat(i,{bigint:!0}):i=>rf.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function qxe(e,t,n){let r;const i=n.dereference?s=>rf.statSync(s,{bigint:!0}):s=>rf.lstatSync(s,{bigint:!0}),o=i(e);try{r=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:r}}function eLe(e,t,n,r,i){jxe.callbackify(Qxe)(e,t,r,(o,s)=>{if(o)return i(o);const{srcStat:a,destStat:l}=s;if(l){if(mm(a,l)){const c=cr.basename(e),u=cr.basename(t);return n==="move"&&c!==u&&c.toLowerCase()===u.toLowerCase()?i(null,{srcStat:a,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&G1(e,t)?i(new Error(s0(e,t,n))):i(null,{srcStat:a,destStat:l})})}function tLe(e,t,n,r){const{srcStat:i,destStat:o}=qxe(e,t,r);if(o){if(mm(i,o)){const s=cr.basename(e),a=cr.basename(t);if(n==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&G1(e,t))throw new Error(s0(e,t,n));return{srcStat:i,destStat:o}}function F3(e,t,n,r,i){const o=cr.resolve(cr.dirname(e)),s=cr.resolve(cr.dirname(n));if(s===o||s===cr.parse(s).root)return i();rf.stat(s,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?i():i(a):mm(t,l)?i(new Error(s0(e,n,r))):F3(e,t,s,r,i))}function x3(e,t,n,r){const i=cr.resolve(cr.dirname(e)),o=cr.resolve(cr.dirname(n));if(o===i||o===cr.parse(o).root)return;let s;try{s=rf.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(mm(t,s))throw new Error(s0(e,n,r));return x3(e,t,o,r)}function mm(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function G1(e,t){const n=cr.resolve(e).split(cr.sep).filter(i=>i),r=cr.resolve(t).split(cr.sep).filter(i=>i);return n.reduce((i,o,s)=>i&&r[s]===o,!0)}function s0(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var Uf={checkPaths:eLe,checkPathsSync:tLe,checkParentPaths:F3,checkParentPathsSync:x3,isSrcSubdir:G1,areIdentical:mm};const Ai=ui(),bp=mt,nLe=Ps.mkdirs,rLe=fu.pathExists,iLe=H3.utimesMillis,Ap=Uf;function oLe(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ap.checkPaths(e,t,"copy",n,(i,o)=>{if(i)return r(i);const{srcStat:s,destStat:a}=o;Ap.checkParentPaths(e,s,t,"copy",l=>l?r(l):n.filter?L3(tH,a,e,t,n,r):tH(a,e,t,n,r))})}function tH(e,t,n,r,i){const o=bp.dirname(n);rLe(o,(s,a)=>{if(s)return i(s);if(a)return Jv(e,t,n,r,i);nLe(o,l=>l?i(l):Jv(e,t,n,r,i))})}function L3(e,t,n,r,i,o){Promise.resolve(i.filter(n,r)).then(s=>s?e(t,n,r,i,o):o(),s=>o(s))}function sLe(e,t,n,r,i){return r.filter?L3(Jv,e,t,n,r,i):Jv(e,t,n,r,i)}function Jv(e,t,n,r,i){(r.dereference?Ai.stat:Ai.lstat)(t,(s,a)=>s?i(s):a.isDirectory()?gLe(a,e,t,n,r,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?aLe(a,e,t,n,r,i):a.isSymbolicLink()?mLe(e,t,n,r,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function aLe(e,t,n,r,i,o){return t?lLe(e,n,r,i,o):Y3(e,n,r,i,o)}function lLe(e,t,n,r,i){if(r.overwrite)Ai.unlink(n,o=>o?i(o):Y3(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function Y3(e,t,n,r,i){Ai.copyFile(t,n,o=>o?i(o):r.preserveTimestamps?cLe(e.mode,t,n,i):a0(n,e.mode,i))}function cLe(e,t,n,r){return uLe(e)?dLe(n,e,i=>i?r(i):nH(e,t,n,r)):nH(e,t,n,r)}function uLe(e){return(e&128)===0}function dLe(e,t,n){return a0(e,t|128,n)}function nH(e,t,n,r){fLe(t,n,i=>i?r(i):a0(n,e,r))}function a0(e,t,n){return Ai.chmod(e,t,n)}function fLe(e,t,n){Ai.stat(e,(r,i)=>r?n(r):iLe(t,i.atime,i.mtime,n))}function gLe(e,t,n,r,i,o){return t?P3(n,r,i,o):hLe(e.mode,n,r,i,o)}function hLe(e,t,n,r,i){Ai.mkdir(n,o=>{if(o)return i(o);P3(t,n,r,s=>s?i(s):a0(n,e,i))})}function P3(e,t,n,r){Ai.readdir(e,(i,o)=>i?r(i):X3(o,e,t,n,r))}function X3(e,t,n,r,i){const o=e.pop();return o?pLe(e,o,t,n,r,i):i()}function pLe(e,t,n,r,i,o){const s=bp.join(n,t),a=bp.join(r,t);Ap.checkPaths(s,a,"copy",i,(l,c)=>{if(l)return o(l);const{destStat:u}=c;sLe(u,s,a,i,d=>d?o(d):X3(e,n,r,i,o))})}function mLe(e,t,n,r,i){Ai.readlink(t,(o,s)=>{if(o)return i(o);if(r.dereference&&(s=bp.resolve(process.cwd(),s)),e)Ai.readlink(n,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?Ai.symlink(s,n,i):i(a):(r.dereference&&(l=bp.resolve(process.cwd(),l)),Ap.isSrcSubdir(s,l)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Ap.isSrcSubdir(l,s)?i(new Error(`Cannot overwrite '${l}' with '${s}'.`)):yLe(s,n,i)));else return Ai.symlink(s,n,i)})}function yLe(e,t,n){Ai.unlink(t,r=>r?n(r):Ai.symlink(e,t,n))}var ILe=oLe;const Hr=ui(),Sp=mt,vLe=Ps.mkdirsSync,CLe=H3.utimesMillisSync,_p=Uf;function bLe(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=_p.checkPathsSync(e,t,"copy",n);return _p.checkParentPathsSync(e,r,t,"copy"),ALe(i,e,t,n)}function ALe(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const i=Sp.dirname(n);return Hr.existsSync(i)||vLe(i),U3(e,t,n,r)}function SLe(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return U3(e,t,n,r)}function U3(e,t,n,r){const o=(r.dereference?Hr.statSync:Hr.lstatSync)(t);if(o.isDirectory())return NLe(o,e,t,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return _Le(o,e,t,n,r);if(o.isSymbolicLink())return WLe(e,t,n,r);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function _Le(e,t,n,r,i){return t?wLe(e,n,r,i):D3(e,n,r,i)}function wLe(e,t,n,r){if(r.overwrite)return Hr.unlinkSync(n),D3(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function D3(e,t,n,r){return Hr.copyFileSync(t,n),r.preserveTimestamps&&BLe(e.mode,t,n),N1(n,e.mode)}function BLe(e,t,n){return ELe(e)&&RLe(n,e),GLe(t,n)}function ELe(e){return(e&128)===0}function RLe(e,t){return N1(e,t|128)}function N1(e,t){return Hr.chmodSync(e,t)}function GLe(e,t){const n=Hr.statSync(e);return CLe(t,n.atime,n.mtime)}function NLe(e,t,n,r,i){return t?K3(n,r,i):ZLe(e.mode,n,r,i)}function ZLe(e,t,n,r){return Hr.mkdirSync(n),K3(t,n,r),N1(n,e)}function K3(e,t,n){Hr.readdirSync(e).forEach(r=>TLe(r,e,t,n))}function TLe(e,t,n,r){const i=Sp.join(t,e),o=Sp.join(n,e),{destStat:s}=_p.checkPathsSync(i,o,"copy",r);return SLe(s,i,o,r)}function WLe(e,t,n,r){let i=Hr.readlinkSync(t);if(r.dereference&&(i=Sp.resolve(process.cwd(),i)),e){let o;try{o=Hr.readlinkSync(n)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return Hr.symlinkSync(i,n);throw s}if(r.dereference&&(o=Sp.resolve(process.cwd(),o)),_p.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Hr.statSync(n).isDirectory()&&_p.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return kLe(i,n)}else return Hr.symlinkSync(i,n)}function kLe(e,t){return Hr.unlinkSync(t),Hr.symlinkSync(e,t)}var VLe=bLe;const OLe=fi.fromCallback;var Z1={copy:OLe(ILe),copySync:VLe};const rH=ui(),M3=mt,yn=aR,wp=process.platform==="win32";function $3(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||rH[n],n=n+"Sync",e[n]=e[n]||rH[n]}),e.maxBusyTries=e.maxBusyTries||3}function T1(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),yn(e,"rimraf: missing path"),yn.strictEqual(typeof e,"string","rimraf: path should be a string"),yn.strictEqual(typeof n,"function","rimraf: callback function required"),yn(t,"rimraf: invalid options argument provided"),yn.strictEqual(typeof t,"object","rimraf: options should be object"),$3(t),iH(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&r<t.maxBusyTries){r++;const s=r*100;return setTimeout(()=>iH(e,t,i),s)}o.code==="ENOENT"&&(o=null)}n(o)})}function iH(e,t,n){yn(e),yn(t),yn(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&wp)return oH(e,t,r,n);if(i&&i.isDirectory())return AI(e,t,r,n);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return n(null);if(o.code==="EPERM")return wp?oH(e,t,o,n):AI(e,t,o,n);if(o.code==="EISDIR")return AI(e,t,o,n)}return n(o)})})}function oH(e,t,n,r){yn(e),yn(t),yn(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(o,s)=>{o?r(o.code==="ENOENT"?null:n):s.isDirectory()?AI(e,t,n,r):t.unlink(e,r)})})}function sH(e,t,n){let r;yn(e),yn(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?SI(e,t,n):t.unlinkSync(e)}function AI(e,t,n,r){yn(e),yn(t),yn(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?HLe(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function HLe(e,t,n){yn(e),yn(t),yn(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let o=i.length,s;if(o===0)return t.rmdir(e,n);i.forEach(a=>{T1(M3.join(e,a),t,l=>{if(!s){if(l)return n(s=l);--o===0&&t.rmdir(e,n)}})})})}function z3(e,t){let n;t=t||{},$3(t),yn(e,"rimraf: missing path"),yn.strictEqual(typeof e,"string","rimraf: path should be a string"),yn(t,"rimraf: missing options"),yn.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&wp&&sH(e,t,r)}try{n&&n.isDirectory()?SI(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return wp?sH(e,t,r):SI(e,t,r);if(r.code!=="EISDIR")throw r;SI(e,t,r)}}function SI(e,t,n){yn(e),yn(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")FLe(e,t);else if(r.code!=="ENOENT")throw r}}function FLe(e,t){if(yn(e),yn(t),t.readdirSync(e).forEach(n=>z3(M3.join(e,n),t)),wp){const n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}var xLe=T1;T1.sync=z3;const jv=ui(),LLe=fi.fromCallback,J3=xLe;function YLe(e,t){if(jv.rm)return jv.rm(e,{recursive:!0,force:!0},t);J3(e,t)}function PLe(e){if(jv.rmSync)return jv.rmSync(e,{recursive:!0,force:!0});J3.sync(e)}var l0={remove:LLe(YLe),removeSync:PLe};const XLe=fi.fromPromise,j3=du,Q3=mt,q3=Ps,eM=l0,aH=XLe(async function(t){let n;try{n=await j3.readdir(t)}catch{return q3.mkdirs(t)}return Promise.all(n.map(r=>eM.remove(Q3.join(t,r))))});function lH(e){let t;try{t=j3.readdirSync(e)}catch{return q3.mkdirsSync(e)}t.forEach(n=>{n=Q3.join(e,n),eM.removeSync(n)})}var ULe={emptyDirSync:lH,emptydirSync:lH,emptyDir:aH,emptydir:aH};const DLe=fi.fromCallback,tM=mt,rl=ui(),nM=Ps;function KLe(e,t){function n(){rl.writeFile(e,"",r=>{if(r)return t(r);t()})}rl.stat(e,(r,i)=>{if(!r&&i.isFile())return t();const o=tM.dirname(e);rl.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?nM.mkdirs(o,l=>{if(l)return t(l);n()}):t(s);a.isDirectory()?n():rl.readdir(o,l=>{if(l)return t(l)})})})}function MLe(e){let t;try{t=rl.statSync(e)}catch{}if(t&&t.isFile())return;const n=tM.dirname(e);try{rl.statSync(n).isDirectory()||rl.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")nM.mkdirsSync(n);else throw r}rl.writeFileSync(e,"")}var $Le={createFile:DLe(KLe),createFileSync:MLe};const zLe=fi.fromCallback,rM=mt,ja=ui(),iM=Ps,JLe=fu.pathExists,{areIdentical:oM}=Uf;function jLe(e,t,n){function r(i,o){ja.link(i,o,s=>{if(s)return n(s);n(null)})}ja.lstat(t,(i,o)=>{ja.lstat(e,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),n(s);if(o&&oM(a,o))return n(null);const l=rM.dirname(t);JLe(l,(c,u)=>{if(c)return n(c);if(u)return r(e,t);iM.mkdirs(l,d=>{if(d)return n(d);r(e,t)})})})})}function QLe(e,t){let n;try{n=ja.lstatSync(t)}catch{}try{const o=ja.lstatSync(e);if(n&&oM(o,n))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const r=rM.dirname(t);return ja.existsSync(r)||iM.mkdirsSync(r),ja.linkSync(e,t)}var qLe={createLink:zLe(jLe),createLinkSync:QLe};const il=mt,_h=ui(),eYe=fu.pathExists;function tYe(e,t,n){if(il.isAbsolute(e))return _h.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{const r=il.dirname(t),i=il.join(r,e);return eYe(i,(o,s)=>o?n(o):s?n(null,{toCwd:i,toDst:e}):_h.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),n(a)):n(null,{toCwd:e,toDst:il.relative(r,e)})))}}function nYe(e,t){let n;if(il.isAbsolute(e)){if(n=_h.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const r=il.dirname(t),i=il.join(r,e);if(n=_h.existsSync(i),n)return{toCwd:i,toDst:e};if(n=_h.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:il.relative(r,e)}}}var rYe={symlinkPaths:tYe,symlinkPathsSync:nYe};const sM=ui();function iYe(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);sM.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function oYe(e,t){let n;if(t)return t;try{n=sM.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var sYe={symlinkType:iYe,symlinkTypeSync:oYe};const aYe=fi.fromCallback,aM=mt,Zo=du,lM=Ps,lYe=lM.mkdirs,cYe=lM.mkdirsSync,cM=rYe,uYe=cM.symlinkPaths,dYe=cM.symlinkPathsSync,uM=sYe,fYe=uM.symlinkType,gYe=uM.symlinkTypeSync,hYe=fu.pathExists,{areIdentical:dM}=Uf;function pYe(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,Zo.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Zo.stat(e),Zo.stat(t)]).then(([s,a])=>{if(dM(s,a))return r(null);cH(e,t,n,r)}):cH(e,t,n,r)})}function cH(e,t,n,r){uYe(e,t,(i,o)=>{if(i)return r(i);e=o.toDst,fYe(o.toCwd,n,(s,a)=>{if(s)return r(s);const l=aM.dirname(t);hYe(l,(c,u)=>{if(c)return r(c);if(u)return Zo.symlink(e,t,a,r);lYe(l,d=>{if(d)return r(d);Zo.symlink(e,t,a,r)})})})})}function mYe(e,t,n){let r;try{r=Zo.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const a=Zo.statSync(e),l=Zo.statSync(t);if(dM(a,l))return}const i=dYe(e,t);e=i.toDst,n=gYe(i.toCwd,n);const o=aM.dirname(t);return Zo.existsSync(o)||cYe(o),Zo.symlinkSync(e,t,n)}var yYe={createSymlink:aYe(pYe),createSymlinkSync:mYe};const{createFile:uH,createFileSync:dH}=$Le,{createLink:fH,createLinkSync:gH}=qLe,{createSymlink:hH,createSymlinkSync:pH}=yYe;var IYe={createFile:uH,createFileSync:dH,ensureFile:uH,ensureFileSync:dH,createLink:fH,createLinkSync:gH,ensureLink:fH,ensureLinkSync:gH,createSymlink:hH,createSymlinkSync:pH,ensureSymlink:hH,ensureSymlinkSync:pH};function vYe(e,{EOL:t=`
`,finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+o}function CYe(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var W1={stringify:vYe,stripBom:CYe};let of;try{of=ui()}catch{of=Rn}const c0=fi,{stringify:fM,stripBom:gM}=W1;async function bYe(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||of,r="throws"in t?t.throws:!0;let i=await c0.fromCallback(n.readFile)(e,t);i=gM(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(r)throw s.message=`${e}: ${s.message}`,s;return null}return o}const AYe=c0.fromPromise(bYe);function SYe(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||of,r="throws"in t?t.throws:!0;try{let i=n.readFileSync(e,t);return i=gM(i),JSON.parse(i,t.reviver)}catch(i){if(r)throw i.message=`${e}: ${i.message}`,i;return null}}async function _Ye(e,t,n={}){const r=n.fs||of,i=fM(t,n);await c0.fromCallback(r.writeFile)(e,i,n)}const wYe=c0.fromPromise(_Ye);function BYe(e,t,n={}){const r=n.fs||of,i=fM(t,n);return r.writeFileSync(e,i,n)}const EYe={readFile:AYe,readFileSync:SYe,writeFile:wYe,writeFileSync:BYe};var RYe=EYe;const Ly=RYe;var GYe={readJson:Ly.readFile,readJsonSync:Ly.readFileSync,writeJson:Ly.writeFile,writeJsonSync:Ly.writeFileSync};const NYe=fi.fromCallback,wh=ui(),hM=mt,pM=Ps,ZYe=fu.pathExists;function TYe(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");const i=hM.dirname(e);ZYe(i,(o,s)=>{if(o)return r(o);if(s)return wh.writeFile(e,t,n,r);pM.mkdirs(i,a=>{if(a)return r(a);wh.writeFile(e,t,n,r)})})}function WYe(e,...t){const n=hM.dirname(e);if(wh.existsSync(n))return wh.writeFileSync(e,...t);pM.mkdirsSync(n),wh.writeFileSync(e,...t)}var k1={outputFile:NYe(TYe),outputFileSync:WYe};const{stringify:kYe}=W1,{outputFile:VYe}=k1;async function OYe(e,t,n={}){const r=kYe(t,n);await VYe(e,r,n)}var HYe=OYe;const{stringify:FYe}=W1,{outputFileSync:xYe}=k1;function LYe(e,t,n){const r=FYe(t,n);xYe(e,r,n)}var YYe=LYe;const PYe=fi.fromPromise,ai=GYe;ai.outputJson=PYe(HYe);ai.outputJsonSync=YYe;ai.outputJSON=ai.outputJson;ai.outputJSONSync=ai.outputJsonSync;ai.writeJSON=ai.writeJson;ai.writeJSONSync=ai.writeJsonSync;ai.readJSON=ai.readJson;ai.readJSONSync=ai.readJsonSync;var XYe=ai;const UYe=ui(),FB=mt,DYe=Z1.copy,mM=l0.remove,KYe=Ps.mkdirp,MYe=fu.pathExists,mH=Uf;function $Ye(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};const i=n.overwrite||n.clobber||!1;mH.checkPaths(e,t,"move",n,(o,s)=>{if(o)return r(o);const{srcStat:a,isChangingCase:l=!1}=s;mH.checkParentPaths(e,a,t,"move",c=>{if(c)return r(c);if(zYe(t))return yH(e,t,i,l,r);KYe(FB.dirname(t),u=>u?r(u):yH(e,t,i,l,r))})})}function zYe(e){const t=FB.dirname(e);return FB.parse(t).root===t}function yH(e,t,n,r,i){if(r)return e_(e,t,n,i);if(n)return mM(t,o=>o?i(o):e_(e,t,n,i));MYe(t,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):e_(e,t,n,i))}function e_(e,t,n,r){UYe.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):JYe(e,t,n,r):r())}function JYe(e,t,n,r){DYe(e,t,{overwrite:n,errorOnExist:!0},o=>o?r(o):mM(e,r))}var jYe=$Ye;const yM=ui(),xB=mt,QYe=Z1.copySync,IM=l0.removeSync,qYe=Ps.mkdirpSync,IH=Uf;function ePe(e,t,n){n=n||{};const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=IH.checkPathsSync(e,t,"move",n);return IH.checkParentPathsSync(e,i,t,"move"),tPe(t)||qYe(xB.dirname(t)),nPe(e,t,r,o)}function tPe(e){const t=xB.dirname(e);return xB.parse(t).root===t}function nPe(e,t,n,r){if(r)return t_(e,t,n);if(n)return IM(t),t_(e,t,n);if(yM.existsSync(t))throw new Error("dest already exists.");return t_(e,t,n)}function t_(e,t,n){try{yM.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return rPe(e,t,n)}}function rPe(e,t,n){return QYe(e,t,{overwrite:n,errorOnExist:!0}),IM(e)}var iPe=ePe;const oPe=fi.fromCallback;var sPe={move:oPe(jYe),moveSync:iPe},$l={...du,...Z1,...ULe,...IYe,...XYe,...Ps,...sPe,...k1,...fu,...l0},Tg={},cc={},Rr={},V1={},$o={};function vM(e){return typeof e>"u"||e===null}function aPe(e){return typeof e=="object"&&e!==null}function lPe(e){return Array.isArray(e)?e:vM(e)?[]:[e]}function cPe(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function uPe(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function dPe(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}$o.isNothing=vM;$o.isObject=aPe;$o.toArray=lPe;$o.repeat=uPe;$o.isNegativeZero=dPe;$o.extend=cPe;function CM(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Bp(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=CM(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Bp.prototype=Object.create(Error.prototype);Bp.prototype.constructor=Bp;Bp.prototype.toString=function(t){return this.name+": "+CM(this,t)};var ym=Bp,qg=$o;function n_(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(o=" ... ",t=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+e.slice(t,n).replace(/\t/g,"")+s,pos:r-t+o.length}}function r_(e,t){return qg.repeat(" ",t-e.length)+e}function fPe(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=n_(e.buffer,r[s-l],i[s-l],e.position-(r[s]-r[s-l]),d),a=qg.repeat(" ",t.indent)+r_((e.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=n_(e.buffer,r[s],i[s],e.position,d),a+=qg.repeat(" ",t.indent)+r_((e.line+1).toString(),u)+" | "+c.str+`
`,a+=qg.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=i.length);l++)c=n_(e.buffer,r[s+l],i[s+l],e.position-(r[s]-r[s+l]),d),a+=qg.repeat(" ",t.indent)+r_((e.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var gPe=fPe,vH=ym,hPe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],pPe=["scalar","sequence","mapping"];function mPe(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function yPe(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(hPe.indexOf(n)===-1)throw new vH('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=mPe(t.styleAliases||null),pPe.indexOf(this.kind)===-1)throw new vH('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var gi=yPe,Wg=ym,i_=gi;function CH(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}function IPe(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function LB(e){return this.extend(e)}LB.prototype.extend=function(t){var n=[],r=[];if(t instanceof i_)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Wg("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof i_))throw new Wg("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Wg("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Wg("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof i_))throw new Wg("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(LB.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=CH(i,"implicit"),i.compiledExplicit=CH(i,"explicit"),i.compiledTypeMap=IPe(i.compiledImplicit,i.compiledExplicit),i};var bM=LB,vPe=gi,AM=new vPe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),CPe=gi,SM=new CPe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),bPe=gi,_M=new bPe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),APe=bM,wM=new APe({explicit:[AM,SM,_M]}),SPe=gi;function _Pe(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function wPe(){return null}function BPe(e){return e===null}var BM=new SPe("tag:yaml.org,2002:null",{kind:"scalar",resolve:_Pe,construct:wPe,predicate:BPe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),EPe=gi;function RPe(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function GPe(e){return e==="true"||e==="True"||e==="TRUE"}function NPe(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var EM=new EPe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:RPe,construct:GPe,predicate:NPe,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),ZPe=$o,TPe=gi;function WPe(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function kPe(e){return 48<=e&&e<=55}function VPe(e){return 48<=e&&e<=57}function OPe(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!WPe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!kPe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!VPe(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function HPe(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function FPe(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ZPe.isNegativeZero(e)}var RM=new TPe("tag:yaml.org,2002:int",{kind:"scalar",resolve:OPe,construct:HPe,predicate:FPe,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GM=$o,xPe=gi,LPe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function YPe(e){return!(e===null||!LPe.test(e)||e[e.length-1]==="_")}function PPe(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var XPe=/^[-+]?[0-9]+e/;function UPe(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(GM.isNegativeZero(e))return"-0.0";return n=e.toString(10),XPe.test(n)?n.replace("e",".e"):n}function DPe(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||GM.isNegativeZero(e))}var NM=new xPe("tag:yaml.org,2002:float",{kind:"scalar",resolve:YPe,construct:PPe,predicate:DPe,represent:UPe,defaultStyle:"lowercase"}),ZM=wM.extend({implicit:[BM,EM,RM,NM]}),TM=ZM,KPe=gi,WM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),kM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function MPe(e){return e===null?!1:WM.exec(e)!==null||kM.exec(e)!==null}function $Pe(e){var t,n,r,i,o,s,a,l=0,c=null,u,d,g;if(t=WM.exec(e),t===null&&(t=kM.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],d=+(t[11]||0),c=(u*60+d)*6e4,t[9]==="-"&&(c=-c)),g=new Date(Date.UTC(n,r,i,o,s,a,l)),c&&g.setTime(g.getTime()-c),g}function zPe(e){return e.toISOString()}var VM=new KPe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:MPe,construct:$Pe,instanceOf:Date,represent:zPe}),JPe=gi;function jPe(e){return e==="<<"||e===null}var OM=new JPe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jPe}),QPe=gi,O1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function qPe(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=O1;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function eXe(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=O1,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function tXe(e){var t="",n=0,r,i,o=e.length,s=O1;for(r=0;r<o;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):i===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):i===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function nXe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var HM=new QPe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:qPe,construct:eXe,predicate:nXe,represent:tXe}),rXe=gi,iXe=Object.prototype.hasOwnProperty,oXe=Object.prototype.toString;function sXe(e){if(e===null)return!0;var t=[],n,r,i,o,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,oXe.call(i)!=="[object Object]")return!1;for(o in i)if(iXe.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function aXe(e){return e!==null?e:[]}var FM=new rXe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:sXe,construct:aXe}),lXe=gi,cXe=Object.prototype.toString;function uXe(e){if(e===null)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],cXe.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function dXe(e){if(e===null)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var xM=new lXe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:uXe,construct:dXe}),fXe=gi,gXe=Object.prototype.hasOwnProperty;function hXe(e){if(e===null)return!0;var t,n=e;for(t in n)if(gXe.call(n,t)&&n[t]!==null)return!1;return!0}function pXe(e){return e!==null?e:{}}var LM=new fXe("tag:yaml.org,2002:set",{kind:"mapping",resolve:hXe,construct:pXe}),H1=TM.extend({implicit:[VM,OM],explicit:[HM,FM,xM,LM]}),mc=$o,YM=ym,mXe=gPe,yXe=H1,Hl=Object.prototype.hasOwnProperty,Qv=1,PM=2,XM=3,qv=4,o_=1,IXe=2,bH=3,vXe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CXe=/[\x85\u2028\u2029]/,bXe=/[,\[\]\{\}]/,UM=/^(?:!|!!|![a-z\-]+!)$/i,DM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function AH(e){return Object.prototype.toString.call(e)}function Gs(e){return e===10||e===13}function Ec(e){return e===9||e===32}function Si(e){return e===9||e===32||e===10||e===13}function id(e){return e===44||e===91||e===93||e===123||e===125}function AXe(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function SXe(e){return e===120?2:e===117?4:e===85?8:0}function _Xe(e){return 48<=e&&e<=57?e-48:-1}function SH(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function wXe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var KM=new Array(256),MM=new Array(256);for(var Tu=0;Tu<256;Tu++)KM[Tu]=SH(Tu)?1:0,MM[Tu]=SH(Tu);function BXe(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||yXe,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $M(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=mXe(n),new YM(t,n)}function gt(e,t){throw $M(e,t)}function eC(e,t){e.onWarning&&e.onWarning.call(null,$M(e,t))}var _H={YAML:function(t,n,r){var i,o,s;t.version!==null&&gt(t,"duplication of %YAML directive"),r.length!==1&&gt(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&gt(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&gt(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&eC(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&gt(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],UM.test(i)||gt(t,"ill-formed tag handle (first argument) of the TAG directive"),Hl.call(t.tagMap,i)&&gt(t,'there is a previously declared suffix for "'+i+'" tag handle'),DM.test(o)||gt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{gt(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function vl(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||gt(e,"expected valid JSON character");else vXe.test(a)&&gt(e,"the stream contains non-printable characters");e.result+=a}}function wH(e,t,n,r){var i,o,s,a;for(mc.isObject(n)||gt(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],Hl.call(t,o)||(t[o]=n[o],r[o]=!0)}function od(e,t,n,r,i,o,s,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&gt(e,"nested arrays are not supported inside keys"),typeof i=="object"&&AH(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&AH(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)wH(e,t,o[c],n);else wH(e,t,o,n);else!e.json&&!Hl.call(n,i)&&Hl.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,gt(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function F1(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):gt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Mn(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ec(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Gs(i))for(F1(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&eC(e,"deficient indentation"),r}function u0(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Si(n)))}function x1(e,t){t===1?e.result+=" ":t>1&&(e.result+=mc.repeat(`
`,t-1))}function EXe(e,t,n){var r,i,o,s,a,l,c,u,d=e.kind,g=e.result,p;if(p=e.input.charCodeAt(e.position),Si(p)||id(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Si(i)||n&&id(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Si(i)||n&&id(i))break}else if(p===35){if(r=e.input.charCodeAt(e.position-1),Si(r))break}else{if(e.position===e.lineStart&&u0(e)||n&&id(p))break;if(Gs(p))if(l=e.line,c=e.lineStart,u=e.lineIndent,Mn(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=u;break}}a&&(vl(e,o,s,!1),x1(e,e.line-l),o=s=e.position,a=!1),Ec(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return vl(e,o,s,!1),e.result?!0:(e.kind=d,e.result=g,!1)}function RXe(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(vl(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Gs(n)?(vl(e,r,i,!0),x1(e,Mn(e,!1,t)),r=i=e.position):e.position===e.lineStart&&u0(e)?gt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);gt(e,"unexpected end of the stream within a single quoted scalar")}function GXe(e,t){var n,r,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return vl(e,n,e.position,!0),e.position++,!0;if(a===92){if(vl(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Gs(a))Mn(e,!1,t);else if(a<256&&KM[a])e.result+=MM[a],e.position++;else if((s=SXe(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=AXe(a))>=0?o=(o<<4)+s:gt(e,"expected hexadecimal character");e.result+=wXe(o),e.position++}else gt(e,"unknown escape sequence");n=r=e.position}else Gs(a)?(vl(e,n,r,!0),x1(e,Mn(e,!1,t)),n=r=e.position):e.position===e.lineStart&&u0(e)?gt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}gt(e,"unexpected end of the stream within a double quoted scalar")}function NXe(e,t){var n=!0,r,i,o,s=e.tag,a,l=e.anchor,c,u,d,g,p,m=Object.create(null),v,y,I,b;if(b=e.input.charCodeAt(e.position),b===91)u=93,p=!1,a=[];else if(b===123)u=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(Mn(e,!0,t),b=e.input.charCodeAt(e.position),b===u)return e.position++,e.tag=s,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=a,!0;n?b===44&&gt(e,"expected the node content, but found ','"):gt(e,"missed comma between flow collection entries"),y=v=I=null,d=g=!1,b===63&&(c=e.input.charCodeAt(e.position+1),Si(c)&&(d=g=!0,e.position++,Mn(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,sf(e,t,Qv,!1,!0),y=e.tag,v=e.result,Mn(e,!0,t),b=e.input.charCodeAt(e.position),(g||e.line===r)&&b===58&&(d=!0,b=e.input.charCodeAt(++e.position),Mn(e,!0,t),sf(e,t,Qv,!1,!0),I=e.result),p?od(e,a,m,y,v,I,r,i,o):d?a.push(od(e,null,m,y,v,I,r,i,o)):a.push(v),Mn(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(n=!0,b=e.input.charCodeAt(++e.position)):n=!1}gt(e,"unexpected end of the stream within a flow collection")}function ZXe(e,t){var n,r,i=o_,o=!1,s=!1,a=t,l=0,c=!1,u,d;if(d=e.input.charCodeAt(e.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)o_===i?i=d===43?bH:IXe:gt(e,"repeat of a chomping mode identifier");else if((u=_Xe(d))>=0)u===0?gt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?gt(e,"repeat of an indentation width identifier"):(a=t+u-1,s=!0);else break;if(Ec(d)){do d=e.input.charCodeAt(++e.position);while(Ec(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!Gs(d)&&d!==0)}for(;d!==0;){for(F1(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Gs(d)){l++;continue}if(e.lineIndent<a){i===bH?e.result+=mc.repeat(`
`,o?1+l:l):i===o_&&o&&(e.result+=`
`);break}for(r?Ec(d)?(c=!0,e.result+=mc.repeat(`
`,o?1+l:l)):c?(c=!1,e.result+=mc.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=mc.repeat(`
`,l):e.result+=mc.repeat(`
`,o?1+l:l),o=!0,s=!0,l=0,n=e.position;!Gs(d)&&d!==0;)d=e.input.charCodeAt(++e.position);vl(e,n,e.position,!1)}return!0}function BH(e,t){var n,r=e.tag,i=e.anchor,o=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,gt(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!Si(s))));){if(a=!0,e.position++,Mn(e,!0,-1)&&e.lineIndent<=t){o.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,sf(e,t,XM,!1,!0),o.push(e.result),Mn(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)gt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function TXe(e,t,n){var r,i,o,s,a,l,c=e.tag,u=e.anchor,d={},g=Object.create(null),p=null,m=null,v=null,y=!1,I=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),b=e.input.charCodeAt(e.position);b!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,gt(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(b===63||b===58)&&Si(r))b===63?(y&&(od(e,d,g,p,m,null,s,a,l),p=m=v=null),I=!0,y=!0,i=!0):y?(y=!1,i=!0):gt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=r;else{if(s=e.line,a=e.lineStart,l=e.position,!sf(e,n,PM,!1,!0))break;if(e.line===o){for(b=e.input.charCodeAt(e.position);Ec(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),Si(b)||gt(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(od(e,d,g,p,m,null,s,a,l),p=m=v=null),I=!0,y=!1,i=!1,p=e.tag,m=e.result;else if(I)gt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(I)gt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===o||e.lineIndent>t)&&(y&&(s=e.line,a=e.lineStart,l=e.position),sf(e,t,qv,!0,i)&&(y?m=e.result:v=e.result),y||(od(e,d,g,p,m,v,s,a,l),p=m=v=null),Mn(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&b!==0)gt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&od(e,d,g,p,m,null,s,a,l),I&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=d),I}function WXe(e){var t,n=!1,r=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&gt(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):gt(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Si(s);)s===33&&(r?gt(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),UM.test(i)||gt(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),bXe.test(o)&&gt(e,"tag suffix cannot contain flow indicator characters")}o&&!DM.test(o)&&gt(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{gt(e,"tag name is malformed: "+o)}return n?e.tag=o:Hl.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:gt(e,'undeclared tag handle "'+i+'"'),!0}function kXe(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&gt(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Si(n)&&!id(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&gt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function VXe(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Si(r)&&!id(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&gt(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Hl.call(e.anchorMap,n)||gt(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Mn(e,!0,-1),!0}function sf(e,t,n,r,i){var o,s,a,l=1,c=!1,u=!1,d,g,p,m,v,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=qv===n||XM===n,r&&Mn(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;WXe(e)||kXe(e);)Mn(e,!0,-1)?(c=!0,a=o,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||qv===n)&&(Qv===n||PM===n?v=t:v=t+1,y=e.position-e.lineStart,l===1?a&&(BH(e,y)||TXe(e,y,v))||NXe(e,v)?u=!0:(s&&ZXe(e,v)||RXe(e,v)||GXe(e,v)?u=!0:VXe(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&gt(e,"alias node should not have any properties")):EXe(e,v,Qv===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=a&&BH(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&gt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,g=e.implicitTypes.length;d<g;d+=1)if(m=e.implicitTypes[d],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Hl.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,p=e.typeMap.multi[e.kind||"fallback"],d=0,g=p.length;d<g;d+=1)if(e.tag.slice(0,p[d].tag.length)===p[d].tag){m=p[d];break}m||gt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&gt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):gt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function OXe(e){var t=e.position,n,r,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Mn(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!Si(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&gt(e,"directive name must not be less than one character in length");s!==0;){for(;Ec(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Gs(s));break}if(Gs(s))break;for(n=e.position;s!==0&&!Si(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}s!==0&&F1(e),Hl.call(_H,r)?_H[r](e,r,i):eC(e,'unknown document directive "'+r+'"')}if(Mn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Mn(e,!0,-1)):o&&gt(e,"directives end mark is expected"),sf(e,e.lineIndent-1,qv,!1,!0),Mn(e,!0,-1),e.checkLineBreaks&&CXe.test(e.input.slice(t,e.position))&&eC(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&u0(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Mn(e,!0,-1));return}if(e.position<e.length-1)gt(e,"end of the stream or a document separator is expected");else return}function zM(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new BXe(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,gt(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)OXe(n);return n.documents}function HXe(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=zM(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function FXe(e,t){var n=zM(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new YM("expected a single document in the stream, but found more")}}V1.loadAll=HXe;V1.load=FXe;var JM={},d0=$o,Im=ym,xXe=H1,jM=Object.prototype.toString,QM=Object.prototype.hasOwnProperty,L1=65279,LXe=9,Ep=10,YXe=13,PXe=32,XXe=33,UXe=34,YB=35,DXe=37,KXe=38,MXe=39,$Xe=42,qM=44,zXe=45,tC=58,JXe=61,jXe=62,QXe=63,qXe=64,e$=91,t$=93,eUe=96,n$=123,tUe=124,r$=125,Dr={};Dr[0]="\\0";Dr[7]="\\a";Dr[8]="\\b";Dr[9]="\\t";Dr[10]="\\n";Dr[11]="\\v";Dr[12]="\\f";Dr[13]="\\r";Dr[27]="\\e";Dr[34]='\\"';Dr[92]="\\\\";Dr[133]="\\N";Dr[160]="\\_";Dr[8232]="\\L";Dr[8233]="\\P";var nUe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rUe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function iUe(e,t){var n,r,i,o,s,a,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&QM.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function oUe(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Im("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+d0.repeat("0",r-t.length)+t}var sUe=1,Rp=2;function aUe(e){this.schema=e.schema||xXe,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=d0.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=iUe(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Rp:sUe,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function EH(e,t){for(var n=d0.repeat(" ",t),r=0,i=-1,o="",s,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(s=e.slice(r),r=a):(s=e.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function PB(e,t){return`
`+d0.repeat(" ",e.indent*t)}function lUe(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function nC(e){return e===PXe||e===LXe}function Gp(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==L1||65536<=e&&e<=1114111}function RH(e){return Gp(e)&&e!==L1&&e!==YXe&&e!==Ep}function GH(e,t,n){var r=RH(e),i=r&&!nC(e);return(n?r:r&&e!==qM&&e!==e$&&e!==t$&&e!==n$&&e!==r$)&&e!==YB&&!(t===tC&&!i)||RH(t)&&!nC(t)&&e===YB||t===tC&&i}function cUe(e){return Gp(e)&&e!==L1&&!nC(e)&&e!==zXe&&e!==QXe&&e!==tC&&e!==qM&&e!==e$&&e!==t$&&e!==n$&&e!==r$&&e!==YB&&e!==KXe&&e!==$Xe&&e!==XXe&&e!==tUe&&e!==JXe&&e!==jXe&&e!==MXe&&e!==UXe&&e!==DXe&&e!==qXe&&e!==eUe}function uUe(e){return!nC(e)&&e!==tC}function eh(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function i$(e){var t=/^\n* /;return t.test(e)}var o$=1,XB=2,s$=3,a$=4,Yu=5;function dUe(e,t,n,r,i,o,s,a){var l,c=0,u=null,d=!1,g=!1,p=r!==-1,m=-1,v=cUe(eh(e,0))&&uUe(eh(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=eh(e,l),!Gp(c))return Yu;v=v&&GH(c,u,a),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=eh(e,l),c===Ep)d=!0,p&&(g=g||l-m-1>r&&e[m+1]!==" ",m=l);else if(!Gp(c))return Yu;v=v&&GH(c,u,a),u=c}g=g||p&&l-m-1>r&&e[m+1]!==" "}return!d&&!g?v&&!s&&!i(e)?o$:o===Rp?Yu:XB:n>9&&i$(e)?Yu:s?o===Rp?Yu:XB:g?a$:s$}function fUe(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Rp?'""':"''";if(!e.noCompatMode&&(nUe.indexOf(t)!==-1||rUe.test(t)))return e.quotingType===Rp?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return lUe(e,c)}switch(dUe(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!r,i)){case o$:return t;case XB:return"'"+t.replace(/'/g,"''")+"'";case s$:return"|"+NH(t,e.indent)+ZH(EH(t,o));case a$:return">"+NH(t,e.indent)+ZH(EH(gUe(t,s),o));case Yu:return'"'+hUe(t)+'"';default:throw new Im("impossible error: invalid scalar style")}}()}function NH(e,t){var n=i$(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function ZH(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function gUe(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,TH(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=n.exec(e);){var a=s[1],l=s[2];o=l[0]===" ",r+=a+(!i&&!o&&l!==""?`
`:"")+TH(l,t),i=o}return r}function TH(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,l="";r=n.exec(e);)a=r.index,a-i>t&&(o=s>i?s:a,l+=`
`+e.slice(i,o),i=o+1),s=a;return l+=`
`,e.length-i>t&&s>i?l+=e.slice(i,s)+`
`+e.slice(s+1):l+=e.slice(i),l.slice(1)}function hUe(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=eh(e,i),r=Dr[n],!r&&Gp(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||oUe(n);return t}function pUe(e,t,n){var r="",i=e.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],e.replacer&&(a=e.replacer.call(n,String(o),a)),(va(e,t,a,!1,!1)||typeof a>"u"&&va(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function WH(e,t,n,r){var i="",o=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(va(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&va(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=PB(e,t)),e.dump&&Ep===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function mUe(e,t,n){var r="",i=e.tag,o=Object.keys(n),s,a,l,c,u;for(s=0,a=o.length;s<a;s+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=o[s],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),va(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),va(e,t,c,!1,!1)&&(u+=e.dump,r+=u));e.tag=i,e.dump="{"+r+"}"}function yUe(e,t,n,r){var i="",o=e.tag,s=Object.keys(n),a,l,c,u,d,g;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Im("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)g="",(!r||i!=="")&&(g+=PB(e,t)),c=s[a],u=n[c],e.replacer&&(u=e.replacer.call(n,c,u)),va(e,t+1,c,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Ep===e.dump.charCodeAt(0)?g+="?":g+="? "),g+=e.dump,d&&(g+=PB(e,t)),va(e,t+1,u,!0,d)&&(e.dump&&Ep===e.dump.charCodeAt(0)?g+=":":g+=": ",g+=e.dump,i+=g));e.tag=o,e.dump=i||"{}"}function kH(e,t,n){var r,i,o,s,a,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,jM.call(a.represent)==="[object Function]")r=a.represent(t,l);else if(QM.call(a.represent,l))r=a.represent[l](t,l);else throw new Im("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function va(e,t,n,r,i,o,s){e.tag=null,e.dump=n,kH(e,n,!1)||kH(e,n,!0);var a=jM.call(e.dump),l=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",d,g;if(u&&(d=e.duplicates.indexOf(n),g=d!==-1),(e.tag!==null&&e.tag!=="?"||g||e.indent!==2&&t>0)&&(i=!1),g&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(u&&g&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(yUe(e,t,e.dump,i),g&&(e.dump="&ref_"+d+e.dump)):(mUe(e,t,e.dump),g&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?WH(e,t-1,e.dump,i):WH(e,t,e.dump,i),g&&(e.dump="&ref_"+d+e.dump)):(pUe(e,t,e.dump),g&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&fUe(e,e.dump,t,o,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Im("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function IUe(e,t){var n=[],r=[],i,o;for(UB(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function UB(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)UB(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)UB(e[r[i]],t,n)}function vUe(e,t){t=t||{};var n=new aUe(t);n.noRefs||IUe(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),va(n,0,r,!0,!0)?n.dump+`
`:""}JM.dump=vUe;var l$=V1,CUe=JM;function Y1(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}Rr.Type=gi;Rr.Schema=bM;Rr.FAILSAFE_SCHEMA=wM;Rr.JSON_SCHEMA=ZM;Rr.CORE_SCHEMA=TM;Rr.DEFAULT_SCHEMA=H1;Rr.load=l$.load;Rr.loadAll=l$.loadAll;Rr.dump=CUe.dump;Rr.YAMLException=ym;Rr.types={binary:HM,float:NM,map:_M,null:BM,pairs:xM,set:LM,timestamp:VM,bool:EM,int:RM,merge:OM,omap:FM,seq:SM,str:AM};Rr.safeLoad=Y1("safeLoad","load");Rr.safeLoadAll=Y1("safeLoadAll","loadAll");Rr.safeDump=Y1("safeDump","dump");var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.Lazy=void 0;class bUe{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}f0.Lazy=bUe;var DB={exports:{}};const AUe="2.0.0",c$=256,SUe=Number.MAX_SAFE_INTEGER||9007199254740991,_Ue=16,wUe=c$-6,BUe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var g0={MAX_LENGTH:c$,MAX_SAFE_COMPONENT_LENGTH:_Ue,MAX_SAFE_BUILD_LENGTH:wUe,MAX_SAFE_INTEGER:SUe,RELEASE_TYPES:BUe,SEMVER_SPEC_VERSION:AUe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const EUe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var h0=EUe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=g0,o=h0;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[d,r]],p=v=>{for(const[y,I]of g)v=v.split(`${y}*`).join(`${y}{0,${I}}`).split(`${y}+`).join(`${y}{1,${I}}`);return v},m=(v,y,I)=>{const b=p(y),A=u++;o(v,A,y),c[v]=A,l[A]=y,s[A]=new RegExp(y,I?"g":void 0),a[A]=new RegExp(b,I?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),m("FULL",`^${l[c.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),m("LOOSE",`^${l[c.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),m("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[c.COERCE],!0),m("COERCERTLFULL",l[c.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(DB,DB.exports);var vm=DB.exports;const RUe=Object.freeze({loose:!0}),GUe=Object.freeze({}),NUe=e=>e?typeof e!="object"?RUe:e:GUe;var P1=NUe;const VH=/^[0-9]+$/,u$=(e,t)=>{const n=VH.test(e),r=VH.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ZUe=(e,t)=>u$(t,e);var d$={compareIdentifiers:u$,rcompareIdentifiers:ZUe};const Yy=h0,{MAX_LENGTH:OH,MAX_SAFE_INTEGER:Py}=g0,{safeRe:HH,t:FH}=vm,TUe=P1,{compareIdentifiers:Wu}=d$;let WUe=class gs{constructor(t,n){if(n=TUe(n),t instanceof gs){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>OH)throw new TypeError(`version is longer than ${OH} characters`);Yy("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?HH[FH.LOOSE]:HH[FH.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Py||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Py||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Py||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Py)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Yy("SemVer.compare",this.version,this.options,t),!(t instanceof gs)){if(typeof t=="string"&&t===this.version)return 0;t=new gs(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof gs||(t=new gs(t,this.options)),Wu(this.major,t.major)||Wu(this.minor,t.minor)||Wu(this.patch,t.patch)}comparePre(t){if(t instanceof gs||(t=new gs(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Yy("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Wu(r,i)}while(++n)}compareBuild(t){t instanceof gs||(t=new gs(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Yy("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Wu(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Wu(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var hi=WUe;const xH=hi,kUe=(e,t,n=!1)=>{if(e instanceof xH)return e;try{return new xH(e,t)}catch(r){if(!n)return null;throw r}};var Df=kUe;const VUe=Df,OUe=(e,t)=>{const n=VUe(e,t);return n?n.version:null};var HUe=OUe;const FUe=Df,xUe=(e,t)=>{const n=FUe(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var LUe=xUe;const LH=hi,YUe=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new LH(e instanceof LH?e.version:e,n).inc(t,r,i).version}catch{return null}};var PUe=YUe;const YH=Df,XUe=(e,t)=>{const n=YH(e,null,!0),r=YH(t,null,!0),i=n.compare(r);if(i===0)return null;const o=i>0,s=o?n:r,a=o?r:n,l=!!s.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";const u=l?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};var UUe=XUe;const DUe=hi,KUe=(e,t)=>new DUe(e,t).major;var MUe=KUe;const $Ue=hi,zUe=(e,t)=>new $Ue(e,t).minor;var JUe=zUe;const jUe=hi,QUe=(e,t)=>new jUe(e,t).patch;var qUe=QUe;const e5e=Df,t5e=(e,t)=>{const n=e5e(e,t);return n&&n.prerelease.length?n.prerelease:null};var n5e=t5e;const PH=hi,r5e=(e,t,n)=>new PH(e,n).compare(new PH(t,n));var zo=r5e;const i5e=zo,o5e=(e,t,n)=>i5e(t,e,n);var s5e=o5e;const a5e=zo,l5e=(e,t)=>a5e(e,t,!0);var c5e=l5e;const XH=hi,u5e=(e,t,n)=>{const r=new XH(e,n),i=new XH(t,n);return r.compare(i)||r.compareBuild(i)};var X1=u5e;const d5e=X1,f5e=(e,t)=>e.sort((n,r)=>d5e(n,r,t));var g5e=f5e;const h5e=X1,p5e=(e,t)=>e.sort((n,r)=>h5e(r,n,t));var m5e=p5e;const y5e=zo,I5e=(e,t,n)=>y5e(e,t,n)>0;var p0=I5e;const v5e=zo,C5e=(e,t,n)=>v5e(e,t,n)<0;var U1=C5e;const b5e=zo,A5e=(e,t,n)=>b5e(e,t,n)===0;var f$=A5e;const S5e=zo,_5e=(e,t,n)=>S5e(e,t,n)!==0;var g$=_5e;const w5e=zo,B5e=(e,t,n)=>w5e(e,t,n)>=0;var D1=B5e;const E5e=zo,R5e=(e,t,n)=>E5e(e,t,n)<=0;var K1=R5e;const G5e=f$,N5e=g$,Z5e=p0,T5e=D1,W5e=U1,k5e=K1,V5e=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return G5e(e,n,r);case"!=":return N5e(e,n,r);case">":return Z5e(e,n,r);case">=":return T5e(e,n,r);case"<":return W5e(e,n,r);case"<=":return k5e(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var h$=V5e;const O5e=hi,H5e=Df,{safeRe:Xy,t:Uy}=vm,F5e=(e,t)=>{if(e instanceof O5e)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?Xy[Uy.COERCEFULL]:Xy[Uy.COERCE]);else{const l=t.includePrerelease?Xy[Uy.COERCERTLFULL]:Xy[Uy.COERCERTL];let c;for(;(c=l.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",o=n[4]||"0",s=t.includePrerelease&&n[5]?`-${n[5]}`:"",a=t.includePrerelease&&n[6]?`+${n[6]}`:"";return H5e(`${r}.${i}.${o}${s}${a}`,t)};var x5e=F5e;class L5e{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Y5e=L5e,s_,UH;function Jo(){if(UH)return s_;UH=1;const e=/\s+/g;class t{constructor(P,oe){if(oe=i(oe),P instanceof t)return P.loose===!!oe.loose&&P.includePrerelease===!!oe.includePrerelease?P:new t(P.raw,oe);if(P instanceof o)return this.raw=P.value,this.set=[[P]],this.formatted=void 0,this;if(this.options=oe,this.loose=!!oe.loose,this.includePrerelease=!!oe.includePrerelease,this.raw=P.trim().replace(e," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(M=>!v(M[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const M of this.set)if(M.length===1&&y(M[0])){this.set=[M];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let P=0;P<this.set.length;P++){P>0&&(this.formatted+="||");const oe=this.set[P];for(let X=0;X<oe.length;X++)X>0&&(this.formatted+=" "),this.formatted+=oe[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(P){const X=((this.options.includePrerelease&&p)|(this.options.loose&&m))+":"+P,M=r.get(X);if(M)return M;const D=this.options.loose,ue=D?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];P=P.replace(ue,$e(this.options.includePrerelease)),s("hyphen replace",P),P=P.replace(l[c.COMPARATORTRIM],u),s("comparator trim",P),P=P.replace(l[c.TILDETRIM],d),s("tilde trim",P),P=P.replace(l[c.CARETTRIM],g),s("caret trim",P);let Re=P.split(" ").map(q=>b(q,this.options)).join(" ").split(/\s+/).map(q=>Ue(q,this.options));D&&(Re=Re.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(l[c.COMPARATORLOOSE])))),s("range list",Re);const Oe=new Map,pe=Re.map(q=>new o(q,this.options));for(const q of pe){if(v(q))return[q];Oe.set(q.value,q)}Oe.size>1&&Oe.has("")&&Oe.delete("");const re=[...Oe.values()];return r.set(X,re),re}intersects(P,oe){if(!(P instanceof t))throw new TypeError("a Range is required");return this.set.some(X=>I(X,oe)&&P.set.some(M=>I(M,oe)&&X.every(D=>M.every(ue=>D.intersects(ue,oe)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new a(P,this.options)}catch{return!1}for(let oe=0;oe<this.set.length;oe++)if(ze(this.set[oe],P,this.options))return!0;return!1}}s_=t;const n=Y5e,r=new n,i=P1,o=m0(),s=h0,a=hi,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:g}=vm,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:m}=g0,v=Ee=>Ee.value==="<0.0.0-0",y=Ee=>Ee.value==="",I=(Ee,P)=>{let oe=!0;const X=Ee.slice();let M=X.pop();for(;oe&&X.length;)oe=X.every(D=>M.intersects(D,P)),M=X.pop();return oe},b=(Ee,P)=>(s("comp",Ee,P),Ee=G(Ee,P),s("caret",Ee),Ee=N(Ee,P),s("tildes",Ee),Ee=j(Ee,P),s("xrange",Ee),Ee=Ce(Ee,P),s("stars",Ee),Ee),A=Ee=>!Ee||Ee.toLowerCase()==="x"||Ee==="*",N=(Ee,P)=>Ee.trim().split(/\s+/).map(oe=>L(oe,P)).join(" "),L=(Ee,P)=>{const oe=P.loose?l[c.TILDELOOSE]:l[c.TILDE];return Ee.replace(oe,(X,M,D,ue,Re)=>{s("tilde",Ee,X,M,D,ue,Re);let Oe;return A(M)?Oe="":A(D)?Oe=`>=${M}.0.0 <${+M+1}.0.0-0`:A(ue)?Oe=`>=${M}.${D}.0 <${M}.${+D+1}.0-0`:Re?(s("replaceTilde pr",Re),Oe=`>=${M}.${D}.${ue}-${Re} <${M}.${+D+1}.0-0`):Oe=`>=${M}.${D}.${ue} <${M}.${+D+1}.0-0`,s("tilde return",Oe),Oe})},G=(Ee,P)=>Ee.trim().split(/\s+/).map(oe=>W(oe,P)).join(" "),W=(Ee,P)=>{s("caret",Ee,P);const oe=P.loose?l[c.CARETLOOSE]:l[c.CARET],X=P.includePrerelease?"-0":"";return Ee.replace(oe,(M,D,ue,Re,Oe)=>{s("caret",Ee,M,D,ue,Re,Oe);let pe;return A(D)?pe="":A(ue)?pe=`>=${D}.0.0${X} <${+D+1}.0.0-0`:A(Re)?D==="0"?pe=`>=${D}.${ue}.0${X} <${D}.${+ue+1}.0-0`:pe=`>=${D}.${ue}.0${X} <${+D+1}.0.0-0`:Oe?(s("replaceCaret pr",Oe),D==="0"?ue==="0"?pe=`>=${D}.${ue}.${Re}-${Oe} <${D}.${ue}.${+Re+1}-0`:pe=`>=${D}.${ue}.${Re}-${Oe} <${D}.${+ue+1}.0-0`:pe=`>=${D}.${ue}.${Re}-${Oe} <${+D+1}.0.0-0`):(s("no pr"),D==="0"?ue==="0"?pe=`>=${D}.${ue}.${Re}${X} <${D}.${ue}.${+Re+1}-0`:pe=`>=${D}.${ue}.${Re}${X} <${D}.${+ue+1}.0-0`:pe=`>=${D}.${ue}.${Re} <${+D+1}.0.0-0`),s("caret return",pe),pe})},j=(Ee,P)=>(s("replaceXRanges",Ee,P),Ee.split(/\s+/).map(oe=>O(oe,P)).join(" ")),O=(Ee,P)=>{Ee=Ee.trim();const oe=P.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return Ee.replace(oe,(X,M,D,ue,Re,Oe)=>{s("xRange",Ee,X,M,D,ue,Re,Oe);const pe=A(D),re=pe||A(ue),q=re||A(Re),Be=q;return M==="="&&Be&&(M=""),Oe=P.includePrerelease?"-0":"",pe?M===">"||M==="<"?X="<0.0.0-0":X="*":M&&Be?(re&&(ue=0),Re=0,M===">"?(M=">=",re?(D=+D+1,ue=0,Re=0):(ue=+ue+1,Re=0)):M==="<="&&(M="<",re?D=+D+1:ue=+ue+1),M==="<"&&(Oe="-0"),X=`${M+D}.${ue}.${Re}${Oe}`):re?X=`>=${D}.0.0${Oe} <${+D+1}.0.0-0`:q&&(X=`>=${D}.${ue}.0${Oe} <${D}.${+ue+1}.0-0`),s("xRange return",X),X})},Ce=(Ee,P)=>(s("replaceStars",Ee,P),Ee.trim().replace(l[c.STAR],"")),Ue=(Ee,P)=>(s("replaceGTE0",Ee,P),Ee.trim().replace(l[P.includePrerelease?c.GTE0PRE:c.GTE0],"")),$e=Ee=>(P,oe,X,M,D,ue,Re,Oe,pe,re,q,Be)=>(A(X)?oe="":A(M)?oe=`>=${X}.0.0${Ee?"-0":""}`:A(D)?oe=`>=${X}.${M}.0${Ee?"-0":""}`:ue?oe=`>=${oe}`:oe=`>=${oe}${Ee?"-0":""}`,A(pe)?Oe="":A(re)?Oe=`<${+pe+1}.0.0-0`:A(q)?Oe=`<${pe}.${+re+1}.0-0`:Be?Oe=`<=${pe}.${re}.${q}-${Be}`:Ee?Oe=`<${pe}.${re}.${+q+1}-0`:Oe=`<=${Oe}`,`${oe} ${Oe}`.trim()),ze=(Ee,P,oe)=>{for(let X=0;X<Ee.length;X++)if(!Ee[X].test(P))return!1;if(P.prerelease.length&&!oe.includePrerelease){for(let X=0;X<Ee.length;X++)if(s(Ee[X].semver),Ee[X].semver!==o.ANY&&Ee[X].semver.prerelease.length>0){const M=Ee[X].semver;if(M.major===P.major&&M.minor===P.minor&&M.patch===P.patch)return!0}return!1}return!0};return s_}var a_,DH;function m0(){if(DH)return a_;DH=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,d){if(d=n(d),u instanceof t){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],g=u.match(d);if(!g)throw new TypeError(`Invalid comparator: ${u}`);this.operator=g[1]!==void 0?g[1]:"",this.operator==="="&&(this.operator=""),g[2]?this.semver=new a(g[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}a_=t;const n=P1,{safeRe:r,t:i}=vm,o=h$,s=h0,a=hi,l=Jo();return a_}const P5e=Jo(),X5e=(e,t,n)=>{try{t=new P5e(t,n)}catch{return!1}return t.test(e)};var y0=X5e;const U5e=Jo(),D5e=(e,t)=>new U5e(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var K5e=D5e;const M5e=hi,$5e=Jo(),z5e=(e,t,n)=>{let r=null,i=null,o=null;try{o=new $5e(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new M5e(r,n))}),r};var J5e=z5e;const j5e=hi,Q5e=Jo(),q5e=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Q5e(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new j5e(r,n))}),r};var eDe=q5e;const l_=hi,tDe=Jo(),KH=p0,nDe=(e,t)=>{e=new tDe(e,t);let n=new l_("0.0.0");if(e.test(n)||(n=new l_("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let o=null;i.forEach(s=>{const a=new l_(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||KH(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||KH(n,o))&&(n=o)}return n&&e.test(n)?n:null};var rDe=nDe;const iDe=Jo(),oDe=(e,t)=>{try{return new iDe(e,t).range||"*"}catch{return null}};var sDe=oDe;const aDe=hi,p$=m0(),{ANY:lDe}=p$,cDe=Jo(),uDe=y0,MH=p0,$H=U1,dDe=K1,fDe=D1,gDe=(e,t,n,r)=>{e=new aDe(e,r),t=new cDe(t,r);let i,o,s,a,l;switch(n){case">":i=MH,o=dDe,s=$H,a=">",l=">=";break;case"<":i=$H,o=fDe,s=MH,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(uDe(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const u=t.set[c];let d=null,g=null;if(u.forEach(p=>{p.semver===lDe&&(p=new p$(">=0.0.0")),d=d||p,g=g||p,i(p.semver,d.semver,r)?d=p:s(p.semver,g.semver,r)&&(g=p)}),d.operator===a||d.operator===l||(!g.operator||g.operator===a)&&o(e,g.semver))return!1;if(g.operator===l&&s(e,g.semver))return!1}return!0};var M1=gDe;const hDe=M1,pDe=(e,t,n)=>hDe(e,t,">",n);var mDe=pDe;const yDe=M1,IDe=(e,t,n)=>yDe(e,t,"<",n);var vDe=IDe;const zH=Jo(),CDe=(e,t,n)=>(e=new zH(e,n),t=new zH(t,n),e.intersects(t,n));var bDe=CDe;const ADe=y0,SDe=zo;var _De=(e,t,n)=>{const r=[];let i=null,o=null;const s=e.sort((u,d)=>SDe(u,d,n));for(const u of s)ADe(u,t,n)?(o=u,i||(i=u)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);const a=[];for(const[u,d]of r)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);const l=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return l.length<c.length?l:t};const JH=Jo(),$1=m0(),{ANY:c_}=$1,kg=y0,z1=zo,wDe=(e,t,n={})=>{if(e===t)return!0;e=new JH(e,n),t=new JH(t,n);let r=!1;e:for(const i of e.set){for(const o of t.set){const s=EDe(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},BDe=[new $1(">=0.0.0-0")],jH=[new $1(">=0.0.0")],EDe=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===c_){if(t.length===1&&t[0].semver===c_)return!0;n.includePrerelease?e=BDe:e=jH}if(t.length===1&&t[0].semver===c_){if(n.includePrerelease)return!0;t=jH}const r=new Set;let i,o;for(const p of e)p.operator===">"||p.operator===">="?i=QH(i,p,n):p.operator==="<"||p.operator==="<="?o=qH(o,p,n):r.add(p.semver);if(r.size>1)return null;let s;if(i&&o){if(s=z1(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(const p of r){if(i&&!kg(p,String(i),n)||o&&!kg(p,String(o),n))return null;for(const m of t)if(!kg(p,String(m),n))return!1;return!0}let a,l,c,u,d=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,g=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const p of t){if(u=u||p.operator===">"||p.operator===">=",c=c||p.operator==="<"||p.operator==="<=",i){if(g&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===g.major&&p.semver.minor===g.minor&&p.semver.patch===g.patch&&(g=!1),p.operator===">"||p.operator===">="){if(a=QH(i,p,n),a===p&&a!==i)return!1}else if(i.operator===">="&&!kg(i.semver,String(p),n))return!1}if(o){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(l=qH(o,p,n),l===p&&l!==o)return!1}else if(o.operator==="<="&&!kg(o.semver,String(p),n))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&u&&!i&&s!==0||g||d)},QH=(e,t,n)=>{if(!e)return t;const r=z1(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},qH=(e,t,n)=>{if(!e)return t;const r=z1(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var RDe=wDe;const u_=vm,eF=g0,GDe=hi,tF=d$,NDe=Df,ZDe=HUe,TDe=LUe,WDe=PUe,kDe=UUe,VDe=MUe,ODe=JUe,HDe=qUe,FDe=n5e,xDe=zo,LDe=s5e,YDe=c5e,PDe=X1,XDe=g5e,UDe=m5e,DDe=p0,KDe=U1,MDe=f$,$De=g$,zDe=D1,JDe=K1,jDe=h$,QDe=x5e,qDe=m0(),eKe=Jo(),tKe=y0,nKe=K5e,rKe=J5e,iKe=eDe,oKe=rDe,sKe=sDe,aKe=M1,lKe=mDe,cKe=vDe,uKe=bDe,dKe=_De,fKe=RDe;var m$={parse:NDe,valid:ZDe,clean:TDe,inc:WDe,diff:kDe,major:VDe,minor:ODe,patch:HDe,prerelease:FDe,compare:xDe,rcompare:LDe,compareLoose:YDe,compareBuild:PDe,sort:XDe,rsort:UDe,gt:DDe,lt:KDe,eq:MDe,neq:$De,gte:zDe,lte:JDe,cmp:jDe,coerce:QDe,Comparator:qDe,Range:eKe,satisfies:tKe,toComparators:nKe,maxSatisfying:rKe,minSatisfying:iKe,minVersion:oKe,validRange:sKe,outside:aKe,gtr:lKe,ltr:cKe,intersects:uKe,simplifyRange:dKe,subset:fKe,SemVer:GDe,re:u_.re,src:u_.src,tokens:u_.t,SEMVER_SPEC_VERSION:eF.SEMVER_SPEC_VERSION,RELEASE_TYPES:eF.RELEASE_TYPES,compareIdentifiers:tF.compareIdentifiers,rcompareIdentifiers:tF.rcompareIdentifiers},Cm={},rC={exports:{}};rC.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",g="[object Error]",p="[object Function]",m="[object GeneratorFunction]",v="[object Map]",y="[object Number]",I="[object Null]",b="[object Object]",A="[object Promise]",N="[object Proxy]",L="[object RegExp]",G="[object Set]",W="[object String]",j="[object Symbol]",O="[object Undefined]",Ce="[object WeakMap]",Ue="[object ArrayBuffer]",$e="[object DataView]",ze="[object Float32Array]",Ee="[object Float64Array]",P="[object Int8Array]",oe="[object Int16Array]",X="[object Int32Array]",M="[object Uint8Array]",D="[object Uint8ClampedArray]",ue="[object Uint16Array]",Re="[object Uint32Array]",Oe=/[\\^$.*+?()[\]{}|]/g,pe=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,q={};q[ze]=q[Ee]=q[P]=q[oe]=q[X]=q[M]=q[D]=q[ue]=q[Re]=!0,q[a]=q[l]=q[Ue]=q[u]=q[$e]=q[d]=q[g]=q[p]=q[v]=q[y]=q[b]=q[L]=q[G]=q[W]=q[Ce]=!1;var Be=typeof rn=="object"&&rn&&rn.Object===Object&&rn,B=typeof self=="object"&&self&&self.Object===Object&&self,w=Be||B||Function("return this")(),F=t&&!t.nodeType&&t,Y=F&&!0&&e&&!e.nodeType&&e,Se=Y&&Y.exports===F,Ge=Se&&Be.process,ke=function(){try{return Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),dt=ke&&ke.isTypedArray;function ot(H,te){for(var Ze=-1,it=H==null?0:H.length,an=0,Bt=[];++Ze<it;){var In=H[Ze];te(In,Ze,H)&&(Bt[an++]=In)}return Bt}function bt(H,te){for(var Ze=-1,it=te.length,an=H.length;++Ze<it;)H[an+Ze]=te[Ze];return H}function Wt(H,te){for(var Ze=-1,it=H==null?0:H.length;++Ze<it;)if(te(H[Ze],Ze,H))return!0;return!1}function pt(H,te){for(var Ze=-1,it=Array(H);++Ze<H;)it[Ze]=te(Ze);return it}function Et(H){return function(te){return H(te)}}function On(H,te){return H.has(te)}function Qt(H,te){return H==null?void 0:H[te]}function ut(H){var te=-1,Ze=Array(H.size);return H.forEach(function(it,an){Ze[++te]=[an,it]}),Ze}function St(H,te){return function(Ze){return H(te(Ze))}}function se(H){var te=-1,Ze=Array(H.size);return H.forEach(function(it){Ze[++te]=it}),Ze}var fe=Array.prototype,we=Function.prototype,Te=Object.prototype,qe=w["__core-js_shared__"],Jt=we.toString,ct=Te.hasOwnProperty,xe=function(){var H=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),Ye=Te.toString,Gt=RegExp("^"+Jt.call(ct).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=Se?w.Buffer:void 0,Je=w.Symbol,Hn=w.Uint8Array,Kr=Te.propertyIsEnumerable,ts=fe.splice,De=Je?Je.toStringTag:void 0,ns=Object.getOwnPropertySymbols,Wa=ft?ft.isBuffer:void 0,rs=St(Object.keys,Object),Jn=Lt(w,"DataView"),Mr=Lt(w,"Map"),dn=Lt(w,"Promise"),Jl=Lt(w,"Set"),$i=Lt(w,"WeakMap"),gn=Lt(Object,"create"),jl=ls(Jn),ka=ls(Mr),hn=ls(dn),kn=ls(Jl),qf=ls($i),Ds=Je?Je.prototype:void 0,is=Ds?Ds.valueOf:void 0;function pi(H){var te=-1,Ze=H==null?0:H.length;for(this.clear();++te<Ze;){var it=H[te];this.set(it[0],it[1])}}function eg(){this.__data__=gn?gn(null):{},this.size=0}function $r(H){var te=this.has(H)&&delete this.__data__[H];return this.size-=te?1:0,te}function os(H){var te=this.__data__;if(gn){var Ze=te[H];return Ze===r?void 0:Ze}return ct.call(te,H)?te[H]:void 0}function zi(H){var te=this.__data__;return gn?te[H]!==void 0:ct.call(te,H)}function Va(H,te){var Ze=this.__data__;return this.size+=this.has(H)?0:1,Ze[H]=gn&&te===void 0?r:te,this}pi.prototype.clear=eg,pi.prototype.delete=$r,pi.prototype.get=os,pi.prototype.has=zi,pi.prototype.set=Va;function Ni(H){var te=-1,Ze=H==null?0:H.length;for(this.clear();++te<Ze;){var it=H[te];this.set(it[0],it[1])}}function Ji(){this.__data__=[],this.size=0}function Iu(H){var te=this.__data__,Ze=sn(te,H);if(Ze<0)return!1;var it=te.length-1;return Ze==it?te.pop():ts.call(te,Ze,1),--this.size,!0}function Zi(H){var te=this.__data__,Ze=sn(te,H);return Ze<0?void 0:te[Ze][1]}function vu(H){return sn(this.__data__,H)>-1}function Ql(H,te){var Ze=this.__data__,it=sn(Ze,H);return it<0?(++this.size,Ze.push([H,te])):Ze[it][1]=te,this}Ni.prototype.clear=Ji,Ni.prototype.delete=Iu,Ni.prototype.get=Zi,Ni.prototype.has=vu,Ni.prototype.set=Ql;function nn(H){var te=-1,Ze=H==null?0:H.length;for(this.clear();++te<Ze;){var it=H[te];this.set(it[0],it[1])}}function V(){this.size=0,this.__data__={hash:new pi,map:new(Mr||Ni),string:new pi}}function K(H){var te=Su(this,H).delete(H);return this.size-=te?1:0,te}function ge(H){return Su(this,H).get(H)}function We(H){return Su(this,H).has(H)}function Le(H,te){var Ze=Su(this,H),it=Ze.size;return Ze.set(H,te),this.size+=Ze.size==it?0:1,this}nn.prototype.clear=V,nn.prototype.delete=K,nn.prototype.get=ge,nn.prototype.has=We,nn.prototype.set=Le;function tt(H){var te=-1,Ze=H==null?0:H.length;for(this.__data__=new nn;++te<Ze;)this.add(H[te])}function at(H){return this.__data__.set(H,r),this}function Nt(H){return this.__data__.has(H)}tt.prototype.add=tt.prototype.push=at,tt.prototype.has=Nt;function _t(H){var te=this.__data__=new Ni(H);this.size=te.size}function mr(){this.__data__=new Ni,this.size=0}function zr(H){var te=this.__data__,Ze=te.delete(H);return this.size=te.size,Ze}function wt(H){return this.__data__.get(H)}function sr(H){return this.__data__.has(H)}function Ti(H,te){var Ze=this.__data__;if(Ze instanceof Ni){var it=Ze.__data__;if(!Mr||it.length<n-1)return it.push([H,te]),this.size=++Ze.size,this;Ze=this.__data__=new nn(it)}return Ze.set(H,te),this.size=Ze.size,this}_t.prototype.clear=mr,_t.prototype.delete=zr,_t.prototype.get=wt,_t.prototype.has=sr,_t.prototype.set=Ti;function Tm(H,te){var Ze=cs(H),it=!Ze&&ji(H),an=!Ze&&!it&&tc(H),Bt=!Ze&&!it&&!an&&Bu(H),In=Ze||it||an||Bt,Un=In?pt(H.length,String):[],jn=Un.length;for(var Cn in H)(te||ct.call(H,Cn))&&!(In&&(Cn=="length"||an&&(Cn=="offset"||Cn=="parent")||Bt&&(Cn=="buffer"||Cn=="byteLength"||Cn=="byteOffset")||Jr(Cn,jn)))&&Un.push(Cn);return Un}function sn(H,te){for(var Ze=H.length;Ze--;)if(Fn(H[Ze][0],te))return Ze;return-1}function ql(H,te,Ze){var it=te(H);return cs(H)?it:bt(it,Ze(H))}function Co(H){return H==null?H===void 0?O:I:De&&De in Object(H)?og(H):km(H)}function Ks(H){return Ha(H)&&Co(H)==a}function Cu(H,te,Ze,it,an){return H===te?!0:H==null||te==null||!Ha(H)&&!Ha(te)?H!==H&&te!==te:tg(H,te,Ze,it,Cu,an)}function tg(H,te,Ze,it,an,Bt){var In=cs(H),Un=cs(te),jn=In?l:ss(H),Cn=Un?l:ss(te);jn=jn==a?b:jn,Cn=Cn==a?b:Cn;var yr=jn==b,jr=Cn==b,Qn=jn==Cn;if(Qn&&tc(H)){if(!tc(te))return!1;In=!0,yr=!1}if(Qn&&!yr)return Bt||(Bt=new _t),In||Bu(H)?ng(H,te,Ze,it,an,Bt):bo(H,te,jn,Ze,it,an,Bt);if(!(Ze&i)){var Ir=yr&&ct.call(H,"__wrapped__"),vr=jr&&ct.call(te,"__wrapped__");if(Ir||vr){var ki=Ir?H.value():H,Qi=vr?te.value():te;return Bt||(Bt=new _t),an(ki,Qi,Ze,it,Bt)}}return Qn?(Bt||(Bt=new _t),rg(H,te,Ze,it,an,Bt)):!1}function bu(H){if(!wu(H)||_u(H))return!1;var te=Vm(H)?Gt:pe;return te.test(ls(H))}function Wm(H){return Ha(H)&&Wi(H.length)&&!!q[Co(H)]}function Au(H){if(!as(H))return rs(H);var te=[];for(var Ze in Object(H))ct.call(H,Ze)&&Ze!="constructor"&&te.push(Ze);return te}function ng(H,te,Ze,it,an,Bt){var In=Ze&i,Un=H.length,jn=te.length;if(Un!=jn&&!(In&&jn>Un))return!1;var Cn=Bt.get(H);if(Cn&&Bt.get(te))return Cn==te;var yr=-1,jr=!0,Qn=Ze&o?new tt:void 0;for(Bt.set(H,te),Bt.set(te,H);++yr<Un;){var Ir=H[yr],vr=te[yr];if(it)var ki=In?it(vr,Ir,yr,te,H,Bt):it(Ir,vr,yr,H,te,Bt);if(ki!==void 0){if(ki)continue;jr=!1;break}if(Qn){if(!Wt(te,function(Qi,Ms){if(!On(Qn,Ms)&&(Ir===Qi||an(Ir,Qi,Ze,it,Bt)))return Qn.push(Ms)})){jr=!1;break}}else if(!(Ir===vr||an(Ir,vr,Ze,it,Bt))){jr=!1;break}}return Bt.delete(H),Bt.delete(te),jr}function bo(H,te,Ze,it,an,Bt,In){switch(Ze){case $e:if(H.byteLength!=te.byteLength||H.byteOffset!=te.byteOffset)return!1;H=H.buffer,te=te.buffer;case Ue:return!(H.byteLength!=te.byteLength||!Bt(new Hn(H),new Hn(te)));case u:case d:case y:return Fn(+H,+te);case g:return H.name==te.name&&H.message==te.message;case L:case W:return H==te+"";case v:var Un=ut;case G:var jn=it&i;if(Un||(Un=se),H.size!=te.size&&!jn)return!1;var Cn=In.get(H);if(Cn)return Cn==te;it|=o,In.set(H,te);var yr=ng(Un(H),Un(te),it,an,Bt,In);return In.delete(H),yr;case j:if(is)return is.call(H)==is.call(te)}return!1}function rg(H,te,Ze,it,an,Bt){var In=Ze&i,Un=ig(H),jn=Un.length,Cn=ig(te),yr=Cn.length;if(jn!=yr&&!In)return!1;for(var jr=jn;jr--;){var Qn=Un[jr];if(!(In?Qn in te:ct.call(te,Qn)))return!1}var Ir=Bt.get(H);if(Ir&&Bt.get(te))return Ir==te;var vr=!0;Bt.set(H,te),Bt.set(te,H);for(var ki=In;++jr<jn;){Qn=Un[jr];var Qi=H[Qn],Ms=te[Qn];if(it)var rc=In?it(Ms,Qi,Qn,te,H,Bt):it(Qi,Ms,Qn,H,te,Bt);if(!(rc===void 0?Qi===Ms||an(Qi,Ms,Ze,it,Bt):rc)){vr=!1;break}ki||(ki=Qn=="constructor")}if(vr&&!ki){var Fa=H.constructor,xa=te.constructor;Fa!=xa&&"constructor"in H&&"constructor"in te&&!(typeof Fa=="function"&&Fa instanceof Fa&&typeof xa=="function"&&xa instanceof xa)&&(vr=!1)}return Bt.delete(H),Bt.delete(te),vr}function ig(H){return ql(H,nc,eA)}function Su(H,te){var Ze=H.__data__;return Oa(te)?Ze[typeof te=="string"?"string":"hash"]:Ze.map}function Lt(H,te){var Ze=Qt(H,te);return bu(Ze)?Ze:void 0}function og(H){var te=ct.call(H,De),Ze=H[De];try{H[De]=void 0;var it=!0}catch{}var an=Ye.call(H);return it&&(te?H[De]=Ze:delete H[De]),an}var eA=ns?function(H){return H==null?[]:(H=Object(H),ot(ns(H),function(te){return Kr.call(H,te)}))}:sg,ss=Co;(Jn&&ss(new Jn(new ArrayBuffer(1)))!=$e||Mr&&ss(new Mr)!=v||dn&&ss(dn.resolve())!=A||Jl&&ss(new Jl)!=G||$i&&ss(new $i)!=Ce)&&(ss=function(H){var te=Co(H),Ze=te==b?H.constructor:void 0,it=Ze?ls(Ze):"";if(it)switch(it){case jl:return $e;case ka:return v;case hn:return A;case kn:return G;case qf:return Ce}return te});function Jr(H,te){return te=te??s,!!te&&(typeof H=="number"||re.test(H))&&H>-1&&H%1==0&&H<te}function Oa(H){var te=typeof H;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?H!=="__proto__":H===null}function _u(H){return!!xe&&xe in H}function as(H){var te=H&&H.constructor,Ze=typeof te=="function"&&te.prototype||Te;return H===Ze}function km(H){return Ye.call(H)}function ls(H){if(H!=null){try{return Jt.call(H)}catch{}try{return H+""}catch{}}return""}function Fn(H,te){return H===te||H!==H&&te!==te}var ji=Ks(function(){return arguments}())?Ks:function(H){return Ha(H)&&ct.call(H,"callee")&&!Kr.call(H,"callee")},cs=Array.isArray;function ec(H){return H!=null&&Wi(H.length)&&!Vm(H)}var tc=Wa||Om;function us(H,te){return Cu(H,te)}function Vm(H){if(!wu(H))return!1;var te=Co(H);return te==p||te==m||te==c||te==N}function Wi(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=s}function wu(H){var te=typeof H;return H!=null&&(te=="object"||te=="function")}function Ha(H){return H!=null&&typeof H=="object"}var Bu=dt?Et(dt):Wm;function nc(H){return ec(H)?Tm(H):Au(H)}function sg(){return[]}function Om(){return!1}e.exports=us})(rC,rC.exports);var gKe=rC.exports;Object.defineProperty(Cm,"__esModule",{value:!0});Cm.DownloadedUpdateHelper=void 0;Cm.createTempUpdateFile=IKe;const hKe=Ns,pKe=Rn,nF=gKe,gc=$l,Bh=mt;class mKe{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Bh.join(this.cacheDir,"pending")}async validateDownloadedPath(t,n,r,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return nF(this.versionInfo,n)&&nF(this.fileInfo.info,r.info)&&await(0,gc.pathExists)(t)?t:null;const o=await this.getValidCachedUpdateFile(r,i);return o===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=o,o)}async setDownloadedFile(t,n,r,i,o,s){this._file=t,this._packageFile=n,this.versionInfo=r,this.fileInfo=i,this._downloadedFileInfo={fileName:o,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},s&&await(0,gc.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,gc.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,n){const r=this.getUpdateInfoFile();if(!await(0,gc.pathExists)(r))return null;let o;try{o=await(0,gc.readJson)(r)}catch(c){let u="No cached update info available";return c.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),u+=` (error on read: ${c.message})`),n.info(u),null}if(!((o==null?void 0:o.fileName)!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const a=Bh.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,gc.pathExists)(a))return n.info("Cached update file doesn't exist"),null;const l=await yKe(a);return t.info.sha512!==l?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${l}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,a)}getUpdateInfoFile(){return Bh.join(this.cacheDirForPendingUpdate,"update-info.json")}}Cm.DownloadedUpdateHelper=mKe;function yKe(e,t="sha512",n="base64",r){return new Promise((i,o)=>{const s=(0,hKe.createHash)(t);s.on("error",o).setEncoding(n),(0,pKe.createReadStream)(e,{...r,highWaterMark:1024*1024}).on("error",o).on("end",()=>{s.end(),i(s.read())}).pipe(s,{end:!1})})}async function IKe(e,t,n){let r=0,i=Bh.join(t,e);for(let o=0;o<3;o++)try{return await(0,gc.unlink)(i),i}catch(s){if(s.code==="ENOENT")return i;n.warn(`Error on remove temp update file: ${s}`),i=Bh.join(t,`${r++}-${e}`)}return i}var I0={},J1={};Object.defineProperty(J1,"__esModule",{value:!0});J1.getAppCacheDir=CKe;const d_=mt,vKe=Ri;function CKe(){const e=(0,vKe.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||d_.join(e,"AppData","Local"):process.platform==="darwin"?t=d_.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||d_.join(e,".cache"),t}Object.defineProperty(I0,"__esModule",{value:!0});I0.ElectronAppAdapter=void 0;const rF=mt,bKe=J1;class AKe{constructor(t=J.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?rF.join(process.resourcesPath,"app-update.yml"):rF.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,bKe.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(n,r)=>t(r))}}I0.ElectronAppAdapter=AKe;var y$={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=n;const t=hr;e.NET_SESSION_NAME="electron-updater";function n(){return J.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class r extends t.HttpExecutor{constructor(o){super(),this.proxyLoginCallback=o,this.cachedSession=null}async download(o,s,a){return await a.cancellationToken.createPromise((l,c,u)=>{const d={headers:a.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(o,d),(0,t.configureRequestOptions)(d),this.doDownload(d,{destination:s,options:a,onCancel:u,callback:g=>{g==null?l(s):c(g)},responseHandler:null},0)})}createRequest(o,s){o.headers&&o.headers.Host&&(o.host=o.headers.Host,delete o.headers.Host),this.cachedSession==null&&(this.cachedSession=n());const a=J.net.request({...o,session:this.cachedSession});return a.on("response",s),this.proxyLoginCallback!=null&&a.on("login",this.proxyLoginCallback),a}addRedirectHandlers(o,s,a,l,c){o.on("redirect",(u,d,g)=>{o.abort(),l>this.maxRedirects?a(this.createMaxRedirectError()):c(t.HttpExecutor.prepareRedirectUrlOptions(g,s))})}}e.ElectronHttpExecutor=r})(y$);var bm={},mo={},SKe=1/0,_Ke="[object Symbol]",I$=/[\\^$.*+?()[\]{}|]/g,wKe=RegExp(I$.source),BKe=typeof rn=="object"&&rn&&rn.Object===Object&&rn,EKe=typeof self=="object"&&self&&self.Object===Object&&self,RKe=BKe||EKe||Function("return this")(),GKe=Object.prototype,NKe=GKe.toString,iF=RKe.Symbol,oF=iF?iF.prototype:void 0,sF=oF?oF.toString:void 0;function ZKe(e){if(typeof e=="string")return e;if(WKe(e))return sF?sF.call(e):"";var t=e+"";return t=="0"&&1/e==-SKe?"-0":t}function TKe(e){return!!e&&typeof e=="object"}function WKe(e){return typeof e=="symbol"||TKe(e)&&NKe.call(e)==_Ke}function kKe(e){return e==null?"":ZKe(e)}function VKe(e){return e=kKe(e),e&&wKe.test(e)?e.replace(I$,"\\$&"):e}var OKe=VKe;Object.defineProperty(mo,"__esModule",{value:!0});mo.newBaseUrl=FKe;mo.newUrlFromBase=KB;mo.getChannelFilename=xKe;mo.blockmapFiles=LKe;const v$=Sr,HKe=OKe;function FKe(e){const t=new v$.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}function KB(e,t,n=!1){const r=new v$.URL(e,t),i=t.search;return i!=null&&i.length!==0?r.search=i:n&&(r.search=`noCache=${Date.now().toString(32)}`),r}function xKe(e){return`${e}.yml`}function LKe(e,t,n){const r=KB(`${e.pathname}.blockmap`,e);return[KB(`${e.pathname.replace(new RegExp(HKe(n),"g"),t)}.blockmap`,e),r]}var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.Provider=void 0;pr.findFile=XKe;pr.parseUpdateInfo=UKe;pr.getFileList=C$;pr.resolveFiles=DKe;const Fl=hr,YKe=Rr,aF=mo;class PKe{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,n,r){return this.executor.request(this.createRequestOptions(t,n),r)}createRequestOptions(t,n){const r={};return this.requestHeaders==null?n!=null&&(r.headers=n):r.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,Fl.configureRequestUrl)(t,r),r}}pr.Provider=PKe;function XKe(e,t,n){if(e.length===0)throw(0,Fl.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const r=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return r??(n==null?e[0]:e.find(i=>!n.some(o=>i.url.pathname.toLowerCase().endsWith(`.${o}`))))}function UKe(e,t,n){if(e==null)throw(0,Fl.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let r;try{r=(0,YKe.load)(e)}catch(i){throw(0,Fl.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return r}function C$(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,Fl.newError)(`No files provided: ${(0,Fl.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function DKe(e,t,n=r=>r){const i=C$(e).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,Fl.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,Fl.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,aF.newUrlFromBase)(n(a.url),t),info:a}}),o=e.packages,s=o==null?null:o[process.arch]||o.ia32;return s!=null&&(i[0].packageInfo={...s,path:(0,aF.newUrlFromBase)(n(s.path),t).href}),i}Object.defineProperty(bm,"__esModule",{value:!0});bm.GenericProvider=void 0;const lF=hr,f_=mo,g_=pr;class KKe extends g_.Provider{constructor(t,n,r){super(r),this.configuration=t,this.updater=n,this.baseUrl=(0,f_.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,f_.getChannelFilename)(this.channel),n=(0,f_.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let r=0;;r++)try{return(0,g_.parseUpdateInfo)(await this.httpRequest(n),t,n)}catch(i){if(i instanceof lF.HttpError&&i.statusCode===404)throw(0,lF.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&r<3){await new Promise((o,s)=>{try{setTimeout(o,1e3*r)}catch(a){s(a)}});continue}throw i}}resolveFiles(t){return(0,g_.resolveFiles)(t,this.baseUrl)}}bm.GenericProvider=KKe;var v0={},C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.BitbucketProvider=void 0;const cF=hr,h_=mo,p_=pr;class MKe extends p_.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n;const{owner:i,slug:o}=t;this.baseUrl=(0,h_.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${o}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new cF.CancellationToken,n=(0,h_.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,h_.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,void 0,t);return(0,p_.parseUpdateInfo)(i,n,r)}catch(i){throw(0,cF.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,p_.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:n}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${n}, channel: ${this.channel})`}}C0.BitbucketProvider=MKe;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.GitHubProvider=xl.BaseGitHubProvider=void 0;xl.computeReleaseNotes=A$;const qs=hr,sd=m$,$Ke=Sr,ad=mo,MB=pr,m_=/\/tag\/([^/]+)$/;class b$ extends MB.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,ad.newBaseUrl)((0,qs.githubUrl)(t,n));const i=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,ad.newBaseUrl)((0,qs.githubUrl)(t,i))}computeGithubBasePath(t){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${t}`:t}}xl.BaseGitHubProvider=b$;class zKe extends b${constructor(t,n,r){super(t,"github.com",r),this.options=t,this.updater=n}get channel(){const t=this.updater.channel||this.options.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){var t,n,r,i,o;const s=new qs.CancellationToken,a=await this.httpRequest((0,ad.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},s),l=(0,qs.parseXml)(a);let c=l.element("entry",!1,"No published versions on GitHub"),u=null;try{if(this.updater.allowPrerelease){const y=((t=this.updater)===null||t===void 0?void 0:t.channel)||((n=sd.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(y===null)u=m_.exec(c.element("link").attribute("href"))[1];else for(const I of l.getElements("entry")){const b=m_.exec(I.element("link").attribute("href"));if(b===null)continue;const A=b[1],N=((r=sd.prerelease(A))===null||r===void 0?void 0:r[0])||null,L=!y||["alpha","beta"].includes(y),G=N!==null&&!["alpha","beta"].includes(String(N));if(L&&!G&&!(y==="beta"&&N==="alpha")){u=A;break}if(N&&N===y){u=A;break}}}else{u=await this.getLatestTagName(s);for(const y of l.getElements("entry"))if(m_.exec(y.element("link").attribute("href"))[1]===u){c=y;break}}}catch(y){throw(0,qs.newError)(`Cannot parse releases feed: ${y.stack||y.message},
XML:
${a}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(u==null)throw(0,qs.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let d,g="",p="";const m=async y=>{g=(0,ad.getChannelFilename)(y),p=(0,ad.newUrlFromBase)(this.getBaseDownloadPath(String(u),g),this.baseUrl);const I=this.createRequestOptions(p);try{return await this.executor.request(I,s)}catch(b){throw b instanceof qs.HttpError&&b.statusCode===404?(0,qs.newError)(`Cannot find ${g} in the latest release artifacts (${p}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{let y=this.channel;this.updater.allowPrerelease&&(!((i=sd.prerelease(u))===null||i===void 0)&&i[0])&&(y=this.getCustomChannelName(String((o=sd.prerelease(u))===null||o===void 0?void 0:o[0]))),d=await m(y)}catch(y){if(this.updater.allowPrerelease)d=await m(this.getDefaultChannelName());else throw y}const v=(0,MB.parseUpdateInfo)(d,g,p);return v.releaseName==null&&(v.releaseName=c.elementValueOrEmpty("title")),v.releaseNotes==null&&(v.releaseNotes=A$(this.updater.currentVersion,this.updater.fullChangelog,l,c)),{tag:u,...v}}async getLatestTagName(t){const n=this.options,r=n.host==null||n.host==="github.com"?(0,ad.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new $Ke.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(r,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,qs.newError)(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,MB.resolveFiles)(t,this.baseUrl,n=>this.getBaseDownloadPath(t.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(t,n){return`${this.basePath}/download/${t}/${n}`}}xl.GitHubProvider=zKe;function uF(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function A$(e,t,n,r){if(!t)return uF(r);const i=[];for(const o of n.getElements("entry")){const s=/\/tag\/v?([^/]+)$/.exec(o.element("link").attribute("href"))[1];sd.lt(e,s)&&i.push({version:s,note:uF(o)})}return i.sort((o,s)=>sd.rcompare(o.version,s.version))}var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.KeygenProvider=void 0;const dF=hr,y_=mo,I_=pr;class JKe extends I_.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n,this.baseUrl=(0,y_.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new dF.CancellationToken,n=(0,y_.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,y_.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,I_.parseUpdateInfo)(i,n,r)}catch(i){throw(0,dF.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,I_.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:n,platform:r}=this.configuration;return`Keygen (account: ${t}, product: ${n}, platform: ${r}, channel: ${this.channel})`}}b0.KeygenProvider=JKe;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.PrivateGitHubProvider=void 0;const ku=hr,jKe=Rr,QKe=mt,fF=Sr,gF=mo,qKe=xl,e9e=pr;class t9e extends qKe.BaseGitHubProvider{constructor(t,n,r,i){super(t,"api.github.com",i),this.updater=n,this.token=r}createRequestOptions(t,n){const r=super.createRequestOptions(t,n);return r.redirect="manual",r}async getLatestVersion(){const t=new ku.CancellationToken,n=(0,gF.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(t),i=r.assets.find(a=>a.name===n);if(i==null)throw(0,ku.newError)(`Cannot find ${n} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const o=new fF.URL(i.url);let s;try{s=(0,jKe.load)(await this.httpRequest(o,this.configureHeaders("application/octet-stream"),t))}catch(a){throw a instanceof ku.HttpError&&a.statusCode===404?(0,ku.newError)(`Cannot find ${n} in the latest release artifacts (${o}): ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return s.assets=r.assets,s}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const n=this.updater.allowPrerelease;let r=this.basePath;n||(r=`${r}/latest`);const i=(0,gF.newUrlFromBase)(r,this.baseUrl);try{const o=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return n?o.find(s=>s.prerelease)||o[0]:o}catch(o){throw(0,ku.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${o.stack||o.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,e9e.getFileList)(t).map(n=>{const r=QKe.posix.basename(n.url).replace(/ /g,"-"),i=t.assets.find(o=>o!=null&&o.name===r);if(i==null)throw(0,ku.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new fF.URL(i.url),info:n}})}}A0.PrivateGitHubProvider=t9e;Object.defineProperty(v0,"__esModule",{value:!0});v0.isUrlProbablySupportMultiRangeRequests=S$;v0.createClient=s9e;const Dy=hr,n9e=C0,hF=bm,r9e=xl,i9e=b0,o9e=A0;function S$(e){return!e.includes("s3.amazonaws.com")}function s9e(e,t,n){if(typeof e=="string")throw(0,Dy.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const r=e.provider;switch(r){case"github":{const i=e,o=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return o==null?new r9e.GitHubProvider(i,t,n):new o9e.PrivateGitHubProvider(i,t,o,n)}case"bitbucket":return new n9e.BitbucketProvider(e,t,n);case"keygen":return new i9e.KeygenProvider(e,t,n);case"s3":case"spaces":return new hF.GenericProvider({provider:"generic",url:(0,Dy.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...n,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new hF.GenericProvider(i,t,{...n,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&S$(i.url)})}case"custom":{const i=e,o=i.updateProvider;if(!o)throw(0,Dy.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new o(i,t,n)}default:throw(0,Dy.newError)(`Unsupported provider: ${r}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}var S0={},Am={},Kf={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.OperationKind=void 0;gu.computeOperations=a9e;var bc;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(bc||(gu.OperationKind=bc={}));function a9e(e,t,n){const r=mF(e.files),i=mF(t.files);let o=null;const s=t.files[0],a=[],l=s.name,c=r.get(l);if(c==null)throw new Error(`no file ${l} in old blockmap`);const u=i.get(l);let d=0;const{checksumToOffset:g,checksumToOldSize:p}=c9e(r.get(l),c.offset,n);let m=s.offset;for(let v=0;v<u.checksums.length;m+=u.sizes[v],v++){const y=u.sizes[v],I=u.checksums[v];let b=g.get(I);b!=null&&p.get(I)!==y&&(n.warn(`Checksum ("${I}") matches, but size differs (old: ${p.get(I)}, new: ${y})`),b=void 0),b===void 0?(d++,o!=null&&o.kind===bc.DOWNLOAD&&o.end===m?o.end+=y:(o={kind:bc.DOWNLOAD,start:m,end:m+y},pF(o,a,I,v))):o!=null&&o.kind===bc.COPY&&o.end===b?o.end+=y:(o={kind:bc.COPY,start:b,end:b+y},pF(o,a,I,v))}return d>0&&n.info(`File${s.name==="file"?"":" "+s.name} has ${d} changed blocks`),a}const l9e=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function pF(e,t,n,r){if(l9e&&t.length!==0){const i=t[t.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const o=[i.start,i.end,e.start,e.end].reduce((s,a)=>s<a?s:a);throw new Error(`operation (block index: ${r}, checksum: ${n}, kind: ${bc[e.kind]}) overlaps previous operation (checksum: ${n}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-o} until ${i.end-o} and ${e.start-o} until ${e.end-o}`)}}t.push(e)}function c9e(e,t,n){const r=new Map,i=new Map;let o=t;for(let s=0;s<e.checksums.length;s++){const a=e.checksums[s],l=e.sizes[s],c=i.get(a);if(c===void 0)r.set(a,o),i.set(a,l);else if(n.debug!=null){const u=c===l?"(same size)":`(size: ${c}, this size: ${l})`;n.debug(`${a} duplicated in blockmap ${u}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=l}return{checksumToOffset:r,checksumToOldSize:i}}function mF(e){const t=new Map;for(const n of e)t.set(n.name,n);return t}Object.defineProperty(Kf,"__esModule",{value:!0});Kf.DataSplitter=void 0;Kf.copyData=_$;const Ky=hr,u9e=Rn,d9e=Pl,f9e=gu,yF=Buffer.from(`\r
\r
`);var Ka;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(Ka||(Ka={}));function _$(e,t,n,r,i){const o=(0,u9e.createReadStream)("",{fd:n,autoClose:!1,start:e.start,end:e.end-1});o.on("error",r),o.once("end",i),o.pipe(t,{end:!1})}class g9e extends d9e.Writable{constructor(t,n,r,i,o,s){super(),this.out=t,this.options=n,this.partIndexToTaskIndex=r,this.partIndexToLength=o,this.finishHandler=s,this.partIndex=-1,this.headerListBuffer=null,this.readState=Ka.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,n,r){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(r).catch(r)}async handleData(t){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,Ky.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=r,n=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=r,await this.processPartData(t,0,r),n=r}if(n!==t.length){if(this.readState===Ka.HEADER){const r=this.searchHeaderListEnd(t,n);if(r===-1)return;n=r,this.readState=Ka.BODY,this.headerListBuffer=null}for(;;){if(this.readState===Ka.BODY)this.readState=Ka.INIT;else{this.partIndex++;let s=this.partIndexToTaskIndex.get(this.partIndex);if(s==null)if(this.isFinished)s=this.options.end;else throw(0,Ky.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<s)await this.copyExistingData(a,s);else if(a>s)throw(0,Ky.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(t,n),n===-1){this.readState=Ka.HEADER;return}}const r=this.partIndexToLength[this.partIndex],i=n+r,o=Math.min(i,t.length);if(await this.processPartStarted(t,n,o),this.remainingPartDataCount=r-(o-n),this.remainingPartDataCount>0)return;if(n=i+this.boundaryLength,n>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,n){return new Promise((r,i)=>{const o=()=>{if(t===n){r();return}const s=this.options.tasks[t];if(s.kind!==f9e.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}_$(s,this.out,this.options.oldFileFd,i,()=>{t++,o()})};o()})}searchHeaderListEnd(t,n){const r=t.indexOf(yF,n);if(r!==-1)return r+yF.length;const i=n===0?t:t.slice(n);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,Ky.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,n,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,n,r)}processPartData(t,n,r){this.actualPartLength+=r-n;const i=this.out;return i.write(n===0&&t.length===r?t:t.slice(n,r))?Promise.resolve():new Promise((o,s)=>{i.on("error",s),i.once("drain",()=>{i.removeListener("error",s),o()})})}}Kf.DataSplitter=g9e;var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.executeTasksUsingMultipleRangeRequests=h9e;_0.checkIsRangesSupported=zB;const $B=hr,IF=Kf,vF=gu;function h9e(e,t,n,r,i){const o=s=>{if(s>=t.length){e.fileMetadataBuffer!=null&&n.write(e.fileMetadataBuffer),n.end();return}const a=s+1e3;p9e(e,{tasks:t,start:s,end:Math.min(t.length,a),oldFileFd:r},n,()=>o(a),i)};return o}function p9e(e,t,n,r,i){let o="bytes=",s=0;const a=new Map,l=[];for(let d=t.start;d<t.end;d++){const g=t.tasks[d];g.kind===vF.OperationKind.DOWNLOAD&&(o+=`${g.start}-${g.end-1}, `,a.set(s,d),s++,l.push(g.end-g.start))}if(s<=1){const d=g=>{if(g>=t.end){r();return}const p=t.tasks[g++];if(p.kind===vF.OperationKind.COPY)(0,IF.copyData)(p,n,t.oldFileFd,i,()=>d(g));else{const m=e.createRequestOptions();m.headers.Range=`bytes=${p.start}-${p.end-1}`;const v=e.httpExecutor.createRequest(m,y=>{zB(y,i)&&(y.pipe(n,{end:!1}),y.once("end",()=>d(g)))});e.httpExecutor.addErrorAndTimeoutHandlers(v,i),v.end()}};d(t.start);return}const c=e.createRequestOptions();c.headers.Range=o.substring(0,o.length-2);const u=e.httpExecutor.createRequest(c,d=>{if(!zB(d,i))return;const g=(0,$B.safeGetHeader)(d,"content-type"),p=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(g);if(p==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${g}"`));return}const m=new IF.DataSplitter(n,t,a,p[1]||p[2],l,r);m.on("error",i),d.pipe(m),d.on("end",()=>{setTimeout(()=>{u.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(u,i),u.end()}function zB(e,t){if(e.statusCode>=400)return t((0,$B.createHttpError)(e)),!1;if(e.statusCode!==206){const n=(0,$B.safeGetHeader)(e,"accept-ranges");if(n==null||n==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}var w0={};Object.defineProperty(w0,"__esModule",{value:!0});w0.ProgressDifferentialDownloadCallbackTransform=void 0;const m9e=Pl;var ld;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(ld||(ld={}));class y9e extends m9e.Transform{constructor(t,n,r){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=ld.COPY,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==ld.COPY){r(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}beginFileCopy(){this.operationType=ld.COPY}beginRangeDownload(){this.operationType=ld.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}w0.ProgressDifferentialDownloadCallbackTransform=y9e;Object.defineProperty(Am,"__esModule",{value:!0});Am.DifferentialDownloader=void 0;const Vg=hr,v_=$l,I9e=Rn,v9e=Kf,C9e=Sr,My=gu,CF=_0,b9e=w0;class A9e{constructor(t,n,r){this.blockAwareFileInfo=t,this.httpExecutor=n,this.options=r,this.fileMetadataBuffer=null,this.logger=r.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,Vg.configureRequestUrl)(this.options.newUrl,t),(0,Vg.configureRequestOptions)(t),t}doDownload(t,n){if(t.version!==n.version)throw new Error(`version is different (${t.version} - ${n.version}), full download is required`);const r=this.logger,i=(0,My.computeOperations)(t,n,r);r.debug!=null&&r.debug(JSON.stringify(i,null,2));let o=0,s=0;for(const l of i){const c=l.end-l.start;l.kind===My.OperationKind.DOWNLOAD?o+=c:s+=c}const a=this.blockAwareFileInfo.size;if(o+s+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error(`Internal error, size mismatch: downloadSize: ${o}, copySize: ${s}, newSize: ${a}`);return r.info(`Full: ${bF(a)}, To download: ${bF(o)} (${Math.round(o/(a/100))}%)`),this.downloadFile(i)}downloadFile(t){const n=[],r=()=>Promise.all(n.map(i=>(0,v_.close)(i.descriptor).catch(o=>{this.logger.error(`cannot close file "${i.path}": ${o}`)})));return this.doDownloadFile(t,n).then(r).catch(i=>r().catch(o=>{try{this.logger.error(`cannot close files: ${o}`)}catch(s){try{console.error(s)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,n){const r=await(0,v_.open)(this.options.oldFile,"r");n.push({descriptor:r,path:this.options.oldFile});const i=await(0,v_.open)(this.options.newFile,"w");n.push({descriptor:i,path:this.options.newFile});const o=(0,I9e.createWriteStream)(this.options.newFile,{fd:i});await new Promise((s,a)=>{const l=[];let c;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const I=[];let b=0;for(const N of t)N.kind===My.OperationKind.DOWNLOAD&&(I.push(N.end-N.start),b+=N.end-N.start);const A={expectedByteCounts:I,grandTotal:b};c=new b9e.ProgressDifferentialDownloadCallbackTransform(A,this.options.cancellationToken,this.options.onProgress),l.push(c)}const u=new Vg.DigestTransform(this.blockAwareFileInfo.sha512);u.isValidateOnEnd=!1,l.push(u),o.on("finish",()=>{o.close(()=>{n.splice(1,1);try{u.validate()}catch(I){a(I);return}s(void 0)})}),l.push(o);let d=null;for(const I of l)I.on("error",a),d==null?d=I:d=d.pipe(I);const g=l[0];let p;if(this.options.isUseMultipleRangeRequest){p=(0,CF.executeTasksUsingMultipleRangeRequests)(this,t,g,r,a),p(0);return}let m=0,v=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const y=this.createRequestOptions();y.redirect="manual",p=I=>{var b,A;if(I>=t.length){this.fileMetadataBuffer!=null&&g.write(this.fileMetadataBuffer),g.end();return}const N=t[I++];if(N.kind===My.OperationKind.COPY){c&&c.beginFileCopy(),(0,v9e.copyData)(N,g,r,a,()=>p(I));return}const L=`bytes=${N.start}-${N.end-1}`;y.headers.range=L,(A=(b=this.logger)===null||b===void 0?void 0:b.debug)===null||A===void 0||A.call(b,`download range: ${L}`),c&&c.beginRangeDownload();const G=this.httpExecutor.createRequest(y,W=>{W.on("error",a),W.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),W.statusCode>=400&&a((0,Vg.createHttpError)(W)),W.pipe(g,{end:!1}),W.once("end",()=>{c&&c.endRangeDownload(),++m===100?(m=0,setTimeout(()=>p(I),1e3)):p(I)})});G.on("redirect",(W,j,O)=>{this.logger.info(`Redirect to ${S9e(O)}`),v=O,(0,Vg.configureRequestUrl)(new C9e.URL(v),y),G.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(G,a),G.end()},p(0)})}async readRemoteBytes(t,n){const r=Buffer.allocUnsafe(n+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${n}`;let o=0;if(await this.request(i,s=>{s.copy(r,o),o+=s.length}),o!==r.length)throw new Error(`Received data length ${o} is not equal to expected ${r.length}`);return r}request(t,n){return new Promise((r,i)=>{const o=this.httpExecutor.createRequest(t,s=>{(0,CF.checkIsRangesSupported)(s,i)&&(s.on("error",i),s.on("aborted",()=>{i(new Error("response has been aborted by the server"))}),s.on("data",n),s.on("end",()=>r()))});this.httpExecutor.addErrorAndTimeoutHandlers(o,i),o.end()})}}Am.DifferentialDownloader=A9e;function bF(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function S9e(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(S0,"__esModule",{value:!0});S0.GenericDifferentialDownloader=void 0;const _9e=Am;class w9e extends _9e.DifferentialDownloader{download(t,n){return this.doDownload(t,n)}}S0.GenericDifferentialDownloader=w9e;var AF;function j1(){if(AF)return cc;AF=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.NoOpLogger=cc.AppUpdater=void 0;const e=hr,t=Ns,n=Ri,r=zc,i=$l,o=Rr,s=f0,a=mt,l=m$,c=Cm,u=I0,d=y$,g=bm,p=Mf(),m=v0,v=RC,y=mo,I=S0;let b=class w$ extends r.EventEmitter{get channel(){return this._channel}set channel(G){if(this._channel!=null){if(typeof G!="string")throw(0,e.newError)(`Channel must be a string, but got: ${G}`,"ERR_UPDATER_INVALID_CHANNEL");if(G.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=G,this.allowDowngrade=!0}addAuthHeader(G){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:G})}get netSession(){return(0,d.getNetSession)()}get logger(){return this._logger}set logger(G){this._logger=G??new N}set updateConfigPath(G){this.clientPromise=null,this._appUpdateConfigPath=G,this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig())}constructor(G,W){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new p.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new s.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new s.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",Ce=>{this._logger.error(`Error: ${Ce.stack||Ce.message}`)}),W==null?(this.app=new u.ElectronAppAdapter,this.httpExecutor=new d.ElectronHttpExecutor((Ce,Ue)=>this.emit("login",Ce,Ue))):(this.app=W,this.httpExecutor=null);const j=this.app.version,O=(0,l.parse)(j);if(O==null)throw(0,e.newError)(`App version is not a valid semver version: "${j}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=O,this.allowPrerelease=A(O),G!=null&&(this.setFeedURL(G),typeof G!="string"&&G.requestHeaders&&(this.requestHeaders=G.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(G){const W=this.createProviderRuntimeOptions();let j;typeof G=="string"?j=new g.GenericProvider({provider:"generic",url:G},this,{...W,isUseMultipleRangeRequest:(0,m.isUrlProbablySupportMultiRangeRequests)(G)}):j=(0,m.createClient)(G,this,W),this.clientPromise=Promise.resolve(j)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let G=this.checkForUpdatesPromise;if(G!=null)return this._logger.info("Checking for update (already in progress)"),G;const W=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),G=this.doCheckForUpdates().then(j=>(W(),j)).catch(j=>{throw W(),this.emit("error",j,`Cannot check for updates: ${(j.stack||j).toString()}`),j}),this.checkForUpdatesPromise=G,G}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(G){return this.checkForUpdates().then(W=>W!=null&&W.downloadPromise?(W.downloadPromise.then(()=>{const j=w$.formatDownloadNotification(W.updateInfo.version,this.app.name,G);new J.Notification(j).show()}),W):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),W))}static formatDownloadNotification(G,W,j){return j==null&&(j={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),j={title:j.title.replace("{appName}",W).replace("{version}",G),body:j.body.replace("{appName}",W).replace("{version}",G)},j}async isStagingMatch(G){const W=G.stagingPercentage;let j=W;if(j==null)return!0;if(j=parseInt(j,10),isNaN(j))return this._logger.warn(`Staging percentage is NaN: ${W}`),!0;j=j/100;const O=await this.stagingUserIdPromise.value,Ue=e.UUID.parse(O).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${j}, percentage: ${Ue}, user id: ${O}`),Ue<j}computeFinalHeaders(G){return this.requestHeaders!=null&&Object.assign(G,this.requestHeaders),G}async isUpdateAvailable(G){const W=(0,l.parse)(G.version);if(W==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${G.version}"`,"ERR_UPDATER_INVALID_VERSION");const j=this.currentVersion;if((0,l.eq)(W,j))return!1;const O=G==null?void 0:G.minimumSystemVersion,Ce=(0,n.release)();if(O)try{if((0,l.lt)(Ce,O))return this._logger.info(`Current OS version ${Ce} is less than the minimum OS version required ${O} for version ${Ce}`),!1}catch(Ee){this._logger.warn(`Failed to compare current OS version(${Ce}) with minimum OS version(${O}): ${(Ee.message||Ee).toString()}`)}if(!await this.isStagingMatch(G))return!1;const $e=(0,l.gt)(W,j),ze=(0,l.lt)(W,j);return $e?!0:this.allowDowngrade&&ze}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(j=>(0,m.createClient)(j,this,this.createProviderRuntimeOptions())));const G=await this.clientPromise,W=await this.stagingUserIdPromise.value;return G.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":W})),{info:await G.getLatestVersion(),provider:G}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const G=await this.getUpdateInfoAndProvider(),W=G.info;if(!await this.isUpdateAvailable(W))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${W.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",W),{versionInfo:W,updateInfo:W};this.updateInfoAndProvider=G,this.onUpdateAvailable(W);const j=new e.CancellationToken;return{versionInfo:W,updateInfo:W,cancellationToken:j,downloadPromise:this.autoDownload?this.downloadUpdate(j):null}}onUpdateAvailable(G){this._logger.info(`Found version ${G.version} (url: ${(0,e.asArray)(G.files).map(W=>W.url).join(", ")})`),this.emit("update-available",G)}downloadUpdate(G=new e.CancellationToken){const W=this.updateInfoAndProvider;if(W==null){const O=new Error("Please check update first");return this.dispatchError(O),Promise.reject(O)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,e.asArray)(W.info.files).map(O=>O.url).join(", ")}`);const j=O=>{if(!(O instanceof e.CancellationError))try{this.dispatchError(O)}catch(Ce){this._logger.warn(`Cannot dispatch error event: ${Ce.stack||Ce}`)}return O};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:W,requestHeaders:this.computeRequestHeaders(W.provider),cancellationToken:G,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(O=>{throw j(O)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(G){this.emit("error",G,(G.stack||G).toString())}dispatchUpdateDownloaded(G){this.emit(p.UPDATE_DOWNLOADED,G)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,o.load)(await(0,i.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(G){const W=G.fileExtraDownloadHeaders;if(W!=null){const j=this.requestHeaders;return j==null?W:{...W,...j}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const G=a.join(this.app.userDataPath,".updaterId");try{const j=await(0,i.readFile)(G,"utf-8");if(e.UUID.check(j))return j;this._logger.warn(`Staging user id file exists, but content was invalid: ${j}`)}catch(j){j.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${j}`)}const W=e.UUID.v5((0,t.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${W}`);try{await(0,i.outputFile)(G,W)}catch(j){this._logger.warn(`Couldn't write out staging user ID: ${j}`)}return W}get isAddNoCacheQuery(){const G=this.requestHeaders;if(G==null)return!0;for(const W of Object.keys(G)){const j=W.toLowerCase();if(j==="authorization"||j==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let G=this.downloadedUpdateHelper;if(G==null){const W=(await this.configOnDisk.value).updaterCacheDirName,j=this._logger;W==null&&j.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const O=a.join(this.app.baseCachePath,W||this.app.name);j.debug!=null&&j.debug(`updater cache dir: ${O}`),G=new c.DownloadedUpdateHelper(O),this.downloadedUpdateHelper=G}return G}async executeDownload(G){const W=G.fileInfo,j={headers:G.downloadUpdateOptions.requestHeaders,cancellationToken:G.downloadUpdateOptions.cancellationToken,sha2:W.info.sha2,sha512:W.info.sha512};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(j.onProgress=pe=>this.emit(p.DOWNLOAD_PROGRESS,pe));const O=G.downloadUpdateOptions.updateInfoAndProvider.info,Ce=O.version,Ue=W.packageInfo;function $e(){const pe=decodeURIComponent(G.fileInfo.url.pathname);return pe.endsWith(`.${G.fileExtension}`)?a.basename(pe):G.fileInfo.info.url}const ze=await this.getOrCreateDownloadHelper(),Ee=ze.cacheDirForPendingUpdate;await(0,i.mkdir)(Ee,{recursive:!0});const P=$e();let oe=a.join(Ee,P);const X=Ue==null?null:a.join(Ee,`package-${Ce}${a.extname(Ue.path)||".7z"}`),M=async pe=>(await ze.setDownloadedFile(oe,X,O,W,P,pe),await G.done({...O,downloadedFile:oe}),X==null?[oe]:[oe,X]),D=this._logger,ue=await ze.validateDownloadedPath(oe,O,W,D);if(ue!=null)return oe=ue,await M(!1);const Re=async()=>(await ze.clear().catch(()=>{}),await(0,i.unlink)(oe).catch(()=>{})),Oe=await(0,c.createTempUpdateFile)(`temp-${P}`,Ee,D);try{await G.task(Oe,j,X,Re),await(0,e.retry)(()=>(0,i.rename)(Oe,oe),60,500,0,0,pe=>pe instanceof Error&&/^EBUSY:/.test(pe.message))}catch(pe){throw await Re(),pe instanceof e.CancellationError&&(D.info("cancelled"),this.emit("update-cancelled",O)),pe}return D.info(`New version ${Ce} has been downloaded to ${oe}`),await M(!0)}async differentialDownloadInstaller(G,W,j,O,Ce){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const Ue=(0,y.blockmapFiles)(G.url,this.app.version,W.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${Ue[0]}", new: ${Ue[1]})`);const $e=async P=>{const oe=await this.httpExecutor.downloadToBuffer(P,{headers:W.requestHeaders,cancellationToken:W.cancellationToken});if(oe==null||oe.length===0)throw new Error(`Blockmap "${P.href}" is empty`);try{return JSON.parse((0,v.gunzipSync)(oe).toString())}catch(X){throw new Error(`Cannot parse blockmap "${P.href}", error: ${X}`)}},ze={newUrl:G.url,oldFile:a.join(this.downloadedUpdateHelper.cacheDir,Ce),logger:this._logger,newFile:j,isUseMultipleRangeRequest:O.isUseMultipleRangeRequest,requestHeaders:W.requestHeaders,cancellationToken:W.cancellationToken};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(ze.onProgress=P=>this.emit(p.DOWNLOAD_PROGRESS,P));const Ee=await Promise.all(Ue.map(P=>$e(P)));return await new I.GenericDifferentialDownloader(G.info,this.httpExecutor,ze).download(Ee[0],Ee[1]),!1}catch(Ue){if(this._logger.error(`Cannot download differentially, fallback to full download: ${Ue.stack||Ue}`),this._testOnlyOptions!=null)throw Ue;return!0}}};cc.AppUpdater=b;function A(L){const G=(0,l.prerelease)(L);return G!=null&&G.length>0}class N{info(G){}warn(G){}error(G){}}return cc.NoOpLogger=N,cc}var SF;function Sm(){if(SF)return Tg;SF=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.BaseUpdater=void 0;const e=Yl,t=j1();let n=class extends t.AppUpdater{constructor(i,o){super(i,o),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(i=!1,o=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(i,i?o:this.autoRunAppAfterInstall)?setImmediate(()=>{J.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(i){return super.executeDownload({...i,done:o=>(this.dispatchUpdateDownloaded(o),this.addQuitHandler(),Promise.resolve())})}install(i=!1,o=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const s=this.downloadedUpdateHelper,a=s&&s.file?process.platform==="linux"?s.file.replace(/ /g,"\\ "):s.file:null,l=s==null?null:s.downloadedFileInfo;if(a==null||l==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${i}, isForceRunAfter: ${o}`),this.doInstall({installerPath:a,isSilent:i,isForceRunAfter:o,isAdminRightsRequired:l.isAdminRightsRequired})}catch(c){return this.dispatchError(c),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(i=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(i!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${i}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:i}=this.app,o=`"${i} would like to update"`,s=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),a=[s];return/kdesudo/i.test(s)?(a.push("--comment",o),a.push("-c")):/gksudo/i.test(s)?a.push("--message",o):/pkexec/i.test(s)&&a.push("--disable-internal-agent"),a.join(" ")}spawnSyncLog(i,o=[],s={}){return this._logger.info(`Executing: ${i} with args: ${o}`),(0,e.spawnSync)(i,o,{env:{...process.env,...s},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(i,o=[],s=void 0,a="ignore"){return this._logger.info(`Executing: ${i} with args: ${o}`),new Promise((l,c)=>{try{const u={stdio:a,env:s,detached:!0},d=(0,e.spawn)(i,o,u);d.on("error",g=>{c(g)}),d.unref(),d.pid!==void 0&&l(!0)}catch(u){c(u)}})}};return Tg.BaseUpdater=n,Tg}var Og={},_m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const Vu=$l,B9e=Am,E9e=RC;class R9e extends B9e.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,n=t.size,r=n-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(r,n-1);const i=B$(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await G9e(this.options.oldFile),i)}}_m.FileWithEmbeddedBlockMapDifferentialDownloader=R9e;function B$(e){return JSON.parse((0,E9e.inflateRawSync)(e).toString())}async function G9e(e){const t=await(0,Vu.open)(e,"r");try{const n=(await(0,Vu.fstat)(t)).size,r=Buffer.allocUnsafe(4);await(0,Vu.read)(t,r,0,r.length,n-r.length);const i=Buffer.allocUnsafe(r.readUInt32BE(0));return await(0,Vu.read)(t,i,0,i.length,n-r.length-i.length),await(0,Vu.close)(t),B$(i)}catch(n){throw await(0,Vu.close)(t),n}}var _F;function wF(){if(_F)return Og;_F=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.AppImageUpdater=void 0;const e=hr,t=Yl,n=$l,r=Rn,i=mt,o=Sm(),s=_m,a=Mf(),l=pr;let c=class extends o.BaseUpdater{constructor(d,g){super(d,g)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(d){const g=d.updateInfoAndProvider.provider,p=(0,l.findFile)(g.resolveFiles(d.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:d,task:async(m,v)=>{const y=process.env.APPIMAGE;if(y==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let I=!1;try{const b={newUrl:p.url,oldFile:y,logger:this._logger,newFile:m,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:d.requestHeaders,cancellationToken:d.cancellationToken};this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(b.onProgress=A=>this.emit(a.DOWNLOAD_PROGRESS,A)),await new s.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,b).download()}catch(b){this._logger.error(`Cannot download differentially, fallback to full download: ${b.stack||b}`),I=process.platform==="linux"}I&&await this.httpExecutor.download(p.url,m,v),await(0,n.chmod)(m,493)}})}doInstall(d){const g=process.env.APPIMAGE;if(g==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,r.unlinkSync)(g);let p;const m=i.basename(g);i.basename(d.installerPath)===m||!/\d+\.\d+\.\d+/.test(m)?p=g:p=i.join(i.dirname(g),i.basename(d.installerPath)),(0,t.execFileSync)("mv",["-f",d.installerPath,p]),p!==g&&this.emit("appimage-filename-updated",p);const v={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return d.isForceRunAfter?this.spawnLog(p,[],v):(v.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,t.execFileSync)(p,[],{env:v})),!0}};return Og.AppImageUpdater=c,Og}var Hg={},BF;function EF(){if(BF)return Hg;BF=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.DebUpdater=void 0;const e=Sm(),t=Mf(),n=pr;let r=class extends e.BaseUpdater{constructor(o,s){super(o,s)}doDownloadUpdate(o){const s=o.updateInfoAndProvider.provider,a=(0,n.findFile)(s.resolveFiles(o.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:a,downloadUpdateOptions:o,task:async(l,c)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(c.onProgress=u=>this.emit(t.DOWNLOAD_PROGRESS,u)),await this.httpExecutor.download(a.url,l,c)}})}doInstall(o){const s=this.wrapSudo(),a=/pkexec/i.test(s)?"":'"',l=["dpkg","-i",o.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(s,[`${a}/bin/bash`,"-c",`'${l.join(" ")}'${a}`]),o.isForceRunAfter&&this.app.relaunch(),!0}};return Hg.DebUpdater=r,Hg}var Fg={},RF;function GF(){if(RF)return Fg;RF=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.RpmUpdater=void 0;const e=Sm(),t=Mf(),n=pr;let r=class extends e.BaseUpdater{constructor(o,s){super(o,s)}doDownloadUpdate(o){const s=o.updateInfoAndProvider.provider,a=(0,n.findFile)(s.resolveFiles(o.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:a,downloadUpdateOptions:o,task:async(l,c)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(c.onProgress=u=>this.emit(t.DOWNLOAD_PROGRESS,u)),await this.httpExecutor.download(a.url,l,c)}})}doInstall(o){const s=o.installerPath,a=this.wrapSudo(),l=/pkexec/i.test(a)?"":'"',c=this.spawnSyncLog("which zypper");let u;return c?u=[c,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:u=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(a,[`${l}/bin/bash`,"-c",`'${u.join(" ")}'${l}`]),o.isForceRunAfter&&this.app.relaunch(),!0}};return Fg.RpmUpdater=r,Fg}var xg={},NF;function ZF(){if(NF)return xg;NF=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.MacUpdater=void 0;const e=hr,t=$l,n=Rn,r=mt,i=oR,o=j1(),s=pr,a=Yl,l=Ns;let c=class extends o.AppUpdater{constructor(d,g){super(d,g),this.nativeUpdater=J.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(d){this._logger.debug!=null&&this._logger.debug(d)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(d=>{d&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(d){let g=d.updateInfoAndProvider.provider.resolveFiles(d.updateInfoAndProvider.info);const p=this._logger,m="sysctl.proc_translated";let v=!1;try{this.debug("Checking for macOS Rosetta environment"),v=(0,a.execFileSync)("sysctl",[m],{encoding:"utf8"}).includes(`${m}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${v})`)}catch(L){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${L}`)}let y=!1;try{this.debug("Checking for arm64 in uname");const G=(0,a.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${G}`),y=y||G}catch(L){p.warn(`uname shell command to check for arm64 failed: ${L}`)}y=y||process.arch==="arm64"||v;const I=L=>{var G;return L.url.pathname.includes("arm64")||((G=L.info.url)===null||G===void 0?void 0:G.includes("arm64"))};y&&g.some(I)?g=g.filter(L=>y===I(L)):g=g.filter(L=>!I(L));const b=(0,s.findFile)(g,"zip",["pkg","dmg"]);if(b==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(g)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const A=d.updateInfoAndProvider.provider,N="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:b,downloadUpdateOptions:d,task:async(L,G)=>{const W=r.join(this.downloadedUpdateHelper.cacheDir,N),j=()=>(0,t.pathExistsSync)(W)?!d.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let O=!0;j()&&(O=await this.differentialDownloadInstaller(b,d,L,A,N)),O&&await this.httpExecutor.download(b.url,L,G)},done:L=>{if(!d.disableDifferentialDownload)try{const G=r.join(this.downloadedUpdateHelper.cacheDir,N);(0,n.copyFileSync)(L.downloadedFile,G)}catch(G){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${G.message}`)}return this.updateDownloaded(b,L)}})}async updateDownloaded(d,g){var p;const m=g.downloadedFile,v=(p=d.info.size)!==null&&p!==void 0?p:(await(0,t.stat)(m)).size,y=this._logger,I=`fileToProxy=${d.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${I})`),this.server=(0,i.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${I})`),this.server.on("close",()=>{y.info(`Proxy server for native Squirrel.Mac is closed (${I})`)});const b=A=>{const N=A.address();return typeof N=="string"?N:`http://127.0.0.1:${N==null?void 0:N.port}`};return await new Promise((A,N)=>{const L=(0,l.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),G=Buffer.from(`autoupdater:${L}`,"ascii"),W=`/${(0,l.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(j,O)=>{const Ce=j.url;if(y.info(`${Ce} requested`),Ce==="/"){if(!j.headers.authorization||j.headers.authorization.indexOf("Basic ")===-1){O.statusCode=401,O.statusMessage="Invalid Authentication Credentials",O.end(),y.warn("No authenthication info");return}const ze=j.headers.authorization.split(" ")[1],Ee=Buffer.from(ze,"base64").toString("ascii"),[P,oe]=Ee.split(":");if(P!=="autoupdater"||oe!==L){O.statusCode=401,O.statusMessage="Invalid Authentication Credentials",O.end(),y.warn("Invalid authenthication credentials");return}const X=Buffer.from(`{ "url": "${b(this.server)}${W}" }`);O.writeHead(200,{"Content-Type":"application/json","Content-Length":X.length}),O.end(X);return}if(!Ce.startsWith(W)){y.warn(`${Ce} requested, but not supported`),O.writeHead(404),O.end();return}y.info(`${W} requested by Squirrel.Mac, pipe ${m}`);let Ue=!1;O.on("finish",()=>{Ue||(this.nativeUpdater.removeListener("error",N),A([]))});const $e=(0,n.createReadStream)(m);$e.on("error",ze=>{try{O.end()}catch(Ee){y.warn(`cannot end response: ${Ee}`)}Ue=!0,this.nativeUpdater.removeListener("error",N),N(new Error(`Cannot pipe "${m}": ${ze}`))}),O.writeHead(200,{"Content-Type":"application/zip","Content-Length":v}),$e.pipe(O)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${I})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${b(this.server)}, ${I})`),this.nativeUpdater.setFeedURL({url:b(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${G.toString("base64")}`}}),this.dispatchUpdateDownloaded(g),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",N),this.nativeUpdater.checkForUpdates()):A([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return xg.MacUpdater=c,xg}var Lg={},Q1={};Object.defineProperty(Q1,"__esModule",{value:!0});Q1.verifySignature=Z9e;const TF=hr,E$=Yl,N9e=Ri,WF=mt;function Z9e(e,t,n){return new Promise((r,i)=>{const o=t.replace(/'/g,"''");n.info(`Verifying signature ${o}`),(0,E$.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${o}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(s,a,l)=>{var c;try{if(s!=null||l){C_(n,s,l,i),r(null);return}const u=T9e(a);if(u.Status===0){try{const m=WF.normalize(u.Path),v=WF.normalize(t);if(n.info(`LiteralPath: ${m}. Update Path: ${v}`),m!==v){C_(n,new Error(`LiteralPath of ${m} is different than ${v}`),l,i),r(null);return}}catch(m){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(c=m.message)!==null&&c!==void 0?c:m.stack}`)}const g=(0,TF.parseDn)(u.SignerCertificate.Subject);let p=!1;for(const m of e){const v=(0,TF.parseDn)(m);if(v.size?p=Array.from(v.keys()).every(I=>v.get(I)===g.get(I)):m===g.get("CN")&&(n.warn(`Signature validated using only CN ${m}. Please add your full Distinguished Name (DN) to publisherNames configuration`),p=!0),p){r(null);return}}}const d=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(u,(g,p)=>g==="RawData"?void 0:p,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${d}`),r(d)}catch(u){C_(n,u,null,i),r(null);return}})})}function T9e(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const n=t.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),t}function C_(e,t,n,r){if(W9e()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,E$.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&r(t),n&&r(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function W9e(){const e=N9e.release();return e.startsWith("6.")&&!e.startsWith("6.3")}var kF;function VF(){if(kF)return Lg;kF=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.NsisUpdater=void 0;const e=hr,t=mt,n=Sm(),r=_m,i=Mf(),o=pr,s=$l,a=Q1,l=Sr;let c=class extends n.BaseUpdater{constructor(d,g){super(d,g),this._verifyUpdateCodeSignature=(p,m)=>(0,a.verifySignature)(p,m,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(d){d&&(this._verifyUpdateCodeSignature=d)}doDownloadUpdate(d){const g=d.updateInfoAndProvider.provider,p=(0,o.findFile)(g.resolveFiles(d.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:d,fileInfo:p,task:async(m,v,y,I)=>{const b=p.packageInfo,A=b!=null&&y!=null;if(A&&d.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${d.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!A&&!d.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(A||d.disableDifferentialDownload||await this.differentialDownloadInstaller(p,d,m,g,e.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,m,v);const N=await this.verifySignature(m);if(N!=null)throw await I(),(0,e.newError)(`New version ${d.updateInfoAndProvider.info.version} is not signed by the application owner: ${N}`,"ERR_UPDATER_INVALID_SIGNATURE");if(A&&await this.differentialDownloadWebPackage(d,b,y,g))try{await this.httpExecutor.download(new l.URL(b.path),y,{headers:d.requestHeaders,cancellationToken:d.cancellationToken,sha512:b.sha512})}catch(L){try{await(0,s.unlink)(y)}catch{}throw L}}})}async verifySignature(d){let g;try{if(g=(await this.configOnDisk.value).publisherName,g==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(g)?g:[g],d)}doInstall(d){const g=["--updated"];d.isSilent&&g.push("/S"),d.isForceRunAfter&&g.push("--force-run"),this.installDirectory&&g.push(`/D=${this.installDirectory}`);const p=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;p!=null&&g.push(`--package-file=${p}`);const m=()=>{this.spawnLog(t.join(process.resourcesPath,"elevate.exe"),[d.installerPath].concat(g)).catch(v=>this.dispatchError(v))};return d.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),m(),!0):(this.spawnLog(d.installerPath,g).catch(v=>{const y=v.code;this._logger.info(`Cannot run installer: error code: ${y}, error message: "${v.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),y==="UNKNOWN"||y==="EACCES"?m():y==="ENOENT"?J.shell.openPath(d.installerPath).catch(I=>this.dispatchError(I)):this.dispatchError(v)}),!0)}async differentialDownloadWebPackage(d,g,p,m){if(g.blockMapSize==null)return!0;try{const v={newUrl:new l.URL(g.path),oldFile:t.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:m.isUseMultipleRangeRequest,cancellationToken:d.cancellationToken};this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(v.onProgress=y=>this.emit(i.DOWNLOAD_PROGRESS,y)),await new r.FileWithEmbeddedBlockMapDifferentialDownloader(g,this.httpExecutor,v).download()}catch(v){return this._logger.error(`Cannot download differentially, fallback to full download: ${v.stack||v}`),process.platform==="win32"}return!1}};return Lg.NsisUpdater=c,Lg}var OF;function Mf(){return OF||(OF=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.CancellationToken=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const t=hr;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});const n=$l,r=mt;var i=Sm();Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return i.BaseUpdater}});var o=j1();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return o.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return o.NoOpLogger}});var s=pr;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return s.Provider}});var a=wF();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return a.AppImageUpdater}});var l=EF();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return l.DebUpdater}});var c=GF();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return c.RpmUpdater}});var u=ZF();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return u.MacUpdater}});var d=VF();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return d.NsisUpdater}});let g;function p(){if(process.platform==="win32")g=new(VF()).NsisUpdater;else if(process.platform==="darwin")g=new(ZF()).MacUpdater;else{g=new(wF()).AppImageUpdater;try{const y=r.join(process.resourcesPath,"package-type");if(!(0,n.existsSync)(y))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const I=(0,n.readFileSync)(y).toString().trim();switch(console.info("Found package-type:",I),I){case"deb":g=new(EF()).DebUpdater;break;case"rpm":g=new(GF()).RpmUpdater;break;default:break}}catch(y){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",y.message)}}return g}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>g||p()}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class m{constructor(I){this.emitter=I}login(I){v(this.emitter,"login",I)}progress(I){v(this.emitter,e.DOWNLOAD_PROGRESS,I)}updateDownloaded(I){v(this.emitter,e.UPDATE_DOWNLOADED,I)}updateCancelled(I){v(this.emitter,"update-cancelled",I)}}e.UpdaterSignal=m;function v(y,I,b){y.on(I,b)}}(zS)),zS}var Dn=Mf(),k9e=wa,V9e=wG;function O9e(e,t){return e&&e.length?V9e(e,k9e(t)):[]}var H9e=O9e;const F9e=Ht(H9e),x9e=E("DOWNLOAD_PROGRESS"),L9e=E("UPDATE_DOWNLOADED");function JB(){return vt.windows()&&!vt.windowsStore()}function jB(){return vt.macOS()&&!vt.mas()}class Y9e extends zc{constructor(n,r){super();T(this,"options");T(this,"state","update-not-available");T(this,"updateInfo",null);T(this,"onUpdateAvailable",()=>{Dn.autoUpdater.removeListener("error",this.onUpdateError),Dn.autoUpdater.removeListener("update-not-available",this.onUpdateNotAvailable),J.dialog.showMessageBox({type:"info",buttons:["OK"],icon:Ah,message:"New Update available.",title:"New Update Available",detail:"The update will be downloaded automatically."})});T(this,"onUpdateNotAvailable",()=>{Dn.autoUpdater.removeListener("error",this.onUpdateError),Dn.autoUpdater.removeListener("update-available",this.onUpdateAvailable),J.dialog.showMessageBox({type:"info",buttons:["OK"],icon:Ah,message:"No update available.",title:"No Update Available",detail:`Version ${this.options.version} is the latest version.`})});T(this,"onUpdateError",(n,r)=>{Dn.autoUpdater.removeListener("update-not-available",this.onUpdateNotAvailable),Dn.autoUpdater.removeListener("update-available",this.onUpdateAvailable),J.dialog.showMessageBox({type:"warning",buttons:["OK"],icon:Ah,message:"There was an error checking for updates.",title:"Update Error",detail:r})});this.store=r,this.options=n,(JB()||jB())&&vt.production()&&(Dn.autoUpdater.autoInstallOnAppQuit=!1,this.handleEvents(),this.check({hidePopups:!0}),setInterval(()=>this.check({hidePopups:!0}),864e5))}handleEvents(){Dn.autoUpdater.on("checking-for-update",()=>{this.state="checking-for-update"}),Dn.autoUpdater.on("update-not-available",()=>{this.removeAnyUpdateDownloadedNotification(),this.state="update-not-available"}),Dn.autoUpdater.on("update-available",()=>{this.removeAnyUpdateDownloadedNotification(),this.state="update-available"}),Dn.autoUpdater.on("download-progress",n=>{this.store.dispatch(x9e(n))}),Dn.autoUpdater.on("update-downloaded",n=>{this.store.dispatch(L9e(n)),this.sendUpdateDownloadedNotification(n),this.updateInfo=n,this.state="update-downloaded"}),Dn.autoUpdater.on("error",()=>{this.state="update-not-available"})}restartConfirmed(){this.state==="update-downloaded"&&Dn.autoUpdater.quitAndInstall()}async check({hidePopups:n=!1}={}){if(vt.dev())return;if(this.state==="update-available"||this.state==="update-downloaded"){n||this.onUpdateAvailable();return}if(n||(Dn.autoUpdater.once("update-not-available",this.onUpdateNotAvailable),Dn.autoUpdater.once("update-available",this.onUpdateAvailable),Dn.autoUpdater.once("error",this.onUpdateError)),this.state==="checking-for-update")return;const r=[];try{const i=Dn.autoUpdater.configOnDisk,{path:o}=await i.value;o!=null&&Dn.autoUpdater.setFeedURL(X9e(o,J.app.runningUnderARM64Translation))}catch(i){r.push({sentryMessage:"Failed to remap electron-updater config",error:i})}try{await Dn.autoUpdater.checkForUpdates()}catch(i){r.push({sentryMessage:"Failed to get an update",error:i})}F9e(r.reverse(),({error:i})=>i.message).forEach(M9e)}sendUpdateDownloadedNotification(n){this.store.dispatch(CN.request({id:lk,force_to_do_action:!0,is_dismissible:!1,is_seen:!1,created_at:n!=null&&n.releaseDate?new Date(n.releaseDate):new Date,type:"medium",title:"New Termius version is available",body:"Version {version} is ready to install.",action:DCe,instant:!0,data:{version:(n==null?void 0:n.version)??null},source:"local"}))}restoreUpdateNotification(){(JB()||jB())&&vt.production()&&(this.removeAnyUpdateDownloadedNotification(),this.state==="update-downloaded"&&this.sendUpdateDownloadedNotification(this.updateInfo))}removeAnyUpdateDownloadedNotification(){this.store.dispatch(SD.request([lk]))}}const P9e="https://autoupdate.termius.com/";function X9e(e,t){return{provider:"generic",url:P9e+U9e(e,t)}}function U9e(e,t){var r;return((r=(t?K9e:D9e).get(e))==null?void 0:r.get(process.arch))??e}const D9e=new Map([["mac-universal",new Map([["x64","mac"],["arm64","mac-arm64"]])],["mac-beta-universal",new Map([["x64","mac-beta"],["arm64","mac-beta-arm64"]])]]),K9e=new Map([["mac",new Map([["x64","mac-arm64"]])],["mac-beta",new Map([["x64","mac-beta-arm64"]])]]);function R$(e){try{const t={};return"code"in e&&(t.code=e.code),"syscall"in e&&(t.syscall=e.syscall),"path"in e&&(t.filename=mt.posix.basename(mt.win32.basename(e.path??""))),e.message.startsWith("net::")&&(t.message=e.message),Object.keys(t).length!==0?t:void 0}catch{return}}function M9e({sentryMessage:e,error:t}){$9e(t)?En.info(e):En.exception(e,t);const n=R$(t);n!=null&&En.info("Additional error metadata",n)}function $9e(e){return["net::ERR_CONNECTION_CLOSED","net::ERR_CONNECTION_RESET","net::ERR_CONNECTION_TIMED_OUT","net::ERR_INTERNET_DISCONNECTED","net::ERR_NAME_NOT_RESOLVED","net::ERR_NETWORK_CHANGED","net::ERR_NETWORK_IO_SUSPENDED","net::ERR_TIMED_OUT"].includes(e.message)||z9e(e)}function z9e(e){const t=R$(e);return t!=null&&t.code==="ENOENT"&&t.filename==="app-update.yml"&&t.syscall==="open"}class HF extends Error{constructor(){super(...arguments);T(this,"name","BlackScreenMode")}}function*J9e(){const e=Date.now(),t=n=>{const i=(Date.now()-e)/1e3;i<5||(i<60?En.exception("Short-lived Black Screen Mode detected",new HF):En.exception("Black Screen Mode detected",new HF),n.preventDefault(),setTimeout(()=>J.app.exit(),5e3))};J.app.on("will-quit",t),yield*d5(j9e),J.app.removeListener("will-quit",t)}function j9e(e){return Q9e(e)||q9e(e)||e3e(e)||t3e(e)||n3e(e)}function Q9e({type:e}){return e===ZD.request.toString()}function q9e({type:e,payload:t}){return e===hN.toString()&&t===!0}function e3e({type:e,payload:t}){return e===vN.request.toString()&&t.dialog==="SignInScreen"}function t3e({type:e,payload:t}){return e===vN.request.toString()&&t.dialog==="DecryptionKeyNotFoundDialog"}function n3e({type:e,payload:t}){return e===vN.request.toString()&&t.dialog==="BlockAccess"}function _I(e){const t=Array.isArray(e)?e:[e].filter(Tl);t.every(({webContents:n})=>n.isDevToolsOpened())?t.forEach(({webContents:n})=>n.closeDevTools()):t.forEach(i3e)}function r3e(e){if(!e)return;const{webContents:t}=e,n=()=>{var r;(r=t.devToolsWebContents)==null||r.executeJavaScript("DevToolsAPI.enterInspectElementMode()")};t.isDevToolsOpened()?n():(t.once("devtools-opened",n),_I(e))}function i3e(e){e.webContents.openDevTools(H1e(e.id)?{mode:"detach"}:void 0)}const o3e=()=>{J.ipcMain.on("minimize",()=>{const e=J.BrowserWindow.getFocusedWindow();e==null||e.minimize()}),J.ipcMain.on("maximize",()=>{const e=J.BrowserWindow.getFocusedWindow();if(e!=null&&e.isMaximized()){e==null||e.unmaximize();return}e==null||e.maximize()}),J.ipcMain.on("fullscreen",()=>{const e=J.BrowserWindow.getFocusedWindow();e==null||e.setFullScreen(!(e!=null&&e.isFullScreen()))}),J.ipcMain.on("close",()=>{const e=J.BrowserWindow.getFocusedWindow();e==null||e.close()})};let q1=!1;function s3e(){return q1}function a3e(){q1=!0}J.app.on("before-quit",()=>{q1=!0});var l3e=Qp,c3e=F9,u3e=jp;function d3e(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=l3e(e,s);n(a,s)&&c3e(o,u3e(s,e),a)}return o}var f3e=d3e,g3e=IG,h3e=tN,p3e=UX,m3e=XX,y3e=Object.getOwnPropertySymbols,I3e=y3e?function(e){for(var t=[];e;)g3e(t,p3e(e)),e=h3e(e);return t}:m3e,v3e=I3e,C3e=PX,b3e=v3e,A3e=IN;function S3e(e){return C3e(e,A3e,b3e)}var _3e=S3e,w3e=Of,B3e=wa,E3e=f3e,R3e=_3e;function G3e(e,t){if(e==null)return{};var n=w3e(R3e(e),function(r){return[r]});return t=B3e(t),E3e(e,n,function(r,i){return t(r,i[0])})}var N3e=G3e;const Z3e=Ht(N3e),T3e=Symbol.for("preloadedModulesKey");function W3e(e){Bs(!e.startsWith(".")),Bs(typeof window<"u");const t=window[T3e].get(e);return Bs(t),t}function k3e(){let e=J.app;if((process.type==="renderer"||!e)&&(e=W3e("@electron/remote").app),vt.mas())return"App Store";if(vt.windowsStore())return"Windows Store";if(vt.linux()){const t=e.getPath("exe");return t.startsWith("/snap/")?"Snapcraft":t.startsWith("/opt/")?"Debian Package":"Custom Linux Distribution"}return"Website"}const V3e=k3e(),O3e=vt.sandbox()||V3e==="Snapcraft";vt.linux();const H3e={copyFromTerminal:{callbackName:"copyFromTerminal",actionName:"Copy from Terminal"},pasteToTerminal:{callbackName:"pasteToTerminal",actionName:"Paste to Terminal"},selectAllInTerminal:{callbackName:"selectAllInTerminal",actionName:"Select All in Terminal"},terminals:{callbackName:"switchToTerminals",actionName:"Open Hosts Page"},...O3e?{}:{localTerminal:{callbackName:"openLocalTerminal",actionName:"Open Local Terminal"}},serialConnection:{callbackName:"openSerialConnection",actionName:"Open Serial Connection"},close:{callbackName:"closeTab",actionName:"Close Tab"},bottom:{callbackName:"switchBottomTab",actionName:"Next Tab"},top:{callbackName:"switchTopTab",actionName:"Previous Tab"},forwarding:{callbackName:"switchToPortForwarding",actionName:"Open Port Forwarding"},commandPalette:{callbackName:"openCommandPalette",actionName:"Open Command Palette"},jumpTo:{callbackName:"openJumpTo",actionName:"Jump To"},newTab:{callbackName:"openNewTab",actionName:"New Tab"},clearTerminalBuffer:{callbackName:"clearTerminalBuffer",actionName:"Clear Terminal Buffer"},openTerminalSearch:{callbackName:"openTerminalSearch",actionName:"Open Terminal Search"},toggleSidepanel:{callbackName:"toggleSidepanel",actionName:"Show Terminal Side-panel"},toggleSplitViewBroadcastMode:{callbackName:"toggleSplitViewBroadcastMode",actionName:"Switch the Broadcast Mode"},snippets:{callbackName:"switchToSnippets",actionName:"Open Snippets"}};function F3e(){return H3e}function x3e(e){return F3e().hasOwnProperty(e)}function FF(e,t){var n;return(n=e.shortcuts)==null?void 0:n.shortcuts.find(({type:r})=>r===t&&x3e(t))}function L3e(e){return e.shortcuts??void 0}var Y3e=D9,P3e=jG,X3e=su,b_=nm,U3e=BG,D3e=X3e(function(e,t){var n=U3e(t);return b_(n)&&(n=void 0),b_(e)?Y3e(e,P3e(t,1,b_,!0),void 0,n):[]}),K3e=D3e;const M3e=Ht(K3e);process.env.SPLITIO_AUTHORIZATION_KEY;const $y="disabled",QB="sign_up_email_verification",$3e="team_trial_grant_access",z3e="Choose_Plan_Screen_Desktop",J3e="helium_autocomplete_validation",j3e={[QB]:{baseline:"Baseline",email_verification:"EmailVerification",control_segment:"Control",[$y]:"Disabled"},[$3e]:{baseline:"Baseline",new_grant_access:"NewGrantAccess",[$y]:"Disabled"},[z3e]:{baseline:"Baseline",newChoosePlanFlow:"NewChoosePlanFlow",[$y]:"Disabled"},[J3e]:{hydrogen:"AutocompleteHydrogen",helium:"AutocompleteHelium",heliumNoArrowUp:"AutocompleteHeliumNoArrowUp",[$y]:"Disabled"}};class G${constructor(t,n,r=!1){T(this,"label");T(this,"defaultValue");T(this,"keyForStorage");T(this,"isProdAvailable");this.label=t,this.defaultValue=n,this.keyForStorage=`feature_toggle:${t}`,this.isProdAvailable=r}value(){if(process.env.TERMIUS_DEVELOPER_TOOLS||process.env.STORYBOOK_MODE||this.isProdAvailable){const t=localStorage.getItem(this.keyForStorage);if(t!=null)try{return JSON.parse(t)}catch{}}return this.defaultValue}update(t){if(process.env.TERMIUS_DEVELOPER_TOOLS||process.env.STORYBOOK_MODE||this.isProdAvailable){const n=JSON.stringify(t);n!=null&&localStorage.setItem(this.keyForStorage,n)}}}const A_="auto";class Q3e extends G${constructor(n,r,i=A_){super(n,i);T(this,"availableValues");T(this,"name");this.name=n,this.availableValues=[A_,...r]}get variant(){return this.value()===A_?"":this.value()}}const q3e=e=>Object.keys(j3e[e]);new Q3e(QB,q3e(QB));ve(Q9,oHe,qOe,(e,t,n)=>t&&!!e.length&&!n);var eMe={exports:{}};(function(e){const t=e.exports;e.exports.default=t;const n="\x1B[",r="\x1B]",i="\x07",o=";",s=process.env.TERM_PROGRAM==="Apple_Terminal";t.cursorTo=(a,l)=>{if(typeof a!="number")throw new TypeError("The `x` argument is required");return typeof l!="number"?n+(a+1)+"G":n+(l+1)+";"+(a+1)+"H"},t.cursorMove=(a,l)=>{if(typeof a!="number")throw new TypeError("The `x` argument is required");let c="";return a<0?c+=n+-a+"D":a>0&&(c+=n+a+"C"),l<0?c+=n+-l+"A":l>0&&(c+=n+l+"B"),c},t.cursorUp=(a=1)=>n+a+"A",t.cursorDown=(a=1)=>n+a+"B",t.cursorForward=(a=1)=>n+a+"C",t.cursorBackward=(a=1)=>n+a+"D",t.cursorLeft=n+"G",t.cursorSavePosition=s?"\x1B7":n+"s",t.cursorRestorePosition=s?"\x1B8":n+"u",t.cursorGetPosition=n+"6n",t.cursorNextLine=n+"E",t.cursorPrevLine=n+"F",t.cursorHide=n+"?25l",t.cursorShow=n+"?25h",t.eraseLines=a=>{let l="";for(let c=0;c<a;c++)l+=t.eraseLine+(c<a-1?t.cursorUp():"");return a&&(l+=t.cursorLeft),l},t.eraseEndLine=n+"K",t.eraseStartLine=n+"1K",t.eraseLine=n+"2K",t.eraseDown=n+"J",t.eraseUp=n+"1J",t.eraseScreen=n+"2J",t.scrollUp=n+"S",t.scrollDown=n+"T",t.clearScreen="\x1Bc",t.clearTerminal=process.platform==="win32"?`${t.eraseScreen}${n}0f`:`${t.eraseScreen}${n}3J${n}H`,t.beep=i,t.link=(a,l)=>[r,"8",o,o,l,i,a,r,"8",o,o,i].join(""),t.image=(a,l={})=>{let c=`${r}1337;File=inline=1`;return l.width&&(c+=`;width=${l.width}`),l.height&&(c+=`;height=${l.height}`),l.preserveAspectRatio===!1&&(c+=";preserveAspectRatio=0"),c+":"+a.toString("base64")+i},t.iTerm={setCwd:(a=process.cwd())=>`${r}50;CurrentDir=${a}${i}`,annotation:(a,l={})=>{let c=`${r}1337;`;const u=typeof l.x<"u",d=typeof l.y<"u";if((u||d)&&!(u&&d&&typeof l.length<"u"))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return a=a.replace(/\|/g,""),c+=l.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",l.length>0?c+=(u?[a,l.length,l.x,l.y]:[l.length,a]).join("|"):c+=a,c+i}}})(eMe);var xF=Rf,LF=xF?xF.prototype:void 0;LF&&LF.valueOf;var YF=gG;YF&&YF.isMap;var PF=gG;PF&&PF.isSet;const Yg=Ae.enum(["SetCwd","ShellPromptBegins","ShellPromptEnds","CommandStarted","CommandExited"]);Ae.union([Ae.string().regex(new RegExp(`^${Yg.enum.SetCwd};(\\S+)$`)).transform(e=>Pg.setCwd(S_(e))),Ae.string().regex(new RegExp(`^${Yg.enum.ShellPromptBegins}$`)).transform(()=>Pg.shellPromptBegins()),Ae.string().regex(new RegExp(`^${Yg.enum.ShellPromptEnds}$`)).transform(()=>Pg.shellPromptEnds()),Ae.string().regex(new RegExp(`^${Yg.enum.CommandStarted};(\\S+)$`)).transform(e=>Pg.commandStarted(S_(e))),Ae.string().regex(new RegExp(`^${Yg.enum.CommandExited};(\\S+)$`)).transform(e=>Pg.commandExited(S_(e)))]);const Pg={setCwd:E("SET_CWD"),shellPromptBegins:E("SHELL_PROMPT_BEGINS"),shellPromptEnds:E("SHELL_PROMPT_ENDS"),commandStarted:E("COMMAND_STARTED"),commandExited:E("COMMAND_EXITED")};function S_(e){return e.split(";")[1]??""}function tMe(e){return e.length>4095}const nMe=[{id:WB.VAULTS,title:e=>e||"Vaults"},{id:WB.SFTP,title:e=>e||"SFTP"}];function eZ(e){return e.globalTerminalSettings.colorScheme}const N$=ve(t3,eZ,(e,t)=>n=>KG.get(n,t,e));ve(jFe,eZ,(e,t)=>(n,r)=>{const i=e(n==null?void 0:n.connectionHostLocalId),o=QU(n==null?void 0:n.connectionProtocol);return qU(i,o,t,r)});function Z$({processingConnections:e,terminalConnectionId:t,multiplayerConnection:n}){const r=rMe({multiplayerConnection:n,processingConnections:e,terminalConnectionId:t});return iMe(r)}const rMe=({processingConnections:e,terminalConnectionId:t,multiplayerConnection:n})=>e[t]??!1?"connecting":n==null?void 0:n.status;function iMe(e){switch(e){case"connected":return"succeeded";case"connecting":return"connecting";case"error":return"error";default:return}}const oMe=({team:e=[],participant:t})=>{const n=e.find(i=>!!i.id&&i.id===(t==null?void 0:t.userId));return(t==null?void 0:t.username)||(n==null?void 0:n.username)||(n==null?void 0:n.userFullName)||""},un={connections:e=>e.multiplayer.connections,connectionsPreview:e=>e.multiplayer.connectionsPreview,sharingRequests:e=>e.multiplayer.startSharingTerminalRequests,tabWidget:e=>e.multiplayer.tabWidget,startMultiplayerMenu:e=>e.multiplayer.startMultiplayerMenu,centrifugeClientId:e=>e.multiplayer.centrifugeClientId,isMultiplayerEnabled:e=>e.multiplayer.isMultiplayerEnabled,connectionsInProcessing:e=>e.multiplayer.connectionsInProcessing},XF=[],sMe=ve([un.connections,(e,t)=>t],(e,t)=>{var n;return t?((n=e[t])==null?void 0:n.participants)??XF:XF});ve([un.connections,(e,t)=>t],(e,t)=>{var n;if(t)return(n=e[t])==null?void 0:n.currentControlOwner});const aMe=ve([un.connections,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{var r;if(t)return(r=e[t])==null?void 0:r.participants.find(i=>i.participantId===n)}),lMe=T$(e=>e.hostId),cMe=ve([lMe,(e,t)=>t],(e,t)=>t==null?[]:e.get(t)??[]),uMe=T$(e=>e.userId);ve([uMe,(e,t)=>t],(e,t)=>t==null?[]:e.get(t)??[]);ve([un.connections,(e,t)=>t],(e,t)=>IMe(e,n=>!!n&&n.hostId===t));ve([un.connections,(e,t)=>{const n=new Set;for(const r of t)n.add(r.connectionId);return n}],(e,t)=>E0(e,t));ve([un.connections,(e,t)=>{const n=new Set;return Object.values(t).forEach(r=>{n.add(r.connectionId)}),n}],(e,t)=>E0(e,t));ve([un.connections,(e,t)=>new Set([t])],(e,t)=>{const n=E0(e,t);if(Bs(n.length<=1),!!n[0])return n[0]});const B0=ve([un.connections],e=>Object.values(e).filter(Tl));ve([un.sharingRequests],e=>e);ve([un.sharingRequests,cHe,(e,t)=>t],(e,t,n)=>Object.values(e).filter(r=>(r==null?void 0:r.hostId)===n&&(r==null?void 0:r.deviceId)===t));ve([un.sharingRequests,(e,t)=>t],(e,t)=>e[t]);const qB=[],dMe=ve([un.connections,(e,t)=>t],(e,t)=>{var n;return t?((n=e[t])==null?void 0:n.controlRequests)??qB:qB}),fMe=e=>{const t=new Map;return Object.values(e).forEach(n=>{n!=null&&n.terminalConnectionId&&t.set(n.terminalConnectionId,n)}),t};ve([un.connections,(e,t)=>t],(e,t)=>{const r=fMe(e).get(t);return(r==null?void 0:r.controlRequests)??qB});ve([un.connections,un.tabWidget,(e,t)=>t],(e,t,n)=>{var r;return!n||!e[n]?!1:!!((r=t[e[n].terminalId])!=null&&r.isOpened)});ve([un.tabWidget,(e,t)=>t],(e,t)=>{var n;if(t)return(n=e[t])==null?void 0:n.state});ve([un.startMultiplayerMenu],e=>{var t;return(t=Object.entries(e).find(([n,r])=>r.isOpened))==null?void 0:t[0]});ve([un.tabWidget],e=>Object.entries(e).find(([t,n])=>n.isOpened));ve([un.startMultiplayerMenu,(e,t)=>t],(e,t)=>{var n;return((n=e[t])==null?void 0:n.isOpened)??!1});ve([un.startMultiplayerMenu,(e,t)=>t],(e,t)=>{var n;return(n=e[t])==null?void 0:n.status});const gMe=ve([un.connections,(e,t)=>t],(e,t)=>{if(t)return e[t]});ve([un.connectionsInProcessing,(e,t)=>t],(e,t)=>e[t]);const __="Guest";ve([(e,t)=>sMe(e,t),(e,t)=>t],e=>{const t=e.filter(n=>{var r;return(r=n.username)==null?void 0:r.startsWith(__)}).length;return t>0?`${__} ${t}`:__});ve([un.connections,(e,t)=>t],(e,t)=>{var r,i;if(!t)return{state:void 0,type:"hidden"};const n=((r=e[t])==null?void 0:r.multiplayerTerminalMenuType)??"hidden";return{state:(i=e[t])==null?void 0:i.multiplayerTerminalMenuState,type:n}});ve([(e,t)=>dMe(e,t.sessionId),(e,t)=>gMe(e,t.sessionId),(e,t)=>aMe(e,t.sessionId,t.currentUserParticipantId)],(e,t,n)=>r=>{if(vMe(r))return"hidden";const i=t==null?void 0:t.controlRequests.some(a=>a.participantId===(n==null?void 0:n.participantId));if(r==="compact")return i?"requesting-control-collapsed":"viewing-collapsed";const o=(n==null?void 0:n.isControlOwner)||(n==null?void 0:n.isHost),s=!!e.length;return s&&o?"control-requested-by-participants":n!=null&&n.isControlOwner&&!s?"hidden":n!=null&&n.isHost&&!s?"host-viewing-expanded":i?"requesting-control-expanded":"participant-viewing-expanded"});const hMe=(e,t,n,r)=>e.map(o=>({multiplayerConnection:o,multiplayerApi:t.getMultiplayerApiByConnectionId(o.sessionId)})).flatMap(({multiplayerConnection:o,multiplayerApi:s})=>{const a=new Map(o.controlRequests.map(l=>[l.participantId,l.id]));return o.participants.map(l=>({username:oMe({team:r,participant:l}),id:l.participantId,userId:l.userId,avatar:Xv(n,l.userId),requestId:a.get(l.participantId),isControlOwner:l.isControlOwner,isHost:l.isHost,isYou:l.participantId===(s==null?void 0:s.participantId)}))}),pMe=e=>{const{state:t,isWidgetForTabInSplitView:n,allControlRequests:r,controlOwner:i}=e;return n?r.length&&(i!=null&&i.isYou)?"notification":"split-view":t},mMe=ve([un.connections,(e,t)=>t],(e,t)=>E0(e,t)),yMe=[];ve([un.tabWidget,(e,t)=>mMe(e,new Set(t.terminals.map(n=>n.connectionId))),p1,xOe,(e,t)=>t.terminals,(e,t)=>t.multiplayerMap],(e,t,n,r,i,o)=>{var v,y;const s=(y=e[(v=i[0])==null?void 0:v.id])==null?void 0:y.state;if(!s)return;const a=t.filter(Tl),l=a.flatMap(I=>I.controlRequests),c=l.length===0||l.every(I=>I.seenByHost),u=hMe(a,o,n,r),d=u.find(I=>I.isControlOwner),g=u.find(I=>I.requestId),p=i.length>1;return{state:pMe({state:s,isWidgetForTabInSplitView:p,allControlRequests:l,controlOwner:d}),members:u??yMe,controlOwner:d,memberRequestedControl:g,sharedTerminalsAmount:a.length,isNotificationsSeen:c}});ve([(e,t)=>cMe(e,cD(t,void 0)),(e,t)=>t],e=>new Set(e.map(t=>t.userId)));ve([un.centrifugeClientId],e=>e);ve([un.isMultiplayerEnabled],e=>e);ve([B0,un.connectionsInProcessing,(e,t)=>t],(e,t,n)=>{const r=e.find(i=>i.terminalConnectionId===n);if(r)return Z$({multiplayerConnection:r,processingConnections:t,terminalConnectionId:n})});const IMe=(e,t)=>Object.values(e).filter(Tl).filter(t),E0=(e,t)=>Object.values(e).filter(r=>!!r&&t.has(r.terminalConnectionId)),vMe=e=>!!e&&["hidden","closed"].includes(e);function T$(e){return ve([un.connectionsPreview],t=>{const n=new Map;return Object.values(t).forEach(r=>{const i=e(r);if(i!=null){n.has(i)||n.set(i,[]);const o=n.get(i);o&&o.push(r)}}),n})}const{isMultiplayerEnabled:Xje,connectionsInProcessing:tZ}=un,CMe=["title","host.label","host.address","host.description","host.ssh_config.port","host.telnet_config.port"];ve(g3,({label:e,selectedCount:t})=>{const n=Number(t)<2||t==="all"?"":` (${t})`;return{label:e+n}});const bMe=ve(g3,ixe,S1,LFe,({label:e,defaultLabel:t,selectedCount:n},r,i,o)=>({label:!(i===r)||o?t:e,selectedCount:n})),AMe=({terminal:e,multiplayerConnectionProcess:t})=>({id:e.id,isDisconnected:e.disconnectTimestamp!=null,connectionProcess:e.connectionProcess,multiplayerConnectionProcess:t,colorScheme:e.colorScheme,isMultiplayer:e.isMultiplayer,protocol:e.connectionProtocol,osName:e.osName,connectionId:e.connectionId}),jo=e=>e.workspace.all,SMe=(e,t)=>jo(e)[t],_Me=(e,t)=>{const{orderedTerminalIds:n}=t;return n.map(r=>e[r]).filter(Boolean)};function wMe(e){return e.terminal.search.targetTerminalId}const nZ=ve((e,t)=>e.terminal.all,(e,t)=>t,(e,t)=>Z3e(e,n=>n.windowId===t)),R0=e=>e.terminal.tabs;function G0(e){return ve(R0,(t,n)=>n,e)}const N0=ve(R0,(e,t)=>t,(e,t)=>e.filter(n=>n.windowId===t)),rZ=ve((e,t)=>N0(e,t),e=>e.filter(f1));ve((e,t)=>N0(e,t),e=>e.filter(Ea));ve((e,t)=>e.terminal.tabs,(e,t)=>t,(e,t)=>e.filter(n=>Ea(n)&&n.windowId===t));ve((e,t,n)=>N0(e,t),(e,t,n)=>nZ(e,t),s3,bMe,B0,tZ,jo,(e,t,n)=>n,(e,t,{filter:n},{label:r},i,o,s,a)=>{if(n&&n!==o3.JUMP_TO)return[];const l=e.map(g=>{if(!Ea(g)&&!Mo(g))return g;const{connectionProcess:p,hasUnreadOutput:m}=k$({tab:g,allTerminals:t,multiplayerConnections:i,multiplayerProcessingConnections:o,workspaces:s});return{...g,connectionProcess:p,hasUnreadOutput:m}}),c=nMe.map(({id:g,title:p})=>({id:g,title:p(g===WB.VAULTS?r:"")}));if(a==="")return[...c,...l];const u=l.map(g=>{if(g.tabType!=="terminalTab"&&g.tabType!=="workspaceTab")return g;const p=WMe(g,t);return{...g,host:p}}),d=[...c,...u];return SHe.go(a,d,{keys:CMe}).map(({obj:g})=>{if("host"in g){const{host:p,...m}=g;return m}return g})});ve((e,t)=>rZ(e,t),e=>e.terminal.all,B0,tZ,jo,(e,t,n,r,i)=>BMe({tabsWithTerminal:e,allTerminals:t,multiplayerConnections:n,multiplayerProcessingConnections:r,workspaces:i}));const BMe=({tabsWithTerminal:e,allTerminals:t,multiplayerConnections:n=[],multiplayerProcessingConnections:r,workspaces:i})=>{let o,s=-1;for(const a of e){const l=k$({tab:a,allTerminals:t,multiplayerConnections:n,multiplayerProcessingConnections:r,workspaces:i}),c=EMe(l);if(c>s&&(o=l,s=c),s===W$)return o}return o},W$=5,EMe=e=>{switch(e.connectionProcess){case"error":return W$;case"blocked":return 4;case"connecting":return 3;case"succeeded":return e.hasMultiplayerNotification?2:e.hasUnreadOutput?1:0;default:return e.connectionProcess}},k$=e=>{const{tab:t,allTerminals:n,multiplayerConnections:r,multiplayerProcessingConnections:i,workspaces:o}=e,a=oZ(t,n,o).map(u=>V$(u,r,i)),l=RMe(a),c=L$(t,n,o);return{hasMultiplayerNotification:t.hasMultiplayerNotification,hasUnreadOutput:c,connectionProcess:l}},RMe=e=>NMe(e)?"error":ZMe(e)?"blocked":TMe(e)?"connecting":"succeeded";function GMe(e,t){return e==="error"}const NMe=e=>e.some(t=>GMe(t.connectionProcess,t.isDisconnected)),ZMe=e=>e.some(t=>t.connectionProcess==="blocked"),TMe=e=>e.some(t=>t.connectionProcess==="connecting"&&t.protocol!=="local");function V$(e,t,n){const r=t==null?void 0:t.find(i=>i.terminalConnectionId===e.connectionId);return AMe({terminal:e,multiplayerConnectionProcess:Z$({processingConnections:n,terminalConnectionId:e.connectionId,multiplayerConnection:r})})}function WMe(e,t){var r;const n=Mo(e)?e.terminalId:void 0;return n?(r=t[n])==null?void 0:r.host:void 0}G0(RB);const kMe=G0(vI),VMe=G0(RWe);G0(GWe);ve(R0,jo,(e,t)=>t,(e,t,n)=>{const r=GB(e,n);if(r==null)return new Set;if(Mo(r))return new Set([r.terminalId]);const i=SMe({workspace:{all:t}},r.workspaceId);return i?new Set(i.orderedTerminalIds):new Set});const OMe=e=>e.terminal.activeTabId;ve((e,t)=>N0(e,t),OMe,(e,t)=>e.findIndex(n=>n.id===t));ve(sZ,rZ,jo,(e,t,n)=>{if(e)return t.find(r=>{if(Mo(r))return r.terminalId===e.id;if(Ea(r)){const i=n[r.workspaceId];return i==null?void 0:i.orderedTerminalIds.includes(e.id)}return!1})});const HMe=e=>t=>t.id===e,iZ=ve(rZ,S1,(e,t)=>e.find(HMe(t))),O$=ve(iZ,nZ,jo,(e,t,n)=>e?oZ(e,t,n):[]),oZ=(e,t,n)=>{if(Mo(e)){const r=t[e.terminalId];return r?[r]:[]}if(Ea(e)){const r=n[e.workspaceId];return r?_Me(t,r):[]}return[]},FMe=ve((e,t)=>e.terminal.all,jo,(e,t)=>t,(e,t,n)=>oZ(n,e,t)),H$=ve(e=>e,kMe,(e,t)=>t?FMe(e,t):[]),F$=["session-log","local","stream"];ve(O$,iZ,jo,(e,t,n)=>{var i;if(!e.length)return"vaultTab";if(t&&Ea(t)&&((i=n[t.workspaceId])==null?void 0:i.viewMode)==="focusView"){const s=e.find(l=>l.isActive);return xMe(s)?"terminal":"connectionFlow"}return e.every(o=>o.connectionProcess==="succeeded"||o.connectionProcess==="error"&&o.disconnectTimestamp||F$.includes(o.connectionProtocol??""))?"terminal":"connectionFlow"});const xMe=e=>{var i;const t=!(e!=null&&e.connectionFlow),n=(i=e==null?void 0:e.connectionFlow)==null?void 0:i.isConnected,r=F$.includes((e==null?void 0:e.connectionProtocol)??"");return t||n||r},LMe=ve(R0,jo,(e,t)=>t,(e,t,n)=>NWe(e,t,n));function sZ(e,t){return Object.values(e.terminal.all).find(n=>n.windowId===t&&n.isActive)}ve(sZ,wMe,(e,t)=>e?e.id===t:!1);function YMe(e){return e.terminal.splitViewBroadcastTabs}ve(VMe,YMe,(e,t)=>e?t.has(e.id):!1);function PMe(e,t){return e.terminal.all[t]}const x$=(e,t)=>{var o,s;const n=eZ(e);if(!t)return n;const r=PMe(e,t);if(!r)return n;const i=(s=(o=r==null?void 0:r.colorScheme)==null?void 0:o.name)==null?void 0:s.toLowerCase();return KG.isValidColorSchemeName(i)?i:n};function XMe(e,t){return e.terminal.history[t]}ve(XMe,nxe,(e,t)=>{if(e==null)return t;const n=M3e(t,e.commands,(s,a)=>s.script===a.script),r=Math.max(...t.map(s=>s.rating)),o=[...e.commands.map(s=>new Gb(s).clone({rating:r+1,completed_at:s.completed_at??new Date(0)})),...n].filter(({script:s})=>!tMe(s));return CD(o,["completed_at","rating"],["desc","desc"])});const UMe=(e,t)=>{const n=sZ(e,t);return x$(e,n==null?void 0:n.id)};ve(iZ,nZ,UMe,N$,jo,(e,t,n,r,i)=>{var l,c;if(!e)return;if(Mo(e))return(l=t[e.terminalId])==null?void 0:l.colorScheme;const o=i[e.workspaceId];if(!o)return;if((o==null?void 0:o.viewMode)==="focusView")return r(n);const a=o==null?void 0:o.layout.getFirstLeafId();return(c=t[a])==null?void 0:c.colorScheme});ve(x$,N$,(e,t)=>t(e));const L$=(e,t,n)=>{if(Mo(e)){const r=t[e.terminalId];return!!(r!=null&&r.hasUnreadOutput)}if(Ea(e)){const r=n[e.workspaceId];return r?r.orderedTerminalIds.some(i=>{const o=t[i];return!!(o!=null&&o.hasUnreadOutput)}):!1}return!1};ve((e,t)=>e.terminal.all,(e,t)=>jo(e),(e,t)=>t,(e,t,n)=>L$(n,e,t));ve([e=>e.terminal.all,(e,t)=>t],(e,t)=>Object.values(e).find(n=>n.connectionId===t));ve([LMe,S1],(e,t)=>t===(e==null?void 0:e.id));ve(e=>e.terminal.all,e=>Object.values(e).map(t=>t.connectionId));ve([O$],e=>e.some(t=>t.connectionProcess!=="succeeded"));ve([(e,t)=>H$(e,t)],e=>e.some(t=>t.connectionProcess!=="succeeded"));ve([B0,tZ,(e,t)=>H$(e,t)],(e,t,n)=>n.map(r=>V$(r,e,t)));function DMe(e,t){const n=e.sidepanel.windows.get(t),{visible:r}=n??e.sidepanel;return r}const KMe=(e,t,n,r)=>{var i,o;return J.Menu.buildFromTemplate([...So(vt.linux()||vt.windows(),[{label:UF(n),accelerator:zy(n,1),click(){e("menu:vaults")}},{label:"SFTP",accelerator:zy(n,2),click(){e("menu:sftp")}},{label:"Settings",accelerator:"CmdOrCtrl+,",click(){e("menu:preferences")}},{type:"separator"}]),...So(vt.macOS(),[{label:J.app.name,submenu:[{role:"about"},{label:"Check for Update",click(){e("menu:check-for-update")},visible:jB()},{type:"separator"},{label:UF(n),accelerator:zy(n,1),click(){e("menu:vaults")}},{label:"SFTP",accelerator:zy(n,2),click(){e("menu:sftp")}},{label:"Settings",accelerator:"CmdOrCtrl+,",click(){e("menu:preferences")}},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}]),...So(vt.macOS(),[{label:"File",submenu:[...So(!vt.mas(),[{label:"New Local Terminal",click(){e("menu:open-local-terminal")}}]),{label:"New Serial Connection",click(){e("menu:open-serial-terminal")}}]}]),...So(!vt.macOS(),[...So(!vt.mas(),[{label:"New Local Terminal",click(){e("menu:open-local-terminal")}}]),{label:"New Serial Connection",click(){e("menu:open-serial-terminal")}}]),{label:"Edit",type:"submenu",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"delete"},{role:"selectAll"},{type:"separator"},{label:"Find",accelerator:((i=FF(n,"openTerminalSearch"))==null?void 0:i.shortcut)??void 0,click(){t(vD({windowId:r,source:"SystemMenu"}))}}]},{label:"View",submenu:[{label:"Toggle Full Screen",role:"togglefullscreen"},{type:"separator"},{label:"Show terminal side-panel",id:"snippets",type:"checkbox",checked:DMe(n,r),click(){t(P9({windowId:r,openedFrom:"Menu Bar Item"}))},accelerator:((o=FF(n,"toggleSidepanel"))==null?void 0:o.shortcut)??void 0,enabled:Oy(n,r)},{type:"separator"},{label:"Increase terminal font size",click(){t(eNe(r))},accelerator:"CmdOrCtrl+Plus",visible:Oy(n,r)},{label:"Decrease terminal font size",click(){t(tNe(r))},accelerator:"CmdOrCtrl+-",visible:Oy(n,r)},{label:"Reset terminal font size to default",click(){t(nNe(r))},visible:Oy(n,r)}]},{label:"Window",role:"window",submenu:[...So(vt.macOS(),[{label:"Minimize",accelerator:"CmdOrCtrl+M",role:"minimize"},{role:"zoom"},{type:"separator"},{label:"Bring All to Front",role:"front"},{type:"separator"},{label:"Termius",click(){e("menu:show-windows")}}]),...So(vt.linux()||vt.windows(),[{role:"minimize"}]),{label:"New Window",accelerator:vt.macOS()?"Cmd+N":"Ctrl+Shift+N",enabled:Cp(n),click(s,a,l){let c=l.triggeredByAccelerator;vt.linux()&&(c=l.ctrlKey&&l.shiftKey),e("menu:new-window",c)}}]},{label:"Help",role:"help",submenu:[{label:"Learn More",click(){J.shell.openExternal("https://termius.com")}},...So(vt.linux()||vt.windows(),[{type:"separator"},{label:"Check for Update",click(){e("menu:check-for-update")},visible:JB()},{label:"About",click(){e("menu:about")}}])]},...So(vt.linux()||vt.windows(),[{type:"separator"},{label:vt.windows()?"Exit":"Quit",click(){J.app.quit()}}]),...So(!1,[{label:"Termius Dev Tools",submenu:[{label:"Background Dev Tools",accelerator:vt.macOS()?"Command+Alt+U":"Control+Shift+U",click(){_I(J.BrowserWindow.fromId(BD))}},{label:"Focused Window Dev Tools",accelerator:vt.macOS()?"Command+Alt+I":"Control+Shift+I",click(){_I(J.BrowserWindow.getFocusedWindow())}},{label:"All Dev Tools",accelerator:vt.macOS()?"Command+Alt+O":"Control+Shift+O",click(){_I(J.BrowserWindow.getAllWindows())}},{label:"Inspect Element",accelerator:"CommandOrControl+Shift+C",click(){r3e(J.BrowserWindow.getFocusedWindow())}},{label:"Reload Page",accelerator:"CmdOrCtrl+R",click(){const s=J.BrowserWindow.getFocusedWindow();s&&(s.webContents.emit("devtools-reload-page"),s.webContents.reloadIgnoringCache())}},{label:"Restart Application",accelerator:"CmdOrCtrl+Shift+R",click(){J.app.relaunch(),J.app.quit()}},{label:"Toggle app theme",accelerator:"CmdOrCtrl+Shift+T",click(){t(ZB({theme:t3(n)?"light":"dark"}))}}]}])])},MMe=(e,t,n,r)=>J.Menu.buildFromTemplate([{label:"Termius",click(){e("dock:show-windows")}},{label:"New Window",enabled:Cp(n),click(){e("dock:new-window")}}]);function $Me(e,t,n){const r=t.getState(),{dispatch:i}=t;n!=null&&J.Menu.setApplicationMenu(KMe(e,i,r,n)),vt.macOS()&&J.app.dock.setMenu(MMe(e,i,r))}function UF(e){return dm(e)?"Vaults":"Vault"}function zy(e,t){var r;const n=(r=L3e(e))==null?void 0:r.mod;return n?`${n}+${t}`:void 0}class zMe{constructor(t,n){T(this,"handler",t=>{this.redirector.send(t)});this.bus=t,this.redirector=n}start(){this.bus.on(Uv,this.handler)}stop(){this.bus.removeListener(Uv,this.handler)}}function*JMe(e,t){yield*Vi(e,t)}const jMe=(e,t,n)=>{const r=e.run(JMe,t,n);return()=>r.cancel()};var QMe=Ns,qMe=function(){return QMe.randomBytes(16)},Y$=[];for(var Jy=0;Jy<256;++Jy)Y$[Jy]=(Jy+256).toString(16).substr(1);function e$e(e,t){var n=t||0,r=Y$;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}var t$e=e$e,n$e=qMe,r$e=t$e;function i$e(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||n$e)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||r$e(i)}var o$e=i$e;const s$e=Ht(o$e);function a$e(){this._events_={},this.publish=this.trigger=this.emit=r,this.subscribe=this.on=e,this.once=t,this.unSubscribe=this.off=n,this.emit$=i;function e(o,s,a){if(!s)throw new ReferenceError("handler not defined.");return this._events_[o]||(this._events_[o]=[]),a&&(s._once_=a),this._events_[o].push(s),this}function t(o,s){return this.on(o,s,!0)}function n(o,s){if(!this._events_[o])return this;if(!s)throw new ReferenceError('handler not defined. if you wish to remove all handlers from the event please pass "*" as the handler');if(s=="*")return delete this._events_[o],this;for(var a=this._events_[o];a.includes(s);)a.splice(a.indexOf(s),1);return a.length<1&&delete this._events_[o],this}function r(o){if(this.emit$.apply(this,arguments),!this._events_[o])return this;arguments.splice=Array.prototype.splice,arguments.splice(0,1);var s=this._events_[o],a=[];for(var l in s){var c=s[l];c.apply(this,arguments),c._once_&&a.push(c)}for(var l in a)this.off(o,a[l]);return this}function i(o,s){if(!this._events_["*"])return this;var a=this._events_["*"];s.shift=Array.prototype.shift,s.shift(o);for(var l of a)l.apply(this,s);return this}return this}Array.prototype.includes||(Array.prototype.includes=function(e){if(this==null)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(n===0)return!1;var r=parseInt(arguments[1],10)||0,i;r>=0?i=r:(i=n+r,i<0&&(i=0));for(var o;i<n;){if(o=t[i],e===o||e!==e&&o!==o)return!0;i++}return!1});var l$e=a$e,w_,DF;function c$e(){if(DF)return w_;DF=1;class e{constructor(n){this._events_={},this.publish=this.trigger=this.emit,this.subscribe=this.on,this.unSubscribe=this.off}on(n,r,i){if(!r)throw new ReferenceError("handler not defined.");return this._events_[n]||(this._events_[n]=[]),i&&(r._once_=i),this._events_[n].push(r),this}once(n,r){return this.on(n,r,!0)}off(n,r){if(!this._events_[n])return this;if(!r)throw new ReferenceError('handler not defined. if you wish to remove all handlers from the event please pass "*" as the handler');if(r=="*")return delete this._events_[n],this;const i=this._events_[n];for(;i.includes(r);)i.splice(i.indexOf(r),1);return i.length<1&&delete this._events_[n],this}emit(n,...r){if(!this._events_[n])return this.emit$(n,...r);const i=this._events_[n],o=[];for(let s of i)s.apply(this,r),s._once_&&o.push(s);for(let s of o)this.off(n,s);return this.emit$(n,...r)}emit$(n,...r){if(!this._events_["*"])return this;const i=this._events_["*"];for(let o of i)o.call(this,n,...r);return this}}return w_=e,w_}let P$=l$e;process.version[1]>5&&(P$=c$e());var X$=P$;function u$e(){Object.defineProperties(this,{data:{enumerable:!0,get:r,set:s},type:{enumerable:!0,get:n,set:o},load:{enumerable:!0,writable:!1,value:a},JSON:{enumerable:!0,get:i}});var e="",t={};function n(){return e}function r(){return t}function i(){return JSON.stringify({type:e,data:t})}function o(l){e=l}function s(l){t=l}function a(l){try{var l=JSON.parse(l);e=l.type,t=l.data}catch(u){var c=l;e="error",t={message:"Invalid JSON response format",err:u,response:c}}}}var U$=u$e;function d$e(e){Object.defineProperties(this,{add:{enumerable:!0,writable:!1,value:s},next:{enumerable:!0,writable:!1,value:a},clear:{enumerable:!0,writable:!1,value:r},contents:{enumerable:!1,get:i,set:o},autoRun:{enumerable:!0,writable:!0,value:!0},stop:{enumerable:!0,writable:!0,value:!1}});var t=[],n=!1;function r(){return t=[],t}function i(){return t}function o(l){return t=l,t}function s(){for(var l in arguments)t.push(arguments[l]);!n&&!this.stop&&this.autoRun&&this.next()}function a(){if(n=!0,t.length<1||this.stop){n=!1;return}t.shift().bind(this)()}}var f$e=d$e;const g$e=Ri;let h$e=class{constructor(){this.appspace="app.",this.socketRoot="/tmp/",this.id=g$e.hostname(),this.encoding="utf8",this.rawBuffer=!1,this.sync=!1,this.unlink=!0,this.delimiter="\f",this.silent=!1,this.logDepth=5,this.logInColor=!0,this.logger=console.log.bind(console),this.maxConnections=100,this.retry=500,this.maxRetries=1/0,this.stopRetrying=!1,this.readableAll=!1,this.writableAll=!1,this.interface={localAddress:!1,localPort:!1,family:!1,hints:!1,lookup:!1}}};var D$=h$e;const p$e=D$;class m$e{constructor(t){t||(t=new p$e),this.delimiter=t.delimiter}format(t){return!t.data&&t.data!==!1&&t.data!==0&&(t.data={}),t.data._maxListeners&&(t.data={}),t=t.JSON+this.delimiter,t}parse(t){const n=t.split(this.delimiter);return n.pop(),n}}var K$=m$e;const y$e=sR,{Readable:I$e}=Pl,v$e=X$,M$=U$,C$e=f$e,$$=K$;let Eh=new $$,b$e=class z$ extends v$e{constructor(t,n){super(),Object.assign(this,{Client:z$,config:t,queue:new C$e,socket:!1,connect:_$e,emit:A$e,log:n,retriesRemaining:t.maxRetries||0,explicitlyDisconnected:!1}),Eh=new $$(this.config)}};function A$e(e,t){this.log("dispatching event to ",this.id,this.path," : ",e,",",t);let n=new M$;if(n.type=e,n.data=t,this.config.rawBuffer?n=Buffer.from(e,this.config.encoding):n=Eh.format(n),!this.config.sync){this.socket.write(n);return}this.queue.add(S$e.bind(this,n))}function S$e(e){this.log("dispatching event to ",this.id,this.path," : ",e),this.socket.write(e)}function _$e(){let e=this;if(e.log("requested connection to ",e.id,e.path),!this.path){e.log(`

######
error: `,e.id," client has not specified socket path it wishes to connect to.");return}const t={};e.log("Connecting client on Unix Socket :",e.path),t.path=e.path,process.platform==="win32"&&!e.path.startsWith("\\\\.\\pipe\\")&&(t.path=t.path.replace(/^\//,""),t.path=t.path.replace(/\//g,"-"),t.path=`\\\\.\\pipe\\${t.path}`),e.socket=y$e.connect(t),e.socket.setEncoding(this.config.encoding),e.socket.on("error",n=>{e.log(`

######
error: `,n),e.publish("error",n)}),e.socket.on("connect",()=>{e.publish("connect"),e.retriesRemaining=e.config.maxRetries,e.log("retrying reset")}),e.socket.on("close",()=>{if(e.log("connection closed",e.id,e.path,e.retriesRemaining,"tries remaining of",e.config.maxRetries),e.config.stopRetrying||e.retriesRemaining<1||e.explicitlyDisconnected){e.publish("disconnect"),e.log(e.config.id,"exceeded connection rety amount of"," or stopRetrying flag set."),e.socket.destroy(),e.publish("destroy"),e=void 0;return}setTimeout((function(){e.explicitlyDisconnected||(e.retriesRemaining-=1,e.connect())}).bind(null,e),e.config.retry),e.publish("disconnect")}),e.socket.on("data",n=>{if(e.log("## received events ##"),e.config.rawBuffer){if(e.publish("data",Buffer.from(n,e.config.encoding)),!e.config.sync)return;e.queue.next();return}if(this.ipcBuffer||(this.ipcBuffer=new I$e({objectMode:!1,read(){}})),this.ipcBuffer.push(n),n.slice(-1)!==Eh.delimiter||n.indexOf(Eh.delimiter)===-1){e.log("Messages are large, You may want to consider smaller messages.");return}n=this.ipcBuffer.read().toString();const r=Eh.parse(n),i=r.length;for(let o=0;o<i;o+=1){const s=new M$;s.load(r[o]),e.log("detected event",s.type,s.data),e.publish(s.type,s.data)}e.config.sync&&e.queue.next()})}var w$e=b$e;const B$e=Rn,E$e=sR,R$e=X$,aZ=U$,J$=K$;let Nd=new J$,G$e=class extends R$e{constructor(t,n,r,i){super(),Object.assign(this,{config:n,path:t,port:i,log:r,server:!1,sockets:[],emit:N$e,broadcast:Z$e}),Nd=new J$(this.config),this.on("close",T$e.bind(this))}onStart(t){this.trigger("start",t)}stop(){this.server.close()}start(){if(!this.path){this.log("Socket Server Path not specified, refusing to start");return}this.config.unlink?B$e.unlink(this.path,KF.bind(this)):KF.bind(this)()}};function N$e(e,t,n){this.log("dispatching event to socket"," : ",t,n);let r=new aZ;r.type=t,r.data=n,this.config.rawBuffer?(this.log(this.config.encoding),r=Buffer.from(t,this.config.encoding)):r=Nd.format(r),e.write(r)}function Z$e(e,t){this.log("broadcasting event to all known sockets listening to ",this.path," : ",this.port?this.port:"",e,t);let n=new aZ;n.type=e,n.data=t,this.config.rawBuffer?n=Buffer.from(e,this.config.encoding):n=Nd.format(n);for(let r=0,i=this.sockets.length;r<i;r+=1)this.sockets[r].write(n)}function T$e(){for(let e=0,t=this.sockets.length;e<t;e+=1){const n=this.sockets[e];let r=!1;if(!(n&&n.readable)){n.id&&(r=n.id),this.log("socket disconnected",r.toString()),n&&n.destroy&&n.destroy(),this.sockets.splice(e,1),this.publish("socket.disconnected",n,r);return}}}function W$e(e,t){if(this.config.rawBuffer){t=Buffer.from(t,this.config.encoding),this.publish("data",t,e);return}if(e.ipcBuffer||(e.ipcBuffer=""),e.ipcBuffer+=t,t=e.ipcBuffer,t.slice(-1)!==Nd.delimiter||t.indexOf(Nd.delimiter)===-1){this.log("Messages are large, You may want to consider smaller messages.");return}for(e.ipcBuffer="",t=Nd.parse(t);t.length>0;){const n=new aZ;n.load(t.shift()),n.data&&n.data.id&&(e.id=n.data.id),this.log("received event of : ",n.type,n.data),this.publish(n.type,n.data,e)}}function k$e(e){this.publish("close",e)}function V$e(e){this.sockets.push(e),e.setEncoding&&e.setEncoding(this.config.encoding),this.log("## socket connection to server detected ##"),e.on("close",k$e.bind(this)),e.on("error",(function(t){this.log("server socket error",t),this.publish("error",t)}).bind(this)),e.on("data",W$e.bind(this,e)),e.on("message",(function(t,n){if(!n)return;this.log("Received UDP message from ",n.address,n.port);let r;this.config.rawSocket?r=Buffer.from(t,this.config.encoding):r=t.toString(),e.emit("data",r,n)}).bind(this)),this.publish("connect",e)}function KF(){this.log("starting server on ",this.path,this.port?`:${this.port}`:""),this.log("starting server"),this.server=E$e.createServer(V$e.bind(this)),this.server.on("error",(function(e){this.log("server error",e),this.publish("error",e)}).bind(this)),this.server.maxConnections=this.config.maxConnections,this.log("starting server as","Unix || Windows Socket"),process.platform==="win32"&&(this.path=this.path.replace(/^\//,""),this.path=this.path.replace(/\//g,"-"),this.path=`\\\\.\\pipe\\${this.path}`),this.server.listen({path:this.path,readableAll:this.config.readableAll,writableAll:this.config.writableAll},this.onStart.bind(this))}var O$e=G$e;const H$e=gr,F$e=w$e,x$e=O$e,L$e=D$;let Y$e=class{constructor(){Object.defineProperties(this,{config:{enumerable:!0,writable:!0,value:new L$e},connectTo:{enumerable:!0,writable:!1,value:U$e},disconnect:{enumerable:!0,writable:!1,value:P$e},serve:{enumerable:!0,writable:!1,value:X$e},of:{enumerable:!0,writable:!0,value:{}},server:{enumerable:!0,writable:!0,configurable:!0,value:!1},log:{enumerable:!0,writable:!1,value:j$}})}};function j$(...e){if(!this.config.silent){for(let t=0,n=e.length;t<n;t+=1)typeof e[t]=="object"&&(e[t]=H$e.inspect(e[t],{depth:this.config.logDepth,colors:this.config.logInColor}));this.config.logger(e.join(" "))}}function P$e(e){this.of[e]&&(this.of[e].explicitlyDisconnected=!0,this.of[e].off("*","*"),this.of[e].socket&&this.of[e].socket.destroy&&this.of[e].socket.destroy(),delete this.of[e])}function X$e(e,t){typeof e=="function"&&(t=e,e=!1),e||(this.log("Server path not specified, so defaulting to","ipc.config.socketRoot + ipc.config.appspace + ipc.config.id",this.config.socketRoot+this.config.appspace+this.config.id),e=this.config.socketRoot+this.config.appspace+this.config.id),t||(t=Q$),this.server=new x$e(e,this.config,j$),this.server.on("start",t)}function Q$(){}function U$e(e,t,n){if(typeof t=="function"&&(n=t,t=!1),n||(n=Q$),!e){this.log("Service id required","Requested service connection without specifying service id. Aborting connection attempt");return}if(t||(this.log("Service path not specified, so defaulting to","ipc.config.socketRoot + ipc.config.appspace + id",(this.config.socketRoot+this.config.appspace+e).data),t=this.config.socketRoot+this.config.appspace+e),this.of[e]){if(!this.of[e].socket.destroyed){this.log("Already Connected to",e,"- So executing success without connection"),n();return}this.of[e].socket.destroy()}this.of[e]=new F$e(this.config,this.log),this.of[e].id=e,this.of[e].path=t,this.of[e].connect(),n(this)}var D$e=Y$e;const MF=D$e;class K$e extends MF{constructor(){super(),Object.defineProperty(this,"IPC",{enumerable:!0,writable:!1,value:MF})}}var q$=new K$e;q$.config.id=s$e();q$.config.silent=!0;function ez(e){const t=e.getPath("userData");return M$e(t)}const M$e=e=>e.endsWith("/")?e:`${e}/`;function $$e(e){const t=e.isPackaged?e.appDir.replace("app.asar","app.asar.unpacked"):e.appDir;return mt.join(t,"out","shell-integration")}function z$e(e){return mt.join(typeof e=="string"?e:e.getPath("userData"),"session-logs-v2")}class tz{constructor(t){this.processExecutable=t}}class J$e extends tz{constructor(){super(...arguments);T(this,"runningProcesses",new Set);T(this,"preallocated",this.createProcess())}closeAllServiceProcesses(){for(const n of this.runningProcesses)n.kill("SIGKILL");this.runningProcesses.clear()}allocate(){const{preallocated:n}=this;return this.preallocated=this.createProcess(),n}async createProcess(){const n=await En.getUserId(),r=z$e(J.app),i=ez(J.app),o=Yl.fork(this.processExecutable,[J.app.getSystemLocale(),$$e({appDir:J.app.getAppPath(),isPackaged:J.app.isPackaged}),i,r,n]);return this.runningProcesses.add(o),o.once("exit",()=>{this.runningProcesses.delete(o)}),nz(o)}}class j$e extends tz{constructor(){super(...arguments);T(this,"childProcess",null);T(this,"preallocatedProcess",null)}closeAllServiceProcesses(){var n;(n=this.childProcess)==null||n.kill("SIGKILL")}allocate(){const{preallocatedProcess:n}=this;return n??(this.preallocatedProcess=this.makeProcess(),this.preallocatedProcess)}async makeProcess(){this.closeAllServiceProcesses();const n=ez(J.app),r=Yl.fork(this.processExecutable,[n]);return this.childProcess=r,r.once("exit",()=>{this.childProcess=null,this.preallocatedProcess=null}),nz(r)}}function nz(e){return new Promise(t=>e.once("message",n=>t({ipcId:n,subprocess:e})))}class Q$e{constructor(t,n){T(this,"processBus",new zc.EventEmitter);T(this,"execAnalyticsReceiver");this.sagas=t,this.execAnalyticsReceiver=new zMe(this.processBus,n)}watchProcesses(){this.execAnalyticsReceiver.start(),this.setupProcessAllocator("fido",j$e),this.setupProcessAllocator("service",J$e)}setupProcessAllocator(t,n){let r;const{processBus:i}=this;i.on(`request-${t}-process`,o),J.ipcMain.handle(`request-${t}-process`,o),jMe(this.sagas,Ur.success,a),J.app.on("quit",a);async function o(){r??(r=new n(`${__dirname}/../utilities-process/${t}-process.js`));const l=await r.allocate();return l.subprocess.on("message",s),i.on("fido-process-allocated",c),l.subprocess.on("exit",()=>{i.off("fido-process-allocated",c)}),i.emit(`${t}-process-allocated`,l.ipcId),l.ipcId;function c(u){l.subprocess.send({type:"fido-process-allocated",ipcId:u})}}function s(l){const[c,...u]=Array.isArray(l)?l:[l];i.emit(c,...u)}function a(){r==null||r.closeAllServiceProcesses(),r=void 0}}}function*q$e({store:e,actionRetranslator:t}){const n=new J.BrowserWindow({show:!1,webPreferences:{nodeIntegration:!0,contextIsolation:!1,spellcheck:!1}});uR.enable(n.webContents),n.webContents.on("ipc-message-sync",(o,s)=>{s==="init-redux"&&(o.returnValue=e.getState())});const r=new Promise(o=>{n.once("closed",o)}),i=t.subscribe({sendAction(o){n.webContents.send("redux-action",o)}});try{En.info("background process has started loading"),yield*Dd({context:n,fn:"loadFile"},"background-process/src/background-process/main.html"),En.info("background process has finished loading"),yield*Dd(()=>r),En.info("background process has been closed")}catch(o){En.exception("background process has failed to load",o)}finally{i()}}function eze(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}var tze=eze,nze=tze,B_=LU;function rze(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=B_(n),n=n===n?n:0),t!==void 0&&(t=B_(t),t=t===t?t:0),nze(B_(e),t,n)}var ize=rze;const oze=Ht(ize);class rz{constructor(t){T(this,"browserWindow");T(this,"redux");T(this,"id");T(this,"type");T(this,"closed");this.redux={initialState:t.store.getState(),actionBuffer:[]},this.type=t.type;const{minWidth:n=720,resizable:r=!0,minimizable:i=!0,show:o=!0,center:s=!1,maximizable:a=!0,fullscreenable:l=!0,backgroundThrottling:c=!0,actionRetranslator:u}=t,d=t.bounds??$F({width:n}),p={backgroundColor:this.type==="primary"?"transparent":"#101021",frame:!1,transparent:!1,x:d==null?void 0:d.x,y:d==null?void 0:d.y,width:t.width||(d==null?void 0:d.width),height:t.height||(d==null?void 0:d.height),minWidth:n,minHeight:440,resizable:r,minimizable:i,maximizable:a,show:o,center:s,fullscreenable:l,webPreferences:{nodeIntegration:!0,contextIsolation:!1,spellcheck:!1,backgroundThrottling:c}};vt.linux()&&(p.icon=Ah),vt.macOS()&&this.type==="primary"&&(p.show=!1,p.vibrancy="hud",p.backgroundColor="#00000000",p.visualEffectState="active"),this.browserWindow=new J.BrowserWindow(p),uR.enable(this.browserWindow.webContents),this.id=this.browserWindow.id,this.browserWindow.on("page-title-updated",v=>v.preventDefault()),this.browserWindow.webContents.setWindowOpenHandler(({url:v,referrer:y})=>(["https://www.recaptcha.net/"].includes(y.url)&&J.shell.openExternal(v),{action:"deny"}));const m=u.subscribe(this);this.browserWindow.once("closed",m),this.browserWindow.webContents.once("dom-ready",()=>{vt.macOS()&&this.type==="primary"&&o&&this.browserWindow.show()}),this.browserWindow.webContents.once("did-finish-load",()=>{t.store.dispatch(pN(this.id)),this.browserWindow.on("focus",()=>{t.store.dispatch(F0e())})}),this.browserWindow.once("closed",()=>{t.store.dispatch(mN(this.id))}),this.browserWindow.on("focus",()=>{J.ipcMain.emit("update-system-menu")}),this.closed=new Promise(v=>{this.browserWindow.once("closed",v)}),this.browserWindow.webContents.on("ipc-message-sync",(v,y)=>{if(y==="init-redux"){const{redux:I}=this;if(I!=null){v.returnValue=I.initialState;for(const b of I.actionBuffer)this.sendActionDirectly(b);this.redux=null}}y==="reset-redux"&&(this.redux={initialState:t.store.getState(),actionBuffer:[]},v.returnValue=void 0)}),this.browserWindow.webContents.on("devtools-reload-page",()=>{this.redux={initialState:t.store.getState(),actionBuffer:[]}})}async load(){const t=`${this.type} (id: ${this.browserWindow.id})`;this.closed.then(()=>{En.info(`${t} process has been closed`)});try{En.info(`${t} process has started loading`);const n=V1e(this.type,this.browserWindow);{const r=k1e(this.type);En.info("start window options",{filePath:r,options:n}),await this.browserWindow.loadFile(r,n)}En.info(`${t} process has finished loading`)}catch(n){throw En.exception(`${t} process has failed to load`,n),n}}manage(t){t.manage(this.browserWindow)}show(){this.browserWindow.show()}destroy(){this.browserWindow.destroy()}sendAction(t){const{redux:n}=this;n!=null?n.actionBuffer.push(t):this.sendActionDirectly(t)}moveToFocusedWindow(){const t=this.browserWindow.getBounds(),n=$F(t,t);n!=null&&this.browserWindow.setBounds(n)}sendActionDirectly(t){this.browserWindow.webContents.isDestroyed()||this.browserWindow.webContents.send("redux-action",t)}}function $F(e,t){var a;const n=(a=J.BrowserWindow.getFocusedWindow())==null?void 0:a.getBounds();if(n==null)return;function r(l,c=0,u=1/0){return oze(l,c,u)}const i=r(n.width,e==null?void 0:e.width,t==null?void 0:t.width),o=r(n.height,e==null?void 0:e.height,t==null?void 0:t.height),{workArea:s}=J.screen.getDisplayMatching(n);return{x:zF(n.x,i,s.x,s.width),y:zF(n.y,o,s.y,s.height),width:i,height:o}}function zF(e,t,n,r){const i=e+30;return i+t>n+r?n:i}function*sze({store:e,actionRetranslator:t}){const n=new rz({type:"preferences",store:e,minWidth:1100,width:1100,height:680,resizable:!1,minimizable:!1,maximizable:!1,show:!1,center:!0,fullscreenable:!1,backgroundThrottling:!1,actionRetranslator:t});n.browserWindow.on("close",r=>{e.dispatch(FO(!1)),n.browserWindow.hide(),e.dispatch(j1e(void 0)),s3e()||r==null||r.preventDefault()});try{yield*Dd({context:n,fn:"load"})}catch{return}yield*Vi(TD,function*(){!(yield*ww(Cp))||n.browserWindow.isDestroyed()||(n.browserWindow.isFocused()||n.moveToFocusedWindow(),n.browserWindow.show(),yield*Ud(FO(!0)))})}const aze=new Set(["fbe3018031f9586bcbf41727e417b7d1c45c2f47f93be372a17b96b50757d5a2","7f4296fc5b6a4e3b35d3c369623e364ab1af381d8fa7121533c9d6c633ea2461","36abc32656acfc645c61b71613c4bf21c787f5cabbee48348d58597803d7abc9","f7ecded5c66047d28ed6466b543c40e0743abe81d109254dcf845d4c2c7853c5","2b071c59a0a0ae76b0eadb2bad23bad4580b69c3601b630c2eaf0613afa83f92"]);/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var JF;(function(e){(function(t){var n=typeof rn=="object"?rn:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=i(e);typeof n.Reflect>"u"?n.Reflect=e:r=i(n.Reflect,r),t(r);function i(o,s){return function(a,l){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:l}),s&&s(a,l)}}})(function(t){var n=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",i=r&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=r&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,l=!s&&!a,c={create:s?function(){return St(Object.create(null))}:a?function(){return St({__proto__:null})}:function(){return St({})},has:l?function(se,fe){return n.call(se,fe)}:function(se,fe){return fe in se},get:l?function(se,fe){return n.call(se,fe)?se[fe]:void 0}:function(se,fe){return se[fe]}},u=Object.getPrototypeOf(Function),d=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",g=!d&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:On(),p=!d&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Qt(),m=!d&&typeof WeakMap=="function"?WeakMap:ut(),v=new m;function y(se,fe,we,Te){if(Re(we)){if(!Y(se))throw new TypeError;if(!Ge(fe))throw new TypeError;return Ce(se,fe)}else{if(!Y(se))throw new TypeError;if(!re(fe))throw new TypeError;if(!re(Te)&&!Re(Te)&&!Oe(Te))throw new TypeError;return Oe(Te)&&(Te=void 0),we=F(we),Ue(se,fe,we,Te)}}t("decorate",y);function I(se,fe){function we(Te,qe){if(!re(Te))throw new TypeError;if(!Re(qe)&&!ke(qe))throw new TypeError;X(se,fe,Te,qe)}return we}t("metadata",I);function b(se,fe,we,Te){if(!re(we))throw new TypeError;return Re(Te)||(Te=F(Te)),X(se,fe,we,Te)}t("defineMetadata",b);function A(se,fe,we){if(!re(fe))throw new TypeError;return Re(we)||(we=F(we)),ze(se,fe,we)}t("hasMetadata",A);function N(se,fe,we){if(!re(fe))throw new TypeError;return Re(we)||(we=F(we)),Ee(se,fe,we)}t("hasOwnMetadata",N);function L(se,fe,we){if(!re(fe))throw new TypeError;return Re(we)||(we=F(we)),P(se,fe,we)}t("getMetadata",L);function G(se,fe,we){if(!re(fe))throw new TypeError;return Re(we)||(we=F(we)),oe(se,fe,we)}t("getOwnMetadata",G);function W(se,fe){if(!re(se))throw new TypeError;return Re(fe)||(fe=F(fe)),M(se,fe)}t("getMetadataKeys",W);function j(se,fe){if(!re(se))throw new TypeError;return Re(fe)||(fe=F(fe)),D(se,fe)}t("getOwnMetadataKeys",j);function O(se,fe,we){if(!re(fe))throw new TypeError;Re(we)||(we=F(we));var Te=$e(fe,we,!1);if(Re(Te)||!Te.delete(se))return!1;if(Te.size>0)return!0;var qe=v.get(fe);return qe.delete(we),qe.size>0||v.delete(fe),!0}t("deleteMetadata",O);function Ce(se,fe){for(var we=se.length-1;we>=0;--we){var Te=se[we],qe=Te(fe);if(!Re(qe)&&!Oe(qe)){if(!Ge(qe))throw new TypeError;fe=qe}}return fe}function Ue(se,fe,we,Te){for(var qe=se.length-1;qe>=0;--qe){var Jt=se[qe],ct=Jt(fe,we,Te);if(!Re(ct)&&!Oe(ct)){if(!re(ct))throw new TypeError;Te=ct}}return Te}function $e(se,fe,we){var Te=v.get(se);if(Re(Te)){if(!we)return;Te=new g,v.set(se,Te)}var qe=Te.get(fe);if(Re(qe)){if(!we)return;qe=new g,Te.set(fe,qe)}return qe}function ze(se,fe,we){var Te=Ee(se,fe,we);if(Te)return!0;var qe=Et(fe);return Oe(qe)?!1:ze(se,qe,we)}function Ee(se,fe,we){var Te=$e(fe,we,!1);return Re(Te)?!1:B(Te.has(se))}function P(se,fe,we){var Te=Ee(se,fe,we);if(Te)return oe(se,fe,we);var qe=Et(fe);if(!Oe(qe))return P(se,qe,we)}function oe(se,fe,we){var Te=$e(fe,we,!1);if(!Re(Te))return Te.get(se)}function X(se,fe,we,Te){var qe=$e(we,Te,!0);qe.set(se,fe)}function M(se,fe){var we=D(se,fe),Te=Et(se);if(Te===null)return we;var qe=M(Te,fe);if(qe.length<=0)return we;if(we.length<=0)return qe;for(var Jt=new p,ct=[],xe=0,Ye=we;xe<Ye.length;xe++){var Gt=Ye[xe],ft=Jt.has(Gt);ft||(Jt.add(Gt),ct.push(Gt))}for(var Je=0,Hn=qe;Je<Hn.length;Je++){var Gt=Hn[Je],ft=Jt.has(Gt);ft||(Jt.add(Gt),ct.push(Gt))}return ct}function D(se,fe){var we=[],Te=$e(se,fe,!1);if(Re(Te))return we;for(var qe=Te.keys(),Jt=ot(qe),ct=0;;){var xe=Wt(Jt);if(!xe)return we.length=ct,we;var Ye=bt(xe);try{we[ct]=Ye}catch(Gt){try{pt(Jt)}finally{throw Gt}}ct++}}function ue(se){if(se===null)return 1;switch(typeof se){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return se===null?1:6;default:return 6}}function Re(se){return se===void 0}function Oe(se){return se===null}function pe(se){return typeof se=="symbol"}function re(se){return typeof se=="object"?se!==null:typeof se=="function"}function q(se,fe){switch(ue(se)){case 0:return se;case 1:return se;case 2:return se;case 3:return se;case 4:return se;case 5:return se}var we=fe===3?"string":fe===5?"number":"default",Te=dt(se,i);if(Te!==void 0){var qe=Te.call(se,we);if(re(qe))throw new TypeError;return qe}return Be(se,we==="default"?"number":we)}function Be(se,fe){if(fe==="string"){var we=se.toString;if(Se(we)){var Te=we.call(se);if(!re(Te))return Te}var qe=se.valueOf;if(Se(qe)){var Te=qe.call(se);if(!re(Te))return Te}}else{var qe=se.valueOf;if(Se(qe)){var Te=qe.call(se);if(!re(Te))return Te}var Jt=se.toString;if(Se(Jt)){var Te=Jt.call(se);if(!re(Te))return Te}}throw new TypeError}function B(se){return!!se}function w(se){return""+se}function F(se){var fe=q(se,3);return pe(fe)?fe:w(fe)}function Y(se){return Array.isArray?Array.isArray(se):se instanceof Object?se instanceof Array:Object.prototype.toString.call(se)==="[object Array]"}function Se(se){return typeof se=="function"}function Ge(se){return typeof se=="function"}function ke(se){switch(ue(se)){case 3:return!0;case 4:return!0;default:return!1}}function dt(se,fe){var we=se[fe];if(we!=null){if(!Se(we))throw new TypeError;return we}}function ot(se){var fe=dt(se,o);if(!Se(fe))throw new TypeError;var we=fe.call(se);if(!re(we))throw new TypeError;return we}function bt(se){return se.value}function Wt(se){var fe=se.next();return fe.done?!1:fe}function pt(se){var fe=se.return;fe&&fe.call(se)}function Et(se){var fe=Object.getPrototypeOf(se);if(typeof se!="function"||se===u||fe!==u)return fe;var we=se.prototype,Te=we&&Object.getPrototypeOf(we);if(Te==null||Te===Object.prototype)return fe;var qe=Te.constructor;return typeof qe!="function"||qe===se?fe:qe}function On(){var se={},fe=[],we=function(){function ct(xe,Ye,Gt){this._index=0,this._keys=xe,this._values=Ye,this._selector=Gt}return ct.prototype["@@iterator"]=function(){return this},ct.prototype[o]=function(){return this},ct.prototype.next=function(){var xe=this._index;if(xe>=0&&xe<this._keys.length){var Ye=this._selector(this._keys[xe],this._values[xe]);return xe+1>=this._keys.length?(this._index=-1,this._keys=fe,this._values=fe):this._index++,{value:Ye,done:!1}}return{value:void 0,done:!0}},ct.prototype.throw=function(xe){throw this._index>=0&&(this._index=-1,this._keys=fe,this._values=fe),xe},ct.prototype.return=function(xe){return this._index>=0&&(this._index=-1,this._keys=fe,this._values=fe),{value:xe,done:!0}},ct}();return function(){function ct(){this._keys=[],this._values=[],this._cacheKey=se,this._cacheIndex=-2}return Object.defineProperty(ct.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ct.prototype.has=function(xe){return this._find(xe,!1)>=0},ct.prototype.get=function(xe){var Ye=this._find(xe,!1);return Ye>=0?this._values[Ye]:void 0},ct.prototype.set=function(xe,Ye){var Gt=this._find(xe,!0);return this._values[Gt]=Ye,this},ct.prototype.delete=function(xe){var Ye=this._find(xe,!1);if(Ye>=0){for(var Gt=this._keys.length,ft=Ye+1;ft<Gt;ft++)this._keys[ft-1]=this._keys[ft],this._values[ft-1]=this._values[ft];return this._keys.length--,this._values.length--,xe===this._cacheKey&&(this._cacheKey=se,this._cacheIndex=-2),!0}return!1},ct.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=se,this._cacheIndex=-2},ct.prototype.keys=function(){return new we(this._keys,this._values,Te)},ct.prototype.values=function(){return new we(this._keys,this._values,qe)},ct.prototype.entries=function(){return new we(this._keys,this._values,Jt)},ct.prototype["@@iterator"]=function(){return this.entries()},ct.prototype[o]=function(){return this.entries()},ct.prototype._find=function(xe,Ye){return this._cacheKey!==xe&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=xe)),this._cacheIndex<0&&Ye&&(this._cacheIndex=this._keys.length,this._keys.push(xe),this._values.push(void 0)),this._cacheIndex},ct}();function Te(ct,xe){return ct}function qe(ct,xe){return xe}function Jt(ct,xe){return[ct,xe]}}function Qt(){return function(){function se(){this._map=new g}return Object.defineProperty(se.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),se.prototype.has=function(fe){return this._map.has(fe)},se.prototype.add=function(fe){return this._map.set(fe,fe),this},se.prototype.delete=function(fe){return this._map.delete(fe)},se.prototype.clear=function(){this._map.clear()},se.prototype.keys=function(){return this._map.keys()},se.prototype.values=function(){return this._map.values()},se.prototype.entries=function(){return this._map.entries()},se.prototype["@@iterator"]=function(){return this.keys()},se.prototype[o]=function(){return this.keys()},se}()}function ut(){var se=16,fe=c.create(),we=Te();return function(){function Ye(){this._key=Te()}return Ye.prototype.has=function(Gt){var ft=qe(Gt,!1);return ft!==void 0?c.has(ft,this._key):!1},Ye.prototype.get=function(Gt){var ft=qe(Gt,!1);return ft!==void 0?c.get(ft,this._key):void 0},Ye.prototype.set=function(Gt,ft){var Je=qe(Gt,!0);return Je[this._key]=ft,this},Ye.prototype.delete=function(Gt){var ft=qe(Gt,!1);return ft!==void 0?delete ft[this._key]:!1},Ye.prototype.clear=function(){this._key=Te()},Ye}();function Te(){var Ye;do Ye="@@WeakMap@@"+xe();while(c.has(fe,Ye));return fe[Ye]=!0,Ye}function qe(Ye,Gt){if(!n.call(Ye,we)){if(!Gt)return;Object.defineProperty(Ye,we,{value:c.create()})}return Ye[we]}function Jt(Ye,Gt){for(var ft=0;ft<Gt;++ft)Ye[ft]=Math.random()*255|0;return Ye}function ct(Ye){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Ye)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Ye)):Jt(new Uint8Array(Ye),Ye):Jt(new Array(Ye),Ye)}function xe(){var Ye=ct(se);Ye[6]=Ye[6]&79|64,Ye[8]=Ye[8]&191|128;for(var Gt="",ft=0;ft<se;++ft){var Je=Ye[ft];(ft===4||ft===6||ft===8)&&(Gt+="-"),Je<16&&(Gt+="0"),Gt+=Je.toString(16).toLowerCase()}return Gt}}function St(se){return se.__=void 0,delete se.__,se}})})(JF||(JF={}));function jt(e,t,n){return e instanceof Object&&t in e?e[t]:n}function Qo(e,t=0,n=e.byteLength-t,r=!1){let i="";for(const o of new Uint8Array(e,t,n)){const s=o.toString(16).toUpperCase();s.length===1&&(i+="0"),i+=s,r&&(i+=" ")}return i.trim()}function Xs(e,t,n,r){return t instanceof ArrayBuffer?t.byteLength===0?(e.error="Wrong parameter: inputBuffer has zero length",!1):n<0?(e.error="Wrong parameter: inputOffset less than zero",!1):r<0?(e.error="Wrong parameter: inputLength less than zero",!1):t.byteLength-n-r<0?(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)}function af(e,t){let n=0;if(e.length===1)return e[0];for(let r=e.length-1;r>=0;r--)n+=e[e.length-1-r]*Math.pow(2,t*r);return n}function Ll(e,t,n=-1){const r=n;let i=e,o=0,s=Math.pow(2,t);for(let a=1;a<8;a++){if(e<s){let l;if(r<0)l=new ArrayBuffer(a),o=a;else{if(r<a)return new ArrayBuffer(0);l=new ArrayBuffer(r),o=r}const c=new Uint8Array(l);for(let u=a-1;u>=0;u--){const d=Math.pow(2,u*t);c[o-u-1]=Math.floor(i/d),i-=c[o-u-1]*d}return l}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function Zd(...e){let t=0,n=0;for(const o of e)t+=o.byteLength;const r=new ArrayBuffer(t),i=new Uint8Array(r);for(const o of e)i.set(new Uint8Array(o),n),n+=o.byteLength;return r}function E_(...e){let t=0,n=0;for(const o of e)t+=o.length;const r=new ArrayBuffer(t),i=new Uint8Array(r);for(const o of e)i.set(o,n),n+=o.length;return i}function iz(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=e[0]===255&&e[1]&128,l=e[0]===0&&(e[1]&128)===0;(a||l)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let a=0;a<this.valueHex.byteLength;a++)n[a]=0;n[0]=e[0]&128;const r=af(n,8),i=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)o[a]=e[a];return o[0]&=127,af(o,8)-r}function lze(e){const t=e<0?e*-1:e;let n=128;for(let r=1;r<8;r++){if(t<=n){if(e<0){const s=n-t,a=Ll(s,8,r),l=new Uint8Array(a);return l[0]|=128,a}let i=Ll(t,8,r),o=new Uint8Array(i);if(o[0]&128){const s=i.slice(0),a=new Uint8Array(s);i=new ArrayBuffer(i.byteLength+1),o=new Uint8Array(i);for(let l=0;l<s.byteLength;l++)o[l+1]=a[l];o[0]=0}return i}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function jF(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Hi(e,t){const n=e.toString(10);if(t<n.length)return"";const r=t-n.length,i=new Array(r);for(let s=0;s<r;s++)i[s]="0";return i.join("").concat(n)}const Xg=[new Uint8Array([1])],QF="0123456789";class yo{constructor(t={}){this.blockLength=jt(t,"blockLength",0),this.error=jt(t,"error",""),this.warnings=jt(t,"warnings",[]),"valueBeforeDecode"in t?this.valueBeforeDecode=t.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}static blockName(){return"baseBlock"}toJSON(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Qo(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}const qo=e=>class extends e{constructor(n={}){super(n),this.isHexOnly=jt(n,"isHexOnly",!1),"valueHex"in n?this.valueHex=n.valueHex.slice(0):this.valueHex=new ArrayBuffer(0)}static blockName(){return"hexBlock"}fromBER(n,r,i){return Xs(this,n,r,i)===!1?-1:new Uint8Array(n,r,i).length===0?(this.warnings.push("Zero buffer length"),r):(this.valueHex=n.slice(r,r+i),this.blockLength=i,r+i)}toBER(n=!1){return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):n===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}toJSON(){let n={};try{n=super.toJSON()}catch{}return n.blockName=this.constructor.blockName(),n.isHexOnly=this.isHexOnly,n.valueHex=Qo(this.valueHex,0,this.valueHex.byteLength),n}};class cze extends qo(yo){constructor(t={}){super(),"idBlock"in t?(this.isHexOnly=jt(t.idBlock,"isHexOnly",!1),this.valueHex=jt(t.idBlock,"valueHex",new ArrayBuffer(0)),this.tagClass=jt(t.idBlock,"tagClass",-1),this.tagNumber=jt(t.idBlock,"tagNumber",-1),this.isConstructed=jt(t.idBlock,"isConstructed",!1)):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}static blockName(){return"identificationBlock"}toBER(t=!1){let n=0,r,i;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),i=new Uint8Array(r),!t){let o=this.tagNumber;o&=31,n|=o,i[0]=n}return r}if(this.isHexOnly===!1){const o=Ll(this.tagNumber,7),s=new Uint8Array(o),a=o.byteLength;if(r=new ArrayBuffer(a+1),i=new Uint8Array(r),i[0]=n|31,!t){for(let l=0;l<a-1;l++)i[l+1]=s[l]|128;i[a]=s[a-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),i=new Uint8Array(r),i[0]=n|31,t===!1){const o=new Uint8Array(this.valueHex);for(let s=0;s<o.length-1;s++)i[s+1]=o[s]|128;i[this.valueHex.byteLength]=o[o.length-1]}return r}fromBER(t,n,r){if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const s=i[0]&31;if(s!==31)this.tagNumber=s,this.blockLength=1;else{let a=1;this.valueHex=new ArrayBuffer(255);let l=255,c=new Uint8Array(this.valueHex);for(;i[a]&128;){if(c[a-1]=i[a]&127,a++,a>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(a===l){l+=255;const g=new ArrayBuffer(l),p=new Uint8Array(g);for(let m=0;m<c.length;m++)p[m]=c[m];this.valueHex=new ArrayBuffer(l),c=new Uint8Array(this.valueHex)}}this.blockLength=a+1,c[a-1]=i[a]&127;const u=new ArrayBuffer(a),d=new Uint8Array(u);for(let g=0;g<a;g++)d[g]=c[g];this.valueHex=new ArrayBuffer(a),c=new Uint8Array(this.valueHex),c.set(d),this.blockLength<=9?this.tagNumber=af(c,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.blockName=this.constructor.blockName(),t.tagClass=this.tagClass,t.tagNumber=this.tagNumber,t.isConstructed=this.isConstructed,t}}class uze extends yo{constructor(t={}){super(),"lenBlock"in t?(this.isIndefiniteForm=jt(t.lenBlock,"isIndefiniteForm",!1),this.longFormUsed=jt(t.lenBlock,"longFormUsed",!1),this.length=jt(t.lenBlock,"length",0)):(this.isIndefiniteForm=!1,this.longFormUsed=!1,this.length=0)}static blockName(){return"lengthBlock"}fromBER(t,n,r){if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm===!0)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,n+this.blockLength;const o=i[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=i[a+1];return s[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=af(s,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,n+this.blockLength}toBER(t=!1){let n,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),t===!1&&(r=new Uint8Array(n),r[0]=128),n;if(this.longFormUsed===!0){const i=Ll(this.length,8);if(i.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(n=new ArrayBuffer(i.byteLength+1),t===!0)return n;const o=new Uint8Array(i);r=new Uint8Array(n),r[0]=i.byteLength|128;for(let s=0;s<i.byteLength;s++)r[s+1]=o[s];return n}return n=new ArrayBuffer(1),t===!1&&(r=new Uint8Array(n),r[0]=this.length),n}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.blockName=this.constructor.blockName(),t.isIndefiniteForm=this.isIndefiniteForm,t.longFormUsed=this.longFormUsed,t.length=this.length,t}}class Ra extends yo{constructor(t={}){super(t)}static blockName(){return"valueBlock"}fromBER(t,n,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}toBER(t=!1){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}class ir extends yo{constructor(t={},n=Ra){super(t),"name"in t&&(this.name=t.name),"optional"in t&&(this.optional=t.optional),"primitiveSchema"in t&&(this.primitiveSchema=t.primitiveSchema),this.idBlock=new cze(t),this.lenBlock=new uze(t),this.valueBlock=new n(t)}static blockName(){return"BaseBlock"}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}toBER(t=!1){let n;const r=this.idBlock.toBER(t),i=this.valueBlock.toBER(!0);this.lenBlock.length=i.byteLength;const o=this.lenBlock.toBER(t);n=Zd(r,o);let s;if(t===!1?s=this.valueBlock.toBER(t):s=new ArrayBuffer(this.lenBlock.length),n=Zd(n,s),this.lenBlock.isIndefiniteForm===!0){const a=new ArrayBuffer(2);if(t===!1){const l=new Uint8Array(a);l[0]=0,l[1]=0}n=Zd(n,a)}return n}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.idBlock=this.idBlock.toJSON(),t.lenBlock=this.lenBlock.toJSON(),t.valueBlock=this.valueBlock.toJSON(),"name"in this&&(t.name=this.name),"optional"in this&&(t.optional=this.optional),"primitiveSchema"in this&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(){return`${this.constructor.blockName()} : ${Qo(this.valueBlock.valueHex)}`}}class dze extends Ra{constructor(t={}){super(t),"valueHex"in t?this.valueHex=t.valueHex.slice(0):this.valueHex=new ArrayBuffer(0),this.isHexOnly=jt(t,"isHexOnly",!0)}fromBER(t,n,r){if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);if(i.length===0)return this.warnings.push("Zero buffer length"),n;this.valueHex=new ArrayBuffer(i.length);const o=new Uint8Array(this.valueHex);for(let s=0;s<i.length;s++)o[s]=i[s];return this.blockLength=r,n+r}toBER(t=!1){return this.valueHex.slice(0)}static blockName(){return"PrimitiveValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.valueHex=Qo(this.valueHex,0,this.valueHex.byteLength),t.isHexOnly=this.isHexOnly,t}}class Np extends ir{constructor(t={}){super(t,dze),this.idBlock.isConstructed=!1}static blockName(){return"PRIMITIVE"}}class Rc extends Ra{constructor(t={}){super(t),this.value=jt(t,"value",[]),this.isIndefiniteForm=jt(t,"isIndefiniteForm",!1)}fromBER(t,n,r){const i=n,o=r;if(Xs(this,t,n,r)===!1)return-1;if(new Uint8Array(t,n,r).length===0)return this.warnings.push("Zero buffer length"),n;function a(c,u){return c===!0?1:u}let l=n;for(;a(this.isIndefiniteForm,r)>0;){const c=gz(t,l,r);if(c.offset===-1)return this.error=c.result.error,this.warnings.concat(c.result.warnings),-1;if(l=c.offset,this.blockLength+=c.result.blockLength,r-=c.result.blockLength,this.value.push(c.result),this.isIndefiniteForm===!0&&c.result.constructor.blockName()===lf.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===lf.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=t.slice(i,i+o),l}toBER(t=!1){let n=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(t);n=Zd(n,i)}return n}static blockName(){return"ConstructedValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}t.isIndefiniteForm=this.isIndefiniteForm,t.value=[];for(let n=0;n<this.value.length;n++)t.value.push(this.value[n].toJSON());return t}}class Ei extends ir{constructor(t={}){super(t,Rc),this.idBlock.isConstructed=!0}static blockName(){return"CONSTRUCTED"}fromBER(t,n,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}toString(){const t=[];for(const r of this.valueBlock.value)t.push(r.toString().split(`
`).map(i=>`  ${i}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.blockName();return t.length?`${n} :
${t.join(`
`)}`:`${n} :`}}class fze extends Ra{constructor(t={}){super(t)}fromBER(t,n,r){return n}toBER(t=!1){return new ArrayBuffer(0)}static blockName(){return"EndOfContentValueBlock"}}class lf extends ir{constructor(t={}){super(t,fze),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}static blockName(){return"EndOfContent"}}class gze extends Ra{constructor(t={}){if(super(t),this.value=jt(t,"value",!1),this.isHexOnly=jt(t,"isHexOnly",!1),"valueHex"in t)this.valueHex=t.valueHex.slice(0);else if(this.valueHex=new ArrayBuffer(1),this.value===!0){const n=new Uint8Array(this.valueHex);n[0]=255}}fromBER(t,n,r){if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(i.length);const o=new Uint8Array(this.valueHex);for(let s=0;s<i.length;s++)o[s]=i[s];return iz.call(this)!==0?this.value=!0:this.value=!1,this.blockLength=r,n+r}toBER(t=!1){return this.valueHex}static blockName(){return"BooleanValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.value=this.value,t.isHexOnly=this.isHexOnly,t.valueHex=Qo(this.valueHex,0,this.valueHex.byteLength),t}}let lZ=class extends ir{constructor(t={}){super(t,gze),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}static blockName(){return"BOOLEAN"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}};class Cl extends Ei{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}static blockName(){return"SEQUENCE"}}let bl=class extends Ei{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}static blockName(){return"SET"}};class cf extends ir{constructor(t={}){super(t,yo),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}static blockName(){return"NULL"}fromBER(t,n,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,n+r>t.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+r}toBER(t=!1){const n=new ArrayBuffer(2);if(t===!0)return n;const r=new Uint8Array(n);return r[0]=5,r[1]=0,n}toString(){return`${this.constructor.blockName()}`}}class hze extends qo(Rc){constructor(t={}){super(t),this.isConstructed=jt(t,"isConstructed",!1)}fromBER(t,n,r){let i=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,i=Rc.prototype.fromBER.call(this,t,n,r),i===-1)return i;for(let o=0;o<this.value.length;o++){const s=this.value[o].constructor.blockName();if(s===lf.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==Gc.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(t,n,r),this.blockLength=r;return i}toBER(t=!1){if(this.isConstructed===!0)return Rc.prototype.toBER.call(this,t);let n=new ArrayBuffer(this.valueHex.byteLength);return t===!0||this.valueHex.byteLength===0||(n=this.valueHex.slice(0)),n}static blockName(){return"OctetStringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.isConstructed=this.isConstructed,t.isHexOnly=this.isHexOnly,t.valueHex=Qo(this.valueHex,0,this.valueHex.byteLength),t}}let Gc=class oz extends ir{constructor(t={}){super(t,hze),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,n,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,r===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const i=t.slice(n,n+r);try{const o=ua(i);o.offset!==-1&&o.offset===r&&(this.valueBlock.value=[o.result])}catch{}}return super.fromBER(t,n,r)}static blockName(){return"OCTET STRING"}isEqual(t){return!(!(t instanceof oz)||JSON.stringify(this)!==JSON.stringify(t))}toString(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Ei.prototype.toString.call(this):`${this.constructor.blockName()} : ${Qo(this.valueBlock.valueHex)}`}};class pze extends qo(Rc){constructor(t={}){super(t),this.unusedBits=jt(t,"unusedBits",0),this.isConstructed=jt(t,"isConstructed",!1),this.blockLength=this.valueHex.byteLength}fromBER(t,n,r){if(r===0)return n;let i=-1;if(this.isConstructed===!0){if(i=Rc.prototype.fromBER.call(this,t,n,r),i===-1)return i;for(let a=0;a<this.value.length;a++){const l=this.value[a].constructor.blockName();if(l===lf.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==Nc.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].valueBlock.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return i}if(Xs(this,t,n,r)===!1)return-1;const o=new Uint8Array(t,n,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=t.slice(n+1,n+r);try{const l=ua(a);l.offset!==-1&&l.offset===r-1&&(this.value=[l.result])}catch{}}this.valueHex=new ArrayBuffer(o.length-1);const s=new Uint8Array(this.valueHex);for(let a=0;a<r-1;a++)s[a]=o[a+1];return this.blockLength=o.length,n+r}toBER(t=!1){if(this.isConstructed===!0)return Rc.prototype.toBER.call(this,t);if(t===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(this.valueHex.byteLength===0)return new ArrayBuffer(0);const n=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),i=new Uint8Array(r);i[0]=this.unusedBits;for(let o=0;o<this.valueHex.byteLength;o++)i[o+1]=n[o];return r}static blockName(){return"BitStringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.unusedBits=this.unusedBits,t.isConstructed=this.isConstructed,t.isHexOnly=this.isHexOnly,t.valueHex=Qo(this.valueHex,0,this.valueHex.byteLength),t}}let Nc=class sz extends ir{constructor(t={}){super(t,pze),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}static blockName(){return"BIT STRING"}fromBER(t,n,r){return r===0?n:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,n,r))}isEqual(t){return!(!(t instanceof sz)||JSON.stringify(this)!==JSON.stringify(t))}toString(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Ei.prototype.toString.call(this);{const t=[],n=new Uint8Array(this.valueBlock.valueHex);for(const r of n)t.push(r.toString(2).padStart(8,"0"));return`${this.constructor.blockName()} : ${t.join("")}`}}};class mze extends qo(Ra){constructor(t={}){super(t),"value"in t&&(this.valueDec=t.value)}set valueHex(t){this._valueHex=t.slice(0),t.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,t.byteLength>0&&(this._valueDec=iz.call(this)))}get valueHex(){return this._valueHex}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this._valueHex=lze(t)}get valueDec(){return this._valueDec}fromDER(t,n,r,i=0){const o=this.fromBER(t,n,r);if(o===-1)return o;const s=new Uint8Array(this._valueHex);if(s[0]===0&&s[1]&128){const a=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(a).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}else if(i!==0&&this._valueHex.byteLength<i){i-this._valueHex.byteLength>1&&(i=this._valueHex.byteLength+1);const a=new ArrayBuffer(i);new Uint8Array(a).set(s,i-this._valueHex.byteLength),this._valueHex=a.slice(0)}return o}toDER(t=!1){const n=new Uint8Array(this._valueHex);switch(!0){case(n[0]&128)!==0:{const r=new ArrayBuffer(this._valueHex.byteLength+1),i=new Uint8Array(r);i[0]=0,i.set(n,1),this._valueHex=r.slice(0)}break;case(n[0]===0&&(n[1]&128)===0):{const r=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(r).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=r.slice(0)}break}return this.toBER(t)}fromBER(t,n,r){const i=super.fromBER(t,n,r);return i===-1?i:(this.blockLength=r,n+r)}toBER(t=!1){return this.valueHex.slice(0)}static blockName(){return"IntegerValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.valueDec=this.valueDec,t}toString(){function t(d,g){const p=new Uint8Array([0]);let m=new Uint8Array(d),v=new Uint8Array(g),y=m.slice(0);const I=y.length-1;let b=v.slice(0);const A=b.length-1;let N=0;const L=A<I?I:A;let G=0;for(let W=L;W>=0;W--,G++){switch(!0){case G<b.length:N=y[I-G]+b[A-G]+p[0];break;default:N=y[I-G]+p[0]}switch(p[0]=N/10,!0){case G>=y.length:y=E_(new Uint8Array([N%10]),y);break;default:y[I-G]=N%10}}return p[0]>0&&(y=E_(p,y)),y.slice(0)}function n(d){if(d>=Xg.length)for(let g=Xg.length;g<=d;g++){const p=new Uint8Array([0]);let m=Xg[g-1].slice(0);for(let v=m.length-1;v>=0;v--){const y=new Uint8Array([(m[v]<<1)+p[0]]);p[0]=y[0]/10,m[v]=y[0]%10}p[0]>0&&(m=E_(p,m)),Xg.push(m)}return Xg[d]}function r(d,g){let p=0,m=new Uint8Array(d),v=new Uint8Array(g),y=m.slice(0);const I=y.length-1;let b=v.slice(0);const A=b.length-1;let N,L=0;for(let G=A;G>=0;G--,L++)switch(N=y[I-L]-b[A-L]-p,!0){case N<0:p=1,y[I-L]=N+10;break;default:p=0,y[I-L]=N}if(p>0)for(let G=I-A+1;G>=0;G--,L++)if(N=y[I-L]-p,N<0)p=1,y[I-L]=N+10;else{p=0,y[I-L]=N;break}return y.slice()}const i=this._valueHex.byteLength*8-1;let o=new Uint8Array(this._valueHex.byteLength*8/3),s=0,a;const l=new Uint8Array(this._valueHex);let c="",u=!1;for(let d=this._valueHex.byteLength-1;d>=0;d--){a=l[d];for(let g=0;g<8;g++){if((a&1)===1)switch(s){case i:o=r(n(s),o),c="-";break;default:o=t(o,n(s))}s++,a>>=1}}for(let d=0;d<o.length;d++)o[d]&&(u=!0),u&&(c+=QF.charAt(o[d]));return u===!1&&(c+=QF.charAt(0)),c}}class ca extends ir{constructor(t={}){super(t,mze),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}static blockName(){return"INTEGER"}isEqual(t){return t instanceof ca?this.valueBlock.isHexOnly&&t.valueBlock.isHexOnly?jF(this.valueBlock.valueHex,t.valueBlock.valueHex):this.valueBlock.isHexOnly===t.valueBlock.isHexOnly?this.valueBlock.valueDec===t.valueBlock.valueDec:!1:t instanceof ArrayBuffer?jF(this.valueBlock.valueHex,t):!1}convertToDER(){const t=new ca({valueHex:this.valueBlock.valueHex});return t.valueBlock.toDER(),t}convertFromDER(){const t=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,n=new ca({valueHex:this.valueBlock.valueHex});return n.valueBlock.fromDER(n.valueBlock.valueHex,0,n.valueBlock.valueHex.byteLength,t),n}toString(){const t=Qo(this.valueBlock.valueHex),n=BigInt(`0x${t}`);return`${this.constructor.blockName()} : ${n.toString()}`}}class cZ extends ca{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}static blockName(){return"ENUMERATED"}}class qF extends qo(yo){constructor(t={}){super(t),this.valueDec=jt(t,"valueDec",-1),this.isFirstSid=jt(t,"isFirstSid",!1)}static blockName(){return"sidBlock"}fromBER(t,n,r){if(r===0)return n;if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);this.valueHex=new ArrayBuffer(r);let o=new Uint8Array(this.valueHex);for(let l=0;l<r&&(o[l]=i[l]&127,this.blockLength++,!!(i[l]&128));l++);const s=new ArrayBuffer(this.blockLength),a=new Uint8Array(s);for(let l=0;l<this.blockLength;l++)a[l]=o[l];return this.valueHex=s.slice(0),o=new Uint8Array(this.valueHex),i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(o[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=af(o,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(t=!1){let n,r;if(this.isHexOnly){if(t===!0)return new ArrayBuffer(this.valueHex.byteLength);const o=new Uint8Array(this.valueHex);n=new ArrayBuffer(this.blockLength),r=new Uint8Array(n);for(let s=0;s<this.blockLength-1;s++)r[s]=o[s]|128;return r[this.blockLength-1]=o[this.blockLength-1],n}const i=Ll(this.valueDec,7);if(i.byteLength===0)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(n=new ArrayBuffer(i.byteLength),t===!1){const o=new Uint8Array(i);r=new Uint8Array(n);for(let s=0;s<i.byteLength-1;s++)r[s]=o[s]|128;r[i.byteLength-1]=o[i.byteLength-1]}return n}toString(){let t="";if(this.isHexOnly===!0)t=Qo(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",n-=40):(t="2.",n-=80),t+=n.toString()}else t=this.valueDec.toString();return t}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.valueDec=this.valueDec,t.isFirstSid=this.isFirstSid,t}}class yze extends Ra{constructor(t={}){super(t),this.fromString(jt(t,"value",""))}fromBER(t,n,r){let i=n;for(;r>0;){const o=new qF;if(i=o.fromBER(t,i,r),i===-1)return this.blockLength=0,this.error=o.error,i;this.value.length===0&&(o.isFirstSid=!0),this.blockLength+=o.blockLength,r-=o.blockLength,this.value.push(o)}return i}toBER(t=!1){let n=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(t);if(i.byteLength===0)return this.error=this.value[r].error,new ArrayBuffer(0);n=Zd(n,i)}return n}fromString(t){this.value=[];let n=0,r=0,i="",o=!1;do if(r=t.indexOf(".",n),r===-1?i=t.substr(n):i=t.substr(n,r-n),n=r+1,o){const s=this.value[0];let a=0;switch(s.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:return this.value=[],!1}const l=parseInt(i,10);if(isNaN(l))return!0;s.valueDec=l+a,o=!1}else{const s=new qF;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.length===0&&(s.isFirstSid=!0,o=!0),this.value.push(s)}while(r!==-1);return!0}toString(){let t="",n=!1;for(let r=0;r<this.value.length;r++){n=this.value[r].isHexOnly;let i=this.value[r].toString();r!==0&&(t=`${t}.`),n?(i=`{${i}}`,this.value[r].isFirstSid?t=`2.{${i} - 80}`:t+=i):t+=i}return t}static blockName(){return"ObjectIdentifierValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}t.value=this.toString(),t.sidArray=[];for(let n=0;n<this.value.length;n++)t.sidArray.push(this.value[n].toJSON());return t}}class uZ extends ir{constructor(t={}){super(t,yze),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}static blockName(){return"OBJECT IDENTIFIER"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.toString()}`}}class Ize extends qo(yo){constructor(t={}){super(t),this.isHexOnly=!0,this.value=""}static blockName(){return"Utf8StringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.value=this.value,t}}class zl extends ir{constructor(t={}){super(t,Ize),"value"in t&&this.fromString(t.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}static blockName(){return"UTF8String"}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(t));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`)}}fromString(t){const n=unescape(encodeURIComponent(t)),r=n.length;this.valueBlock.valueHex=new ArrayBuffer(r);const i=new Uint8Array(this.valueBlock.valueHex);for(let o=0;o<r;o++)i[o]=n.charCodeAt(o);this.valueBlock.value=t}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class ex extends qo(yo){constructor(t={}){super(t),this.valueDec=jt(t,"valueDec",-1)}static blockName(){return"relativeSidBlock"}fromBER(t,n,r){if(r===0)return n;if(Xs(this,t,n,r)===!1)return-1;const i=new Uint8Array(t,n,r);this.valueHex=new ArrayBuffer(r);let o=new Uint8Array(this.valueHex);for(let l=0;l<r&&(o[l]=i[l]&127,this.blockLength++,!!(i[l]&128));l++);const s=new ArrayBuffer(this.blockLength),a=new Uint8Array(s);for(let l=0;l<this.blockLength;l++)a[l]=o[l];return this.valueHex=s.slice(0),o=new Uint8Array(this.valueHex),i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(o[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=af(o,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(t=!1){let n,r;if(this.isHexOnly){if(t===!0)return new ArrayBuffer(this.valueHex.byteLength);const o=new Uint8Array(this.valueHex);n=new ArrayBuffer(this.blockLength),r=new Uint8Array(n);for(let s=0;s<this.blockLength-1;s++)r[s]=o[s]|128;return r[this.blockLength-1]=o[this.blockLength-1],n}const i=Ll(this.valueDec,7);if(i.byteLength===0)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(n=new ArrayBuffer(i.byteLength),t===!1){const o=new Uint8Array(i);r=new Uint8Array(n);for(let s=0;s<i.byteLength-1;s++)r[s]=o[s]|128;r[i.byteLength-1]=o[i.byteLength-1]}return n}toString(){let t="";return this.isHexOnly===!0?t=Qo(this.valueHex,0,this.valueHex.byteLength):t=this.valueDec.toString(),t}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.valueDec=this.valueDec,t}}class vze extends Ra{constructor(t={}){super(t),this.fromString(jt(t,"value",""))}fromBER(t,n,r){let i=n;for(;r>0;){const o=new ex;if(i=o.fromBER(t,i,r),i===-1)return this.blockLength=0,this.error=o.error,i;this.blockLength+=o.blockLength,r-=o.blockLength,this.value.push(o)}return i}toBER(t=!1){let n=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(t);if(i.byteLength===0)return this.error=this.value[r].error,new ArrayBuffer(0);n=Zd(n,i)}return n}fromString(t){this.value=[];let n=0,r=0,i="";do{r=t.indexOf(".",n),r===-1?i=t.substr(n):i=t.substr(n,r-n),n=r+1;const o=new ex;if(o.valueDec=parseInt(i,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(r!==-1);return!0}toString(){let t="",n=!1;for(let r=0;r<this.value.length;r++){n=this.value[r].isHexOnly;let i=this.value[r].toString();r!==0&&(t=`${t}.`),n&&(i=`{${i}}`),t+=i}return t}static blockName(){return"RelativeObjectIdentifierValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}t.value=this.toString(),t.sidArray=[];for(let n=0;n<this.value.length;n++)t.sidArray.push(this.value[n].toJSON());return t}}class az extends ir{constructor(t={}){super(t,vze),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}static blockName(){return"RelativeObjectIdentifier"}}class Cze extends qo(yo){constructor(t={}){super(t),this.isHexOnly=!0,this.value=""}static blockName(){return"BmpStringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.value=this.value,t}}class dZ extends ir{constructor(t={}){super(t,Cze),"value"in t&&this.fromString(t.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}static blockName(){return"BMPString"}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){const n=t.slice(0),r=new Uint8Array(n);for(let i=0;i<r.length;i+=2){const o=r[i];r[i]=r[i+1],r[i+1]=o}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(n))}fromString(t){const n=t.length;this.valueBlock.valueHex=new ArrayBuffer(n*2);const r=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<n;i++){const o=Ll(t.charCodeAt(i),8),s=new Uint8Array(o);if(s.length>2)continue;const a=2-s.length;for(let l=s.length-1;l>=0;l--)r[i*2+l+a]=s[l]}this.valueBlock.value=t}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class bze extends qo(yo){constructor(t={}){super(t),this.isHexOnly=!0,this.value=""}static blockName(){return"UniversalStringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.value=this.value,t}}class fZ extends ir{constructor(t={}){super(t,bze),"value"in t&&this.fromString(t.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}static blockName(){return"UniversalString"}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){const n=t.slice(0),r=new Uint8Array(n);for(let i=0;i<r.length;i+=4)r[i]=r[i+3],r[i+1]=r[i+2],r[i+2]=0,r[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(t){const n=t.length;this.valueBlock.valueHex=new ArrayBuffer(n*4);const r=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<n;i++){const o=Ll(t.charCodeAt(i),8),s=new Uint8Array(o);if(s.length>4)continue;const a=4-s.length;for(let l=s.length-1;l>=0;l--)r[i*4+l+a]=s[l]}this.valueBlock.value=t}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Aze extends qo(yo){constructor(t={}){super(t),this.value="",this.isHexOnly=!0}static blockName(){return"SimpleStringValueBlock"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.value=this.value,t}}class Ga extends ir{constructor(t={}){super(t,Aze),"value"in t&&this.fromString(t.value)}static blockName(){return"SIMPLESTRING"}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(t))}fromString(t){const n=t.length;this.valueBlock.valueHex=new ArrayBuffer(n);const r=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);this.valueBlock.value=t}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class gZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}static blockName(){return"NumericString"}}class hZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}static blockName(){return"PrintableString"}}class pZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}static blockName(){return"TeletexString"}}class mZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}static blockName(){return"VideotexString"}}class yZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}static blockName(){return"IA5String"}}class IZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}static blockName(){return"GraphicString"}}class wm extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}static blockName(){return"VisibleString"}}class vZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}static blockName(){return"GeneralString"}}class CZ extends Ga{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}static blockName(){return"CharacterString"}}class bZ extends wm{constructor(t={}){if(super(t),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,"value"in t){this.fromString(t.value),this.valueBlock.valueHex=new ArrayBuffer(t.value.length);const n=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<t.value.length;r++)n[r]=t.value.charCodeAt(r)}"valueDate"in t&&(this.fromDate(t.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,new Uint8Array(t)))}toBuffer(){const t=this.toString(),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return n}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){const r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(t);if(r===null){this.error="Wrong input string for convertion";return}const i=parseInt(r[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(){const t=new Array(7);return t[0]=Hi(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=Hi(this.month,2),t[2]=Hi(this.day,2),t[3]=Hi(this.hour,2),t[4]=Hi(this.minute,2),t[5]=Hi(this.second,2),t[6]="Z",t.join("")}static blockName(){return"UTCTime"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.year=this.year,t.month=this.month,t.day=this.day,t.hour=this.hour,t.minute=this.minute,t.second=this.second,t}}class AZ extends wm{constructor(t={}){if(super(t),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,"value"in t){this.fromString(t.value),this.valueBlock.valueHex=new ArrayBuffer(t.value.length);const n=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<t.value.length;r++)n[r]=t.value.charCodeAt(r)}"valueDate"in t&&(this.fromDate(t.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromBER(t,n,r){const i=this.valueBlock.fromBER(t,n,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,new Uint8Array(t)))}toBuffer(){const t=this.toString(),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return n}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds(),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let n=!1,r="",i="",o=0,s,a=0,l=0;if(t[t.length-1]==="Z")r=t.substr(0,t.length-1),n=!0;else{const d=new Number(t[t.length-1]);if(isNaN(d.valueOf()))throw new Error("Wrong input string for convertion");r=t}if(n){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{let d=1,g=r.indexOf("+"),p="";if(g===-1&&(g=r.indexOf("-"),d=-1),g!==-1){if(p=r.substr(g+1),r=r.substr(0,g),p.length!==2&&p.length!==4)throw new Error("Wrong input string for convertion");let m=new Number(p.substr(0,2));if(isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");if(a=d*m,p.length===4){if(m=new Number(p.substr(2,2)),isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");l=d*m}}}let c=r.indexOf(".");if(c===-1&&(c=r.indexOf(",")),c!==-1){const d=new Number(`0${r.substr(c)}`);if(isNaN(d.valueOf()))throw new Error("Wrong input string for convertion");o=d.valueOf(),i=r.substr(0,c)}else i=r;switch(!0){case i.length===8:if(s=/(\d{4})(\d{2})(\d{2})/ig,c!==-1)throw new Error("Wrong input string for convertion");break;case i.length===10:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let d=60*o;this.minute=Math.floor(d),d=60*(d-this.minute),this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case i.length===12:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let d=60*o;this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case i.length===14:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){const d=1e3*o;this.millisecond=Math.floor(d)}break;default:throw new Error("Wrong input string for convertion")}const u=s.exec(i);if(u===null)throw new Error("Wrong input string for convertion");for(let d=1;d<u.length;d++)switch(d){case 1:this.year=parseInt(u[d],10);break;case 2:this.month=parseInt(u[d],10);break;case 3:this.day=parseInt(u[d],10);break;case 4:this.hour=parseInt(u[d],10)+a;break;case 5:this.minute=parseInt(u[d],10)+l;break;case 6:this.second=parseInt(u[d],10);break;default:throw new Error("Wrong input string for convertion")}if(n===!1){const d=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=d.getUTCFullYear(),this.month=d.getUTCMonth(),this.day=d.getUTCDay(),this.hour=d.getUTCHours(),this.minute=d.getUTCMinutes(),this.second=d.getUTCSeconds(),this.millisecond=d.getUTCMilliseconds()}}toString(){const t=[];return t.push(Hi(this.year,4)),t.push(Hi(this.month,2)),t.push(Hi(this.day,2)),t.push(Hi(this.hour,2)),t.push(Hi(this.minute,2)),t.push(Hi(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(Hi(this.millisecond,3))),t.push("Z"),t.join("")}static blockName(){return"GeneralizedTime"}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.year=this.year,t.month=this.month,t.day=this.day,t.hour=this.hour,t.minute=this.minute,t.second=this.second,t.millisecond=this.millisecond,t}}class lz extends zl{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}static blockName(){return"DATE"}}class cz extends zl{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}static blockName(){return"TimeOfDay"}}class uz extends zl{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}static blockName(){return"DateTime"}}class dz extends zl{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}static blockName(){return"Duration"}}class fz extends zl{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}static blockName(){return"TIME"}}class SZ{constructor(t={}){this.value=jt(t,"value",[]),this.optional=jt(t,"optional",!1)}}class Zp{constructor(t={}){this.name=jt(t,"name",""),this.optional=jt(t,"optional",!1)}}class iC{constructor(t={}){this.name=jt(t,"name",""),this.optional=jt(t,"optional",!1),this.value=jt(t,"value",new Zp),this.local=jt(t,"local",!1)}}class Sze{constructor(t={}){this.data=jt(t,"data",new ArrayBuffer(0))}fromBER(t,n,r){return this.data=t.slice(n,r),n+r}toBER(t=!1){return this.data}}function gz(e,t,n){const r=t;function i(u,d){if(u instanceof d)return u;const g=new d;return g.idBlock=u.idBlock,g.lenBlock=u.lenBlock,g.warnings=u.warnings,g.valueBeforeDecode=u.valueBeforeDecode.slice(0),g}let o=new ir({},Object);const s=new yo;if(Xs(s,e,t,n)===!1)return o.error=s.error,{offset:-1,result:o};if(new Uint8Array(e,t,n).length===0)return o.error="Zero buffer length",{offset:-1,result:o};let l=o.idBlock.fromBER(e,t,n);if(o.warnings.concat(o.idBlock.warnings),l===-1)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=l,n-=o.idBlock.blockLength,l=o.lenBlock.fromBER(e,t,n),o.warnings.concat(o.lenBlock.warnings),l===-1)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=l,n-=o.lenBlock.blockLength,o.idBlock.isConstructed===!1&&o.lenBlock.isIndefiniteForm===!0)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let c=ir;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&o.idBlock.isHexOnly===!1)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed===!0&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};c=lf;break;case 1:c=lZ;break;case 2:c=ca;break;case 3:c=Nc;break;case 4:c=Gc;break;case 5:c=cf;break;case 6:c=uZ;break;case 10:c=cZ;break;case 12:c=zl;break;case 13:c=az;break;case 14:c=fz;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:c=Cl;break;case 17:c=bl;break;case 18:c=gZ;break;case 19:c=hZ;break;case 20:c=pZ;break;case 21:c=mZ;break;case 22:c=yZ;break;case 23:c=bZ;break;case 24:c=AZ;break;case 25:c=IZ;break;case 26:c=wm;break;case 27:c=vZ;break;case 28:c=fZ;break;case 29:c=CZ;break;case 30:c=dZ;break;case 31:c=lz;break;case 32:c=cz;break;case 33:c=uz;break;case 34:c=dz;break;default:{let u;o.idBlock.isConstructed===!0?u=new Ei:u=new Np,u.idBlock=o.idBlock,u.lenBlock=o.lenBlock,u.warnings=o.warnings,o=u}}break;case 2:case 3:case 4:default:o.idBlock.isConstructed===!0?c=Ei:c=Np}return o=i(o,c),l=o.fromBER(e,t,o.lenBlock.isIndefiniteForm===!0?n:o.lenBlock.length),o.valueBeforeDecode=e.slice(r,r+o.blockLength),{offset:l,result:o}}function ua(e){if(e.byteLength===0){const t=new ir({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return gz(e,0,e.byteLength)}function Ac(e,t,n){if(n instanceof SZ){for(let o=0;o<n.value.length;o++)if(Ac(e,t,n.value[o]).verified===!0)return{verified:!0,result:e};{const o={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty("name")&&(o.name=n.name),o}}if(n instanceof Zp)return n.hasOwnProperty("name")&&(e[n.name]=t),{verified:!0,result:e};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.toBER(!1);if(r.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(r,0,r.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(n.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(n.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(n.idBlock.isHexOnly===!0){if(!("valueHex"in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const o=new Uint8Array(n.idBlock.valueHex),s=new Uint8Array(t.idBlock.valueHex);if(o.length!==s.length)return{verified:!1,result:e};for(let a=0;a<o.length;a++)if(o[a]!==s[1])return{verified:!1,result:e}}if(n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&(e[n.name]=t)),n.idBlock.isConstructed===!0){let o=0,s={verified:!1},a=n.valueBlock.value.length;if(a>0&&n.valueBlock.value[0]instanceof iC&&(a=t.valueBlock.value.length),a===0)return{verified:!0,result:e};if(t.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let l=!0;for(let c=0;c<n.valueBlock.value.length;c++)l=l&&(n.valueBlock.value[c].optional||!1);return l===!0?{verified:!0,result:e}:(n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&delete e[n.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let l=0;l<a;l++)if(l-o>=t.valueBlock.value.length){if(n.valueBlock.value[l].optional===!1){const c={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&(delete e[n.name],c.name=n.name)),c}}else if(n.valueBlock.value[0]instanceof iC){if(s=Ac(e,t.valueBlock.value[l],n.valueBlock.value[0].value),s.verified===!1)if(n.valueBlock.value[0].optional===!0)o++;else return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&delete e[n.name]),s;if("name"in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let c={};"local"in n.valueBlock.value[0]&&n.valueBlock.value[0].local===!0?c=t:c=e,typeof c[n.valueBlock.value[0].name]>"u"&&(c[n.valueBlock.value[0].name]=[]),c[n.valueBlock.value[0].name].push(t.valueBlock.value[l])}}else if(s=Ac(e,t.valueBlock.value[l-o],n.valueBlock.value[l]),s.verified===!1)if(n.valueBlock.value[l].optional===!0)o++;else return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&delete e[n.name]),s;if(s.verified===!1){const l={verified:!1,result:e};return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&(delete e[n.name],l.name=n.name)),l}return{verified:!0,result:e}}if("primitiveSchema"in n&&"valueHex"in t.valueBlock){const o=ua(t.valueBlock.valueHex);if(o.offset===-1){const s={verified:!1,result:o.result};return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name!==""&&(delete e[n.name],s.name=n.name)),s}return Ac(e,o.result,n.primitiveSchema)}return{verified:!0,result:e}}function _ze(e,t){if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=ua(e);return n.offset===-1?{verified:!1,result:n.result}:Ac(n.result,n.result,t)}function wze(e){}const hz=Object.freeze(Object.defineProperty({__proto__:null,Any:Zp,BaseBlock:ir,BitString:Nc,BmpString:dZ,Boolean:lZ,CharacterString:CZ,Choice:SZ,Constructed:Ei,DATE:lz,DateTime:uz,Duration:dz,EndOfContent:lf,Enumerated:cZ,GeneralString:vZ,GeneralizedTime:AZ,GraphicString:IZ,HexBlock:qo,IA5String:yZ,Integer:ca,Null:cf,NumericString:gZ,ObjectIdentifier:uZ,OctetString:Gc,Primitive:Np,PrintableString:hZ,RawData:Sze,RelativeObjectIdentifier:az,Repeated:iC,Sequence:Cl,Set:bl,TIME:fz,TeletexString:pZ,TimeOfDay:cz,UTCTime:bZ,UniversalString:fZ,Utf8String:zl,ValueBlock:Ra,VideotexString:mZ,VisibleString:wm,compareSchema:Ac,fromBER:ua,fromJSON:wze,verifySchema:_ze},Symbol.toStringTag,{value:"Module"}));var Me;(function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"})(Me||(Me={}));var de;(function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"})(de||(de={}));const Bze={fromASN:e=>e instanceof cf?null:e.valueBeforeDecode,toASN:e=>{if(e===null)return new cf;const t=ua(e);if(t.result.error)throw new Error(t.result.error);return t.result}},Eze={fromASN:e=>e.valueBlock.valueHex.byteLength>4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new ca({value:e})},Rze={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new cZ({value:e})},Gn={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new ca({valueHex:e})},Gze={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Nc({valueHex:e})},Nze={fromASN:e=>e.valueBlock.toString(),toASN:e=>new uZ({value:e})},Zze={fromASN:e=>e.valueBlock.value,toASN:e=>new lZ({value:e})},oC={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Gc({valueHex:e})};function Io(e){return{fromASN:t=>t.valueBlock.value,toASN:t=>new e({value:t})}}const pz=Io(zl),Tze=Io(dZ),Wze=Io(fZ),kze=Io(gZ),Vze=Io(hZ),Oze=Io(pZ),Hze=Io(mZ),Fze=Io(yZ),xze=Io(IZ),Lze=Io(wm),Yze=Io(vZ),Pze=Io(CZ),Xze={fromASN:e=>e.toDate(),toASN:e=>new bZ({valueDate:e})},Uze={fromASN:e=>e.toDate(),toASN:e=>new AZ({valueDate:e})},Dze={fromASN:e=>null,toASN:e=>new cf};function _Z(e){switch(e){case de.Any:return Bze;case de.BitString:return Gze;case de.BmpString:return Tze;case de.Boolean:return Zze;case de.CharacterString:return Pze;case de.Enumerated:return Rze;case de.GeneralString:return Yze;case de.GeneralizedTime:return Uze;case de.GraphicString:return xze;case de.IA5String:return Fze;case de.Integer:return Eze;case de.Null:return Dze;case de.NumericString:return kze;case de.ObjectIdentifier:return Nze;case de.OctetString:return oC;case de.PrintableString:return Vze;case de.TeletexString:return Oze;case de.UTCTime:return Xze;case de.UniversalString:return Wze;case de.Utf8String:return pz;case de.VideotexString:return Hze;case de.VisibleString:return Lze;default:return null}}class Kt{static isArrayBuffer(t){return Object.prototype.toString.call(t)==="[object ArrayBuffer]"}static toArrayBuffer(t){const n=this.toUint8Array(t);return n.byteOffset||n.length?n.buffer.slice(n.byteOffset,n.byteOffset+n.length):n.buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,n){if(typeof Buffer<"u"&&Buffer.isBuffer(t))return new n(t.buffer,t.byteOffset,t.byteLength);if(this.isArrayBuffer(t))return new n(t);if(this.isArrayBufferView(t))return new n(t.buffer,t.byteOffset,t.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}}class Ft{static isHex(t){return typeof t=="string"&&/^[a-z0-9]+$/i.test(t)}static isBase64(t){return typeof t=="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}static isBase64Url(t){return typeof t=="string"&&/^[a-zA-Z0-9-_]+$/i.test(t)}static ToString(t,n="utf8"){const r=Kt.toUint8Array(t);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(t,n="utf8"){if(!t)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(t){const n=Kt.toUint8Array(t);if(typeof btoa<"u"){const r=this.ToString(n,"binary");return btoa(r)}else return Buffer.from(n).toString("base64")}static FromBase64(t){const n=this.formatString(t);if(!n)return new ArrayBuffer(0);if(!Ft.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(t){const n=this.formatString(t);if(!n)return new ArrayBuffer(0);if(!Ft.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t){const n=unescape(encodeURIComponent(t)),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r.buffer}static ToUtf8String(t){const n=Kt.toUint8Array(t),r=String.fromCharCode.apply(null,n);return decodeURIComponent(escape(r))}static FromBinary(t){const n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}static ToBinary(t){const n=Kt.toUint8Array(t);return String.fromCharCode.apply(null,n)}static ToHex(t){const n=Kt.toUint8Array(t),r="",i=[],o=n.length;for(let s=0;s<o;s++){const a=n[s].toString(16).padStart(2,"0");i.push(a)}return i.join(r)}static FromHex(t){let n=this.formatString(t);if(!n)return new ArrayBuffer(0);if(!Ft.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const r=new Uint8Array(n.length/2);for(let i=0;i<n.length;i=i+2){const o=n.slice(i,i+2);r[i/2]=parseInt(o,16)}return r.buffer}static Base64Padding(t){const n=4-t.length%4;if(n<4)for(let r=0;r<n;r++)t+="=";return t}static formatString(t){return(t==null?void 0:t.replace(/[\n\r\t ]/g,""))||""}}function Kze(...e){const t=e.map(i=>i.byteLength).reduce((i,o)=>i+o),n=new Uint8Array(t);let r=0;return e.map(i=>new Uint8Array(i)).forEach(i=>{for(const o of i)n[r++]=o}),n.buffer}function Mze(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let i=0;i<e.byteLength;i++)if(n[i]!==r[i])return!1;return!0}class Z0{constructor(t,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),t)if(typeof t=="number")this.fromNumber(t);else if(Kt.isBufferSource(t))this.unusedBits=n,this.value=Kt.toArrayBuffer(t);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(t){if(!(t instanceof Nc))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=t.valueBlock.unusedBits,this.value=t.valueBlock.valueHex,this}toASN(){return new Nc({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(t){return new Nc({name:t})}toNumber(){let t="";const n=new Uint8Array(this.value);for(const r of n)t+=r.toString(2).padStart(8,"0");return t=t.split("").reverse().join(""),this.unusedBits&&(t=t.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(t,2)}fromNumber(t){let n=t.toString(2);const r=n.length+7>>3;this.unusedBits=(r<<3)-n.length;const i=new Uint8Array(r);n=n.padStart(r<<3,"0").split("").reverse().join("");let o=0;for(;o<r;)i[o]=parseInt(n.slice(o<<3,(o<<3)+8),2),o++;this.value=i.buffer}}class Xn{constructor(t){typeof t=="number"?this.buffer=new ArrayBuffer(t):Kt.isBufferSource(t)?this.buffer=Kt.toArrayBuffer(t):Array.isArray(t)?this.buffer=new Uint8Array(t):this.buffer=new ArrayBuffer(0)}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(t){if(!(t instanceof Gc))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=t.valueBlock.valueHex,this}toASN(){return new Gc({valueHex:this.buffer})}toSchema(t){return new Gc({name:t})}}function sa(e){return e&&e.prototype?e.prototype.toASN&&e.prototype.fromASN?!0:sa(e.prototype):!!(e&&e.toASN&&e.fromASN)}function mz(e){var t;if(e){const n=Object.getPrototypeOf(e);return((t=n==null?void 0:n.prototype)===null||t===void 0?void 0:t.constructor)===Array?!0:mz(n)}return!1}function $ze(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let i=0;i<e.byteLength;i++)if(n[i]!==r[i])return!1;return!0}class zze{constructor(){this.items=new WeakMap}has(t){return this.items.has(t)}get(t){var n,r,i,o;const s=this.items.get(t);if(!s)throw new Error(`Cannot get schema for '${(o=(i=(r=(n=t)===null||n===void 0?void 0:n.prototype)===null||r===void 0?void 0:r.constructor)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:t}' target`);return s}cache(t){const n=this.get(t);n.schema||(n.schema=this.create(t,!0))}createDefault(t){const n={type:Me.Sequence,items:{}},r=this.findParentSchema(t);return r&&(Object.assign(n,r),n.items=Object.assign({},n.items,r.items)),n}create(t,n){const r=this.items.get(t)||this.createDefault(t),i=[];for(const o in r.items){const s=r.items[o],a=n?o:"";let l;if(typeof s.type=="number"){const u=de[s.type],d=hz[u];if(!d)throw new Error(`Cannot get ASN1 class by name '${u}'`);l=new d({name:a})}else sa(s.type)?l=new s.type().toSchema(a):s.optional?this.get(s.type).type===Me.Choice?l=new Zp({name:a}):(l=this.create(s.type,!1),l.name=a):l=new Zp({name:a});const c=!!s.optional||s.defaultValue!==void 0;if(s.repeated){l.name="";const u=s.repeated==="set"?bl:Cl;l=new u({name:"",value:[new iC({name:a,value:l})]})}if(s.context!==null&&s.context!==void 0)if(s.implicit)if(typeof s.type=="number"||sa(s.type)){const u=s.repeated?Ei:Np;i.push(new u({name:a,optional:c,idBlock:{tagClass:3,tagNumber:s.context}}))}else{this.cache(s.type);const u=!!s.repeated;let d=u?l:this.get(s.type).schema;d=d.valueBlock?d.valueBlock.value:d.value,i.push(new Ei({name:u?"":a,optional:c,idBlock:{tagClass:3,tagNumber:s.context},value:d}))}else i.push(new Ei({optional:c,idBlock:{tagClass:3,tagNumber:s.context},value:[l]}));else l.optional=c,i.push(l)}switch(r.type){case Me.Sequence:return new Cl({value:i,name:""});case Me.Set:return new bl({value:i,name:""});case Me.Choice:return new SZ({value:i,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(t,n){return this.items.set(t,n),this}findParentSchema(t){const n=t.__proto__;return n?this.items.get(n)||this.findParentSchema(n):null}}const so=new zze,nt=e=>t=>{let n;so.has(t)?n=so.get(t):(n=so.createDefault(t),so.set(t,n)),Object.assign(n,e)},x=e=>(t,n)=>{let r;so.has(t.constructor)?r=so.get(t.constructor):(r=so.createDefault(t.constructor),so.set(t.constructor,r));const i=Object.assign({},e);if(typeof i.type=="number"&&!i.converter){const o=_Z(e.type);if(!o)throw new Error(`Cannot get default converter for property '${n}' of ${t.constructor.name}`);i.converter=o}r.items[n]=i};class tx extends Error{constructor(){super(...arguments),this.schemas=[]}}class Jze{static parse(t,n){let r;if(t instanceof ArrayBuffer)r=t;else if(typeof Buffer<"u"&&Buffer.isBuffer(t))r=new Uint8Array(t).buffer;else if(ArrayBuffer.isView(t)||t.buffer instanceof ArrayBuffer)r=t.buffer;else throw new TypeError("Wrong type of 'data' argument");const i=ua(r);if(i.result.error)throw new Error(i.result.error);return this.fromASN(i.result,n)}static fromASN(t,n){var r;try{if(sa(n))return new n().fromASN(t);const i=so.get(n);so.cache(n);let o=i.schema;if(t.constructor===Ei&&i.type!==Me.Choice){o=new Ei({idBlock:{tagClass:3,tagNumber:t.idBlock.tagNumber},value:i.schema.valueBlock.value});for(const l in i.items)delete t[l]}const s=Ac(t,t,o);if(!s.verified)throw new tx(`Data does not match to ${n.name} ASN1 schema. ${s.result.error}`);const a=new n;if(mz(n))if(typeof i.itemType=="number"){const l=_Z(i.itemType);if(!l)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);return n.from(t.valueBlock.value,c=>l.fromASN(c))}else return n.from(t.valueBlock.value,l=>this.fromASN(l,i.itemType));for(const l in i.items){if(!t[l])continue;const c=i.items[l];if(typeof c.type=="number"||sa(c.type)){const u=(r=c.converter)!==null&&r!==void 0?r:sa(c.type)?new c.type:null;if(!u)throw new Error("Converter is empty");if(c.repeated)if(c.implicit){const d=c.repeated==="sequence"?Cl:bl,g=new d;g.valueBlock=t[l].valueBlock;const p=ua(g.toBER(!1)).result.valueBlock.value;a[l]=Array.from(p,m=>u.fromASN(m))}else a[l]=Array.from(t[l],d=>u.fromASN(d));else{let d=t[l];if(c.implicit){let g;if(sa(c.type))g=new c.type().toSchema("");else{const p=de[c.type],m=hz[p];if(!m)throw new Error(`Cannot get '${p}' class from asn1js module`);g=new m}g.valueBlock=d.valueBlock,d=ua(g.toBER(!1)).result}a[l]=u.fromASN(d)}}else c.repeated?a[l]=Array.from(t[l],u=>this.fromASN(u,c.type)):a[l]=this.fromASN(t[l],c.type)}return a}catch(i){throw i instanceof tx&&i.schemas.push(n.name),i}}}class wZ{static serialize(t){return t instanceof ir?t.toBER(!1):this.toASN(t).toBER(!1)}static toASN(t){if(t&&sa(t.constructor))return t.toASN();const n=t.constructor,r=so.get(n);so.cache(n);let i=[];if(r.itemType)if(typeof r.itemType=="number"){const s=_Z(r.itemType);if(!s)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);i=t.map(a=>s.toASN(a))}else i=t.map(s=>this.toAsnItem({type:r.itemType},"[]",n,s));else for(const s in r.items){const a=r.items[s],l=t[s];if(l===void 0||a.defaultValue===l||typeof a.defaultValue=="object"&&typeof l=="object"&&$ze(this.serialize(a.defaultValue),this.serialize(l)))continue;let c=wZ.toAsnItem(a,s,n,l);if(typeof a.context=="number")if(a.implicit)if(!a.repeated&&(typeof a.type=="number"||sa(a.type))){const u={};u.valueHex=c instanceof cf?c.valueBeforeDecode:c.valueBlock.toBER(),i.push(new Np(Object.assign({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context}},u)))}else i.push(new Ei({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:c.valueBlock.value}));else i.push(new Ei({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:[c]}));else a.repeated?i=i.concat(c):i.push(c)}let o;switch(r.type){case Me.Sequence:o=new Cl({value:i});break;case Me.Set:o=new bl({value:i});break;case Me.Choice:if(!i[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);o=i[0];break}return o}static toAsnItem(t,n,r,i){let o;if(typeof t.type=="number"){const s=t.converter;if(!s)throw new Error(`Property '${n}' doesn't have converter for type ${de[t.type]} in schema '${r.name}'`);if(t.repeated){const a=Array.from(i,c=>s.toASN(c)),l=t.repeated==="sequence"?Cl:bl;o=new l({value:a})}else o=s.toASN(i)}else if(t.repeated){const s=Array.from(i,l=>this.toASN(l)),a=t.repeated==="sequence"?Cl:bl;o=new a({value:s})}else o=this.toASN(i);return o}}class wn extends Array{constructor(t=[]){if(typeof t=="number")super(t);else{super();for(const n of t)this.push(n)}}}class Vt{static serialize(t){return wZ.serialize(t)}static parse(t,n){return Jze.parse(t,n)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Z(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}var yz={exports:{}};(function(e){(function(t){const n="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${n}\\.${n}\\.${n}\\.${n}$`,"i"),threeOctet:new RegExp(`^${n}\\.${n}\\.${n}$`,"i"),twoOctet:new RegExp(`^${n}\\.${n}$`,"i"),longValue:new RegExp(`^${n}$`,"i")},i=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",l={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${n}\\.${n}\\.${n}\\.${n}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${n}\\.${n}\\.${n}\\.${n}(${s})?$`,"i")};function c(m,v){if(m.indexOf("::")!==m.lastIndexOf("::"))return null;let y=0,I=-1,b=(m.match(l.zoneIndex)||[])[0],A,N;for(b&&(b=b.substring(1),m=m.replace(/%.+$/,""));(I=m.indexOf(":",I+1))>=0;)y++;if(m.substr(0,2)==="::"&&y--,m.substr(-2,2)==="::"&&y--,y>v)return null;for(N=v-y,A=":";N--;)A+="0:";return m=m.replace("::",A),m[0]===":"&&(m=m.slice(1)),m[m.length-1]===":"&&(m=m.slice(0,-1)),v=function(){const L=m.split(":"),G=[];for(let W=0;W<L.length;W++)G.push(parseInt(L[W],16));return G}(),{parts:v,zoneId:b}}function u(m,v,y,I){if(m.length!==v.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let b=0,A;for(;I>0;){if(A=y-I,A<0&&(A=0),m[b]>>A!==v[b]>>A)return!1;I-=y,b+=1}return!0}function d(m){if(o.test(m))return parseInt(m,16);if(m[0]==="0"&&!isNaN(parseInt(m[1],10))){if(i.test(m))return parseInt(m,8);throw new Error(`ipaddr: cannot parse ${m} as octal`)}return parseInt(m,10)}function g(m,v){for(;m.length<v;)m=`0${m}`;return m}const p={};p.IPv4=function(){function m(v){if(v.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let y,I;for(y=0;y<v.length;y++)if(I=v[y],!(0<=I&&I<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=v}return m.prototype.SpecialRanges={unspecified:[[new m([0,0,0,0]),8]],broadcast:[[new m([255,255,255,255]),32]],multicast:[[new m([224,0,0,0]),4]],linkLocal:[[new m([169,254,0,0]),16]],loopback:[[new m([127,0,0,0]),8]],carrierGradeNat:[[new m([100,64,0,0]),10]],private:[[new m([10,0,0,0]),8],[new m([172,16,0,0]),12],[new m([192,168,0,0]),16]],reserved:[[new m([192,0,0,0]),24],[new m([192,0,2,0]),24],[new m([192,88,99,0]),24],[new m([198,51,100,0]),24],[new m([203,0,113,0]),24],[new m([240,0,0,0]),4]]},m.prototype.kind=function(){return"ipv4"},m.prototype.match=function(v,y){let I;if(y===void 0&&(I=v,v=I[0],y=I[1]),v.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,v.octets,8,y)},m.prototype.prefixLengthFromSubnetMask=function(){let v=0,y=!1;const I={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let b,A,N;for(b=3;b>=0;b-=1)if(A=this.octets[b],A in I){if(N=I[A],y&&N!==0)return null;N!==8&&(y=!0),v+=N}else return null;return 32-v},m.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},m.prototype.toByteArray=function(){return this.octets.slice(0)},m.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},m.prototype.toNormalizedString=function(){return this.toString()},m.prototype.toString=function(){return this.octets.join(".")},m}(),p.IPv4.broadcastAddressFromCIDR=function(m){try{const v=this.parseCIDR(m),y=v[0].toByteArray(),I=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),b=[];let A=0;for(;A<4;)b.push(parseInt(y[A],10)|parseInt(I[A],10)^255),A++;return new this(b)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(m){return this.parser(m)!==null},p.IPv4.isValid=function(m){try{return new this(this.parser(m)),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(m){return!!(p.IPv4.isValid(m)&&m.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(m){let v,y,I,b,A;try{for(v=this.parseCIDR(m),I=v[0].toByteArray(),A=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),b=[],y=0;y<4;)b.push(parseInt(I[y],10)&parseInt(A[y],10)),y++;return new this(b)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(m){const v=this.parser(m);if(v===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(v)},p.IPv4.parseCIDR=function(m){let v;if(v=m.match(/^(.+)\/(\d+)$/)){const y=parseInt(v[2]);if(y>=0&&y<=32){const I=[this.parse(v[1]),y];return Object.defineProperty(I,"toString",{value:function(){return this.join("/")}}),I}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(m){let v,y,I;if(v=m.match(r.fourOctet))return function(){const b=v.slice(1,6),A=[];for(let N=0;N<b.length;N++)y=b[N],A.push(d(y));return A}();if(v=m.match(r.longValue)){if(I=d(v[1]),I>4294967295||I<0)throw new Error("ipaddr: address outside defined range");return function(){const b=[];let A;for(A=0;A<=24;A+=8)b.push(I>>A&255);return b}().reverse()}else return(v=m.match(r.twoOctet))?function(){const b=v.slice(1,4),A=[];if(I=d(b[1]),I>16777215||I<0)throw new Error("ipaddr: address outside defined range");return A.push(d(b[0])),A.push(I>>16&255),A.push(I>>8&255),A.push(I&255),A}():(v=m.match(r.threeOctet))?function(){const b=v.slice(1,5),A=[];if(I=d(b[2]),I>65535||I<0)throw new Error("ipaddr: address outside defined range");return A.push(d(b[0])),A.push(d(b[1])),A.push(I>>8&255),A.push(I&255),A}():null},p.IPv4.subnetMaskFromPrefixLength=function(m){if(m=parseInt(m),m<0||m>32)throw new Error("ipaddr: invalid IPv4 prefix length");const v=[0,0,0,0];let y=0;const I=Math.floor(m/8);for(;y<I;)v[y]=255,y++;return I<4&&(v[I]=Math.pow(2,m%8)-1<<8-m%8),new this(v)},p.IPv6=function(){function m(v,y){let I,b;if(v.length===16)for(this.parts=[],I=0;I<=14;I+=2)this.parts.push(v[I]<<8|v[I+1]);else if(v.length===8)this.parts=v;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(I=0;I<this.parts.length;I++)if(b=this.parts[I],!(0<=b&&b<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");y&&(this.zoneId=y)}return m.prototype.SpecialRanges={unspecified:[new m([0,0,0,0,0,0,0,0]),128],linkLocal:[new m([65152,0,0,0,0,0,0,0]),10],multicast:[new m([65280,0,0,0,0,0,0,0]),8],loopback:[new m([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new m([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new m([0,0,0,0,0,65535,0,0]),96],rfc6145:[new m([0,0,0,0,65535,0,0,0]),96],rfc6052:[new m([100,65435,0,0,0,0,0,0]),96],"6to4":[new m([8194,0,0,0,0,0,0,0]),16],teredo:[new m([8193,0,0,0,0,0,0,0]),32],reserved:[[new m([8193,3512,0,0,0,0,0,0]),32]]},m.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},m.prototype.kind=function(){return"ipv6"},m.prototype.match=function(v,y){let I;if(y===void 0&&(I=v,v=I[0],y=I[1]),v.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,v.parts,16,y)},m.prototype.prefixLengthFromSubnetMask=function(){let v=0,y=!1;const I={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let b,A;for(let N=7;N>=0;N-=1)if(b=this.parts[N],b in I){if(A=I[b],y&&A!==0)return null;A!==16&&(y=!0),v+=A}else return null;return 128-v},m.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},m.prototype.toByteArray=function(){let v;const y=[],I=this.parts;for(let b=0;b<I.length;b++)v=I[b],y.push(v>>8),y.push(v&255);return y},m.prototype.toFixedLengthString=function(){const v=(function(){const I=[];for(let b=0;b<this.parts.length;b++)I.push(g(this.parts[b].toString(16),4));return I}).call(this).join(":");let y="";return this.zoneId&&(y=`%${this.zoneId}`),v+y},m.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const v=this.parts.slice(-2),y=v[0],I=v[1];return new p.IPv4([y>>8,y&255,I>>8,I&255])},m.prototype.toNormalizedString=function(){const v=(function(){const I=[];for(let b=0;b<this.parts.length;b++)I.push(this.parts[b].toString(16));return I}).call(this).join(":");let y="";return this.zoneId&&(y=`%${this.zoneId}`),v+y},m.prototype.toRFC5952String=function(){const v=/((^|:)(0(:|$)){2,})/g,y=this.toNormalizedString();let I=0,b=-1,A;for(;A=v.exec(y);)A[0].length>b&&(I=A.index,b=A[0].length);return b<0?y:`${y.substring(0,I)}::${y.substring(I+b)}`},m.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},m}(),p.IPv6.isIPv6=function(m){return this.parser(m)!==null},p.IPv6.isValid=function(m){if(typeof m=="string"&&m.indexOf(":")===-1)return!1;try{const v=this.parser(m);return new this(v.parts,v.zoneId),!0}catch{return!1}},p.IPv6.parse=function(m){const v=this.parser(m);if(v.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(v.parts,v.zoneId)},p.IPv6.parseCIDR=function(m){let v,y,I;if((y=m.match(/^(.+)\/(\d+)$/))&&(v=parseInt(y[2]),v>=0&&v<=128))return I=[this.parse(y[1]),v],Object.defineProperty(I,"toString",{value:function(){return this.join("/")}}),I;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(m){let v,y,I,b,A,N;if(I=m.match(l.deprecatedTransitional))return this.parser(`::ffff:${I[1]}`);if(l.native.test(m))return c(m,8);if((I=m.match(l.transitional))&&(N=I[6]||"",v=c(I[1].slice(0,-1)+N,6),v.parts)){for(A=[parseInt(I[2]),parseInt(I[3]),parseInt(I[4]),parseInt(I[5])],y=0;y<A.length;y++)if(b=A[y],!(0<=b&&b<=255))return null;return v.parts.push(A[0]<<8|A[1]),v.parts.push(A[2]<<8|A[3]),{parts:v.parts,zoneId:v.zoneId}}return null},p.fromByteArray=function(m){const v=m.length;if(v===4)return new p.IPv4(m);if(v===16)return new p.IPv6(m);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(m){return p.IPv6.isValid(m)||p.IPv4.isValid(m)},p.parse=function(m){if(p.IPv6.isValid(m))return p.IPv6.parse(m);if(p.IPv4.isValid(m))return p.IPv4.parse(m);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(m){try{return p.IPv6.parseCIDR(m)}catch{try{return p.IPv4.parseCIDR(m)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(m){const v=this.parse(m);return v.kind()==="ipv6"&&v.isIPv4MappedAddress()?v.toIPv4Address():v},p.subnetMatch=function(m,v,y){let I,b,A,N;y==null&&(y="unicast");for(b in v)if(Object.prototype.hasOwnProperty.call(v,b)){for(A=v[b],A[0]&&!(A[0]instanceof Array)&&(A=[A]),I=0;I<A.length;I++)if(N=A[I],m.kind()===N[0].kind()&&m.match.apply(m,N))return b}return y},e.exports?e.exports=p:t.ipaddr=p})(rn)})(yz);var nx=yz.exports;class rx{static decodeIP(t){if(t.length===64&&parseInt(t,16)===0)return"::/0";if(t.length!==16)return t;const n=parseInt(t.slice(8),16).toString(2).split("").reduce((i,o)=>i+ +o,0);let r=t.slice(0,8).replace(/(.{2})/g,i=>`${parseInt(i,16)}.`);return r=r.slice(0,-1),`${r}/${n}`}static toString(t){if(t.byteLength===4||t.byteLength===16){const n=new Uint8Array(t);return nx.fromByteArray(Array.from(n)).toString()}return this.decodeIP(Ft.ToHex(t))}static fromString(t){const n=nx.parse(t);return new Uint8Array(n.toByteArray()).buffer}}var eE,tE,nE;let Xr=class{constructor(t={}){Object.assign(this,t)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};Z([x({type:de.TeletexString})],Xr.prototype,"teletexString",void 0);Z([x({type:de.PrintableString})],Xr.prototype,"printableString",void 0);Z([x({type:de.UniversalString})],Xr.prototype,"universalString",void 0);Z([x({type:de.Utf8String})],Xr.prototype,"utf8String",void 0);Z([x({type:de.BmpString})],Xr.prototype,"bmpString",void 0);Xr=Z([nt({type:Me.Choice})],Xr);let uf=class extends Xr{constructor(t={}){super(t),Object.assign(this,t)}toString(){return this.ia5String||(this.anyValue?Ft.ToHex(this.anyValue):super.toString())}};Z([x({type:de.IA5String})],uf.prototype,"ia5String",void 0);Z([x({type:de.Any})],uf.prototype,"anyValue",void 0);uf=Z([nt({type:Me.Choice})],uf);class Tp{constructor(t={}){this.type="",this.value=new uf,Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],Tp.prototype,"type",void 0);Z([x({type:uf})],Tp.prototype,"value",void 0);let df=eE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,eE.prototype)}};df=eE=Z([nt({type:Me.Set,itemType:Tp})],df);let rE=tE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,tE.prototype)}};rE=tE=Z([nt({type:Me.Sequence,itemType:df})],rE);let ur=nE=class extends rE{constructor(t){super(t),Object.setPrototypeOf(this,nE.prototype)}};ur=nE=Z([nt({type:Me.Sequence})],ur);const jze={fromASN:e=>rx.toString(oC.fromASN(e)),toASN:e=>oC.toASN(rx.fromString(e))};let Al=class{constructor(t={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,t)}};Z([x({type:de.ObjectIdentifier})],Al.prototype,"typeId",void 0);Z([x({type:de.Any,context:0})],Al.prototype,"value",void 0);class BZ{constructor(t={}){this.partyName=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:Xr,optional:!0,context:0,implicit:!0})],BZ.prototype,"nameAssigner",void 0);Z([x({type:Xr,context:1,implicit:!0})],BZ.prototype,"partyName",void 0);let Dt=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Al,context:0,implicit:!0})],Dt.prototype,"otherName",void 0);Z([x({type:de.IA5String,context:1,implicit:!0})],Dt.prototype,"rfc822Name",void 0);Z([x({type:de.IA5String,context:2,implicit:!0})],Dt.prototype,"dNSName",void 0);Z([x({type:de.Any,context:3,implicit:!0})],Dt.prototype,"x400Address",void 0);Z([x({type:ur,context:4,implicit:!1})],Dt.prototype,"directoryName",void 0);Z([x({type:BZ,context:5})],Dt.prototype,"ediPartyName",void 0);Z([x({type:de.IA5String,context:6,implicit:!0})],Dt.prototype,"uniformResourceIdentifier",void 0);Z([x({type:de.OctetString,context:7,implicit:!0,converter:jze})],Dt.prototype,"iPAddress",void 0);Z([x({type:de.ObjectIdentifier,context:8,implicit:!0})],Dt.prototype,"registeredID",void 0);Dt=Z([nt({type:Me.Choice})],Dt);const $f="2.5.29";var iE;class EZ{constructor(t={}){this.accessMethod="",this.accessLocation=new Dt,Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],EZ.prototype,"accessMethod",void 0);Z([x({type:Dt})],EZ.prototype,"accessLocation",void 0);let ix=iE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,iE.prototype)}};ix=iE=Z([nt({type:Me.Sequence,itemType:EZ})],ix);const oE=`${$f}.35`;class Iz extends Xn{}class Td{constructor(t={}){t&&Object.assign(this,t)}}Z([x({type:Iz,context:0,optional:!0,implicit:!0})],Td.prototype,"keyIdentifier",void 0);Z([x({type:Dt,context:1,optional:!0,implicit:!0,repeated:"sequence"})],Td.prototype,"authorityCertIssuer",void 0);Z([x({type:de.Integer,context:2,optional:!0,implicit:!0,converter:Gn})],Td.prototype,"authorityCertSerialNumber",void 0);const vz=`${$f}.19`;class sC{constructor(t={}){this.cA=!1,Object.assign(this,t)}}Z([x({type:de.Boolean,defaultValue:!1})],sC.prototype,"cA",void 0);Z([x({type:de.Integer,optional:!0})],sC.prototype,"pathLenConstraint",void 0);var sE;let Uo=sE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,sE.prototype)}};Uo=sE=Z([nt({type:Me.Sequence,itemType:Dt})],Uo);var aE;let ox=aE=class extends Uo{constructor(t){super(t),Object.setPrototypeOf(this,aE.prototype)}};ox=aE=Z([nt({type:Me.Sequence})],ox);var lE;let Ca=class{constructor(t={}){Object.assign(this,t)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String}};Z([x({type:de.IA5String})],Ca.prototype,"ia5String",void 0);Z([x({type:de.VisibleString})],Ca.prototype,"visibleString",void 0);Z([x({type:de.BmpString})],Ca.prototype,"bmpString",void 0);Z([x({type:de.Utf8String})],Ca.prototype,"utf8String",void 0);Ca=Z([nt({type:Me.Choice})],Ca);class RZ{constructor(t={}){this.organization=new Ca,this.noticeNumbers=[],Object.assign(this,t)}}Z([x({type:Ca})],RZ.prototype,"organization",void 0);Z([x({type:de.Integer,repeated:"sequence"})],RZ.prototype,"noticeNumbers",void 0);class GZ{constructor(t={}){Object.assign(this,t)}}Z([x({type:RZ,optional:!0})],GZ.prototype,"noticeRef",void 0);Z([x({type:Ca,optional:!0})],GZ.prototype,"explicitText",void 0);let aC=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:de.IA5String})],aC.prototype,"cPSuri",void 0);Z([x({type:GZ})],aC.prototype,"userNotice",void 0);aC=Z([nt({type:Me.Choice})],aC);class NZ{constructor(t={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],NZ.prototype,"policyQualifierId",void 0);Z([x({type:de.Any})],NZ.prototype,"qualifier",void 0);class ZZ{constructor(t={}){this.policyIdentifier="",Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],ZZ.prototype,"policyIdentifier",void 0);Z([x({type:NZ,repeated:"sequence",optional:!0})],ZZ.prototype,"policyQualifiers",void 0);let sx=lE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,lE.prototype)}};sx=lE=Z([nt({type:Me.Sequence,itemType:ZZ})],sx);var cE,wo;(function(e){e[e.unused=1]="unused",e[e.keyCompromise=2]="keyCompromise",e[e.cACompromise=4]="cACompromise",e[e.affiliationChanged=8]="affiliationChanged",e[e.superseded=16]="superseded",e[e.cessationOfOperation=32]="cessationOfOperation",e[e.certificateHold=64]="certificateHold",e[e.privilegeWithdrawn=128]="privilegeWithdrawn",e[e.aACompromise=256]="aACompromise"})(wo||(wo={}));class Qze extends Z0{toJSON(){const t=[],n=this.toNumber();return n&wo.aACompromise&&t.push("aACompromise"),n&wo.affiliationChanged&&t.push("affiliationChanged"),n&wo.cACompromise&&t.push("cACompromise"),n&wo.certificateHold&&t.push("certificateHold"),n&wo.cessationOfOperation&&t.push("cessationOfOperation"),n&wo.keyCompromise&&t.push("keyCompromise"),n&wo.privilegeWithdrawn&&t.push("privilegeWithdrawn"),n&wo.superseded&&t.push("superseded"),n&wo.unused&&t.push("unused"),t}toString(){return`[${this.toJSON().join(", ")}]`}}let Wp=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Dt,context:0,repeated:"sequence",implicit:!0})],Wp.prototype,"fullName",void 0);Z([x({type:df,context:1,implicit:!0})],Wp.prototype,"nameRelativeToCRLIssuer",void 0);Wp=Z([nt({type:Me.Choice})],Wp);class T0{constructor(t={}){Object.assign(this,t)}}Z([x({type:Wp,context:0,optional:!0})],T0.prototype,"distributionPoint",void 0);Z([x({type:Qze,context:1,optional:!0,implicit:!0})],T0.prototype,"reasons",void 0);Z([x({type:Dt,context:2,optional:!0,repeated:"sequence",implicit:!0})],T0.prototype,"cRLIssuer",void 0);let ax=cE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,cE.prototype)}};ax=cE=Z([nt({type:Me.Sequence,itemType:T0})],ax);var Rh;(function(e){e[e.unspecified=0]="unspecified",e[e.keyCompromise=1]="keyCompromise",e[e.cACompromise=2]="cACompromise",e[e.affiliationChanged=3]="affiliationChanged",e[e.superseded=4]="superseded",e[e.cessationOfOperation=5]="cessationOfOperation",e[e.certificateHold=6]="certificateHold",e[e.removeFromCRL=8]="removeFromCRL",e[e.privilegeWithdrawn=9]="privilegeWithdrawn",e[e.aACompromise=10]="aACompromise"})(Rh||(Rh={}));let uE=class{constructor(t=Rh.unspecified){this.reason=Rh.unspecified,this.reason=t}toJSON(){return Rh[this.reason]}toString(){return this.toJSON()}};Z([x({type:de.Enumerated})],uE.prototype,"reason",void 0);uE=Z([nt({type:Me.Choice})],uE);var dE;const Cz=`${$f}.37`;let lC=dE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,dE.prototype)}};lC=dE=Z([nt({type:Me.Sequence,itemType:de.ObjectIdentifier})],lC);let fE=class{constructor(t=new ArrayBuffer(0)){this.value=t}};Z([x({type:de.Integer,converter:Gn})],fE.prototype,"value",void 0);fE=Z([nt({type:Me.Choice})],fE);let gE=class{constructor(t){this.value=new Date,t&&(this.value=t)}};Z([x({type:de.GeneralizedTime})],gE.prototype,"value",void 0);gE=Z([nt({type:Me.Choice})],gE);var hE;let lx=hE=class extends Uo{constructor(t){super(t),Object.setPrototypeOf(this,hE.prototype)}};lx=hE=Z([nt({type:Me.Sequence})],lx);const bz=`${$f}.15`;var Bo;(function(e){e[e.digitalSignature=1]="digitalSignature",e[e.nonRepudiation=2]="nonRepudiation",e[e.keyEncipherment=4]="keyEncipherment",e[e.dataEncipherment=8]="dataEncipherment",e[e.keyAgreement=16]="keyAgreement",e[e.keyCertSign=32]="keyCertSign",e[e.cRLSign=64]="cRLSign",e[e.encipherOnly=128]="encipherOnly",e[e.decipherOnly=256]="decipherOnly"})(Bo||(Bo={}));class cx extends Z0{toJSON(){const t=this.toNumber(),n=[];return t&Bo.cRLSign&&n.push("crlSign"),t&Bo.dataEncipherment&&n.push("dataEncipherment"),t&Bo.decipherOnly&&n.push("decipherOnly"),t&Bo.digitalSignature&&n.push("digitalSignature"),t&Bo.encipherOnly&&n.push("encipherOnly"),t&Bo.keyAgreement&&n.push("keyAgreement"),t&Bo.keyCertSign&&n.push("keyCertSign"),t&Bo.keyEncipherment&&n.push("keyEncipherment"),t&Bo.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var pE;class W0{constructor(t={}){this.base=new Dt,this.minimum=0,Object.assign(this,t)}}Z([x({type:Dt})],W0.prototype,"base",void 0);Z([x({type:de.Integer,context:0,defaultValue:0,implicit:!0})],W0.prototype,"minimum",void 0);Z([x({type:de.Integer,context:1,optional:!0,implicit:!0})],W0.prototype,"maximum",void 0);let cC=pE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,pE.prototype)}};cC=pE=Z([nt({type:Me.Sequence,itemType:W0})],cC);class Az{constructor(t={}){Object.assign(this,t)}}Z([x({type:cC,context:0,optional:!0,implicit:!0})],Az.prototype,"permittedSubtrees",void 0);Z([x({type:cC,context:1,optional:!0,implicit:!0})],Az.prototype,"excludedSubtrees",void 0);class Sz{constructor(t={}){Object.assign(this,t)}}Z([x({type:de.Integer,context:0,implicit:!0,optional:!0,converter:Gn})],Sz.prototype,"requireExplicitPolicy",void 0);Z([x({type:de.Integer,context:1,implicit:!0,optional:!0,converter:Gn})],Sz.prototype,"inhibitPolicyMapping",void 0);class _z{constructor(t={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],_z.prototype,"issuerDomainPolicy",void 0);Z([x({type:de.ObjectIdentifier})],_z.prototype,"subjectDomainPolicy",void 0);var mE;const wz=`${$f}.17`;let uC=mE=class extends Uo{constructor(t){super(t),Object.setPrototypeOf(this,mE.prototype)}};uC=mE=Z([nt({type:Me.Sequence})],uC);let ba=class{constructor(t={}){this.type="",this.values=[],Object.assign(this,t)}};Z([x({type:de.ObjectIdentifier})],ba.prototype,"type",void 0);Z([x({type:de.Any,repeated:"set"})],ba.prototype,"values",void 0);var yE;let ux=yE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,yE.prototype)}};ux=yE=Z([nt({type:Me.Sequence,itemType:ba})],ux);const Bz=`${$f}.14`;class dC extends Iz{}class Ez{constructor(t={}){Object.assign(this,t)}}Z([x({type:de.GeneralizedTime,context:0,implicit:!0,optional:!0})],Ez.prototype,"notBefore",void 0);Z([x({type:de.GeneralizedTime,context:1,implicit:!0,optional:!0})],Ez.prototype,"notAfter",void 0);var Gh;(function(e){e[e.keyUpdateAllowed=1]="keyUpdateAllowed",e[e.newExtensions=2]="newExtensions",e[e.pKIXCertificate=4]="pKIXCertificate"})(Gh||(Gh={}));class Rz extends Z0{toJSON(){const t=[],n=this.toNumber();return n&Gh.pKIXCertificate&&t.push("pKIXCertificate"),n&Gh.newExtensions&&t.push("newExtensions"),n&Gh.keyUpdateAllowed&&t.push("keyUpdateAllowed"),t}toString(){return`[${this.toJSON().join(", ")}]`}}class Gz{constructor(t={}){this.entrustVers="",this.entrustInfoFlags=new Rz,Object.assign(this,t)}}Z([x({type:de.GeneralString})],Gz.prototype,"entrustVers",void 0);Z([x({type:Rz})],Gz.prototype,"entrustInfoFlags",void 0);class ht{constructor(t={}){this.algorithm="",Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],ht.prototype,"algorithm",void 0);Z([x({type:de.Any,optional:!0})],ht.prototype,"parameters",void 0);class hu{constructor(t={}){this.algorithm=new ht,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:ht})],hu.prototype,"algorithm",void 0);Z([x({type:de.BitString})],hu.prototype,"subjectPublicKey",void 0);let Fr=class{constructor(t){t&&(typeof t=="string"||typeof t=="number"?this.utcTime=new Date(t):t instanceof Date?this.utcTime=t:Object.assign(this,t))}getTime(){const t=this.utcTime||this.generalTime;if(!t)throw new Error("Cannot get time from CHOICE object");return t}};Z([x({type:de.UTCTime})],Fr.prototype,"utcTime",void 0);Z([x({type:de.GeneralizedTime})],Fr.prototype,"generalTime",void 0);Fr=Z([nt({type:Me.Choice})],Fr);class k0{constructor(t){this.notBefore=new Fr(new Date),this.notAfter=new Fr(new Date),t&&(this.notBefore=new Fr(t.notBefore),this.notAfter=new Fr(t.notAfter))}}Z([x({type:Fr})],k0.prototype,"notBefore",void 0);Z([x({type:Fr})],k0.prototype,"notAfter",void 0);var IE;let Vs=class Nz{constructor(t={}){this.extnID="",this.critical=Nz.CRITICAL,this.extnValue=new Xn,Object.assign(this,t)}};Vs.CRITICAL=!1;Z([x({type:de.ObjectIdentifier})],Vs.prototype,"extnID",void 0);Z([x({type:de.Boolean,defaultValue:Vs.CRITICAL})],Vs.prototype,"critical",void 0);Z([x({type:Xn})],Vs.prototype,"extnValue",void 0);let Kc=IE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,IE.prototype)}};Kc=IE=Z([nt({type:Me.Sequence,itemType:Vs})],Kc);var fC;(function(e){e[e.v1=0]="v1",e[e.v2=1]="v2",e[e.v3=2]="v3"})(fC||(fC={}));class vo{constructor(t={}){this.version=fC.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new ht,this.issuer=new ur,this.validity=new k0,this.subject=new ur,this.subjectPublicKeyInfo=new hu,Object.assign(this,t)}}Z([x({type:de.Integer,context:0,defaultValue:fC.v1})],vo.prototype,"version",void 0);Z([x({type:de.Integer,converter:Gn})],vo.prototype,"serialNumber",void 0);Z([x({type:ht})],vo.prototype,"signature",void 0);Z([x({type:ur})],vo.prototype,"issuer",void 0);Z([x({type:k0})],vo.prototype,"validity",void 0);Z([x({type:ur})],vo.prototype,"subject",void 0);Z([x({type:hu})],vo.prototype,"subjectPublicKeyInfo",void 0);Z([x({type:de.BitString,context:1,implicit:!0,optional:!0})],vo.prototype,"issuerUniqueID",void 0);Z([x({type:de.BitString,context:2,implicit:!0,optional:!0})],vo.prototype,"subjectUniqueID",void 0);Z([x({type:Kc,context:3,optional:!0})],vo.prototype,"extensions",void 0);class Bm{constructor(t={}){this.tbsCertificate=new vo,this.signatureAlgorithm=new ht,this.signatureValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:vo})],Bm.prototype,"tbsCertificate",void 0);Z([x({type:ht})],Bm.prototype,"signatureAlgorithm",void 0);Z([x({type:de.BitString})],Bm.prototype,"signatureValue",void 0);class V0{constructor(t={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new Fr,Object.assign(this,t)}}Z([x({type:de.Integer,converter:Gn})],V0.prototype,"userCertificate",void 0);Z([x({type:Fr})],V0.prototype,"revocationDate",void 0);Z([x({type:Vs,optional:!0,repeated:"sequence"})],V0.prototype,"crlEntryExtensions",void 0);class Na{constructor(t={}){this.signature=new ht,this.issuer=new ur,this.thisUpdate=new Fr,Object.assign(this,t)}}Z([x({type:de.Integer,optional:!0})],Na.prototype,"version",void 0);Z([x({type:ht})],Na.prototype,"signature",void 0);Z([x({type:ur})],Na.prototype,"issuer",void 0);Z([x({type:Fr})],Na.prototype,"thisUpdate",void 0);Z([x({type:Fr,optional:!0})],Na.prototype,"nextUpdate",void 0);Z([x({type:V0,repeated:"sequence",optional:!0})],Na.prototype,"revokedCertificates",void 0);Z([x({type:Vs,optional:!0,context:0,repeated:"sequence"})],Na.prototype,"crlExtensions",void 0);class TZ{constructor(t={}){this.tbsCertList=new Na,this.signatureAlgorithm=new ht,this.signature=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:Na})],TZ.prototype,"tbsCertList",void 0);Z([x({type:ht})],TZ.prototype,"signatureAlgorithm",void 0);Z([x({type:de.BitString})],TZ.prototype,"signature",void 0);var vE;(function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"})(vE||(vE={}));const mi=vE;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var CE=function(e,t){return CE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},CE(e,t)};function WZ(e,t){CE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function jy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gC(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function yc(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gC(arguments[t]));return e}var qze="injectionTokens";function eJe(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(qze,e)||{};return Object.keys(n).forEach(function(r){t[+r]=n[r]}),t}function Zz(e){return!!e.useClass}function bE(e){return!!e.useFactory}var Tz=function(){function e(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(t){var n=this,r={},i=!1,o,s=function(){return i||(o=t(n.wrap()),i=!0),o};return new Proxy(r,this.createHandler(s))},e.prototype.createHandler=function(t){var n={},r=function(i){n[i]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=t();var a=Reflect[i];return a.apply(void 0,yc(o))}};return this.reflectMethods.forEach(r),n},e}();function Ou(e){return typeof e=="string"||typeof e=="symbol"}function tJe(e){return typeof e=="object"&&"token"in e&&"multiple"in e}function dx(e){return typeof e=="object"&&"token"in e&&"transform"in e}function nJe(e){return typeof e=="function"||e instanceof Tz}function wI(e){return!!e.useToken}function BI(e){return e.useValue!=null}function rJe(e){return Zz(e)||BI(e)||wI(e)||bE(e)}var kZ=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(t){return this.ensure(t),this._registryMap.get(t)},e.prototype.get=function(t){this.ensure(t);var n=this._registryMap.get(t);return n[n.length-1]||null},e.prototype.set=function(t,n){this.ensure(t),this._registryMap.get(t).push(n)},e.prototype.setAll=function(t,n){this._registryMap.set(t,n)},e.prototype.has=function(t){return this.ensure(t),this._registryMap.get(t).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(t){this._registryMap.has(t)||this._registryMap.set(t,[])},e}(),iJe=function(e){WZ(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kZ),fx=function(){function e(){this.scopedResolutions=new Map}return e}();function oJe(e,t){if(e===null)return"at position #"+t;var n=e.split(",")[t].trim();return'"'+n+'" at position #'+t}function sJe(e,t,n){return n===void 0&&(n="    "),yc([e],t.message.split(`
`).map(function(r){return n+r})).join(`
`)}function aJe(e,t,n){var r=gC(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=r[1],o=i===void 0?null:i,s=oJe(o,t);return sJe("Cannot inject the dependency "+s+' of "'+e.name+'" constructor. Reason:',n)}var lJe=function(e){WZ(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kZ),cJe=function(e){WZ(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kZ),uJe=function(){function e(){this.preResolution=new lJe,this.postResolution=new cJe}return e}(),Wz=new Map,dJe=function(){function e(t){this.parent=t,this._registry=new iJe,this.interceptors=new uJe}return e.prototype.register=function(t,n,r){r===void 0&&(r={lifecycle:mi.Transient});var i;if(rJe(n)?i=n:i={useClass:n},wI(i))for(var o=[t],s=i;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+yc(o,[a]).join(" -> "));o.push(a);var l=this._registry.get(a);l&&wI(l.provider)?s=l.provider:s=null}if((r.lifecycle===mi.Singleton||r.lifecycle==mi.ContainerScoped||r.lifecycle==mi.ResolutionScoped)&&(BI(i)||bE(i)))throw new Error('Cannot use lifecycle "'+mi[r.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(t,{provider:i,options:r}),this},e.prototype.registerType=function(t,n){return Ou(n)?this.register(t,{useToken:n}):this.register(t,{useClass:n})},e.prototype.registerInstance=function(t,n){return this.register(t,{useValue:n})},e.prototype.registerSingleton=function(t,n){if(Ou(t)){if(Ou(n))return this.register(t,{useToken:n},{lifecycle:mi.Singleton});if(n)return this.register(t,{useClass:n},{lifecycle:mi.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var r=t;return n&&!Ou(n)&&(r=n),this.register(t,{useClass:r},{lifecycle:mi.Singleton})},e.prototype.resolve=function(t,n){n===void 0&&(n=new fx);var r=this.getRegistration(t);if(!r&&Ou(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),r){var i=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(t,i,"Single"),i}if(nJe(t)){var i=this.construct(t,n);return this.executePostResolutionInterceptor(t,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(t,n){var r,i;if(this.interceptors.preResolution.has(t)){var o=[];try{for(var s=jy(this.interceptors.preResolution.getAll(t)),a=s.next();!a.done;a=s.next()){var l=a.value;l.options.frequency!="Once"&&o.push(l),l.callback(t,n)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}this.interceptors.preResolution.setAll(t,o)}},e.prototype.executePostResolutionInterceptor=function(t,n,r){var i,o;if(this.interceptors.postResolution.has(t)){var s=[];try{for(var a=jy(this.interceptors.postResolution.getAll(t)),l=a.next();!l.done;l=a.next()){var c=l.value;c.options.frequency!="Once"&&s.push(c),c.callback(t,n,r)}}catch(u){i={error:u}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(t,s)}},e.prototype.resolveRegistration=function(t,n){if(t.options.lifecycle===mi.ResolutionScoped&&n.scopedResolutions.has(t))return n.scopedResolutions.get(t);var r=t.options.lifecycle===mi.Singleton,i=t.options.lifecycle===mi.ContainerScoped,o=r||i,s;return BI(t.provider)?s=t.provider.useValue:wI(t.provider)?s=o?t.instance||(t.instance=this.resolve(t.provider.useToken,n)):this.resolve(t.provider.useToken,n):Zz(t.provider)?s=o?t.instance||(t.instance=this.construct(t.provider.useClass,n)):this.construct(t.provider.useClass,n):bE(t.provider)?s=t.provider.useFactory(this):s=this.construct(t.provider,n),t.options.lifecycle===mi.ResolutionScoped&&n.scopedResolutions.set(t,s),s},e.prototype.resolveAll=function(t,n){var r=this;n===void 0&&(n=new fx);var i=this.getAllRegistrations(t);if(!i&&Ou(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),i){var o=i.map(function(a){return r.resolveRegistration(a,n)});return this.executePostResolutionInterceptor(t,o,"All"),o}var s=[this.construct(t,n)];return this.executePostResolutionInterceptor(t,s,"All"),s},e.prototype.isRegistered=function(t,n){return n===void 0&&(n=!1),this._registry.has(t)||n&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},e.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var t,n;try{for(var r=jy(this._registry.entries()),i=r.next();!i.done;i=r.next()){var o=gC(i.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(l){return!BI(l.provider)}).map(function(l){return l.instance=void 0,l}))}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.createChildContainer=function(){var t,n,r=new e(this);try{for(var i=jy(this._registry.entries()),o=i.next();!o.done;o=i.next()){var s=gC(o.value,2),a=s[0],l=s[1];l.some(function(c){var u=c.options;return u.lifecycle===mi.ContainerScoped})&&r._registry.setAll(a,l.map(function(c){return c.options.lifecycle===mi.ContainerScoped?{provider:c.provider,options:c.options}:c}))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(t,n,r){r===void 0&&(r={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:n,options:r})},e.prototype.afterResolution=function(t,n,r){r===void 0&&(r={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:n,options:r})},e.prototype.getRegistration=function(t){return this.isRegistered(t)?this._registry.get(t):this.parent?this.parent.getRegistration(t):null},e.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this._registry.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},e.prototype.construct=function(t,n){var r=this;if(t instanceof Tz)return t.createProxy(function(s){return r.resolve(s,n)});var i=Wz.get(t);if(!i||i.length===0){if(t.length===0)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var o=i.map(this.resolveParams(n,t));return new(t.bind.apply(t,yc([void 0],o)))},e.prototype.resolveParams=function(t,n){var r=this;return function(i,o){var s,a,l;try{return tJe(i)?dx(i)?i.multiple?(s=r.resolve(i.transform)).transform.apply(s,yc([r.resolveAll(i.token)],i.transformArgs)):(a=r.resolve(i.transform)).transform.apply(a,yc([r.resolve(i.token,t)],i.transformArgs)):i.multiple?r.resolveAll(i.token):r.resolve(i.token,t):dx(i)?(l=r.resolve(i.transform,t)).transform.apply(l,yc([r.resolve(i.token,t)],i.transformArgs)):r.resolve(i,t)}catch(c){throw new Error(aJe(n,o,c))}}},e}(),Os=new dJe;function VZ(){return function(e){Wz.set(e,eJe(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);const Ki="1.2.840.113549.1.1",hC=`${Ki}.1`,fJe=`${Ki}.7`,gJe=`${Ki}.9`,hJe=`${Ki}.10`,pJe=`${Ki}.2`,mJe=`${Ki}.4`,AE=`${Ki}.5`,gx=`${Ki}.11`,SE=`${Ki}.12`,_E=`${Ki}.13`,kz=`${Ki}.15`,Vz=`${Ki}.16`,yJe="1.3.14.3.2.26",IJe="2.16.840.1.101.3.4.2.4",vJe="2.16.840.1.101.3.4.2.1",CJe="2.16.840.1.101.3.4.2.2",bJe="2.16.840.1.101.3.4.2.3",AJe="2.16.840.1.101.3.4.2.5",SJe="2.16.840.1.101.3.4.2.6",_Je="1.2.840.113549.2.2",wJe="1.2.840.113549.2.5",OZ=`${Ki}.8`;function or(e){return new ht({algorithm:e,parameters:null})}or(_Je);or(wJe);const Mc=or(yJe);or(IJe);or(vJe);or(CJe);or(bJe);or(AJe);or(SJe);const Oz=new ht({algorithm:OZ,parameters:Vt.serialize(Mc)}),Hz=new ht({algorithm:gJe,parameters:Vt.serialize(oC.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});or(hC);or(pJe);or(mJe);or(AE);or(kz);or(Vz);or(SE);or(_E);or(kz);or(Vz);class O0{constructor(t={}){this.hashAlgorithm=new ht(Mc),this.maskGenAlgorithm=new ht({algorithm:OZ,parameters:Vt.serialize(Mc)}),this.pSourceAlgorithm=new ht(Hz),Object.assign(this,t)}}Z([x({type:ht,context:0,defaultValue:Mc})],O0.prototype,"hashAlgorithm",void 0);Z([x({type:ht,context:1,defaultValue:Oz})],O0.prototype,"maskGenAlgorithm",void 0);Z([x({type:ht,context:2,defaultValue:Hz})],O0.prototype,"pSourceAlgorithm",void 0);new ht({algorithm:fJe,parameters:Vt.serialize(new O0)});class Em{constructor(t={}){this.hashAlgorithm=new ht(Mc),this.maskGenAlgorithm=new ht({algorithm:OZ,parameters:Vt.serialize(Mc)}),this.saltLength=20,this.trailerField=1,Object.assign(this,t)}}Z([x({type:ht,context:0,defaultValue:Mc})],Em.prototype,"hashAlgorithm",void 0);Z([x({type:ht,context:1,defaultValue:Oz})],Em.prototype,"maskGenAlgorithm",void 0);Z([x({type:de.Integer,context:2,defaultValue:20})],Em.prototype,"saltLength",void 0);Z([x({type:de.Integer,context:3,defaultValue:1})],Em.prototype,"trailerField",void 0);new ht({algorithm:hJe,parameters:Vt.serialize(new Em)});class H0{constructor(t={}){this.digestAlgorithm=new ht,this.digest=new Xn,Object.assign(this,t)}}Z([x({type:ht})],H0.prototype,"digestAlgorithm",void 0);Z([x({type:Xn})],H0.prototype,"digest",void 0);var wE;class F0{constructor(t={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.Integer,converter:Gn})],F0.prototype,"prime",void 0);Z([x({type:de.Integer,converter:Gn})],F0.prototype,"exponent",void 0);Z([x({type:de.Integer,converter:Gn})],F0.prototype,"coefficient",void 0);let BE=wE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,wE.prototype)}};BE=wE=Z([nt({type:Me.Sequence,itemType:F0})],BE);class Us{constructor(t={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.Integer})],Us.prototype,"version",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"modulus",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"publicExponent",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"privateExponent",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"prime1",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"prime2",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"exponent1",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"exponent2",void 0);Z([x({type:de.Integer,converter:Gn})],Us.prototype,"coefficient",void 0);Z([x({type:BE,optional:!0})],Us.prototype,"otherPrimeInfos",void 0);class HZ{constructor(t={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.Integer,converter:Gn})],HZ.prototype,"modulus",void 0);Z([x({type:de.Integer,converter:Gn})],HZ.prototype,"publicExponent",void 0);let Rm=class{constructor(t={}){this.attrType="",this.attrValues=[],Object.assign(this,t)}};Z([x({type:de.ObjectIdentifier})],Rm.prototype,"attrType",void 0);Z([x({type:de.Any,repeated:"set"})],Rm.prototype,"attrValues",void 0);class FZ{constructor(t={}){this.acIssuer=new Dt,this.acSerial=0,this.attrs=[],Object.assign(this,t)}}Z([x({type:Dt})],FZ.prototype,"acIssuer",void 0);Z([x({type:de.Integer})],FZ.prototype,"acSerial",void 0);Z([x({type:ba,repeated:"sequence"})],FZ.prototype,"attrs",void 0);var EE;let pC=EE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,EE.prototype)}};pC=EE=Z([nt({type:Me.Sequence,itemType:de.ObjectIdentifier})],pC);class x0{constructor(t={}){this.permitUnSpecified=!0,Object.assign(this,t)}}Z([x({type:de.Integer,optional:!0})],x0.prototype,"pathLenConstraint",void 0);Z([x({type:pC,implicit:!0,context:0,optional:!0})],x0.prototype,"permittedAttrs",void 0);Z([x({type:pC,implicit:!0,context:1,optional:!0})],x0.prototype,"excludedAttrs",void 0);Z([x({type:de.Boolean,defaultValue:!0})],x0.prototype,"permitUnSpecified",void 0);class pu{constructor(t={}){this.issuer=new Uo,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:Uo})],pu.prototype,"issuer",void 0);Z([x({type:de.Integer,converter:Gn})],pu.prototype,"serial",void 0);Z([x({type:de.BitString,optional:!0})],pu.prototype,"issuerUID",void 0);var RE;(function(e){e[e.publicKey=0]="publicKey",e[e.publicKeyCert=1]="publicKeyCert",e[e.otherObjectTypes=2]="otherObjectTypes"})(RE||(RE={}));class mu{constructor(t={}){this.digestedObjectType=RE.publicKey,this.digestAlgorithm=new ht,this.objectDigest=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.Enumerated})],mu.prototype,"digestedObjectType",void 0);Z([x({type:de.ObjectIdentifier,optional:!0})],mu.prototype,"otherObjectTypeID",void 0);Z([x({type:ht})],mu.prototype,"digestAlgorithm",void 0);Z([x({type:de.BitString})],mu.prototype,"objectDigest",void 0);class L0{constructor(t={}){Object.assign(this,t)}}Z([x({type:Uo,optional:!0})],L0.prototype,"issuerName",void 0);Z([x({type:pu,context:0,implicit:!0,optional:!0})],L0.prototype,"baseCertificateID",void 0);Z([x({type:mu,context:1,implicit:!0,optional:!0})],L0.prototype,"objectDigestInfo",void 0);let ff=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Dt,repeated:"sequence"})],ff.prototype,"v1Form",void 0);Z([x({type:L0,context:0,implicit:!0})],ff.prototype,"v2Form",void 0);ff=Z([nt({type:Me.Choice})],ff);class Y0{constructor(t={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,t)}}Z([x({type:de.GeneralizedTime})],Y0.prototype,"notBeforeTime",void 0);Z([x({type:de.GeneralizedTime})],Y0.prototype,"notAfterTime",void 0);class Gm{constructor(t={}){Object.assign(this,t)}}Z([x({type:pu,implicit:!0,context:0,optional:!0})],Gm.prototype,"baseCertificateID",void 0);Z([x({type:Uo,implicit:!0,context:1,optional:!0})],Gm.prototype,"entityName",void 0);Z([x({type:mu,implicit:!0,context:2,optional:!0})],Gm.prototype,"objectDigestInfo",void 0);var GE;(function(e){e[e.v2=1]="v2"})(GE||(GE={}));class es{constructor(t={}){this.version=GE.v2,this.holder=new Gm,this.issuer=new ff,this.signature=new ht,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new Y0,this.attributes=[],Object.assign(this,t)}}Z([x({type:de.Integer})],es.prototype,"version",void 0);Z([x({type:Gm})],es.prototype,"holder",void 0);Z([x({type:ff})],es.prototype,"issuer",void 0);Z([x({type:ht})],es.prototype,"signature",void 0);Z([x({type:de.Integer,converter:Gn})],es.prototype,"serialNumber",void 0);Z([x({type:Y0})],es.prototype,"attrCertValidityPeriod",void 0);Z([x({type:ba,repeated:"sequence"})],es.prototype,"attributes",void 0);Z([x({type:de.BitString,optional:!0})],es.prototype,"issuerUniqueID",void 0);Z([x({type:Kc,optional:!0})],es.prototype,"extensions",void 0);class P0{constructor(t={}){this.acinfo=new es,this.signatureAlgorithm=new ht,this.signatureValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:es})],P0.prototype,"acinfo",void 0);Z([x({type:ht})],P0.prototype,"signatureAlgorithm",void 0);Z([x({type:de.BitString})],P0.prototype,"signatureValue",void 0);var mC;(function(e){e[e.unmarked=1]="unmarked",e[e.unclassified=2]="unclassified",e[e.restricted=4]="restricted",e[e.confidential=8]="confidential",e[e.secret=16]="secret",e[e.topSecret=32]="topSecret"})(mC||(mC={}));class NE extends Z0{}class xZ{constructor(t={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier,implicit:!0,context:0})],xZ.prototype,"type",void 0);Z([x({type:de.Any,implicit:!0,context:1})],xZ.prototype,"value",void 0);class LZ{constructor(t={}){this.policyId="",this.classList=new NE(mC.unclassified),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],LZ.prototype,"policyId",void 0);Z([x({type:NE,defaultValue:new NE(mC.unclassified)})],LZ.prototype,"classList",void 0);Z([x({type:xZ,repeated:"set"})],LZ.prototype,"securityCategories",void 0);class X0{constructor(t={}){Object.assign(this,t)}}Z([x({type:Xn})],X0.prototype,"cotets",void 0);Z([x({type:de.ObjectIdentifier})],X0.prototype,"oid",void 0);Z([x({type:de.Utf8String})],X0.prototype,"string",void 0);class Fz{constructor(t={}){this.values=[],Object.assign(this,t)}}Z([x({type:Uo,implicit:!0,context:0,optional:!0})],Fz.prototype,"policyAuthority",void 0);Z([x({type:X0,repeated:"sequence"})],Fz.prototype,"values",void 0);var ZE;class U0{constructor(t={}){this.targetCertificate=new pu,Object.assign(this,t)}}Z([x({type:pu})],U0.prototype,"targetCertificate",void 0);Z([x({type:Dt,optional:!0})],U0.prototype,"targetName",void 0);Z([x({type:mu,optional:!0})],U0.prototype,"certDigestInfo",void 0);let gf=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Dt,context:0,implicit:!0})],gf.prototype,"targetName",void 0);Z([x({type:Dt,context:1,implicit:!0})],gf.prototype,"targetGroup",void 0);Z([x({type:U0,context:2,implicit:!0})],gf.prototype,"targetCert",void 0);gf=Z([nt({type:Me.Choice})],gf);let TE=ZE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,ZE.prototype)}};TE=ZE=Z([nt({type:Me.Sequence,itemType:gf})],TE);var WE;let hx=WE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,WE.prototype)}};hx=WE=Z([nt({type:Me.Sequence,itemType:TE})],hx);class xz{constructor(t={}){Object.assign(this,t)}}Z([x({type:Uo,implicit:!0,context:0,optional:!0})],xz.prototype,"roleAuthority",void 0);Z([x({type:Dt,implicit:!0,context:1})],xz.prototype,"roleName",void 0);class YZ{constructor(t={}){this.service=new Dt,this.ident=new Dt,Object.assign(this,t)}}Z([x({type:Dt})],YZ.prototype,"service",void 0);Z([x({type:Dt})],YZ.prototype,"ident",void 0);Z([x({type:Xn,optional:!0})],YZ.prototype,"authInfo",void 0);var kE;class PZ{constructor(t={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],PZ.prototype,"otherCertFormat",void 0);Z([x({type:de.Any})],PZ.prototype,"otherCert",void 0);let hf=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Bm})],hf.prototype,"certificate",void 0);Z([x({type:P0,context:2,implicit:!0})],hf.prototype,"v2AttrCert",void 0);Z([x({type:PZ,context:3,implicit:!0})],hf.prototype,"other",void 0);hf=Z([nt({type:Me.Choice})],hf);let VE=kE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,kE.prototype)}};VE=kE=Z([nt({type:Me.Set,itemType:hf})],VE);class zf{constructor(t={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],zf.prototype,"contentType",void 0);Z([x({type:de.Any,context:0})],zf.prototype,"content",void 0);let kp=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:Xn})],kp.prototype,"single",void 0);Z([x({type:de.Any})],kp.prototype,"any",void 0);kp=Z([nt({type:Me.Choice})],kp);class D0{constructor(t={}){this.eContentType="",Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],D0.prototype,"eContentType",void 0);Z([x({type:kp,context:0,optional:!0})],D0.prototype,"eContent",void 0);class K0{constructor(t={}){this.issuer=new ur,this.serialNumber=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:ur})],K0.prototype,"issuer",void 0);Z([x({type:de.Integer,converter:Gn})],K0.prototype,"serialNumber",void 0);var OE;class M0{constructor(t={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],M0.prototype,"otherRevInfoFormat",void 0);Z([x({type:de.Any})],M0.prototype,"otherRevInfo",void 0);let Vp=class{constructor(t={}){this.other=new M0,Object.assign(this,t)}};Z([x({type:M0,context:1,implicit:!0})],Vp.prototype,"other",void 0);Vp=Z([nt({type:Me.Choice})],Vp);let px=OE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,OE.prototype)}};px=OE=Z([nt({type:Me.Set,itemType:Vp})],px);var yC;(function(e){e[e.v0=0]="v0",e[e.v1=1]="v1",e[e.v2=2]="v2",e[e.v3=3]="v3",e[e.v4=4]="v4",e[e.v5=5]="v5"})(yC||(yC={}));let Op=class extends ht{};Op=Z([nt({type:Me.Sequence})],Op);let IC=class extends ht{};IC=Z([nt({type:Me.Sequence})],IC);let pf=class{constructor(t={}){this.issuerAndSerialNumber=new K0,this.subjectKeyIdentifier=new dC,Object.assign(this,t)}};Z([x({type:K0})],pf.prototype,"issuerAndSerialNumber",void 0);Z([x({type:dC,context:0,implicit:!0})],pf.prototype,"subjectKeyIdentifier",void 0);pf=Z([nt({type:Me.Choice})],pf);var HE;class Za{constructor(t={}){this.version=yC.v0,this.sid=new pf,this.digestAlgorithm=new Op,this.signatureAlgorithm=new IC,this.signature=new Xn,Object.assign(this,t)}}Z([x({type:de.Integer})],Za.prototype,"version",void 0);Z([x({type:pf})],Za.prototype,"sid",void 0);Z([x({type:Op})],Za.prototype,"digestAlgorithm",void 0);Z([x({type:Rm,repeated:"set",context:0,implicit:!0,optional:!0})],Za.prototype,"signedAttrs",void 0);Z([x({type:IC})],Za.prototype,"signatureAlgorithm",void 0);Z([x({type:Xn})],Za.prototype,"signature",void 0);Z([x({type:Rm,repeated:"set",context:1,implicit:!0,optional:!0})],Za.prototype,"unsignedAttrs",void 0);let vC=HE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,HE.prototype)}};vC=HE=Z([nt({type:Me.Set,itemType:Za})],vC);var FE;let CC=FE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,FE.prototype)}};CC=FE=Z([nt({type:Me.Set,itemType:Op})],CC);class Jf{constructor(t={}){this.version=yC.v0,this.digestAlgorithms=new CC,this.encapContentInfo=new D0,this.signerInfos=new vC,Object.assign(this,t)}}Z([x({type:de.Integer})],Jf.prototype,"version",void 0);Z([x({type:CC})],Jf.prototype,"digestAlgorithms",void 0);Z([x({type:D0})],Jf.prototype,"encapContentInfo",void 0);Z([x({type:VE,context:0,implicit:!0,optional:!0})],Jf.prototype,"certificates",void 0);Z([x({type:Vp,context:1,implicit:!0,optional:!0})],Jf.prototype,"crls",void 0);Z([x({type:vC})],Jf.prototype,"signerInfos",void 0);var xE;class $0{constructor(t={}){this.attrId="",this.attrValues=[],Object.assign(t)}}Z([x({type:de.ObjectIdentifier})],$0.prototype,"attrId",void 0);Z([x({type:de.Any,repeated:"set"})],$0.prototype,"attrValues",void 0);let mx=xE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,xE.prototype)}};mx=xE=Z([nt({type:Me.Sequence,itemType:$0})],mx);var LE;let yx=LE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,LE.prototype)}};yx=LE=Z([nt({type:Me.Sequence,itemType:zf})],yx);class Lz{constructor(t={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],Lz.prototype,"certId",void 0);Z([x({type:de.Any,context:0})],Lz.prototype,"certValue",void 0);class Yz{constructor(t={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],Yz.prototype,"crlId",void 0);Z([x({type:de.Any,context:0})],Yz.prototype,"crltValue",void 0);class Pz extends Xn{}let z0=class{constructor(t={}){this.encryptionAlgorithm=new ht,this.encryptedData=new Pz,Object.assign(this,t)}};Z([x({type:ht})],z0.prototype,"encryptionAlgorithm",void 0);Z([x({type:Pz})],z0.prototype,"encryptedData",void 0);var YE,PE;(function(e){e[e.v1=0]="v1"})(PE||(PE={}));class Xz extends Xn{}let XE=YE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,YE.prototype)}};XE=YE=Z([nt({type:Me.Sequence,itemType:ba})],XE);class Nm{constructor(t={}){this.version=PE.v1,this.privateKeyAlgorithm=new ht,this.privateKey=new Xz,Object.assign(this,t)}}Z([x({type:de.Integer})],Nm.prototype,"version",void 0);Z([x({type:ht})],Nm.prototype,"privateKeyAlgorithm",void 0);Z([x({type:Xz})],Nm.prototype,"privateKey",void 0);Z([x({type:XE,implicit:!0,context:0,optional:!0})],Nm.prototype,"attributes",void 0);let Ix=class extends Nm{};Ix=Z([nt({type:Me.Sequence})],Ix);let vx=class extends z0{};vx=Z([nt({type:Me.Sequence})],vx);class Uz{constructor(t={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],Uz.prototype,"secretTypeId",void 0);Z([x({type:de.Any,context:0})],Uz.prototype,"secretValue",void 0);class Zm{constructor(t={}){this.mac=new H0,this.macSalt=new Xn,this.iterations=1,Object.assign(this,t)}}Z([x({type:H0})],Zm.prototype,"mac",void 0);Z([x({type:Xn})],Zm.prototype,"macSalt",void 0);Z([x({type:de.Integer,defaultValue:1})],Zm.prototype,"iterations",void 0);class J0{constructor(t={}){this.version=3,this.authSafe=new zf,this.macData=new Zm,Object.assign(this,t)}}Z([x({type:de.Integer})],J0.prototype,"version",void 0);Z([x({type:zf})],J0.prototype,"authSafe",void 0);Z([x({type:Zm,optional:!0})],J0.prototype,"macData",void 0);var UE;class j0{constructor(t={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.ObjectIdentifier})],j0.prototype,"bagId",void 0);Z([x({type:de.Any,context:0})],j0.prototype,"bagValue",void 0);Z([x({type:$0,repeated:"set",optional:!0})],j0.prototype,"bagAttributes",void 0);let Cx=UE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,UE.prototype)}};Cx=UE=Z([nt({type:Me.Sequence,itemType:j0})],Cx);var DE,KE,ME;const Dz="1.2.840.113549.1.9",Kz=`${Dz}.7`,Mz=`${Dz}.14`;let bC=class extends Xr{constructor(t={}){super(t)}toString(){return this.ia5String||super.toString()}};Z([x({type:de.IA5String})],bC.prototype,"ia5String",void 0);bC=Z([nt({type:Me.Choice})],bC);let bx=class extends zf{};bx=Z([nt({type:Me.Sequence})],bx);let Ax=class extends J0{};Ax=Z([nt({type:Me.Sequence})],Ax);let Sx=class extends z0{};Sx=Z([nt({type:Me.Sequence})],Sx);let $E=class{constructor(t=""){this.value=t}toString(){return this.value}};Z([x({type:de.IA5String})],$E.prototype,"value",void 0);$E=Z([nt({type:Me.Choice})],$E);let _x=class extends bC{};_x=Z([nt({type:Me.Choice})],_x);let wx=class extends Xr{};wx=Z([nt({type:Me.Choice})],wx);let zE=class{constructor(t=new Date){this.value=t}};Z([x({type:de.GeneralizedTime})],zE.prototype,"value",void 0);zE=Z([nt({type:Me.Choice})],zE);let Bx=class extends Xr{};Bx=Z([nt({type:Me.Choice})],Bx);let JE=class{constructor(t="M"){this.value=t}toString(){return this.value}};Z([x({type:de.PrintableString})],JE.prototype,"value",void 0);JE=Z([nt({type:Me.Choice})],JE);let AC=class{constructor(t=""){this.value=t}toString(){return this.value}};Z([x({type:de.PrintableString})],AC.prototype,"value",void 0);AC=Z([nt({type:Me.Choice})],AC);let Ex=class extends AC{};Ex=Z([nt({type:Me.Choice})],Ex);let Rx=class extends Xr{};Rx=Z([nt({type:Me.Choice})],Rx);let jE=class{constructor(t=""){this.value=t}toString(){return this.value}};Z([x({type:de.ObjectIdentifier})],jE.prototype,"value",void 0);jE=Z([nt({type:Me.Choice})],jE);let Gx=class extends Fr{};Gx=Z([nt({type:Me.Choice})],Gx);let QE=class{constructor(t=0){this.value=t}toString(){return this.value.toString()}};Z([x({type:de.Integer})],QE.prototype,"value",void 0);QE=Z([nt({type:Me.Choice})],QE);let Nx=class extends Za{};Nx=Z([nt({type:Me.Sequence})],Nx);let SC=class extends Xr{};SC=Z([nt({type:Me.Choice})],SC);let Zx=DE=class extends Kc{constructor(t){super(t),Object.setPrototypeOf(this,DE.prototype)}};Zx=DE=Z([nt({type:Me.Sequence})],Zx);let Tx=KE=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,KE.prototype)}};Tx=KE=Z([nt({type:Me.Set,itemType:Rm})],Tx);let qE=class{constructor(t=""){this.value=t}toString(){return this.value}};Z([x({type:de.BmpString})],qE.prototype,"value",void 0);qE=Z([nt({type:Me.Choice})],qE);let eR=class extends ht{};eR=Z([nt({type:Me.Sequence})],eR);let Wx=ME=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,ME.prototype)}};Wx=ME=Z([nt({type:Me.Sequence,itemType:eR})],Wx);let mf=class{constructor(t={}){Object.assign(this,t)}};Z([x({type:de.ObjectIdentifier})],mf.prototype,"namedCurve",void 0);mf=Z([nt({type:Me.Choice})],mf);class Q0{constructor(t={}){this.version=1,this.privateKey=new Xn,Object.assign(this,t)}}Z([x({type:de.Integer})],Q0.prototype,"version",void 0);Z([x({type:Xn})],Q0.prototype,"privateKey",void 0);Z([x({type:mf,context:0,optional:!0})],Q0.prototype,"parameters",void 0);Z([x({type:de.BitString,context:1,optional:!0})],Q0.prototype,"publicKey",void 0);class _C{constructor(t={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:de.Integer,converter:Gn})],_C.prototype,"r",void 0);Z([x({type:de.Integer,converter:Gn})],_C.prototype,"s",void 0);const kx="1.2.840.10045.2.1",Vx="1.2.840.10045.4.1",Ox="1.2.840.10045.4.3.2",Hx="1.2.840.10045.4.3.3",Fx="1.2.840.10045.4.3.4",xx="1.2.840.10045.3.1.7",Lx="1.3.132.0.34",Yx="1.3.132.0.35";var tR;let wC=tR=class extends wn{constructor(t){super(t),Object.setPrototypeOf(this,tR.prototype)}};wC=tR=Z([nt({type:Me.Sequence,itemType:ba})],wC);class jf{constructor(t={}){this.version=0,this.subject=new ur,this.subjectPKInfo=new hu,this.attributes=new wC,Object.assign(this,t)}}Z([x({type:de.Integer})],jf.prototype,"version",void 0);Z([x({type:ur})],jf.prototype,"subject",void 0);Z([x({type:hu})],jf.prototype,"subjectPKInfo",void 0);Z([x({type:wC,implicit:!0,context:0})],jf.prototype,"attributes",void 0);class XZ{constructor(t={}){this.certificationRequestInfo=new jf,this.signatureAlgorithm=new ht,this.signature=new ArrayBuffer(0),Object.assign(this,t)}}Z([x({type:jf})],XZ.prototype,"certificationRequestInfo",void 0);Z([x({type:ht})],XZ.prototype,"signatureAlgorithm",void 0);Z([x({type:de.BitString})],XZ.prototype,"signature",void 0);/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */class Qf{constructor(...t){if(t.length===1){const n=t[0];this.rawData=Vt.serialize(n),this.onInit(n)}else{const n=Vt.parse(t[0],t[1]);this.rawData=Kt.toArrayBuffer(t[0]),this.onInit(n)}}equal(t){return t instanceof Qf?Mze(t.rawData,this.rawData):!1}}class yu extends Qf{constructor(...t){let n;Kt.isBufferSource(t[0])?n=Kt.toArrayBuffer(t[0]):n=Vt.serialize(new Vs({extnID:t[0],critical:t[1],extnValue:new Xn(Kt.toArrayBuffer(t[2]))})),super(n,Vs)}onInit(t){this.type=t.extnID,this.critical=t.critical,this.value=t.extnValue.buffer}}class Zc extends Map{constructor(){super(),typeof self<"u"&&typeof crypto<"u"&&this.set(Zc.DEFAULT,crypto)}static isCryptoKeyPair(t){return t&&t.privateKey&&t.publicKey}static isCryptoKey(t){return t&&t.usages&&t.type&&t.algorithm&&t.extractable!==void 0}get(t=Zc.DEFAULT){const n=super.get(t.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${t}'`);return n}set(t,n){if(typeof t=="string"){if(!n)throw new TypeError("Argument 'value' is required");super.set(t.toLowerCase(),n)}else super.set(Zc.DEFAULT,t);return this}}Zc.DEFAULT="default";const ol=new Zc;class $z{constructor(){this.items={}}get(t){return this.items[t]||null}register(t,n){this.items[t]=n,this.items[n]=t}}const Mi=new $z;Mi.register("CN","2.5.4.3");Mi.register("L","2.5.4.7");Mi.register("ST","2.5.4.8");Mi.register("O","2.5.4.10");Mi.register("OU","2.5.4.11");Mi.register("C","2.5.4.6");Mi.register("DC","0.9.2342.19200300.100.1.25");Mi.register("E","1.2.840.113549.1.9.1");Mi.register("G","2.5.4.42");Mi.register("I","2.5.4.43");Mi.register("SN","2.5.4.4");Mi.register("T","2.5.4.12");function BJe(e,t){return`\\${Ft.ToHex(Ft.FromUtf8String(t)).toUpperCase()}`}function EJe(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,BJe)}class Px{constructor(t,n={}){this.extraNames=new $z,this.asn=new ur;for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=n[r];this.extraNames.register(r,i)}typeof t=="string"?this.asn=this.fromString(t):t instanceof ur?this.asn=t:Kt.isBufferSource(t)?this.asn=Vt.parse(t,ur):this.asn=this.fromJSON(t)}getName(t){return this.extraNames.get(t)||Mi.get(t)}toString(){return this.asn.map(t=>t.map(n=>{const r=this.getName(n.type)||n.type,i=n.value.anyValue?`#${Ft.ToHex(n.value.anyValue)}`:EJe(n.value.toString());return`${r}=${i}`}).join("+")).join(", ")}toJSON(){var t;const n=[];for(const r of this.asn){const i={};for(const o of r){const s=this.getName(o.type)||o.type;(t=i[s])!==null&&t!==void 0||(i[s]=[]),i[s].push(o.value.anyValue?`#${Ft.ToHex(o.value.anyValue)}`:o.value.toString())}n.push(i)}return n}fromString(t){const n=new ur,r=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let i=null,o=",";for(;i=r.exec(`${t},`);){let[,s,a]=i;const l=a[a.length-1];(l===","||l==="+")&&(a=a.slice(0,a.length-1),i[3]=l);const c=i[3];if(/[\d.]+/.test(s)||(s=this.getName(s)||""),!s)throw new Error(`Cannot get OID for name type '${s}'`);const u=new Tp({type:s});if(a.charAt(0)==="#")u.value.anyValue=Ft.FromHex(a.slice(1));else{const d=/"(.*?[^\\])?"/.exec(a);d&&(a=d[1]),a=a.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1"),s===this.getName("E")||s===this.getName("DC")?u.value.ia5String=a:u.value.printableString=a}o==="+"?n[n.length-1].push(u):n.push(new df([u])),o=c}return n}fromJSON(t){const n=new ur;for(const r of t){const i=new df;for(const o in r){let s=o;if(/[\d.]+/.test(o)||(s=this.getName(o)||""),!s)throw new Error(`Cannot get OID for name type '${o}'`);const a=r[o];for(const l of a){const c=new Tp({type:s});l[0]==="#"?c.value.anyValue=Ft.FromHex(l.slice(1)):s===this.getName("E")||s===this.getName("DC")?c.value.ia5String=l:c.value.printableString=l,i.push(c)}}n.push(i)}return n}toArrayBuffer(){return Vt.serialize(this.asn)}}class Ta{static register(t,n){this.items.set(t,n)}static create(t){const n=new yu(t),r=this.items.get(n.type);return r?new r(t):n}}Ta.items=new Map;const q0="crypto.algorithm";class RJe{getAlgorithms(){return Os.resolveAll(q0)}toAsnAlgorithm(t){for(const n of this.getAlgorithms()){const r=n.toAsnAlgorithm(t);if(r)return r}if(/[0-9.]+/.test(t.name)){const n=new ht({algorithm:t.name});if("parameters"in t){const r=t;n.parameters=r.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(t){for(const r of this.getAlgorithms()){const i=r.toWebAlgorithm(t);if(i)return i}return{name:t.algorithm,parameters:t.parameters}}}const UZ="crypto.algorithmProvider";Os.registerSingleton(UZ,RJe);class R_{constructor(){this.CertificateTag="CERTIFICATE",this.CertificateRequestTag="CERTIFICATE REQUEST",this.PublicKeyTag="PUBLIC KEY",this.PrivateKeyTag="PRIVATE KEY"}static isPem(t){return typeof t=="string"&&/-{5}BEGIN [A-Z0-9 ]+-{5}([a-zA-Z0-9=+/\n\r]+)-{5}END [A-Z0-9 ]+-{5}/g.test(t)}static decode(t){const n=/-{5}BEGIN [A-Z0-9 ]+-{5}([a-zA-Z0-9=+/\n\r]+)-{5}END [A-Z0-9 ]+-{5}/g,r=[];let i=null;for(;i=n.exec(t);){const o=i[1].replace(/\r/g,"").replace(/\n/g,"");r.push(Ft.FromBase64(o))}return r}static encode(t,n){if(Array.isArray(t)){const r=new Array;return t.forEach(i=>{r.push(this.encodeBuffer(i,n))}),r.join(`
`)}else return this.encodeBuffer(t,n)}static encodeBuffer(t,n){const r=Ft.ToBase64(t);let i,o=0;const s=Array();for(;o<r.length&&(r.length-o<64?i=r.substring(o):(i=r.substring(o,o+64),o+=64),i.length!==0);)if(s.push(i),i.length<64)break;const a=n.toLocaleUpperCase();return`-----BEGIN ${a}-----
${s.join(`
`)}
-----END ${a}-----`}}class $c extends Qf{static isAsnEncoded(t){return Kt.isBufferSource(t)||typeof t=="string"}static toArrayBuffer(t){if(typeof t=="string"){if(R_.isPem(t))return R_.decode(t)[0];if(Ft.isHex(t))return Ft.FromHex(t);if(Ft.isBase64(t))return Ft.FromBase64(t);if(Ft.isBase64Url(t))return Ft.FromBase64Url(t);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else return t}constructor(...t){$c.isAsnEncoded(t[0])?super($c.toArrayBuffer(t[0]),t[1]):super(t[0])}toString(t="pem"){switch(t){case"pem":return R_.encode(this.rawData,this.tag);case"hex":return Ft.ToHex(this.rawData);case"base64":return Ft.ToBase64(this.rawData);case"base64url":return Ft.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}}class Xx extends $c{constructor(t){$c.isAsnEncoded(t)?super(t,hu):super(t),this.tag="PUBLIC KEY"}async export(...t){let n,r=["verify"],i={hash:"SHA-256",...this.algorithm};return t.length>1?(i=t[0]||i,r=t[1]||r,n=t[2]||ol.get()):n=t[0]||ol.get(),n.subtle.importKey("spki",this.rawData,i,!0,r)}onInit(t){const n=Os.resolve(UZ),r=this.algorithm=n.toWebAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case hC:{const i=Vt.parse(t.subjectPublicKey,HZ),o=Kt.toUint8Array(i.modulus);r.publicExponent=Kt.toUint8Array(i.publicExponent),r.modulusLength=(o[0]?o:o.slice(1)).byteLength<<3;break}}}async getThumbprint(...t){var n;let r,i="SHA-1";return t.length>=1&&!(!((n=t[0])===null||n===void 0)&&n.subtle)?(i=t[0]||i,r=t[1]||ol.get()):r=t[0]||ol.get(),await r.subtle.digest(i,this.rawData)}}const DZ="crypto.signatureFormatter";class GJe{toAsnSignature(t,n){return Kt.toArrayBuffer(n)}toWebSignature(t,n){return Kt.toArrayBuffer(n)}}class Hp extends $c{constructor(t){$c.isAsnEncoded(t)?super(t,Bm):super(t),this.tag="CERTIFICATE"}onInit(t){const n=t.tbsCertificate;this.tbs=Vt.serialize(n),this.serialNumber=Ft.ToHex(n.serialNumber),this.subject=new Px(n.subject).toString(),this.issuer=new Px(n.issuer).toString();const r=Os.resolve(UZ);this.signatureAlgorithm=r.toWebAlgorithm(t.signatureAlgorithm),this.signature=t.signatureValue;const i=n.validity.notBefore.utcTime||n.validity.notBefore.generalTime;if(!i)throw new Error("Cannot get 'notBefore' value");this.notBefore=i;const o=n.validity.notAfter.utcTime||n.validity.notAfter.generalTime;if(!o)throw new Error("Cannot get 'notAfter' value");this.notAfter=o,this.extensions=[],n.extensions&&(this.extensions=n.extensions.map(s=>Ta.create(Vt.serialize(s)))),this.publicKey=new Xx(n.subjectPublicKeyInfo)}getExtension(t){for(const n of this.extensions)if(typeof t=="string"){if(n.type===t)return n}else if(n instanceof t)return n;return null}getExtensions(t){return this.extensions.filter(n=>typeof t=="string"?n.type===t:n instanceof t)}async verify(t={},n=ol.get()){let r,i;const o=t.publicKey;try{o?o instanceof Hp?(r={...o.publicKey.algorithm,...this.signatureAlgorithm},i=await o.publicKey.export(r,["verify"])):o instanceof Xx?(r={...o.algorithm,...this.signatureAlgorithm},i=await o.export(r,["verify"])):(r={...o.algorithm,...this.signatureAlgorithm},i=o):(r={...this.publicKey.algorithm,...this.signatureAlgorithm},i=await this.publicKey.export(r,["verify"],n))}catch{return!1}const s=Os.resolveAll(DZ).reverse();let a=null;for(const c of s)if(a=c.toWebSignature(r,this.signature),a)break;if(!a)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const l=await n.subtle.verify(this.signatureAlgorithm,i,a,this.tbs);if(t.signatureOnly)return l;{const u=(t.date||new Date).getTime();return l&&this.notBefore.getTime()<u&&u<this.notAfter.getTime()}}async getThumbprint(...t){let n,r="SHA-1";return t[0]&&(t[0].subtle?n=t[0]:(r=t[0]||r,n=t[1])),n??(n=ol.get()),await n.subtle.digest(r,this.rawData)}async isSelfSigned(){return this.subject===this.issuer&&await this.verify({signatureOnly:!0})}}class BC extends yu{constructor(...t){if(Kt.isBufferSource(t[0]))super(t[0]);else if(typeof t[0]=="string"){const n=new Td({keyIdentifier:new Xn(Ft.FromHex(t[0]))});super(oE,t[1],Vt.serialize(n))}else{const n=t[0],r=new Td({authorityCertIssuer:n.name,authorityCertSerialNumber:Ft.FromHex(n.serialNumber)});super(oE,t[1],Vt.serialize(r))}}static async create(t,n=!1,r=ol.get()){if(t instanceof Hp||Zc.isCryptoKey(t)){const i=t instanceof Hp?await t.publicKey.export(r):t,o=await r.subtle.exportKey("spki",i),s=await r.subtle.digest("SHA-1",o);return new BC(Ft.ToHex(s),n)}else return new BC(t,n)}onInit(t){super.onInit(t);const n=Vt.parse(t.extnValue,Td);n.keyIdentifier&&(this.keyId=Ft.ToHex(n.keyIdentifier)),n.authorityCertIssuer&&n.authorityCertSerialNumber&&(this.certId={name:n.authorityCertIssuer,serialNumber:Ft.ToHex(n.authorityCertSerialNumber)})}}class NJe extends yu{constructor(...t){if(Kt.isBufferSource(t[0])){super(t[0]);const n=Vt.parse(this.value,sC);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new sC({cA:t[0],pathLenConstraint:t[1]});super(vz,t[2],Vt.serialize(n)),this.ca=t[0],this.pathLength=t[1]}}}class ZJe extends yu{constructor(...t){if(Kt.isBufferSource(t[0])){super(t[0]);const n=Vt.parse(this.value,lC);this.usages=n.map(r=>r)}else{const n=new lC(t[0]);super(Cz,t[1],Vt.serialize(n)),this.usages=t[0]}}}var Ux;(function(e){e[e.digitalSignature=1]="digitalSignature",e[e.nonRepudiation=2]="nonRepudiation",e[e.keyEncipherment=4]="keyEncipherment",e[e.dataEncipherment=8]="dataEncipherment",e[e.keyAgreement=16]="keyAgreement",e[e.keyCertSign=32]="keyCertSign",e[e.cRLSign=64]="cRLSign",e[e.encipherOnly=128]="encipherOnly",e[e.decipherOnly=256]="decipherOnly"})(Ux||(Ux={}));class TJe extends yu{constructor(...t){if(Kt.isBufferSource(t[0])){super(t[0]);const n=Vt.parse(this.value,cx);this.usages=n.toNumber()}else{const n=new cx(t[0]);super(bz,t[1],Vt.serialize(n)),this.usages=t[0]}}}class KZ extends yu{constructor(...t){if(Kt.isBufferSource(t[0])){super(t[0]);const n=Vt.parse(this.value,dC);this.keyId=Ft.ToHex(n)}else{const n=typeof t[0]=="string"?Ft.FromHex(t[0]):t[0],r=new dC(n);super(Bz,t[1],Vt.serialize(r)),this.keyId=Ft.ToHex(n)}}static async create(t,n=!1,r=ol.get()){const i=await r.subtle.exportKey("spki",t),o=await r.subtle.digest("SHA-1",i);return new KZ(Ft.ToHex(o),n)}}class WJe extends Qf{constructor(...t){let n;if(Kt.isBufferSource(t[0]))n=Kt.toArrayBuffer(t[0]);else{const r=t[0],i=Kt.toArrayBuffer(t[1]);n=Vt.serialize(new Al({typeId:r,value:i}))}super(n,Al)}onInit(t){this.type=t.typeId,this.value=t.value}toJSON(){return{type:this.type,value:Ft.ToHex(this.value)}}}class As extends yu{constructor(...t){if(Kt.isBufferSource(t[0]))super(t[0]);else{const n=t[0]||{},r=new uC;for(const i of n.dns||[])r.push(new Dt({dNSName:i}));for(const i of n.email||[])r.push(new Dt({rfc822Name:i}));for(const i of n.guid||[]){const o=/([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})/i.exec(i);if(!o)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const s=o.slice(1).map((a,l)=>l<3?Ft.ToHex(new Uint8Array(Ft.FromHex(a)).reverse()):a).join("");r.push(new Dt({otherName:new Al({typeId:As.GUID,value:Vt.serialize(new Xn(Ft.FromHex(s)))})}))}for(const i of n.ip||[])r.push(new Dt({iPAddress:i}));for(const i of n.url||[])r.push(new Dt({uniformResourceIdentifier:i}));for(const i of n.upn||[])r.push(new Dt({otherName:new Al({typeId:As.UPN,value:Vt.serialize(pz.toASN(i))})}));for(const i of n.registeredId||[])r.push(new Dt({registeredID:i}));for(const i of n.otherName||[])r.push(new Dt({otherName:new Al({typeId:i.type,value:Ft.FromHex(i.value)})}));super(wz,t[1],Vt.serialize(r))}}onInit(t){super.onInit(t);const n=Vt.parse(t.extnValue,uC);this.dns=n.filter(r=>r.dNSName).map(r=>r.dNSName||""),this.email=n.filter(r=>r.rfc822Name).map(r=>r.rfc822Name||""),this.ip=n.filter(r=>r.iPAddress).map(r=>r.iPAddress||""),this.url=n.filter(r=>r.uniformResourceIdentifier).map(r=>r.uniformResourceIdentifier||""),this.upn=n.filter(r=>{var i;return((i=r.otherName)===null||i===void 0?void 0:i.typeId)===As.UPN}).map(r=>r.otherName?Vt.parse(r.otherName.value,Xr).toString():""),this.guid=n.filter(r=>{var i;return((i=r.otherName)===null||i===void 0?void 0:i.typeId)===As.GUID}).map(r=>r.otherName?Vt.parse(r.otherName.value,Xn):new Xn).map(r=>{const i=/([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})/i.exec(Ft.ToHex(r));if(!i)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");return`{${i.slice(1).map((s,a)=>a<3?Ft.ToHex(new Uint8Array(Ft.FromHex(s)).reverse()):s).join("-")}}`}),this.registeredId=n.filter(r=>r.registeredID).map(r=>r.registeredID||""),this.otherNames=n.filter(r=>r.otherName&&![As.GUID,As.UPN].includes(r.otherName.typeId)).map(r=>new WJe(r.otherName.typeId,r.otherName.value))}toJSON(){const t={};return this.dns.length&&(t.dns=[...this.dns]),this.email.length&&(t.email=[...this.email]),this.ip.length&&(t.ip=[...this.ip]),this.guid.length&&(t.guid=[...this.guid]),this.upn.length&&(t.upn=[...this.upn]),this.url.length&&(t.url=[...this.url]),this.registeredId.length&&(t.registeredId=[...this.registeredId]),this.otherNames.length&&(t.otherName=this.otherNames.map(n=>n.toJSON())),t}}As.GUID="1.3.6.1.4.1.311.25.1";As.UPN="1.3.6.1.4.1.311.20.2.3";class MZ extends Qf{constructor(...t){let n;if(Kt.isBufferSource(t[0]))n=Kt.toArrayBuffer(t[0]);else{const r=t[0],i=Array.isArray(t[1])?t[1].map(o=>Kt.toArrayBuffer(o)):[];n=Vt.serialize(new ba({type:r,values:i}))}super(n,ba)}onInit(t){this.type=t.type,this.values=t.values}}class kJe extends MZ{constructor(...t){var n;if(Kt.isBufferSource(t[0]))super(t[0]);else{const r=new SC({printableString:t[0]});super(Kz,[Vt.serialize(r)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(t){if(super.onInit(t),this.values[0]){const n=Vt.parse(this.values[0],SC);this.password=n.toString()}}}class VJe extends MZ{constructor(...t){var n;if(Kt.isBufferSource(t[0]))super(t[0]);else{const r=new Kc(t[0]);super(Mz,[Vt.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(t){if(super.onInit(t),this.values[0]){const n=Vt.parse(this.values[0],Kc);this.items=n.map(r=>Ta.create(Vt.serialize(r)))}}}class $Z{static register(t,n){this.items.set(t,n)}static create(t){const n=new MZ(t),r=this.items.get(n.type);return r?new r(t):n}}$Z.items=new Map;let nR=class{toAsnAlgorithm(t){switch(t.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(t.hash)switch(t.hash.name.toLowerCase()){case"sha-1":return new ht({algorithm:AE,parameters:null});case"sha-256":return new ht({algorithm:gx,parameters:null});case"sha-384":return new ht({algorithm:SE,parameters:null});case"sha-512":return new ht({algorithm:_E,parameters:null})}else return new ht({algorithm:hC,parameters:null})}return null}toWebAlgorithm(t){switch(t.algorithm){case hC:return{name:"RSASSA-PKCS1-v1_5"};case AE:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case gx:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case SE:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case _E:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};nR=Z([VZ()],nR);Os.registerSingleton(q0,nR);var EI;let EC=EI=class{toAsnAlgorithm(t){switch(t.name.toLowerCase()){case"ecdsa":if("hash"in t)switch((typeof t.hash=="string"?t.hash:t.hash.name).toLowerCase()){case"sha-1":return new ht({algorithm:Vx,parameters:null});case"sha-256":return new ht({algorithm:Ox,parameters:null});case"sha-384":return new ht({algorithm:Hx,parameters:null});case"sha-512":return new ht({algorithm:Fx,parameters:null})}else if("namedCurve"in t){let n="";switch(t.namedCurve){case"P-256":n=xx;break;case"K-256":n=EI.SECP256K1;break;case"P-384":n=Lx;break;case"P-521":n=Yx;break}if(n)return new ht({algorithm:kx,parameters:Vt.serialize(new mf({namedCurve:n}))})}}return null}toWebAlgorithm(t){switch(t.algorithm){case Vx:return{name:"ECDSA",hash:{name:"SHA-1"}};case Ox:return{name:"ECDSA",hash:{name:"SHA-256"}};case Hx:return{name:"ECDSA",hash:{name:"SHA-384"}};case Fx:return{name:"ECDSA",hash:{name:"SHA-512"}};case kx:{if(!t.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(Vt.parse(t.parameters,mf).namedCurve){case xx:return{name:"ECDSA",namedCurve:"P-256"};case EI.SECP256K1:return{name:"ECDSA",namedCurve:"K-256"};case Lx:return{name:"ECDSA",namedCurve:"P-384"};case Yx:return{name:"ECDSA",namedCurve:"P-521"}}}}return null}};EC.SECP256K1="1.3.132.0.10";EC=EI=Z([VZ()],EC);Os.registerSingleton(q0,EC);class ao{addPadding(t,n){const r=Kt.toUint8Array(n),i=new Uint8Array(t);return i.set(r,t-r.length),i}removePadding(t){const n=Kt.toUint8Array(t);for(let r=0;r<n.length;r++)if(n[r])return n.slice(r).buffer;return new ArrayBuffer(0)}toAsnSignature(t,n){if(t.name==="ECDSA"){const r=t.namedCurve,i=ao.namedCurveSize.get(r)||ao.defaultNamedCurveSize,o=new _C,s=Kt.toUint8Array(n);return o.r=this.removePadding(s.slice(0,i)),o.s=this.removePadding(s.slice(i,i+i)),Vt.serialize(o)}return null}toWebSignature(t,n){if(t.name==="ECDSA"){const r=Vt.parse(n,_C),i=t.namedCurve,o=ao.namedCurveSize.get(i)||ao.defaultNamedCurveSize,s=this.addPadding(o,this.removePadding(r.r)),a=this.addPadding(o,this.removePadding(r.s));return Kze(s,a)}return null}}ao.namedCurveSize=new Map;ao.defaultNamedCurveSize=32;const Dx="1.3.101.110",Kx="1.3.101.111",Mx="1.3.101.112",$x="1.3.101.113";let rR=class{toAsnAlgorithm(t){let n=null;switch(t.name.toLowerCase()){case"eddsa":switch(t.namedCurve.toLowerCase()){case"ed25519":n=Mx;break;case"ed448":n=$x;break}break;case"ecdh-es":switch(t.namedCurve.toLowerCase()){case"x25519":n=Dx;break;case"x448":n=Kx;break}}return n?new ht({algorithm:n}):null}toWebAlgorithm(t){switch(t.algorithm){case Mx:return{name:"EdDSA",namedCurve:"Ed25519"};case $x:return{name:"EdDSA",namedCurve:"Ed448"};case Dx:return{name:"ECDH-ES",namedCurve:"X25519"};case Kx:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};rR=Z([VZ()],rR);Os.registerSingleton(q0,rR);Ta.register(vz,NJe);Ta.register(Cz,ZJe);Ta.register(bz,TJe);Ta.register(Bz,KZ);Ta.register(oE,BC);Ta.register(wz,As);$Z.register(Kz,kJe);$Z.register(Mz,VJe);Os.registerSingleton(DZ,GJe);Os.registerSingleton(DZ,ao);ao.namedCurveSize.set("P-256",32);ao.namedCurveSize.set("K-256",32);ao.namedCurveSize.set("P-384",48);ao.namedCurveSize.set("P-521",66);const OJe=e=>Ns.createHash("sha256").update(e).digest("hex"),HJe=e=>new Hp(e.data),FJe=e=>OJe(new Uint8Array(e.publicKey.rawData)),xJe=e=>{const t=[];let n=e.validatedCertificate;do{const r=HJe(n),i=FJe(r);t.push(i),n=n.issuerCert}while(n);return t},LJe=(e,t)=>t.some(n=>e.has(n)),YJe=e=>{const t=xJe(e);return LJe(aze,t)},PJe=new G$("SSL Pinning",!1),XJe=Ie("GET_SSL_VERIFICATION_STATUS");function*UJe(){let e=!1;PJe.value()&&J.session.defaultSession.setCertificateVerifyProc((t,n)=>{const{hostname:r}=t;if(r.match(/(api\.termius\.com)$/g))if(e=!YJe(t),e){const i=new Gse;En.exception(i.message,i),n(-2)}else n(-3);else n(-3)}),yield*aI(XJe,function*(){return e&&(yield*Ud(CN.request({id:KCe,title:"Couldn't verify the SSL certificate",is_dismissible:!1,is_seen:!1,created_at:new Date,force_to_do_action:!0,type:"critical",button_name:"Contact support",body:"We don't allow untrusted connections to keep your data safe. Synchronization has been disabled.",action:UCe,source:"local"}))),e})}class zx extends zc{constructor(n){super();T(this,"browserWindow");const r={title:n.title||"Website",width:1280,height:800,minWidth:900,minHeight:400,webPreferences:{nodeIntegration:!1,contextIsolation:!0}};this.browserWindow=new J.BrowserWindow(r),this.browserWindow.setMenu(null),this.browserWindow.loadURL(n.url),this.handleEvents()}handleEvents(){this.browserWindow.on("page-title-updated",n=>n.preventDefault()),this.browserWindow.webContents.setWindowOpenHandler(()=>({action:"deny"})),this.browserWindow.on("close",()=>{this.browserWindow=null})}}function DJe(){return J.BrowserWindow.getAllWindows().length===1}function Jx(){return J.BrowserWindow.getAllWindows().length===2}class zZ extends zc{constructor(n){super();T(this,"options");T(this,"windows",[]);T(this,"autoUpdateManager");T(this,"sagas");T(this,"store");T(this,"actionRetranslator",new uxe);T(this,"nodeProcessOrchestrator");T(this,"execAnalyticsReceiver");T(this,"forwardToRenderer",()=>n=>r=>{if(r.meta&&r.meta.scope==="local")return n(r);const i={...r,meta:{...r.meta,scope:"local"}};return this.actionRetranslator.sendAction(i),n(r)});this.sagas=zBe({onError:gHe}),this.store=e0e({reducer:FOe,middleware:o=>o({serializableCheck:!1}).concat(cxe(O1e),this.sagas,this.forwardToRenderer)}),R5.replayActionMain(this.store),this.execAnalyticsReceiver=new yHe(new LO(this.store.dispatch)),this.store.dispatch(xNe({userDataPath:J.app.getPath("userData"),version:J.app.getVersion()})),sEe&&J.app.setUserTasks([{program:process.execPath,arguments:"--new-window",iconPath:process.execPath,iconIndex:0,title:"New Window",description:"Create a new window"}]);let r=n.deeplink;const i=process.argv.filter(o=>o.startsWith("termius://"));i.length===1&&(r=i[0]),this.sagas.run(UJe),this.sagas.run(q$e,{store:this.store,actionRetranslator:this.actionRetranslator}),this.nodeProcessOrchestrator=new Q$e(this.sagas,new LO(this.store.dispatch)),this.nodeProcessOrchestrator.watchProcesses(),this.options=n,this.autoUpdateManager=new Y9e(n,this.store),this.handleEvents(r),this.makeNewPrimaryWindow().then(o=>{o!=null&&r!=null&&this.tryHandleDeeplink(r)})}static open(n){return new zZ(n)}exit(n){J.app.exit(n)}async makeNewPrimaryWindow(n={connections:void 0,showWindow:!0}){const{connections:r,showWindow:i}=n;if(this.windows.length===1&&!Cp(this.store.getState()))return;const o=Bwe({defaultWidth:1280,defaultHeight:800}),s=new rz({type:"primary",store:this.store,actionRetranslator:this.actionRetranslator,show:i,bounds:DJe()||Jx()?o:void 0});r&&this.store.dispatch(QBe({windowId:s.browserWindow.id,connections:r})),s.manage(o),this.windows.push(s);const a=s.load();a.then(()=>s.closed,()=>{}).finally(()=>{this.windows=this.windows.filter(l=>l!==s)});try{return await a,s}catch{return}}getPrimaryWindowForAnAction(){return this.getFocusedWindow()??yU(this.windows)}async showPrimaryWindowForAnAction(){const n=this.getPrimaryWindowForAnAction()??await this.makeNewPrimaryWindow();return n==null||n.show(),n}showAboutDialogue(){J.dialog.showMessageBox({type:"info",buttons:["OK"],icon:Ah,message:"Termius",title:"About",detail:`Version ${this.options.version}

Termius Corporation`})}async showAllWindows(){J.app.focus(),this.windows.length===0&&this.makeNewPrimaryWindow()}async handleInPrimaryWindow(n){const r=await this.showPrimaryWindowForAnAction();r!=null&&n(r.id)}async openLocalTerminal(){this.handleInPrimaryWindow(n=>this.store.dispatch(K1e({windowId:n})))}async openVaultsTab(){this.handleInPrimaryWindow(n=>{const r=b3(this.store.getState(),n);this.store.dispatch(Sk("vaultTabOpened",{vaultTabOpenedVia:"System Menu",onScreen:U1e((r==null?void 0:r.homePath)??bd)})),this.store.dispatch(z1e({windowId:n}))})}async openSftpTab(){this.handleInPrimaryWindow(n=>{this.store.dispatch(Sk("sftpScreenOpened",{sftpsource:"Tab",sftptabOpenedVia:"System Menu"})),this.store.dispatch(J1e({windowId:n}))})}async openSerialTerminal(){this.handleInPrimaryWindow(n=>this.store.dispatch(q1e({windowId:n,source:"System Top Bar"})))}parseProtocolOnError(n){try{return new URL(n).protocol}catch{return"unknown"}}getFocusedWindow(){var r;const n=(r=J.BrowserWindow.getFocusedWindow())==null?void 0:r.id;return this.windows.find(i=>i.id===n)}openNewPrimaryWindow(n){AHe(this.store.getState())||(this.store.dispatch(K0e({newWindowOrigin:n,windowsCount:this.windows.length+1})),this.makeNewPrimaryWindow())}handleEvents(n){J.app.on("browser-window-created",(o,s)=>{s.once("close",()=>{this.store.dispatch(nEe(s.id))}),s.once("closed",()=>{Jx()&&!(lD&&Cp(this.store.getState()))&&(En.info("All windows has been closed."),setImmediate(()=>{J.app.quit()}))})}),J.app.on("render-process-gone",(o,s,a)=>{const{reason:l,exitCode:c}=a;l!=="clean-exit"&&En.exception(`Renderer process terminated with reason '${l}' and exit code ${c}`,new Error)}),J.app.on("browser-window-focus",(o,s)=>{this.store.dispatch(Nke(s.id))}),J.app.on("browser-window-blur",(o,s)=>{this.store.dispatch(Zke(s.id))}),J.app.on("second-instance",(o,s,a)=>{if(s.includes("--new-window")){this.openNewPrimaryWindow("Dock");return}const l=this.windows.filter(({browserWindow:c})=>!c.isDestroyed());for(const{browserWindow:c}of l)c.isMinimized()&&c.restore(),c.show();this.tryHandleDeeplink(l_e(s))}),J.app.on("activate",()=>this.showAllWindows()),this.on("menu:vaults",()=>this.openVaultsTab()),this.on("menu:sftp",()=>this.openSftpTab()),this.on("menu:check-for-update",()=>this.autoUpdateManager.check()),this.on("menu:about",()=>this.showAboutDialogue()),this.on("menu:show-windows",()=>this.showAllWindows()),this.on("dock:show-windows",()=>this.showAllWindows()),this.on("menu:preferences",()=>{this.store.dispatch(TD(void 0))}),this.on("menu:open-local-terminal",()=>this.openLocalTerminal()),this.on("menu:open-serial-terminal",()=>this.openSerialTerminal()),this.on("menu:new-window",o=>{this.openNewPrimaryWindow(o?"Shortcut":"SystemMenu")}),this.on("dock:new-window",()=>{this.openNewPrimaryWindow("Dock")}),J.ipcMain.on("update-restart",()=>{a3e(),this.autoUpdateManager.restartConfirmed()}),J.ipcMain.on("trigger-update-notification",()=>{this.autoUpdateManager.restoreUpdateNotification()}),J.ipcMain.on("open-external",(o,s)=>aEe?new zx(s):J.shell.openExternal(s.url).catch(a=>{const l=this.parseProtocolOnError(s.url);En.exception(`Cannot open a URL with the '${l}' protocol: ${a.message}`,a)})),J.ipcMain.on("open-new-electron-window",(o,s)=>new zx(s));const r=()=>{var o;$Me((...s)=>this.emit(...s),this.store,(o=J.BrowserWindow.getFocusedWindow())==null?void 0:o.id)};J.ipcMain.on("update-system-menu",r),J.ipcMain.on("open-popup-menu",(o,s={})=>{var a;(a=J.Menu.getApplicationMenu())==null||a.popup({x:s.x,y:s.y})}),J.ipcMain.on("open-connections-in-new-window",async(o,s)=>{if(!WEe(s))return;const a=await this.makeNewPrimaryWindow({connections:s,showWindow:!1});a&&a.browserWindow.show()}),o3e(),n3.listen(),J.ipcMain.handle("dialog.showOpenDialog",(o,s)=>{const a=J.BrowserWindow.fromId(o.sender.id);return a?J.dialog.showOpenDialog(a,s):J.dialog.showOpenDialog(s)}),uEe(),J.ipcMain.handle("dialog.showSaveDialog",(o,s)=>{const a=J.BrowserWindow.fromId(o.sender.id);return a?J.dialog.showSaveDialog(a,s):J.dialog.showSaveDialog(s)}),J.ipcMain.handle("app.getAppPath",()=>J.app.getAppPath()),J.ipcMain.handle("app.isPackaged",()=>J.app.isPackaged),J.ipcMain.handle("wasAppOpenedWithDeeplink",()=>n!=null);const i=()=>{this.store.dispatch(W1e({shouldUseDarkColors:J.nativeTheme.shouldUseDarkColors})),mHe(this.store.getState())==="auto"&&this.store.dispatch(ZB({theme:J.nativeTheme.shouldUseDarkColors?"dark":"light",selectedThemeValue:"auto"}))};if(KO())try{J.nativeTheme.on("updated",i)}catch{}this.sagas.run(fHe),this.sagas.run(J9e),this.sagas.run(sze,{store:this.store,actionRetranslator:this.actionRetranslator}),this.sagas.run(function*(s){yield aI(iEe,async()=>{var a;return(a=s.getPrimaryWindowForAnAction())==null?void 0:a.id})},this),this.sagas.run(function*(s){yield*f5([Vi(Ur.success,()=>{J.session.defaultSession.clearStorageData({origin:"https://ideas.termius.com/"}),J.session.defaultSession.clearStorageData({origin:"https://ideas.teams.termius.com/"})}),Vi(mZe,r),Vi(ZB,r),Vi(P9,r),Vi(rEe,({payload:{title:a,windowId:l}})=>{var c;(c=J.BrowserWindow.fromId(l))==null||c.setTitle(a?`${J.app.name} - ${a}`:J.app.name)}),Vi(D0e,()=>{KO()&&i()}),Vi(oxe,({payload:{provider:a,requestId:l}})=>{J.shell.openExternal(aD(a,l))}),Vi(axe,({payload:{email:a,requestId:l}})=>{const c=new URLSearchParams;c.append("method","desktop-sign-in"),c.append("email",a),c.append("request",l),J.shell.openExternal(`https://account.termius.com/enterprise/domain#${c.toString()}`)}),aI(ZD,function*(l){if(n!=null&&n.includes("live-terminals")){yield*Ud(hN(!0));return}const c=yield*Dd(()=>s.showPrimaryWindowForAnAction());if(c==null)throw new Error("no window available to show onboarding");return yield*k0e(D1e,{targetWindowId:c.id,from:l})}),aI(eZe,function*(){const l=yield*Dd(()=>s.showPrimaryWindowForAnAction());if(l==null)throw new Error("No window available");return l.id})])},this),J.app.on("open-url",(o,s)=>{o.preventDefault(),this.tryHandleDeeplink(s)}),this.execAnalyticsReceiver.start()}tryHandleDeeplink(n){try{const{url:r,protocol:i}=d_e(n);if(r.pathname==="/continue-sso"){this.store.dispatch(yg({urlscheme:i,featureName:"SSO"}));const o=r.searchParams,s=o.get("email"),a=o.get("firebaseToken"),l=o.get("requestId");if(s==null||a==null||l==null)throw new Error("missing argument");this.store.dispatch(sxe({email:s,firebaseToken:a,requestId:l}))}if(r.pathname==="/continue-enterprise-sso"){this.store.dispatch(yg({urlscheme:i,featureName:"SSO"}));const o=r.searchParams,s=o.get("accessToken"),a=o.get("requestId");if(s==null||a==null){const l="Cannot continue enterprise sso. Missing argument: ";Bs(s==null,`${l}accessToken`),Bs(a==null,`${l}requestId`);return}this.store.dispatch(lxe({accessToken:s,requestId:a}))}if(r.pathname==="/host-sharing"){this.store.dispatch(yg({urlscheme:i,featureName:"Connect via link"}));const o=this.showLastFocusedWindow(),s=s_e(r);this.store.dispatch(JBe({windowId:o,...s}))}if(r.hostname==="live-terminals"){this.store.dispatch(yg({urlscheme:i,featureName:"Terminal Sharing"}));const o=this.showLastFocusedWindow(),s=pEe(r);this.store.dispatch(qBe({windowId:o,connectionOrigin:"Live Terminal Link",...s}))}if(r.protocol==="ssh:"){this.store.dispatch(yg({urlscheme:i,featureName:"Connect via link"}));const o=this.showLastFocusedWindow(),s=a_e(r);this.store.dispatch(jBe({windowId:o,...s}))}}catch{}}showLastFocusedWindow(){const n=this.windows[this.windows.length-1];return n.browserWindow.show(),n.id}}HJ();vt.macOS()&&J.systemPreferences.setUserDefault("ApplePressAndHoldEnabled","boolean",!1);process.on("uncaughtException",e=>{En.exception("An uncaught exception in the main process",e)});process.on("unhandledRejection",e=>{En.exception("An uncaught rejection in the main process",e)});!J.app.requestSingleInstanceLock()&&!vt.mas()&&J.app.exit();let iR=null;J.app.on("will-finish-launching",()=>{J.app.on("open-url",async(e,t)=>{e.preventDefault(),iR=t||null})});J.app.on("ready",async()=>{En.info("App is ready"),uR.initialize(),zZ.open({version:J.app.getVersion(),deeplink:iR}),iR=null});eN.forEach(e=>{J.app.setAsDefaultProtocolClient(e)});
//# sourceMappingURL=main-process.js.map
