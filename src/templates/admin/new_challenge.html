{% extends "base.html" %}

{% block content %}
<!-- New Challenge Page Header -->
<section class="page-header admin-page-header">
    <div class="admin-page-title">
        <div class="admin-page-title-content">
            <span class="page-kicker">
                <span class="material-symbols-outlined">add_circle</span>
                <span>创作模式</span>
            </span>
            <h1>创建新题目</h1>
            <div class="admin-toolbar">
                <a class="md3-btn md3-btn--secondary" href="{{ url_for('admin.admin_challenges') }}">
                    <span class="material-symbols-outlined">arrow_back</span>
                    <span>返回列表</span>
                </a>
                <a class="md3-btn md3-btn--tertiary" href="{{ url_for('public.logout') }}">
                    <span class="material-symbols-outlined">logout</span>
                    <span>退出登录</span>
                </a>
            </div>
            <p>为选手准备全新的喵系挑战，别忘了检查 flag 的格式喵～</p>
        </div>
        <div class="admin-page-actions">
            <div class="admin-highlight">
                <div class="highlight-header">
                    <p class="highlight-label">创建指南</p>
                    <p class="highlight-value">新题目</p>
                </div>
                <div class="admin-mini-stats">
                    <div class="mini-stat-item">
                        <span class="dot online"></span>
                        <span>填写基础信息</span>
                    </div>
                    <div class="mini-stat-item">
                        <span class="dot draft"></span>
                        <span>添加 Flag 阶段</span>
                    </div>
                    <div class="mini-stat-item">
                        <span class="dot draft"></span>
                        <span>创建后可添加提示</span>
                    </div>
                </div>
                <p class="highlight-note">题目总分 = 所有 Flag 阶段分值之和</p>
            </div>
        </div>
    </div>
</section>

<!-- New Challenge Form -->
<section class="admin-section">
    <div class="admin-content-card">
        <div class="admin-card-header">
            <div class="admin-card-header-content">
                <h2>题目设置</h2>
                <p>完善基础信息和故事背景。创建后将引导你添加 Flag 阶段。</p>
            </div>
        </div>
        <form method="post" class="challenge-form" style="padding: var(--md3-space-2xl);">
        <div class="form-field">
            <label for="title">题目名称</label>
            <input type="text" id="title" name="title" required>
        </div>

        <div class="form-field">
            <label for="category">分类</label>
            <select id="category" name="category" required>
                {% for option in category_choices %}
                    <option value="{{ option.value }}">{{ option.label }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-field">
            <label for="difficulty">难度</label>
            <select id="difficulty" name="difficulty" required>
                {% for option in difficulty_choices %}
                    <option value="{{ option.value }}">{{ option.label }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-field full">
            <label for="summary">题目简介</label>
            <textarea id="summary" name="summary" rows="3" placeholder="一句话让选手了解题目亮点" required></textarea>
        </div>

        <div class="form-field full">
            <label for="content">题目内容</label>
            <textarea id="content" name="content" rows="8" placeholder="详细的题目背景与挑战说明" required></textarea>
        </div>

        <div class="form-field inline">
            <label class="switch" for="is_visible">
                <input type="checkbox" id="is_visible" name="is_visible" checked>
                <span>在官网展示</span>
            </label>
        </div>

        <div class="form-actions full">
            <button type="submit" class="md3-btn">
                <span class="material-symbols-outlined">check_circle</span>
                <span>立即创建</span>
            </button>
            <a class="md3-btn md3-btn--secondary" href="{{ url_for('admin.admin_challenges') }}">
                <span class="material-symbols-outlined">cancel</span>
                <span>取消</span>
            </a>
        </div>
    </form>
    </div>
</section>
{% endblock %}
